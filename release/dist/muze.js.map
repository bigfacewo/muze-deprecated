{"version":3,"sources":["webpack://muze/webpack/universalModuleDefinition","webpack://muze/webpack/bootstrap","webpack://muze/DataModel/webpack/universalModuleDefinition","webpack://muze/DataModel/webpack/bootstrap","webpack://muze/DataModel/src/index.js","webpack://muze/DataModel/src/enums/data-format.js","webpack://muze/DataModel/src/enums/dimension-subtype.js","webpack://muze/DataModel/src/enums/measure-subtype.js","webpack://muze/DataModel/src/enums/field-type.js","webpack://muze/DataModel/src/enums/filtering-mode.js","webpack://muze/DataModel/src/enums/group-by-functions.js","webpack://muze/DataModel/src/utils/date-time-formatter.js","webpack://muze/DataModel/src/utils/column-major.js","webpack://muze/DataModel/src/utils/extend2.js","webpack://muze/DataModel/src/utils/helper.js","webpack://muze/DataModel/src/field-store.js","webpack://muze/DataModel/src/value.js","webpack://muze/DataModel/src/operator/row-diffset-iterator.js","webpack://muze/DataModel/src/invalid-aware-types.js","webpack://muze/DataModel/src/constants/index.js","webpack://muze/DataModel/src/operator/get-common-schema.js","webpack://muze/DataModel/src/operator/cross-product.js","webpack://muze/DataModel/src/operator/merge-sort.js","webpack://muze/DataModel/src/operator/sort.js","webpack://muze/DataModel/src/operator/data-builder.js","webpack://muze/DataModel/src/operator/difference.js","webpack://muze/DataModel/src/operator/group-by-function.js","webpack://muze/DataModel/src/utils/reducer-store.js","webpack://muze/DataModel/src/operator/natural-join-filter-function.js","webpack://muze/DataModel/src/operator/union.js","webpack://muze/DataModel/src/operator/outer-join.js","webpack://muze/DataModel/src/fields/partial-field/index.js","webpack://muze/DataModel/src/fields/field/index.js","webpack://muze/DataModel/src/fields/dimension/index.js","webpack://muze/DataModel/src/fields/measure/index.js","webpack://muze/DataModel/src/fields/parsers/field-parser/index.js","webpack://muze/DataModel/src/fields/parsers/categorical-parser/index.js","webpack://muze/DataModel/src/fields/categorical/index.js","webpack://muze/DataModel/src/fields/parsers/temporal-parser/index.js","webpack://muze/DataModel/src/fields/helper.js","webpack://muze/DataModel/src/fields/temporal/index.js","webpack://muze/DataModel/src/fields/parsers/binned-parser/index.js","webpack://muze/DataModel/src/fields/binned/index.js","webpack://muze/DataModel/src/fields/parsers/continuous-parser/index.js","webpack://muze/DataModel/src/fields/continuous/index.js","webpack://muze/DataModel/src/fields/parsers/id-parser.js","webpack://muze/DataModel/src/fields/id/index.js","webpack://muze/DataModel/src/fields/field-registry.js","webpack://muze/DataModel/src/field-creator.js","webpack://muze/DataModel/src/default-config.js","webpack://muze/DataModel/src/converter/model/dataConverter.js","webpack://muze/DataModel/node_modules/d3-dsv/src/dsv.js","webpack://muze/DataModel/src/converter/utils/dsv-arr.js","webpack://muze/DataModel/src/converter/utils/dsv-str.js","webpack://muze/DataModel/src/converter/defaultConverters/dsvStringConverter.js","webpack://muze/DataModel/src/converter/utils/flat-json.js","webpack://muze/DataModel/src/converter/defaultConverters/jsonConverter.js","webpack://muze/DataModel/src/converter/defaultConverters/dsvArrayConverter.js","webpack://muze/DataModel/src/converter/defaultConverters/autoConverter.js","webpack://muze/DataModel/src/converter/utils/auto-resolver.js","webpack://muze/DataModel/src/converter/dataConverterStore.js","webpack://muze/DataModel/src/helper.js","webpack://muze/DataModel/src/relation.js","webpack://muze/DataModel/src/datamodel.js","webpack://muze/DataModel/src/operator/group-by.js","webpack://muze/DataModel/src/operator/bucket-creator.js","webpack://muze/DataModel/src/stats/index.js","webpack://muze/DataModel/src/export.js","webpack://muze/DataModel/src/operator/compose.js","webpack://muze/DataModel/src/operator/pure-operators.js","webpack://muze/DataModel/src/operator/natural-join.js","webpack://muze/(webpack)/buildin/module.js","webpack://muze/./packages/muze-utils/node_modules/fusioncharts-smartlabel/lib/SmartlabelManager.js","webpack://muze/./packages/muze-utils/node_modules/fusioncharts-smartlabel/lib/lib.js","webpack://muze/hyperdis/webpack/universalModuleDefinition","webpack://muze/hyperdis/webpack/bootstrap","webpack://muze/hyperdis/src/utils/set.js","webpack://muze/hyperdis/src/utils/index.js","webpack://muze/hyperdis/src/graph-node.js","webpack://muze/hyperdis/src/electric-node.js","webpack://muze/hyperdis/src/graph.js","webpack://muze/hyperdis/src/model.js","webpack://muze/hyperdis/src/index.js","webpack://muze/./packages/muze/src/index.js","webpack://muze/./packages/muze-utils/node_modules/fusioncharts-smartlabel/lib/container-manager.js","webpack://muze/./packages/muze-utils/node_modules/d3-array/src/ascending.js","webpack://muze/./packages/muze-utils/node_modules/d3-array/src/bisector.js","webpack://muze/./packages/muze-utils/node_modules/d3-array/src/bisect.js","webpack://muze/./packages/muze-utils/node_modules/d3-array/src/cross.js","webpack://muze/./packages/muze-utils/node_modules/d3-array/src/number.js","webpack://muze/./packages/muze-utils/node_modules/d3-array/src/array.js","webpack://muze/./packages/muze-utils/node_modules/d3-array/src/range.js","webpack://muze/./packages/muze-utils/node_modules/d3-array/src/ticks.js","webpack://muze/./packages/muze-utils/node_modules/d3-array/src/threshold/sturges.js","webpack://muze/./packages/muze-utils/node_modules/d3-array/src/quantile.js","webpack://muze/./packages/muze-utils/node_modules/d3-collection/src/map.js","webpack://muze/./packages/muze-utils/node_modules/d3-collection/src/nest.js","webpack://muze/./packages/muze-utils/node_modules/d3-collection/src/set.js","webpack://muze/./packages/muze-utils/node_modules/d3-scale/src/array.js","webpack://muze/./packages/muze-utils/node_modules/d3-scale/src/ordinal.js","webpack://muze/./packages/muze-utils/node_modules/d3-scale/src/band.js","webpack://muze/./packages/muze-utils/node_modules/d3-interpolate/src/number.js","webpack://muze/./packages/muze-utils/node_modules/d3-color/src/define.js","webpack://muze/./packages/muze-utils/node_modules/d3-color/src/color.js","webpack://muze/./packages/muze-utils/node_modules/d3-interpolate/src/basis.js","webpack://muze/./packages/muze-utils/node_modules/d3-interpolate/src/constant.js","webpack://muze/./packages/muze-utils/node_modules/d3-interpolate/src/color.js","webpack://muze/./packages/muze-utils/node_modules/d3-interpolate/src/rgb.js","webpack://muze/./packages/muze-utils/node_modules/d3-interpolate/src/numberArray.js","webpack://muze/./packages/muze-utils/node_modules/d3-interpolate/src/basisClosed.js","webpack://muze/./packages/muze-utils/node_modules/d3-interpolate/src/array.js","webpack://muze/./packages/muze-utils/node_modules/d3-interpolate/src/object.js","webpack://muze/./packages/muze-utils/node_modules/d3-interpolate/src/string.js","webpack://muze/./packages/muze-utils/node_modules/d3-interpolate/src/value.js","webpack://muze/./packages/muze-utils/node_modules/d3-interpolate/src/date.js","webpack://muze/./packages/muze-utils/node_modules/d3-interpolate/src/round.js","webpack://muze/./packages/muze-utils/node_modules/d3-scale/src/constant.js","webpack://muze/./packages/muze-utils/node_modules/d3-scale/src/number.js","webpack://muze/./packages/muze-utils/node_modules/d3-scale/src/continuous.js","webpack://muze/./packages/muze-utils/node_modules/d3-format/src/formatSpecifier.js","webpack://muze/./packages/muze-utils/node_modules/d3-format/src/formatDecimal.js","webpack://muze/./packages/muze-utils/node_modules/d3-format/src/formatPrefixAuto.js","webpack://muze/./packages/muze-utils/node_modules/d3-format/src/defaultLocale.js","webpack://muze/./packages/muze-utils/node_modules/d3-format/src/exponent.js","webpack://muze/./packages/muze-utils/node_modules/d3-format/src/formatTrim.js","webpack://muze/./packages/muze-utils/node_modules/d3-format/src/formatRounded.js","webpack://muze/./packages/muze-utils/node_modules/d3-format/src/formatTypes.js","webpack://muze/./packages/muze-utils/node_modules/d3-format/src/identity.js","webpack://muze/./packages/muze-utils/node_modules/d3-format/src/locale.js","webpack://muze/./packages/muze-utils/node_modules/d3-format/src/formatGroup.js","webpack://muze/./packages/muze-utils/node_modules/d3-format/src/formatNumerals.js","webpack://muze/./packages/muze-utils/node_modules/d3-format/src/precisionRound.js","webpack://muze/./packages/muze-utils/node_modules/d3-scale/src/tickFormat.js","webpack://muze/./packages/muze-utils/node_modules/d3-format/src/precisionPrefix.js","webpack://muze/./packages/muze-utils/node_modules/d3-format/src/precisionFixed.js","webpack://muze/./packages/muze-utils/node_modules/d3-scale/src/linear.js","webpack://muze/./packages/muze-utils/node_modules/d3-scale/src/identity.js","webpack://muze/./packages/muze-utils/node_modules/d3-scale/src/nice.js","webpack://muze/./packages/muze-utils/node_modules/d3-scale/src/log.js","webpack://muze/./packages/muze-utils/node_modules/d3-scale/src/pow.js","webpack://muze/./packages/muze-utils/node_modules/d3-scale/src/quantile.js","webpack://muze/./packages/muze-utils/node_modules/d3-scale/src/quantize.js","webpack://muze/./packages/muze-utils/node_modules/d3-scale/src/threshold.js","webpack://muze/./packages/muze-utils/node_modules/d3-time/src/interval.js","webpack://muze/./packages/muze-utils/node_modules/d3-time/src/year.js","webpack://muze/./packages/muze-utils/node_modules/d3-time/src/month.js","webpack://muze/./packages/muze-utils/node_modules/d3-time/src/duration.js","webpack://muze/./packages/muze-utils/node_modules/d3-time/src/week.js","webpack://muze/./packages/muze-utils/node_modules/d3-time/src/day.js","webpack://muze/./packages/muze-utils/node_modules/d3-time/src/hour.js","webpack://muze/./packages/muze-utils/node_modules/d3-time/src/minute.js","webpack://muze/./packages/muze-utils/node_modules/d3-time/src/second.js","webpack://muze/./packages/muze-utils/node_modules/d3-time/src/millisecond.js","webpack://muze/./packages/muze-utils/node_modules/d3-time/src/utcWeek.js","webpack://muze/./packages/muze-utils/node_modules/d3-time/src/utcDay.js","webpack://muze/./packages/muze-utils/node_modules/d3-time/src/utcYear.js","webpack://muze/./packages/muze-utils/node_modules/d3-time-format/src/locale.js","webpack://muze/./packages/muze-utils/node_modules/d3-time-format/src/defaultLocale.js","webpack://muze/./packages/muze-utils/node_modules/d3-scale/src/time.js","webpack://muze/./packages/muze-utils/node_modules/d3-time/src/utcMonth.js","webpack://muze/./packages/muze-utils/node_modules/d3-time/src/utcHour.js","webpack://muze/./packages/muze-utils/node_modules/d3-time/src/utcMinute.js","webpack://muze/./packages/muze-utils/node_modules/d3-scale/src/colors.js","webpack://muze/./packages/muze-utils/node_modules/d3-scale/src/category10.js","webpack://muze/./packages/muze-utils/node_modules/d3-scale/src/category20b.js","webpack://muze/./packages/muze-utils/node_modules/d3-scale/src/category20.js","webpack://muze/./packages/muze-utils/node_modules/d3-scale/src/category20c.js","webpack://muze/./packages/muze-utils/node_modules/d3-color/src/math.js","webpack://muze/./packages/muze-utils/node_modules/d3-color/src/cubehelix.js","webpack://muze/./packages/muze-utils/node_modules/d3-interpolate/src/cubehelix.js","webpack://muze/./packages/muze-utils/node_modules/d3-scale/src/cubehelix.js","webpack://muze/./packages/muze-utils/node_modules/d3-scale/src/rainbow.js","webpack://muze/./packages/muze-utils/node_modules/d3-scale/src/viridis.js","webpack://muze/./packages/muze-utils/node_modules/d3-scale/src/sequential.js","webpack://muze/./packages/muze-utils/node_modules/d3-scale-chromatic/src/colors.js","webpack://muze/./packages/muze-utils/node_modules/d3-scale-chromatic/src/categorical/Dark2.js","webpack://muze/./packages/muze-utils/node_modules/d3-scale-chromatic/src/categorical/Paired.js","webpack://muze/./packages/muze-utils/node_modules/d3-scale-chromatic/src/categorical/Accent.js","webpack://muze/./packages/muze-utils/node_modules/d3-scale-chromatic/src/categorical/Pastel1.js","webpack://muze/./packages/muze-utils/node_modules/d3-scale-chromatic/src/categorical/Pastel2.js","webpack://muze/./packages/muze-utils/node_modules/d3-scale-chromatic/src/categorical/Set1.js","webpack://muze/./packages/muze-utils/node_modules/d3-scale-chromatic/src/categorical/Set2.js","webpack://muze/./packages/muze-utils/node_modules/d3-scale-chromatic/src/categorical/Set3.js","webpack://muze/./packages/muze-utils/node_modules/d3-scale-chromatic/src/ramp.js","webpack://muze/./packages/muze-utils/node_modules/d3-scale-chromatic/src/sequential-single/Blues.js","webpack://muze/./packages/muze-utils/node_modules/d3-scale-chromatic/src/diverging/BrBG.js","webpack://muze/./packages/muze-utils/node_modules/d3-scale-chromatic/src/diverging/PRGn.js","webpack://muze/./packages/muze-utils/node_modules/d3-scale-chromatic/src/diverging/PiYG.js","webpack://muze/./packages/muze-utils/node_modules/d3-scale-chromatic/src/diverging/PuOr.js","webpack://muze/./packages/muze-utils/node_modules/d3-scale-chromatic/src/diverging/RdBu.js","webpack://muze/./packages/muze-utils/node_modules/d3-scale-chromatic/src/diverging/RdGy.js","webpack://muze/./packages/muze-utils/node_modules/d3-scale-chromatic/src/diverging/RdYlBu.js","webpack://muze/./packages/muze-utils/node_modules/d3-scale-chromatic/src/diverging/RdYlGn.js","webpack://muze/./packages/muze-utils/node_modules/d3-scale-chromatic/src/diverging/Spectral.js","webpack://muze/./packages/muze-utils/node_modules/d3-scale-chromatic/src/sequential-single/Greens.js","webpack://muze/./packages/muze-utils/node_modules/d3-scale-chromatic/src/sequential-single/Greys.js","webpack://muze/./packages/muze-utils/node_modules/d3-scale-chromatic/src/sequential-single/Oranges.js","webpack://muze/./packages/muze-utils/node_modules/d3-scale-chromatic/src/sequential-single/Purples.js","webpack://muze/./packages/muze-utils/node_modules/d3-scale-chromatic/src/sequential-single/Reds.js","webpack://muze/./packages/muze-utils/node_modules/d3-scale-chromatic/src/sequential-multi/viridis.js","webpack://muze/./packages/muze-utils/node_modules/d3-scale-chromatic/src/sequential-multi/rainbow.js","webpack://muze/./packages/muze-utils/node_modules/d3-scale-chromatic/src/sequential-multi/cubehelix.js","webpack://muze/./packages/muze-utils/node_modules/d3-scale-chromatic/src/sequential-multi/BuGn.js","webpack://muze/./packages/muze-utils/node_modules/d3-scale-chromatic/src/sequential-multi/BuPu.js","webpack://muze/./packages/muze-utils/node_modules/d3-scale-chromatic/src/sequential-multi/GnBu.js","webpack://muze/./packages/muze-utils/node_modules/d3-scale-chromatic/src/sequential-multi/OrRd.js","webpack://muze/./packages/muze-utils/node_modules/d3-scale-chromatic/src/sequential-multi/PuBuGn.js","webpack://muze/./packages/muze-utils/node_modules/d3-scale-chromatic/src/sequential-multi/PuBu.js","webpack://muze/./packages/muze-utils/node_modules/d3-scale-chromatic/src/sequential-multi/PuRd.js","webpack://muze/./packages/muze-utils/node_modules/d3-scale-chromatic/src/sequential-multi/RdPu.js","webpack://muze/./packages/muze-utils/node_modules/d3-scale-chromatic/src/sequential-multi/YlGnBu.js","webpack://muze/./packages/muze-utils/node_modules/d3-scale-chromatic/src/sequential-multi/YlGn.js","webpack://muze/./packages/muze-utils/node_modules/d3-scale-chromatic/src/sequential-multi/YlOrBr.js","webpack://muze/./packages/muze-utils/node_modules/d3-scale-chromatic/src/sequential-multi/YlOrRd.js","webpack://muze/./packages/muze-utils/src/enums/namespace.js","webpack://muze/./packages/muze-utils/src/quick-select.js","webpack://muze/./packages/muze-utils/src/r-tree.js","webpack://muze/./packages/muze-utils/src/enums/reserved-fields.js","webpack://muze/./packages/muze-utils/src/enums/common-props.js","webpack://muze/./packages/muze-utils/src/enums/constants.js","webpack://muze/./packages/muze-utils/node_modules/d3-axis/src/array.js","webpack://muze/./packages/muze-utils/node_modules/d3-axis/src/identity.js","webpack://muze/./packages/muze-utils/node_modules/d3-axis/src/axis.js","webpack://muze/./packages/muze-utils/node_modules/d3-shape/src/math.js","webpack://muze/./packages/muze-utils/node_modules/d3-shape/src/symbol/circle.js","webpack://muze/./packages/muze-utils/node_modules/d3-shape/src/symbol/cross.js","webpack://muze/./packages/muze-utils/node_modules/d3-shape/src/symbol/diamond.js","webpack://muze/./packages/muze-utils/node_modules/d3-shape/src/symbol/square.js","webpack://muze/./packages/muze-utils/node_modules/d3-shape/src/symbol/star.js","webpack://muze/./packages/muze-utils/node_modules/d3-shape/src/symbol/wye.js","webpack://muze/./packages/muze-utils/node_modules/d3-shape/src/symbol/triangle.js","webpack://muze/./packages/muze-utils/node_modules/d3-path/src/path.js","webpack://muze/./packages/muze-utils/node_modules/d3-shape/src/constant.js","webpack://muze/./packages/muze-utils/node_modules/d3-shape/src/order/none.js","webpack://muze/./packages/muze-utils/node_modules/d3-shape/src/order/ascending.js","webpack://muze/./packages/muze-utils/node_modules/d3-shape/src/order/descending.js","webpack://muze/./packages/muze-utils/node_modules/d3-shape/src/offset/none.js","webpack://muze/./packages/muze-utils/node_modules/d3-shape/src/array.js","webpack://muze/./packages/muze-utils/node_modules/d3-shape/src/stack.js","webpack://muze/./packages/muze-utils/node_modules/d3-shape/src/curve/linear.js","webpack://muze/./packages/muze-utils/node_modules/d3-shape/src/curve/step.js","webpack://muze/./packages/muze-utils/node_modules/d3-shape/src/curve/cardinal.js","webpack://muze/./packages/muze-utils/node_modules/d3-shape/src/curve/catmullRom.js","webpack://muze/./packages/muze-utils/node_modules/d3-shape/src/point.js","webpack://muze/./packages/muze-utils/node_modules/d3-shape/src/line.js","webpack://muze/./packages/muze-utils/node_modules/d3-shape/src/descending.js","webpack://muze/./packages/muze-utils/node_modules/d3-shape/src/identity.js","webpack://muze/./packages/muze-utils/node_modules/d3-shape/src/arc.js","webpack://muze/./packages/muze-utils/node_modules/d3-interpolate/src/hsl.js","webpack://muze/./packages/muze-utils/node_modules/d3-interpolate/src/piecewise.js","webpack://muze/./packages/muze-utils/node_modules/d3-ease/src/cubic.js","webpack://muze/./packages/muze-utils/node_modules/d3-ease/src/bounce.js","webpack://muze/./packages/muze-utils/node_modules/d3-ease/src/elastic.js","webpack://muze/./packages/muze-utils/node_modules/d3-ease/src/back.js","webpack://muze/./packages/muze-utils/node_modules/d3-ease/src/poly.js","webpack://muze/./packages/muze-utils/node_modules/d3-voronoi/src/constant.js","webpack://muze/./packages/muze-utils/node_modules/d3-voronoi/src/point.js","webpack://muze/./packages/muze-utils/node_modules/d3-voronoi/src/RedBlackTree.js","webpack://muze/./packages/muze-utils/node_modules/d3-voronoi/src/Edge.js","webpack://muze/./packages/muze-utils/node_modules/d3-voronoi/src/Cell.js","webpack://muze/./packages/muze-utils/node_modules/d3-voronoi/src/Circle.js","webpack://muze/./packages/muze-utils/node_modules/d3-voronoi/src/Beach.js","webpack://muze/./packages/muze-utils/node_modules/d3-voronoi/src/Diagram.js","webpack://muze/./packages/muze-utils/node_modules/d3-voronoi/src/voronoi.js","webpack://muze/./packages/muze-utils/src/DataSystem/selection.js","webpack://muze/./packages/muze-utils/src/DataSystem/dataSelect.js","webpack://muze/./packages/muze-utils/src/enums/stack-config.js","webpack://muze/./packages/muze-utils/src/common-utils.js","webpack://muze/./packages/muze-utils/node_modules/d3-ease/src/linear.js","webpack://muze/./packages/muze-utils/node_modules/d3-ease/src/circle.js","webpack://muze/./packages/muze-utils/node_modules/d3-shape/src/symbol.js","webpack://muze/./packages/muze-utils/node_modules/d3-shape/src/offset/diverging.js","webpack://muze/./packages/muze-utils/node_modules/d3-shape/src/offset/expand.js","webpack://muze/./packages/muze-utils/node_modules/d3-shape/src/offset/wiggle.js","webpack://muze/./packages/muze-utils/node_modules/d3-shape/src/area.js","webpack://muze/./packages/muze-utils/node_modules/d3-shape/src/pie.js","webpack://muze/./packages/muze-utils/node_modules/d3-selection/src/selector.js","webpack://muze/./packages/muze-utils/node_modules/d3-selection/src/selectorAll.js","webpack://muze/./packages/muze-utils/node_modules/d3-selection/src/matcher.js","webpack://muze/./packages/muze-utils/node_modules/d3-selection/src/selection/sparse.js","webpack://muze/./packages/muze-utils/node_modules/d3-selection/src/selection/enter.js","webpack://muze/./packages/muze-utils/node_modules/d3-selection/src/constant.js","webpack://muze/./packages/muze-utils/node_modules/d3-selection/src/selection/data.js","webpack://muze/./packages/muze-utils/node_modules/d3-selection/src/selection/sort.js","webpack://muze/./packages/muze-utils/node_modules/d3-selection/src/selection/call.js","webpack://muze/./packages/muze-utils/node_modules/d3-selection/src/namespaces.js","webpack://muze/./packages/muze-utils/node_modules/d3-selection/src/namespace.js","webpack://muze/./packages/muze-utils/node_modules/d3-selection/src/selection/attr.js","webpack://muze/./packages/muze-utils/node_modules/d3-selection/src/window.js","webpack://muze/./packages/muze-utils/node_modules/d3-selection/src/selection/style.js","webpack://muze/./packages/muze-utils/node_modules/d3-selection/src/selection/classed.js","webpack://muze/./packages/muze-utils/node_modules/d3-selection/src/selection/text.js","webpack://muze/./packages/muze-utils/node_modules/d3-selection/src/selection/html.js","webpack://muze/./packages/muze-utils/node_modules/d3-selection/src/selection/raise.js","webpack://muze/./packages/muze-utils/node_modules/d3-selection/src/selection/lower.js","webpack://muze/./packages/muze-utils/node_modules/d3-selection/src/creator.js","webpack://muze/./packages/muze-utils/node_modules/d3-selection/src/selection/insert.js","webpack://muze/./packages/muze-utils/node_modules/d3-selection/src/selection/remove.js","webpack://muze/./packages/muze-utils/node_modules/d3-selection/src/selection/clone.js","webpack://muze/./packages/muze-utils/node_modules/d3-selection/src/selection/on.js","webpack://muze/./packages/muze-utils/node_modules/d3-selection/src/selection/dispatch.js","webpack://muze/./packages/muze-utils/node_modules/d3-selection/src/selection/index.js","webpack://muze/./packages/muze-utils/node_modules/d3-selection/src/selection/select.js","webpack://muze/./packages/muze-utils/node_modules/d3-selection/src/selection/selectAll.js","webpack://muze/./packages/muze-utils/node_modules/d3-selection/src/selection/filter.js","webpack://muze/./packages/muze-utils/node_modules/d3-selection/src/selection/exit.js","webpack://muze/./packages/muze-utils/node_modules/d3-selection/src/selection/join.js","webpack://muze/./packages/muze-utils/node_modules/d3-selection/src/selection/merge.js","webpack://muze/./packages/muze-utils/node_modules/d3-selection/src/selection/order.js","webpack://muze/./packages/muze-utils/node_modules/d3-selection/src/selection/nodes.js","webpack://muze/./packages/muze-utils/node_modules/d3-selection/src/selection/node.js","webpack://muze/./packages/muze-utils/node_modules/d3-selection/src/selection/size.js","webpack://muze/./packages/muze-utils/node_modules/d3-selection/src/selection/empty.js","webpack://muze/./packages/muze-utils/node_modules/d3-selection/src/selection/each.js","webpack://muze/./packages/muze-utils/node_modules/d3-selection/src/selection/property.js","webpack://muze/./packages/muze-utils/node_modules/d3-selection/src/selection/append.js","webpack://muze/./packages/muze-utils/node_modules/d3-selection/src/selection/datum.js","webpack://muze/./packages/muze-utils/node_modules/d3-selection/src/select.js","webpack://muze/./packages/muze-utils/node_modules/d3-selection/src/point.js","webpack://muze/./packages/muze-utils/node_modules/d3-dispatch/src/dispatch.js","webpack://muze/./packages/muze-utils/node_modules/d3-selection/src/sourceEvent.js","webpack://muze/./packages/muze-utils/node_modules/d3-selection/src/mouse.js","webpack://muze/./packages/muze-utils/node_modules/d3-selection/src/touch.js","webpack://muze/./packages/muze-utils/node_modules/d3-drag/src/noevent.js","webpack://muze/./packages/muze-utils/node_modules/d3-drag/src/nodrag.js","webpack://muze/./packages/muze-utils/node_modules/d3-drag/src/constant.js","webpack://muze/./packages/muze-utils/node_modules/d3-drag/src/event.js","webpack://muze/./packages/muze-utils/node_modules/d3-drag/src/drag.js","webpack://muze/./packages/muze-utils/node_modules/d3-timer/src/timer.js","webpack://muze/./packages/muze-utils/node_modules/d3-timer/src/timeout.js","webpack://muze/./packages/muze-utils/node_modules/d3-transition/src/transition/schedule.js","webpack://muze/./packages/muze-utils/node_modules/d3-transition/src/interrupt.js","webpack://muze/./packages/muze-utils/node_modules/d3-interpolate/src/transform/parse.js","webpack://muze/./packages/muze-utils/node_modules/d3-interpolate/src/transform/decompose.js","webpack://muze/./packages/muze-utils/node_modules/d3-interpolate/src/transform/index.js","webpack://muze/./packages/muze-utils/node_modules/d3-transition/src/transition/tween.js","webpack://muze/./packages/muze-utils/node_modules/d3-transition/src/transition/interpolate.js","webpack://muze/./packages/muze-utils/node_modules/d3-transition/src/transition/remove.js","webpack://muze/./packages/muze-utils/node_modules/d3-transition/src/transition/selection.js","webpack://muze/./packages/muze-utils/node_modules/d3-transition/src/transition/style.js","webpack://muze/./packages/muze-utils/node_modules/d3-transition/src/transition/textTween.js","webpack://muze/./packages/muze-utils/node_modules/d3-transition/src/transition/index.js","webpack://muze/./packages/muze-utils/node_modules/d3-transition/src/transition/select.js","webpack://muze/./packages/muze-utils/node_modules/d3-transition/src/transition/selectAll.js","webpack://muze/./packages/muze-utils/node_modules/d3-transition/src/transition/filter.js","webpack://muze/./packages/muze-utils/node_modules/d3-transition/src/transition/merge.js","webpack://muze/./packages/muze-utils/node_modules/d3-transition/src/transition/transition.js","webpack://muze/./packages/muze-utils/node_modules/d3-transition/src/transition/on.js","webpack://muze/./packages/muze-utils/node_modules/d3-transition/src/transition/attr.js","webpack://muze/./packages/muze-utils/node_modules/d3-transition/src/transition/attrTween.js","webpack://muze/./packages/muze-utils/node_modules/d3-transition/src/transition/styleTween.js","webpack://muze/./packages/muze-utils/node_modules/d3-transition/src/transition/text.js","webpack://muze/./packages/muze-utils/node_modules/d3-transition/src/transition/delay.js","webpack://muze/./packages/muze-utils/node_modules/d3-transition/src/transition/duration.js","webpack://muze/./packages/muze-utils/node_modules/d3-transition/src/transition/ease.js","webpack://muze/./packages/muze-utils/node_modules/d3-transition/src/transition/end.js","webpack://muze/./packages/muze-utils/node_modules/d3-transition/src/selection/transition.js","webpack://muze/./packages/muze-utils/node_modules/d3-transition/src/selection/index.js","webpack://muze/./packages/muze-utils/node_modules/d3-transition/src/selection/interrupt.js","webpack://muze/./packages/muze-utils/src/renderer-utils.js","webpack://muze/./packages/muze-utils/src/store.js","webpack://muze/./packages/muze-utils/src/lifecycle-manager/event-list.js","webpack://muze/./packages/muze-utils/src/lifecycle-manager/lifecycle-manager.js","webpack://muze/./packages/muze-utils/src/lifecycle-manager/index.js","webpack://muze/./packages/muze-utils/src/lifecycle-manager/helper.js","webpack://muze/./packages/muze-utils/src/index.js","webpack://muze/./packages/visual-layer/src/enums/constants.js","webpack://muze/./packages/visual-layer/src/simple-layer/simple-layer.js","webpack://muze/./packages/visual-layer/src/enums/props.js","webpack://muze/./packages/visual-layer/src/base-layer/props.js","webpack://muze/./packages/muze-axis/src/enums/axis-orientation.js","webpack://muze/./packages/muze-axis/src/enums/scale-type.js","webpack://muze/./packages/muze-axis/src/enums/constants.js","webpack://muze/./packages/muze-axis/src/scale-creator.js","webpack://muze/./packages/muze-axis/src/cartesian-axis/default-config.js","webpack://muze/./packages/muze-axis/src/axis-renderer.js","webpack://muze/./packages/muze-axis/src/cartesian-axis/skip-ticks.js","webpack://muze/./packages/muze-axis/src/cartesian-axis/space-setter.js","webpack://muze/./packages/muze-axis/src/cartesian-axis/helper.js","webpack://muze/./packages/muze-axis/src/cartesian-axis/props.js","webpack://muze/./packages/muze-axis/src/cartesian-axis/simple-axis.js","webpack://muze/./packages/muze-axis/src/cartesian-axis/interpolators/linear.js","webpack://muze/./packages/muze-axis/src/cartesian-axis/interpolators/log.js","webpack://muze/./packages/muze-axis/src/cartesian-axis/interpolators/pow.js","webpack://muze/./packages/muze-axis/src/cartesian-axis/continous-axis.js","webpack://muze/./packages/muze-axis/src/cartesian-axis/band-axis.js","webpack://muze/./packages/muze-axis/src/cartesian-axis/time-axis.js","webpack://muze/./packages/muze-axis/src/color-axis/color-maps.js","webpack://muze/./packages/muze-axis/src/color-axis/defaults.js","webpack://muze/./packages/muze-axis/src/color-axis/props.js","webpack://muze/./packages/muze-axis/src/helper.js","webpack://muze/./packages/muze-axis/src/color-axis/color-strategy.js","webpack://muze/./packages/muze-axis/src/color-axis/color-axis.js","webpack://muze/./packages/muze-axis/src/size-axis/defaults.js","webpack://muze/./packages/muze-axis/src/size-axis/size-strategy.js","webpack://muze/./packages/muze-axis/src/size-axis/props.js","webpack://muze/./packages/muze-axis/src/size-axis/size-axis.js","webpack://muze/./packages/muze-axis/src/shape-axis/defaults.js","webpack://muze/./packages/muze-axis/src/shape-axis/props.js","webpack://muze/./packages/muze-axis/src/shape-axis/shape-axis.js","webpack://muze/./packages/muze-axis/src/shape-axis/helper.js","webpack://muze/./packages/muze-axis/src/polar-axis/props.js","webpack://muze/./packages/muze-axis/src/polar-axis/angle-axis.js","webpack://muze/./packages/visual-group/src/enums/constants.js","webpack://muze/./packages/muze-axis/src/polar-axis/radius-axis.js","webpack://muze/./packages/muze-axis/src/data-type-scale-map.js","webpack://muze/./packages/transform/src/group-transform/index.js","webpack://muze/./packages/transform/src/identity-transform/index.js","webpack://muze/./packages/transform/src/transform-factory/index.js","webpack://muze/./packages/transform/src/enums/transform-type.js","webpack://muze/./packages/transform/src/stack-transform/index.js","webpack://muze/./packages/visual-layer/src/helpers/index.js","webpack://muze/./packages/visual-layer/src/base-layer/local-options.js","webpack://muze/./packages/visual-layer/src/base-layer/listener-map.js","webpack://muze/./packages/visual-layer/src/base-layer/helper.js","webpack://muze/./packages/visual-layer/src/base-layer/base-mixin.js","webpack://muze/./packages/visual-layer/src/base-layer/base-layer.js","webpack://muze/./packages/visual-layer/src/layers/line/renderer.js","webpack://muze/./packages/visual-layer/src/layers/line/default-config.js","webpack://muze/./packages/visual-layer/src/layers/line/line-mixin.js","webpack://muze/./packages/visual-layer/src/layers/area/default-config.js","webpack://muze/./packages/visual-layer/src/layers/area/renderer.js","webpack://muze/./packages/visual-layer/src/layers/area/area-mixin.js","webpack://muze/./packages/visual-layer/src/layers/area/area.js","webpack://muze/./packages/visual-layer/src/layers/arc/default-config.js","webpack://muze/./packages/visual-layer/src/layers/arc/arc-mixin.js","webpack://muze/./packages/visual-layer/src/layers/arc/arc-helper.js","webpack://muze/./packages/visual-layer/src/layers/arc/arc.js","webpack://muze/./packages/visual-layer/src/layers/line/line.js","webpack://muze/./packages/visual-layer/src/layers/text/renderer.js","webpack://muze/./packages/visual-layer/src/layers/text/default-config.js","webpack://muze/./packages/visual-layer/src/layers/text/text-mixin.js","webpack://muze/./packages/visual-layer/src/layers/text/text.js","webpack://muze/./packages/visual-layer/src/layers/point/renderer.js","webpack://muze/./packages/visual-layer/src/layers/point/default-config.js","webpack://muze/./packages/visual-layer/src/layers/point/helper.js","webpack://muze/./packages/visual-layer/src/layers/point/point-mixin.js","webpack://muze/./packages/visual-layer/src/layers/point/point.js","webpack://muze/./packages/visual-layer/src/layers/bar/renderer.js","webpack://muze/./packages/visual-layer/src/layers/bar/default-config.js","webpack://muze/./packages/visual-layer/src/layers/bar/bar-helper.js","webpack://muze/./packages/visual-layer/src/layers/bar/bar-mixin.js","webpack://muze/./packages/visual-layer/src/layers/bar/bar.js","webpack://muze/./packages/visual-layer/src/layers/tick/default-config.js","webpack://muze/./packages/visual-layer/src/layers/tick/renderer.js","webpack://muze/./packages/visual-layer/src/layers/tick/tick-mixin.js","webpack://muze/./packages/visual-layer/src/layers/tick/helper.js","webpack://muze/./packages/visual-layer/src/layers/tick/tick.js","webpack://muze/./packages/visual-layer/src/enums/layer-types.js","webpack://muze/./packages/visual-layer/src/layer-factory/layer-factory.js","webpack://muze/./packages/visual-layer/src/layer-factory/index.js","webpack://muze/./packages/visual-layer/src/defaults.js","webpack://muze/./packages/visual-layer/src/layer-registry.js","webpack://muze/./packages/visual-layer/src/index.js","webpack://muze/./packages/visual-unit/src/helper/index.js","webpack://muze/./packages/visual-unit/src/enums/reactive-props.js","webpack://muze/./packages/visual-unit/src/enums/constants.js","webpack://muze/./packages/muze-firebolt/src/enums/actions.js","webpack://muze/./packages/muze-firebolt/src/enums/selection.js","webpack://muze/./packages/muze-firebolt/src/selection-set/index.js","webpack://muze/./packages/muze-firebolt/src/selection-set/selection-set.js","webpack://muze/./packages/muze-firebolt/src/helper/index.js","webpack://muze/./packages/muze-firebolt/src/firebolt.js","webpack://muze/./packages/muze-firebolt/src/entry-exit-set.js","webpack://muze/./packages/muze-firebolt/src/actions/behavioural/generic.js","webpack://muze/./packages/muze-firebolt/src/actions/behavioural/volatile.js","webpack://muze/./packages/muze-firebolt/src/enums/behaviours.js","webpack://muze/./packages/muze-firebolt/src/actions/behavioural/highlight.js","webpack://muze/./packages/muze-firebolt/src/actions/behavioural/brush.js","webpack://muze/./packages/muze-firebolt/src/actions/behavioural/filter.js","webpack://muze/./packages/muze-firebolt/src/actions/behavioural/persistent.js","webpack://muze/./packages/muze-firebolt/src/actions/behavioural/select.js","webpack://muze/./packages/muze-firebolt/src/actions/physical/helpers/drag-action-config.js","webpack://muze/./packages/muze-firebolt/src/actions/physical/helpers/drag-event.js","webpack://muze/./packages/muze-firebolt/src/actions/physical/hover.js","webpack://muze/./packages/muze-firebolt/src/actions/physical/helpers/index.js","webpack://muze/./packages/muze-firebolt/src/actions/physical/selection-box-drag.js","webpack://muze/./packages/muze-firebolt/src/actions/physical/click.js","webpack://muze/./packages/muze-firebolt/src/actions/physical/index.js","webpack://muze/./packages/muze-firebolt/src/actions/physical/drag.js","webpack://muze/./packages/muze-firebolt/src/actions/physical/longtouch.js","webpack://muze/./packages/muze-firebolt/src/actions/physical/touch-drag.js","webpack://muze/./packages/muze-firebolt/src/enums/side-effects.js","webpack://muze/./packages/muze-firebolt/src/side-effects/generic/props.js","webpack://muze/./packages/muze-firebolt/src/side-effects/generic/index.js","webpack://muze/./packages/muze-firebolt/src/side-effects/generic/generic-sideeffect.js","webpack://muze/./packages/muze-firebolt/src/side-effects/surrogate.js","webpack://muze/./packages/muze-firebolt/src/side-effects/spawnable.js","webpack://muze/./packages/muze-firebolt/src/side-effects/selection-box/helper.js","webpack://muze/./packages/muze-firebolt/src/side-effects/selection-box/index.js","webpack://muze/./packages/muze-firebolt/src/enums/constants.js","webpack://muze/./packages/muze-tooltip/src/default-config.js","webpack://muze/./packages/muze-tooltip/src/constants.js","webpack://muze/./packages/muze-tooltip/src/content.js","webpack://muze/./packages/muze-tooltip/src/tooltip.js","webpack://muze/./packages/muze-tooltip/src/helper.js","webpack://muze/./packages/muze-firebolt/src/enums/tooltip-strategies.js","webpack://muze/./packages/muze-firebolt/src/side-effects/tooltip/strategies.js","webpack://muze/./packages/muze-firebolt/src/side-effects/helper/index.js","webpack://muze/./packages/muze-firebolt/src/side-effects/tooltip/index.js","webpack://muze/./packages/muze-firebolt/src/side-effects/fragmented-tooltip/index.js","webpack://muze/./packages/muze-firebolt/src/side-effects/crossline/index.js","webpack://muze/./packages/muze-firebolt/src/side-effects/plot-highlighter/strategy.js","webpack://muze/./packages/muze-firebolt/src/side-effects/plot-highlighter/index.js","webpack://muze/./packages/muze-firebolt/src/side-effects/filter/index.js","webpack://muze/./packages/muze-firebolt/src/side-effects/anchors/index.js","webpack://muze/./packages/muze-firebolt/src/side-effects/persistent-anchors.js","webpack://muze/./packages/muze-firebolt/src/side-effects/brush-anchors.js","webpack://muze/./packages/muze-firebolt/src/side-effects/axis-labels-highlighter/index.js","webpack://muze/./packages/muze-firebolt/src/behaviour-effect-map.js","webpack://muze/./packages/muze-firebolt/src/registry.js","webpack://muze/./packages/visual-unit/src/firebolt/payload-generator.js","webpack://muze/./packages/visual-unit/src/firebolt/helper.js","webpack://muze/./packages/visual-unit/src/firebolt/index.js","webpack://muze/./packages/visual-unit/src/firebolt/action-behaviour-map.js","webpack://muze/./packages/visual-unit/src/firebolt/behaviours/brush.js","webpack://muze/./packages/visual-unit/src/enums/behaviours.js","webpack://muze/./packages/visual-unit/src/helper/grid-lines.js","webpack://muze/./packages/visual-unit/src/listener-map.js","webpack://muze/./packages/visual-unit/src/props.js","webpack://muze/./packages/visual-unit/src/default-config.js","webpack://muze/./packages/visual-unit/src/local-options.js","webpack://muze/./packages/visual-unit/src/firebolt/behaviours/pseudo-select.js","webpack://muze/./packages/visual-unit/src/visual-unit.js","webpack://muze/./packages/visual-group/src/variable/variable.js","webpack://muze/./packages/visual-group/src/variable/composed-vars.js","webpack://muze/./packages/visual-group/src/variable/simple-var.js","webpack://muze/./packages/visual-group/src/encoder/field-sanitizer.js","webpack://muze/./packages/visual-group/src/enums/defaults.js","webpack://muze/./packages/visual-group/src/group-helper/cell-border-applier.js","webpack://muze/./packages/visual-group/src/group-helper/group-utils.js","webpack://muze/./packages/visual-group/src/encoder/props.js","webpack://muze/./packages/visual-group/src/encoder/visual-encoder.js","webpack://muze/./packages/visual-group/src/enums/scale-maps.js","webpack://muze/./packages/visual-group/src/group-helper/matrix-model.js","webpack://muze/./packages/visual-group/src/group-helper/cell-creator.js","webpack://muze/./packages/visual-group/src/group-helper/resolver-props.js","webpack://muze/./packages/visual-group/src/group-helper/matrix-resolver.js","webpack://muze/./packages/visual-group/src/data-type-scale-map.js","webpack://muze/./packages/visual-group/src/encoder/encoder-helper.js","webpack://muze/./packages/visual-group/src/encoder/cartesian-encoder.js","webpack://muze/./packages/visual-group/src/encoder/polar-encoder.js","webpack://muze/./packages/visual-group/src/encoder/retinal-encoder.js","webpack://muze/./packages/visual-group/src/visual-group/local-options.js","webpack://muze/./packages/visual-group/src/simple-group/simple-group.js","webpack://muze/./packages/visual-group/src/visual-group/value-matrix.js","webpack://muze/./packages/visual-group/src/visual-group/helper.js","webpack://muze/./packages/visual-group/src/visual-group/change-listener.js","webpack://muze/./packages/visual-group/src/visual-group/props.js","webpack://muze/./packages/visual-group/src/visual-group/visual-group.js","webpack://muze/./packages/muze-legend/src/firebolt/behavioural/select.js","webpack://muze/./packages/muze-legend/src/firebolt/action-behaviour-map.js","webpack://muze/./packages/muze-legend/src/firebolt/behaviour-effect-map.js","webpack://muze/./packages/muze-legend/src/enums/behaviours.js","webpack://muze/./packages/muze-legend/src/enums/side-effects.js","webpack://muze/./packages/muze-legend/src/firebolt/helper.js","webpack://muze/./packages/muze-legend/src/enums/constants.js","webpack://muze/./packages/muze-legend/src/firebolt/legend-firebolt.js","webpack://muze/./packages/muze-legend/src/firebolt/physical/drag.js","webpack://muze/./packages/muze-legend/src/firebolt/physical/hover.js","webpack://muze/./packages/muze-legend/src/firebolt/physical/click.js","webpack://muze/./packages/muze-legend/src/firebolt/physical/index.js","webpack://muze/./packages/muze-legend/src/enums/actions.js","webpack://muze/./packages/muze-legend/src/firebolt/physical/selection-box-drag.js","webpack://muze/./packages/muze-legend/src/legend/defaults.js","webpack://muze/./packages/muze-legend/src/firebolt/side-effects/selection-box/index.js","webpack://muze/./packages/muze-legend/src/firebolt/side-effects/legend-highlighter/strategies.js","webpack://muze/./packages/muze-legend/src/firebolt/side-effects/legend-highlighter/index.js","webpack://muze/./packages/muze-legend/src/firebolt/side-effects/legend-marker/index.js","webpack://muze/./packages/muze-legend/src/legend/props.js","webpack://muze/./packages/muze-legend/src/legend/legend-helper.js","webpack://muze/./packages/muze-legend/src/legend/simple-legend.js","webpack://muze/./packages/muze-legend/src/legend/position-config.js","webpack://muze/./packages/muze-legend/src/legend/renderer.js","webpack://muze/./packages/muze-legend/src/legend/discrete-legend.js","webpack://muze/./packages/muze-legend/src/legend/gradient-helper.js","webpack://muze/./packages/muze-legend/src/legend/gradient-legend.js","webpack://muze/./packages/muze-legend/src/legend/step-legend.js","webpack://muze/./packages/muze/src/constants.js","webpack://muze/./packages/muze/src/operators.js","webpack://muze/./packages/muze/src/action-model.js","webpack://muze/./packages/muze/src/canvas/defaults.js","webpack://muze/./packages/muze/src/canvas/local-options.js","webpack://muze/./packages/layout/src/tree-layout/layout-component/layoutComponent.js","webpack://muze/./packages/layout/src/tree-layout/layout-component/dummy-component.js","webpack://muze/./packages/muze/src/defaults.js","webpack://muze/./packages/layout/src/tree-layout/constants/defaults.js","webpack://muze/./packages/layout/src/tree-layout/layout-definition/definition-manager/definitionModel.js","webpack://muze/./packages/layout/src/tree-layout/layout-definition/helper/index.js","webpack://muze/./packages/layout/src/tree-layout/layout-definition/tree/index.js","webpack://muze/./packages/layout/src/tree-layout/layout-definition/layout-model/index.js","webpack://muze/./packages/layout/src/enums/constants.js","webpack://muze/./packages/layout/src/tree-layout/utils/index.js","webpack://muze/./packages/layout/src/tree-layout/data-adapters/data-point.js","webpack://muze/./packages/layout/src/tree-layout/data-adapters/data-parser.js","webpack://muze/./packages/layout/src/tree-layout/data-adapters/helper.js","webpack://muze/./packages/layout/src/tree-layout/data-adapters/html-data.js","webpack://muze/./packages/layout/src/tree-layout/renderers/renderer.js","webpack://muze/./packages/layout/src/tree-layout/renderers/html-renderer.js","webpack://muze/./packages/layout/src/tree-layout/drawing-manager/helper.js","webpack://muze/./packages/layout/src/tree-layout/drawing-manager/index.js","webpack://muze/./packages/layout/src/tree-layout/layout-definition/definition-manager/index.js","webpack://muze/./packages/layout/src/tree-layout/layout-manager/layout-def.js","webpack://muze/./packages/layout/src/tree-layout/layout-manager/helper.js","webpack://muze/./packages/layout/src/tree-layout/layout-manager/index.js","webpack://muze/./packages/muze/src/canvas/helper.js","webpack://muze/./packages/muze/src/options.js","webpack://muze/./packages/layout/src/generic-layout/index.js","webpack://muze/./packages/layout/src/grid-layout/defaults.js","webpack://muze/./packages/layout/src/utils/index.js","webpack://muze/./packages/layout/src/visual-matrix/props.js","webpack://muze/./packages/layout/src/visual-matrix/default-config.js","webpack://muze/./packages/layout/src/visual-matrix/visual-matrix.js","webpack://muze/./packages/layout/src/visual-matrix/row-matrix.js","webpack://muze/./packages/layout/src/visual-matrix/column-matrix.js","webpack://muze/./packages/layout/src/grid-layout/computations.js","webpack://muze/./packages/layout/src/grid-layout/view-info-getter.js","webpack://muze/./packages/layout/src/grid-layout/layout.js","webpack://muze/./packages/layout/src/grid-layout/layout-helper.js","webpack://muze/./packages/layout/src/grid-layout/border-helper.js","webpack://muze/./packages/layout/src/grid-layout/span-maker.js","webpack://muze/./packages/muze/src/transaction-support.js","webpack://muze/./packages/muze/src/canvas/component-resolver.js","webpack://muze/./packages/visual-cell/src/enums/constants.js","webpack://muze/./packages/visual-cell/src/enums/cell-type.js","webpack://muze/./packages/visual-cell/src/simple-cell.js","webpack://muze/./packages/visual-cell/src/constants.js","webpack://muze/./packages/visual-cell/src/enums/defaults.js","webpack://muze/./packages/visual-cell/src/props.js","webpack://muze/./packages/visual-cell/src/axis-cell.js","webpack://muze/./packages/visual-cell/src/blank-cell.js","webpack://muze/./packages/visual-cell/src/text-cell-helper.js","webpack://muze/./packages/visual-cell/src/text-cell.js","webpack://muze/./packages/visual-cell/src/geom-cell.js","webpack://muze/./packages/visual-cell/src/defaults.js","webpack://muze/./packages/visual-cell/src/cell-registry.js","webpack://muze/./packages/muze/src/canvas/title-maker.js","webpack://muze/./packages/muze/src/canvas/legend-maker.js","webpack://muze/./packages/muze/src/canvas/components/muze-chart-component.js","webpack://muze/./packages/muze/src/canvas/components/headerComponent.js","webpack://muze/./packages/muze/src/canvas/components/legendComponent.js","webpack://muze/./packages/muze/src/canvas/components/scroll-bar-maker/helper.js","webpack://muze/./packages/muze/src/canvas/components/scroll-bar-maker/props.js","webpack://muze/./packages/muze/src/canvas/components/scroll-bar-maker/scroll-maker.js","webpack://muze/./packages/muze/src/canvas/components/scroll-component.js","webpack://muze/./packages/muze/src/canvas/components/scroll-bar-maker/horizontal-scroll-maker.js","webpack://muze/./packages/muze/src/canvas/components/scroll-bar-maker/vertical-scroll-maker.js","webpack://muze/./packages/muze/src/canvas/components/matrix-component.js","webpack://muze/./packages/muze/src/canvas/components/grid-component.js","webpack://muze/./packages/muze/src/enums/constants.js","webpack://muze/./packages/muze/src/canvas/components/message-component.js","webpack://muze/./packages/muze/src/canvas/components/message-icon.js","webpack://muze/./packages/muze/src/canvas/component-wrapper-maker.js","webpack://muze/./packages/muze/src/canvas/scroll-manager.js","webpack://muze/./packages/muze/src/canvas/layout-maker.js","webpack://muze/./packages/muze/src/canvas/firebolt/helper.js","webpack://muze/./packages/muze/src/canvas/firebolt/group-firebolt.js","webpack://muze/./packages/muze/src/canvas/firebolt/index.js","webpack://muze/./packages/muze/src/canvas/app-state.js","webpack://muze/./packages/muze/src/canvas/canvas.js","webpack://muze/./packages/muze/src/default-registry.js","webpack://muze/./packages/muze/src/muze.js"],"names":["webpackUniversalModuleDefinition","root","factory","exports","module","define","amd","window","installedModules","__webpack_require__","moduleId","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","getDefault","getModuleExports","object","property","prototype","hasOwnProperty","p","s","_typeof","DataModel","require","DataFormat","FLAT_JSON","DSV_STR","DSV_ARR","AUTO","DimensionSubtype","CATEGORICAL","TEMPORAL","BINNED","ID","MeasureSubtype","CONTINUOUS","FieldType","MEASURE","DIMENSION","FilteringMode","NORMAL","INVERSE","ALL","GROUP_BY_FUNCTIONS","SUM","AVG","MIN","MAX","FIRST","LAST","COUNT","STD","convertToNativeDate","date","Date","pad","DateTimeFormatter","format","this","dtParams","nativeDate","RegExp","escape","text","replace","TOKEN_PREFIX","DATETIME_PARAM_SEQUENCE","YEAR","MONTH","DAY","HOUR","MINUTE","SECOND","MILLISECOND","defaultNumberParser","defVal","val","parsedVal","isFinite","parseInt","defaultRangeParser","range","nVal","toLowerCase","length","getTokenDefinitions","daysDef","short","long","monthsDef","H","index","extract","parser","formatter","getHours","toString","hours","P","M","getMinutes","S","getSeconds","K","getMilliseconds","a","join","day","getDay","A","e","getDate","b","month","getMonth","B","y","result","substring","presentDate","presentYear","Math","trunc","getFullYear","year","Y","getTokenFormalNames","definitions","HOUR_12","AMPM_UPPERCASE","AMPM_LOWERCASE","SHORT_DAY","LONG_DAY","DAY_OF_MONTH","DAY_OF_MONTH_CONSTANT_WIDTH","SHORT_MONTH","LONG_MONTH","MONTH_OF_YEAR","SHORT_YEAR","LONG_YEAR","tokenResolver","defaultResolver","arg","targetParam","arguments","hourFormat24","hourFormat12","ampmLower","ampmUpper","amOrpm","isPM","findTokens","tokenPrefix","tokenLiterals","keys","occurrence","forwardChar","indexOf","push","token","formatAs","nDate","formattedStr","String","formattedVal","parse","dateTimeStamp","options","extractTokenValue","dtParamSeq","noBreak","dtParamArr","args","resolverKey","resolverParams","resolverFn","param","resolvedVal","splice","apply","checkIfOnlyYear","unshift","tokenObj","lastOccurrenceIndex","occObj","occIndex","targetText","regexFormat","tokenArr","map","obj","occurrenceLength","extractValues","match","shift","getNativeDate","Number","len","v","store","fields","Array","forEach","fieldIndex","from","objectToStrFn","checkCyclicRef","parentArr","bIndex","extend2","obj1","obj2","skipUndef","merge","tgtArr","srcArr","item","srcVal","tgtVal","str","cRef","isArray","getUniqueId","getTime","round","random","isArrEqual","arr1","arr2","formatNumber","detectDataFormat","data","fieldStore","createNamespace","fieldArr","idField","dataId","fieldsObj","_cachedFieldsObj","field","getMeasure","measureFields","_cachedMeasure","schema","type","getDimension","dimensionFields","_cachedDimension","Value","rawValue","formattedValue","getNumberFormattedVal","defineProperties","_value","configurable","writable","_formattedValue","_internalValue","rowDiffsetIterator","rowDiffset","callback","split","diffStr","diffStsArr","start","end","InvalidAwareTypes","config","assign","_invalidAwareValsMap","invalidAwareVals","NULL","NA","NIL","invalid","nil","null","undefined","ROW_ID","DM_DERIVATIVES","SELECT","PROJECT","GROUPBY","COMPOSE","CAL_VAR","BIN","SORT","JOINS","getCommonSchema","fs1","fs2","retArr","fs1Arr","defaultFilterFn","crossProduct","dm1","dm2","filterFn","replaceCommonSchema","jointype","applicableFilterFn","dm1FieldStore","getFieldspace","dm2FieldStore","dm1FieldStoreName","dm2FieldStoreName","commonSchemaList","Error","tmpSchema","_rowDiffset","rowAdded","rowPosition","ii","tuple","userArg","partialField","formattedData","dm1Fields","prepareJoinData","dm2Fields","detachedRoot","tupleObj","cellVal","iii","defSortFn","a1","b1","mergeSort","arr","sortFn","sort","lo","hi","mid","floor","mainArr","auxArr","resolveStrSortOrder","fDetails","strSortOrder","sortOrder","dataType","sortType","retFunc","groupData","hashMap","Map","groupedData","datum","fieldVal","has","set","createSortingFnArg","groupedDatum","targetFields","targetFieldDetails","label","reduce","acc","next","idx","applyStandardSort","sortingDetails","fieldName","sortMeta","fieldInSchema","sortingFn","slice","f","dataBuilder","colIdentifier","idData","retObj","uids","addUid","columnWise","reqSorting","tmpDataArr","colName","subtype","insertInd","dataObj","filter","sDetial","groupSortingIdx","findIndex","standardSortingDetails","groupSortingDetails","applyGroupSort","depColumns","detail","sortedGroupMap","makeGroupMapAndSort","targetCol","currRow","fVal","u","iterator","done","nMap","row","nextMap","pop","tmpData","difference","hashTable","schemaNameArr","dm1FieldStoreFieldObj","dm2FieldStoreFieldObj","_colIdentifier","prepareDataHelper","dm","addData","hashData","schemaName","getFilteredValues","sum","filteredNumber","curr","avg","totalSum","isNaN","fnList","filteredValues","min","max","sqrt","mean","pow","num","defaultReducerName","ReducerStore","defReducer","entries","reducer","__unregister","Function","reducerStore","naturalJoinFilter","commonSchemaArr","retainTuple","internalValue","union","leftOuterJoin","dataModel1","dataModel2","rightOuterJoin","PartialField","_sanitize","Field","description","displayName","_params","_context","build","Dimension","_cachedDomain","calculateDataDomain","Measure","unit","defAggFn","numberFormat","FieldParser","CategoricalParser","isInvalid","getInvalidType","trim","Categorical","hash","Set","domain","add","TemporalParser","_dtf","calculateContinuousDomain","POSITIVE_INFINITY","NEGATIVE_INFINITY","Temporal","__proto__","getPrototypeOf","_cachedMinDiff","sortedData","arrLn","minDiff","prevDatum","nextDatum","processedCount","dataFormat","parsedDatum","BinnedParser","matched","parseFloat","Binned","binsArr","bins","ContinuousParser","Continuous","IdValue","wt","valArr","_val","_hash","_valArr","gt","IdParser","values","FieldTypeRegistry","_fieldType","dimension","fieldRegistry","registerFieldType","createFields","dataColumn","headers","headersObj","header","BUILDER","Pt","DataConverter","_type","EOL","EOF","objectConverter","columns","JSON","stringify","inferColumns","rows","columnSet","column","width","Bt","delimiter","reFormat","DELIMITER","charCodeAt","parseRows","N","I","eof","eol","j","preformatBody","formatValue","formatRow","formatDate","getUTCHours","minutes","getUTCMinutes","seconds","getUTCSeconds","milliseconds","getUTCMilliseconds","getUTCFullYear","getUTCMonth","getUTCDate","test","convert","concat","formatBody","formatRows","DSVArr","schemaFields","unitSchema","firstRowHeader","columnMajor","headerMap","h","schemaField","headIndex","DSVStr","fieldSeparator","dsv","d3Dsv","DSVStringConverter","FlatJSON","insertionIndex","schemaFieldsName","JSONConverter","DSVArrayConverter","AutoDataConverter","Auto","converters","DataConverterStore","_getDefaultConverters","converter","converterStore","resp","persistDerivations","sourceDm","model","operation","persistCurrentDerivation","criteriaFn","_derivation","cn","op","meta","criteria","persistAncestorDerivation","newDm","_ancestorDerivation","selectModeMap","diffIndex","calcDiff","generateRowDiffset","lastInsertedValue","li","selectRowDiffsetIterator","checker","newRowDiffSet","rejRowDiffSet","on","shouldSelect","shouldReject","checkerResult","rejectRowDiffset","selectHelper","clonedDm","selectFn","cachedStore","cloneProvider","cachedValueObjects","_partialFieldspace","_cachedValueObjects","keyFn","rowId","domainChecker","some","dom","boundsChecker","filterPropagationModel","propModels","fns","filterByDim","filterByMeasure","clone","clonedModel","cloneWithAllFields","partialFieldspace","getPartialFieldspace","__calculateFieldspace","calculateFieldsConfig","modelFieldsConfig","getFieldsConfig","identifiers","fieldNames","indices","dLen","def","valuesMap","g","ids","id","rangeKeys","hasData","present","getKey","fn","every","isWithinDomain","fieldType","propModel","select","saveChild","addDiffsetToClonedDm","selectConfig","cloneWithProject","projField","allFields","cloned","projectionSet","actualProjField","sanitizeUnitSchema","sanitizeAndValidateSchema","updateData","relation","defaultConfig","dataHeader","fieldNameAs","as","idIndex","rowLength","fill","nameSpace","valueObjects","rawFieldsData","formattedFieldsData","idFieldData","rawData","_","_dataFormat","applyExistingOperationOnModel","dataModel","selectionModel","getDerivations","derivation","params","groupByString","getRootGroupByModel","_parent","find","propagateToAllDataModels","rootModels","propagationInf","propagationNameSpace","propagateToSource","propagationSourceId","sourceId","addGroupedModel","conf","crit","groupedModel","criterias","actionCriterias","mutableActions","filteredCriteria","entry","excludeModels","sourceActionCriterias","actionInf","actionConf","applyOnSource","action","models","path","getPathToRootModel","propagationSource","rootModel","propConfig","sourceIdentifiers","inf","propagationModel","filteredModel","reverse","handlePropagation","propagateIdentifiers","propModelInf","_children","child","matchingCriteria","getNormalizedProFields","fieldConfig","normalizedProjField","constructor","search","Relation","Hn","source","_fieldStoreName","_propagationNameSpace","immutableActions","_fieldspace","updateFields","fieldStoreName","collID","partialFieldMap","newFields","coll","joinWith","unionWith","differenceWith","defConfig","cloneConfig","extraCloneDm","setOfRowDiffsets","setParent","_fieldConfig","fieldObj","removeChild","sibling","parent","Wn","Xn","_onPropagation","order","withUid","getAllFields","dataGenerated","fmtFieldIdx","elem","fIdx","fmtFn","datumIdx","fieldsArr","reducers","newDataModel","groupBy","sFieldArr","dimensions","Oe","reducerObj","measures","defaultReducer","measureName","reducerFn","resolve","fieldStoreObj","dbName","dimensionArr","measureArr","rowCount","idMap","getData","dataInCSVArr","sortedDm","colData","rowsCount","serializedData","rowIdx","colIdx","fieldinst","dependency","replaceVar","fieldsConfig","depVars","retrieveFn","depFieldIndices","fieldSpec","fs","suppliedFields","computedValues","fieldsData","Gn","addField","addToNameSpace","isMutableAction","payload","getRootDataModel","groupByModel","addToPropNamespace","sourceNamespace","propagateImmutableActions","filterImmutableAction","criteriaModel","eventName","measureFieldName","binFieldName","createBinnedFieldData","measureField","buckets","binsCount","binSize","dMin","dMax","ceil","abs","bucketRanges","binnedData","leftIdx","rightIdx","midIdx","binField","serialize","getSchema","rowSplitDiffsetIterator","splitRowDiffset","dimensionMap","dimensionSet","clonedDMs","uniqueFields","commonFields","normalizedProjFieldSets","fieldSet","splitWithProject","projFieldSet","projFields","first","last","count","sd","std","Operators","compose","operations","currentDM","firstChild","derivations","dispose","bin","project","calculateVariable","naturalJoin","fullOuterJoin","version","Stats","FieldsUtility","enums","webpackPolyfill","deprecate","paths","children","_interopRequireDefault","default","_lib2","_containerManager2","slLib","init","doc","win","document","htmlSplCharSpace"," ","documentSupport","getDocumentSupport","SVG_BBOX_CORRECTION","isWebKit","SmartLabelManager","container","useEllipses","wrapper","prop","prevInstance","isBrowserLess","maxCacheLimit","maxDefaultCacheLimit","getElementById","createContainer","innerHTML","testStrAvg","isHeadLess","isIE","offsetHeight","offsetWidth","parentContainerStyle","style","parentContainer","_containerManager","_showNoEllipses","_init","setStyle","textToLines","smartlabel","lines","_calCharDimWithCache","calculateDifference","size","csArr","tw","twi","cachedStyle","asymmetricDifference","maxAdvancedCacheLimit","_container","cache","_advancedCache","advancedCacheKey","_advancedCacheKey","cacheName","fontSize","fontFamily","fontWeight","fontStyle","cacheInitName","repeat","height","_getWidthFn","contObj","_containerObj","svgText","bbox","textContent","getBBox","_styleNotSet","setLineHeight","sCont","node","context","_cache","charCache","_lineHeight","lineHeight","useEllipsesOnOverflow","getSmartText","maxWidth","maxHeight","noWrap","trimStr","tempArr","tmpText","maxWidthWithEll","toolText","oriWidth","oriHeight","newCharIndex","nearestChar","tempChar","getWidth","initialLeft","initialTop","getOriSizeImproveObj","spanArr","x","minWidth","chr","elemRightMostPoint","elemLowestPoint","lastBR","removeFromIndex","removeFromIndexForEllipses","hasHTMLTag","maxStrWidth","lastDash","lastSpace","lastIndexBroken","strWidth","strHeight","oriTextArr","ellipsesStr","ellipsesWidth","dotWidth","characterArr","dashIndex","spaceIndex","lastLineBreak","fastTrim","ws","charAt","smartLabel","oriTextWidth","oriTextHeight","oriText","isTruncated","xmlTagRegEx","ltgtRegex","getOriSize","substr","getNearestBreakIndex","detailObj","tooltext","lastIndexOf","spanAdditionRegx","spanAdditionReplacer","classNameWithTag","classNameWithTagBR","childRetriverFn","childRetriverString","noClassTesting","classNameReg","className","spaceIdx","dashIdx","offsetLeft","offsetTop","parentNode","insertBefore","createElement","classNameBrReg","spanRemovalRegx","error","detailedCalculationFlag","textArr","letter","lSize","cumulativeSize","indiSizeStore","lib","userAgent","navigator","clsNameSpace","containerClass","brReplaceRegex","position","top","whiteSpace","padding","overflow","supportedStyle","font","font-family","font-weight","font-size","line-height","font-style","getElementsByClassName","opera","hasSVG","Boolean","SVGAngle","implementation","hasFeature","containerParent","body","appendChild","setAttribute","getElementsByTagName","sl","charLen","increment","avgWidth","styleObj","fSize","makeEntry","sCon","_classCallCheck","_set","set1","set2","filteredKeys","s1","s2","ForeignSet","isSimpleObject","reqAnimFrame","requestAnimationFrame","webkitRequestAnimationFrame","mozRequestAnimationFrame","oRequestAnimationFrame","msRequestAnimationFrame","setTimeout","getTimeBasedId","__lastTime","__id","flat","res","scheduler","onFinishCallback","queue","animationFrame","listeners","tempQ","unique","fetch","namedNode","qualifiedName","seed","fetchAggregator","dependencies","getUpstreamNodes","list","rec","qname","placedIndex","preArr","postArr","outgoingEdges","resolver","accumulate","nodeDetails","identity","CustomResolver","utils_classCallCheck","dep","_dep","graph_node_classCallCheck","edges","_seed","requireResolve","retriever","history","electricEdges","_edges","_this","retrieveDetails","edge","head","hist","TypeError","electric_node_classCallCheck","nextFrame","currentFrame","lstnrs","nodes","nFn","_this2","qualifiedNodeMap","graph_node","_wholeSet","_propagate","propagationOverride","currentFrameListeners","nextFrameListeners","_schedule","flushTarget","flush","mount","resolveReqList","objn","perv","addDependencies","_node","getDependencies","getResolvedList","props","fnSpec","eNode","_ref","electric_node","addEdges","addElectricNode","changedSet","upstreamNodes","upstreamNode","append","__execUniqueElectricEdges","cfLstnrs","nfLstnrs","toArray","_this3","repeatHead","resetPropagationOverride","qnames","_this4","update","resolved","resolveDependencyOrder","resolveMap","neighbour","isRoot","model_classCallCheck","_graph","graph","_lockFlag","_reqQ","mountPoint","_addPropInModel","calculationConfig","customResolver","varName","fetchFn","_customResolver","createNodesFrom","instantCall","_graph$stopPropagatio","propsArr","unsub","createElectricNodeOf","stopPropagation","setPropagationOverride","resetNodeValue","_graph$stopPropagatio2","setProp","getNodeValue","getNodeFromQualifiedName","Model","__webpack_exports__","Muze","ContainerManager","maxContainers","svg","containers","rootNode","createElementNS","setAttributeNS","svgRoot","diff","containerObj","keyStr","prev","removeContainer","addContainer","avgCharWidth","display","cObj","ascending","NaN","bisector","compare","ascendingComparator","left","right","ascendingBisect","bisectRight","number","array","src_range","stop","step","e10","e5","e2","src_ticks","ticks","tickIncrement","power","log","LN10","tickStep","step0","step1","quantile","valueof","i0","value0","each","remove","clear","empty","src_nest","sortValues","rollup","nest","sortKeys","depth","createResult","setResult","keyValue","valuesByKey","createObject","setObject","createMap","setMap","sortKey","k","proto","implicit","ordinal","unknown","scale","copy","band","bandwidth","ordinalRange","paddingInner","paddingOuter","align","rescale","sequence","rangeRound","invertExtent","r0","r1","hiIndex","getClosestIndexOf","invert","side","highVal","d1","low","high","src_number","extend","definition","Color","reI","reN","reP","reHex","reRgbInteger","reRgbPercent","reRgbaInteger","reRgbaPercent","reHslPercent","reHslaPercent","named","aliceblue","antiquewhite","aqua","aquamarine","azure","beige","bisque","black","blanchedalmond","blue","blueviolet","brown","burlywood","cadetblue","chartreuse","chocolate","coral","cornflowerblue","cornsilk","crimson","cyan","darkblue","darkcyan","darkgoldenrod","darkgray","darkgreen","darkgrey","darkkhaki","darkmagenta","darkolivegreen","darkorange","darkorchid","darkred","darksalmon","darkseagreen","darkslateblue","darkslategray","darkslategrey","darkturquoise","darkviolet","deeppink","deepskyblue","dimgray","dimgrey","dodgerblue","firebrick","floralwhite","forestgreen","fuchsia","gainsboro","ghostwhite","gold","goldenrod","gray","green","greenyellow","grey","honeydew","hotpink","indianred","indigo","ivory","khaki","lavender","lavenderblush","lawngreen","lemonchiffon","lightblue","lightcoral","lightcyan","lightgoldenrodyellow","lightgray","lightgreen","lightgrey","lightpink","lightsalmon","lightseagreen","lightskyblue","lightslategray","lightslategrey","lightsteelblue","lightyellow","lime","limegreen","linen","magenta","maroon","mediumaquamarine","mediumblue","mediumorchid","mediumpurple","mediumseagreen","mediumslateblue","mediumspringgreen","mediumturquoise","mediumvioletred","midnightblue","mintcream","mistyrose","moccasin","navajowhite","navy","oldlace","olive","olivedrab","orange","orangered","orchid","palegoldenrod","palegreen","paleturquoise","palevioletred","papayawhip","peachpuff","peru","pink","plum","powderblue","purple","rebeccapurple","red","rosybrown","royalblue","saddlebrown","salmon","sandybrown","seagreen","seashell","sienna","silver","skyblue","slateblue","slategray","slategrey","snow","springgreen","steelblue","tan","teal","thistle","tomato","turquoise","violet","wheat","white","whitesmoke","yellow","yellowgreen","color_formatHex","rgb","formatHex","color_formatRgb","formatRgb","color","exec","rgbn","Rgb","rgba","hsla","rgbConvert","opacity","rgb_formatHex","hex","rgb_formatRgb","Hsl","hslConvert","hsl","hsl2rgb","m1","m2","basis","t1","v0","v1","v2","v3","t2","t3","channels","displayable","formatHsl","color_formatHsl","brighter","darker","src_constant","linear","hue","constant","gamma","nogamma","exponential","src_rgb","rgbGamma","colorRgb","rgbSpline","spline","colors","rgbBasis","numberArray","isNumberArray","ArrayBuffer","isView","DataView","genericArray","nb","na","reA","reB","src_string","am","bm","bs","bi","lastIndex","q","one","zero","src_value","value_typeof","string","setTime","valueOf","src_round","d3_scale_src_constant","d3_scale_src_number","deinterpolateLinear","bimap","deinterpolate","reinterpolate","d0","polymap","bisect","target","interpolate","clamp","continuous","piecewise","output","input","interpolateValue","deinterpolateClamp","reinterpolateClamp","interpolateRound","re","formatSpecifier","specifier","FormatSpecifier","sign","symbol","comma","precision","prefixExponent","locale","formatPrefix","formatDecimal","toExponential","coefficient","src_exponent","formatTrim","out","i1","formatRounded","exponent","formatTypes","%","toFixed","toPrecision","X","toUpperCase","src_identity","prefixes","src_locale","group","grouping","thousands","formatGroup","currencyPrefix","currency","currencySuffix","decimal","numerals","formatNumerals","percent","minus","nan","newFormat","prefix","suffix","formatType","maybeSuffix","valuePrefix","valueSuffix","valueNegative","Infinity","defaultLocale","formatLocale","src_tickFormat","precisionPrefix","precisionRound","precisionFixed","linearish","tickFormat","nice","interval","x0","x1","pow10","powp","base","E","exp","logp","log10","log2","reflect","logs","pows","z","raise","thresholds","threshold","quantiles","quantize","t0","newInterval","floori","offseti","offset","previous","setMonth","setHours","setFullYear","setDate","durationMinute","durationWeek","weekday","getTimezoneOffset","sunday","monday","tuesday","wednesday","thursday","friday","saturday","hour","minute","second","millisecond","utcWeekday","setUTCDate","getUTCDay","setUTCHours","utcSunday","utcMonday","utcTuesday","utcWednesday","utcThursday","utcFriday","utcSaturday","utcDay","utcYear","setUTCMonth","setUTCFullYear","localDate","L","utcDate","UTC","newDate","timeFormat","pads","-","0","numberRe","percentRe","requoteRe","requote","formatRe","names","formatLookup","parseWeekdayNumberSunday","w","parseWeekdayNumberMonday","parseWeekNumberSunday","U","parseWeekNumberISO","V","parseWeekNumberMonday","W","parseFullYear","parseYear","parseZone","Z","parseQuarter","parseMonthNumber","parseDayOfMonth","parseDayOfYear","parseHour24","parseMinutes","parseSeconds","parseMilliseconds","parseMicroseconds","parseLiteralPercent","parseUnixTimestamp","Q","parseUnixTimestampSeconds","formatDayOfMonth","formatHour24","formatHour12","formatDayOfYear","timeDay","timeYear","formatMilliseconds","formatMicroseconds","formatMonthNumber","formatMinutes","formatSeconds","formatWeekdayNumberMonday","formatWeekNumberSunday","timeSunday","formatWeekNumberISO","timeThursday","formatWeekdayNumberSunday","formatWeekNumberMonday","timeMonday","formatYear","formatFullYear","formatZone","formatUTCDayOfMonth","formatUTCHour24","formatUTCHour12","formatUTCDayOfYear","formatUTCMilliseconds","formatUTCMicroseconds","formatUTCMonthNumber","formatUTCMinutes","formatUTCSeconds","formatUTCWeekdayNumberMonday","dow","formatUTCWeekNumberSunday","formatUTCWeekNumberISO","formatUTCWeekdayNumberSunday","formatUTCWeekNumberMonday","formatUTCYear","formatUTCFullYear","formatUTCZone","formatLiteralPercent","formatUnixTimestamp","formatUnixTimestampSeconds","locale_dateTime","dateTime","locale_date","locale_time","time","locale_periods","periods","locale_weekdays","days","locale_shortWeekdays","shortDays","locale_months","months","locale_shortMonths","shortMonths","periodRe","periodLookup","weekdayRe","weekdayLookup","shortWeekdayRe","shortWeekdayLookup","monthRe","monthLookup","shortMonthRe","shortMonthLookup","formats","formatShortWeekday","formatWeekday","formatShortMonth","formatMonth","formatPeriod","formatQuarter","utcFormats","formatUTCShortWeekday","formatUTCWeekday","formatUTCShortMonth","formatUTCMonth","formatUTCPeriod","formatUTCQuarter","parses","parseShortWeekday","parseWeekday","parseShortMonth","parseMonth","parseLocaleDateTime","parseSpecifier","parsePeriod","parseLocaleDate","parseLocaleTime","newParse","week","utcFormat","utcParse","durationSecond","durationHour","durationDay","durationMonth","durationYear","calendar","formatMillisecond","formatSecond","formatMinute","formatHour","formatDay","formatWeek","tickIntervals","tickInterval","src_time","timeMonth","timeWeek","timeHour","timeMinute","timeSecond","timeMillisecond","utcMonth","utcHour","setUTCMinutes","utcMinute","setUTCSeconds","src_colors","deg2rad","PI","rad2deg","C","D","ED","EB","BC_DA","cubehelix","cubehelixConvert","Cubehelix","bl","atan2","cubehelixGamma","colorCubehelix","cosh","cos","sinh","sin","cubehelixLong","interpolateCubehelixLong","ramp","sequential","interpolator","d3_scale_chromatic_src_colors","src_ramp","scheme","interpolateRgbBasis","magma","inferno","plasma","warm","cool","sequential_multi_rainbow","ts","UNIT_GLOBAL_NAMESPACE","UNIT_LOCAL_NAMESPACE","LAYER_LOCAL_NAMESPACE","LAYER_GLOBAL_NAMESPACE","GROUP_GLOBAL_NAMESPACE","GROUP_LOCAL_NAMESPACE","CANVAS_LOCAL_NAMESPACE","CANVAS_GLOBAL_NAMESPACE","swap","tmp","defaultCompare","quickselect","quickselectStep","createNode","leaf","minX","minY","maxX","maxY","distBBox","toBBox","destNode","calcBBox","compareNodeMinX","compareNodeMinY","bboxArea","bboxMargin","enlargedArea","intersectionArea","contains","intersects","findItem","items","equalsFn","multiSelect","stack","all","nodesToSearch","_toConsumableArray","RTree","maxEntries","_maxEntries","_minEntries","_iteratorNormalCompletion","_didIteratorError","_iteratorError","_step","_iterator","childBBox","err","insert","splitRoot","tmpNode","insertSingleItem","goingUp","indexes","condense","N2","N1","compareMinX","right2","compareMinY","right3","level","minArea","minEnlargement","targetNode","_iteratorNormalCompletion2","_didIteratorError2","_iteratorError2","_step2","_iterator2","area","enlargement","isNode","insertPath","chooseSubtree","adjustParentBoxes","chooseSplitAxis","splitIndex","chooseSplitIndex","newNode","minOverlap","bbox1","bbox2","overlap","allDistMargin","leftBBox","rightBBox","margin","siblings","ReservedFields","MEASURE_NAMES","CommonProps","ACTION_INF","ON_LAYER_DRAW","MATRIX_CREATED","COORD_TYPES","POLAR","CARTESIAN","DATA_TYPE","d3_axis_src_identity","bottom","epsilon","translateX","translateY","entering","__axis","axis","orient","tickArguments","tickValues","tickTransform","tickSizeInner","tickSizeOuter","tickPadding","transform","spacing","range0","range1","center","selection","selectAll","tick","tickExit","exit","tickEnter","enter","attr","line","transition","getAttribute","tickSize","pi","halfPi","tau","asin","symbol_circle","draw","moveTo","arc","symbol_cross","lineTo","closePath","tan30","tan30_2","diamond","square","rect","kr","kx","ky","star","wye","y0","y1","x2","y2","sqrt3","triangle","tauEpsilon","Path","_x0","_y0","_x1","_y1","quadraticCurveTo","bezierCurveTo","arcTo","x21","y21","x01","y01","l01_2","x20","y20","l21_2","l20_2","l21","l01","acos","t01","t21","a0","ccw","dx","dy","cw","da","d3_shape_src_constant","none","series","order_ascending","sums","offset_none","s0","stackValue","Linear","areaStart","_line","areaEnd","lineStart","_point","lineEnd","point","curve_linear","Step","_t","_x","_y","curve_step","stepBefore","stepAfter","that","_k","_x2","_y2","Cardinal","tension","custom","cardinal","CatmullRom","alpha","_alpha","_l01_a","_l12_a","_l23_a","_l01_2a","_l12_2a","_l23_2a","x23","y23","curve_catmullRom","catmullRom","src_line","pointX","pointY","defined","curve","curveLinear","buffer","defined0","src_descending","d3_shape_src_identity","arcInnerRadius","innerRadius","arcOuterRadius","outerRadius","arcStartAngle","startAngle","arcEndAngle","endAngle","arcPadAngle","padAngle","cornerTangents","rc","ox","oy","x11","y11","x10","y10","x00","y00","d2","cx0","cy0","cx1","cy1","dx0","dy0","dx1","dy1","cx","cy","colorHsl","hslLong","cubicInOut","b2","b3","b4","b5","b6","b7","b8","b9","b0","bounceOut","elasticOut","elasticIn","amplitude","period","backInOut","elasticInOut","backIn","overshoot","backOut","polyInOut","polyIn","polyOut","d3_voronoi_src_constant","RedBlackTree","RedBlackNode","R","RedBlackRotateLeft","tree","RedBlackRotateRight","RedBlackFirst","after","grandpa","uncle","createEdge","setEdgeEnd","cells","halfedges","createBorderEdge","vertex","clipEdge","ax","ay","connectEdge","fm","fb","lx","ly","rx","ry","fx","fy","cellHalfedgeAngle","cell","site","va","vb","cellHalfedgeStart","cellHalfedgeEnd","firstCircle","circlePool","attachCircle","lArc","rArc","lSite","cSite","rSite","bx","by","epsilon2","ha","hc","circle","Circle","before","circles","detachCircle","beachPool","createBeach","beach","Beach","detachBeach","beaches","removeBeach","disappearing","iArc","nArcs","addBeach","dxl","dxr","directrix","leftBreakPoint","rightBreakPoint","createCell","newArc","hb","rfocx","rfocy","pby2","lfocx","lfocy","plby2","hl","aby2","triangleArea","lexicographic","Diagram","sites","extent","sortCellHalfedges","clipEdges","clipCells","iCell","iHalfedge","nHalfedges","startX","startY","endX","endY","nCells","cover","dc","v00","v01","v11","v10","polygons","polygon","triangles","e1","links","radius","_found","vx","vy","src_voronoi","voronoi","Selection","idGetter","selection_classCallCheck","_dataObjects","_updateData","_enterData","_exitData","_idGetter","newData","entryData","exitdata","tempMap","duplicateData","updatedData","newSelection","dataObjects","defaultValue","_mode","mergedObjects","mergedData","newdata","sortSel","sortSelection","kA","kB","selection_toConsumableArray","objects","dataSelect","idFn","STRING","FUNCTION","HTMLElement","common_utils_typeof","checkExistence","nonExistentKeys","sanitizeIP","typeObj","htmlElem","getMax","common_utils_toConsumableArray","getMin","getDomainFromData","domArr","_loop","_fields","_slicedToArray","field0","field1","arr0","firstMin","secondMin","firstMax","secondMax","sanitizeDomainWhenEqual","unionDomain","domains","_ref2","symbolFns","symbolCircle","cross","symbolCross","symbolDiamond","symbolSquare","symbolStar","symbolWye","symbolTriangle","easeFns","cubic","easeCubic","bounce","easeBounce","elastic","easeElastic","back","easeBack","poly","easePoly","circleInOut","getExtremePoint","points","compareValue","minOrMax","extremePoint","minOrMaxVal","getMinPoint","getMaxPoint","getNearestValue","filterData","getWindow","cancelAnimFrame","cancelAnimationFrame","capitalizeFirst","txt","vals","getMinDiff","uniqueVals","getQualifiedClassName","cls","getDependencyOrder","dependencyOrder","visited","visit","objectIterator","Voronoi","common_utils_classCallCheck","_voronoi","_voronoiFn","getObjProp","_len","_key","intSanitizer","generateGetterSetters","propInfo","_propInfo$","sanitization","preset","onset","typeChecker","getArraySum","total","arraysEqual","isEqual","oldVal","newVal","is","enableChainedTransaction","transactionModel","transactionEndpoint","transactionItems","registerImmediateListener","_ref3","isHTMLElem","ERROR_MSG","INTERFACE_IMPL","mergeRecursive","sink","createSelection","sel","appendObj","mergedSelection","exitSelection","getObjects","inst","interpolateArray","fitCount","linearInterpolate","atPoint","springFactor","angleToRadian","angle","replaceCSSPrefix","numberInterpolator","interpolateNumber","colorInterpolator","interpolateRgb","hslInterpolator","interpolateHslLong","transformColors","piecewiseInterpolator","hue2rgb","hslToRgb","rgbToHsv","hsvToRgb","hexToHsv","hslaToRgb","_hslToRgb2","RGBAtoRGB","r2","g2","r3","g3","detectColor","col","assembleModelFromIdentifiers","fieldMap","_loop2","temp","cIdx","getDataModelFromRange","criteriaFields","selFields","selFn","fieldValue","getArrayIndexMap","getDataModelFromIdentifiers","hasBarLayer","filteredDataModel","dataArr","filteredSchema","include","propField","registerListeners","listenerMap","_len2","_key2","propListenerMap","namespace","mapObj","propType","listenerFn","listener","isValidValue","escapeHTML","htmlEscapes","&","<",">","\"","'","/","transposeArray","extendsClass","extendsFrom","found","concatModels","dataObj1","dataObj2","data1","data2","schema1","schema2","commonTuples","_loop3","row1","row2","dim1Values","dim2Values","dm1Key","dm2Key","commonSchema","getSymbol","stackOrders","_defineProperty","_stackOrders","stackOrderNone","stackOrderAscending","stackOffsets","_stackOffsets","yp","yn","stackOffsetNone","si","sij0","s3","sk","orderNone","offsetNone","oz","kz","sz","sij","ki","d3Stack","nestCollection","nestFn","getArrayDiff","el","pathInterpolators","curveStepAfter","curveStepBefore","curveStep","curveCatmullRom","Symbols","axisLeft","axisRight","axisTop","axisBottom","x0z","y0z","arealine","lineX0","lineY0","lineY1","lineX1","pie","descending","arcs","pa","cornerRadius","padRadius","a01","a11","a00","a10","da0","da1","ap","rp","rc0","rc1","p0","p1","oc","intersect","x3","y3","x32","y32","kc","lc","centroid","Scales","scaleBand","getSmallestDiff","timeFormats","timeDurations","formatTemporal","nearestInterval","getNearestInterval","temporalFields","filteredFields","_ref5","_ref6","lookupWhat","lookupDetails","resolvable","lookupTarget","depArr","deps","nextAnimFrame","getValueParser","retrieveNearestGroupByReducers","_len3","measureFieldNames","_key3","filteredReducers","getAncestorDerivations","nearestReducers","derv","retrieveFieldDisplayName","nearestSortingDetails","nearestSortDerivation","sortingOrder","localeCompare","sortOrderMap","_sortOrderMap","firstVal","secondVal","sortCategoricalField","sortOrderType","_accessors","fn1","fn2","_accessors2","partition","mix","superclass","with","_with","_len4","mixins","_key4","mixin","componentRegistry","comps","reg","regObj","register","customKey","formalName","getReadableTicks","steps","orderedDomain","tempScale","scales","legendTicks","transformColor","rgbaValues","_ref7","_ref7$h","_ref7$s","_ref7$l","_RGBAToHSLA$code","RGBAToHSLA","cmin","cmax","delta","code","origH","origS","origL","origA","sanitizedA","newH","newS","newL","newA","pointWithinCircle","dmMultipleSelection","targetData","payloadMap","currentField","getIndexMap","src_selector","selector","querySelector","selectorAll","querySelectorAll","matcher","matches","sparse","EnterNode","ownerDocument","namespaceURI","_next","__data__","keyPrefix","bindIndex","groupLength","dataLength","bindKey","nodeByKeyValue","keyValues","xhtml","src_namespaces","xlink","xml","xmlns","src_namespace","namespaces","space","local","src_window","defaultView","styleValue","getPropertyValue","getComputedStyle","classArray","classList","ClassList","_names","classedAdd","classedRemove","textRemove","htmlRemove","nextSibling","lower","previousSibling","creator","fullname","creatorFixed","creatorInherit","uri","documentElement","constantNull","selection_cloneShallow","cloneNode","selection_cloneDeep","filterEvents","event","mouseenter","mouseleave","filterContextListener","contextListener","related","relatedTarget","compareDocumentPosition","event1","event0","onRemove","typename","__on","removeEventListener","capture","onAdd","wrap","addEventListener","customEvent","sourceEvent","dispatchEvent","CustomEvent","createEvent","initEvent","bubbles","cancelable","groups","parents","_groups","_parents","subgroups","subnode","subgroup","enterGroup","updateGroup","_enter","_exit","onenter","onupdate","onexit","groups0","groups1","m0","merges","group0","group1","compareNode","sortgroups","sortgroup","getAttributeNS","attrRemoveNS","removeAttributeNS","attrRemove","removeAttribute","attrFunctionNS","attrFunction","attrConstantNS","attrConstant","priority","styleRemove","removeProperty","styleFunction","setProperty","styleConstant","propertyRemove","propertyFunction","propertyConstant","classed","classedFunction","classedTrue","classedFalse","textFunction","textConstant","html","htmlFunction","htmlConstant","deep","typenames","parseTypenames","dispatch","dispatchFunction","dispatchConstant","src_select","src_point","ownerSVGElement","createSVGPoint","clientX","clientY","matrixTransform","getScreenCTM","inverse","getBoundingClientRect","clientLeft","clientTop","noop","Dispatch","T","types","current","mouse","changedTouches","src_touch","touches","identifier","touch","nopropagation","stopImmediatePropagation","noevent","preventDefault","nodrag","view","__noselect","MozUserSelect","d3_drag_src_constant","DragEvent","subject","active","defaultFilter","ctrlKey","button","defaultContainer","defaultSubject","defaultTouchable","maxTouchPoints","src_drag","mousedownx","mousedowny","mousemoving","touchending","touchable","gestures","clickDistance2","drag","mousedowned","touchstarted","touchmoved","touchended","gesture","beforestart","mousemoved","mouseupped","yesdrag","noclick","clearTimeout","sublisteners","clickDistance","taskHead","taskTail","frame","timeout","pokeDelay","clockLast","clockNow","clockSkew","clock","performance","timer_typeof","now","setFrame","clearNow","Timer","_call","_time","timer","delay","restart","wake","timerFlush","nap","sleep","poke","clearInterval","setInterval","src_timeout","elapsed","emptyOn","emptyTween","CREATED","SCHEDULED","STARTING","STARTED","RUNNING","ENDING","ENDED","transition_schedule","timing","schedules","__transition","self","tween","state","duration","ease","schedule","cssNode","cssRoot","cssView","svgNode","degrees","rotate","skewX","scaleX","scaleY","decompose","atan","interpolateTransform","pxComma","pxParen","degParen","translate","xa","ya","xb","yb","interpolateTransformCss","parseCss","interpolateTransformSvg","parseSvg","baseVal","consolidate","matrix","tweenValue","_id","transition_interpolate","interpolateString","Transition","_name","newId","selection_prototype","inherit","id0","id1","onFunction","on0","on1","sit","attrTween","string00","string10","interpolate0","string0","string1","value1","attrTweenNS","attrInterpolateNS","attrInterpolate","styleTween","styleNull","styleMaybeRemove","listener0","styleInterpolate","textTween","textInterpolate","removeFunction","tweenRemove","tween0","tween1","tweenFunction","delayFunction","delayConstant","durationFunction","durationConstant","easeConstant","Promise","reject","cancel","interrupt","defaultTiming","easeCubicInOut","selectElement","element","makeElement","elemType","callbacks","SVGElement","selectorVal","selectorType","actualSelector","enterSel","mergeSel","exitSel","applyStyle","appendElement","element1","element2","setElementAttrs","attrs","setAttrs","addClass","removeClass","setStyles","styles","createElements","clipElement","measurement","clipPathElement","getMousePos","boundingClientRect","getClientPoint","pos","clientPoint","tag","getEvent","d3event","getD3Drag","d3drag","getSmartComputedStyle","css","textEl","mandatoryStyle","fill-opacity","renderer_utils_typeof","computedStyle","styleForSmartLabel","hasTouch","initProp","fetchPropValues","propNames","setContexts","contexts","propObj","contextMap","depProps","registerListener","propList","callBack","_options$","namespaceInf","callbackFn","namespaceVal","commits","_savedCommits","_propListenerMap","listenersObj","_registeredListeners","_contextMap","contextsObj","commitsObj","subNamespaces","propDeps","nm","fnInf","store_toConsumableArray","registerPropInMaps","registeredListeners","subNamespace","allProps","_fnCount","addListenerToNamespace","_listeners","namespaceListeners","listenerTypes","removePropValue","propInf","sns","Store","store_classCallCheck","_commits","_queuedProps","_locked","store_createClass","lockModel","lock","unlockModel","unlock","lockCommits","locked","unlockCommits","queuedProps","store_slicedToArray","propName","_params2","commit","addSubNamespace","propFns","nsObj","retrieveNamespaces","disableListener","sanitizedVal","savedCommits","disabled","registerChangeListener","computed","calculatedProp","_this$model","unsubscribeAll","unsubscribe","listenersMap","removeSubNamespace","snsMap","transactor","holder","stateProps","nameSpaceProp","nsProp","_len5","_key5","_ref$takesMultiplePar","takesMultipleParams","prevVal","typeCheck","typeExpected","oldValues","events","EVENT_LIST","composition","resolveFn","notification","hasOwn","LifeCycleManager","lifecycle_manager_classCallCheck","_eventList","_promises","_notifiers","_lifeCycles","_unreleasedLifeCycles","_boot","_preparePromises","promise","_makeNotifierPromise","createPromise","then","prm","client","_releasePromisesFromCache","_notify","stage","_resolvePromise","retrieve","_callLifeCycleCallback","_cachePromise","_resetTargetPromise","lifeCycles","CLASSPREFIX","STACK","GROUP","IDENTITY","ANGLE","RADIUS","SIZE","COLOR","SHAPE","TEXT","OUTER_RADIUS_VALUE","TEXT_ANCHOR_MIDDLE","ENCODING","X0","Y0","RADIUS0","ANGLE0","STROKE_DASHARRAY","ASCENDING","AGG_FN_SUM","AREA_LAYER","ARC_LAYER","LINE_LAYER","TEXT_LAYER","POINT_LAYER","BAR_LAYER","TICK_LAYER","SIMPLE_LAYER","BASE_LAYER","SimpleLayer","DATA","CONFIG","MEASUREMENT","DOMAIN","MOUNT","props_defineProperty","_props","axes","metaInf","valueParser","coord","PROPS","_customConfig","newConf","defaultPolicy","BOTTOM","TOP","LEFT","RIGHT","axisOrientationMap","axis_orientation_defineProperty","_axisOrientationMap","AxisOrientation","LINEAR","BAND","TIME","ORDINAL","QUANTIZE","QUANTILE","LOG","POW","SEQUENTIAL","THRESHOLD","CONTINOUS","DISCRETE","HIDDEN","DEFAULT_ANGLE_DOMAIN","scaleLinear","scaleThreshold","scaleLog","scalePow","scaleIdentity","scaleOrdinal","scaleSequential","scaleQuantize","scaleQuantile","scaleTime","scaleMap","scale_creator_defineProperty","_scaleMap","ScaleType","createScale","scaleFactory","adjustRange","axisName","defClassName","axisNamePadding","classPrefix","fixedBaseline","labels","rotation","smartTicks","orientation","numberOfTicks","show","showAxisName","showInnerTicks","showOuterTicks","xOffset","yOffset","defaultSort","changeTickOrientation","selectContainer","axisInstance","_smartTicks","renderConfig","labelManager","isSmartTicks","tickText","registerAnimationDoneHook","rotateAxis","instance","getTickSize","yShift","xShift","tickLabelDim","quadrant","rotationNormalizer","setFixedBaseline","setAxisNamePos","textNode","axisNameHeight","availableSpace","longestWord","quarter","halfYearly","mintues","getTickIntervalFnBasedOnNumberOfTicks","possibleTickLevelIndex","maxPossibleTicks","tickIntervalLevelInfo","tickIntervalInfo","numOfPossibleTicks","getActualTickInterval","noOfTicks","minWidthBetweenTicks","_minTickDistance","getTickIntervalBasedOnCurrentLevel","_dependencies","longestWordType","applyTickSkipping","minTickDistance","minTickSpace","_minTickSpace","minTickWidth","maxTicks","getSkippedTicks","actualNumberOfTicks","_minDiff","millisecondInterval","numOfTicksAccordingToMinDiff","adjustHorizontalRange","adjustVerticalRange","rangeAdjustmentMap","space_setter_defineProperty","_rangeAdjustmentMap","setAxisRange","rangeBounds","getAdjustedRange","getAxisOffset","timeDiff","avWidth","bars","spaceSetter","spaceConfig","heightForTicks","_context$availableSpa2","availWidth","availHeight","isOffset","_context$renderConfig2","_context$getAxisDimen","getAxisDimensions","tickDimensions","allTickDimensions","axisNameDimensions","tickDimHeight","tickDimWidth","namePadding","labelConfig","minTickHeight","getTickValues","tickShifter","maxTickSpaces","widthForTicks","totalTickWidth","getRotatedSpaces","rotatedHeight","rotatedWidth","setOffset","logicalSpace","getAxisComponentDimensions","axisTicks","largestTick","largestTickDimensions","smartTick","_context$renderConfig","labelFunc","_tickLabelStyle","originalLabel","getFormattedText","_axisNameStyle","getHorizontalAxisSpace","axisDimensions","_context$config2","axisDimHeight","minTickDiff","getMinTickDifference","helper_toConsumableArray","getVerticalAxisSpace","_context$config3","calculateBandSpace","largestDimHeight","_getHorizontalAxisSpa","_getVerticalAxisSpace","getValidDomain","userDom","setContinousAxisDomain","_domain","axisComponentDimensions","oldConfig","_config","mockedOldConfig","shouldAxesScaleUpdate","hasAxesConfigChanged","properties","tickFormatter","sanitizeTickFormatter","_scale","_axis","createAxis","_tickFormatter","resetRenderConfig","_renderConfig","_maxTickSpaces","SimpleAxis","simple_axis_classCallCheck","_mount","_range","_domainLock","_axisDimensions","defCon","simpleConfig","bodyElem","dist","_animationDonePromises","domainValue","setAxisComponentDimensions","smartAxisName","axisClass","_objectSpread","setTickConfig","setSmartAxisName","_this$config2","dimType","widthDim","getSmartAxisName","oriSize","domainVal","computeAxisDimensions","_getAxisComponentDime","labelHeight","labelWidth","calculateContinousSpace","_context$renderConfig6","axisNameWidth","_getHorizontalAxisSpa2","_getVerticalAxisSpace2","renderAxis","labelProps","tickLabelStyle","axisTickFormatter","labelOffset","tickData","allTicks","elementToBeModified","elementNotToBeModified","tickValue","_getRawTickValue","selectionSet","rejectionSet","LinearInterpolator","LogInterpolator","PowInterpolator","interpolatorMap","continous_axis_defineProperty","_interpolatorMap","ContinousAxis","continous_axis_classCallCheck","_possibleConstructorReturn","_getPrototypeOf","InterpolatorCls","_interpolator","getScaleValue","_this$renderConfig","sanitizeDomain","_get2","_get","_this$renderConfig2","newTickValues","tickSpace","getNumberOfTicks","labelDim","numberOfValues","tickLength","_this$smartTicks$","BandAxis","_this$maxTickSpaces","_getRotatedSpaces","paddingNormalized","formatTickValue","TimeAxis","_getPrototypeOf2","time_axis_classCallCheck","time_axis_possibleConstructorReturn","time_axis_getPrototypeOf","time_axis_get","rawTicks","resetTickInterval","_context$config8","_context$availableSpa","adjustedRange","x11Colors","Pink","LightPink","HotPink","DeepPink","PaleVioletRed","MediumVioletRed","LightSalmon","Salmon","DarkSalmon","LightCoral","IndianRed","Crimson","FireBrick","DarkRed","Red","OrangeRed","Tomato","Coral","DarkOrange","Orange","Gold","Yellow","LightYellow","LemonChiffon","LightGoldenrodYellow","PapayaWhip","Moccasin","PeachPuff","PaleGoldenrod","Khaki","DarkKhaki","Cornsilk","BlanchedAlmond","Bisque","NavajoWhite","Wheat","BurlyWood","Tan","RosyBrown","SandyBrown","Goldenrod","DarkGoldenrod","Peru","Chocolate","SaddleBrown","Sienna","Brown","Maroon","DarkOliveGreen","Olive","OliveDrab","YellowGreen","LimeGreen","Lime","LawnGreen","Chartreuse","GreenYellow","SpringGreen","MediumSpringGreen","LightGreen","PaleGreen","DarkSeaGreen","MediumSeaGreen","SeaGreen","ForestGreen","Green","DarkGreen","MediumAquamarine","Aqua","Cyan","LightCyan","PaleTurquoise","Aquamarine","Turquoise","MediumTurquoise","DarkTurquoise","LightSeaGreen","CadetBlue","DarkCyan","Teal","LightSteelBlue","PowderBlue","LightBlue","SkyBlue","LightSkyBlue","DeepSkyBlue","DodgerBlue","CornflowerBlue","SteelBlue","RoyalBlue","Blue","MediumBlue","DarkBlue","Navy","MidnightBlue","Lavender","Thistle","Plum","Violet","Orchid","Fuchsia","Magenta","MediumOrchid","MediumPurple","BlueViolet","DarkViolet","DarkOrchid","DarkMagenta","Purple","Indigo","DarkSlateBlue","SlateBlue","MediumSlateBlue","White","Snow","Honeydew","MintCream","Azure","AliceBlue","GhostWhite","WhiteSmoke","Seashell","Beige","OldLace","FloralWhite","Ivory","AntiqueWhite","Linen","LavenderBlush","MistyRose","Gainsboro","LightGray","Silver","DarkGrey","Grey","DimGrey","LightSlateGrey","SlateGrey","DarkSlateGrey","Black","palette","DEFAULT_GRADIENT_COLOR","DEFAULT_CONFIG","stops","getHslString","hslArr","convertToXllString","baseString","getActualHslColor","paletteColor","props_toConsumableArray","newConfig","uniqueValues","treatNullMeasures","scaledVal","minDomainScaledVal","resolveAxisConfig","propVal","defaultVal","sanitiseConfigIntervals","intervals","getStops","newStops","color_strategy_toConsumableArray","indexedDomain","scaleDomain","indexedDomainMeasure","normalDomain","steppedDomain","_getStops","rangeStops","newStopsLength","newRange","continousSteppedDomain","_getStops2","uniqueRange","indexedRange","numVal","normalRange","strategyGetter","domainType","rangeType","schemeType","strategies","color_strategy_defineProperty","domainRange","ColorAxis","color_axis_classCallCheck","_domainType","_rangeType","_schemeType","getSchemeType","_colorStrategy","setColorStrategy","updateDomain","colorStrategy","getScheme","colorSchemes","hslColorArray","getRawColor","color_axis_toConsumableArray","scaleType","scaleInfo","originalDomain","originalRange","originalDomainLen","originalRangeLen","newDomain","_linearScale","rangeVal","domainRangeFn","setRangeWithInterpolatedColors","transformationArr","size_strategy_defineProperty","_strategies","pieceWiseRange","size_strategy_toConsumableArray","newIntervals","discreteRange","_userRange","SizeAxis","size_axis_classCallCheck","_sizeStrategy","setStrategy","strategy","domainInfo","domainFn","generator","ShapeAxis","shape_axis_classCallCheck","_generatedShapes","shapeType","shapeGenerator","generatorFn","generatedShapes","createAngleValues","angleData","_angleFn","_angleValues","AngleAxis","angle_axis_classCallCheck","customDomain","customRange","_this$_range","angle_axis_slicedToArray","WIDTH","HEIGHT","MIN_UNIT_WIDTH","MIN_UNIT_HEIGHT","DIMENSIONS","MEASURES","PIVOT","FORMAT","HAS_DATA_UPDATED","ROWS","COLUMNS","COL","ROW","COLUMN","DETAIL","LAYERS","TRANSFORM","RETINAL","CELL","X_AXES","Y_AXES","ENTRY_CELLS","INITIALIZED","EXIT_CELLS","AXIS","UNIT","UPDATED","BEFORE_UPDATE","VALUE_MATRIX","FACET_HEADERS","ARC","BAR","LINE","POINT","PRIMARY","SECONDARY","BOTH","INTERACTION","GRID_LINES","GRID_BANDS","HEADER","FACET","DEFAULT","DESCENDING","DARK","NONE","DARKER","adjustDomain","minOuterRadius","RadiusAxis","radius_axis_classCallCheck","_radiusFactor","sanitizedRange","DATA_TYPES","group_transform","data_type_scale_map_defineProperty","_dataTypeScaleMap","groupByIndices","identityTransform","transformMap","transform_factory_defineProperty","_transformMap","uniqueField","valueField","normalizedData","normalizeData","uniqueFieldIndex","valueFieldIndex","seriesKeyIndex","seriesKeys","tuples","rowObj","_tuple","seriesKey","newArr","orderBy","orderIndex","groupByIndex","stackData","seriesData","transformFactory","colorAxis","styleType","intensity","interactionType","stateColor","currentState","originalState","colorInfo","applyInteractionStyle","interactionStyles","elements","getPlotElementsFromSet","reset","applyLayerStyle","retrieveEncodingInf","encoding","encodingNames","encodingInf","encodingFieldInfRetriever","helpers_defineProperty","_encodingFieldInfRetr","setNullsInStack","transformedData","setNulls","transformData","transformType","encodingFieldInf","setNullData","connectNullData","xField","yField","xFieldType","yFieldType","getIndividualClassName","individualClassName","classNameStr","dataNormalizers","_dataNormalizers","radiusFieldIndex","angleFieldIndex","radius0FieldIndex","angle0FieldIndex","fieldsLen","pointObj","radius0","angle0","enc","xFieldIndex","yFieldIndex","x0FieldIndex","y0FieldIndex","getNormalizedData","transformedDataArr","encodingFieldsInf","domainCalculator","_domainCalculator","layerInst","angleValues","radius0Field","xFieldSubType","yFieldSubType","x0Field","y0Field","yEnc","xEnc","defFn","_d$update","attachDataToVoronoi","accessor","helpers_toConsumableArray","_accessor","updateStyle","animateGroup","groupTransition","groupAnimateStyle","effect","positionPoints","positioner","encodingTransform","getGroupSpan","getUnitWidth","getPlotMeasurement","dimensionalValues","fieldInfo","bandScale","_bandScale","span","groupSpan","offsetValues","actualGroupWidth","dataProps","timeDiffs","innerPadding","isAxisBandScale","axisPadding","groupPadding","renderLayer","render","throwback","parentNamespace","resolveInvalidTransformType","transformResolverPredicates","groupByField","dimensionField","getValidTransform","getValidTransformForAggFn","resolvedInvalidTransformType","_context$encodingFiel","isCustomTransformTypeProvided","getMarkId","resolveEncodingValues","transformedValues","getColorMetaInf","initialStyle","originalStyle","getCoordValue","trig","coordValueGetter","toCartesianCoordinates","rangePlot","_point$update","_coordValueGetter","sortData","axisArr","getBoundBoxes","_point$update2","getDataFromEvent","dataPoint","getIdentifiersFromData","layerId","localOptions","local_options_defineProperty","STATE_NAMESPACES","listener_map_slicedToArray","prevData","dataDidSet","getPreviousStyle","stylesForCurrentLevel","getLastItemInMap","strokeProps","stroke-width","stroke","stroke-opacity","parseStyle","datumStyle","applyStylesOnInteraction","_datum$meta","applicableStyles","strokePosition","applicableStrokePos","sanitizedStyles","parsedStyleVal","currentStyle","styleKeys","_partition2","helper_slicedToArray","strokeStyles","otherStyles","applyStyles","layerNs","groupNs","BaseLayerMixin","_superclass","_class","base_mixin_classCallCheck","base_mixin_possibleConstructorReturn","base_mixin_getPrototypeOf","base_mixin_assertThisInitialized","getterSetters","alias","_points","_cachedData","_measurement","_graphicElems","base_mixin_inherits","base_mixin_createClass","_store","_this$metaInf2","_alias","enableCaching","_cacheEnabled","clearCaching","getTransformedData","calculateDomainFromData","isEmpty","getDataDomain","encodingType","_this$metaInf3","getUidsFromPayload","uidsArr","dmUids","getUids","getNearestPoint","interactionConfig","interaction","resolveTransformType","_transformType","_this$metaInf4","unitDom","cachePoint","pointMap","_pointMap","getInteractionStyles","addOverlayPath","removeOverlayPath","interactionFn","allMeasures","_identifiers$","_identifiers$2","hasPlotSpan","getPlotSpan","getPlotPadding","getPointsFromIdentifiers","getAllAttrs","filteredPoints","base_mixin_toConsumableArray","sizeVal","getTransformedDataFromIdentifiers","measureIndex","_identifiers$getData","identifierData","identifierSchema","_normalizedData","_this$encodingFieldsI","layerName","tupleArr","transformedVal","graphicElems","elems","animationDone","base_mixin_slicedToArray","encodingValue","retrieveEncodingFields","_transformedData","calculateDomain","applyElementStyles","getState","getListeners","getRenderProps","_context$metaInf","unitRowIndex","unitColIndex","base_mixin_defineProperty","getQualifiedStateProps","_construct","userConf","shouldDrawAnchors","BaseLayer","containsNull","getborderIndexes","prevOfNull","nextOfNull","settIndexPrevOrNext","indexesObj","prevContainsNull","nextContainsNull","getElementsForLine","layer","strokeStyle","linepath","updateFns","drawLine","containerSelection","nullDataLineStyle","nullDataLineClass","curveInterpolatorFn","dd","elementWithNullData","sanitizeNullConfig","makeStartEndPair","borderIndexes","pairArray","pair","prevValue","nextValue","fade","focus","brushStroke","crossline","nearestPointThreshold","strokeOpacity","fillOpacity","strokeWidth","LineLayerMixin","line_mixin_classCallCheck","line_mixin_possibleConstructorReturn","line_mixin_getPrototypeOf","line_mixin_inherits","line_mixin_createClass","getDrawFn","translatePoints","xAxis","yAxis","isXDim","isYDim","xPx","yPx","getColor","resolvedEncodings","getTranslatedData","colorValFn","colorFieldIndex","colorVal","getPathStyle","qualifiedClassName","colorField","translatedPoints","seriesClassName","searchRadius","_point$data$data","line_mixin_toConsumableArray","line_mixin_get","drawArea","easeEffect","_map2","renderer_slicedToArray","enterAreaPath","updateAreaPath","selectionEnter","AreaLayerMixin","area_mixin_classCallCheck","area_mixin_possibleConstructorReturn","area_mixin_getPrototypeOf","area_mixin_inherits","area_mixin_createClass","area_mixin_get","nearestPoint","dimValue","pointArr","_pointArr$i$update","pointY0","classNameFn","minYVal","basePos","y0Px","invalidY","invalidY0","resolvedValues","AreaLayer","highlight","stroke-linejoin","shape","states","fadeout","selected","ArcLayerMixin","arc_mixin_classCallCheck","arc_mixin_possibleConstructorReturn","arc_mixin_getPrototypeOf","_prevPieData","arc_mixin_inherits","arc_mixin_createClass","_this$axes","radiusAxis","pieIndex","angleV","angles","_angles","uid","getOuterRadius","getInnerRadius","startAngle0","endAngle0","_previousInfo","getPreviousPoint","currIndex","prevArc","nextArc","_context$axes$angle$r2","arc_helper_slicedToArray","_this$config","qualClassName","_arcFn","consecutiveExits","exitCounter","tweenPie","individualClass","tweenExit","exitArr","oldExitCounter","tweenExitPie","consecutiveExitArr","gElem","pieSlices","pieSliceInf","tData","ArcLayer","LineLayer","drawText","selectionMerge","backgroundVal","textanchor","textStyle","background","backgroundPadding","_smartLabel$getOriSiz","backgroundEl","alignment-baseline","defaultEncoding","alignmentBaseLine","defRotation","pointTranslators","polar","textEncoding","angleAxis","textFormatter","backgroundEncoding","backgroundValue","text_mixin_objectSpread","cartesian","textField","textFieldIndex","textValue","text_mixin_slicedToArray","TextLayerMixin","text_mixin_classCallCheck","text_mixin_possibleConstructorReturn","text_mixin_getPrototypeOf","text_mixin_inherits","text_mixin_createClass","getPointTranslator","text-anchor","TextLayer","drawSymbols","createShape","groupElement","Element","newShape","nodeName","src","href","shapeElement","pathStr","checkPath","pathEl","exitGroup","defColorStyle","focusStroke","commonDoubleStroke","doubleStroke","anchors","persistent-anchors","brush-anchors","shapes","sizes","prepareDrawingInf","shapeAxis","sizeAxis","getShape","getSize","layerEncoding","helper_defineProperty","_config$offset","offsetX","offsetY","point_helper_slicedToArray","measure","getStrokeWidthByPosition","inside","outside","PointLayerMixin","point_mixin_classCallCheck","point_mixin_possibleConstructorReturn","point_mixin_getPrototypeOf","_overlayPath","formattedUids","point_mixin_inherits","point_mixin_createClass","maxSize","generateDataPoints","point_mixin_toConsumableArray","drawFn","_maxSize","_getPlotMeasurement2","point_mixin_slicedToArray","widthMetrics","heightMetrics","offsetXValues","offsetYValues","measurementConf","getMeasurementConfig","widthSpan","heightSpan","distanceLimit","refElement","pathElement","parentElement","styleVal","currentPath","point_mixin_get","PointLayer","drawRects","barEnterFn","transitionBars","selTransition","positionRetriever","isNegativeVal","barBasePos","resolveDimByField","axesInfo","spaceType","sizeEncoding","sizeConfig","sizeValue","enterSpace","minVal","maxVal","diffPx","minDomVal","endPos","_positionRetriever$ty2","bar_helper_slicedToArray","resolveDimensions","_resolveDimByField","enterWidth","enterX","xPos","_resolveDimByField2","enterHeight","BarLayerMixin","bar_mixin_classCallCheck","bar_mixin_possibleConstructorReturn","bar_mixin_getPrototypeOf","_plotPadding","_plotSpan","_rtree","bar_mixin_inherits","bar_mixin_createClass","bar_mixin_get","getTranslatedPoints","normalizedDataArr","barContainer","load","bar_mixin_slicedToArray","barWidthMetrics","barHeightMetrics","barWidthOffsets","barHeightOffsets","barWidth","barWidthOffset","barHeight","barHeightOffset","pathGroup","_strokeWidthPositionM","strokeWidthPositionMap","L1","L2","L3","BarLayer","tick_renderer","pathElem","angle0Axis","angle0V","angles0","_angles2","tick_mixin_objectSpread","_layerInst$encodingFi","_config$span","xSpan","ySpan","x0Px","TickLayerMixin","tick_mixin_classCallCheck","tick_mixin_possibleConstructorReturn","tick_mixin_getPrototypeOf","tick_mixin_inherits","tick_mixin_createClass","offsetM","offsetL","_ref$position","drawTicks","TickLayer","sanitizeEncoding","layerFactory","compositeLayers","factoryObj","setLayerRegistry","_layerRegistry","getSerializedConf","mark","layerDef","serializedDefs","defs","unitLayerDef","sDef","parseLayerDefinition","layerType","strs","propValue","layer_factory_toConsumableArray","getLayerInstance","layerRegistry","instances","layerObj","layerConstructor","getLayerClass","composeLayers","layerDefs","sanitizeLayerConfig","DEFAULT_LAYERS","defaults_defineProperty","_DEFAULT_LAYERS","LAYER_TYPES","layer_registry","layers","helpers","commonHelpers","pointLayerHelpers","layerMixins","getDimensionMeasureMap","retinalEncodingsAndMeasures","_layer$encodingFields","sizeField","shapeField","_retinalEncodingsAndM","src_helper_toConsumableArray","transformDataModels","dataModels","transformVal","getLayerFromDef","existingLayer","rowIndex","colIndex","instanceArr","_timeDiffs","resolveEncodingTransform","sanitizeLayerDef","sanitizedDefs","sConf","attachDataToLayers","transformedDataModels","dataSource","attachAxisToLayers","layerAxisIndex","axesObj","axisInf","axisIndex","getLayerAxisIndex","_layer$config","specificField","encodingField","fieldInst","getMembers","unionDomainFromLayers","axisFields","domainValues","layerDomain","fieldDomain","encodingDomain","fieldStr","domain1","renderLayers","_lifeCycleManager","notify","orderedLayers","layerParentGroup","layerDepOrder","_layerDepOrder","getNearestDimensionalValue","entryVal","getLayersBy","searchBy","removeLayersBy","createSideEffectGroup","createRenderPromise","_renderedPromise","_renderedResolve","getRadiusRange","radiusAxes","createRTree","interactive","rtree","AXES","LAYERDEFS","TRANSFORMEDDATA","DATADOMAIN","FIELDS","LAYERAXISINDEX","IDFIELD","GRID_LINE_PARENT_GROUP_CLASS","GRID_BAND_PARENT_GROUP_CLASS","GRID_PARENT_GROUP","TICK","GRID_BAND","GRID_LINE","CONSOLIDATED","FRAGMENTED","FACET_BY_FIELDS","RETINAL_FIELDS","PARENT_ALIAS","CACHED_DATA","STORE","DRAG","HOVER","SELECTIONDRAG","CLICK","LONGTOUCH","TOUCHDRAG","ALL_ACTIONS","SELECTION_NEW_ENTRY","SELECTION_NEW_EXIT","SELECTION_NULL","SELECTION_OLD_ENTRY","SELECTION_OLD_EXIT","SelectionSet","_volatile","selection_set_classCallCheck","completeSet","_uidMap","_measureNames","_dimVals","measureNames","dims","_fieldIndices","_completeSetCount","_resetted","uidMap","entrySet","exitSet","mergedEnter","mergedExit","dimVals","keepDims","_config$fields","_config$keys","measureNamesArr","addSet","removeSet","changeSideEffectAvailability","toEnable","sideEffects","change","enable","disable","getMergedSet","muze_firebolt_src_helper_toConsumableArray","getSideEffects","behaviour","behaviourEffectMap","behaviours","effects","getUidsFromCriteria","dimensionsMap","dimsMapGetter","_ref$addMeasures","addMeasures","firebolt_defineProperty","fieldIndexMap","measureNameField","propDims","dimsMap","dimKey","origRow","rowVal","measuresArr","firebolt_toConsumableArray","cloneObj","clonedVal","Firebolt","actions","firebolt_classCallCheck","_sideEffectDefinitions","_sideEffects","_propagationInf","_sourceSelectionSet","_actions","behavioural","physical","_selectionSet","_volatileSelectionSet","_propagationFields","_sideEffectPolicies","_propagationBehaviourMap","_behaviourPolicies","_actionBehaviourMap","_behaviourEffectMap","_entryExitSet","_actionHistory","_queuedSideEffects","_handlers","_payloadGenerators","_payloads","mapSideEffects","registerBehaviouralActions","registerSideEffects","registerPhysicalBehaviouralMap","physicalBehaviouralMap","registerPhysicalActions","setSideEffectConfig","sideEffect","sideEffectConf","behEffectMap","preventDefaultActions","effectNames","initializeBehaviouralActions","dispatchableBehaviours","Action","prepareSelectionSets","initializeSideEffects","sideEffectStore","actionHistory","queuedSideEffects","firebolt_typeof","sideEffectInstance","isEnabled","mutates","dispatchSideEffect","setTransform","propagationInfo","propagate","entryExitSet","shouldApplySideEffects","shouldApplyHighlightEffect","propagationIdentifiers","applicableSideEffects","getApplicableSideEffects","applySideEffects","getEntryExitSet","sourceSelectionSet","behaviourConditions","sideEffectConditions","physicalAction","actionBehaviourMap","behaviourMap","mapActionsAndBehaviour","handler","onDataModelPropagation","dispatchBehaviour","uniqueIds","behaviouralActions","volatileSelectionSet","sideEffectDefinitions","sideEffectsMap","SideEffect","initedActions","initializePhysicalActions","physicalActions","phyAction","initedPhysicalActions","getDefaultTargetContainer","bindActionWithBehaviour","registerPhysicalActionHandlers","targets","behaviourList","getKeysFromCriteria","firebolt","_metaData","_dimsMapGetter","handlers","genericHandlers","onPhysicalAction","beh","_this$context","getRangeFromIdentifiers","defaultFn","__default","EntryExitSet","entry_exit_set_classCallCheck","_uids","_data","_filteredModel","_model","entry_exit_set_createClass","GenericBehaviour","generic_classCallCheck","_enabled","getSelectionSet","getPropagationInf","_this$getAddSetFromCr","getAddSetFromCriteria","_payload","setSelectionSet","_this$firebolt","_selectionSet$getSets","getSets","getSetInfo","getSourceFields","fullData","propData","propagationFields","resetted","otherFields","generic_slicedToArray","generic_toConsumableArray","_propagationIdentifiers","VolatileBehaviour","existingAddSet","SELECTION","updateExit","getCompleteSet","BRUSH","HIGHLIGHT","TOOLTIP","FILTER","HighlightBehaviour","BrushBehaviour","BEHAVIOURNAMES","FilterBehaviour","PersistentBehaviour","updateEntry","SelectBehaviour","mergedExitSet","completeSetCount","dragCriteriaRetriever","drag_action_config_defineProperty","_dragCriteriaRetrieve","sourceInfo","startPos","ranges","getRangeFromPositions","getDragActionConfig","getSourceInfo","coordType","attachDragEvent","targetEl","drawingInf","touchStart","d3Drag","getDrawingContext","newStartPos","newEndPos","dragging","dragDiff","triggerPhysicalAction","dragEnd","hideSelBox","hover","tooltip","svgContainer","getAllPoints","showInPosition","ACTION_NAMES","generatePayloadFromEvent","selectionBoxDrag","onDrag","ACTIONS","click","physical_defineProperty","_physicalActions","longtouch","touchEnd","touchdrag","ANCHORS","BRUSH_ANCHORS","PERSISTENT_ANCHORS","HIGHLIGHTER","CROSSLINE","FRAGMENTED_TOOLTIP","AXIS_LABEL_HIGHLIGHTER","GenericSideEffect","generic_sideeffect_classCallCheck","_strategy","plotPointsFromIdentifiers","_this$firebolt$contex","getPlotPointsFromIdentifiers","_sourceInfo","_layers","_plotPointsFromIdentifiers","SurrogateSideEffect","_config$reset","layerFields","filteredUids","_ref2$","surrogate_slicedToArray","SpawnableSideEffect","_drawingContext","changeVisibility","sideEffectGroup","visible","SelectionBox","boxConf","box","drawingContext","unitWidth","unitHeight","selectionGroupClassName","persistent","hide","sourceInf","_getBoxDimensionsFrom","getBoxDimensionsFromPayload","xRange","yRange","xDim","yDim","xLinear","yLinear","xCriteria","yCriteria","x1Val","x2Val","x1DomainIndex","x2DomainIndex","_sort2","selection_box_helper_slicedToArray","y1Val","y2Val","y1DomainIndex","y2DomainIndex","_sort4","_xDim","_yDim","direction","selectionBox","selection_box_defineProperty","BEHAVIOURS","boxClassName","parentClassName","connectorClassName","content","iconContainerSize","iconScale","iconShape","iconColor","rowMargin","separator","arrow","Content","content_classCallCheck","_formatter","ctx","displayFormat","table","tbody","elemData","Tooltip","htmlContainer","tooltip_classCallCheck","connectorContainer","tooltipConf","contentClass","_tooltipContainer","_contentContainer","_contents","_tooltipConnectorContainer","defConf","contentConfig","specificClass","reorderContainers","contentConf","_target","tooltipPos","_orientation","connector","_offset","dim","_extent","contentContainer","topSpace","dimX","rightSpace","leftSpace","bottomSpace","arrowSize","tooltipHeight","tooltipWidth","spaces","positionHorizontal","positionVal","positionVertical","hMax","vMax","_position","HIGHLIGHT_SUMMARY","defNumberFormat","formatters","strategies_defineProperty","isSingleValue","dataLen","stackedSum","getStackedKeyValue","getKeyValue","isSelected","removeKey","isStackedBar","stackedValue","keyObj","valueObj","stackedValueObj","margin-left","getStackedSum","generateRetinalFieldsValues","valueArr","retinalFields","dimensionMeasureMap","fieldInf","retField","retIndex","retinalFieldValue","icon","_fieldInf$retField","formattedRetinalValue","hasMultipleMeasures","_fieldInf$measure","dName","formatterFn","currentMeasureValue","strategies_toConsumableArray","buildTooltipData","nestedDataObj","fieldValues","_dataModel$getData","fieldspace","_context$retinalField","detailFields","_ref2$showStackSum","showStackSum","_context$payload$sele","selectedMeasures","containsDetailField","getFieldInf","defFormatter","nf","getTabularData","strategies_construct","isStacked","isStackedChart","isStackedBarChart","filteredMeasures","generateTooltipContent","nestedData","_nestedData$i","_fieldInf$field","len2","_fieldInf$name","strategies_strategies","showMultipleMeasures","aggFns","entryUids","fieldsConf","aggregatedValues","getAggregatedValues","groupedDm","dmFields","_values$0$data","_fieldsConf$measure$d","rowValues","shouldApplySideEffect","sourceDims","configResolvers","tooltip_defineProperty","_configResolvers","specificConf","_default","side_effects_tooltip_classCallCheck","tooltip_possibleConstructorReturn","tooltip_getPrototypeOf","_tooltips","sanitizeConfig","strategyObj","sanitizedConf","createTooltip","tooltips","positionRelativeTo","tooltip_get","plotDim","_config$strategy","projectFields","dataTransform","strategyFn","dt","layoutContainer","parentContainerDimensions","layoutBoundBox","unitBoundBox","tooltipInst","TooltipRenderer","highlightSummary","selectionSummary","FragmentedTooltip","totalHeight","totalWidth","boundBox","showVertically","boxes","fragmented_tooltip_toConsumableArray","fragmented_tooltip_get","fragmented_tooltip_getPrototypeOf","tooltipBoundBox","getContents","spaceOutBoxes","spaceOutIfOverlap","firstBox","secondBox","opposite","repositionArrow","Crossline","bandWidth","px","bandClass","lineClass","isEmptyDataModel","plotWidth","crossline_toConsumableArray","startPx","endPx","parentGroup","fadeFn","fadeOnBrush","fadeOnBrushFn","getPayload","actualPoint","commonSet","currentHighlightedSet","selectEntrySet","diffSet","pseudoFocus","PlotHighlighter","plot_highlighter_classCallCheck","plot_highlighter_possibleConstructorReturn","plot_highlighter_getPrototypeOf","excludeSet","selectedPointsIds","plot_highlighter_toConsumableArray","currentStrategy","FilterEffect","entryModel","resetData","AnchorEffect","anchors_classCallCheck","anchors_possibleConstructorReturn","anchors_getPrototypeOf","_layersMap","addAnchorLayers","addLayer","layerCls","depLayerEncoding","defaultSizeValue","commonName","layerOwner","defaultClassName","groupId","getTransitionConfig","owner","registry","upperAnchors","lowerAnchors","targetObj","anchors_toConsumableArray","layerConfig","linkedLayer","getLayerByName","linkedLayerName","isUpperAnchor","_linkedLayer$getTrans2","anchors_slicedToArray","dmFromPayload","_linkedLayer$getTrans4","transformedDataModel","anchorSizeConfig","getAnchorSizeOnInteraction","getAnchorStroke","PersistentAnchors","anchor","defaultInteractionLayerEncoding","BrushAnchors","AxisLabelHighLighter","selectedData","selectedDataValues","_context$axes","_context$axes$x","_context$axes$y","axis_labels_highlighter_toConsumableArray","fieldMeta","selData","_axis$getTicksBasedOn","getTicksBasedOnData","selectedElements","nullDataTooltipMap","bar","applySideEffectOnEmptyTarget","behaviour_effect_map_defineProperty","brush","brushEntrySet","returnEntrySet","highlightUids","SIDE_EFFECTS","convertToObj","payloadGenerator","selectionDataModel","facetByFields","propPayload","getRangeFromData","_propConfig$includeMe","includeMeasures","selectionDataFields","measureNamesIdx","propagationDataModel","propagationDataDims","excludeSelectedMeasures","payload_generator_defineProperty","identifierMap","getIdentifierMeasureMap","facetsMap","identifierIdxMap","facetPresent","facetVal","payload_generator_toConsumableArray","sourceFields","pseudoSelect","isSideEffectEnabled","se","sideEffectPolicies","sideEffectCheckers","propagationData","prepareSelectionSetMap","maps","getUniqueKeys","_ref2$keys","_ref2$dimensionsMap","mKey","firebolt_helper_toConsumableArray","createMapByDimensions","cacheMap","_cacheMap","sideEffectPolicy","sourceIdentifierFields","propFields","hasCommonCanvas","sourceCanvas","UnitFireBolt","src_firebolt_classCallCheck","firebolt_possibleConstructorReturn","firebolt_getPrototypeOf","_connectedBehaviours","payloadGenerators","changeSideEffectStateOnPropagation","unitId","aliasName","parentAlias","propagationSourceCanvas","sourceUnitId","sourceUnit","sideEffectInstances","actionOnSource","mappedEffects","applySideEffect","enabledFn","enabled","getPayloadGeneratorFor","payloadFn","facetFieldsMap","behaviourPolicies","dispatchSecondaryActions","_ref4","secAction","generatedPayload","payloadGeneratorFn","firebolt_get","cachedData","action_behaviour_map_defineProperty","UnitBrushBehaviour","dragStart","brush_get","behaviours_brush_getPrototypeOf","getGridLayerDefinitions","axisType","getDefaultVisibilty","getLayerDefinition","_definition","_axes","_encoding","gridLines","gridBands","gridLineColor","zeroLineColor","gridBandColor","isLinearScale","grid_lines_defineProperty","isNegativeDomain","dimensionSubTypes","getValidSubtype","attachDataToGridLineLayers","_gridLines","_gridBands","gridLayerData","getGridLayerData","gridData","jsonData","_jsonData$push","grid_lines_toConsumableArray","src_listener_map_slicedToArray","fieldsVal","removeExitLayers","layersMap","markSet","queuedLayerDefs","_queuedLayerDefs","layerDefArr","listener_map_toConsumableArray","timeDiffsByField","minimumConsecutiveDifference","_ref8","_timeDiffsByField","originalData","_prepareSelectionSetD","prepareSelectionSetData","_prepareSelectionSetM","createSelectionSet","attachPropagationListener","_ref9","createGridLineLayer","vuConf","atomicDef","_ref11","_ref12","_ref15","_ref16","layerAxisIndexVal","_layerAxisIndex","axesVal","_dimensionMeasureMap","src_props_defineProperty","_PROPS","facets","facetKeys","trackerClassName","arcLayerClassName","sideEffectClassName","local_options","src_local_options_defineProperty","_CONFIG$LAYERDEFS$TRA","local_options_toConsumableArray","oldData","PseudoSelectBehaviour","unitNs","VisualUnit","visual_unit_classCallCheck","lifeCycleManager","_gridLinesSelection","_gridBandsSelection","createFireboltInstance","_Object$assign","interactions","fireboltDeps","Cls","getFireboltCls","visual_unit_defineProperty","getActionBehaviourMap","getBehaviourEffectMap","_firebolt","createRootContainers","_rootSvg","_sideEffectGroup","initSideEffects","class","renderGridLineLayers","gridLineParentGroup","_entry","grid_lines_slicedToArray","parentGroupClass","rootSvg","_this$parentContainer","parentContainerInf","layerDefinition","layerDefinitions","components","layerIndex","layersArr","_layersArr","markId","defArr","instanceValues","visual_unit_toConsumableArray","layerdeps","_this$_dependencies","parentModel","REACTIVE_PROPS","pointInf","getMarkInfFromLayers","visual_unit_objectSpread","markInf","parsedIdentifiers","_this$fields","xdom","ydom","localNs","dataDomain","visual_unit_slicedToArray","dispatchQueuedSideEffects","clearActionHistory","visual_unit_construct","Variable","ComposedVars","composed_vars_classCallCheck","composed_vars_possibleConstructorReturn","composed_vars_getPrototypeOf","vars","_vars","member","SimpleVariable","simple_var_classCallCheck","simple_var_possibleConstructorReturn","simple_var_getPrototypeOf","oneVar","_oneVar","dtFormat","dateFormat","fieldDef","varInst","convertToVar","datamodel","transformFields","field_sanitizer_slicedToArray","normalizedFields","normalizeFields","norFields","orderFields","fieldArray","temporalArr","categoricalArr","fieldList","numOfMeasures","allDimensions","field_sanitizer_toConsumableArray","temporal","categorical","rowsInfo","columnsInfo","rowDimensions","rowMeasures","rowTemporalFields","rowCategoricalFields","columnDimensions","columnMeasures","columnTemporalFields","columnCategoricalFields","BORDER_WIDTH","facet","handleBlankCell","externalClassname","sanitiseHeaderMatrix","matrices","sanitiseFacetValues","blankCell","normal","latestSource","lastSource","initStore","group_utils_defineProperty","isDistributionEqual","group_utils_toConsumableArray","rowType","initializeCacheMaps","cellMap","xAxesMap","yAxesMap","entryCellMap","exitCellMap","getAxisKey","getCellKey","columnId","extractUnitConfig","unitConfig","hasOneField","getHeaderText","headerCreator","fieldHeaders","TextCell","sanitizeCheck","isBorderPresent","findInGroup","variable","channel","group_utils_this","facetType","projType","getAxisType","retriveDomainFromData","mutateAxesFromMap","cacheMaps","xAxes","yAxes","xAxisSet","yAxisSet","axisId","getEncoder","encoder","CartesianEncoder","layerConf","hasPolarEncodings","PolarEncoder","getHeaderAxisFrom","userAxisFromConfig","axisFrom","headerFrom","group_utils_slicedToArray","firstField","secondField","firstFieldType","secondFieldType","setFacetsAndProjections","_encoder$simpleEncode","simpleEncoder","getFacetsAndProjections","projections","getBorders","showRowBorders","showColBorders","showValueBorders","valueMatrix","_rows","leftRows","rightRows","_columns","topColumns","bottomColumns","_encoder$fieldInfo","allDimensionLength","allMeasuresLength","allTemporalFieldsLength","getRowBorders","borders","getColumnsBorders","getValueBorders","borderTypeRow","borderTypeCol","getFieldsFromSuppliedLayers","suppliedLayerConfig","encodingArr","group_utils_typeof","extractFields","facetsAndProjections","flattenArray","sortFacetFields","facetNames","sortInfo","sortConfig","facetSortConfig","getSchemaDef","removeExitCells","exitCells","qualifiedStateProps","placeholder","globalConfig","VisualEncoder","visual_encoder_classCallCheck","_fieldInfo","_axisFrom","_headerFrom","__headerFrom","_getHeaderAxisFrom2","visual_encoder_slicedToArray","rowHeader","rowAxis","_getHeaderAxisFrom4","colHeader","colAxis","scaleMaps","getFieldNames","fieldVar","matrix_model_toConsumableArray","prepareHashMaps","rowKey","joinedRowKey","createJoinedKeys","keyArr","joinedKey","formatKeys","formatterList","formattedKeys","rKeys","rIdx","createColumnDataModels","colContext","sourceDM","rowFacets","colFacets","rowKeyArr","colKeyObj","newRowIndex","splitModelsHashMap","currentColumnIndex","colKeyArr","colKey","hashMapKey","splitByColumn","optionalProjections","facetInfo","projectionInfo","geomCellCreator","_indices$i","projectionIndexObject","columnIndex","matrix_model_objectSpread","getMatrixModel","currentRowIndex","prepareProjectionInfo","colProjections","rowProjections","rowProj","rIndex","newRIndex","colProj","cIndex","newCIndex","newRowProj","newColProj","rowFields","columnFields","prepareFacetInfo","rowFacetNames","colFacetNames","allFacets","_getSplitModelHashMap","getSplitModelHashMap","splitModels","rowKeyHashMap","colKeyHashMap","rowKeys","colKeys","splitContext","splitByRow","setDefaultConfigForFacet","_config$facetsUserCon","facetsUserConfig","border","_facetsUserConfig$isB","_facetsUserConfig$isG","isGridLinePresent","gridLinesShowLength","borderWidth","borderColor","borderStyle","borderConf","generalContext","rowKeyObj","createRowDataModels","rowContext","rowIndexForCurrentKey","_createColumnDataMode","_createColumnDataMode2","_createColumnDataMode3","_createColumnDataMode4","formattedColKeys","facetField","rawFormat","columnKeys","createValueCells","suppliedLayers","GeomCell","matrixLayers","horizontalAxis","verticalAxis","datamodelTransform","sortedFields","layerConfigArr","getLayerConfig","retinalConfig","axesCreators","normalizedColumns","normalizedRows","cell_creator_toConsumableArray","facetFields","geomCellKey","geomCell","updateCells","facetKey","extractAxisIndex","createAxisCells","currObj","axisInst","_axisInst$config","AxisCell","BlankCell","extractFacetIndex","headerPlaceholderGn","selectionObj","counter","selectionKeys","keySet","textCells","createTextCells","textCell","generatePlaceholders","encoders","valuesMatrix","takeAxisFrom","takeHeaderFrom","axisPlaceholderGn","selObj","axesMatrix","selObjProp","axesForDraw","rowsPrimary","rowPrime","rowsSecondary","rowSec","columnsPrimary","colPrime","columnsSecondary","colSec","_selectionObj","section","hContext","getAxisFields","fieldHolder","ac","transformDataModel","resolvedData","newFieldsConfig","aggregationFns","nearestAggFns","resolvedAggFns","sortDmTemporalFields","computeMatrices","resolverConfig","otherEncodings","isFacet","matrixGnContext","getCellDef","isRowSizeEqual","isColumnSizeEqual","colCells","rowCells","resetSimpleAxes","newCacheMap","valueCellContext","serializeLayerConfig","cellCreator","valueCellsCreator","valueMatrixInfo","_mutateAxesFromMap","createUnits","_generateMatrices","generateMatrices","leftHeaders","topHeaders","bottomHeaders","rightHeaders","cell_creator_slicedToArray","_map4","leftFacets","rightFacets","rowPriority","colPriority","leftMatrix","rightMatrix","topMatrix","bottomMatrix","currentBottomLength","setAvailableSpace","rowMatrix","columnMatrix","sanitizeCheckBorder","sanitiseBorderMatrix","bottomBorderObj","sanitiseGeomMatrix","RESOLVER_PROPS","units","MatrixResolver","matrix_resolver_classCallCheck","_registry","_layerConfig","_matrixLayers","_rowMatrix","_columnMatrix","_valueMatrix","_facets","_projections","_datamodelTransform","_units","_cacheMaps","_fireboltDeps","_placeholderInfo","matrix_resolver_toConsumableArray","getProjectionFields","_horizontalAxis","_verticalAxis","matrixType","matrix_resolver_defineProperty","_this5","_this$dependencies","autoGroupBy","_this$getAllFields","retContext","getRetinalFieldsDomain","getRetinalAxes","retinalEncoder","setCommonDomain","retinalAxes","updateVisualUnit","placeholders","bottomLeft","bottomRight","_this$dependencies2","showHeaders","_this$registry$cells","matrix_resolver_slicedToArray","topCols","bottomCols","rowHeaders","blankCellCreator","footers","topLeft","topRight","updateModel","dataTypeScaleMap","src_data_type_scale_map_defineProperty","data_type_scale_map_dataTypeScaleMap","getAdjustedDomain","y1ratio","y2ratio","allSameSign","generateAxisFromMap","axisKey","groupAxes","currentAxes","commonAxisKey","axisConfig","getAxisConfig","axisInfo","axisOrientation","rawUserAxisConfig","userAxisConfig","_rotationLock","createSimpleAxis","sanitizeIndividualLayerConfig","encodingConfigs","getDefaultMark","colFieldType","rowFieldType","createRetinalAxis","fieldProps","getIndex","arrIndex","getLayerConfFromFields","colFields","userLayerConfig","encoder_helper_toConsumableArray","xFields","yFields","colFieldExist","rowFieldExist","resolverAxes","axesArr","userConfig","getSortingConfig","currentFieldName","axesConfig","lastSortConfig","geomCellAxes","1","unitsArr","encodingDomains","axisTypeIndex","typeOfField","_resolver$axes","adjustedDomain","typeOfAxis","alignZeroLine","primaryFacets","secondaryFacets","primaryFields","secondaryFields","primaryLen","secondaryLen","projArr","primaryField","secondaryField","existIndex","axisFromIndex","cartesian_encoder_get","cartesian_encoder_getPrototypeOf","encodingObj","fieldInstance","layerArray","serializedLayers","colField","colFieldName","rowField","configs","rowFieldName","defConfigs","layerConfigs","mergedLayerConf","serializedLayerConfig","cartesian_encoder_toConsumableArray","axesCls","polar_encoder_defineProperty","_axesCls","pieAxes","varInstances","encType","domainProps","matrixInstance","unitDomains","setRadiusFactor","sizeFieldIndex","sizeMultiplier","getSizeMultiplier","sizeAxisDomain","encodingFields","sanitizedRows","sanitizedColumns","polar_encoder_get","polar_encoder_getPrototypeOf","sanitizedFields","typeIndex","polar_encoder_toConsumableArray","sanitizedConfig","angleField","angle0Field","RetinalEncoder","newAxes","visual_group_local_options","visual_group_local_options_defineProperty","_CONFIG$ROWS$COLUMNS$","SimpleGroup","ValueMatrix","matrixArr","value_matrix_classCallCheck","instancesById","cellValue","_instancesById","_matrix","_filterFn","rowWidth","currentRowWidth","getLogicalSpace","rowHeight","currentRowHeight","setMatrixInstances","_composition","updateChecker","option","hasValue","hasOneValue","createMatrices","groupConfig","matrixConfig","placeholderInfo","getMatrices","_originalGroupedData","_groupedDataModel","createRetinalAxes","setRetinalAxisDomain","cornerMatrices","createHeaders","metaData","unionUnitDomains","registerDomainChangeListener","visual_group_props_defineProperty","visual_group_props_PROPS","_prevData","groupType","cellRegistry","VisualGroup","visual_group_classCallCheck","visual_group_possibleConstructorReturn","visual_group_getPrototypeOf","componentSubRegistry","visual_group_assertThisInitialized","_selection","createMatrixResolver","initializeGlobalState","globalState","createUnitState","_VisualUnit$getState2","visual_group_helper_slicedToArray","localState","createLayerState","_BaseLayer$getState2","setupChangeListeners","stores","_context$registry","comp","storeInst","listenerInf","getSimpleAxes","_this$resolver$getAll","visual_group_defineProperty","sanitizedValue","shouldRender","localFields","initializeFields","unsubscribeChangeListeners","sanitizeRetinalConfig","retinalConf","confValue","createEncoderInstance","fieldSanitizer","setAxisAndHeaders","resolverFields","initializeResolverFields","hasMandatoryFields","info","getGroupByData","oriData","existingRemoveSet","select_toConsumableArray","firebolt_action_behaviour_map_defineProperty","action_behaviour_map_actionBehaviourMap","propagationBehaviourMap","_propagationBehaviour","firebolt_behaviour_effect_map_defineProperty","firebolt_behaviour_effect_map_behaviourEffectMap","propagationSideEffects","_propagationSideEffec","src_firebolt_helper_toConsumableArray","DEFAULTICONSIZE","SCALE_FUNCTIONS","HORIZONTAL","VALUE","POSITION_ALIGNMENT_MAP","constants_defineProperty","_POSITION_ALIGNMENT_M","OPPOSITE_POSITION","_OPPOSITE_POSITION","LegendFireBolt","_Firebolt","legend_firebolt_classCallCheck","legend_firebolt_possibleConstructorReturn","legend_firebolt_getPrototypeOf","legend_firebolt_inherits","legend_firebolt_createClass","getPropagationSelectionSet","behaviourName","canvasAlias","legend_firebolt_toConsumableArray","getFullData","highlightedSet","deselectedLegendItemsSet","includes","getCriteriaFromData","firebolt_physical_defineProperty","physical_physicalActions","boundingBox","gradientDimensions","axisScale","rangeShifter","drag_defineProperty","getSelectionCriteria","selectionBoxMeasure","drawingInfMeasure","subjectStartPoint","ALIGN","DEFAULT_MEASUREMENT","marginHorizontal","paddingRight","LEGEND_TITLE","_buffer","legend_defaults_defineProperty","bounds","upper","marker","tempConfig","STEP_DEFAULT_CONFIG","ICON_MAP","LEGEND_MARKER_PROPS","side_effects_selection_box_classCallCheck","side_effects_selection_box_possibleConstructorReturn","side_effects_selection_box_getPrototypeOf","gradientDimension","legendGradContainer","legendSelGroup","BUFFER","selBox","enterFn","selection_box_drag_defineProperty","fadeOut","brighten","LegendHighlighter","legend_highlighter_classCallCheck","legend_highlighter_possibleConstructorReturn","legend_highlighter_getPrototypeOf","SYMBOL_PADDING","LegendMarker","legend_marker_classCallCheck","legend_marker_possibleConstructorReturn","legend_marker_getPrototypeOf","_graphicElements","markerElement","legendmarkerTextContainer","legendmarkerText","rotateAngle","legendConfig","legendScale","pointerTextFormatter","lableConfig","labelText","_getRelativePosition","getRelativePosition","canvas","legendContainer","_canvasMount","_labelManager$getSmar","MARKER_BUFFER","legendmarkerGroup","textElement","createTextCell","labelManagerRef","maxLines","_minTickDiff","_cells","resetLogicalSpace","title","_title","getScaleInfo","scaleFn","getInterpolatedArrayData","domainForLegend","scaleParams","requiredWidth","requiredHeight","upperBound","maxTickDiff","alignment","smartLabelCalc","minimumTickSize","_smartLabelCalc$getOr","isInteger","getcomputedArray","computationhelper","requiredMeasure","availableMeasure","currentTickValue","nextTickValue","measureParam","pixelPerTick","getInterpolatedData","recomputeSteps","getTickMeasure","_scaleParams$measures","getItemMeasures","_labelManager","_labelManager$getOriS","calculateTitleWidth","titleWidth","maxItemSpaces","itemSpaces","localBuffer","cur","SimpleLegend","simple_legend_classCallCheck","_fieldName","defaultMeasurement","_computedStyle","legendBehaviours","_canvasAlias","_this$measurement","effPadding","effBorder","effMargin","dataFromScale","titleSpace","getTitleSpace","titleHeight","labelSpaces","getLabelSpaces","_computeItemSpaces","computeItemSpaces","textOrientation","iconSpaces","maxIconWidth","labelSpace","itemSpace","iconSpace","newLabelWidth","titleSpaces","_this$measurement2","_this$config3","titleCreator","textAlign","titleContainer","marginPosition","_this$config4","_this$measurement3","widthBox","renderTitle","rawVal","simple_legend_defineProperty","idRangeMap","canvasRoot","legendOrientation","position_config_defineProperty","_legendOrientation","datasets","itemContainerMeasures","getStepSpacesInfo","iconHeight","iconWidth","stepPadding","horizontal","vertical","positionConfig","_positionConfig","alignmentMap","_alignmentMap","itemStack","_itemStack","createLegendSkeleton","gradWidth","gradHeight","maxGradHeight","maxGradWidth","legendBody","legendItem","getItemContainers","legendInstance","positionObj","createItemSkeleton","_context$config","itemSkeleton","alignClass","applyItemStyle","measureType","stepColorCheck","_context$measurement","renderIcon","transalate","defaultIcon","defaultIconSize","DiscreteLegend","_getScaleInfo","_field$schema","discrete_legend_toConsumableArray","ele","nextVal","discrete_legend_defineProperty","discrete_legend_get","discrete_legend_getPrototypeOf","renderDiscreteItem","_context$measurement2","_item$icon","text-align","marginVerticalBuffer","allSelections","getGradientDomain","accumulator","currentValue","MAX_VALUE","MIN_VALUE","legendGradSvg","legendGradCont","linearGradient","makeLinearGradient","legendRect","GradientLegend","gradient_legend_toConsumableArray","gradient_legend_defineProperty","getScaleFactor","newAxis","axisSpace","axisDomainLength","_legendGradientSvg","gradient_legend_get","gradient_legend_getPrototypeOf","renderGradient","_createLegendSkeleton","markerWithBuffer","StepLegend","domainLeg","isFraction","step_legend_toConsumableArray","numRight","step_legend_defineProperty","stepData","step_legend_get","step_legend_getPrototypeOf","renderStepItem","_context$measurement3","_item$icon2","_positionConfig$posit","PADDING","BORDER","MARGIN","TITLE_TEMPLATE_NOT_ALLOWED_TAGS","IS_POINT_MAP","true","false","LEGEND_TYPE_MAP","src_constants_defineProperty","_LEGEND_TYPE_MAP","HORIZONTAL_CENTER","VERTICAL_CENTER","share","operators_construct","operators_toConsumableArray","strings","htmlCode","expLn","frag","createDocumentFragment","treeShakeNode","nodeType","Node","ELEMENT_NODE","tagName","childNodes","canvasIterator","canvases","iteratorFn","cFn","visualGroup","_throwback","registerActions","fnName","_registrableComponents","setFireboltDependencies","actionModel","ActionModel","action_model_classCallCheck","registerPropagationBehaviourMap","dissociateBehaviour","dissociateSideEffect","policy","registrableComponents","mergedPolicy","aliases","*","propagationPayload","propagationCanvas","crossInteractionPolicy","TITLE_CONFIG","SUB_TITLE_CONFIG","MESSAGE_CONFIG","baseFontLimit","upperFontLimit","baseSizeLimit","upperSizeLimit","fractionImage","fractionChild","canvas_local_options_defineProperty","_localOptions","canvasOptions","_canvasOptions","local_options_slicedToArray","arg1","arg2","local_options_typeof","titleConfig","subtitle","subtitleConfig","sub","LayoutComponent","layoutComponent_classCallCheck","_boundBox","_renderAt","_alignWith","_alignment","_componentName","_className","DummyComponent","newDimensions","renderAt","component","componentName","pagination","scrollBar","thickness","speed","legend","minHeight","minCharacters","verticalAlign","collapse","invalidValues","EXCLUDE_CONFIG_KEYS","DEFAULT_WIDTH","DEFAULT_HEIGHT","DEFAULT_CLASS_NAME","NODE_PREFIX","DefinitionModel","definitionModel_classCallCheck","_host","host","_cut","cut","_ratioWeight","ratioWeight","_preferred","preferred","_lanes","lanes","_remainingHeight","_remainingWidth","remainingHeight","remainingWidth","getNodeId","_uid","yExtraSpace","smallestHeight","getCutType","smallestExtraHeightHorizontally","MAX_SAFE_INTEGER","containerHeight","hostHeight","xExtraSpace","smallestWidth","smallestExtraWidthVertically","containerWidth","hostWidth","createPlaceHolderComponent","placeComponent","definitionModel","leftOvercomponentRationWidth","isPreferred","isGridComponent","componentRatioWidth","leftHeight","leftWidth","_component$getLogical","componentHeight","componentWidth","firstLaneConfig","firstLane","secondLane","tree_classCallCheck","_parentCut","_this$_children","tree_toConsumableArray","parentCut","bound","nodeconfig","searchNode","childNode","nodeId","deleteSearchNode","LayoutModel","measurements","layout_model_classCallCheck","_measurements","_root","createTree","setBoundBox","addChildren","lane","allocateBoundingBox","totalWeight","carry","lastSibling","ratio","setHostSpatialConfig","setHostPosition","negotiateDimension","alteredDim","nonAlteredDim","cumultiveExtraSpaceAmt","childrenLength","extraSpaceAmt","computePosition","determineBoundBox","bb","_lastSibling$boundBox","_top","_left","_height","_width","_instance$parent$boun","setSpatialConfig","VIEW_INDEX","ROW_MATRIX_INDEX","2","COLUMN_MATRIX_INDEX","ROW_ROOT","COLUMN_ROOT","VERTICAL","Utils","utils_createClass","isDOMElement","getID","getElement","findContainer","coordinate","removeDiv","divId","DataPoint","data_point_classCallCheck","DataParser","data_parser_classCallCheck","data_parser_createClass","defaultDataPointLogic","nodepoints","getnodePoints","datapoint","HTMLDataAdapter","_DataParser","html_data_classCallCheck","html_data_possibleConstructorReturn","html_data_getPrototypeOf","html_data_inherits","html_data_createClass","getCoordinates","html_data_get","Renderer","renderer_classCallCheck","renderer_createClass","initRenderer","__logicalTree","HTMLRenderer","_Renderer","html_renderer_classCallCheck","html_renderer_possibleConstructorReturn","html_renderer_getPrototypeOf","_coordinates","html_renderer_inherits","html_renderer_createClass","createhtml","mainDiv","html_renderer_get","parentDiv","createAndCustomiseParent","hasHost","createAndPositionDiv","html_renderer_objectSpread","div","coordinates","findNode","nodeID","renderer","drawLayout","renderHTML","resolveAligment","componentData","alignWith","componentToAlign","componentMap","refNode","newNodeConfig","setAlignConfig","DrawingManager","drawing_manager_classCallCheck","_componentMap","_layoutClassName","layoutClassName","_renderer","drawing_manager_createClass","drawComponent","DefinitionManager","definition_manager_classCallCheck","_prioritySequence","_totalHeight","_totalWidth","_targetComponentMap","prepareTargetComponentMap","targetComponentMap","canvasComponent","tempDefModel","componentRef","getComponent","placeGridComponent","gridComponents","iscolumnPreffered","_placeComponent","rowpreffred","LayoutDef","layout_def_classCallCheck","_layoutDefinition","layout_def_createClass","addComponent","layoutDefinition","addMultipleComponent","componentArray","sanitizedDefinition","hostObj","hostID","childHost","resetComponentMap","LayoutManager","layout_manager_classCallCheck","_dimension","_skeletonType","skeletonType","_layoutDef","_drawingManager","_rootNodeID","con","resetNode","updateNode","compute","_layout","calLayOutDef","_context$dimension","layoutDef","prioritySequence","generateConfigModel","negotiate","broadcast","layoutComponents","componentArr","compo","elementName","removeElement","elemID","co","deleteElement","setupChangeListener","allOptions","_allOptions","canvas_helper_toConsumableArray","nameSpaceProps","equalityChecker","dispatchProps","sanitizedData","getMandatoryFields","_cachedProps","notifyAnimationEnd","viewInfo","layout","centerMatrix","viewMatricesInfo","promises","cellArr","lifeCycle","animDonePromises","applyPropagationPolicy","changeBehaviourStateOnPropagation","isMeasure","applyInteractionPolicy","splom","isSplom","interactionPolicy","_interactionPolicy","_crossInteractionPolicy","unitFireBolt","canvas_helper_defineProperty","helper_objectSpread","createLayoutManager","src_options","minUnitWidth","minUnitHeight","options_slicedToArray","_auxConfig$reset","oldConf","facetDefaultConfig","fixFacetConfig","excludeKeys","emptyValueKeyObject","fixScrollBarConfig","GenericLayout","generic_layout_classCallCheck","_matrices","_centerMatrix","_mountPoint","DEFAULT_CONFIGURATION","grid_layout_defaults_defineProperty","_DEFAULT_CONFIGURATIO","_FieldNames$BORDER","DEFAULT_MEASUREMENTS","_DEFAULT_MEASUREMENTS","findInPage","page","combineMatrices","isTransposed","joinedMatrix","utils_toConsumableArray","rowData","computeLogicalSpace","maxMeasures","_config$isTransposed","unitMeasures","_getMeasureInfo","getMeasureInfo","firstMeasure","secondMeasure","minMeasures","getMinMeasures","_logicalSpace","utils_defineProperty","valueItem","maxMeasure","firstMeasureValue","secondMeasureValue","valueArray","_item$space","fMeasure","sMeasure","minSecondMeasure","createMatrixEachLevel","_arr$i","extraCellsRemover","beg","distribution","extraCellLengths","VisualMatrix","visual_matrix_classCallCheck","_lastLevelKey","_primaryMatrix","_secondaryMatrix","_maxMeasures","_availableSpace","_layoutMatrix","_tree","_createTree2","matrixTree","lastLevelKey","layoutMatrix","primaryMatrix","secondaryMatrix","breakPage","primaryMatrixLength","newMatrix","keyLength","heightMeasures","populateMaxMeasures","widthMeasures","calculateDepth","viewableMatrix","createViewPortMatrix","viewableMeasures","redistributeSpaces","childDepth","createMatrixInstances","matrixInfo","breakPointer","_breakPointer","brokenMatrix","breakMatrix","nextLevel","removeExtraCells","RowVisualMatrix","row_matrix_classCallCheck","row_matrix_possibleConstructorReturn","row_matrix_getPrototypeOf","maxHeights","maxWidths","matrixInst","cellDimOptions","matrixIndex","_this2$getCellDimensi","getCellDimensions","widths","rowHeights","columnWidths","primary","secondary","begCellLen","endCellLen","remainingAvailWidth","cWidths","conditions","maxPrioritySpace","availableWidth","currentWidth","prioritySpace","logicalWidths","getPriorityDistribution","mWidth","mHeight","redistributeViewSpaces","computeViewableSpaces","rHeights","gutter","spaceTakenByColumn","getDistributedHeight","heightWithoutGutter","distSum","gutterSum","availableHeight","colLen","distHeight","colHeight","colWidth","heights","ColumnVisualMatrix","column_matrix_classCallCheck","column_matrix_possibleConstructorReturn","column_matrix_getPrototypeOf","heightDist","divider","condition","spaceTakenByRow","getDistributedWidth","layoutConfig","distWidth","rowLen","oldLogicalSpace","heightDistribution","getMatrixMeasurement","setViewSpaces","pointerType","viewSpaces","pointer","computations_defineProperty","paginationDetailsMap","scrollType","paginationMeasureGetter","relatedMaxMeasure","getMatrixMeasureForPagination","measureDetails","actualMeasure","scrollInfo","getMatrixHeightDetails","columnMatrixWidth","_getHeightRequiredByC","getHeightRequiredByColMatrix","maxColumnMatrixHeight","columnViewSpace","getViewableSpaces","columnPointer","columnMatrixHeight","maxHeightAvailableForRowMatrix","rowMatrixHeight","bufferCondition","isScroll","getActualBufferFromConfig","computations_slicedToArray","getBufferFromCondition","currentBufferType","horizontalBuffer","verticalBuffer","computeLayoutMeasurements","_getMatrixWidthDetail","getMatrixWidthDetails","_layout$config3","rowMatrixWidth","maxRowMatrixWidth","maxWidthAvailableForColumnMatrix","_getMatrixHeightDetai","_getActualBufferFromC","rowViewableSpaces","columnViewableSpaces","setValueMatrixMeasurements","computations_toConsumableArray","rowWidthsPrimary","rowWidthsSecondary","columnHeightsPrimary","columnHeightsSecondary","measureSum","GridLayout","layout_classCallCheck","layout_possibleConstructorReturn","layout_getPrototypeOf","_layoutId","_scrollInfo","generateVisualMatrices","begColCells","endColCells","gutterSpace","layout_helper_slicedToArray","_center","_bottom","layout_helper_toConsumableArray","RowMatrix","ColumnMatrix","layout_get","_computeLayoutMeasure","setViewInformation","pageNumber","pageType","totalPages","layout_defineProperty","renderGrid","currentPage","_viewInfo","maxRowHeight","maxColWidth","rowPointer","getViewMatrices","rowMatrices","getViewableMatrices","columnMatrices","centralMatrixPointer","rowMatrixLen","columnMatrixLen","rowPages","columnPages","layoutDimensions","getViewMeasurements","_layout$config","rowSpaces","colSpaces","rightWidth","topHeight","bottomHeight","centerHeight","centerWidth","viewWidth","viewHeight","actualCenterMeasures","totalMeasures","unitHeights","unitWidths","specificBorderApplier","borderTypes","showBorders","borderInfo","borderType","applySpecificBorder","applyBorders","borderApplierFn","borderApplier","border_helper_defineProperty","borderMapVal","borderMap","orderMaker","nestByStack","updateArr","optionalParams","currStack","prevStack","arrVal","stackVal","currElemIndex","newElem","arrElem","returnArr","spanCalculator","isNull","maskCreator","_nestByStack","viewMatrix","hierarchy","_nestByStack2","spanGenerator","spans","ridx","currSpan","getOrder","matrixSpanGeneratorMap","span_maker_defineProperty","_matrixSpanGeneratorM","orderGetter","viewMatrixMaker","spanMaker","matrixSpanGenerator","spanApplier","cellCounter","spaceAllocationDueToSpan","primaryUnitWidth","cumulativeWidth","spanApplierMap","_spanApplierMap","TransactionSupport","INTERFACE_IMPl","LAYER_DEF","DETAIL_FIELDS","GEOM","BLANK","SimpleCell","simple_cell_classCallCheck","enums_defaults_defineProperty","_DEFAULT_CONFIG","_CONSTANTS$MARGIN","CONSTANTS","_CONSTANTS$PADDING","_CONSTANTS$HEADER_PAD","_CONSTANTS$TITLE_PADD","DEFAULT_PROPS","minSpacing","visual_cell_src_props_defineProperty","visual_cell_src_props_PROPS","caption","smartText","axis_cell_classCallCheck","axis_cell_possibleConstructorReturn","axis_cell_getPrototypeOf","_availHeight","_availWidth","axis_cell_assertThisInitialized","computeAxisSpace","logicalWidth","logicalHeight","spaceFixer","_axis$getLogicalSpace","actualWidth","actualHeight","_axis$config2","wrapperDiv","blank_cell_classCallCheck","blank_cell_possibleConstructorReturn","blank_cell_getPrototypeOf","blank_cell_assertThisInitialized","setSmartText","_context$minSpacing","minHeightSpace","minWidthSpace","paddedHeight","paddedWidth","isTitleSubtitle","subType","returnVal","computeTextSpace","_context$minSpacing2","minText","_minTextSpace","smartSpace","smHeight","smWidth","headerPadding","text_cell_classCallCheck","text_cell_possibleConstructorReturn","text_cell_getPrototypeOf","text_cell_assertThisInitialized","titlePadding","vAlign","_this$smartText","translation","middle","setPadding","localPadding","geom_cell_classCallCheck","geom_cell_possibleConstructorReturn","geom_cell_getPrototypeOf","_unit","_datamodel","_facetByFields","_transform","_caption","geom_cell_assertThisInitialized","captionSpace","computeGeomSpace","getCaptionSpace","captionDom","DEFAULT_PLACEHOLDERS","src_defaults_defineProperty","_DEFAULT_PLACEHOLDERS","resolveTitleSubTitleContent","rawContent","createHeading","prevCell","cellType","legendInitializer","prevLegends","legends","headerHeight","legendInfo","legendCreator","LegendCls","dataset","scaleProps","_scale$config","stepMapper","interactionRegistry","dataInfo","legendMeasures","titleText","legendIconShapeMapper","layerMarks","setLegendMeasures","MuzeComponent","_this$boundBox","HeaderComponent","headerComponent_classCallCheck","headerComponent_possibleConstructorReturn","headerComponent_getPrototypeOf","setParams","cont","renderHeader","LegendComponent","legendComponent_classCallCheck","legendComponent_possibleConstructorReturn","legendComponent_getPrototypeOf","legendSpace","sectionComponents","_this$params$config","legendMount","legWidth","legHeight","sections","currHeight","currWidth","leg","legendHeight","legendWidth","renderLegend","_defaultAlignmentHelp","defaultAlignmentHelper","setParentInfo","arrowSizeMap","getUnitPositions","totalLength","viewLength","currentLen","unitPosition","createScrollBarArrow","createScrollBarRect","mover","applyScrollMouseDownAction","moverRect","scrollMaker","_mover$node$getBoundi","_rect$node$getBoundin","rectX","rectY","changeMoverPosition","registerListenerOnArrow","arrowType","_components","isTouchDevice","applyMoverDrag","moverStartPos","rectStartPos","distanceMoved","actualPosition","pageXOffset","pageYOffset","applyRectClick","emptyScrollAreaClick","manager","unitPositions","ScrollMaker","scroll_maker_classCallCheck","_attachedScrollAction","_unitPositions","scroll_maker_createClass","scrollTo","scrollDeltaTo","createScroll","scrollBarContainer","scrollContainerHelper","attachScrollAction","externalScrollAction","detachScrollAction","scrollMakerMap","_ScrollMaker","HorizontalScrollMaker","horizontal_scroll_maker_classCallCheck","horizontal_scroll_maker_possibleConstructorReturn","horizontal_scroll_maker_getPrototypeOf","horizontal_scroll_maker_inherits","horizontal_scroll_maker_createClass","horizontal_scroll_maker_get","prevArrow","nextArrow","_this$logicalSpace","scrollBarWithouArrowLength","_scrollBarWithouArrowLength","_this$_components$mov","positionAdjuster","newPosition","currentPos","_this$_components$mov2","moverPos","movedViewLength","performAttachedScrollFunction","_this$_components$mov3","scrollPercentage","movement","VerticalScrollMaker","vertical_scroll_maker_classCallCheck","vertical_scroll_maker_possibleConstructorReturn","vertical_scroll_maker_getPrototypeOf","vertical_scroll_maker_inherits","vertical_scroll_maker_createClass","vertical_scroll_maker_get","ScrollComponent","scroll_component_classCallCheck","scrollBarComponentConfig","scroll_component_possibleConstructorReturn","scroll_component_getPrototypeOf","unitIndex","sanitizedUnitIndex","externalAction","MatrixComponent","matrix_component_classCallCheck","matrix_component_possibleConstructorReturn","matrix_component_getPrototypeOf","_this$params$config$s","containerForMatrix","applyScroll","_cellSpanMaker","cellSpanMaker","_matrixSpanGenerator","renderTable","applySpans","applier","renderPlaceholders","renderMatrix","applyScrollAction","scollDistance","GridComponent","grid_component_classCallCheck","grid_component_possibleConstructorReturn","grid_component_getPrototypeOf","_this$component$viewI","matrixDim","matrixName","_this$params$componen","updateWrapper","_this$params$componen2","matrixWrapper","allComponents","_scrollBarManager","scrollBarManager","wheelDeltaX","wheelDeltaY","preventBrowserScroll","triggerScrollBarAction","movedView","scrollActionApplier","_this$component$0$0$b","sanitizeGrid","attachScrollListener","MessageComponent","message_component_classCallCheck","message_component_possibleConstructorReturn","message_component_getPrototypeOf","_config$dimensions","childHeight","message","imageNode","messageNode","formatFontSize","_params$config","headerCell","configType","headerAlignmentMap","component_wrapper_maker_defineProperty","_headerAlignmentMap","isGridPresent","renderDetails","_renderDetails$compon","checkParamsValidation","createHeaderWrapper","headerType","layoutManager","_headerMap$headerType","headerConfig","wrapperParams","component_wrapper_maker_objectSpread","existingComponent","createScrollBarWrapper","scrollBarType","grid","_scrollBarMap$scrollB","scrollBarMap","layoutBasedMeasure","viewMeasure","rowAlign","colAlign","componentWrapperMaker","_layoutManager","createMessageWrapper","_i","_headerValues","defaultDimensions","canvasHeight","canvasWidth","gridComponent","getBoundBox","createLegendWrapper","legendWrapper","gridLayoutWrapper","verticalScrollBar","horizontalScrollBar","ScrollManager","scroll_manager_classCallCheck","_scrollBarComponents","_attachedComponents","scroll_manager_createClass","scrollBarComponents","attachedComponents","performScrollAction","getRenderDetails","_mount$getBoundingCli","heightAttr","widthAttr","visGroup","_visGroup$placeholder","legendPosition","layoutArrangement","arrangeComponents","_titleLayouts","titleLayouts","component_resolver_defineProperty","legendLayouts","titlePosition","subtitlePosition","availableHeightForCanvas","availableWidthForCanvas","_createHeaders","isSubtitle","headerOptions","_createHeading","createLegend","getLegendSpace","mountSpace","componentIndexes","componentNames","3","4","5","6","renderLayout","gridLayout","compWrappers","componentWrappers","createScrollManager","horizontalScrollWrapper","verticalScrollWrapper","gridWrapper","hScrollBar","vScrollBar","componentWrapper","deleteElementName","removeComponent","registerComponents","attachListeners","attachListener","addFacetDataAndMeasureNames","facetData","facetVals","firebolt_helper_defineProperty","hasMeasureNameField","dataWithFacets","canvas_firebolt_helper_toConsumableArray","measureNameArr","isDimension","isCrosstab","dispatchBehaviours","addSelectedMeasuresInPayload","groupFields","_unit$fields","propagationDataSource","getPropagationSource","attachBehaviours","crosstab","tooltipSideEffect","defaultCrossInteractionPolicy","propagationCanvasAlias","GroupFireBolt","group_firebolt_classCallCheck","group_firebolt_possibleConstructorReturn","group_firebolt_getPrototypeOf","defaultInteractionPolicy","group_firebolt_assertThisInitialized","handleDataModelPropagation","_this$context$config$","_ref$instance","findPlaceHolderById","handlePhysicalAction","resetSelectAction","groupDataMap","linkedRows","idValue","linkedRow","group_firebolt_toConsumableArray","group_firebolt_get","auxConfig","propagateValues","sourceCanvasId","sideEfffects","propagationBehaviour","sourceBehaviour","propagationConf","propConf","behaviourInstance","_propagationInf$unit","APP_INITIAL_STATE","app","Canvas","globalDependencies","canvas_classCallCheck","canvas_possibleConstructorReturn","canvas_getPrototypeOf","canvas_defineProperty","canvas_assertThisInitialized","initedComponents","initCanvas","createGroupState","_VisualGroup$getState2","canvas_helper_slicedToArray","prepareLayout","triggerReflow","setLayoutInfForUnits","getRootNodeId","setComponentInfo","setLabelRotationForAxes","rotationVal","getAxes","initialSettings","regEntry","COMPONENTS","default_registry_defineProperty","_COMPONENTS","SUBREGISTRIES","utils","Smartlabel","globalCache","defaultRegistry","globalRegistry","overrideRegistryDefinitions","overrideRegistry","muze","_transactor2","muze_slicedToArray","env","globalStore","componentSubRegistryDef","settings","withSettings","Components","VisualLayer","unitHelpers","unitEnums","Encoders","encoderHelpers","groupUtils","groupEnums","SideEffects","standards","Behaviours","pkg","operators"],"mappings":"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","file":"muze.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"muze\", [], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"muze\"] = factory();\n\telse\n\t\troot[\"muze\"] = factory();\n})(window, function() {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 18);\n","(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"DataModel\", [], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"DataModel\"] = factory();\n\telse\n\t\troot[\"DataModel\"] = factory();\n})(window, function() {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 1);\n","const DataModel = require('./export');\n\nmodule.exports = DataModel.default ? DataModel.default : DataModel;\n","/**\n * DataFormat Enum defines the format of the input data.\n * Based on the format of the data the respective adapter is loaded.\n *\n * @readonly\n * @enum {string}\n */\nconst DataFormat = {\n    FLAT_JSON: 'FlatJSON',\n    DSV_STR: 'DSVStr',\n    DSV_ARR: 'DSVArr',\n    AUTO: 'Auto'\n};\n\nexport default DataFormat;\n","/**\n * DimensionSubtype enum defines the sub types of the Dimensional Field.\n *\n * @readonly\n * @enum {string}\n */\nconst DimensionSubtype = {\n    CATEGORICAL: 'categorical',\n    TEMPORAL: 'temporal',\n    BINNED: 'binned',\n    ID: '__id'\n};\n\nexport default DimensionSubtype;\n","/**\n * MeasureSubtype enum defines the sub types of the Measure Field.\n *\n * @readonly\n * @enum {string}\n */\nconst MeasureSubtype = {\n    CONTINUOUS: 'continuous'\n};\n\nexport default MeasureSubtype;\n","/**\n * FieldType enum defines the high level field based on which visuals are controlled.\n * Measure in a high level is numeric field and Dimension in a high level is string field.\n *\n * @readonly\n * @enum {string}\n */\nconst FieldType = {\n    MEASURE: 'measure',\n    DIMENSION: 'dimension'\n};\n\nexport default FieldType;\n","/**\n * Filtering mode enum defines the filering modes of DataModel.\n *\n * @readonly\n * @enum {string}\n */\nconst FilteringMode = {\n    NORMAL: 'normal',\n    INVERSE: 'inverse',\n    ALL: 'all'\n};\n\nexport default FilteringMode;\n","/**\n * Group by function names\n *\n * @readonly\n * @enum {string}\n */\nconst GROUP_BY_FUNCTIONS = {\n    SUM: 'sum',\n    AVG: 'avg',\n    MIN: 'min',\n    MAX: 'max',\n    FIRST: 'first',\n    LAST: 'last',\n    COUNT: 'count',\n    STD: 'std'\n};\n\nexport default GROUP_BY_FUNCTIONS;\n","/**\n * Creates a JS native date object from input\n *\n * @param {string | number | Date} date Input using which date object to be created\n * @return {Date} : JS native date object\n */\nfunction convertToNativeDate (date) {\n    if (date instanceof Date) {\n        return date;\n    }\n\n    return new Date(date);\n}\n/**\n * Apply padding before a number if its less than 1o. This is used when constant digit's number to be returned\n * between 0 - 99\n *\n * @param {number} n Input to be padded\n * @return {string} Padded number\n */\nfunction pad (n) {\n    return (n < 10) ? (`0${n}`) : n;\n}\n/*\n * DateFormatter utility to convert any date format to any other date format\n * DateFormatter parse a date time stamp specified by a user abiding by rules which are defined\n * by user in terms of token. It creates JS native date object from the user specified format.\n * That native date can also be displayed\n * in any specified format.\n * This utility class only takes care of format conversion only\n */\n\n/*\n * Escapes all the special character that are used in regular expression.\n * Like\n * RegExp.escape('sgfd-$') // Output: sgfd\\-\\$\n *\n * @param text {String} : text which is to be escaped\n */\nRegExp.escape = function (text) {\n    return text.replace(/[-[\\]{}()*+?.,\\\\^$|#\\s]/g, '\\\\$&');\n};\n\n/**\n * DateTimeFormatter class to convert any user format of date time stamp to any other format\n * of date time stamp.\n *\n * @param {string} format Format of the date given. For the above date,\n * 'year: %Y, month: %b, day: %d'.\n * @class\n */\n/* istanbul ignore next */ function DateTimeFormatter (format) {\n    this.format = format;\n    this.dtParams = undefined;\n    this.nativeDate = undefined;\n}\n\n// The identifier of the tokens\nDateTimeFormatter.TOKEN_PREFIX = '%';\n\n// JS native Date constructor takes the date params (year, month, etc) in a certail sequence.\n// This defines the sequence of the date parameters in the constructor.\nDateTimeFormatter.DATETIME_PARAM_SEQUENCE = {\n    YEAR: 0,\n    MONTH: 1,\n    DAY: 2,\n    HOUR: 3,\n    MINUTE: 4,\n    SECOND: 5,\n    MILLISECOND: 6\n};\n\n/*\n * This is a default number parsing utility. It tries to parse a number in integer, if parsing is unsuccessful, it\n * gives back a default value.\n *\n * @param: defVal {Number} : Default no if the parsing to integer is not successful\n * @return {Function} : An closure function which is to be called by passing an the value which needs to be parsed.\n */\nDateTimeFormatter.defaultNumberParser = function (defVal) {\n    return function (val) {\n        let parsedVal;\n        if (isFinite(parsedVal = parseInt(val, 10))) {\n            return parsedVal;\n        }\n\n        return defVal;\n    };\n};\n\n/*\n * This is a default number range utility. It tries to find an element in the range. If not found it returns a\n * default no as an index.\n *\n * @param: range {Array} : The list which is to be serached\n * @param: defVal {Number} : Default no if the serach and find does not return anything\n * @return {Function} : An closure function which is to be called by passing an the value which needs to be found\n */\nDateTimeFormatter.defaultRangeParser = function (range, defVal) {\n    return (val) => {\n        let i;\n        let l;\n\n        if (!val) { return defVal; }\n\n        const nVal = val.toLowerCase();\n\n        for (i = 0, l = range.length; i < l; i++) {\n            if (range[i].toLowerCase() === nVal) {\n                return i;\n            }\n        }\n\n        if (i === undefined) {\n            return defVal;\n        }\n        return null;\n    };\n};\n\n/*\n * Defines the tokens which are supporter by the dateformatter. Using this definitation a value gets extracted from\n * the user specifed date string. This also formats the value for display purpose from native JS date.\n * The definition of each token contains the following named properties\n * {\n *     %token_name% : {\n *         name: name of the token, this is used in reverse lookup,\n *         extract: a function that returns the regular expression to extract that piece of information. All the\n *                  regex should be gouped by using ()\n *         parser: a function which receives value extracted by the above regex and parse it to get the date params\n *         formatter: a formatter function that takes milliseconds or JS Date object and format the param\n *                  represented by the token only.\n *     }\n * }\n *\n * @return {Object} : Definition of the all the supported tokens.\n */\nDateTimeFormatter.getTokenDefinitions = function () {\n    const daysDef = {\n        short: [\n            'Sun',\n            'Mon',\n            'Tue',\n            'Wed',\n            'Thu',\n            'Fri',\n            'Sat'\n        ],\n        long: [\n            'Sunday',\n            'Monday',\n            'Tuesday',\n            'Wednesday',\n            'Thursday',\n            'Friday',\n            'Saturday'\n        ]\n    };\n    const monthsDef = {\n        short: [\n            'Jan',\n            'Feb',\n            'Mar',\n            'Apr',\n            'May',\n            'Jun',\n            'Jul',\n            'Aug',\n            'Sep',\n            'Oct',\n            'Nov',\n            'Dec'\n        ],\n        long: [\n            'January',\n            'February',\n            'March',\n            'April',\n            'May',\n            'June',\n            'July',\n            'August',\n            'September',\n            'October',\n            'November',\n            'December'\n        ]\n    };\n\n    const definitions = {\n        H: {\n            // 24 hours format\n            name: 'H',\n            index: 3,\n            extract () { return '(\\\\d+)'; },\n            parser: DateTimeFormatter.defaultNumberParser(),\n            formatter (val) {\n                const d = convertToNativeDate(val);\n\n                return d.getHours().toString();\n            }\n        },\n        l: {\n            // 12 hours format\n            name: 'l',\n            index: 3,\n            extract () { return '(\\\\d+)'; },\n            parser: DateTimeFormatter.defaultNumberParser(),\n            formatter (val) {\n                const d = convertToNativeDate(val);\n                const hours = d.getHours() % 12;\n\n                return (hours === 0 ? 12 : hours).toString();\n            }\n        },\n        p: {\n            // AM or PM\n            name: 'p',\n            index: 3,\n            extract () { return '(AM|PM)'; },\n            parser: (val) => {\n                if (val) {\n                    return val.toLowerCase();\n                }\n                return null;\n            },\n            formatter: (val) => {\n                const d = convertToNativeDate(val);\n                const hours = d.getHours();\n\n                return (hours < 12 ? 'AM' : 'PM');\n            }\n        },\n        P: {\n            // am or pm\n            name: 'P',\n            index: 3,\n            extract () { return '(am|pm)'; },\n            parser: (val) => {\n                if (val) {\n                    return val.toLowerCase();\n                }\n                return null;\n            },\n            formatter: (val) => {\n                const d = convertToNativeDate(val);\n                const hours = d.getHours();\n\n                return (hours < 12 ? 'am' : 'pm');\n            }\n        },\n        M: {\n            // Two digit minutes 00 - 59\n            name: 'M',\n            index: 4,\n            extract () { return '(\\\\d+)'; },\n            parser: DateTimeFormatter.defaultNumberParser(),\n            formatter (val) {\n                const d = convertToNativeDate(val);\n                const mins = d.getMinutes();\n\n                return pad(mins);\n            }\n        },\n        S: {\n            // Two digit seconds 00 - 59\n            name: 'S',\n            index: 5,\n            extract () { return '(\\\\d+)'; },\n            parser: DateTimeFormatter.defaultNumberParser(),\n            formatter (val) {\n                const d = convertToNativeDate(val);\n                const seconds = d.getSeconds();\n\n                return pad(seconds);\n            }\n        },\n        K: {\n            // Milliseconds\n            name: 'K',\n            index: 6,\n            extract () { return '(\\\\d+)'; },\n            parser: DateTimeFormatter.defaultNumberParser(),\n            formatter (val) {\n                const d = convertToNativeDate(val);\n                const ms = d.getMilliseconds();\n\n                return ms.toString();\n            }\n        },\n        a: {\n            // Short name of day, like Mon\n            name: 'a',\n            index: 2,\n            extract () { return `(${daysDef.short.join('|')})`; },\n            parser: DateTimeFormatter.defaultRangeParser(daysDef.short),\n            formatter (val) {\n                const d = convertToNativeDate(val);\n                const day = d.getDay();\n\n                return (daysDef.short[day]).toString();\n            }\n        },\n        A: {\n            // Long name of day, like Monday\n            name: 'A',\n            index: 2,\n            extract () { return `(${daysDef.long.join('|')})`; },\n            parser: DateTimeFormatter.defaultRangeParser(daysDef.long),\n            formatter (val) {\n                const d = convertToNativeDate(val);\n                const day = d.getDay();\n\n                return (daysDef.long[day]).toString();\n            }\n        },\n        e: {\n            // 8 of March, 11 of November\n            name: 'e',\n            index: 2,\n            extract () { return '(\\\\d+)'; },\n            parser: DateTimeFormatter.defaultNumberParser(),\n            formatter (val) {\n                const d = convertToNativeDate(val);\n                const day = d.getDate();\n\n                return day.toString();\n            }\n        },\n        d: {\n            // 08 of March, 11 of November\n            name: 'd',\n            index: 2,\n            extract () { return '(\\\\d+)'; },\n            parser: DateTimeFormatter.defaultNumberParser(),\n            formatter (val) {\n                const d = convertToNativeDate(val);\n                const day = d.getDate();\n\n                return pad(day);\n            }\n        },\n        b: {\n            // Short month, like Jan\n            name: 'b',\n            index: 1,\n            extract () { return `(${monthsDef.short.join('|')})`; },\n            parser: DateTimeFormatter.defaultRangeParser(monthsDef.short),\n            formatter (val) {\n                const d = convertToNativeDate(val);\n                const month = d.getMonth();\n\n                return (monthsDef.short[month]).toString();\n            }\n        },\n        B: {\n            // Long month, like January\n            name: 'B',\n            index: 1,\n            extract () { return `(${monthsDef.long.join('|')})`; },\n            parser: DateTimeFormatter.defaultRangeParser(monthsDef.long),\n            formatter (val) {\n                const d = convertToNativeDate(val);\n                const month = d.getMonth();\n\n                return (monthsDef.long[month]).toString();\n            }\n        },\n        m: {\n            // Two digit month of year like 01 for January\n            name: 'm',\n            index: 1,\n            extract () { return '(\\\\d+)'; },\n            parser (val) { return DateTimeFormatter.defaultNumberParser()(val) - 1; },\n            formatter (val) {\n                const d = convertToNativeDate(val);\n                const month = d.getMonth();\n\n                return pad(month + 1);\n            }\n        },\n        y: {\n            // Short year like 90 for 1990\n            name: 'y',\n            index: 0,\n            extract () { return '(\\\\d{2})'; },\n            parser (val) {\n                let result;\n                if (val) {\n                    const l = val.length;\n                    val = val.substring(l - 2, l);\n                }\n                let parsedVal = DateTimeFormatter.defaultNumberParser()(val);\n                let presentDate = new Date();\n                let presentYear = Math.trunc((presentDate.getFullYear()) / 100);\n\n                result = `${presentYear}${parsedVal}`;\n\n                if (convertToNativeDate(result).getFullYear() > presentDate.getFullYear()) {\n                    result = `${presentYear - 1}${parsedVal}`;\n                }\n                return convertToNativeDate(result).getFullYear();\n            },\n            formatter (val) {\n                const d = convertToNativeDate(val);\n                let year = d.getFullYear().toString();\n                let l;\n\n                if (year) {\n                    l = year.length;\n                    year = year.substring(l - 2, l);\n                }\n\n                return year;\n            }\n        },\n        Y: {\n            // Long year like 1990\n            name: 'Y',\n            index: 0,\n            extract () { return '(\\\\d{4})'; },\n            parser: DateTimeFormatter.defaultNumberParser(),\n            formatter (val) {\n                const d = convertToNativeDate(val);\n                const year = d.getFullYear().toString();\n\n                return year;\n            }\n        }\n    };\n\n    return definitions;\n};\n\n/*\n * The tokens which works internally is not user friendly in terms of memorizing the names. This gives a formal\n * definition to the informal notations.\n *\n * @return {Object} : Formal definition of the tokens\n */\nDateTimeFormatter.getTokenFormalNames = function () {\n    const definitions = DateTimeFormatter.getTokenDefinitions();\n\n    return {\n        HOUR: definitions.H,\n        HOUR_12: definitions.l,\n        AMPM_UPPERCASE: definitions.p,\n        AMPM_LOWERCASE: definitions.P,\n        MINUTE: definitions.M,\n        SECOND: definitions.S,\n        SHORT_DAY: definitions.a,\n        LONG_DAY: definitions.A,\n        DAY_OF_MONTH: definitions.e,\n        DAY_OF_MONTH_CONSTANT_WIDTH: definitions.d,\n        SHORT_MONTH: definitions.b,\n        LONG_MONTH: definitions.B,\n        MONTH_OF_YEAR: definitions.m,\n        SHORT_YEAR: definitions.y,\n        LONG_YEAR: definitions.Y\n    };\n};\n\n/*\n * This defines the rules and declares dependencies that resolves a date parameter (year, month etc) from\n * the date time parameter array.\n *\n * @return {Object} : An object that contains dependencies and a resolver function. The dependencies values are fed\n *                  to the resolver function in that particular sequence only.\n */\nDateTimeFormatter.tokenResolver = function () {\n    const definitions = DateTimeFormatter.getTokenDefinitions();\n    const defaultResolver = (...args) => { // eslint-disable-line require-jsdoc\n        let i = 0;\n        let arg;\n        let targetParam;\n        const l = args.length;\n\n        for (; i < l; i++) {\n            arg = args[i];\n            if (args[i]) {\n                targetParam = arg;\n            }\n        }\n\n        if (!targetParam) { return null; }\n\n        return targetParam[0].parser(targetParam[1]);\n    };\n\n    return {\n        YEAR: [definitions.y, definitions.Y,\n            defaultResolver\n        ],\n        MONTH: [definitions.b, definitions.B, definitions.m,\n            defaultResolver\n        ],\n        DAY: [definitions.a, definitions.A, definitions.e, definitions.d,\n            defaultResolver\n        ],\n        HOUR: [definitions.H, definitions.l, definitions.p, definitions.P,\n            function (hourFormat24, hourFormat12, ampmLower, ampmUpper) {\n                let targetParam;\n                let amOrpm;\n                let isPM;\n                let val;\n\n                if (hourFormat12 && (amOrpm = (ampmLower || ampmUpper))) {\n                    if (amOrpm[0].parser(amOrpm[1]) === 'pm') {\n                        isPM = true;\n                    }\n\n                    targetParam = hourFormat12;\n                } else if (hourFormat12) {\n                    targetParam = hourFormat12;\n                } else {\n                    targetParam = hourFormat24;\n                }\n\n                if (!targetParam) { return null; }\n\n                val = targetParam[0].parser(targetParam[1]);\n                if (isPM) {\n                    val += 12;\n                }\n                return val;\n            }\n        ],\n        MINUTE: [definitions.M,\n            defaultResolver\n        ],\n        SECOND: [definitions.S,\n            defaultResolver\n        ]\n    };\n};\n\n/*\n * Finds token from the format rule specified by a user.\n * @param format {String} : The format of the input date specified by the user\n * @return {Array} : An array of objects which contains the available token and their occurence index in the format\n */\nDateTimeFormatter.findTokens = function (format) {\n    const tokenPrefix = DateTimeFormatter.TOKEN_PREFIX;\n    const definitions = DateTimeFormatter.getTokenDefinitions();\n    const tokenLiterals = Object.keys(definitions);\n    const occurrence = [];\n    let i;\n    let forwardChar;\n\n    while ((i = format.indexOf(tokenPrefix, i + 1)) >= 0) {\n        forwardChar = format[i + 1];\n        if (tokenLiterals.indexOf(forwardChar) === -1) { continue; }\n\n        occurrence.push({\n            index: i,\n            token: forwardChar\n        });\n    }\n\n    return occurrence;\n};\n\n/*\n * Format any JS date to a specified date given by user.\n *\n * @param date {Number | Date} : The date object which is to be formatted\n * @param format {String} : The format using which the date will be formatted for display\n */\nDateTimeFormatter.formatAs = function (date, format) {\n    const nDate = convertToNativeDate(date);\n    const occurrence = DateTimeFormatter.findTokens(format);\n    const definitions = DateTimeFormatter.getTokenDefinitions();\n    let formattedStr = String(format);\n    const tokenPrefix = DateTimeFormatter.TOKEN_PREFIX;\n    let token;\n    let formattedVal;\n    let i;\n    let l;\n\n    for (i = 0, l = occurrence.length; i < l; i++) {\n        token = occurrence[i].token;\n        formattedVal = definitions[token].formatter(nDate);\n        formattedStr = formattedStr.replace(new RegExp(tokenPrefix + token, 'g'), formattedVal);\n    }\n\n    return formattedStr;\n};\n\n/*\n * Parses the user specified date string to extract the date time params.\n *\n * @return {Array} : Value of date time params in an array [year, month, day, hour, minutes, seconds, milli]\n */\nDateTimeFormatter.prototype.parse = function (dateTimeStamp, options) {\n    const tokenResolver = DateTimeFormatter.tokenResolver();\n    const dtParams = this.extractTokenValue(dateTimeStamp);\n    const dtParamSeq = DateTimeFormatter.DATETIME_PARAM_SEQUENCE;\n    const noBreak = options && options.noBreak;\n    const dtParamArr = [];\n    const args = [];\n    let resolverKey;\n    let resolverParams;\n    let resolverFn;\n    let val;\n    let i;\n    let param;\n    let resolvedVal;\n    let l;\n    let result = [];\n\n    for (resolverKey in tokenResolver) {\n        if (!{}.hasOwnProperty.call(tokenResolver, resolverKey)) { continue; }\n\n        args.length = 0;\n        resolverParams = tokenResolver[resolverKey];\n        resolverFn = resolverParams.splice(resolverParams.length - 1, 1)[0];\n\n        for (i = 0, l = resolverParams.length; i < l; i++) {\n            param = resolverParams[i];\n            val = dtParams[param.name];\n\n            if (val === undefined) {\n                args.push(null);\n            } else {\n                args.push([param, val]);\n            }\n        }\n\n        resolvedVal = resolverFn.apply(this, args);\n\n        if ((resolvedVal === undefined || resolvedVal === null) && !noBreak) {\n            break;\n        }\n\n        dtParamArr[dtParamSeq[resolverKey]] = resolvedVal;\n    }\n\n    if (dtParamArr.length && this.checkIfOnlyYear(dtParamArr.length))\n     {\n        result.unshift(dtParamArr[0], 0, 1); }\n    else {\n        result.unshift(...dtParamArr);\n    }\n\n    return result;\n};\n\n/*\n * Extract the value of the token from user specified date time string.\n *\n * @return {Object} : An key value pair which contains the tokens as key and value as pair\n */\nDateTimeFormatter.prototype.extractTokenValue = function (dateTimeStamp) {\n    const format = this.format;\n    const definitions = DateTimeFormatter.getTokenDefinitions();\n    const tokenPrefix = DateTimeFormatter.TOKEN_PREFIX;\n    const occurrence = DateTimeFormatter.findTokens(format);\n    const tokenObj = {};\n\n    let lastOccurrenceIndex;\n    let occObj;\n    let occIndex;\n    let targetText;\n    let regexFormat;\n\n    let l;\n    let i;\n\n    regexFormat = String(format);\n\n    const tokenArr = occurrence.map(obj => obj.token);\n    const occurrenceLength = occurrence.length;\n    for (i = occurrenceLength - 1; i >= 0; i--) {\n        occIndex = occurrence[i].index;\n\n        if (occIndex + 1 === regexFormat.length - 1) {\n            lastOccurrenceIndex = occIndex;\n            continue;\n        }\n\n        if (lastOccurrenceIndex === undefined) {\n            lastOccurrenceIndex = regexFormat.length;\n        }\n\n        targetText = regexFormat.substring(occIndex + 2, lastOccurrenceIndex);\n        regexFormat = regexFormat.substring(0, occIndex + 2) +\n            RegExp.escape(targetText) +\n            regexFormat.substring(lastOccurrenceIndex, regexFormat.length);\n\n        lastOccurrenceIndex = occIndex;\n    }\n\n    for (i = 0; i < occurrenceLength; i++) {\n        occObj = occurrence[i];\n        regexFormat = regexFormat.replace(tokenPrefix + occObj.token, definitions[occObj.token].extract());\n    }\n\n    const extractValues = dateTimeStamp.match(new RegExp(regexFormat)) || [];\n    extractValues.shift();\n\n    for (i = 0, l = tokenArr.length; i < l; i++) {\n        tokenObj[tokenArr[i]] = extractValues[i];\n    }\n    return tokenObj;\n};\n\n/*\n * Give back the JS native date formed from  user specified date string\n *\n * @return {Date} : Native JS Date\n */\nDateTimeFormatter.prototype.getNativeDate = function (dateTimeStamp) {\n    let date = null;\n    if (Number.isFinite(dateTimeStamp)) {\n        date = new Date(dateTimeStamp);\n    } else if (!this.format && Date.parse(dateTimeStamp)) {\n        date = new Date(dateTimeStamp);\n    }\n    else {\n        const dtParams = this.dtParams = this.parse(dateTimeStamp);\n        if (dtParams.length) {\n            this.nativeDate = new Date(...dtParams);\n            date = this.nativeDate;\n        }\n    }\n    return date;\n};\n\nDateTimeFormatter.prototype.checkIfOnlyYear = function(len) {\n    return len === 1 && this.format.match(/y|Y/g).length;\n};\n\n/*\n * Represents JS native date to a user specified format.\n *\n * @param format {String} : The format according to which the date is to be represented\n * @return {String} : The formatted date string\n */\nDateTimeFormatter.prototype.formatAs = function (format, dateTimeStamp) {\n    let nativeDate;\n\n    if (dateTimeStamp) {\n        nativeDate = this.nativeDate = this.getNativeDate(dateTimeStamp);\n    } else if (!(nativeDate = this.nativeDate)) {\n        nativeDate = this.getNativeDate(dateTimeStamp);\n    }\n\n    return DateTimeFormatter.formatAs(nativeDate, format);\n};\n\nexport { DateTimeFormatter as default };\n","/**\n * The utility function to calculate major column.\n *\n * @param {Object} store - The store object.\n * @return {Function} Returns the push function.\n */\nexport default (store) => {\n    let i = 0;\n    return (...fields) => {\n        fields.forEach((val, fieldIndex) => {\n            if (!(store[fieldIndex] instanceof Array)) {\n                store[fieldIndex] = Array.from({ length: i });\n            }\n            store[fieldIndex].push(val);\n        });\n        i++;\n    };\n};\n","/* eslint-disable */\nconst OBJECTSTRING = 'object';\nconst objectToStrFn = Object.prototype.toString;\nconst objectToStr = '[object Object]';\nconst arrayToStr = '[object Array]';\n\nfunction checkCyclicRef(obj, parentArr) {\n    let i = parentArr.length;\n    let bIndex = -1;\n\n    while (i) {\n        if (obj === parentArr[i]) {\n            bIndex = i;\n            return bIndex;\n        }\n        i -= 1;\n    }\n\n    return bIndex;\n}\n\nfunction merge(obj1, obj2, skipUndef, tgtArr, srcArr) {\n    var item,\n        srcVal,\n        tgtVal,\n        str,\n        cRef;\n    // check whether obj2 is an array\n    // if array then iterate through it's index\n    // **** MOOTOOLS precution\n\n    if (!srcArr) {\n        tgtArr = [obj1];\n        srcArr = [obj2];\n    }\n    else {\n        tgtArr.push(obj1);\n        srcArr.push(obj2);\n    }\n\n    if (obj2 instanceof Array) {\n        for (item = 0; item < obj2.length; item += 1) {\n            try {\n                srcVal = obj1[item];\n                tgtVal = obj2[item];\n            }\n            catch (e) {\n                continue;\n            }\n\n            if (typeof tgtVal !== OBJECTSTRING) {\n                if (!(skipUndef && tgtVal === undefined)) {\n                    obj1[item] = tgtVal;\n                }\n            }\n            else {\n                if (srcVal === null || typeof srcVal !== OBJECTSTRING) {\n                    srcVal = obj1[item] = tgtVal instanceof Array ? [] : {};\n                }\n                cRef = checkCyclicRef(tgtVal, srcArr);\n                if (cRef !== -1) {\n                    srcVal = obj1[item] = tgtArr[cRef];\n                }\n                else {\n                    merge(srcVal, tgtVal, skipUndef, tgtArr, srcArr);\n                }\n            }\n        }\n    }\n    else {\n        for (item in obj2) {\n            try {\n                srcVal = obj1[item];\n                tgtVal = obj2[item];\n            }\n            catch (e) {\n                continue;\n            }\n\n            if (tgtVal !== null && typeof tgtVal === OBJECTSTRING) {\n                // Fix for issue BUG: FWXT-602\n                // IE < 9 Object.prototype.toString.call(null) gives\n                // '[object Object]' instead of '[object Null]'\n                // that's why null value becomes Object in IE < 9\n                str = objectToStrFn.call(tgtVal);\n                if (str === objectToStr) {\n                    if (srcVal === null || typeof srcVal !== OBJECTSTRING) {\n                        srcVal = obj1[item] = {};\n                    }\n                    cRef = checkCyclicRef(tgtVal, srcArr);\n                    if (cRef !== -1) {\n                        srcVal = obj1[item] = tgtArr[cRef];\n                    }\n                    else {\n                        merge(srcVal, tgtVal, skipUndef, tgtArr, srcArr);\n                    }\n                }\n                else if (str === arrayToStr) {\n                    if (srcVal === null || !(srcVal instanceof Array)) {\n                        srcVal = obj1[item] = [];\n                    }\n                    cRef = checkCyclicRef(tgtVal, srcArr);\n                    if (cRef !== -1) {\n                        srcVal = obj1[item] = tgtArr[cRef];\n                    }\n                    else {\n                        merge(srcVal, tgtVal, skipUndef, tgtArr, srcArr);\n                    }\n                }\n                else {\n                    obj1[item] = tgtVal;\n                }\n            }\n            else {\n                if (skipUndef && tgtVal === undefined) {\n                    continue;\n                }\n                obj1[item] = tgtVal;\n            }\n        }\n    }\n    return obj1;\n}\n\n\nfunction extend2 (obj1, obj2, skipUndef) {\n    //if none of the arguments are object then return back\n    if (typeof obj1 !== OBJECTSTRING && typeof obj2 !== OBJECTSTRING) {\n        return null;\n    }\n\n    if (typeof obj2 !== OBJECTSTRING || obj2 === null) {\n        return obj1;\n    }\n\n    if (typeof obj1 !== OBJECTSTRING) {\n        obj1 = obj2 instanceof Array ? [] : {};\n    }\n    merge(obj1, obj2, skipUndef);\n    return obj1;\n}\n\nexport { extend2 as default };\n","import { DataFormat } from '../enums';\n\n/**\n * Checks whether the value is an array.\n *\n * @param  {*} val - The value to be checked.\n * @return {boolean} Returns true if the value is an array otherwise returns false.\n */\nexport function isArray (val) {\n    return Array.isArray(val);\n}\n\n/**\n * Checks whether the value is an object.\n *\n * @param  {*} val - The value to be checked.\n * @return {boolean} Returns true if the value is an object otherwise returns false.\n */\nexport function isObject (val) {\n    return val === Object(val);\n}\n\n/**\n * Checks whether the value is a string value.\n *\n * @param  {*} val - The value to be checked.\n * @return {boolean} Returns true if the value is a string value otherwise returns false.\n */\nexport function isString (val) {\n    return typeof val === 'string';\n}\n\n/**\n * Checks whether the value is callable.\n *\n * @param {*} val - The value to be checked.\n * @return {boolean} Returns true if the value is callable otherwise returns false.\n */\nexport function isCallable (val) {\n    return typeof val === 'function';\n}\n\n/**\n * Returns the unique values from the input array.\n *\n * @param {Array} data - The input array.\n * @return {Array} Returns a new array of unique values.\n */\nexport function uniqueValues (data) {\n    return [...new Set(data)];\n}\n\nexport const getUniqueId = () => `id-${new Date().getTime()}${Math.round(Math.random() * 10000)}`;\n\n/**\n * Checks Whether two arrays have same content.\n *\n * @param {Array} arr1 - The first array.\n * @param {Array} arr2 - The 2nd array.\n * @return {boolean} Returns whether two array have same content.\n */\nexport function isArrEqual(arr1, arr2) {\n    if (!isArray(arr1) || !isArray(arr2)) {\n        return arr1 === arr2;\n    }\n\n    if (arr1.length !== arr2.length) {\n        return false;\n    }\n\n    for (let i = 0; i < arr1.length; i++) {\n        if (arr1[i] !== arr2[i]) {\n            return false;\n        }\n    }\n\n    return true;\n}\n\n/**\n * It is the default number format function for the measure field type.\n *\n * @param {any} val - The input value.\n * @return {number} Returns a number value.\n */\nexport function formatNumber(val) {\n    return val;\n}\n\n/**\n * Returns the detected data format.\n *\n * @param {any} data - The input data to be tested.\n * @return {string} Returns the data format name.\n */\nexport const detectDataFormat = (data) => {\n    if (isString(data)) {\n        return DataFormat.DSV_STR;\n    } else if (isArray(data) && isArray(data[0])) {\n        return DataFormat.DSV_ARR;\n    } else if (isArray(data) && (data.length === 0 || isObject(data[0]))) {\n        return DataFormat.FLAT_JSON;\n    }\n    return null;\n};\n","import { FieldType } from './enums';\nimport { getUniqueId } from './utils';\n\nconst fieldStore = {\n    data: {},\n\n    createNamespace (fieldArr, name, idField) {\n        const dataId = name || getUniqueId();\n\n        this.data[dataId] = {\n            name: dataId,\n            fields: fieldArr,\n            idField,\n            fieldsObj () {\n                let fieldsObj = this._cachedFieldsObj;\n\n                if (!fieldsObj) {\n                    fieldsObj = this._cachedFieldsObj = {};\n                    this.fields.forEach((field) => {\n                        fieldsObj[field.name()] = field;\n                    });\n                }\n                return fieldsObj;\n            },\n            getMeasure () {\n                let measureFields = this._cachedMeasure;\n\n                if (!measureFields) {\n                    measureFields = this._cachedMeasure = {};\n                    this.fields.forEach((field) => {\n                        if (field.schema().type === FieldType.MEASURE) {\n                            measureFields[field.name()] = field;\n                        }\n                    });\n                }\n                return measureFields;\n            },\n            getDimension () {\n                let dimensionFields = this._cachedDimension;\n\n                if (!this._cachedDimension) {\n                    dimensionFields = this._cachedDimension = {};\n                    this.fields.forEach((field) => {\n                        if (field.schema().type === FieldType.DIMENSION) {\n                            dimensionFields[field.name()] = field;\n                        }\n                    });\n                }\n                return dimensionFields;\n            },\n        };\n        return this.data[dataId];\n    }\n};\n\nexport default fieldStore;\n","import { getNumberFormattedVal } from './helper';\n\n/**\n * The wrapper class on top of the primitive value of a field.\n *\n * @todo Need to have support for StringValue, NumberValue, DateTimeValue\n * and GeoValue. These types should expose predicate API mostly.\n */\nclass Value {\n\n  /**\n   * Creates new Value instance.\n   *\n   * @param {*} val - the primitive value from the field cell.\n   * @param {string | Field} field - The field from which the value belongs.\n   */\n    constructor (value, rawValue, field) {\n        const formattedValue = getNumberFormattedVal(field, value);\n\n        Object.defineProperties(this, {\n            _value: {\n                enumerable: false,\n                configurable: false,\n                writable: false,\n                value\n            },\n            _formattedValue: {\n                enumerable: false,\n                configurable: false,\n                writable: false,\n                value: formattedValue\n            },\n            _internalValue: {\n                enumerable: false,\n                configurable: false,\n                writable: false,\n                value: rawValue\n            }\n        });\n\n        this.field = field;\n    }\n\n  /**\n   * Returns the field value.\n   *\n   * @return {*} Returns the current value.\n   */\n    get value () {\n        return this._value;\n    }\n\n    /**\n     * Returns the parsed value of field\n     */\n    get formattedValue () {\n        return this._formattedValue;\n    }\n\n    /**\n     * Returns the internal value of field\n     */\n    get internalValue () {\n        return this._internalValue;\n    }\n\n  /**\n   * Converts to human readable string.\n   *\n   * @override\n   * @return {string} Returns a human readable string of the field value.\n   *\n   */\n    toString () {\n        return String(this.value);\n    }\n\n  /**\n   * Returns the value of the field.\n   *\n   * @override\n   * @return {*} Returns the field value.\n   */\n    valueOf () {\n        return this.value;\n    }\n}\n\nexport default Value;\n","/**\n * Iterates through the diffSet array and call the callback with the current\n * index.\n *\n * @param {string} rowDiffset - The row diffset string e.g. '0-4,6,10-13'.\n * @param {Function} callback - The callback function to be called with every index.\n */\nexport function rowDiffsetIterator (rowDiffset, callback) {\n    if (rowDiffset.length > 0) {\n        const rowDiffArr = rowDiffset.split(',');\n        rowDiffArr.forEach((diffStr) => {\n            const diffStsArr = diffStr.split('-');\n            const start = +(diffStsArr[0]);\n            const end = +(diffStsArr[1] || diffStsArr[0]);\n            if (end >= start) {\n                for (let i = start; i <= end; i += 1) {\n                    callback(i);\n                }\n            }\n        });\n    }\n}\n","/**\n * A parser to parser null, undefined, invalid and NIL values.\n *\n * @public\n * @class\n */\nclass InvalidAwareTypes {\n    /**\n     * Static method which gets/sets the invalid value registry.\n     *\n     * @public\n     * @param {Object} config - The custom configuration supplied by user.\n     * @return {Object} Returns the invalid values registry.\n     */\n    static invalidAwareVals (config) {\n        if (!config) {\n            return InvalidAwareTypes._invalidAwareValsMap;\n        }\n        return Object.assign(InvalidAwareTypes._invalidAwareValsMap, config);\n    }\n\n    /**\n     * Initialize a new instance.\n     *\n     * @public\n     * @param {string} value - The value of the invalid data type.\n     */\n    constructor (value) {\n        this._value = value;\n    }\n\n    /**\n     * Returns the current value of the instance.\n     *\n     * @public\n     * @return {string} Returns the value of the invalid data type.\n     */\n    value () {\n        return this._value;\n    }\n\n    /**\n     * Returns the current value of the instance in string format.\n     *\n     * @public\n     * @return {string} Returns the value of the invalid data type.\n     */\n    toString () {\n        return String(this._value);\n    }\n\n    static isInvalid(val) {\n        return (val instanceof InvalidAwareTypes) || !!InvalidAwareTypes.invalidAwareVals()[val];\n    }\n\n    static getInvalidType(val) {\n        return val instanceof InvalidAwareTypes ? val : InvalidAwareTypes.invalidAwareVals()[val];\n    }\n}\n\n/**\n * Enums for Invalid types.\n */\nInvalidAwareTypes.NULL = new InvalidAwareTypes('null');\nInvalidAwareTypes.NA = new InvalidAwareTypes('na');\nInvalidAwareTypes.NIL = new InvalidAwareTypes('nil');\n\n/**\n * Default Registry for mapping the invalid values.\n *\n * @private\n */\nInvalidAwareTypes._invalidAwareValsMap = {\n    invalid: InvalidAwareTypes.NA,\n    nil: InvalidAwareTypes.NIL,\n    null: InvalidAwareTypes.NULL,\n    undefined: InvalidAwareTypes.NA\n};\n\nexport default InvalidAwareTypes;\n","export { DataFormat, FilteringMode } from '../enums';\n/**\n * The event name for data propagation.\n */\nexport const PROPAGATION = 'propagation';\n\n/**\n * The name of the unique row id column in DataModel.\n */\nexport const ROW_ID = '__id__';\n\n/**\n * The enums for operation names performed on DataModel.\n */\nexport const DM_DERIVATIVES = {\n    SELECT: 'select',\n    PROJECT: 'project',\n    GROUPBY: 'group',\n    COMPOSE: 'compose',\n    CAL_VAR: 'calculatedVariable',\n    BIN: 'bin',\n    SORT: 'sort'\n};\n\nexport const JOINS = {\n    CROSS: 'cross',\n    LEFTOUTER: 'leftOuter',\n    RIGHTOUTER: 'rightOuter',\n    NATURAL: 'natural',\n    FULLOUTER: 'fullOuter'\n};\n\nexport const LOGICAL_OPERATORS = {\n    AND: 'and',\n    OR: 'or'\n};\n","/**\n * The helper function that returns an array of common schema\n * from two fieldStore instances.\n *\n * @param {FieldStore} fs1 - The first FieldStore instance.\n * @param {FieldStore} fs2 - The second FieldStore instance.\n * @return {Array} An array containing the common schema.\n */\nexport function getCommonSchema (fs1, fs2) {\n    const retArr = [];\n    const fs1Arr = [];\n    fs1.fields.forEach((field) => {\n        fs1Arr.push(field.schema().name);\n    });\n    fs2.fields.forEach((field) => {\n        if (fs1Arr.indexOf(field.schema().name) !== -1) {\n            retArr.push(field.schema().name);\n        }\n    });\n    return retArr;\n}\n","import DataModel from '../datamodel';\nimport { extend2 } from '../utils';\nimport { getCommonSchema } from './get-common-schema';\nimport { rowDiffsetIterator } from './row-diffset-iterator';\nimport { JOINS } from '../constants';\nimport { prepareJoinData } from '../helper';\n/**\n * Default filter function for crossProduct.\n *\n * @return {boolean} Always returns true.\n */\nfunction defaultFilterFn() { return true; }\n\n/**\n * Implementation of cross product operation between two DataModel instances.\n * It internally creates the data and schema for the new DataModel.\n *\n * @param {DataModel} dataModel1 - The left DataModel instance.\n * @param {DataModel} dataModel2 - The right DataModel instance.\n * @param {Function} filterFn - The filter function which is used to filter the tuples.\n * @param {boolean} [replaceCommonSchema=false] - The flag if the common name schema should be there.\n * @return {DataModel} Returns The newly created DataModel instance from the crossProduct operation.\n */\nexport function crossProduct (dm1, dm2, filterFn, replaceCommonSchema = false, jointype = JOINS.CROSS) {\n    const schema = [];\n    const data = [];\n    const applicableFilterFn = filterFn || defaultFilterFn;\n    const dm1FieldStore = dm1.getFieldspace();\n    const dm2FieldStore = dm2.getFieldspace();\n    const dm1FieldStoreName = dm1FieldStore.name;\n    const dm2FieldStoreName = dm2FieldStore.name;\n    const name = `${dm1FieldStore.name}.${dm2FieldStore.name}`;\n    const commonSchemaList = getCommonSchema(dm1FieldStore, dm2FieldStore);\n\n    if (dm1FieldStoreName === dm2FieldStoreName) {\n        throw new Error('DataModels must have different alias names');\n    }\n    // Here prepare the schema\n    dm1FieldStore.fields.forEach((field) => {\n        const tmpSchema = extend2({}, field.schema());\n        if (commonSchemaList.indexOf(tmpSchema.name) !== -1 && !replaceCommonSchema) {\n            tmpSchema.name = `${dm1FieldStore.name}.${tmpSchema.name}`;\n        }\n        schema.push(tmpSchema);\n    });\n    dm2FieldStore.fields.forEach((field) => {\n        const tmpSchema = extend2({}, field.schema());\n        if (commonSchemaList.indexOf(tmpSchema.name) !== -1) {\n            if (!replaceCommonSchema) {\n                tmpSchema.name = `${dm2FieldStore.name}.${tmpSchema.name}`;\n                schema.push(tmpSchema);\n            }\n        } else {\n            schema.push(tmpSchema);\n        }\n    });\n\n    // Here prepare Data\n    rowDiffsetIterator(dm1._rowDiffset, (i) => {\n        let rowAdded = false;\n        let rowPosition;\n        rowDiffsetIterator(dm2._rowDiffset, (ii) => {\n            const tuple = [];\n            const userArg = {};\n            userArg[dm1FieldStoreName] = {};\n            userArg[dm2FieldStoreName] = {};\n            dm1FieldStore.fields.forEach((field) => {\n                tuple.push(field.partialField.data[i]);\n                userArg[dm1FieldStoreName][field.name()] = {\n                    rawValue: field.partialField.data[i],\n                    formattedValue: field.formattedData()[i],\n                };\n            });\n            dm2FieldStore.fields.forEach((field) => {\n                if (!(commonSchemaList.indexOf(field.schema().name) !== -1 && replaceCommonSchema)) {\n                    tuple.push(field.partialField.data[ii]);\n                }\n                userArg[dm2FieldStoreName][field.name()] = {\n                    rawValue: field.partialField.data[ii],\n                    formattedValue: field.formattedData()[ii],\n                };\n            });\n\n            let cachedStore = {};\n            let cloneProvider1 = () => dm1.detachedRoot();\n            let cloneProvider2 = () => dm2.detachedRoot();\n\n            const dm1Fields = prepareJoinData(userArg[dm1FieldStoreName]);\n            const dm2Fields = prepareJoinData(userArg[dm2FieldStoreName]);\n            if (applicableFilterFn(dm1Fields, dm2Fields, cloneProvider1, cloneProvider2, cachedStore)) {\n                const tupleObj = {};\n                tuple.forEach((cellVal, iii) => {\n                    tupleObj[schema[iii].name] = cellVal;\n                });\n                if (rowAdded && JOINS.CROSS !== jointype) {\n                    data[rowPosition] = tupleObj;\n                }\n                else {\n                    data.push(tupleObj);\n                    rowAdded = true;\n                    rowPosition = i;\n                }\n            } else if ((jointype === JOINS.LEFTOUTER || jointype === JOINS.RIGHTOUTER) && !rowAdded) {\n                const tupleObj = {};\n                let len = dm1FieldStore.fields.length - 1;\n                tuple.forEach((cellVal, iii) => {\n                    if (iii <= len) {\n                        tupleObj[schema[iii].name] = cellVal;\n                    }\n                    else {\n                        tupleObj[schema[iii].name] = null;\n                    }\n                });\n                rowAdded = true;\n                rowPosition = i;\n                data.push(tupleObj);\n            }\n        });\n    });\n\n    return new DataModel(data, schema, { name });\n}\n","/**\n * The default sort function.\n *\n * @param {*} a - The first value.\n * @param {*} b - The second value.\n * @return {number} Returns the comparison result e.g. 1 or 0 or -1.\n */\nfunction defSortFn (a, b) {\n    const a1 = `${a}`;\n    const b1 = `${b}`;\n    if (a1 < b1) {\n        return -1;\n    }\n    if (a1 > b1) {\n        return 1;\n    }\n    return 0;\n}\n\n/**\n * The helper function for merge sort which creates the sorted array\n * from the two halves of the input array.\n *\n * @param {Array} arr - The target array which needs to be merged.\n * @param {number} lo - The starting index of the first array half.\n * @param {number} mid - The ending index of the first array half.\n * @param {number} hi - The ending index of the second array half.\n * @param {Function} sortFn - The sort function.\n */\nfunction merge (arr, lo, mid, hi, sortFn) {\n    const mainArr = arr;\n    const auxArr = [];\n    for (let i = lo; i <= hi; i += 1) {\n        auxArr[i] = mainArr[i];\n    }\n    let a = lo;\n    let b = mid + 1;\n\n    for (let i = lo; i <= hi; i += 1) {\n        if (a > mid) {\n            mainArr[i] = auxArr[b];\n            b += 1;\n        } else if (b > hi) {\n            mainArr[i] = auxArr[a];\n            a += 1;\n        } else if (sortFn(auxArr[a], auxArr[b]) <= 0) {\n            mainArr[i] = auxArr[a];\n            a += 1;\n        } else {\n            mainArr[i] = auxArr[b];\n            b += 1;\n        }\n    }\n}\n\n/**\n * The helper function for merge sort which would be called\n * recursively for sorting the array halves.\n *\n * @param {Array} arr - The target array which needs to be sorted.\n * @param {number} lo - The starting index of the array half.\n * @param {number} hi - The ending index of the array half.\n * @param {Function} sortFn - The sort function.\n * @return {Array} Returns the target array itself.\n */\nfunction sort (arr, lo, hi, sortFn) {\n    if (hi === lo) { return arr; }\n\n    const mid = lo + Math.floor((hi - lo) / 2);\n    sort(arr, lo, mid, sortFn);\n    sort(arr, mid + 1, hi, sortFn);\n    merge(arr, lo, mid, hi, sortFn);\n\n    return arr;\n}\n\n/**\n * The implementation of merge sort.\n * It is used in DataModel for stable sorting as it is not sure\n * what the sorting algorithm used by browsers is stable or not.\n *\n * @param {Array} arr - The target array which needs to be sorted.\n * @param {Function} [sortFn=defSortFn] - The sort function.\n * @return {Array} Returns the input array itself in sorted order.\n */\nexport function mergeSort (arr, sortFn = defSortFn) {\n    if (arr.length > 1) {\n        sort(arr, 0, arr.length - 1, sortFn);\n    }\n    return arr;\n}\n","import { DimensionSubtype, MeasureSubtype } from '../enums';\nimport { mergeSort } from './merge-sort';\nimport { fieldInSchema } from '../helper';\nimport { isCallable, isArray } from '../utils';\n\n/**\n * Generates the sorting functions to sort the data of a DataModel instance\n * according to the input data type.\n *\n * @param {string} dataType - The data type e.g. 'measure', 'datetime' etc.\n * @param {string} sortType - The sorting order i.e. 'asc' or 'desc'.\n * @return {Function} Returns the the sorting function.\n */\nfunction getSortFn (dataType, sortType) {\n    let retFunc;\n\n    switch (dataType) {\n    case MeasureSubtype.CONTINUOUS:\n    case DimensionSubtype.TEMPORAL:\n        if (sortType === 'asc') {\n            retFunc = (a, b) => a - b;\n        } else {\n            retFunc = (a, b) => b - a;\n        }\n        break;\n    default:\n        if (sortType === 'asc') {\n            retFunc = (a, b) => {\n                a = `${a}`;\n                b = `${b}`;\n                if (a === b) {\n                    return 0;\n                }\n                return a > b ? 1 : -1;\n            };\n        } else {\n            retFunc = (a, b) => {\n                a = `${a}`;\n                b = `${b}`;\n                if (a === b) {\n                    return 0;\n                }\n                return a > b ? -1 : 1;\n            };\n        }\n    }\n\n    return retFunc;\n}\n\n/**\n * Resolves the actual sorting function based on sorting string value.\n *\n * @param {Object} fDetails - The target field info.\n * @param {string} strSortOrder - The sort order value.\n * @return {Function} Returns the sorting function.\n */\nfunction resolveStrSortOrder (fDetails, strSortOrder) {\n    const sortOrder = String(strSortOrder).toLowerCase() === 'desc' ? 'desc' : 'asc';\n    return getSortFn(fDetails.type, sortOrder);\n}\n\n/**\n * Groups the data according to the specified target field.\n *\n * @param {Array} data - The input data array.\n * @param {number} fieldIndex - The target field index within schema array.\n * @return {Array} Returns an array containing the grouped data.\n */\nfunction groupData (data, fieldIndex) {\n    const hashMap = new Map();\n    const groupedData = [];\n\n    data.forEach((datum) => {\n        const fieldVal = datum[fieldIndex];\n        if (hashMap.has(fieldVal)) {\n            groupedData[hashMap.get(fieldVal)][1].push(datum);\n        } else {\n            groupedData.push([fieldVal, [datum]]);\n            hashMap.set(fieldVal, groupedData.length - 1);\n        }\n    });\n\n    return groupedData;\n}\n\n/**\n * Creates the argument value used for sorting function when sort is done\n * with another fields.\n *\n * @param {Array} groupedDatum - The grouped datum for a single dimension field value.\n * @param {Array} targetFields - An array of the sorting fields.\n * @param {Array} targetFieldDetails - An array of the sorting field details in schema.\n * @return {Object} Returns an object containing the value of sorting fields and the target field name.\n */\nfunction createSortingFnArg (groupedDatum, targetFields, targetFieldDetails) {\n    const arg = {\n        label: groupedDatum[0]\n    };\n\n    targetFields.reduce((acc, next, idx) => {\n        acc[next] = groupedDatum[1].map(datum => datum[targetFieldDetails[idx].index]);\n        return acc;\n    }, arg);\n\n    return arg;\n}\n\n/**\n * Sorts the data by applying the standard sorting mechanism.\n *\n * @param {Array} data - The input data array.\n * @param {Array} schema - The data schema.\n * @param {Array} sortingDetails - An array containing the sorting configs.\n */\nfunction applyStandardSort (data, schema, sortingDetails) {\n    let fieldName;\n    let sortMeta;\n    let fDetails;\n    let i = sortingDetails.length - 1;\n\n    for (; i >= 0; i--) {\n        fieldName = sortingDetails[i][0];\n        sortMeta = sortingDetails[i][1];\n        fDetails = fieldInSchema(schema, fieldName);\n\n        if (!fDetails) {\n            // eslint-disable-next-line no-continue\n            continue;\n        }\n\n        if (isCallable(sortMeta)) {\n            // eslint-disable-next-line no-loop-func\n            mergeSort(data, (a, b) => sortMeta(a[fDetails.index], b[fDetails.index]));\n        } else if (isArray(sortMeta)) {\n            const groupedData = groupData(data, fDetails.index);\n            const sortingFn = sortMeta[sortMeta.length - 1];\n            const targetFields = sortMeta.slice(0, sortMeta.length - 1);\n            const targetFieldDetails = targetFields.map(f => fieldInSchema(schema, f));\n\n            groupedData.forEach((groupedDatum) => {\n                groupedDatum.push(createSortingFnArg(groupedDatum, targetFields, targetFieldDetails));\n            });\n\n            mergeSort(groupedData, (a, b) => {\n                const m = a[2];\n                const n = b[2];\n                return sortingFn(m, n);\n            });\n\n            // Empty the array\n            data.length = 0;\n            groupedData.forEach((datum) => {\n                data.push(...datum[1]);\n            });\n        } else {\n            const sortFn = resolveStrSortOrder(fDetails, sortMeta);\n            // eslint-disable-next-line no-loop-func\n            mergeSort(data, (a, b) => sortFn(a[fDetails.index], b[fDetails.index]));\n        }\n    }\n}\n\n/**\n * Creates a map based on grouping.\n *\n * @param {Array} depColumns - The dependency columns' info.\n * @param {Array} data - The input data.\n * @param {Array} schema - The data schema.\n * @param {Array} sortingDetails - The sorting details for standard sorting.\n * @return {Map} Returns a map.\n */\nconst makeGroupMapAndSort = (depColumns, data, schema, sortingDetails) => {\n    if (depColumns.length === 0) { return data; }\n\n    const targetCol = depColumns[0];\n    const map = new Map();\n\n    data.reduce((acc, currRow) => {\n        const fVal = currRow[targetCol.index];\n        if (acc.has(fVal)) {\n            acc.get(fVal).push(currRow);\n        } else {\n            acc.set(fVal, [currRow]);\n        }\n        return acc;\n    }, map);\n\n    for (let [key, val] of map) {\n        const nMap = makeGroupMapAndSort(depColumns.slice(1), val, schema, sortingDetails);\n        map.set(key, nMap);\n        if (Array.isArray(nMap)) {\n            applyStandardSort(nMap, schema, sortingDetails);\n        }\n    }\n\n    return map;\n};\n\n/**\n * Sorts the data by retaining the position/order of a particular field.\n *\n * @param {Array} data - The input data array.\n * @param {Array} schema - The data schema.\n * @param {Array} sortingDetails - An array containing the sorting configs.\n * @param {Array} depColumns - The dependency column list.\n * @return {Array} Returns the sorted data.\n */\nfunction applyGroupSort (data, schema, sortingDetails, depColumns) {\n    sortingDetails = sortingDetails.filter((detail) => {\n        if (detail[1] === null) {\n            depColumns.push(detail[0]);\n            return false;\n        }\n        return true;\n    });\n    if (sortingDetails.length === 0) { return data; }\n\n    depColumns = depColumns.map(c => fieldInSchema(schema, c));\n\n    const sortedGroupMap = makeGroupMapAndSort(depColumns, data, schema, sortingDetails);\n    return data.map((row) => {\n        let i = 0;\n        let nextMap = sortedGroupMap;\n\n        while (!Array.isArray(nextMap)) {\n            nextMap = nextMap.get(row[depColumns[i++].index]);\n        }\n\n        return nextMap.shift();\n    });\n}\n\n/**\n * Sorts the data.\n *\n * @param {Object} dataObj - An object containing the data and schema.\n * @param {Array} sortingDetails - An array containing the sorting configs.\n */\nexport function sortData (dataObj, sortingDetails) {\n    let { schema, data } = dataObj;\n\n    sortingDetails = sortingDetails.filter(sDetial => !!fieldInSchema(schema, sDetial[0]));\n    if (sortingDetails.length === 0) { return; }\n\n    let groupSortingIdx = sortingDetails.findIndex(sDetial => sDetial[1] === null);\n    groupSortingIdx = groupSortingIdx !== -1 ? groupSortingIdx : sortingDetails.length;\n\n    const standardSortingDetails = sortingDetails.slice(0, groupSortingIdx);\n    const groupSortingDetails = sortingDetails.slice(groupSortingIdx);\n\n    applyStandardSort(data, schema, standardSortingDetails);\n    data = applyGroupSort(data, schema, groupSortingDetails, standardSortingDetails.map(detail => detail[0]));\n\n    dataObj.uids = data.map(row => row.pop());\n    dataObj.data = data;\n}\n","import { rowDiffsetIterator } from './row-diffset-iterator';\nimport { sortData } from './sort';\nimport { FieldType, DimensionSubtype } from '../enums';\nimport { ROW_ID } from '../constants';\n\n/**\n * Builds the actual data array.\n *\n * @param {Array} fieldStore - An array of field.\n * @param {string} rowDiffset - A string consisting of which rows to be included eg. '0-2,4,6';\n * @param {string} colIdentifier - A string consisting of the details of which column\n * to be included eg 'date,sales,profit';\n * @param {Object} sortingDetails - An object containing the sorting details of the DataModel instance.\n * @param {Object} options - The options required to create the type of the data.\n * @return {Object} Returns an object containing the multidimensional array and the relative schema.\n */\nexport function dataBuilder ({ fields: fieldStore, idField }, rowDiffset, colIdentifier, sortingDetails, options) {\n    const idData = idField.data();\n\n    const defOptions = {\n        addUid: false,\n        columnWise: false\n    };\n    options = Object.assign({}, defOptions, options);\n\n    const retObj = {\n        schema: [],\n        data: [],\n        uids: []\n    };\n    const addUid = options.addUid;\n    const reqSorting = sortingDetails && sortingDetails.length > 0;\n    // It stores the fields according to the colIdentifier argument\n    const tmpDataArr = [];\n    // Stores the fields according to the colIdentifier argument\n    const colIArr = colIdentifier.split(',');\n\n    colIArr.forEach((colName) => {\n        for (let i = 0; i < fieldStore.length; i += 1) {\n            const name = fieldStore[i].name();\n            if (name === colName) {\n                tmpDataArr.push(fieldStore[i]);\n                break;\n            }\n        }\n    });\n\n    // Inserts the schema to the schema object\n    tmpDataArr.forEach((field) => {\n        /** @todo Need to use extend2 here otherwise user can overwrite the schema. */\n        retObj.schema.push(field.schema());\n    });\n\n    if (addUid) {\n        retObj.schema.push({\n            name: ROW_ID,\n            type: FieldType.DIMENSION,\n            subtype: DimensionSubtype.ID\n        });\n    }\n\n    rowDiffsetIterator(rowDiffset, (i) => {\n        retObj.data.push([]);\n        const insertInd = retObj.data.length - 1;\n        let start = 0;\n        tmpDataArr.forEach((field, ii) => {\n            retObj.data[insertInd][ii + start] = field.partialField.data[i];\n        });\n        if (addUid) {\n            retObj.data[insertInd][tmpDataArr.length] = idData[i];\n        }\n        // Creates an array of unique identifiers for each row\n        retObj.uids.push(idData[i]);\n\n        // If sorting needed then there is the need to expose the index\n        // mapping from the old index to its new index\n        if (reqSorting) { retObj.data[insertInd].push(idData[i]); }\n    });\n\n    // Handles the sort functionality\n    if (reqSorting) {\n        sortData(retObj, sortingDetails);\n    }\n\n    if (options.columnWise) {\n        const tmpData = Array(...Array(retObj.schema.length)).map(() => []);\n        retObj.data.forEach((tuple) => {\n            tuple.forEach((data, i) => {\n                tmpData[i].push(data);\n            });\n        });\n        retObj.data = tmpData;\n    }\n\n    return retObj;\n}\n","import DataModel from '../datamodel';\nimport { extend2 } from '../utils';\nimport { rowDiffsetIterator } from './row-diffset-iterator';\nimport { isArrEqual } from '../utils/helper';\n\n/**\n * Performs the union operation between two dm instances.\n *\n * @todo Fix the conflicts between union and difference terminology here.\n *\n * @param {dm} dm1 - The first dm instance.\n * @param {dm} dm2 - The second dm instance.\n * @return {dm} Returns the newly created dm after union operation.\n */\nexport function difference (dm1, dm2) {\n    const hashTable = {};\n    const schema = [];\n    const schemaNameArr = [];\n    const data = [];\n    const dm1FieldStore = dm1.getFieldspace();\n    const dm2FieldStore = dm2.getFieldspace();\n    const dm1FieldStoreFieldObj = dm1FieldStore.fieldsObj();\n    const dm2FieldStoreFieldObj = dm2FieldStore.fieldsObj();\n    const name = `${dm1FieldStore.name} union ${dm2FieldStore.name}`;\n\n   // For union the columns should match otherwise return a clone of the dm1\n    if (!isArrEqual(dm1._colIdentifier.split(',').sort(), dm2._colIdentifier.split(',').sort())) {\n        return null;\n    }\n\n    // Prepare the schema\n    (dm1._colIdentifier.split(',')).forEach((fieldName) => {\n        const field = dm1FieldStoreFieldObj[fieldName];\n        schema.push(extend2({}, field.schema()));\n        schemaNameArr.push(field.schema().name);\n    });\n\n    /**\n     * The helper function to create the data.\n     *\n     * @param {dm} dm - The dm instance for which the data is inserted.\n     * @param {Object} fieldsObj - The fieldStore object format.\n     * @param {boolean} addData - If true only tuple will be added to the data.\n     */\n    function prepareDataHelper(dm, fieldsObj, addData) {\n        rowDiffsetIterator(dm._rowDiffset, (i) => {\n            const tuple = {};\n            let hashData = '';\n            schemaNameArr.forEach((schemaName) => {\n                const value = fieldsObj[schemaName].partialField.data[i];\n                hashData += `-${value}`;\n                tuple[schemaName] = value;\n            });\n            if (!hashTable[hashData]) {\n                if (addData) { data.push(tuple); }\n                hashTable[hashData] = true;\n            }\n        });\n    }\n\n    // Prepare the data\n    prepareDataHelper(dm2, dm2FieldStoreFieldObj, false);\n    prepareDataHelper(dm1, dm1FieldStoreFieldObj, true);\n\n    return new DataModel(data, schema, { name });\n}\n\n","import { isArray } from '../utils';\nimport InvalidAwareTypes from '../invalid-aware-types';\nimport { GROUP_BY_FUNCTIONS } from '../enums';\n\nconst { SUM, AVG, FIRST, LAST, COUNT, STD, MIN, MAX } = GROUP_BY_FUNCTIONS;\n\nfunction getFilteredValues(arr) {\n    return arr.filter(item => !(item instanceof InvalidAwareTypes));\n}\n/**\n * Reducer function that returns the sum of all the values.\n *\n * @public\n * @param  {Array.<number>} arr - The input array.\n * @return {number} Returns the sum of the array.\n */\nfunction sum (arr) {\n    if (isArray(arr) && !(arr[0] instanceof Array)) {\n        const filteredNumber = getFilteredValues(arr);\n        const totalSum = filteredNumber.length ?\n                            filteredNumber.reduce((acc, curr) => acc + curr, 0)\n                            : InvalidAwareTypes.NULL;\n        return totalSum;\n    }\n    return InvalidAwareTypes.NULL;\n}\n\n/**\n * Reducer function that returns the average of all the values.\n *\n * @public\n * @param  {Array.<number>} arr - The input array.\n * @return {number} Returns the mean value of the array.\n */\nfunction avg (arr) {\n    if (isArray(arr) && !(arr[0] instanceof Array)) {\n        const totalSum = sum(arr);\n        const len = arr.length || 1;\n        return (Number.isNaN(totalSum) || totalSum instanceof InvalidAwareTypes) ?\n                 InvalidAwareTypes.NULL : totalSum / len;\n    }\n    return InvalidAwareTypes.NULL;\n}\n\n/**\n * Reducer function that gives the min value amongst all the values.\n *\n * @public\n * @param  {Array.<number>} arr - The input array.\n * @return {number} Returns the minimum value of the array.\n */\nfunction min (arr) {\n    if (isArray(arr) && !(arr[0] instanceof Array)) {\n        // Filter out undefined, null and NaN values\n        const filteredValues = getFilteredValues(arr);\n\n        return (filteredValues.length) ? Math.min(...filteredValues) : InvalidAwareTypes.NULL;\n    }\n    return InvalidAwareTypes.NULL;\n}\n\n/**\n * Reducer function that gives the max value amongst all the values.\n *\n * @public\n * @param  {Array.<number>} arr - The input array.\n * @return {number} Returns the maximum value of the array.\n */\nfunction max (arr) {\n    if (isArray(arr) && !(arr[0] instanceof Array)) {\n        // Filter out undefined, null and NaN values\n        const filteredValues = getFilteredValues(arr);\n\n        return (filteredValues.length) ? Math.max(...filteredValues) : InvalidAwareTypes.NULL;\n    }\n    return InvalidAwareTypes.NULL;\n}\n\n/**\n * Reducer function that gives the first value of the array.\n *\n * @public\n * @param  {Array} arr - The input array.\n * @return {number} Returns the first value of the array.\n */\nfunction first (arr) {\n    return arr[0];\n}\n\n/**\n * Reducer function that gives the last value of the array.\n *\n * @public\n * @param  {Array} arr - The input array.\n * @return {number} Returns the last value of the array.\n */\nfunction last (arr) {\n    return arr[arr.length - 1];\n}\n\n/**\n * Reducer function that gives the count value of the array.\n *\n * @public\n * @param  {Array} arr - The input array.\n * @return {number} Returns the length of the array.\n */\nfunction count (arr) {\n    if (isArray(arr)) {\n        return arr.length;\n    }\n    return InvalidAwareTypes.NULL;\n}\n\n/**\n * Calculates the variance of the input array.\n *\n * @param  {Array.<number>} arr - The input array.\n * @return {number} Returns the variance of the input array.\n */\nfunction variance (arr) {\n    let mean = avg(arr);\n    return avg(arr.map(num => (num - mean) ** 2));\n}\n\n/**\n * Calculates the square root of the variance of the input array.\n *\n * @public\n * @param  {Array.<number>} arr - The input array.\n * @return {number} Returns the square root of the variance.\n */\nfunction std (arr) {\n    return Math.sqrt(variance(arr));\n}\n\n\nconst fnList = {\n    [SUM]: sum,\n    [AVG]: avg,\n    [MIN]: min,\n    [MAX]: max,\n    [FIRST]: first,\n    [LAST]: last,\n    [COUNT]: count,\n    [STD]: std\n};\n\nconst defaultReducerName = SUM;\n\nexport {\n    defaultReducerName,\n    sum as defReducer,\n    fnList,\n};\n","import { defReducer, fnList } from '../operator';\n\n/**\n * A page level storage which stores, registers, unregisters reducers for all the datamodel instances. There is only one\n * reducer store available in a page. All the datamodel instances receive same instance of reducer store. DataModel\n * out of the box provides handful of {@link reducer | reducers} which can be used as reducer funciton.\n *\n * @public\n * @namespace DataModel\n */\nclass ReducerStore {\n    constructor () {\n        this.store = new Map();\n        this.store.set('defReducer', defReducer);\n\n        Object.entries(fnList).forEach((key) => {\n            this.store.set(key[0], key[1]);\n        });\n    }\n\n    /**\n     * Changes the `defaultReducer` globally. For all the fields which does not have `defAggFn` mentioned in schema, the\n     * value of `defaultReducer` is used for aggregation.\n     *\n     * @public\n     * @param {string} [reducer='sum'] - The name of the default reducer. It picks up the definition from store by doing\n     * name lookup. If no name is found then it takes `sum` as the default reducer.\n     * @return {ReducerStore} Returns instance of the singleton store in page.\n     */\n    defaultReducer (...params) {\n        if (!params.length) {\n            return this.store.get('defReducer');\n        }\n\n        let reducer = params[0];\n\n        if (typeof reducer === 'function') {\n            this.store.set('defReducer', reducer);\n        } else {\n            reducer = String(reducer);\n            if (Object.keys(fnList).indexOf(reducer) !== -1) {\n                this.store.set('defReducer', fnList[reducer]);\n            } else {\n                throw new Error(`Reducer ${reducer} not found in registry`);\n            }\n        }\n        return this;\n    }\n\n    /**\n     *\n     * Registers a {@link reducer | reducer}.\n     * A {@link reducer | reducer} has to be registered before it is used.\n     *\n     * @example\n     *  // find the mean squared value of a given set\n     *  const reducerStore = DataModel.Reducers();\n     *\n     *  reducers.register('meanSquared', (arr) => {\n     *      const squaredVal = arr.map(item => item * item);\n     *      let sum = 0;\n     *      for (let i = 0, l = squaredVal.length; i < l; i++) {\n     *          sum += squaredVal[i++];\n     *      }\n     *\n     *      return sum;\n     *  })\n     *\n     *  // datamodel (dm) is already prepared with cars.json\n     *  const dm1 = dm.groupBy(['origin'], {\n     *      accleration: 'meanSquared'\n     *  });\n     *\n     * @public\n     *\n     * @param {string} name formal name for a reducer. If the given name already exists in store it is overridden by new\n     *      definition.\n     * @param {Function} reducer definition of {@link reducer} function.\n     *\n     * @return {Function} function for unregistering the reducer.\n     */\n    register (name, reducer) {\n        if (typeof reducer !== 'function') {\n            throw new Error('Reducer should be a function');\n        }\n\n        name = String(name);\n        this.store.set(name, reducer);\n\n        return () => { this.__unregister(name); };\n    }\n\n    __unregister (name) {\n        if (this.store.has(name)) {\n            this.store.delete(name);\n        }\n    }\n\n    resolve (name) {\n        if (name instanceof Function) {\n            return name;\n        }\n        return this.store.get(name);\n    }\n}\n\nconst reducerStore = (function () {\n    let store = null;\n\n    function getStore () {\n        if (store === null) {\n            store = new ReducerStore();\n        }\n        return store;\n    }\n    return getStore();\n}());\n\nexport default reducerStore;\n","import { getCommonSchema } from './get-common-schema';\n\n/**\n * The filter function used in natural join.\n * It generates a function that will have the logic to join two\n * DataModel instances by the process of natural join.\n *\n * @param {DataModel} dm1 - The left DataModel instance.\n * @param {DataModel} dm2 - The right DataModel instance.\n * @return {Function} Returns a function that is used in cross-product operation.\n */\nexport function naturalJoinFilter (dm1, dm2) {\n    const dm1FieldStore = dm1.getFieldspace();\n    const dm2FieldStore = dm2.getFieldspace();\n    // const dm1FieldStoreName = dm1FieldStore.name;\n    // const dm2FieldStoreName = dm2FieldStore.name;\n    const commonSchemaArr = getCommonSchema(dm1FieldStore, dm2FieldStore);\n\n    return (dm1Fields, dm2Fields) => {\n        let retainTuple = true;\n        commonSchemaArr.forEach((fieldName) => {\n            if (dm1Fields[fieldName].internalValue ===\n                dm2Fields[fieldName].internalValue && retainTuple) {\n                retainTuple = true;\n            } else {\n                retainTuple = false;\n            }\n        });\n        return retainTuple;\n    };\n}\n","import DataModel from '../export';\nimport { extend2 } from '../utils';\nimport { rowDiffsetIterator } from './row-diffset-iterator';\nimport { isArrEqual } from '../utils/helper';\n/**\n * Performs the union operation between two dm instances.\n *\n * @param {dm} dm1 - The first dm instance.\n * @param {dm} dm2 - The second dm instance.\n * @return {dm} Returns the newly created dm after union operation.\n */\nexport function union (dm1, dm2) {\n    const hashTable = {};\n    const schema = [];\n    const schemaNameArr = [];\n    const data = [];\n    const dm1FieldStore = dm1.getFieldspace();\n    const dm2FieldStore = dm2.getFieldspace();\n    const dm1FieldStoreFieldObj = dm1FieldStore.fieldsObj();\n    const dm2FieldStoreFieldObj = dm2FieldStore.fieldsObj();\n    const name = `${dm1FieldStore.name} union ${dm2FieldStore.name}`;\n\n    // For union the columns should match otherwise return a clone of the dm1\n    if (!isArrEqual(dm1._colIdentifier.split(',').sort(), dm2._colIdentifier.split(',').sort())) {\n        return null;\n    }\n\n    // Prepare the schema\n    (dm1._colIdentifier.split(',')).forEach((fieldName) => {\n        const field = dm1FieldStoreFieldObj[fieldName];\n        schema.push(extend2({}, field.schema()));\n        schemaNameArr.push(field.schema().name);\n    });\n\n    /**\n     * The helper function to create the data.\n     *\n     * @param {dm} dm - The dm instance for which the data is inserted.\n     * @param {Object} fieldsObj - The fieldStore object format.\n     */\n    function prepareDataHelper (dm, fieldsObj) {\n        rowDiffsetIterator(dm._rowDiffset, (i) => {\n            const tuple = {};\n            let hashData = '';\n            schemaNameArr.forEach((schemaName) => {\n                const value = fieldsObj[schemaName].partialField.data[i];\n                hashData += `-${value}`;\n                tuple[schemaName] = value;\n            });\n            if (!hashTable[hashData]) {\n                data.push(tuple);\n                hashTable[hashData] = true;\n            }\n        });\n    }\n\n    // Prepare the data\n    prepareDataHelper(dm1, dm1FieldStoreFieldObj);\n    prepareDataHelper(dm2, dm2FieldStoreFieldObj);\n\n    return new DataModel(data, schema, { name });\n}\n","import { crossProduct } from './cross-product';\nimport { JOINS } from '../constants';\nimport { union } from './union';\n\n\nexport function leftOuterJoin (dataModel1, dataModel2, filterFn) {\n    return crossProduct(dataModel1, dataModel2, filterFn, false, JOINS.LEFTOUTER);\n}\n\nexport function rightOuterJoin (dataModel1, dataModel2, filterFn) {\n    return crossProduct(dataModel2, dataModel1, filterFn, false, JOINS.RIGHTOUTER);\n}\n\nexport function fullOuterJoin (dataModel1, dataModel2, filterFn) {\n    return union(leftOuterJoin(dataModel1, dataModel2, filterFn), rightOuterJoin(dataModel1, dataModel2, filterFn));\n}\n","/**\n * Stores the full data and the metadata of a field. It provides\n * a single source of data from which the future Field\n * instance can get a subset of it with a rowDiffset config.\n *\n * @class\n * @public\n */\nexport default class PartialField {\n    /**\n     * Initialize a new instance.\n     *\n     * @public\n     * @param {string} name - The name of the field.\n     * @param {Array} data - The data array.\n     * @param {Object} schema - The schema object of the corresponding field.\n     * @param {FieldParser} parser - The parser instance corresponding to that field.\n     */\n    constructor (name, data, schema, parser) {\n        this.name = name;\n        this.schema = schema;\n        this.parser = parser;\n        this.data = this._sanitize(data);\n    }\n\n    /**\n     * Sanitizes the field data.\n     *\n     * @private\n     * @param {Array} data - The actual input data.\n     * @return {Array} Returns the sanitized data.\n     */\n    _sanitize (data) {\n        return data.map(datum => this.parser.parse(datum, { format: this.schema.format }));\n    }\n}\n","import { rowDiffsetIterator } from '../../operator/row-diffset-iterator';\nimport PartialField from '../partial-field';\n\n/**\n * In {@link DataModel}, every tabular data consists of column, a column is stored as field.\n * Field contains all the data for a given column in an array.\n *\n * Each record consists of several fields; the fields of all records form the columns.\n * Examples of fields: name, gender, sex etc.\n *\n * In DataModel, each field can have multiple attributes which describes its data and behaviour.\n * A field can have two types of data: Measure and Dimension.\n *\n * A Dimension Field is the context on which a data is categorized and the measure is the numerical values that\n * quantify the data set.\n * In short a dimension is the lens through which you are looking at your measure data.\n *\n * Refer to {@link Schema} to get info about possible field attributes.\n *\n * @public\n * @class\n */\nexport default class Field {\n    /**\n     * Initialize a new instance.\n     *\n     * @public\n     * @param {PartialField} partialField - The partialField instance which holds the whole data.\n     * @param {string} rowDiffset - The data subset definition.\n     */\n    constructor (partialField, rowDiffset) {\n        this.partialField = partialField;\n        this.rowDiffset = rowDiffset;\n    }\n\n    static parser() {\n        throw new Error('Not yet implemented');\n    }\n\n    /**\n     * Generates the field type specific domain.\n     *\n     * @public\n     * @abstract\n     */\n    domain () {\n        throw new Error('Not yet implemented');\n    }\n\n    /**\n     * Returns the the field schema.\n     *\n     * @public\n     * @return {string} Returns the field schema.\n     */\n    schema () {\n        return this.partialField.schema;\n    }\n\n    /**\n     * Returns the name of the field.\n     *\n     * @public\n     * @return {string} Returns the name of the field.\n     */\n    name () {\n        return this.partialField.name;\n    }\n\n    /**\n     * Returns the type of the field.\n     *\n     * @public\n     * @return {string} Returns the type of the field.\n     */\n    type () {\n        return this.partialField.schema.type;\n    }\n\n    /**\n     * Returns the subtype of the field.\n     *\n     * @public\n     * @return {string} Returns the subtype of the field.\n     */\n    subtype () {\n        return this.partialField.schema.subtype;\n    }\n\n    /**\n     * Returns the description of the field.\n     *\n     * @public\n     * @return {string} Returns the description of the field.\n     */\n    description () {\n        return this.partialField.schema.description;\n    }\n\n    /**\n     * Returns the display name of the field.\n     *\n     * @public\n     * @return {string} Returns the display name of the field.\n     */\n    displayName () {\n        return this.partialField.schema.displayName || this.partialField.schema.name;\n    }\n\n    /**\n     * Returns the data associated with the field.\n     *\n     * @public\n     * @return {Array} Returns the data.\n     */\n    data () {\n        const data = [];\n        rowDiffsetIterator(this.rowDiffset, (i) => {\n            data.push(this.partialField.data[i]);\n        });\n        return data;\n    }\n\n    /**\n     * Returns the formatted version of the underlying field data.\n     *\n     * @public\n     * @abstract\n     */\n    formattedData () {\n        throw new Error('Not yet implemented');\n    }\n\n    static get BUILDER() {\n        const builder = {\n            _params: {},\n            _context: this,\n            fieldName(name) {\n                this._params.name = name;\n                return this;\n            },\n            schema(schema) {\n                this._params.schema = schema;\n                return this;\n            },\n            data(data) {\n                this._params.data = data;\n                return this;\n            },\n            partialField(partialField) {\n                this._params.partialField = partialField;\n                return this;\n            },\n            rowDiffset(rowDiffset) {\n                this._params.rowDiffset = rowDiffset;\n                return this;\n            },\n            build() {\n                let partialField = null;\n                if (this._params.partialField instanceof PartialField) {\n                    partialField = this._params.partialField;\n                } else if (this._params.schema && this._params.data) {\n                    partialField = new PartialField(this._params.name,\n                                        this._params.data,\n                                        this._params.schema,\n                                        this._context.parser());\n                }\n                else {\n                    throw new Error('Invalid Field parameters');\n                }\n                return new this._context(partialField, this._params.rowDiffset);\n            }\n        };\n        return builder;\n    }\n}\n","import Field from '../field';\n\n/**\n * Represents dimension field type.\n *\n * @public\n * @class\n * @extends Field\n */\nexport default class Dimension extends Field {\n    /**\n     * Returns the domain for the dimension field.\n     *\n     * @override\n     * @public\n     * @return {any} Returns the calculated domain.\n     */\n    domain () {\n        if (!this._cachedDomain) {\n            this._cachedDomain = this.calculateDataDomain();\n        }\n        return this._cachedDomain;\n    }\n\n    /**\n     * Calculates the corresponding field domain.\n     *\n     * @public\n     * @abstract\n     */\n    calculateDataDomain () {\n        throw new Error('Not yet implemented');\n    }\n\n     /**\n     * Returns the formatted version of the underlying field data.\n     *\n     * @public\n     * @override\n     * @return {Array} Returns the formatted data.\n     */\n    formattedData () {\n        return this.data();\n    }\n}\n","import { formatNumber } from '../../utils';\nimport { defaultReducerName } from '../../operator/group-by-function';\nimport Field from '../field';\n\n/**\n * Represents measure field type.\n *\n * @public\n * @class\n * @extends Field\n */\nexport default class Measure extends Field {\n  /**\n   * Returns the domain for the measure field.\n   *\n   * @override\n   * @public\n   * @return {any} Returns the calculated domain.\n   */\n    domain () {\n        if (!this._cachedDomain) {\n            this._cachedDomain = this.calculateDataDomain();\n        }\n        return this._cachedDomain;\n    }\n\n  /**\n   * Returns the unit of the measure field.\n   *\n   * @public\n   * @return {string} Returns unit of the field.\n   */\n    unit () {\n        return this.partialField.schema.unit;\n    }\n\n  /**\n   * Returns the aggregation function name of the measure field.\n   *\n   * @public\n   * @return {string} Returns aggregation function name of the field.\n   */\n    defAggFn () {\n        return this.partialField.schema.defAggFn || defaultReducerName;\n    }\n\n  /**\n   * Returns the number format of the measure field.\n   *\n   * @public\n   * @return {Function} Returns number format of the field.\n   */\n    numberFormat () {\n        const { numberFormat } = this.partialField.schema;\n        return numberFormat instanceof Function ? numberFormat : formatNumber;\n    }\n\n  /**\n   * Calculates the corresponding field domain.\n   *\n   * @public\n   * @abstract\n   */\n    calculateDataDomain () {\n        throw new Error('Not yet implemented');\n    }\n\n    /**\n     * Returns the formatted version of the underlying field data.\n     *\n     * @public\n     * @override\n     * @return {Array} Returns the formatted data.\n     */\n    formattedData () {\n        return this.data();\n    }\n}\n","/**\n * A interface to represent a parser which is responsible to parse the field.\n *\n * @public\n * @interface\n */\nexport default class FieldParser {\n    /**\n     * Parses a single value of a field and return the sanitized form.\n     *\n     * @public\n     * @abstract\n     */\n    parse () {\n        throw new Error('Not yet implemented');\n    }\n}\n","import FieldParser from '../field-parser';\nimport InvalidAwareTypes from '../../../invalid-aware-types';\n\n/**\n * A FieldParser which parses the categorical values.\n *\n * @public\n * @class\n * @implements {FieldParser}\n */\nexport default class CategoricalParser extends FieldParser {\n  /**\n   * Parses a single value of a field and returns the stringified form.\n   *\n   * @public\n   * @param {string|number} val - The value of the field.\n   * @return {string} Returns the stringified value.\n   */\n    parse (val) {\n        let result;\n        // check if invalid date value\n        if (!InvalidAwareTypes.isInvalid(val)) {\n            result = String(val).trim();\n        } else {\n            result = InvalidAwareTypes.getInvalidType(val);\n        }\n        return result;\n    }\n}\n","import { rowDiffsetIterator } from '../../operator/row-diffset-iterator';\nimport { DimensionSubtype } from '../../enums';\nimport Dimension from '../dimension';\nimport CategoricalParser from '../parsers/categorical-parser';\n/**\n * Represents categorical field subtype.\n *\n * @public\n * @class\n * @extends Dimension\n */\nexport default class Categorical extends Dimension {\n    /**\n     * Returns the subtype of the field.\n     *\n     * @public\n     * @override\n     * @return {string} Returns the subtype of the field.\n     */\n    subtype () {\n        return DimensionSubtype.CATEGORICAL;\n    }\n\n    /**\n     * Calculates the corresponding field domain.\n     *\n     * @public\n     * @override\n     * @return {Array} Returns the unique values.\n     */\n    calculateDataDomain () {\n        const hash = new Set();\n        const domain = [];\n\n        // here don't use this.data() as the iteration will be occurred two times on same data.\n        rowDiffsetIterator(this.rowDiffset, (i) => {\n            const datum = this.partialField.data[i];\n            if (!hash.has(datum)) {\n                hash.add(datum);\n                domain.push(datum);\n            }\n        });\n        return domain;\n    }\n\n    static parser() {\n        return new CategoricalParser();\n    }\n}\n","import { DateTimeFormatter } from '../../../utils';\nimport FieldParser from '../field-parser';\nimport InvalidAwareTypes from '../../../invalid-aware-types';\n\n/**\n * A FieldParser which parses the temporal values.\n *\n * @public\n * @class\n * @implements {FieldParser}\n */\nexport default class TemporalParser extends FieldParser {\n\n    /**\n     * Parses a single value of a field and returns the millisecond value.\n     *\n     * @public\n     * @param {string|number} val - The value of the field.\n     * @return {number} Returns the millisecond value.\n     */\n    parse (val, { format }) {\n        let result;\n        // check if invalid date value\n        if (!this._dtf) {\n            this._dtf = new DateTimeFormatter(format);\n        }\n        if (!InvalidAwareTypes.isInvalid(val)) {\n            let nativeDate = this._dtf.getNativeDate(val);\n            result = nativeDate ? nativeDate.getTime() : InvalidAwareTypes.NA;\n        } else {\n            result = InvalidAwareTypes.getInvalidType(val);\n        }\n        return result;\n    }\n}\n","import { rowDiffsetIterator } from '../operator/row-diffset-iterator';\nimport InvalidAwareTypes from '../invalid-aware-types';\n\nexport const calculateContinuousDomain = (data, rowDiffset) => {\n    let min = Number.POSITIVE_INFINITY;\n    let max = Number.NEGATIVE_INFINITY;\n\n    // here don't use this.data() as the iteration will be occurred two times on same data.\n    rowDiffsetIterator(rowDiffset, (i) => {\n        const datum = data[i];\n        if (datum instanceof InvalidAwareTypes) {\n            return;\n        }\n\n        if (datum < min) {\n            min = datum;\n        }\n        if (datum > max) {\n            max = datum;\n        }\n    });\n\n    return [min, max];\n};\n","import { rowDiffsetIterator } from '../../operator/row-diffset-iterator';\nimport Dimension from '../dimension';\nimport { DateTimeFormatter } from '../../utils';\nimport InvalidAwareTypes from '../../invalid-aware-types';\nimport TemporalParser from '../parsers/temporal-parser';\nimport { calculateContinuousDomain } from '../helper';\n\n/**\n * Represents temporal field subtype.\n *\n * @public\n * @class\n * @extends Dimension\n */\nexport default class Temporal extends Dimension {\n     /**\n     * Initialize a new instance.\n     *\n     * @public\n     * @param {PartialField} partialField - The partialField instance which holds the whole data.\n     * @param {string} rowDiffset - The data subset definition.\n     */\n    constructor (partialField, rowDiffset) {\n        super(partialField, rowDiffset);\n\n        this._cachedMinDiff = null;\n    }\n\n     /**\n     * Calculates the corresponding field domain.\n     *\n     * @public\n     * @override\n     * @return {Array} Returns the unique values.\n     */\n    calculateDataDomain () {\n        return calculateContinuousDomain(this.partialField.data, this.rowDiffset);\n    }\n\n\n    /**\n     * Calculates the minimum consecutive difference from the associated field data.\n     *\n     * @public\n     * @return {number} Returns the minimum consecutive diff in milliseconds.\n     */\n    minimumConsecutiveDifference () {\n        if (this._cachedMinDiff) {\n            return this._cachedMinDiff;\n        }\n\n        const sortedData = this.data().filter(item => !(item instanceof InvalidAwareTypes)).sort((a, b) => a - b);\n        const arrLn = sortedData.length;\n        let minDiff = Number.POSITIVE_INFINITY;\n        let prevDatum;\n        let nextDatum;\n        let processedCount = 0;\n\n        for (let i = 1; i < arrLn; i++) {\n            prevDatum = sortedData[i - 1];\n            nextDatum = sortedData[i];\n\n            if (nextDatum === prevDatum) {\n                continue;\n            }\n\n            minDiff = Math.min(minDiff, nextDatum - sortedData[i - 1]);\n            processedCount++;\n        }\n\n        if (!processedCount) {\n            minDiff = null;\n        }\n        this._cachedMinDiff = minDiff;\n\n        return this._cachedMinDiff;\n    }\n\n    /**\n     * Returns the format specified in the input schema while creating field.\n     *\n     * @public\n     * @return {string} Returns the datetime format.\n     */\n    format () {\n        return this.partialField.schema.format;\n    }\n\n    /**\n     * Returns the formatted version of the underlying field data\n     * If data is of type invalid or has missing format use the raw value\n     * @public\n     * @override\n     * @return {Array} Returns the formatted data.\n     */\n    formattedData () {\n        const data = [];\n        const dataFormat = this.format();\n\n        rowDiffsetIterator(this.rowDiffset, (i) => {\n            const datum = this.partialField.data[i];\n            // If value is of invalid type or format is missing\n            if (InvalidAwareTypes.isInvalid(datum) || (!dataFormat && Number.isFinite(datum))) {\n                // Use the invalid map value or the raw value\n                const parsedDatum = InvalidAwareTypes.getInvalidType(datum) || datum;\n                data.push(parsedDatum);\n            } else {\n                data.push(DateTimeFormatter.formatAs(datum, dataFormat));\n            }\n        });\n        return data;\n    }\n\n    static parser() {\n        return new TemporalParser();\n    }\n}\n\n","import FieldParser from '../field-parser';\nimport InvalidAwareTypes from '../../../invalid-aware-types';\n\n/**\n * A FieldParser which parses the binned values.\n *\n * @public\n * @class\n * @implements {FieldParser}\n */\nexport default class BinnedParser extends FieldParser {\n  /**\n   * Parses a single binned value of a field and returns the sanitized value.\n   *\n   * @public\n   * @param {string} val - The value of the field.\n   * @return {string} Returns the sanitized value.\n   */\n    parse (val) {\n        const regex = /^\\s*([+-]?\\d+(?:\\.\\d+)?)\\s*-\\s*([+-]?\\d+(?:\\.\\d+)?)\\s*$/;\n        val = String(val);\n        let result;\n        // check if invalid date value\n        if (!InvalidAwareTypes.isInvalid(val)) {\n            let matched = val.match(regex);\n            result = matched ? `${Number.parseFloat(matched[1])}-${Number.parseFloat(matched[2])}`\n                             : InvalidAwareTypes.NA;\n        } else {\n            result = InvalidAwareTypes.getInvalidType(val);\n        }\n        return result;\n    }\n}\n","import Dimension from '../dimension';\nimport BinnedParser from '../parsers/binned-parser';\n\n/**\n * Represents binned field subtype.\n *\n * @public\n * @class\n * @extends Dimension\n */\nexport default class Binned extends Dimension {\n    /**\n     * Calculates the corresponding field domain.\n     *\n     * @public\n     * @override\n     * @return {Array} Returns the last and first values of bins config array.\n     */\n    calculateDataDomain () {\n        const binsArr = this.partialField.schema.bins;\n        return [binsArr[0], binsArr[binsArr.length - 1]];\n    }\n\n    /**\n     * Returns the bins config provided while creating the field instance.\n     *\n     * @public\n     * @return {Array} Returns the bins array config.\n     */\n    bins () {\n        return this.partialField.schema.bins;\n    }\n\n    static parser() {\n        return new BinnedParser();\n    }\n}\n","import FieldParser from '../field-parser';\nimport InvalidAwareTypes from '../../../invalid-aware-types';\n\n/**\n * A FieldParser which parses the continuous values.\n *\n * @public\n * @class\n * @implements {FieldParser}\n */\nexport default class ContinuousParser extends FieldParser {\n  /**\n   * Parses a single value of a field and returns the number form.\n   *\n   * @public\n   * @param {string|number} val - The value of the field.\n   * @return {string} Returns the number value.\n   */\n    parse (val) {\n        let result;\n        // check if invalid date value\n        if (!InvalidAwareTypes.isInvalid(val)) {\n            let parsedVal = parseFloat(val, 10);\n            result = Number.isNaN(parsedVal) ? InvalidAwareTypes.NA : parsedVal;\n        } else {\n            result = InvalidAwareTypes.getInvalidType(val);\n        }\n        return result;\n    }\n}\n","import { MeasureSubtype } from '../../enums';\nimport Measure from '../measure';\nimport ContinuousParser from '../parsers/continuous-parser';\nimport { calculateContinuousDomain } from '../helper';\n\n/**\n * Represents continuous field subtype.\n *\n * @public\n * @class\n * @extends Measure\n */\nexport default class Continuous extends Measure {\n    /**\n     * Returns the subtype of the field.\n     *\n     * @public\n     * @override\n     * @return {string} Returns the subtype of the field.\n     */\n    subtype () {\n        return MeasureSubtype.CONTINUOUS;\n    }\n\n    /**\n     * Calculates the corresponding field domain.\n     *\n     * @public\n     * @override\n     * @return {Array} Returns the min and max values.\n     */\n    calculateDataDomain () {\n        return calculateContinuousDomain(this.partialField.data, this.rowDiffset);\n    }\n\n    static parser() {\n        return new ContinuousParser();\n    }\n}\n","import { FieldParser } from '..';\n/**\n * Wrapper around row identifier value. Row id value contains the unique id of each row which\n * remains same across all datamodels of same source.\n */\nexport class IdValue {\n    constructor (val) {\n        const valArr = val instanceof Array ? val.map(Number) : [Number(val)];\n        this._val = new Set(valArr);\n        this._hash = valArr[0];\n        this._valArr = valArr;\n        return this;\n    }\n\n    toString () {\n        return this._hash;\n    }\n\n    values () {\n        return this._valArr;\n    }\n}\n\n/**\n * A FieldParser which parses the id values.\n *\n * @public\n * @class\n * @implements {FieldParser}\n */\nexport default class IdParser extends FieldParser {\n  /**\n   * Parses a single value of a field and returns the stringified form.\n   *\n   * @public\n   * @param {string|number} val - The value of the field.\n   * @return {string} Returns the instance of id value.\n   */\n    parse (val) {\n        const result = val instanceof IdValue ? new IdValue(val.values()) : new IdValue(val);\n        return result;\n    }\n}\n","import { DimensionSubtype } from '../../enums';\nimport IdParser from '../parsers/id-parser';\nimport Categorical from '../categorical';\n\n/**\n * Represents id field subtype.\n *\n * @public\n * @class\n * @extends Dimension\n */\nexport default class ID extends Categorical {\n    /**\n     * Returns the subtype of the field.\n     *\n     * @public\n     * @override\n     * @return {string} Returns the subtype of the field.\n     */\n    subtype () {\n        return DimensionSubtype.ID;\n    }\n\n    static parser () {\n        return new IdParser();\n    }\n}\n","import Categorical from './categorical';\nimport Temporal from './temporal';\nimport Binned from './binned';\nimport Continuous from './continuous';\nimport { DimensionSubtype, MeasureSubtype } from '../enums';\nimport ID from './id';\n\n\nclass FieldTypeRegistry {\n    constructor() {\n        this._fieldType = new Map();\n    }\n\n    registerFieldType(subtype, dimension) {\n        this._fieldType.set(subtype, dimension);\n        return this;\n    }\n\n    has(type) {\n        return this._fieldType.has(type);\n    }\n\n    get(type) {\n        return this._fieldType.get(type);\n    }\n}\n\nconst registerDefaultFields = (store) => {\n    store\n                    .registerFieldType(DimensionSubtype.CATEGORICAL, Categorical)\n                    .registerFieldType(DimensionSubtype.ID, ID)\n                    .registerFieldType(DimensionSubtype.TEMPORAL, Temporal)\n                    .registerFieldType(DimensionSubtype.BINNED, Binned)\n                    .registerFieldType(MeasureSubtype.CONTINUOUS, Continuous);\n};\n\nconst fieldRegistry = (function () {\n    let store = null;\n    function getStore () {\n        store = new FieldTypeRegistry();\n        registerDefaultFields(store);\n        return store;\n    }\n    return store || getStore();\n}());\n\nexport default fieldRegistry;\n\n","import { FieldType, DimensionSubtype, MeasureSubtype } from './enums';\nimport { fieldRegistry } from './fields';\n\n/**\n * Creates a field instance according to the provided data and schema.\n *\n * @param {Array} data - The field data array.\n * @param {Object} schema - The field schema object.\n * @return {Field} Returns the newly created field instance.\n */\nfunction createUnitField(data, schema) {\n    data = data || [];\n\n    if (fieldRegistry.has(schema.subtype)) {\n        return fieldRegistry.get(schema.subtype)\n                        .BUILDER\n                        .fieldName(schema.name)\n                        .schema(schema)\n                        .data(data)\n                        .rowDiffset(`0-${data.length - 1}`)\n                        .build();\n    }\n    return fieldRegistry\n                    .get(schema.type === FieldType.MEASURE ? MeasureSubtype.CONTINUOUS : DimensionSubtype.CATEGORICAL)\n                    .BUILDER\n                    .fieldName(schema.name)\n                    .schema(schema)\n                    .data(data)\n                    .rowDiffset(`0-${data.length - 1}`)\n                    .build();\n}\n\n\n/**\n * Creates a field instance from partialField and rowDiffset.\n *\n * @param {PartialField} partialField - The corresponding partial field.\n * @param {string} rowDiffset - The data subset config.\n * @return {Field} Returns the newly created field instance.\n */\nexport function createUnitFieldFromPartial(partialField, rowDiffset) {\n    const { schema } = partialField;\n\n    if (fieldRegistry.has(schema.subtype)) {\n        return fieldRegistry.get(schema.subtype)\n                        .BUILDER\n                        .partialField(partialField)\n                        .rowDiffset(rowDiffset)\n                        .build();\n    }\n    return fieldRegistry\n                    .get(schema.type === FieldType.MEASURE ? MeasureSubtype.CONTINUOUS : DimensionSubtype.CATEGORICAL)\n                    .BUILDER\n                    .partialField(partialField)\n                    .rowDiffset(rowDiffset)\n                    .build();\n}\n\n/**\n * Creates the field instances with input data and schema.\n *\n * @param {Array} dataColumn - The data array for fields.\n * @param {Array} schema - The schema array for fields.\n * @param {Array} headers - The array of header names.\n * @return {Array.<Field>} Returns an array of newly created field instances.\n */\nexport function createFields(dataColumn, schema, headers) {\n    const headersObj = {};\n\n    if (!(headers && headers.length)) {\n        headers = schema.map(item => item.name);\n    }\n\n    headers.forEach((header, i) => {\n        headersObj[header] = i;\n    });\n\n    return schema.map(item => createUnitField(dataColumn[headersObj[item.name]], item));\n}\n","import { DataFormat } from './enums';\n\nexport default {\n    dataFormat: DataFormat.AUTO\n};\n","/**\n * Interface for all data converters\n */\nexport default class DataConverter {\n    constructor(type) {\n        this._type = type;\n    }\n\n    get type() {\n        return this._type;\n    }\n\n    convert() {\n        throw new Error('Convert method not implemented.');\n    }\n\n}\n","var EOL = {},\n    EOF = {},\n    QUOTE = 34,\n    NEWLINE = 10,\n    RETURN = 13;\n\nfunction objectConverter(columns) {\n  return new Function(\"d\", \"return {\" + columns.map(function(name, i) {\n    return JSON.stringify(name) + \": d[\" + i + \"] || \\\"\\\"\";\n  }).join(\",\") + \"}\");\n}\n\nfunction customConverter(columns, f) {\n  var object = objectConverter(columns);\n  return function(row, i) {\n    return f(object(row), i, columns);\n  };\n}\n\n// Compute unique columns in order of discovery.\nfunction inferColumns(rows) {\n  var columnSet = Object.create(null),\n      columns = [];\n\n  rows.forEach(function(row) {\n    for (var column in row) {\n      if (!(column in columnSet)) {\n        columns.push(columnSet[column] = column);\n      }\n    }\n  });\n\n  return columns;\n}\n\nfunction pad(value, width) {\n  var s = value + \"\", length = s.length;\n  return length < width ? new Array(width - length + 1).join(0) + s : s;\n}\n\nfunction formatYear(year) {\n  return year < 0 ? \"-\" + pad(-year, 6)\n    : year > 9999 ? \"+\" + pad(year, 6)\n    : pad(year, 4);\n}\n\nfunction formatDate(date) {\n  var hours = date.getUTCHours(),\n      minutes = date.getUTCMinutes(),\n      seconds = date.getUTCSeconds(),\n      milliseconds = date.getUTCMilliseconds();\n  return isNaN(date) ? \"Invalid Date\"\n      : formatYear(date.getUTCFullYear(), 4) + \"-\" + pad(date.getUTCMonth() + 1, 2) + \"-\" + pad(date.getUTCDate(), 2)\n      + (milliseconds ? \"T\" + pad(hours, 2) + \":\" + pad(minutes, 2) + \":\" + pad(seconds, 2) + \".\" + pad(milliseconds, 3) + \"Z\"\n      : seconds ? \"T\" + pad(hours, 2) + \":\" + pad(minutes, 2) + \":\" + pad(seconds, 2) + \"Z\"\n      : minutes || hours ? \"T\" + pad(hours, 2) + \":\" + pad(minutes, 2) + \"Z\"\n      : \"\");\n}\n\nexport default function(delimiter) {\n  var reFormat = new RegExp(\"[\\\"\" + delimiter + \"\\n\\r]\"),\n      DELIMITER = delimiter.charCodeAt(0);\n\n  function parse(text, f) {\n    var convert, columns, rows = parseRows(text, function(row, i) {\n      if (convert) return convert(row, i - 1);\n      columns = row, convert = f ? customConverter(row, f) : objectConverter(row);\n    });\n    rows.columns = columns || [];\n    return rows;\n  }\n\n  function parseRows(text, f) {\n    var rows = [], // output rows\n        N = text.length,\n        I = 0, // current character index\n        n = 0, // current line number\n        t, // current token\n        eof = N <= 0, // current token followed by EOF?\n        eol = false; // current token followed by EOL?\n\n    // Strip the trailing newline.\n    if (text.charCodeAt(N - 1) === NEWLINE) --N;\n    if (text.charCodeAt(N - 1) === RETURN) --N;\n\n    function token() {\n      if (eof) return EOF;\n      if (eol) return eol = false, EOL;\n\n      // Unescape quotes.\n      var i, j = I, c;\n      if (text.charCodeAt(j) === QUOTE) {\n        while (I++ < N && text.charCodeAt(I) !== QUOTE || text.charCodeAt(++I) === QUOTE);\n        if ((i = I) >= N) eof = true;\n        else if ((c = text.charCodeAt(I++)) === NEWLINE) eol = true;\n        else if (c === RETURN) { eol = true; if (text.charCodeAt(I) === NEWLINE) ++I; }\n        return text.slice(j + 1, i - 1).replace(/\"\"/g, \"\\\"\");\n      }\n\n      // Find next delimiter or newline.\n      while (I < N) {\n        if ((c = text.charCodeAt(i = I++)) === NEWLINE) eol = true;\n        else if (c === RETURN) { eol = true; if (text.charCodeAt(I) === NEWLINE) ++I; }\n        else if (c !== DELIMITER) continue;\n        return text.slice(j, i);\n      }\n\n      // Return last token before EOF.\n      return eof = true, text.slice(j, N);\n    }\n\n    while ((t = token()) !== EOF) {\n      var row = [];\n      while (t !== EOL && t !== EOF) row.push(t), t = token();\n      if (f && (row = f(row, n++)) == null) continue;\n      rows.push(row);\n    }\n\n    return rows;\n  }\n\n  function preformatBody(rows, columns) {\n    return rows.map(function(row) {\n      return columns.map(function(column) {\n        return formatValue(row[column]);\n      }).join(delimiter);\n    });\n  }\n\n  function format(rows, columns) {\n    if (columns == null) columns = inferColumns(rows);\n    return [columns.map(formatValue).join(delimiter)].concat(preformatBody(rows, columns)).join(\"\\n\");\n  }\n\n  function formatBody(rows, columns) {\n    if (columns == null) columns = inferColumns(rows);\n    return preformatBody(rows, columns).join(\"\\n\");\n  }\n\n  function formatRows(rows) {\n    return rows.map(formatRow).join(\"\\n\");\n  }\n\n  function formatRow(row) {\n    return row.map(formatValue).join(delimiter);\n  }\n\n  function formatValue(value) {\n    return value == null ? \"\"\n        : value instanceof Date ? formatDate(value)\n        : reFormat.test(value += \"\") ? \"\\\"\" + value.replace(/\"/g, \"\\\"\\\"\") + \"\\\"\"\n        : value;\n  }\n\n  return {\n    parse: parse,\n    parseRows: parseRows,\n    format: format,\n    formatBody: formatBody,\n    formatRows: formatRows,\n    formatRow: formatRow,\n    formatValue: formatValue\n  };\n}\n","import { columnMajor } from '../../utils';\n\n/**\n * Parses and converts data formatted in DSV array to a manageable internal format.\n *\n * @param {Array.<Array>} arr - A 2D array containing of the DSV data.\n * @param {Object} options - Option to control the behaviour of the parsing.\n * @param {boolean} [options.firstRowHeader=true] - Whether the first row of the dsv data is header or not.\n * @return {Array} Returns an array of headers and column major data.\n * @example\n *\n * // Sample input data:\n * const data = [\n *    [\"a\", \"b\", \"c\"],\n *    [1, 2, 3],\n *    [4, 5, 6],\n *    [7, 8, 9]\n * ];\n */\nfunction DSVArr(arr, schema, options) {\n    if (!Array.isArray(schema)) {\n        throw new Error('Schema missing or is in an unsupported format');\n    }\n    const defaultOption = {\n        firstRowHeader: true,\n    };\n    const schemaFields = schema.map(unitSchema => unitSchema.name);\n    options = Object.assign({}, defaultOption, options);\n\n    const columns = [];\n    const push = columnMajor(columns);\n\n    let headers = schemaFields;\n    if (options.firstRowHeader) {\n        // If header present then remove the first header row.\n        // Do in-place mutation to save space.\n        headers = arr.splice(0, 1)[0];\n    }\n    // create a map of the headers\n    const headerMap = headers.reduce((acc, h, i) => (\n        Object.assign(acc, { [h]: i })\n    ), {});\n\n    arr.forEach((fields) => {\n        const field = [];\n        schemaFields.forEach((schemaField) => {\n            const headIndex = headerMap[schemaField];\n            field.push(fields[headIndex]);\n        });\n        return push(...field);\n    });\n    return [schemaFields, columns];\n}\n\nexport default DSVArr;\n","import { dsvFormat as d3Dsv } from 'd3-dsv';\nimport DSVArr from './dsv-arr';\n\n/**\n * Parses and converts data formatted in DSV string to a manageable internal format.\n *\n * @todo Support to be given for https://tools.ietf.org/html/rfc4180.\n * @todo Sample implementation https://github.com/knrz/CSV.js/.\n *\n * @param {string} str - The input DSV string.\n * @param {Object} options - Option to control the behaviour of the parsing.\n * @param {boolean} [options.firstRowHeader=true] - Whether the first row of the dsv string data is header or not.\n * @param {string} [options.fieldSeparator=\",\"] - The separator of two consecutive field.\n * @return {Array} Returns an array of headers and column major data.\n * @example\n *\n * // Sample input data:\n * const data = `\n * a,b,c\n * 1,2,3\n * 4,5,6\n * 7,8,9\n * `\n */\nfunction DSVStr (str, schema, options) {\n    const defaultOption = {\n        firstRowHeader: true,\n        fieldSeparator: ','\n    };\n    options = Object.assign({}, defaultOption, options);\n\n    const dsv = d3Dsv(options.fieldSeparator);\n    return DSVArr(dsv.parseRows(str), schema, options);\n}\n\nexport default DSVStr;\n","import DataConverter from '../model/dataConverter';\nimport DSVStr from '../utils/dsv-str';\nimport DataFormat from '../../enums/data-format';\n\nexport default class DSVStringConverter extends DataConverter {\n    constructor() {\n        super(DataFormat.DSV_STR);\n    }\n\n    convert(data, schema, options) {\n        return DSVStr(data, schema, options);\n    }\n}\n","import { columnMajor } from '../../utils';\n\n/**\n * Parses and converts data formatted in JSON to a manageable internal format.\n *\n * @param {Array.<Object>} arr - The input data formatted in JSON.\n * @return {Array.<Object>} Returns an array of headers and column major data.\n * @example\n *\n * // Sample input data:\n * const data = [\n *    {\n *      \"a\": 1,\n *      \"b\": 2,\n *      \"c\": 3\n *    },\n *    {\n *      \"a\": 4,\n *      \"b\": 5,\n *      \"c\": 6\n *    },\n *    {\n *      \"a\": 7,\n *      \"b\": 8,\n *      \"c\": 9\n *    }\n * ];\n */\nfunction FlatJSON (arr, schema) {\n    if (!Array.isArray(schema)) {\n        throw new Error('Schema missing or is in an unsupported format');\n    }\n\n    const header = {};\n    let i = 0;\n    let insertionIndex;\n    const columns = [];\n    const push = columnMajor(columns);\n    const schemaFieldsName = schema.map(unitSchema => unitSchema.name);\n\n    arr.forEach((item) => {\n        const fields = [];\n        schemaFieldsName.forEach((unitSchema) => {\n            if (unitSchema in header) {\n                insertionIndex = header[unitSchema];\n            } else {\n                header[unitSchema] = i++;\n                insertionIndex = i - 1;\n            }\n            fields[insertionIndex] = item[unitSchema];\n        });\n        push(...fields);\n    });\n\n    return [Object.keys(header), columns];\n}\n\nexport default FlatJSON;\n","import DataConverter from '../model/dataConverter';\nimport FlatJSON from '../utils/flat-json';\nimport DataFormat from '../../enums/data-format';\n\nexport default class JSONConverter extends DataConverter {\n    constructor() {\n        super(DataFormat.FLAT_JSON);\n    }\n\n    convert(data, schema, options) {\n        return FlatJSON(data, schema, options);\n    }\n}\n","import DataConverter from '../model/dataConverter';\nimport DSVArr from '../utils/dsv-arr';\nimport DataFormat from '../../enums/data-format';\n\nexport default class DSVArrayConverter extends DataConverter {\n    constructor() {\n        super(DataFormat.DSV_ARR);\n    }\n\n    convert(data, schema, options) {\n        return DSVArr(data, schema, options);\n    }\n}\n","import DataConverter from '../model/dataConverter';\nimport AUTO from '../utils/auto-resolver';\nimport DataFormat from '../../enums/data-format';\n\nexport default class AutoDataConverter extends DataConverter {\n    constructor() {\n        super(DataFormat.AUTO);\n    }\n\n    convert(data, schema, options) {\n        return AUTO(data, schema, options);\n    }\n}\n","import FlatJSON from './flat-json';\nimport DSVArr from './dsv-arr';\nimport DSVStr from './dsv-str';\nimport { detectDataFormat } from '../../utils';\n\n/**\n * Parses the input data and detect the format automatically.\n *\n * @param {string|Array} data - The input data.\n * @param {Object} options - An optional config specific to data format.\n * @return {Array.<Object>} Returns an array of headers and column major data.\n */\nfunction Auto (data, schema, options) {\n    const converters = { FlatJSON, DSVStr, DSVArr };\n    const dataFormat = detectDataFormat(data);\n\n    if (!dataFormat) {\n        throw new Error('Couldn\\'t detect the data format');\n    }\n\n    return converters[dataFormat](data, schema, options);\n}\n\nexport default Auto;\n","import DataConverter from './model/dataConverter';\nimport { DSVStringConverter, DSVArrayConverter, JSONConverter, AutoDataConverter } from './defaultConverters';\n\nclass DataConverterStore {\n    constructor() {\n        this.store = new Map();\n        this.converters(this._getDefaultConverters());\n    }\n\n    _getDefaultConverters() {\n        return [\n            new DSVStringConverter(),\n            new DSVArrayConverter(),\n            new JSONConverter(),\n            new AutoDataConverter()\n        ];\n    }\n\n    /**\n     * Sets the given converters in the store and returns the store\n     * @param  {Array<DataConverter>} converters : contains array of converter instance\n     * @return { Map<String,DataConverter> }\n     */\n    converters(converters = []) {\n        converters.forEach(converter => this.store.set(converter.type, converter));\n        return this.store;\n    }\n\n    /**\n     * Registers a Converter of type DataConverter\n     * @param {DataConverter} converter : converter Instance\n     * @returns self\n     */\n    register(converter) {\n        if (converter instanceof DataConverter) {\n            this.store.set(converter.type, converter);\n            return this;\n        }\n        return null;\n    }\n\n    /**\n     * Rempves a converter from store\n     * @param {DataConverter} converter : converter Instance\n     * @returns self\n     */\n\n    unregister(converter) {\n        this.store.delete(converter.type);\n        return this;\n    }\n\n    get(name) {\n        if (this.store.has(name)) {\n            return this.store.get(name);\n        }\n        return null;\n    }\n\n}\n\nconst converterStore = (function () {\n    let store = null;\n\n    function getStore () {\n        store = new DataConverterStore();\n        return store;\n    }\n    return store || getStore();\n}());\n\nexport default converterStore;\n","import { FieldType, FilteringMode, DimensionSubtype, MeasureSubtype, DataFormat } from './enums';\nimport fieldStore from './field-store';\nimport Value from './value';\nimport {\n    rowDiffsetIterator\n} from './operator';\nimport { DM_DERIVATIVES, LOGICAL_OPERATORS, ROW_ID } from './constants';\nimport { createFields, createUnitFieldFromPartial } from './field-creator';\nimport defaultConfig from './default-config';\nimport { converterStore } from './converter';\nimport { fieldRegistry } from './fields';\nimport { extend2, detectDataFormat } from './utils';\n\n/**\n * Prepares the selection data.\n */\nfunction prepareSelectionData (fields, formattedData, rawData, i) {\n    const resp = {};\n\n    for (const [key, field] of fields.entries()) {\n        resp[field.name()] = new Value(formattedData[key][i], rawData[key][i], field);\n    }\n    return resp;\n}\n\nexport function prepareJoinData (fields) {\n    const resp = {};\n\n    for (const key in fields) {\n        resp[key] = new Value(fields[key].formattedValue, fields[key].rawValue, key);\n    }\n    return resp;\n}\n\nexport const updateFields = ([rowDiffset, colIdentifier], partialFieldspace, fieldStoreName) => {\n    let collID = colIdentifier.length ? colIdentifier.split(',') : [];\n    let partialFieldMap = partialFieldspace.fieldsObj();\n    let newFields = collID.map(coll => createUnitFieldFromPartial(partialFieldMap[coll].partialField, rowDiffset));\n    return fieldStore.createNamespace(newFields, fieldStoreName);\n};\n\nexport const persistCurrentDerivation = (model, operation, config = {}, criteriaFn) => {\n    if (operation === DM_DERIVATIVES.COMPOSE) {\n        model._derivation.length = 0;\n        model._derivation.push(...criteriaFn);\n    } else {\n        model._derivation.push({\n            op: operation,\n            meta: config,\n            criteria: criteriaFn\n        });\n    }\n};\nexport const persistAncestorDerivation = (sourceDm, newDm) => {\n    newDm._ancestorDerivation.push(...sourceDm._ancestorDerivation, ...sourceDm._derivation);\n};\n\nexport const persistDerivations = (sourceDm, model, operation, config = {}, criteriaFn) => {\n    persistCurrentDerivation(model, operation, config, criteriaFn);\n    persistAncestorDerivation(sourceDm, model);\n};\n\nconst selectModeMap = {\n    [FilteringMode.NORMAL]: {\n        diffIndex: ['rowDiffset'],\n        calcDiff: [true, false]\n    },\n    [FilteringMode.INVERSE]: {\n        diffIndex: ['rejectRowDiffset'],\n        calcDiff: [false, true]\n    },\n    [FilteringMode.ALL]: {\n        diffIndex: ['rowDiffset', 'rejectRowDiffset'],\n        calcDiff: [true, true]\n    }\n};\n\nconst generateRowDiffset = (rowDiffset, i, lastInsertedValue) => {\n    if (lastInsertedValue !== -1 && i === (lastInsertedValue + 1)) {\n        const li = rowDiffset.length - 1;\n\n        rowDiffset[li] = `${rowDiffset[li].split('-')[0]}-${i}`;\n    } else {\n        rowDiffset.push(`${i}`);\n    }\n};\n\nexport const selectRowDiffsetIterator = (rowDiffset, checker, mode) => {\n    let lastInsertedValueSel = -1;\n    let lastInsertedValueRej = -1;\n    const newRowDiffSet = [];\n    const rejRowDiffSet = [];\n\n    const [shouldSelect, shouldReject] = selectModeMap[mode].calcDiff;\n\n    rowDiffsetIterator(rowDiffset, (i) => {\n        const checkerResult = checker(i);\n        checkerResult && shouldSelect && generateRowDiffset(newRowDiffSet, i, lastInsertedValueSel);\n        !checkerResult && shouldReject && generateRowDiffset(rejRowDiffSet, i, lastInsertedValueRej);\n    });\n    return {\n        rowDiffset: newRowDiffSet.join(','),\n        rejectRowDiffset: rejRowDiffSet.join(',')\n    };\n};\n\n\nexport const rowSplitDiffsetIterator = (rowDiffset, checker, mode, dimensionArr, fieldStoreObj) => {\n    let lastInsertedValue = {};\n    const splitRowDiffset = {};\n    const dimensionMap = {};\n\n    rowDiffsetIterator(rowDiffset, (i) => {\n        if (checker(i)) {\n            let hash = '';\n\n            let dimensionSet = { keys: {} };\n\n            dimensionArr.forEach((_) => {\n                const data = fieldStoreObj[_].partialField.data[i];\n                hash = `${hash}-${data}`;\n                dimensionSet.keys[_] = data;\n            });\n\n            if (splitRowDiffset[hash] === undefined) {\n                splitRowDiffset[hash] = [];\n                lastInsertedValue[hash] = -1;\n                dimensionMap[hash] = dimensionSet;\n            }\n\n            generateRowDiffset(splitRowDiffset[hash], i, lastInsertedValue[hash]);\n            lastInsertedValue[hash] = i;\n        }\n    });\n\n    return {\n        splitRowDiffset,\n        dimensionMap\n    };\n};\n\n\nexport const selectHelper = (clonedDm, selectFn, config, sourceDm, iterator) => {\n    let cachedStore = {};\n    let cloneProvider = () => sourceDm.detachedRoot();\n    const { mode } = config;\n    const rowDiffset = clonedDm._rowDiffset;\n    const cachedValueObjects = clonedDm._partialFieldspace._cachedValueObjects;\n\n    const selectorHelperFn = index => selectFn(\n        cachedValueObjects[index],\n        index,\n        cloneProvider,\n        cachedStore\n    );\n\n    return iterator(rowDiffset, selectorHelperFn, mode);\n};\n\nexport const cloneWithAllFields = (model) => {\n    const clonedDm = model.clone(false);\n    const partialFieldspace = model.getPartialFieldspace();\n    clonedDm._colIdentifier = partialFieldspace.fields.map(f => f.name()).join(',');\n\n    // flush out cached namespace values on addition of new fields\n    partialFieldspace._cachedFieldsObj = null;\n    partialFieldspace._cachedDimension = null;\n    partialFieldspace._cachedMeasure = null;\n    clonedDm.__calculateFieldspace().calculateFieldsConfig();\n\n    return clonedDm;\n};\n\nconst getKey = (arr, data, fn, rowId) => {\n    let key = fn(arr, data, 0, rowId);\n\n    for (let i = 1, len = arr.length; i < len; i++) {\n        key = `${key},${fn(arr, data, i, rowId)}`;\n    }\n    return key;\n};\n\nconst keyFn = (arr, fields, idx, rowId) => {\n    const field = arr[idx];\n    const val = field === ROW_ID ? rowId : fields[field].internalValue;\n    return val;\n};\n\nconst domainChecker = (val, domain) => {\n    const domainArr = domain[0] instanceof Array ? domain : [domain];\n    return domainArr.some(dom => val >= dom[0] && val <= dom[1]);\n};\n\nconst boundsChecker = {\n    [MeasureSubtype.CONTINUOUS]: domainChecker,\n    [DimensionSubtype.TEMPORAL]: domainChecker\n};\n\nconst isWithinDomain = (value, domain, fieldType) => boundsChecker[fieldType](value, domain);\n\nexport const filterPropagationModel = (model, propModels, config = {}) => {\n    let fns = [];\n    const operation = config.operation || LOGICAL_OPERATORS.AND;\n    const { filterByDim = true, filterByMeasure = false, clone = true } = config;\n    const clonedModel = clone ? cloneWithAllFields(model) : model;\n    const modelFieldsConfig = clonedModel.getFieldsConfig();\n    const uids = model.getPartialFieldspace().idField.data();\n\n    if (!propModels.length) {\n        fns = [() => false];\n    } else {\n        fns = propModels.map(propModel => (({ criteria = {} }) => {\n            const { identifiers = [[], []], range } = criteria;\n            let [fieldNames = [], values = []] = identifiers;\n            const indices = fieldNames.reduce((map, name, i) => {\n                map[name] = i;\n                return map;\n            }, {});\n            fieldNames = fieldNames.filter(field => (field in modelFieldsConfig &&\n                modelFieldsConfig[field].def.type === FieldType.DIMENSION) || field === ROW_ID);\n            const dLen = fieldNames.length;\n            const valuesMap = {};\n\n            if (dLen) {\n                for (let i = 1, len = identifiers.length; i < len; i++) {\n                    const row = identifiers[i];\n                    let key;\n                    if (ROW_ID in indices) {\n                        const ids = row[indices[ROW_ID]];\n                        if (ids) {\n                            ids.values().forEach((id) => {\n                                key = `${fieldNames.map((field) => {\n                                    const idx = indices[field];\n                                    return field === ROW_ID ? id : row[idx];\n                                })}`;\n                                valuesMap[key] = 1;\n                            });\n                        }\n                    } else {\n                        key = `${fieldNames.map((field) => {\n                            const idx = indices[field];\n                            return row[idx];\n                        })}`;\n                        valuesMap[key] = 1;\n                    }\n                }\n            }\n            let rangeKeys = Object.keys(range || {}).filter(field => field in modelFieldsConfig);\n            const hasData = values.length || rangeKeys.length;\n\n            if (!filterByMeasure) {\n                rangeKeys = rangeKeys.filter(field => modelFieldsConfig[field].def.type !== FieldType.MEASURE);\n            }\n\n            if (!filterByDim) {\n                rangeKeys = rangeKeys.filter(field => modelFieldsConfig[field].def.type !== FieldType.DIMENSION);\n            }\n\n            return hasData ? (fields, i) => {\n                let present = true;\n                if (filterByDim) {\n                    present = dLen ? valuesMap[getKey(fieldNames, fields, keyFn, uids[i])] : true;\n                }\n\n                return rangeKeys.every((field) => {\n                    const val = fields[field].internalValue;\n                    return isWithinDomain(val, range[field], modelFieldsConfig[field].def.subtype);\n                }) && present;\n            } : () => false;\n        })(propModel));\n    }\n\n    let filteredModel;\n    if (operation === LOGICAL_OPERATORS.AND) {\n        filteredModel = clonedModel.select((fields, i) => fns.every(fn => fn(fields, i)), {\n            saveChild: false\n        });\n    } else {\n        filteredModel = clonedModel.select((fields, i) => fns.some(fn => fn(fields, i)), {\n            saveChild: false\n        });\n    }\n\n    return filteredModel;\n};\n\n\nexport const splitWithSelect = (sourceDm, dimensionArr, reducerFn = val => val, config) => {\n    const {\n        saveChild,\n    } = config;\n    const fieldStoreObj = sourceDm.getFieldspace().fieldsObj();\n\n    const {\n        splitRowDiffset,\n        dimensionMap\n    } = selectHelper(\n        sourceDm.clone(saveChild),\n        reducerFn,\n        config,\n        sourceDm,\n        (...params) => rowSplitDiffsetIterator(...params, dimensionArr, fieldStoreObj)\n        );\n\n    const clonedDMs = [];\n    Object.keys(splitRowDiffset).sort().forEach((e) => {\n        if (splitRowDiffset[e]) {\n            const cloned = sourceDm.clone(saveChild);\n            const derivation = dimensionMap[e];\n            cloned._rowDiffset = splitRowDiffset[e].join(',');\n            cloned.__calculateFieldspace().calculateFieldsConfig();\n\n            const derivationFormula = fields => dimensionArr.every(_ => fields[_].internalValue === derivation.keys[_]);\n            // Store reference to child model and selector function\n            if (saveChild) {\n                persistDerivations(sourceDm, cloned, DM_DERIVATIVES.SELECT, config, derivationFormula);\n            }\n            cloned._derivation[cloned._derivation.length - 1].meta = dimensionMap[e];\n\n            clonedDMs.push(cloned);\n        }\n    });\n\n\n    return clonedDMs;\n};\nexport const addDiffsetToClonedDm = (clonedDm, rowDiffset, sourceDm, selectConfig, selectFn) => {\n    clonedDm._rowDiffset = rowDiffset;\n    clonedDm.__calculateFieldspace().calculateFieldsConfig();\n    persistDerivations(\n        sourceDm,\n        clonedDm,\n        DM_DERIVATIVES.SELECT,\n         { config: selectConfig },\n          selectFn\n    );\n};\n\n\nexport const cloneWithSelect = (sourceDm, selectFn, selectConfig, cloneConfig) => {\n    let extraCloneDm = {};\n\n    let { mode } = selectConfig;\n\n    const cloned = sourceDm.clone(cloneConfig.saveChild);\n    const setOfRowDiffsets = selectHelper(\n        cloned,\n        selectFn,\n        selectConfig,\n        sourceDm,\n        selectRowDiffsetIterator\n    );\n    const diffIndex = selectModeMap[mode].diffIndex;\n\n    addDiffsetToClonedDm(cloned, setOfRowDiffsets[diffIndex[0]], sourceDm, selectConfig, selectFn);\n\n    if (diffIndex.length > 1) {\n        extraCloneDm = sourceDm.clone(cloneConfig.saveChild);\n        addDiffsetToClonedDm(extraCloneDm, setOfRowDiffsets[diffIndex[1]], sourceDm, selectConfig, selectFn);\n        return [cloned, extraCloneDm];\n    }\n\n    return cloned;\n};\n\nexport const cloneWithProject = (sourceDm, projField, config, allFields) => {\n    const cloned = sourceDm.clone(config.saveChild);\n    let projectionSet = projField;\n    if (config.mode === FilteringMode.INVERSE) {\n        projectionSet = allFields.filter(fieldName => projField.indexOf(fieldName) === -1);\n    }\n    // cloned._colIdentifier = sourceDm._colIdentifier.split(',')\n    //                         .filter(coll => projectionSet.indexOf(coll) !== -1).join();\n    cloned._colIdentifier = projectionSet.join(',');\n    cloned.__calculateFieldspace().calculateFieldsConfig();\n\n    persistDerivations(\n        sourceDm,\n        cloned,\n        DM_DERIVATIVES.PROJECT,\n        { projField, config, actualProjField: projectionSet },\n        null\n    );\n\n    return cloned;\n};\n\n\nexport const splitWithProject = (sourceDm, projFieldSet, config, allFields) =>\n    projFieldSet.map(projFields =>\n        cloneWithProject(sourceDm, projFields, config, allFields));\n\nexport const sanitizeUnitSchema = (unitSchema) => {\n    // Do deep clone of the unit schema as the user might change it later.\n    unitSchema = extend2({}, unitSchema);\n    if (!unitSchema.type) {\n        unitSchema.type = FieldType.DIMENSION;\n    }\n\n    if (!unitSchema.subtype) {\n        switch (unitSchema.type) {\n        case FieldType.MEASURE:\n            unitSchema.subtype = MeasureSubtype.CONTINUOUS;\n            break;\n        default:\n        case FieldType.DIMENSION:\n            unitSchema.subtype = DimensionSubtype.CATEGORICAL;\n            break;\n        }\n    }\n\n    return unitSchema;\n};\n\nexport const validateUnitSchema = (unitSchema) => {\n    const { type, subtype, name } = unitSchema;\n    if (type === FieldType.DIMENSION || type === FieldType.MEASURE) {\n        if (!fieldRegistry.has(subtype)) {\n            throw new Error(`DataModel doesn't support measure field subtype ${subtype} used for ${name} field`);\n        }\n    } else {\n        throw new Error(`DataModel doesn't support field type ${type} used for ${name} field`);\n    }\n};\n\nexport const sanitizeAndValidateSchema = schema => schema.map((unitSchema) => {\n    unitSchema = sanitizeUnitSchema(unitSchema);\n    validateUnitSchema(unitSchema);\n    return unitSchema;\n});\n\nexport const resolveFieldName = (schema, dataHeader) => {\n    schema.forEach((unitSchema) => {\n        const fieldNameAs = unitSchema.as;\n        if (!fieldNameAs) { return; }\n\n        const idx = dataHeader.indexOf(unitSchema.name);\n        dataHeader[idx] = fieldNameAs;\n        unitSchema.name = fieldNameAs;\n        delete unitSchema.as;\n    });\n};\n\nexport const updateData = (relation, data, schema, options) => {\n    schema = sanitizeAndValidateSchema(schema);\n    options = Object.assign(Object.assign({}, defaultConfig), options);\n    const converter = converterStore.get(options.dataFormat);\n\n\n    if (!converter) {\n        throw new Error(`No converter function found for ${options.dataFormat} format`);\n    }\n\n    let [header, formattedData] = converter.convert(data, schema, options);\n    resolveFieldName(schema, header);\n\n    const idIndex = schema.findIndex(field => field.subtype === DimensionSubtype.ID);\n    let idData;\n\n    if (idIndex !== -1) {\n        idData = formattedData[idIndex] || [];\n        formattedData = formattedData.filter((d, i) => i !== idIndex);\n        header = header.filter((d, i) => i !== idIndex);\n        schema = schema.filter(field => field.subtype !== DimensionSubtype.ID);\n    } else {\n        const rowLength = (formattedData[0] && formattedData[0].length) || 0;\n        idData = new Array(rowLength).fill().map((d, i) => i);\n    }\n\n    const fieldArr = createFields(formattedData, schema, header);\n\n    const idField = createFields([idData], [{\n        name: ROW_ID,\n        type: 'dimension',\n        subtype: DimensionSubtype.ID\n    }], [ROW_ID])[0];\n\n\n    // This will create a new fieldStore with the fields\n    const nameSpace = fieldStore.createNamespace(fieldArr, options.name, idField);\n    relation._partialFieldspace = nameSpace;\n\n    // If data is provided create the default colIdentifier and rowDiffset\n    relation._rowDiffset = formattedData.length && formattedData[0].length ? `0-${formattedData[0].length - 1}` : '';\n\n    // This stores the value objects which is passed to the filter method when selection operation is done.\n    const valueObjects = [];\n    const { fields } = nameSpace;\n    const rawFieldsData = fields.map(field => field.data());\n    const formattedFieldsData = fields.map(field => field.formattedData());\n    const idFieldData = idField.data();\n    rowDiffsetIterator(relation._rowDiffset, (i) => {\n        valueObjects[i] = prepareSelectionData(fields, formattedFieldsData, rawFieldsData, i);\n        valueObjects[i][ROW_ID] = new Value(idFieldData[i], idFieldData[i], idField);\n    });\n    nameSpace._cachedValueObjects = valueObjects;\n    relation._colIdentifier = (schema.map(_ => _.name)).join();\n    relation._dataFormat = options.dataFormat === DataFormat.AUTO ? detectDataFormat(data) : options.dataFormat;\n    return relation;\n};\n\nexport const fieldInSchema = (schema, field) => {\n    let i = 0;\n\n    for (; i < schema.length; ++i) {\n        if (field === schema[i].name) {\n            return {\n                name: field,\n                type: schema[i].subtype || schema[i].type,\n                index: i,\n            };\n        }\n    }\n    return null;\n};\n\nexport const getDerivationArguments = (derivation) => {\n    let params = [];\n    let operation;\n    operation = derivation.op;\n    switch (operation) {\n    case DM_DERIVATIVES.SELECT:\n        params = [derivation.criteria];\n        break;\n    case DM_DERIVATIVES.PROJECT:\n        params = [derivation.meta.actualProjField];\n        break;\n    case DM_DERIVATIVES.SORT:\n        params = [derivation.criteria];\n        break;\n    case DM_DERIVATIVES.GROUPBY:\n        operation = 'groupBy';\n        params = [derivation.meta.groupByString.split(','), derivation.criteria];\n        break;\n    default:\n        operation = null;\n    }\n\n    return {\n        operation,\n        params\n    };\n};\n\nconst applyExistingOperationOnModel = (propModel, dataModel) => {\n    const derivations = dataModel.getDerivations();\n    let selectionModel = propModel;\n\n    derivations.forEach((derivation) => {\n        if (!derivation) {\n            return;\n        }\n\n        const { operation, params } = getDerivationArguments(derivation);\n        if (operation) {\n            selectionModel = selectionModel[operation](...params, {\n                saveChild: false\n            });\n        }\n    });\n\n    return selectionModel;\n};\n\nconst getFilteredModel = (propModel, path) => {\n    for (let i = 0, len = path.length; i < len; i++) {\n        const model = path[i];\n        propModel = applyExistingOperationOnModel(propModel, model);\n    }\n    return propModel;\n};\n\nconst propagateIdentifiers = (dataModel, propModel, config = {}, propModelInf = {}) => {\n    const excludeModels = propModelInf.excludeModels || [];\n    const criterias = propModelInf.criteria;\n\n    const propagate = excludeModels.length ? excludeModels.indexOf(dataModel) === -1 : true;\n\n    propagate && dataModel.handlePropagation(propModel, config);\n\n    const children = dataModel._children;\n    children.forEach((child) => {\n        const matchingCriteria = criterias.filter(val => val.groupedModel === child);\n        let selectionModel = applyExistingOperationOnModel(propModel, child);\n\n        if (matchingCriteria.length) {\n            selectionModel = filterPropagationModel(selectionModel, matchingCriteria, {\n                filterByDim: false,\n                filterByMeasure: true,\n                clone: false\n            });\n        }\n        propagateIdentifiers(child, selectionModel, config, propModelInf);\n    });\n};\n\nexport const getRootGroupByModel = (model) => {\n    while (model._parent && model._derivation.find(d => d.op !== DM_DERIVATIVES.GROUPBY)) {\n        model = model._parent;\n    }\n    return model;\n};\n\nexport const getRootDataModel = (model) => {\n    while (model._parent) {\n        model = model._parent;\n    }\n    return model;\n};\n\nexport const getPathToRootModel = (model, path = []) => {\n    while (model._parent) {\n        path.push(model);\n        model = model._parent;\n    }\n    return path;\n};\n\nexport const propagateToAllDataModels = (identifiers, rootModels, propagationInf, config) => {\n    let criteria;\n    const { propagationNameSpace, propagateToSource } = propagationInf;\n    const propagationSourceId = propagationInf.sourceId;\n    const filterFn = (entry) => {\n        const filter = config.filterFn || (() => true);\n        return filter(entry, config);\n    };\n\n    const addGroupedModel = ({ config: conf, model }) => {\n        const { criteria: crit } = conf;\n        let groupedModel;\n\n        if (crit !== null && crit.fields.some(d => d.type === FieldType.MEASURE)) {\n            groupedModel = getRootGroupByModel(model);\n        }\n        return Object.assign({}, conf, {\n            groupedModel\n        });\n    };\n\n    let criterias = [];\n\n    if (identifiers === null) {\n        criterias = [{\n            criteria: []\n        }];\n        criteria = [];\n    } else {\n        let actionCriterias = Object.values(propagationNameSpace.mutableActions);\n        if (propagateToSource !== false) {\n            actionCriterias = actionCriterias.filter(d => d.config.sourceId !== propagationSourceId);\n        }\n\n        const filteredCriteria = actionCriterias.filter(filterFn);\n\n        const excludeModels = [];\n\n        if (propagateToSource !== false) {\n            const sourceActionCriterias = Object.values(propagationNameSpace.mutableActions);\n\n            sourceActionCriterias.forEach((actionInf) => {\n                const actionConf = actionInf.config;\n                if (actionConf.applyOnSource === false && actionConf.action === config.action &&\n                        actionConf.sourceId !== propagationSourceId) {\n                    excludeModels.push(actionInf.model);\n                    criteria = sourceActionCriterias.filter(d => d !== actionInf).map(addGroupedModel);\n                    criteria.length && criterias.push({\n                        criteria,\n                        models: actionInf.model,\n                        path: getPathToRootModel(actionInf.model)\n                    });\n                }\n            });\n        }\n\n\n        criteria = [].concat(...[...filteredCriteria.map(addGroupedModel), {\n            criteria: identifiers,\n            groupedModel: identifiers !== null && identifiers.fields.some(d => d.type === FieldType.MEASURE) ?\n                getRootGroupByModel(propagationInf.propagationSource) : null\n        }]).filter(d => d !== null);\n        criterias.push({\n            criteria,\n            excludeModels: [...excludeModels, ...config.excludeModels || []]\n        });\n    }\n\n    const rootModel = rootModels.model;\n\n    const propConfig = Object.assign({\n        sourceIdentifiers: identifiers,\n        propagationSourceId\n    }, config);\n\n    criterias.forEach((inf) => {\n        const { criteria: crit } = inf;\n        const propagationModel = filterPropagationModel(rootModel, crit, {\n            filterByMeasure: !!crit.find(d => d.groupedModel === rootModel)\n        });\n        const path = inf.path;\n\n        if (path) {\n            const filteredModel = getFilteredModel(propagationModel, path.reverse());\n            inf.models.handlePropagation(filteredModel, propConfig);\n        } else {\n            propagateIdentifiers(rootModel, propagationModel, propConfig, {\n                excludeModels: inf.excludeModels,\n                criteria: crit\n            });\n        }\n    });\n};\n\nexport const propagateImmutableActions = (propagationNameSpace, rootModel, propagationInf) => {\n    const immutableActions = propagationNameSpace.immutableActions;\n\n    for (const action in immutableActions) {\n        const actionInf = immutableActions[action];\n        const actionConf = actionInf.config;\n        const propagationSourceId = propagationInf.config.sourceId;\n        const filterImmutableAction = propagationInf.propConfig.filterImmutableAction ?\n            propagationInf.propConfig.filterImmutableAction(actionConf, propagationInf.config) : true;\n        if (actionConf.sourceId !== propagationSourceId && filterImmutableAction) {\n            const criteriaModel = actionConf.criteria;\n            propagateToAllDataModels(criteriaModel, {\n                model: rootModel,\n                groupByModel: getRootGroupByModel(actionInf.model)\n            }, {\n                propagationNameSpace,\n                propagateToSource: false,\n                sourceId: propagationSourceId,\n                propagationSource: actionInf.model\n            }, actionConf);\n        }\n    }\n};\n\nexport const addToPropNamespace = (propagationNameSpace, config = {}, model) => {\n    let sourceNamespace;\n    const isMutableAction = config.isMutableAction;\n    const criteria = config.criteria;\n    const key = `${config.action}-${config.sourceId}`;\n\n    if (isMutableAction) {\n        sourceNamespace = propagationNameSpace.mutableActions;\n    } else {\n        sourceNamespace = propagationNameSpace.immutableActions;\n    }\n\n    if (criteria === null) {\n        delete sourceNamespace[key];\n    } else {\n        sourceNamespace[key] = {\n            model,\n            config\n        };\n    }\n\n    return this;\n};\n\n\nexport const getNormalizedProFields = (projField, allFields, fieldConfig) => {\n    const normalizedProjField = projField.reduce((acc, field) => {\n        if (field.constructor.name === 'RegExp') {\n            acc.push(...allFields.filter(fieldName => fieldName.search(field) !== -1));\n        } else if (field in fieldConfig) {\n            acc.push(field);\n        }\n        return acc;\n    }, []);\n    return Array.from(new Set(normalizedProjField)).map(field => field.trim());\n};\n\n/**\n * Get the numberFormatted value if numberFormat present,\n * else returns the supplied value.\n * @param {Object} field Field Instance\n * @param {Number|String} value\n * @return {Number|String}\n */\nexport const getNumberFormattedVal = (field, value) => {\n    if (field.numberFormat) {\n        return field.numberFormat()(value);\n    }\n    return value;\n};\n","import { FilteringMode } from './enums';\nimport { getUniqueId } from './utils';\nimport {\n    updateFields,\n    cloneWithSelect,\n    cloneWithProject,\n    updateData,\n    getNormalizedProFields\n} from './helper';\nimport { crossProduct, difference, naturalJoinFilter, union } from './operator';\n\n/**\n * Relation provides the definitions of basic operators of relational algebra like *selection*, *projection*, *union*,\n * *difference* etc.\n *\n * It is extended by {@link DataModel} to inherit the functionalities of relational algebra concept.\n *\n * @class\n * @public\n * @module Relation\n * @namespace DataModel\n */\nclass Relation {\n\n    /**\n     * Creates a new Relation instance by providing underlying data and schema.\n     *\n     * @private\n     *\n     * @param {Object | string | Relation} data - The input tabular data in dsv or json format or\n     * an existing Relation instance object.\n     * @param {Array} schema - An array of data schema.\n     * @param {Object} [options] - The optional options.\n     */\n    constructor (...params) {\n        let source;\n\n        this._parent = null;\n        this._derivation = [];\n        this._ancestorDerivation = [];\n        this._children = [];\n\n        if (params.length === 1 && ((source = params[0]) instanceof Relation)) {\n            // parent datamodel was passed as part of source\n            this._colIdentifier = source._colIdentifier;\n            this._rowDiffset = source._rowDiffset;\n            this._dataFormat = source._dataFormat;\n            this._parent = source;\n            this._partialFieldspace = this._parent._partialFieldspace;\n            this._fieldStoreName = getUniqueId();\n            this.__calculateFieldspace().calculateFieldsConfig();\n        } else {\n            updateData(this, ...params);\n            this._fieldStoreName = this._partialFieldspace.name;\n            this.__calculateFieldspace().calculateFieldsConfig();\n            this._propagationNameSpace = {\n                mutableActions: {},\n                immutableActions: {}\n            };\n        }\n    }\n\n    /**\n     * Retrieves the {@link Schema | schema} details for every {@link Field | field} as an array.\n     *\n     * @public\n     *\n     * @return {Array.<Schema>} Array of fields schema.\n     *      ```\n     *      [\n     *          { name: 'Name', type: 'dimension' },\n     *          { name: 'Miles_per_Gallon', type: 'measure', numberFormat: (val) => `${val} miles / gallon` },\n     *          { name: 'Cylinder', type: 'dimension' },\n     *          { name: 'Displacement', type: 'measure', defAggFn: 'max' },\n     *          { name: 'HorsePower', type: 'measure', defAggFn: 'max' },\n     *          { name: 'Weight_in_lbs', type: 'measure', defAggFn: 'avg',  },\n     *          { name: 'Acceleration', type: 'measure', defAggFn: 'avg' },\n     *          { name: 'Year', type: 'dimension', subtype: 'datetime', format: '%Y' },\n     *          { name: 'Origin' }\n     *      ]\n     *      ```\n     */\n    getSchema () {\n        return this.getFieldspace().fields.map(d => d.schema());\n    }\n\n    /**\n     * Returns the name of the {@link DataModel} instance. If no name was specified during {@link DataModel}\n     * initialization, then it returns a auto-generated name.\n     *\n     * @public\n     *\n     * @return {string} Name of the DataModel instance.\n     */\n    getName() {\n        return this._fieldStoreName;\n    }\n\n    getFieldspace () {\n        return this._fieldspace;\n    }\n\n    __calculateFieldspace () {\n        this._fieldspace = updateFields([this._rowDiffset, this._colIdentifier],\n             this.getPartialFieldspace(), this._fieldStoreName);\n        return this;\n    }\n\n    getPartialFieldspace () {\n        return this._partialFieldspace;\n    }\n\n    /**\n     * Performs {@link link_of_cross_product | cross-product} between two {@link DataModel} instances and returns a\n     * new {@link DataModel} instance containing the results. This operation is also called theta join.\n     *\n     * Cross product takes two set and create one set where each value of one set is paired with each value of another\n     * set.\n     *\n     * This method takes an optional predicate which filters the generated result rows. If the predicate returns true\n     * the combined row is included in the resulatant table.\n     *\n     * @example\n     *  let originDM = dm.project(['Origin','Origin_Formal_Name']);\n     *  let carsDM = dm.project(['Name','Miles_per_Gallon','Origin'])\n     *\n     *  console.log(carsDM.join(originDM)));\n     *\n     *  console.log(carsDM.join(originDM,\n     *      obj => obj.[originDM.getName()].Origin === obj.[carsDM.getName()].Origin));\n     *\n     * @text\n     * This is chained version of `join` operator. `join` can also be used as\n     * {@link link_to_join_op | functional operator}.\n     *\n     * @public\n     *\n     * @param {DataModel} joinWith - The DataModel to be joined with the current instance DataModel.\n     * @param {SelectionPredicate} filterFn - The predicate function that will filter the result of the crossProduct.\n     *\n     * @return {DataModel} New DataModel instance created after joining.\n     */\n    join (joinWith, filterFn) {\n        return crossProduct(this, joinWith, filterFn);\n    }\n\n    /**\n     * {@link natural_join | Natural join} is a special kind of cross-product join where filtering of rows are performed\n     * internally by resolving common fields are from both table and the rows with common value are included.\n     *\n     * @example\n     *  let originDM = dm.project(['Origin','Origin_Formal_Name']);\n     *  let carsDM = dm.project(['Name','Miles_per_Gallon','Origin'])\n     *\n     *  console.log(carsDM.naturalJoin(originDM));\n     *\n     * @text\n     * This is chained version of `naturalJoin` operator. `naturalJoin` can also be used as\n     * {@link link_to_join_op | functional operator}.\n     *\n     * @public\n     *\n     * @param {DataModel} joinWith - The DataModel with which the current instance of DataModel on which the method is\n     *      called will be joined.\n     * @return {DataModel} New DataModel instance created after joining.\n     */\n    naturalJoin (joinWith) {\n        return crossProduct(this, joinWith, naturalJoinFilter(this, joinWith), true);\n    }\n\n    /**\n     * {@link link_to_union | Union} operation can be termed as vertical stacking of all rows from both the DataModel\n     * instances, provided that both of the {@link DataModel} instances should have same column names.\n     *\n     * @example\n     * console.log(EuropeanMakerDM.union(USAMakerDM));\n     *\n     * @text\n     * This is chained version of `naturalJoin` operator. `naturalJoin` can also be used as\n     * {@link link_to_join_op | functional operator}.\n     *\n     * @public\n     *\n     * @param {DataModel} unionWith - DataModel instance for which union has to be applied with the instance on which\n     *      the method is called\n     *\n     * @return {DataModel} New DataModel instance with the result of the operation\n     */\n    union (unionWith) {\n        return union(this, unionWith);\n    }\n\n    /**\n     * {@link link_to_difference | Difference } operation only include rows which are present in the datamodel on which\n     * it was called but not on the one passed as argument.\n     *\n     * @example\n     * console.log(highPowerDM.difference(highExpensiveDM));\n     *\n     * @text\n     * This is chained version of `naturalJoin` operator. `naturalJoin` can also be used as\n     * {@link link_to_join_op | functional operator}.\n     *\n     * @public\n     *\n     * @param {DataModel} differenceWith - DataModel instance for which difference has to be applied with the instance\n     *      on which the method is called\n     * @return {DataModel} New DataModel instance with the result of the operation\n     */\n    difference (differenceWith) {\n        return difference(this, differenceWith);\n    }\n\n    /**\n     * {@link link_to_selection | Selection} is a row filtering operation. It expects a predicate and an optional mode\n     * which control which all rows should be included in the resultant DataModel instance.\n     *\n     * {@link SelectionPredicate} is a function which returns a boolean value. For selection operation the selection\n     * function is called for each row of DataModel instance with the current row passed as argument.\n     *\n     * After executing {@link SelectionPredicate} the rows are labeled as either an entry of selection set or an entry\n     * of rejection set.\n     *\n     * {@link FilteringMode} operates on the selection and rejection set to determine which one would reflect in the\n     * resultant datamodel.\n     *\n     * @warning\n     * Selection and rejection set is only a logical idea for concept explanation purpose.\n     *\n     * @example\n     *  // with selection mode NORMAL:\n     *  const normDt = dt.select(fields => fields.Origin.value === \"USA\")\n     *  console.log(normDt));\n     *\n     * // with selection mode INVERSE:\n     * const inverDt = dt.select(fields => fields.Origin.value === \"USA\", { mode: DataModel.FilteringMode.INVERSE })\n     * console.log(inverDt);\n     *\n     * // with selection mode ALL:\n     * const dtArr = dt.select(fields => fields.Origin.value === \"USA\", { mode: DataModel.FilteringMode.ALL })\n     * // print the selected parts\n     * console.log(dtArr[0]);\n     * // print the inverted parts\n     * console.log(dtArr[1]);\n     *\n     * @text\n     * This is chained version of `select` operator. `select` can also be used as\n     * {@link link_to_join_op | functional operator}.\n     *\n     * @public\n     *\n     * @param {Function} selectFn - The predicate function which is called for each row with the current row.\n     * ```\n     *  function (row, i, cloneProvider, store)  { ... }\n     * ```\n     * @param {Object} config - The configuration object to control the inclusion exclusion of a row in resultant\n     * DataModel instance.\n     * @param {FilteringMode} [config.mode=FilteringMode.NORMAL] - The mode of the selection.\n     * @return {DataModel} Returns the new DataModel instance(s) after operation.\n     */\n    select (selectFn, config) {\n        const defConfig = {\n            mode: FilteringMode.NORMAL,\n            saveChild: true\n        };\n        config = Object.assign({}, defConfig, config);\n        config.mode = config.mode || defConfig.mode;\n\n        const cloneConfig = { saveChild: config.saveChild };\n        return cloneWithSelect(\n            this,\n            selectFn,\n            config,\n            cloneConfig\n        );\n    }\n\n    /**\n     * Retrieves a boolean value if the current {@link DataModel} instance has data.\n     *\n     * @example\n     * const schema = [\n     *    { name: 'CarName', type: 'dimension' },\n     *    { name: 'HorsePower', type: 'measure' },\n     *    { name: \"Origin\", type: 'dimension' }\n     * ];\n     * const data = [];\n     *\n     * const dt = new DataModel(data, schema);\n     * console.log(dt.isEmpty());\n     *\n     * @public\n     *\n     * @return {Boolean} True if the datamodel has no data, otherwise false.\n     */\n    isEmpty () {\n        return !this._rowDiffset.length || !this._colIdentifier.length;\n    }\n\n    /**\n     * Creates a clone from the current DataModel instance with child parent relationship.\n     *\n     * @private\n     * @param {boolean} [saveChild=true] - Whether the cloned instance would be recorded in the parent instance.\n     * @return {DataModel} - Returns the newly cloned DataModel instance.\n     */\n    clone (saveChild = true) {\n        const clonedDm = new this.constructor(this);\n        if (saveChild) {\n            clonedDm.setParent(this);\n        } else {\n            clonedDm.setParent(null);\n        }\n        return clonedDm;\n    }\n\n    /**\n     * {@link Projection} is filter column (field) operation. It expects list of fields' name and either include those\n     * or exclude those based on {@link FilteringMode} on the resultant variable.\n     *\n     * Projection expects array of fields name based on which it creates the selection and rejection set. All the field\n     * whose name is present in array goes in selection set and rest of the fields goes in rejection set.\n     *\n     * {@link FilteringMode} operates on the selection and rejection set to determine which one would reflect in the\n     * resulatant datamodel.\n     *\n     * @warning\n     * Selection and rejection set is only a logical idea for concept explanation purpose.\n     *\n     * @example\n     *  const dm = new DataModel(data, schema);\n     *\n     *  // with projection mode NORMAL:\n     *  const normDt = dt.project([\"Name\", \"HorsePower\"]);\n     *  console.log(normDt.getData());\n     *\n     *  // with projection mode INVERSE:\n     *  const inverDt = dt.project([\"Name\", \"HorsePower\"], { mode: DataModel.FilteringMode.INVERSE })\n     *  console.log(inverDt.getData());\n     *\n     *  // with selection mode ALL:\n     *  const dtArr = dt.project([\"Name\", \"HorsePower\"], { mode: DataModel.FilteringMode.ALL })\n     *  // print the normal parts\n     *  console.log(dtArr[0].getData());\n     *  // print the inverted parts\n     *  console.log(dtArr[1].getData());\n     *\n     * @text\n     * This is chained version of `select` operator. `select` can also be used as\n     * {@link link_to_join_op | functional operator}.\n     *\n     * @public\n     *\n     * @param {Array.<string | Regexp>} projField - An array of column names in string or regular expression.\n     * @param {Object} [config] - An optional config to control the creation of new DataModel\n     * @param {FilteringMode} [config.mode=FilteringMode.NORMAL] - Mode of the projection\n     *\n     * @return {DataModel} Returns the new DataModel instance after operation.\n     */\n    project (projField, config) {\n        const defConfig = {\n            mode: FilteringMode.NORMAL,\n            saveChild: true\n        };\n        config = Object.assign({}, defConfig, config);\n        const fieldConfig = this.getFieldsConfig();\n        const allFields = Object.keys(fieldConfig);\n        const { mode } = config;\n        const normalizedProjField = getNormalizedProFields(projField, allFields, fieldConfig);\n\n        let dataModel;\n\n        if (mode === FilteringMode.ALL) {\n            let projectionClone = cloneWithProject(this, normalizedProjField, {\n                mode: FilteringMode.NORMAL,\n                saveChild: config.saveChild\n            }, allFields);\n            let rejectionClone = cloneWithProject(this, normalizedProjField, {\n                mode: FilteringMode.INVERSE,\n                saveChild: config.saveChild\n            }, allFields);\n            dataModel = [projectionClone, rejectionClone];\n        } else {\n            let projectionClone = cloneWithProject(this, normalizedProjField, config, allFields);\n            dataModel = projectionClone;\n        }\n\n        return dataModel;\n    }\n\n    getFieldsConfig () {\n        return this._fieldConfig;\n    }\n\n    calculateFieldsConfig () {\n        this._fieldConfig = this._fieldspace.fields.reduce((acc, fieldObj, i) => {\n            acc[fieldObj.name()] = {\n                index: i,\n                def: fieldObj.schema(),\n            };\n            return acc;\n        }, {});\n        return this;\n    }\n\n\n    /**\n     * Frees up the resources associated with the current DataModel instance and breaks all the links instance has in\n     * the DAG.\n     *\n     * @public\n     */\n    dispose () {\n        this._parent && this._parent.removeChild(this);\n        this._parent = null;\n        this._children.forEach((child) => {\n            child._parent = null;\n        });\n        this._children = [];\n    }\n\n    /**\n     * Removes the specified child {@link DataModel} from the child list of the current {@link DataModel} instance.\n     *\n     * @example\n     * const schema = [\n     *    { name: 'Name', type: 'dimension' },\n     *    { name: 'HorsePower', type: 'measure' },\n     *    { name: \"Origin\", type: 'dimension' }\n     * ];\n     *\n     * const data = [\n     *    { Name: \"chevrolet chevelle malibu\", Horsepower: 130, Origin: \"USA\" },\n     *    { Name: \"citroen ds-21 pallas\", Horsepower: 115, Origin: \"Europe\" },\n     *    { Name: \"datsun pl510\", Horsepower: 88, Origin: \"Japan\" },\n     *    { Name: \"amc rebel sst\", Horsepower: 150, Origin: \"USA\"},\n     * ]\n     *\n     * const dt = new DataModel(data, schema);\n     *\n     * const dt2 = dt.select(fields => fields.Origin.value === \"USA\")\n     * dt.removeChild(dt2);\n     *\n     * @private\n     *\n     * @param {DataModel} child - Delegates the parent to remove this child.\n     */\n    removeChild (child) {\n        let idx = this._children.findIndex(sibling => sibling === child);\n        idx !== -1 ? this._children.splice(idx, 1) : true;\n    }\n\n    /**\n     * Sets the specified {@link DataModel} as a parent for the current {@link DataModel} instance.\n     *\n     * @param {DataModel} parent - The datamodel instance which will act as parent.\n     */\n    setParent (parent) {\n        this._parent && this._parent.removeChild(this);\n        this._parent = parent;\n        parent && parent._children.push(this);\n    }\n\n    /**\n     * Returns the parent {@link DataModel} instance.\n     *\n     * @example\n     * const schema = [\n     *    { name: 'Name', type: 'dimension' },\n     *    { name: 'HorsePower', type: 'measure' },\n     *    { name: \"Origin\", type: 'dimension' }\n     * ];\n     *\n     * const data = [\n     *    { Name: \"chevrolet chevelle malibu\", Horsepower: 130, Origin: \"USA\" },\n     *    { Name: \"citroen ds-21 pallas\", Horsepower: 115, Origin: \"Europe\" },\n     *    { Name: \"datsun pl510\", Horsepower: 88, Origin: \"Japan\" },\n     *    { Name: \"amc rebel sst\", Horsepower: 150, Origin: \"USA\"},\n     * ]\n     *\n     * const dt = new DataModel(data, schema);\n     *\n     * const dt2 = dt.select(fields => fields.Origin.value === \"USA\");\n     * const parentDm = dt2.getParent();\n     *\n     * @return {DataModel} Returns the parent DataModel instance.\n     */\n    getParent () {\n        return this._parent;\n    }\n\n    /**\n     * Returns the immediate child {@link DataModel} instances.\n     *\n     * @example\n     * const schema = [\n     *    { name: 'Name', type: 'dimension' },\n     *    { name: 'HorsePower', type: 'measure' },\n     *    { name: \"Origin\", type: 'dimension' }\n     * ];\n     *\n     * const data = [\n     *    { Name: \"chevrolet chevelle malibu\", Horsepower: 130, Origin: \"USA\" },\n     *    { Name: \"citroen ds-21 pallas\", Horsepower: 115, Origin: \"Europe\" },\n     *    { Name: \"datsun pl510\", Horsepower: 88, Origin: \"Japan\" },\n     *    { Name: \"amc rebel sst\", Horsepower: 150, Origin: \"USA\"},\n     * ]\n     *\n     * const dt = new DataModel(data, schema);\n     *\n     * const childDm1 = dt.select(fields => fields.Origin.value === \"USA\");\n     * const childDm2 = dt.select(fields => fields.Origin.value === \"Japan\");\n     * const childDm3 = dt.groupBy([\"Origin\"]);\n     *\n     * @return {DataModel[]} Returns the immediate child DataModel instances.\n     */\n    getChildren () {\n        return this._children;\n    }\n\n    /**\n     * Returns the in-between operation meta data while creating the current {@link DataModel} instance.\n     *\n     * @example\n     * const schema = [\n     *   { name: 'Name', type: 'dimension' },\n     *   { name: 'HorsePower', type: 'measure' },\n     *   { name: \"Origin\", type: 'dimension' }\n     * ];\n     *\n     * const data = [\n     *   { Name: \"chevrolet chevelle malibu\", Horsepower: 130, Origin: \"USA\" },\n     *   { Name: \"citroen ds-21 pallas\", Horsepower: 115, Origin: \"Europe\" },\n     *   { Name: \"datsun pl510\", Horsepower: 88, Origin: \"Japan\" },\n     *   { Name: \"amc rebel sst\", Horsepower: 150, Origin: \"USA\"},\n     * ]\n     *\n     * const dt = new DataModel(data, schema);\n     * const dt2 = dt.select(fields => fields.Origin.value === \"USA\");\n     * const dt3 = dt2.groupBy([\"Origin\"]);\n     * const derivations = dt3.getDerivations();\n     *\n     * @return {Any[]} Returns the derivation meta data.\n     */\n    getDerivations () {\n        return this._derivation;\n    }\n\n    /**\n     * Returns the in-between operation meta data happened from root {@link DataModel} to current instance.\n     *\n     * @example\n     * const schema = [\n     *   { name: 'Name', type: 'dimension' },\n     *   { name: 'HorsePower', type: 'measure' },\n     *   { name: \"Origin\", type: 'dimension' }\n     * ];\n     *\n     * const data = [\n     *   { Name: \"chevrolet chevelle malibu\", Horsepower: 130, Origin: \"USA\" },\n     *   { Name: \"citroen ds-21 pallas\", Horsepower: 115, Origin: \"Europe\" },\n     *   { Name: \"datsun pl510\", Horsepower: 88, Origin: \"Japan\" },\n     *   { Name: \"amc rebel sst\", Horsepower: 150, Origin: \"USA\"},\n     * ]\n     *\n     * const dt = new DataModel(data, schema);\n     * const dt2 = dt.select(fields => fields.Origin.value === \"USA\");\n     * const dt3 = dt2.groupBy([\"Origin\"]);\n     * const ancDerivations = dt3.getAncestorDerivations();\n     *\n     * @return {Any[]} Returns the previous derivation meta data.\n     */\n    getAncestorDerivations () {\n        return this._ancestorDerivation;\n    }\n}\n\nexport default Relation;\n","/* eslint-disable default-case */\n\nimport { FieldType, DimensionSubtype, DataFormat, FilteringMode } from './enums';\nimport {\n    persistDerivations,\n    getRootGroupByModel,\n    propagateToAllDataModels,\n    getRootDataModel,\n    propagateImmutableActions,\n    addToPropNamespace,\n    sanitizeUnitSchema,\n    splitWithSelect,\n    splitWithProject,\n    getNormalizedProFields\n} from './helper';\nimport { DM_DERIVATIVES, PROPAGATION } from './constants';\nimport {\n    dataBuilder,\n    rowDiffsetIterator,\n    groupBy\n} from './operator';\nimport { createBinnedFieldData } from './operator/bucket-creator';\nimport Relation from './relation';\nimport reducerStore from './utils/reducer-store';\nimport { createFields } from './field-creator';\nimport InvalidAwareTypes from './invalid-aware-types';\nimport Value from './value';\nimport { converterStore } from './converter';\nimport { fieldRegistry } from './fields';\n\n/**\n * DataModel is an in-browser representation of tabular data. It supports\n * {@link https://en.wikipedia.org/wiki/Relational_algebra | relational algebra} operators as well as generic data\n * processing opearators.\n * DataModel extends {@link Relation} class which defines all the relational algebra opreators. DataModel gives\n * definition of generic data processing operators which are not relational algebra complient.\n *\n * @public\n * @class\n * @extends Relation\n * @memberof Datamodel\n */\nclass DataModel extends Relation {\n    /**\n     * Creates a new DataModel instance by providing data and schema. Data could be in the form of\n     * - Flat JSON\n     * - DSV String\n     * - 2D Array\n     *\n     * By default DataModel finds suitable adapter to serialize the data. DataModel also expects a\n     * {@link Schema | schema} for identifying the variables present in data.\n     *\n     * @constructor\n     * @example\n     * const data = loadData('cars.csv');\n     * const schema = [\n     *      { name: 'Name', type: 'dimension' },\n     *      { name: 'Miles_per_Gallon', type: 'measure', unit : 'cm', scale: '1000', numberformat: val => `${val}G`},\n     *      { name: 'Cylinders', type: 'dimension' },\n     *      { name: 'Displacement', type: 'measure' },\n     *      { name: 'Horsepower', type: 'measure' },\n     *      { name: 'Weight_in_lbs', type: 'measure' },\n     *      { name: 'Acceleration', type: 'measure' },\n     *      { name: 'Year', type: 'dimension', subtype: 'datetime', format: '%Y' },\n     *      { name: 'Origin', type: 'dimension' }\n     * ];\n     * const dm = new DataModel(data, schema, { name: 'Cars' });\n     * table(dm);\n     *\n     * @public\n     *\n     * @param {Array.<Object> | string | Array.<Array>} data Input data in any of the mentioned formats\n     * @param {Array.<Schema>} schema Defination of the variables. Order of the variables in data and order of the\n     *      variables in schema has to be same.\n     * @param {object} [options] Optional arguments to specify more settings regarding the creation part\n     * @param {string} [options.name] Name of the datamodel instance. If no name is given an auto generated name is\n     *      assigned to the instance.\n     * @param {string} [options.fieldSeparator=','] specify field separator type if the data is of type dsv string.\n     */\n    constructor (...args) {\n        super(...args);\n\n        this._onPropagation = [];\n    }\n\n    /**\n     * Reducers are simple functions which reduces an array of numbers to a representative number of the set.\n     * Like an array of numbers `[10, 20, 5, 15]` can be reduced to `12.5` if average / mean reducer function is\n     * applied. All the measure fields in datamodel (variables in data) needs a reducer to handle aggregation.\n     *\n     * @public\n     *\n     * @return {ReducerStore} Singleton instance of {@link ReducerStore}.\n     */\n    static get Reducers () {\n        return reducerStore;\n    }\n\n    /**\n     * Converters are functions that transforms data in various format tpo datamodel consumabe format.\n     */\n    static get Converters() {\n        return converterStore;\n    }\n\n    /**\n     * Register new type of fields\n     */\n    static get FieldTypes() {\n        return fieldRegistry;\n    }\n\n    /**\n     * Configure null, undefined, invalid values in the source data\n     *\n     * @public\n     *\n     * @param {Object} [config] - Configuration to control how null, undefined and non-parsable values are\n     * represented in DataModel.\n     * @param {string} [config.undefined] - Define how an undefined value will be represented.\n     * @param {string} [config.null] - Define how a null value will be represented.\n     * @param {string} [config.invalid] - Define how a non-parsable value will be represented.\n     */\n    static configureInvalidAwareTypes (config) {\n        return InvalidAwareTypes.invalidAwareVals(config);\n    }\n\n    /**\n     * Retrieve the data attached to an instance in JSON format.\n     *\n     * @example\n     * // DataModel instance is already prepared and assigned to dm variable\n     *  const data = dm.getData({\n     *      order: 'column',\n     *      formatter: {\n     *          origin: (val) => val === 'European Union' ? 'EU' : val;\n     *      }\n     *  });\n     *  console.log(data);\n     *\n     * @public\n     *\n     * @param {Object} [options] Options to control how the raw data is to be returned.\n     * @param {string} [options.order='row'] Defines if data is retieved in row order or column order. Possible values\n     *      are `'rows'` and `'columns'`\n     * @param {Function} [options.formatter=null] Formats the output data. This expects an object, where the keys are\n     *      the name of the variable needs to be formatted. The formatter function is called for each row passing the\n     *      value of the cell for a particular row as arguments. The formatter is a function in the form of\n     *      `function (value, rowId, schema) => { ... }`\n     *      Know more about {@link Fomatter}.\n     *\n     * @return {Array} Returns a multidimensional array of the data with schema. The return format looks like\n     *      ```\n     *          {\n     *              data,\n     *              schema\n     *          }\n     *      ```\n     */\n    getData (options) {\n        const defOptions = {\n            order: 'row',\n            formatter: null,\n            withUid: false,\n            getAllFields: false,\n            sort: []\n        };\n        options = Object.assign({}, defOptions, options);\n        const { idField, fields } = this.getPartialFieldspace();\n\n        const dataGenerated = dataBuilder.call(\n            this,\n            { fields, idField },\n            this._rowDiffset,\n            options.getAllFields ? fields.map(d => d.name()).join() : this._colIdentifier,\n            options.sort,\n            {\n                columnWise: options.order === 'column',\n                addUid: !!options.withUid\n            }\n        );\n\n        if (!options.formatter) {\n            return dataGenerated;\n        }\n\n        const { formatter } = options;\n        const { data, schema, uids } = dataGenerated;\n        const fieldNames = schema.map((e => e.name));\n        const fmtFieldNames = Object.keys(formatter);\n        const fmtFieldIdx = fmtFieldNames.reduce((acc, next) => {\n            const idx = fieldNames.indexOf(next);\n            if (idx !== -1) {\n                acc.push([idx, formatter[next]]);\n            }\n            return acc;\n        }, []);\n\n        if (options.order === 'column') {\n            fmtFieldIdx.forEach((elem) => {\n                const fIdx = elem[0];\n                const fmtFn = elem[1];\n\n                data[fIdx].forEach((datum, datumIdx) => {\n                    data[fIdx][datumIdx] = fmtFn.call(\n                        undefined,\n                        datum,\n                        uids[datumIdx],\n                        schema[fIdx]\n                    );\n                });\n            });\n        } else {\n            data.forEach((datum, datumIdx) => {\n                fmtFieldIdx.forEach((elem) => {\n                    const fIdx = elem[0];\n                    const fmtFn = elem[1];\n\n                    datum[fIdx] = fmtFn.call(\n                        undefined,\n                        datum[fIdx],\n                        uids[datumIdx],\n                        schema[fIdx]\n                    );\n                });\n            });\n        }\n\n        return dataGenerated;\n    }\n\n    /**\n     * Returns the unique ids in an array.\n     *\n     * @return {Array} Returns an array of ids.\n     */\n    getUids () {\n        const rowDiffset = this._rowDiffset;\n        const ids = [];\n        const idData = this.getPartialFieldspace().idField.data();\n\n        rowDiffsetIterator(rowDiffset, (i) => {\n            ids.push(idData[i]);\n        });\n\n        return ids;\n    }\n    /**\n     * Groups the data using particular dimensions and by reducing measures. It expects a list of dimensions using which\n     * it projects the datamodel and perform aggregations to reduce the duplicate tuples. Refer this\n     * {@link link_to_one_example_with_group_by | document} to know the intuition behind groupBy.\n     *\n     * DataModel by default provides definition of few {@link reducer | Reducers}.\n     * {@link ReducerStore | User defined reducers} can also be registered.\n     *\n     * This is the chained implementation of `groupBy`.\n     * `groupBy` also supports {@link link_to_compose_groupBy | composability}\n     *\n     * @example\n     * const groupedDM = dm.groupBy(['Year'], { horsepower: 'max' } );\n     * console.log(groupedDm);\n     *\n     * @public\n     *\n     * @param {Array.<string>} fieldsArr - Array containing the name of dimensions\n     * @param {Object} [reducers={}] - A map whose key is the variable name and value is the name of the reducer. If its\n     *      not passed, or any variable is ommitted from the object, default aggregation function is used from the\n     *      schema of the variable.\n     *\n     * @return {DataModel} Returns a new DataModel instance after performing the groupby.\n     */\n    groupBy (fieldsArr, reducers = {}, config = { saveChild: true }) {\n        const groupByString = `${fieldsArr.join()}`;\n        let params = [this, fieldsArr, reducers];\n        const newDataModel = groupBy(...params);\n\n        persistDerivations(\n            this,\n            newDataModel,\n            DM_DERIVATIVES.GROUPBY,\n            { fieldsArr, groupByString, defaultReducer: reducerStore.defaultReducer() },\n            reducers\n        );\n        if (config.saveChild) {\n            newDataModel.setParent(this);\n        } else {\n            newDataModel.setParent(null);\n        }\n\n        return newDataModel;\n    }\n\n    /**\n     * Performs sorting operation on the current {@link DataModel} instance according to the specified sorting details.\n     * Like every other operator it doesn't mutate the current DataModel instance on which it was called, instead\n     * returns a new DataModel instance containing the sorted data.\n     *\n     * DataModel support multi level sorting by listing the variables using which sorting needs to be performed and\n     * the type of sorting `ASC` or `DESC`.\n     *\n     * In the following example, data is sorted by `Origin` field in `DESC` order in first level followed by another\n     * level of sorting by `Acceleration` in `ASC` order.\n     *\n     * @example\n     * // here dm is the pre-declared DataModel instance containing the data of 'cars.json' file\n     * let sortedDm = dm.sort([\n     *    [\"Origin\", \"DESC\"]\n     *    [\"Acceleration\"] // Default value is ASC\n     * ]);\n     *\n     * console.log(dm.getData());\n     * console.log(sortedDm.getData());\n     *\n     * // Sort with a custom sorting function\n     * sortedDm = dm.sort([\n     *    [\"Origin\", \"DESC\"]\n     *    [\"Acceleration\", (a, b) => a - b] // Custom sorting function\n     * ]);\n     *\n     * console.log(dm.getData());\n     * console.log(sortedDm.getData());\n     *\n     * @text\n     * DataModel also provides another sorting mechanism out of the box where sort is applied to a variable using\n     * another variable which determines the order.\n     * Like the above DataModel contains three fields `Origin`, `Name` and `Acceleration`. Now, the data in this\n     * model can be sorted by `Origin` field according to the average value of all `Acceleration` for a\n     * particular `Origin` value.\n     *\n     * @example\n     * // here dm is the pre-declared DataModel instance containing the data of 'cars.json' file\n     * const sortedDm = dm.sort([\n     *     ['Origin', ['Acceleration', (a, b) => avg(...a.Acceleration) - avg(...b.Acceleration)]]\n     * ]);\n     *\n     * console.log(dm.getData());\n     * console.log(sortedDm.getData());\n     *\n     * @public\n     *\n     * @param {Array.<Array>} sortingDetails - Sorting details based on which the sorting will be performed.\n     * @return {DataModel} Returns a new instance of DataModel with sorted data.\n     */\n    sort (sortingDetails, config = { saveChild: false }) {\n        const rawData = this.getData({\n            order: 'row',\n            sort: sortingDetails,\n            withUid: true\n        });\n\n        const header = rawData.schema.map(field => field.name);\n        const dataInCSVArr = [header].concat(rawData.data);\n        const sortedDm = new this.constructor(dataInCSVArr, rawData.schema, { dataFormat: 'DSVArr' });\n\n        persistDerivations(\n            this,\n            sortedDm,\n            DM_DERIVATIVES.SORT,\n            config,\n            sortingDetails\n        );\n\n        if (config.saveChild) {\n            sortedDm.setParent(this);\n        } else {\n            sortedDm.setParent(null);\n        }\n\n        return sortedDm;\n    }\n\n    /**\n     * Performs the serialization operation on the current {@link DataModel} instance according to the specified data\n     * type. When an {@link DataModel} instance is created, it de-serializes the input data into its internal format,\n     * and during its serialization process, it converts its internal data format to the specified data type and returns\n     * that data regardless what type of data is used during the {@link DataModel} initialization.\n     *\n     * @example\n     * // here dm is the pre-declared DataModel instance.\n     * const csvData = dm.serialize(DataModel.DataFormat.DSV_STR, { fieldSeparator: \",\" });\n     * console.log(csvData); // The csv formatted data.\n     *\n     * const jsonData = dm.serialize(DataModel.DataFormat.FLAT_JSON);\n     * console.log(jsonData); // The json data.\n     *\n     * @public\n     *\n     * @param {string} type - The data type name for serialization.\n     * @param {Object} options - The optional option object.\n     * @param {string} options.fieldSeparator - The field separator character for DSV data type.\n     * @return {Array|string} Returns the serialized data.\n     */\n    serialize (type, options) {\n        type = type || this._dataFormat;\n        options = Object.assign({}, { fieldSeparator: ',' }, options);\n\n        const fields = this.getFieldspace().fields;\n        const colData = fields.map(f => f.formattedData());\n        const rowsCount = colData[0].length;\n        let serializedData;\n        let rowIdx;\n        let colIdx;\n\n        if (type === DataFormat.FLAT_JSON) {\n            serializedData = [];\n            for (rowIdx = 0; rowIdx < rowsCount; rowIdx++) {\n                const row = {};\n                for (colIdx = 0; colIdx < fields.length; colIdx++) {\n                    row[fields[colIdx].name()] = colData[colIdx][rowIdx];\n                }\n                serializedData.push(row);\n            }\n        } else if (type === DataFormat.DSV_STR) {\n            serializedData = [fields.map(f => f.name()).join(options.fieldSeparator)];\n            for (rowIdx = 0; rowIdx < rowsCount; rowIdx++) {\n                const row = [];\n                for (colIdx = 0; colIdx < fields.length; colIdx++) {\n                    row.push(colData[colIdx][rowIdx]);\n                }\n                serializedData.push(row.join(options.fieldSeparator));\n            }\n            serializedData = serializedData.join('\\n');\n        } else if (type === DataFormat.DSV_ARR) {\n            serializedData = [fields.map(f => f.name())];\n            for (rowIdx = 0; rowIdx < rowsCount; rowIdx++) {\n                const row = [];\n                for (colIdx = 0; colIdx < fields.length; colIdx++) {\n                    row.push(colData[colIdx][rowIdx]);\n                }\n                serializedData.push(row);\n            }\n        } else {\n            throw new Error(`Data type ${type} is not supported`);\n        }\n\n        return serializedData;\n    }\n\n    addField (field) {\n        const fieldName = field.name();\n        this._colIdentifier += `,${fieldName}`;\n        const partialFieldspace = this._partialFieldspace;\n        const cachedValueObjects = partialFieldspace._cachedValueObjects;\n        const formattedData = field.formattedData();\n        const rawData = field.partialField.data;\n\n        if (!partialFieldspace.fieldsObj()[field.name()]) {\n            partialFieldspace.fields.push(field);\n            cachedValueObjects.forEach((obj, i) => {\n                obj[field.name()] = new Value(formattedData[i], rawData[i], field);\n            });\n        } else {\n            const fieldIndex = partialFieldspace.fields.findIndex(fieldinst => fieldinst.name() === fieldName);\n            fieldIndex >= 0 && (partialFieldspace.fields[fieldIndex] = field);\n        }\n\n        // flush out cached namespace values on addition of new fields\n        partialFieldspace._cachedFieldsObj = null;\n        partialFieldspace._cachedDimension = null;\n        partialFieldspace._cachedMeasure = null;\n\n        this.__calculateFieldspace().calculateFieldsConfig();\n        return this;\n    }\n\n    /**\n    * Creates a new variable calculated from existing variables. This method expects the definition of the newly created\n    * variable and a function which resolves the value of the new variable from existing variables.\n    *\n    * Can create a new measure based on existing variables:\n    * @example\n    *  // DataModel already prepared and assigned to dm variable;\n    *  const newDm = dataModel.calculateVariable({\n    *      name: 'powerToWeight',\n    *      type: 'measure'\n    *  }, ['horsepower', 'weight_in_lbs', (hp, weight) => hp / weight ]);\n    *\n    *\n    * Can create a new dimension based on existing variables:\n    * @example\n    *  // DataModel already prepared and assigned to dm variable;\n    *  const child = dataModel.calculateVariable(\n    *     {\n    *       name: 'Efficiency',\n    *       type: 'dimension'\n    *     }, ['horsepower', (hp) => {\n    *      if (hp < 80) { return 'low'; },\n    *      else if (hp < 120) { return 'moderate'; }\n    *      else { return 'high' }\n    *  }]);\n    *\n    * @public\n    *\n    * @param {Object} schema - The schema of newly defined variable.\n    * @param {Array.<string|function>} dependency - An array containing the dependency variable names and a resolver\n    * function as the last element.\n    * @param {Object} config - An optional config object.\n    * @param {boolean} [config.saveChild] - Whether the newly created DataModel will be a child.\n    * @param {boolean} [config.replaceVar] - Whether the newly created variable will replace the existing variable.\n    * @return {DataModel} Returns an instance of DataModel with the new field.\n    */\n    calculateVariable (schema, dependency, config) {\n        schema = sanitizeUnitSchema(schema);\n        config = Object.assign({}, { saveChild: true, replaceVar: false }, config);\n\n        const fieldsConfig = this.getFieldsConfig();\n        const depVars = dependency.slice(0, dependency.length - 1);\n        const retrieveFn = dependency[dependency.length - 1];\n\n        if (fieldsConfig[schema.name] && !config.replaceVar) {\n            throw new Error(`${schema.name} field already exists in datamodel`);\n        }\n\n        const depFieldIndices = depVars.map((field) => {\n            const fieldSpec = fieldsConfig[field];\n            if (!fieldSpec) {\n                // @todo dont throw error here, use warning in production mode\n                throw new Error(`${field} is not a valid column name.`);\n            }\n            return fieldSpec.index;\n        });\n\n        const clone = this.clone(config.saveChild);\n\n        const fs = clone.getFieldspace().fields;\n        const suppliedFields = depFieldIndices.map(idx => fs[idx]);\n\n        let cachedStore = {};\n        let cloneProvider = () => this.detachedRoot();\n\n        const computedValues = [];\n        rowDiffsetIterator(clone._rowDiffset, (i) => {\n            const fieldsData = suppliedFields.map(field => field.partialField.data[i]);\n            computedValues[i] = retrieveFn(...fieldsData, i, cloneProvider, cachedStore);\n        });\n        const [field] = createFields([computedValues], [schema], [schema.name]);\n        clone.addField(field);\n\n        persistDerivations(\n            this,\n            clone,\n            DM_DERIVATIVES.CAL_VAR,\n            { config: schema, fields: depVars },\n            retrieveFn\n        );\n\n        return clone;\n    }\n\n    /**\n     * Propagates changes across all the connected DataModel instances.\n     *\n     * @param {Array} identifiers - A list of identifiers that were interacted with.\n     * @param {Object} payload - The interaction specific details.\n     *\n     * @return {DataModel} DataModel instance.\n     */\n    propagate (identifiers, config = {}, addToNameSpace, propConfig = {}) {\n        const isMutableAction = config.isMutableAction;\n        const propagationSourceId = config.sourceId;\n        const payload = config.payload;\n        const rootModel = getRootDataModel(this);\n        const propagationNameSpace = rootModel._propagationNameSpace;\n        const rootGroupByModel = getRootGroupByModel(this);\n        const rootModels = {\n            groupByModel: rootGroupByModel,\n            model: rootModel\n        };\n\n        addToNameSpace && addToPropNamespace(propagationNameSpace, config, this);\n        propagateToAllDataModels(identifiers, rootModels, { propagationNameSpace,\n            sourceId: propagationSourceId,\n            propagationSource: this },\n            Object.assign({\n                payload\n            }, config));\n\n        if (isMutableAction) {\n            propagateImmutableActions(propagationNameSpace, rootModel, {\n                config,\n                propConfig\n            }, this);\n        }\n\n        return this;\n    }\n\n    /**\n     * Associates a callback with an event name.\n     *\n     * @param {string} eventName - The name of the event.\n     * @param {Function} callback - The callback to invoke.\n     * @return {DataModel} Returns this current DataModel instance itself.\n     */\n    on (eventName, callback) {\n        switch (eventName) {\n        case PROPAGATION:\n            this._onPropagation.push(callback);\n            break;\n        }\n        return this;\n    }\n\n    /**\n     * Unsubscribes the callbacks for the provided event name.\n     *\n     * @param {string} eventName - The name of the event to unsubscribe.\n     * @return {DataModel} Returns the current DataModel instance itself.\n     */\n    unsubscribe (eventName) {\n        switch (eventName) {\n        case PROPAGATION:\n            this._onPropagation = [];\n            break;\n\n        }\n        return this;\n    }\n\n    /**\n     * This method is used to invoke the method associated with propagation.\n     *\n     * @param {Object} payload The interaction payload.\n     * @param {DataModel} identifiers The propagated DataModel.\n     * @memberof DataModel\n     */\n    handlePropagation (propModel, payload) {\n        let propListeners = this._onPropagation;\n        propListeners.forEach(fn => fn.call(this, propModel, payload));\n    }\n\n    /**\n     * Performs the binning operation on a measure field based on the binning configuration. Binning means discretizing\n     * values of a measure. Binning configuration contains an array; subsequent values from the array marks the boundary\n     * of buckets in [inclusive, exclusive) range format. This operation does not mutate the subject measure field,\n     * instead, it creates a new field (variable) of type dimension and subtype binned.\n     *\n     * Binning can be configured by\n     * - providing custom bin configuration with non-uniform buckets,\n     * - providing bins count,\n     * - providing each bin size,\n     *\n     * When custom `buckets` are provided as part of binning configuration:\n     * @example\n     *  // DataModel already prepared and assigned to dm variable\n     *  const config = { name: 'binnedHP', buckets: [30, 80, 100, 110] }\n     *  const binnedDM = dataModel.bin('horsepower', config);\n     *\n     * @text\n     * When `binsCount` is defined as part of binning configuration:\n     * @example\n     *  // DataModel already prepared and assigned to dm variable\n     *  const config = { name: 'binnedHP', binsCount: 5, start: 0, end: 100 }\n     *  const binDM = dataModel.bin('horsepower', config);\n     *\n     * @text\n     * When `binSize` is defined as part of binning configuration:\n     * @example\n     *  // DataModel already prepared and assigned to dm variable\n     *  const config = { name: 'binnedHorsepower', binSize: 20, start: 5}\n     *  const binDM = dataModel.bin('horsepower', config);\n     *\n     * @public\n     *\n     * @param {string} measureFieldName - The name of the target measure field.\n     * @param {Object} config - The config object.\n     * @param {string} [config.name] - The name of the new field which will be created.\n     * @param {string} [config.buckets] - An array containing the bucket ranges.\n     * @param {string} [config.binSize] - The size of each bin. It is ignored when buckets are given.\n     * @param {string} [config.binsCount] - The total number of bins to generate. It is ignored when buckets are given.\n     * @param {string} [config.start] - The start value of the bucket ranges. It is ignored when buckets are given.\n     * @param {string} [config.end] - The end value of the bucket ranges. It is ignored when buckets are given.\n     * @return {DataModel} Returns a new {@link DataModel} instance with the new field.\n     */\n    bin (measureFieldName, config) {\n        const fieldsConfig = this.getFieldsConfig();\n\n        if (!fieldsConfig[measureFieldName]) {\n            throw new Error(`Field ${measureFieldName} doesn't exist`);\n        }\n\n        const binFieldName = config.name || `${measureFieldName}_binned`;\n\n        if (fieldsConfig[binFieldName]) {\n            throw new Error(`Field ${binFieldName} already exists`);\n        }\n\n        const measureField = this.getFieldspace().fieldsObj()[measureFieldName];\n        const { binnedData, bins } = createBinnedFieldData(measureField, this._rowDiffset, config);\n\n        const binField = createFields([binnedData], [\n            {\n                name: binFieldName,\n                type: FieldType.DIMENSION,\n                subtype: DimensionSubtype.BINNED,\n                bins\n            }], [binFieldName])[0];\n\n        const clone = this.clone(config.saveChild);\n        clone.addField(binField);\n\n        persistDerivations(\n            this,\n            clone,\n            DM_DERIVATIVES.BIN,\n             { measureFieldName, config, binFieldName },\n             null\n        );\n\n        return clone;\n    }\n\n    /**\n     * Creates a new {@link DataModel} instance with completely detached root from current {@link DataModel} instance,\n     * the new {@link DataModel} instance has no parent-children relationship with the current one, but has same data as\n     * the current one.\n     * This API is useful when a completely different {@link DataModel} but with same data as the current instance is\n     * needed.\n     *\n     * @example\n     *  const dm = new DataModel(data, schema);\n     *  const detachedDm = dm.detachedRoot();\n     *\n     * // has different namespace\n     * console.log(dm.getPartialFieldspace().name);\n     * console.log(detachedDm.getPartialFieldspace().name);\n     *\n     * // has same data\n     * console.log(dm.getData());\n     * console.log(detachedDm.getData());\n     *\n     * @public\n     *\n     * @return {DataModel} Returns a detached {@link DataModel} instance.\n     */\n    detachedRoot () {\n        const data = this.serialize(DataFormat.FLAT_JSON);\n        const schema = this.getSchema();\n\n        return new DataModel(data, schema);\n    }\n\n    /**\n     * Creates a set of new {@link DataModel} instances by splitting the set of rows in the source {@link DataModel}\n     * instance based on a set of dimensions.\n     *\n     * For each unique dimensional value, a new split is created which creates a unique {@link DataModel} instance for\n     *  that split\n     *\n     * If multiple dimensions are provided, it splits the source {@link DataModel} instance with all possible\n     * combinations of the dimensional values for all the dimensions provided\n     *\n     * Additionally, it also accepts a predicate function to reduce the set of rows provided. A\n     * {@link link_to_selection | Selection} is performed on all the split {@link DataModel} instances based on\n     * the predicate function\n     *\n     * @example\n     *  // without predicate function:\n     *  const splitDt = dt.splitByRow(['Origin'])\n     *  console.log(splitDt));\n     * // This should give three unique DataModel instances, one each having rows only for 'USA',\n     * // 'Europe' and 'Japan' respectively\n     *\n     * @example\n     *  // without predicate function:\n     *  const splitDtMulti = dt.splitByRow(['Origin', 'Cylinders'])\n     *  console.log(splitDtMulti));\n     * // This should give DataModel instances for all unique combinations of Origin and Cylinder values\n     *\n     * @example\n     * // with predicate function:\n     * const splitWithPredDt = dt.select(['Origin'], fields => fields.Origin.value === \"USA\")\n     * console.log(splitWithPredDt);\n     * // This should not include the DataModel for the Origin : 'USA'\n     *\n     *\n     * @public\n     *\n     * @param {Array} dimensionArr - Set of dimensions based on which the split should occur\n     * @param {Object} config - The configuration object\n     * @param {string} [config.saveChild] - Configuration to save child or not\n     * @param {string}[config.mode=FilteringMode.NORMAL] -The mode of the selection.\n     * @return {Array}  Returns the new DataModel instances after operation.\n     */\n    splitByRow (dimensionArr, reducerFn, config) {\n        const fieldsConfig = this.getFieldsConfig();\n\n        dimensionArr.forEach((fieldName) => {\n            if (!fieldsConfig[fieldName]) {\n                throw new Error(`Field ${fieldName} doesn't exist in the schema`);\n            }\n        });\n\n        const defConfig = {\n            mode: FilteringMode.NORMAL,\n            saveChild: true\n        };\n\n        config = Object.assign({}, defConfig, config);\n\n        return splitWithSelect(this, dimensionArr, reducerFn, config);\n    }\n\n    /**\n     * Creates a set of new {@link DataModel} instances by splitting the set of fields in the source {@link DataModel}\n     * instance based on a set of common and unique field names provided.\n     *\n     * Each DataModel created contains a set of fields which are common to all and a set of unique fields.\n     * It also accepts configurations such as saveChild and mode(inverse or normal) to include/exclude the respective\n     * fields\n     *\n     * @example\n     *  // without predicate function:\n     *  const splitDt = dt.splitByColumn( [['Acceleration'], ['Horsepower']], ['Origin'])\n     *  console.log(splitDt));\n     * // This should give two unique DataModel instances, both having the field 'Origin' and\n     * // one each having 'Acceleration' and 'Horsepower' fields respectively\n     *\n     * @example\n     *  // without predicate function:\n     *  const splitDtInv = dt.splitByColumn( [['Acceleration'], ['Horsepower'],['Origin', 'Cylinders'],\n     *                           {mode: 'inverse'})\n     *  console.log(splitDtInv));\n     * // This should give DataModel instances in the following way:\n     * // All DataModel Instances do not have the fields 'Origin' and 'Cylinders'\n     * // One DataModel Instance has rest of the fields except 'Acceleration' and the other DataModel instance\n     * // has rest of the fields except 'Horsepower'\n     *\n     *\n     *\n     * @public\n     *\n     * @param {Array} uniqueFields - Set of unique fields included in each datamModel instance\n     * @param {Array} commonFields - Set of common fields included in all datamModel instances\n     * @param {Object} config - The configuration object\n     * @param {string} [config.saveChild] - Configuration to save child or not\n     * @param {string}[config.mode=FilteringMode.NORMAL] -The mode of the selection.\n     * @return {Array}  Returns the new DataModel instances after operation.\n     */\n    splitByColumn (uniqueFields = [], commonFields = [], config) {\n        const defConfig = {\n            mode: FilteringMode.NORMAL,\n            saveChild: true\n        };\n        const fieldConfig = this.getFieldsConfig();\n        const allFields = Object.keys(fieldConfig);\n        const normalizedProjFieldSets = [[commonFields]];\n\n        config = Object.assign({}, defConfig, config);\n        uniqueFields = uniqueFields.length ? uniqueFields : [[]];\n\n\n        uniqueFields.forEach((fieldSet, i) => {\n            normalizedProjFieldSets[i] = getNormalizedProFields(\n                [...fieldSet, ...commonFields],\n                allFields,\n                fieldConfig);\n        });\n\n        return splitWithProject(this, normalizedProjFieldSets, config, allFields);\n    }\n\n\n}\n\nexport default DataModel;\n","import { extend2 } from '../utils';\nimport { rowDiffsetIterator } from './row-diffset-iterator';\nimport DataModel from '../export';\nimport reducerStore from '../utils/reducer-store';\nimport { defaultReducerName } from './group-by-function';\nimport { FieldType, DimensionSubtype } from '../enums';\nimport { ROW_ID } from '../constants';\n\n/**\n * This function sanitize the user given field and return a common Array structure field\n * list\n * @param  {DataModel} dataModel the dataModel operating on\n * @param  {Array} fieldArr  user input of field Array\n * @return {Array}           arrays of field name\n */\nfunction getFieldArr (dataModel, fieldArr) {\n    const retArr = [];\n    const fieldStore = dataModel.getFieldspace();\n    const dimensions = fieldStore.getDimension();\n\n    Object.entries(dimensions).forEach(([key]) => {\n        if (fieldArr && fieldArr.length) {\n            if (fieldArr.indexOf(key) !== -1) {\n                retArr.push(key);\n            }\n        } else {\n            retArr.push(key);\n        }\n    });\n\n    return retArr;\n}\n\n/**\n * This sanitize the reducer provide by the user and create a common type of object.\n * user can give function Also\n * @param  {DataModel} dataModel     dataModel to worked on\n * @param  {Object|function} [reducers={}] reducer provided by the users\n * @return {Object}               object containing reducer function for every measure\n */\nfunction getReducerObj (dataModel, reducers = {}) {\n    const retObj = {};\n    const fieldStore = dataModel.getFieldspace();\n    const measures = fieldStore.getMeasure();\n    const defReducer = reducerStore.defaultReducer();\n\n    Object.keys(measures).forEach((measureName) => {\n        if (typeof reducers[measureName] !== 'string') {\n            reducers[measureName] = measures[measureName].defAggFn();\n        }\n        const reducerFn = reducerStore.resolve(reducers[measureName]);\n        if (reducerFn) {\n            retObj[measureName] = reducerFn;\n        } else {\n            retObj[measureName] = defReducer;\n            reducers[measureName] = defaultReducerName;\n        }\n    });\n    return retObj;\n}\n\n/**\n * main function which perform the group-by operations which reduce the measures value is the\n * fields are common according to the reducer function provided\n * @param  {DataModel} dataModel the dataModel to worked\n * @param  {Array} fieldArr  fields according to which the groupby should be worked\n * @param  {Object|Function} reducers  reducers function\n * @param {DataModel} existingDataModel Existing datamodel instance\n * @return {DataModel} new dataModel with the group by\n */\nfunction groupBy (dataModel, fieldArr, reducers) {\n    const sFieldArr = getFieldArr(dataModel, fieldArr);\n    const reducerObj = getReducerObj(dataModel, reducers);\n    const fieldStore = dataModel.getFieldspace();\n    const idData = dataModel.getPartialFieldspace().idField.data();\n    const fieldStoreObj = fieldStore.fieldsObj();\n    const dbName = fieldStore.name;\n    const dimensionArr = [];\n    const measureArr = [];\n    const schema = [];\n    const hashMap = {};\n    const data = [];\n    let newDataModel;\n\n    // Prepare the schema\n    Object.entries(fieldStoreObj).forEach(([key, value]) => {\n        if (sFieldArr.indexOf(key) !== -1 || reducerObj[key]) {\n            schema.push(extend2({}, value.schema()));\n\n            switch (value.schema().type) {\n            case FieldType.MEASURE:\n                measureArr.push(key);\n                break;\n            default:\n            case FieldType.DIMENSION:\n                dimensionArr.push(key);\n            }\n        }\n    });\n    // Prepare the data\n    let rowCount = 0;\n    const idMap = [];\n    rowDiffsetIterator(dataModel._rowDiffset, (i) => {\n        let hash = '';\n        dimensionArr.forEach((_) => {\n            hash = `${hash}-${fieldStoreObj[_].partialField.data[i]}`;\n        });\n        if (hashMap[hash] === undefined) {\n            hashMap[hash] = rowCount;\n            data.push({});\n            idMap.push([]);\n            dimensionArr.forEach((_) => {\n                data[rowCount][_] = fieldStoreObj[_].partialField.data[i];\n            });\n            measureArr.forEach((_) => {\n                data[rowCount][_] = [fieldStoreObj[_].partialField.data[i]];\n            });\n            idMap[rowCount] = [`${idData[i]}`];\n            rowCount += 1;\n        } else {\n            measureArr.forEach((_) => {\n                data[hashMap[hash]][_].push(fieldStoreObj[_].partialField.data[i]);\n            });\n            idMap[hashMap[hash]].push(`${idData[i]}`);\n        }\n    });\n\n    // reduction\n    let cachedStore = {};\n    let cloneProvider = () => dataModel.detachedRoot();\n    data.forEach((row, i) => {\n        const tuple = row;\n        measureArr.forEach((_) => {\n            tuple[_] = reducerObj[_](row[_], cloneProvider, cachedStore);\n        });\n        tuple[ROW_ID] = idMap[i];\n    });\n\n    schema.push({\n        name: ROW_ID,\n        type: FieldType.DIMENSION,\n        subtype: DimensionSubtype.ID\n    });\n\n    newDataModel = new DataModel(data, schema, { name: dbName });\n    return newDataModel;\n}\n\nexport { groupBy, getFieldArr, getReducerObj };\n","import { rowDiffsetIterator } from './row-diffset-iterator';\nimport InvalidAwareTypes from '../invalid-aware-types';\n\nconst generateBuckets = (binSize, start, end) => {\n    const buckets = [];\n    let next = start;\n\n    while (next < end) {\n        buckets.push(next);\n        next += binSize;\n    }\n    buckets.push(next);\n\n    return buckets;\n};\n\nconst findBucketRange = (bucketRanges, value) => {\n    let leftIdx = 0;\n    let rightIdx = bucketRanges.length - 1;\n    let midIdx;\n    let range;\n\n    // Here use binary search as the bucketRanges is a sorted array\n    while (leftIdx <= rightIdx) {\n        midIdx = leftIdx + Math.floor((rightIdx - leftIdx) / 2);\n        range = bucketRanges[midIdx];\n\n        if (value >= range.start && value < range.end) {\n            return range;\n        } else if (value >= range.end) {\n            leftIdx = midIdx + 1;\n        } else if (value < range.start) {\n            rightIdx = midIdx - 1;\n        }\n    }\n\n    return null;\n};\n\n /**\n  * Creates the bin data from input measure field and supplied configs.\n  *\n  * @param {Measure} measureField - The Measure field instance.\n  * @param {string} rowDiffset - The datamodel rowDiffset values.\n  * @param {Object} config - The config object.\n  * @return {Object} Returns the binned data and the corresponding bins.\n  */\nexport function createBinnedFieldData (measureField, rowDiffset, config) {\n    let { buckets, binsCount, binSize, start, end } = config;\n    const [dMin, dMax] = measureField.domain();\n\n    if (!buckets) {\n        start = (start !== 0 && (!start || start > dMin)) ? dMin : start;\n        end = (end !== 0 && (!end || end < dMax)) ? (dMax + 1) : end;\n\n        if (binsCount) {\n            binSize = Math.ceil(Math.abs(end - start) / binsCount);\n        }\n\n        buckets = generateBuckets(binSize, start, end);\n    }\n\n    if (buckets[0] > dMin) {\n        buckets.unshift(dMin);\n    }\n    if (buckets[buckets.length - 1] <= dMax) {\n        buckets.push(dMax + 1);\n    }\n\n    const bucketRanges = [];\n    for (let i = 0; i < buckets.length - 1; i++) {\n        bucketRanges.push({\n            start: buckets[i],\n            end: buckets[i + 1]\n        });\n    }\n\n    const binnedData = [];\n    rowDiffsetIterator(rowDiffset, (i) => {\n        const datum = measureField.partialField.data[i];\n        if (datum instanceof InvalidAwareTypes) {\n            binnedData.push(datum);\n            return;\n        }\n\n        const range = findBucketRange(bucketRanges, datum);\n        binnedData.push(`${range.start}-${range.end}`);\n    });\n\n    return { binnedData, bins: buckets };\n}\n","import { fnList } from '../operator/group-by-function';\n\nexport const { sum, avg, min, max, first, last, count, std: sd } = fnList;\n","import DataModel from './datamodel';\nimport {\n  compose,\n  bin,\n  select,\n  project,\n  groupby as groupBy,\n  calculateVariable,\n  sort,\n  crossProduct,\n  difference,\n  naturalJoin,\n  leftOuterJoin,\n  rightOuterJoin,\n  fullOuterJoin,\n  union,\n  rowDiffsetIterator\n} from './operator';\nimport * as Stats from './stats';\nimport * as enums from './enums';\nimport { DataConverter } from './converter';\nimport { DateTimeFormatter } from './utils';\nimport { DataFormat, FilteringMode, DM_DERIVATIVES } from './constants';\nimport InvalidAwareTypes from './invalid-aware-types';\nimport pkg from '../package.json';\nimport * as FieldsUtility from './fields';\n\nconst Operators = {\n    compose,\n    bin,\n    select,\n    project,\n    groupBy,\n    calculateVariable,\n    sort,\n    crossProduct,\n    difference,\n    naturalJoin,\n    leftOuterJoin,\n    rightOuterJoin,\n    fullOuterJoin,\n    union,\n    rowDiffsetIterator\n};\n\nconst version = pkg.version;\nObject.assign(DataModel, {\n    Operators,\n    Stats,\n    DM_DERIVATIVES,\n    DateTimeFormatter,\n    DataFormat,\n    FilteringMode,\n    InvalidAwareTypes,\n    version,\n    DataConverter,\n    FieldsUtility\n}, enums);\n\nexport default DataModel;\n","import { persistDerivations } from '../helper';\nimport { DM_DERIVATIVES } from '../constants';\n\n/**\n * DataModel's opearators are exposed as composable functional operators as well as chainable operators. Chainable\n * operators are called on the instances of {@link Datamodel} and {@link Relation} class.\n *\n * Those same operators can be used as composable operators from `DataModel.Operators` namespace.\n *\n * All these operators have similar behaviour. All these operators when called with the argument returns a function\n * which expects a DataModel instance.\n *\n * @public\n * @module Operators\n * @namespace DataModel\n */\n\n/**\n * This is functional version of selection operator. {@link link_to_selection | Selection} is a row filtering operation.\n * It takes {@link SelectionPredicate | predicate} for filtering criteria and returns a function.\n * The returned function is called with the DataModel instance on which the action needs to be performed.\n *\n * {@link SelectionPredicate} is a function which returns a boolean value. For selection opearation the selection\n * function is called for each row of DataModel instance with the current row passed as argument.\n *\n * After executing {@link SelectionPredicate} the rows are labeled as either an entry of selection set or an entry\n * of rejection set.\n *\n * {@link FilteringMode} operates on the selection and rejection set to determine which one would reflect in the\n * resulatant datamodel.\n *\n * @warning\n * [Warn] Selection and rejection set is only a logical idea for concept explanation purpose.\n *\n * @error\n * [Error] `FilteringMode.ALL` is not a valid working mode for functional version of `select`. Its only avialable on the\n * chained version.\n *\n * @example\n * const select = DataModel.Operators.select;\n * usaCarsFn = select(fields => fields.Origin.value === 'USA');\n * usaCarsDm = usaCarsFn(dm);\n * console.log(usaCarsDm);\n *\n * @public\n * @namespace DataModel\n * @module Operators\n *\n * @param {SelectionPredicate} selectFn - Predicate funciton which is called for each row with the current row\n *      ```\n *          function (row, i)  { ... }\n *      ```\n * @param {Object} [config] - The configuration object to control the inclusion exclusion of a row in resultant\n *      DataModel instance\n * @param {FilteringMode} [config.mode=FilteringMode.NORMAL] - The mode of the selection\n *\n * @return {PreparatorFunction} Function which expects an instance of DataModel on which the operator needs to be\n *      applied.\n */\nexport const select = (...args) => dm => dm.select(...args);\n\n/**\n * This is functional version of projection operator. {@link link_to_projection | Projection} is a column filtering\n * operation.It expects list of fields name and either include those or exclude those based on {@link FilteringMode} on\n * the  resultant variable.It returns a function which is called with the DataModel instance on which the action needs\n * to be performed.\n *\n * Projection expects array of fields name based on which it creates the selection and rejection set. All the field\n * whose name is present in array goes in selection set and rest of the fields goes in rejection set.\n *\n * {@link FilteringMode} operates on the selection and rejection set to determine which one would reflect in the\n * resulatant datamodel.\n *\n * @warning\n * Selection and rejection set is only a logical idea for concept explanation purpose.\n *\n * @error\n * `FilteringMode.ALL` is not a valid working mode for functional version of `select`. Its only avialable on the\n * chained version.\n *\n * @public\n * @namespace DataModel\n * @module Operators\n *\n * @param {Array.<string | Regexp>} projField - An array of column names in string or regular expression.\n * @param {Object} [config] - An optional config to control the creation of new DataModel\n * @param {FilteringMode} [config.mode=FilteringMode.NORMAL] - Mode of the projection\n *\n * @return {PreparatorFunction} Function which expects an instance of DataModel on which the operator needs to be\n *      applied.\n */\nexport const project = (...args) => dm => dm.project(...args);\n\n/**\n * This is functional version of binnig operator. Binning happens on a measure field based on a binning configuration.\n * Binning in DataModel does not aggregate the number of rows present in DataModel instance after binning, it just adds\n * a new field with the binned value. Refer binning {@link example_of_binning | example} to have a intuition of what\n * binning is and the use case.\n *\n * Binning can be configured by\n * - providing custom bin configuration with non uniform buckets\n * - providing bin count\n * - providing each bin size\n *\n * When custom buckets are provided as part of binning configuration\n * @example\n *  // DataModel already prepared and assigned to dm vairable\n *  const buckets = {\n *      start: 30\n *      stops: [80, 100, 110]\n *  };\n *  const config = { buckets, name: 'binnedHP' }\n *  const binFn = bin('horsepower', config);\n *  const binnedDm = binFn(dm);\n *\n * @text\n * When `binCount` is defined as part of binning configuration\n * @example\n *  // DataModel already prepared and assigned to dm vairable\n *  const config = { binCount: 5, name: 'binnedHP' }\n *  const binFn = bin('horsepower', config);\n *  const binnedDm = binFn(Dm);\n *\n * @text\n * When `binSize` is defined as part of binning configuration\n * @example\n *  // DataModel already prepared and assigned to dm vairable\n *  const config = { binSize: 200, name: 'binnedHorsepower' }\n *  const binnedDm = dataModel.bin('horsepower', config);\n *  const binnedDm = binFn(Dm);\n *\n * @public\n * @namespace DataModel\n * @module Operators\n *\n * @param {String} name Name of measure which will be used to create bin\n * @param {Object} config Config required for bin creation\n * @param {Array.<Number>} config.bucketObj.stops Defination of bucket ranges. Two subsequent number from arrays\n *      are picked and a range is created. The first number from range is inclusive and the second number from range\n *      is exclusive.\n * @param {Number} [config.bucketObj.startAt] Force the start of the bin from a particular number.\n *      If not mentioned, the start of the bin or the lower domain of the data if stops is not mentioned, else its\n *      the first value of the stop.\n * @param {Number} config.binSize Bucket size for each bin\n * @param {Number} config.binCount Number of bins which will be created\n * @param {String} config.name Name of the new binned field to be created\n *\n * @return {PreparatorFunction} Function which expects an instance of DataModel on which the operator needs to be\n *      applied.\n */\nexport const bin = (...args) => dm => dm.bin(...args);\n\n/**\n * This is functional version of `groupBy` operator.Groups the data using particular dimensions and by reducing\n * measures. It expects a list of dimensions using which it projects the datamodel and perform aggregations to reduce\n * the duplicate tuples. Refer this {@link link_to_one_example_with_group_by | document} to know the intuition behind\n * groupBy.\n *\n * DataModel by default provides definition of few {@link reducer | Reducers}.\n * {@link ReducerStore | User defined reducers} can also be registered.\n *\n * This is the chained implementation of `groupBy`.\n * `groupBy` also supports {@link link_to_compose_groupBy | composability}\n *\n * @example\n * const groupBy = DataModel.Operators.groupBy;\n * const groupedFn = groupBy(['Year'], { horsepower: 'max' } );\n * groupedDM = groupByFn(dm);\n *\n * @public\n *\n * @param {Array.<string>} fieldsArr - Array containing the name of dimensions\n * @param {Object} [reducers={}] - A map whose key is the variable name and value is the name of the reducer. If its\n *      not passed, or any variable is ommitted from the object, default aggregation function is used from the\n *      schema of the variable.\n *\n * @return {PreparatorFunction} Function which expects an instance of DataModel on which the operator needs to be\n *      applied.\n */\nexport const groupBy = (...args) => dm => dm.groupBy(...args);\n\n/**\n * Enables composing operators to run multiple operations and save group of operataion as named opration on a DataModel.\n * The resulting DataModel will be the result of all the operation provided. The operations provided will be executed in\n * a serial manner ie. result of one operation will be the input for the next operations (like pipe operator in unix).\n *\n * Suported operations in compose are\n * - `select`\n * - `project`\n * - `groupBy`\n * - `bin`\n * - `compose`\n *\n * @example\n * const compose = DataModel.Operators.compose;\n * const select = DataModel.Operators.select;\n * const project = DataModel.Operators.project;\n *\n * let composedFn = compose(\n *    select(fields => fields.netprofit.value <= 15),\n *    project(['netprofit', 'netsales']));\n *\n * const dataModel = new DataModel(data1, schema1);\n *\n * let composedDm = composedFn(dataModel);\n *\n * @public\n * @namespace DataModel\n * @module Operators\n *\n * @param {Array.<Operators>} operators: An array of operation that will be applied on the\n * datatable.\n *\n * @returns {DataModel} Instance of resultant DataModel\n */\nexport const compose = (...operations) =>\n    (dm, config = { saveChild: true }) => {\n        let currentDM = dm;\n        let firstChild;\n        const derivations = [];\n\n        operations.forEach((operation) => {\n            currentDM = operation(currentDM);\n            derivations.push(...currentDM._derivation);\n            if (!firstChild) {\n                firstChild = currentDM;\n            }\n        });\n\n        if (firstChild && firstChild !== currentDM) {\n            firstChild.dispose();\n        }\n\n        // reset all ancestorDerivation saved in-between compose\n        currentDM._ancestorDerivation = [];\n        persistDerivations(\n            dm,\n            currentDM,\n            DM_DERIVATIVES.COMPOSE,\n            null,\n            derivations\n        );\n\n        if (config.saveChild) {\n            currentDM.setParent(dm);\n        } else {\n            currentDM.setParent(null);\n        }\n\n        return currentDM;\n    };\n","/**\n * Wrapper on calculateVariable() method of DataModel to behave\n * the pure-function functionality.\n *\n * @param {Array} args - The argument list.\n * @return {any} Returns the returned value of calling function.\n */\nexport const calculateVariable = (...args) => dm => dm.calculateVariable(...args);\n\n/**\n * Wrapper on sort() method of DataModel to behave\n * the pure-function functionality.\n *\n * @param {Array} args - The argument list.\n * @return {any} Returns the returned value of calling function.\n */\nexport const sort = (...args) => dm => dm.sort(...args);\n","import { crossProduct } from './cross-product';\nimport { naturalJoinFilter } from './natural-join-filter-function';\n\nexport function naturalJoin (dataModel1, dataModel2) {\n    return crossProduct(dataModel1, dataModel2, naturalJoinFilter(dataModel1, dataModel2), true);\n}\n","module.exports = function(module) {\n\tif (!module.webpackPolyfill) {\n\t\tmodule.deprecate = function() {};\n\t\tmodule.paths = [];\n\t\t// module.parent = undefined by default\n\t\tif (!module.children) module.children = [];\n\t\tObject.defineProperty(module, \"loaded\", {\n\t\t\tenumerable: true,\n\t\t\tget: function() {\n\t\t\t\treturn module.l;\n\t\t\t}\n\t\t});\n\t\tObject.defineProperty(module, \"id\", {\n\t\t\tenumerable: true,\n\t\t\tget: function() {\n\t\t\t\treturn module.i;\n\t\t\t}\n\t\t});\n\t\tmodule.webpackPolyfill = 1;\n\t}\n\treturn module;\n};\n","'use strict';\n\nObject.defineProperty(exports, '__esModule', {\n    value: true\n});\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\nvar _lib = require('./lib');\n\nvar _lib2 = _interopRequireDefault(_lib);\n\nvar _containerManager = require('./container-manager');\n\nvar _containerManager2 = _interopRequireDefault(_containerManager);\n\nvar slLib = _lib2['default'].init(typeof window !== \"undefined\" ? window : undefined),\n    doc = slLib.win.document,\n    M = slLib.win.Math,\n    max = M.max,\n    round = M.round,\n    BLANK = '',\n    htmlSplCharSpace = { ' ': '&nbsp;' },\n    documentSupport = slLib.getDocumentSupport(),\n    SVG_BBOX_CORRECTION = documentSupport.isWebKit ? 0 : 4.5;\n\n/*\n * Create new instance of SmartLabelManager.\n *\n * SmartLabelManager controls the lifetime of the execution space where the text's metrics will be calculated.\n * This takes a string for a given style and returns the height, width.\n * If a bound box is defined it wraps the text and returns the wrapped height and width.\n * It allows to append ellipsis at the end if the text is truncated.\n *\n * @param {String | Number} id - Id of the instance. If the same id is passed, it disposes the old instance and\n *                              save the new one;\n * @param {String | HTMLElement} container - The id or the instance of the container where the intermediate dom\n *                              elements are to be attached. If not passed, it appends in div\n *\n * @param {Boolean} useEllipses - This decides if a ellipses to be appended if the text is truncated.\n * @param {Object} options - Control options\n *                          {\n *                              maxCacheLimit: No of letter to be cached. Default: 500.\n *                          }\n * @constructor\n */\nfunction SmartLabelManager(id, container, useEllipses, options) {\n    var wrapper,\n        prop,\n        max,\n        prevInstance,\n        isBrowserLess = false,\n        store = SmartLabelManager.store;\n\n    if (typeof id === 'undefined' || typeof id === 'object') {\n        return;\n    }\n\n    if (prevInstance = store[id]) {\n        prevInstance.dispose();\n    }\n\n    store[id] = this;\n    options = options || {};\n    options.maxCacheLimit = isFinite(max = options.maxCacheLimit) ? max : slLib.maxDefaultCacheLimit;\n\n    if (typeof container === 'string') {\n        container = doc.getElementById(container);\n    }\n\n    wrapper = slLib.createContainer(container);\n    wrapper.innerHTML = slLib.testStrAvg;\n\n    if (documentSupport.isHeadLess || !documentSupport.isIE && !wrapper.offsetHeight && !wrapper.offsetWidth) {\n        isBrowserLess = true;\n    }\n\n    wrapper.innerHTML = '';\n    for (prop in slLib.parentContainerStyle) {\n        wrapper.style[prop] = slLib.parentContainerStyle[prop];\n    }\n\n    this.id = id;\n    this.parentContainer = wrapper;\n\n    this._containerManager = new _containerManager2['default'](wrapper, isBrowserLess, 10);\n    this._showNoEllipses = !useEllipses;\n    this._init = true;\n    this.style = {};\n    this.options = options;\n\n    this.setStyle();\n}\n\n/*\n * getSmartText returns the text separated by <br/> whenever a break is necessary. This is to recgonize one\n * generalized format independent of the implementation (canvas based solution, svg based solution). This method\n * converts the output of getSmartText().text to array of lines if the text is wrapped. It sets a named property\n * `lines` on the object passed as parameter.\n *\n * @param {Object} smartlabel - the object returned by getSmartText based on which line arr which to be formed.\n *\n * @return {Object} - The same object which was passed in the arguments. Also a named property `lines` is set.\n */\nSmartLabelManager.textToLines = function (smartlabel) {\n    smartlabel = smartlabel || {};\n\n    if (!smartlabel.text) {\n        smartlabel.text = '';\n    } else if (typeof smartlabel.text !== 'string') {\n        smartlabel.text = smartlabel.text.toString();\n    }\n\n    smartlabel.lines = smartlabel.text.split(/\\n|<br\\s*?\\/?>/ig);\n    return smartlabel;\n};\n\n// Saves all the instance created so far\nSmartLabelManager.store = {};\n\n// Calculates space taken by a character with an approximation value which is calculated by repeating the\n// character by string length times.\nSmartLabelManager.prototype._calCharDimWithCache = function (text, calculateDifference, length) {\n    if (!this._init) {\n        return false;\n    }\n\n    var size,\n        csArr,\n        tw,\n        twi,\n        cachedStyle,\n        asymmetricDifference,\n        maxAdvancedCacheLimit = this.options.maxCacheLimit,\n        container = this._container,\n        style = this.style || {},\n        cache = this._advancedCache || (this._advancedCache = {}),\n        advancedCacheKey = this._advancedCacheKey || (this._advancedCacheKey = []),\n        cacheName = text + (style.fontSize || BLANK) + (style.fontFamily || BLANK) + (style.fontWeight || BLANK) + (style.fontStyle || BLANK),\n        cacheInitName = text + 'init' + (style.fontSize || BLANK) + (style.fontFamily || BLANK) + (style.fontWeight || BLANK) + (style.fontStyle || BLANK);\n\n    htmlSplCharSpace[text] && (text = htmlSplCharSpace[text]);\n\n    if (!calculateDifference) {\n        asymmetricDifference = 0;\n    } else {\n        if ((asymmetricDifference = cache[cacheInitName]) === undefined) {\n            container.innerHTML = text.repeat ? text.repeat(length) : Array(length + 1).join(text); // jshint ignore:line\n            tw = container.offsetWidth;\n\n            container.innerHTML = text;\n            twi = container.offsetWidth;\n\n            asymmetricDifference = cache[cacheInitName] = (tw - length * twi) / (length + 1);\n            advancedCacheKey.push(cacheInitName);\n            if (advancedCacheKey.length > maxAdvancedCacheLimit) {\n                delete cache[advancedCacheKey.shift()];\n            }\n        }\n    }\n\n    if (cachedStyle = cache[cacheName]) {\n        csArr = cachedStyle.split(',');\n        return {\n            width: parseFloat(csArr[0], 10),\n            height: parseFloat(csArr[1], 10)\n        };\n    }\n\n    container.innerHTML = text;\n\n    size = {\n        height: container.offsetHeight,\n        width: container.offsetWidth + asymmetricDifference\n    };\n\n    cache[cacheName] = size.width + ',' + size.height;\n    advancedCacheKey.push(cacheName);\n    if (advancedCacheKey.length > maxAdvancedCacheLimit) {\n        delete cache[advancedCacheKey.shift()];\n    }\n\n    return size;\n};\n\n// Provide function to calculate the height and width based on the environment and available support from dom.\nSmartLabelManager.prototype._getWidthFn = function () {\n    var contObj = this._containerObj,\n        container = this._container,\n        svgText = contObj.svgText;\n\n    if (svgText) {\n        return function (str) {\n            var bbox, width;\n\n            svgText.textContent = str;\n            bbox = svgText.getBBox();\n            width = bbox.width - SVG_BBOX_CORRECTION;\n            if (width < 1) {\n                width = bbox.width;\n            }\n\n            return width;\n        };\n    } else {\n        return function (str) {\n            container.innerHTML = str;\n            return container.offsetWidth;\n        };\n    }\n};\n\n/*\n * Sets the style based on which the text's metrics to be calculated.\n *\n * @param {Object} style - The style object which affects the text size\n *                      {\n *                          fontSize / 'font-size' : MUST BE FOLLOWED BY PX (10px, 11px)\n *                          fontFamily / 'font-family'\n *                          fontWeight / 'font-weight'\n *                          fontStyle / 'font-style'\n *                      }\n *\n * @return {SmartLabelManager} - Current instance of SmartLabelManager\n */\nSmartLabelManager.prototype.setStyle = function (style) {\n    if (!this._init) {\n        return this;\n    }\n\n    var sCont;\n\n    if (style === this.style && !this._styleNotSet) {\n        return;\n    }\n\n    if (!style) {\n        style = this.style;\n    }\n\n    slLib.setLineHeight(style);\n    this.style = style;\n\n    this._containerObj = sCont = this._containerManager.get(style);\n\n    if (this._containerObj) {\n        this._container = sCont.node;\n        this._context = sCont.context;\n        this._cache = sCont.charCache;\n        this._lineHeight = sCont.lineHeight;\n        this._styleNotSet = false;\n    } else {\n        this._styleNotSet = true;\n    }\n\n    return this;\n};\n\n/*\n * Decides whether ellipses to be shown if the node is truncated\n *\n * @param {Boolean} useEllipses - decides if a ellipses to be appended if the text is truncated. Default: false\n *\n * @return {SmartLabelManager} - Current instance of SmartLabelManager\n */\nSmartLabelManager.prototype.useEllipsesOnOverflow = function (useEllipses) {\n    if (!this._init) {\n        return this;\n    }\n    this._showNoEllipses = !useEllipses;\n    return this;\n};\n\n/*\n * Get wrapped or truncated text if a bound box is defined around it. The result text would be separated by <br/>\n * if wrapped\n *\n * @param {String} text - the subject text\n * @param {Number} maxWidth - width in px of the the bound box\n * @param {Number} maxHeight - height in px of the the bound box\n * @param {Boolean} noWrap - whether the text to be wrapped. Default false.\n *\n * @return {Object} - The metrics of the text bounded by the box\n *                  {\n *                      height : height of the wrapped text\n *                      width : width of the wrapped text\n *                      isTruncated : whether the text is truncated\n *                      maxHeight : Maximum height given\n *                      maxWidth : Maximum width given\n *                      oriText : Original text sent\n *                      oriTextHeight : Original text height\n *                      oriTextWidth : Original text width\n *                      text : SMART TEXT\n *                  }\n */\nSmartLabelManager.prototype.getSmartText = function (text, maxWidth, maxHeight, noWrap) {\n    if (!this._init) {\n        return false;\n    }\n\n    if (text === undefined || text === null) {\n        text = '';\n    } else if (typeof text !== 'string') {\n        text = text.toString();\n    }\n\n    var len,\n        trimStr,\n        tempArr,\n        tmpText,\n        maxWidthWithEll,\n        toolText,\n        oriWidth,\n        oriHeight,\n        newCharIndex,\n        nearestChar,\n        tempChar,\n        getWidth,\n        initialLeft,\n        initialTop,\n        getOriSizeImproveObj,\n        spanArr,\n        x,\n        y,\n        minWidth,\n        elem,\n        chr,\n        elemRightMostPoint,\n        elemLowestPoint,\n        lastBR,\n        removeFromIndex,\n        removeFromIndexForEllipses,\n        hasHTMLTag = false,\n        maxStrWidth = 0,\n        lastDash = -1,\n        lastSpace = -1,\n        lastIndexBroken = -1,\n        strWidth = 0,\n        strHeight = 0,\n        oriTextArr = [],\n        i = 0,\n        ellipsesStr = this._showNoEllipses ? '' : '...',\n        lineHeight = this._lineHeight,\n        context = this._context,\n        container = this._container,\n        sCont = this._containerObj,\n        ellipsesWidth = sCont.ellipsesWidth,\n        dotWidth = sCont.dotWidth,\n        characterArr = [],\n        dashIndex = -1,\n        spaceIndex = -1,\n        lastLineBreak = -1,\n        fastTrim = function fastTrim(str) {\n        str = str.replace(/^\\s\\s*/, '');\n        var ws = /\\s/,\n            i = str.length;\n        while (ws.test(str.charAt(i -= 1))) {/* jshint noempty:false */}\n        return str.slice(0, i + 1);\n    },\n        smartLabel = {\n        text: text,\n        maxWidth: maxWidth,\n        maxHeight: maxHeight,\n        width: null,\n        height: null,\n        oriTextWidth: null,\n        oriTextHeight: null,\n        oriText: text,\n        isTruncated: false\n    };\n\n    getWidth = this._getWidthFn();\n\n    // In some browsers, offsetheight of a single-line text is getting little (1 px) heigher value of the\n    // lineheight. As a result, smartLabel is unable to return single-line text.\n    // To fix this, increase the maxHeight a little amount. Hence maxHeight =  lineHeight * 1.2\n    if (maxHeight === lineHeight) {\n        maxHeight *= 1.2;\n    }\n\n    if (container) {\n        if (!documentSupport.isBrowserLess) {\n            hasHTMLTag = slLib.xmlTagRegEx.test(text);\n            if (!hasHTMLTag) {\n                // Due to support of <,> for xml we convert &lt;, &gt; to <,> respectively so to get the correct\n                // width it is required to convert the same before calculation for the new improve version of the\n                // get text width.\n                tmpText = text.replace(slLib.ltgtRegex, function (match) {\n                    return match === '&lt;' ? '<' : '>';\n                });\n                getOriSizeImproveObj = this.getOriSize(tmpText, true);\n\n                smartLabel.oriTextWidth = oriWidth = getOriSizeImproveObj.width;\n                smartLabel.oriTextHeight = oriHeight = getOriSizeImproveObj.height;\n            } else {\n                container.innerHTML = text;\n                smartLabel.oriTextWidth = oriWidth = container.offsetWidth;\n                smartLabel.oriTextHeight = oriHeight = container.offsetHeight;\n            }\n\n            if (oriHeight <= maxHeight && oriWidth <= maxWidth) {\n                smartLabel.width = smartLabel.oriTextWidth = oriWidth;\n                smartLabel.height = smartLabel.oriTextHeight = oriHeight;\n                return smartLabel;\n            }\n\n            if (lineHeight > maxHeight) {\n                smartLabel.text = '';\n                smartLabel.width = smartLabel.oriTextWidth = 0;\n                smartLabel.height = smartLabel.oriTextHeight = 0;\n                return smartLabel;\n            }\n        }\n\n        // Calculate width with ellipses\n        text = fastTrim(text).replace(/(\\s+)/g, ' ');\n        maxWidthWithEll = this._showNoEllipses ? maxWidth : maxWidth - ellipsesWidth;\n\n        if (!hasHTMLTag) {\n            oriTextArr = text.split('');\n            len = oriTextArr.length;\n            trimStr = '', tempArr = [];\n            tempChar = oriTextArr[0];\n\n            if (this._cache[tempChar]) {\n                minWidth = this._cache[tempChar].width;\n            } else {\n                minWidth = getWidth(tempChar);\n                this._cache[tempChar] = { width: minWidth };\n            }\n\n            if (maxWidthWithEll > minWidth) {\n                tempArr = text.substr(0, slLib.getNearestBreakIndex(text, maxWidthWithEll, this)).split('');\n                i = tempArr.length;\n            } else if (minWidth > maxWidth) {\n                smartLabel.text = '';\n                smartLabel.width = smartLabel.oriTextWidth = smartLabel.height = smartLabel.oriTextHeight = 0;\n                return smartLabel;\n            } else if (ellipsesStr) {\n                maxWidthWithEll = maxWidth - 2 * dotWidth;\n                if (maxWidthWithEll > minWidth) {\n                    ellipsesStr = '..';\n                } else {\n                    maxWidthWithEll = maxWidth - dotWidth;\n                    if (maxWidthWithEll > minWidth) {\n                        ellipsesStr = '.';\n                    } else {\n                        maxWidthWithEll = 0;\n                        ellipsesStr = '';\n                    }\n                }\n            }\n\n            strWidth = getWidth(tempArr.join(''));\n            strHeight = this._lineHeight;\n\n            if (noWrap) {\n                for (; i < len; i += 1) {\n                    tempChar = tempArr[i] = oriTextArr[i];\n                    if (this._cache[tempChar]) {\n                        minWidth = this._cache[tempChar].width;\n                    } else {\n                        if (!getOriSizeImproveObj || !(minWidth = getOriSizeImproveObj.detailObj[tempChar])) {\n                            minWidth = getWidth(tempChar);\n                        }\n                        this._cache[tempChar] = {\n                            width: minWidth\n                        };\n                    }\n                    strWidth += minWidth;\n                    if (strWidth > maxWidthWithEll) {\n                        if (!trimStr) {\n                            trimStr = tempArr.slice(0, -1).join('');\n                        }\n                        if (strWidth > maxWidth) {\n                            smartLabel.text = fastTrim(trimStr) + ellipsesStr;\n                            smartLabel.tooltext = smartLabel.oriText;\n                            smartLabel.width = getWidth(smartLabel.text);\n                            smartLabel.height = this._lineHeight;\n                            return smartLabel;\n                        }\n                    }\n                }\n\n                smartLabel.text = tempArr.join('');\n                smartLabel.width = strWidth;\n                smartLabel.height = this._lineHeight;\n                return smartLabel;\n            } else {\n                for (; i < len; i += 1) {\n                    tempChar = tempArr[i] = oriTextArr[i];\n                    if (tempChar === ' ' && !context) {\n                        tempChar = '&nbsp;';\n                    }\n\n                    if (this._cache[tempChar]) {\n                        minWidth = this._cache[tempChar].width;\n                    } else {\n                        if (!getOriSizeImproveObj || !(minWidth = getOriSizeImproveObj.detailObj[tempChar])) {\n                            minWidth = getWidth(tempChar);\n                        }\n                        this._cache[tempChar] = {\n                            width: minWidth\n                        };\n                    }\n                    strWidth += minWidth;\n\n                    if (strWidth > maxWidthWithEll) {\n                        if (!trimStr) {\n                            trimStr = tempArr.slice(0, -1).join('');\n                        }\n                        if (strWidth > maxWidth) {\n                            /** @todo use regular expressions for better performance. */\n                            lastSpace = text.substr(0, tempArr.length).lastIndexOf(' ');\n                            lastDash = text.substr(0, tempArr.length).lastIndexOf('-');\n                            if (lastSpace > lastIndexBroken) {\n                                strWidth = getWidth(tempArr.slice(lastIndexBroken + 1, lastSpace).join(''));\n                                tempArr.splice(lastSpace, 1, '<br/>');\n                                lastIndexBroken = lastSpace;\n                                newCharIndex = lastSpace + 1;\n                            } else if (lastDash > lastIndexBroken) {\n                                if (lastDash === tempArr.length - 1) {\n                                    strWidth = getWidth(tempArr.slice(lastIndexBroken + 1, lastSpace).join(''));\n                                    tempArr.splice(lastDash, 1, '<br/>-');\n                                } else {\n                                    strWidth = getWidth(tempArr.slice(lastIndexBroken + 1, lastSpace).join(''));\n                                    tempArr.splice(lastDash, 1, '-<br/>');\n                                }\n                                lastIndexBroken = lastDash;\n                                newCharIndex = lastDash + 1;\n                            } else {\n                                tempArr.splice(tempArr.length - 1, 1, '<br/>' + oriTextArr[i]);\n                                lastLineBreak = tempArr.length - 2;\n                                strWidth = getWidth(tempArr.slice(lastIndexBroken + 1, lastLineBreak + 1).join(''));\n                                lastIndexBroken = lastLineBreak;\n                                newCharIndex = i;\n                            }\n                            strHeight += this._lineHeight;\n                            if (strHeight > maxHeight) {\n                                smartLabel.text = fastTrim(trimStr) + ellipsesStr;\n                                smartLabel.tooltext = smartLabel.oriText;\n                                // The max width among all the lines will be the width of the string.\n                                smartLabel.width = maxWidth;\n                                smartLabel.height = strHeight - this._lineHeight;\n                                return smartLabel;\n                            } else {\n                                maxStrWidth = max(maxStrWidth, strWidth);\n                                trimStr = null;\n                                nearestChar = slLib.getNearestBreakIndex(text.substr(newCharIndex), maxWidthWithEll, this);\n                                strWidth = getWidth(text.substr(newCharIndex, nearestChar || 1));\n                                if (tempArr.length < newCharIndex + nearestChar) {\n                                    tempArr = tempArr.concat(text.substr(tempArr.length, newCharIndex + nearestChar - tempArr.length).split(''));\n                                    i = tempArr.length - 1;\n                                }\n                            }\n                        }\n                    }\n                }\n\n                maxStrWidth = max(maxStrWidth, strWidth);\n\n                smartLabel.text = tempArr.join('');\n                smartLabel.width = maxStrWidth;\n                smartLabel.height = strHeight;\n                return smartLabel;\n            }\n        } else {\n            toolText = text.replace(slLib.spanAdditionRegx, '$2');\n            text = text.replace(slLib.spanAdditionRegx, slLib.spanAdditionReplacer);\n            text = text.replace(/(<br\\s*\\/*\\>)/g, '<span class=\"' + [slLib.classNameWithTag, ' ', slLib.classNameWithTagBR].join('') + '\">$1</span>');\n\n            container.innerHTML = text;\n\n            spanArr = container[documentSupport.childRetriverFn](documentSupport.childRetriverString);\n\n            for (x = 0, y = spanArr.length; x < y; x += 1) {\n                elem = spanArr[x];\n                //chech whether this span is temporary inserted span from it's class\n                if (documentSupport.noClassTesting || slLib.classNameReg.test(elem.className)) {\n                    chr = elem.innerHTML;\n                    if (chr !== '') {\n                        if (chr === ' ') {\n                            spaceIndex = characterArr.length;\n                        } else if (chr === '-') {\n                            dashIndex = characterArr.length;\n                        }\n\n                        characterArr.push({\n                            spaceIdx: spaceIndex,\n                            dashIdx: dashIndex,\n                            elem: elem\n                        });\n                        oriTextArr.push(chr);\n                    }\n                }\n            }\n\n            i = 0;\n            len = characterArr.length;\n            minWidth = characterArr[0].elem.offsetWidth;\n\n            if (minWidth > maxWidth) {\n                smartLabel.text = '';\n                smartLabel.width = smartLabel.oriTextWidth = smartLabel.height = smartLabel.oriTextHeight = 0;\n\n                return smartLabel;\n            } else if (minWidth > maxWidthWithEll && !this._showNoEllipses) {\n\n                maxWidthWithEll = maxWidth - 2 * dotWidth;\n                if (maxWidthWithEll > minWidth) {\n                    ellipsesStr = '..';\n                } else {\n                    maxWidthWithEll = maxWidth - dotWidth;\n                    if (maxWidthWithEll > minWidth) {\n                        ellipsesStr = '.';\n                    } else {\n                        maxWidthWithEll = 0;\n                        ellipsesStr = '';\n                    }\n                }\n            }\n\n            initialLeft = characterArr[0].elem.offsetLeft;\n            initialTop = characterArr[0].elem.offsetTop;\n\n            if (noWrap) {\n                for (; i < len; i += 1) {\n                    elem = characterArr[i].elem;\n                    elemRightMostPoint = elem.offsetLeft - initialLeft + elem.offsetWidth;\n\n                    if (elemRightMostPoint > maxWidthWithEll) {\n                        if (!removeFromIndexForEllipses) {\n                            removeFromIndexForEllipses = i;\n                        }\n                        if (container.offsetWidth > maxWidth) {\n                            removeFromIndex = i;\n                            i = len;\n                        }\n                    }\n                }\n            } else {\n                for (; i < len; i += 1) {\n                    elem = characterArr[i].elem;\n                    elemLowestPoint = elem.offsetHeight + (elem.offsetTop - initialTop);\n                    elemRightMostPoint = elem.offsetLeft - initialLeft + elem.offsetWidth;\n\n                    lastBR = null;\n\n                    if (elemRightMostPoint > maxWidthWithEll) {\n                        if (!removeFromIndexForEllipses) {\n                            removeFromIndexForEllipses = i;\n                        }\n\n                        if (elemRightMostPoint > maxWidth) {\n                            lastSpace = characterArr[i].spaceIdx;\n                            lastDash = characterArr[i].dashIdx;\n                            if (lastSpace > lastIndexBroken) {\n                                characterArr[lastSpace].elem.innerHTML = '<br/>';\n                                lastIndexBroken = lastSpace;\n                            } else if (lastDash > lastIndexBroken) {\n                                if (lastDash === i) {\n                                    // in case the overflowing character itself is the '-'\n                                    characterArr[lastDash].elem.innerHTML = '<br/>-';\n                                } else {\n                                    characterArr[lastDash].elem.innerHTML = '-<br/>';\n                                }\n                                lastIndexBroken = lastDash;\n                            } else {\n                                elem.parentNode.insertBefore(lastBR = doc.createElement('br'), elem);\n                            }\n\n                            //check whether this break made current element outside the area height\n                            if (elem.offsetHeight + elem.offsetTop > maxHeight) {\n                                //remove the lastly inserted line break\n                                if (lastBR) {\n                                    lastBR.parentNode.removeChild(lastBR);\n                                } else if (lastIndexBroken === lastDash) {\n                                    characterArr[lastDash].elem.innerHTML = '-';\n                                } else {\n                                    characterArr[lastSpace].elem.innerHTML = ' ';\n                                }\n                                removeFromIndex = i;\n                                //break the looping condition\n                                i = len;\n                            } else {\n                                removeFromIndexForEllipses = null;\n                            }\n                        }\n                    } else {\n                        //check whether this break made current element outside the area height\n                        if (elemLowestPoint > maxHeight) {\n                            removeFromIndex = i;\n                            i = len;\n                        }\n                    }\n                }\n            }\n\n            if (removeFromIndex < len) {\n                //set the trancated property of the smartlabel\n                smartLabel.isTruncated = true;\n\n                /** @todo is this really needed? */\n                removeFromIndexForEllipses = removeFromIndexForEllipses ? removeFromIndexForEllipses : removeFromIndex;\n\n                for (i = len - 1; i >= removeFromIndexForEllipses; i -= 1) {\n                    elem = characterArr[i].elem;\n                    //chech whether this span is temporary inserted span from it's class\n                    elem.parentNode.removeChild(elem);\n                }\n\n                for (; i >= 0; i -= 1) {\n                    elem = characterArr[i].elem;\n                    if (slLib.classNameBrReg.test(elem.className)) {\n                        //chech whether this span is temporary inserted span from it's class\n                        elem.parentNode.removeChild(elem);\n                    } else {\n                        i = 0;\n                    }\n                }\n            }\n\n            //get the smart text\n            smartLabel.text = container.innerHTML.replace(slLib.spanRemovalRegx, '$1').replace(/\\&amp\\;/g, '&');\n            if (smartLabel.isTruncated) {\n                smartLabel.text += ellipsesStr;\n                smartLabel.tooltext = toolText;\n            }\n        }\n\n        smartLabel.height = container.offsetHeight;\n        smartLabel.width = container.offsetWidth;\n\n        return smartLabel;\n    } else {\n        smartLabel.error = new Error('Body Tag Missing!');\n        return smartLabel;\n    }\n};\n\n/*\n * Get the height and width of a text.\n *\n * @param {String} text - Text whose metrics to be measured\n * @param {Boolean} Optional detailedCalculationFlag - this flag if set it calculates per letter position\n *                          information and returns it. Ideally you dont need it unless you want to post process the\n *                          string. And its an EXPENSIVE OPERATION.\n *\n * @return {Object} - If detailedCalculationFlag is set to true the returned object would be\n *                  {\n *                      height: height of the text\n *                      width: width of the text\n *                      detailObj: detail calculation of letters in the format {lettername: width}\n *                  }\n *                  If detailedCalculationFlag is set to false the returned object wont have the detailObj prop.\n */\nSmartLabelManager.prototype.getOriSize = function (text, detailedCalculationFlag) {\n    if (!this._init) {\n        return false;\n    }\n\n    var textArr,\n        letter,\n        lSize,\n        i,\n        l,\n        cumulativeSize = 0,\n        height = 0,\n        indiSizeStore = {};\n\n    if (!detailedCalculationFlag) {\n        return this._calCharDimWithCache(text);\n    }\n\n    // Calculate the width of every letter with an approximation\n    textArr = text.split('');\n    for (i = 0, l = textArr.length; i < l; i++) {\n        letter = textArr[i];\n        lSize = this._calCharDimWithCache(letter, true, textArr.length);\n        height = max(height, lSize.height);\n        cumulativeSize += lSize.width;\n        indiSizeStore[letter] = lSize.width;\n    }\n\n    return {\n        width: round(cumulativeSize),\n        height: height,\n        detailObj: indiSizeStore\n    };\n};\n\n/*\n * Dispose the container and object allocated by the smartlabel\n */\nSmartLabelManager.prototype.dispose = function () {\n    if (!this._init) {\n        return this;\n    }\n\n    this._containerManager && this._containerManager.dispose && this._containerManager.dispose();\n\n    delete this._container;\n    delete this._context;\n    delete this._cache;\n    delete this._containerManager;\n    delete this._containerObj;\n    delete this.id;\n    delete this.style;\n    delete this.parentContainer;\n    delete this._showNoEllipses;\n\n    return this;\n};\n\nexports['default'] = SmartLabelManager;\nmodule.exports = exports['default'];","'use strict';\n\nObject.defineProperty(exports, '__esModule', {\n\tvalue: true\n});\nvar lib = {\n\tinit: function init(win) {\n\t\tvar doc = win.document,\n\t\t    nav = win.navigator,\n\t\t    userAgent = nav.userAgent,\n\t\t    DIV = 'DIV',\n\t\t    ceil = Math.ceil,\n\t\t    floor = Math.floor,\n\t\t    containerInstanceCount = 0,\n\t\t    clsNameSpace = 'fusioncharts-smartlabel-',\n\t\t    containerClass = clsNameSpace + 'container',\n\t\t    classNameWithTag = clsNameSpace + 'tag',\n\t\t    classNameWithTagBR = clsNameSpace + 'br';\n\n\t\tlib = {\n\t\t\twin: win,\n\n\t\t\tcontainerClass: containerClass,\n\n\t\t\tclassNameWithTag: classNameWithTag,\n\n\t\t\tclassNameWithTagBR: classNameWithTagBR,\n\n\t\t\tmaxDefaultCacheLimit: 500,\n\n\t\t\tclassNameReg: new RegExp('\\b' + classNameWithTag + '\\b'),\n\n\t\t\tclassNameBrReg: new RegExp('\\b' + classNameWithTagBR + '\\b'),\n\n\t\t\tspanAdditionRegx: /(<[^<\\>]+?\\>)|(&(?:[a-z]+|#[0-9]+);|.)/ig,\n\n\t\t\tspanAdditionReplacer: '$1<span class=\"' + classNameWithTag + '\">$2</span>',\n\n\t\t\tspanRemovalRegx: new RegExp('\\\\<span[^\\\\>]+?' + classNameWithTag + '[^\\\\>]{0,}\\\\>(.*?)\\\\<\\\\/span\\\\>', 'ig'),\n\n\t\t\txmlTagRegEx: new RegExp('<[^>][^<]*[^>]+>', 'i'),\n\n\t\t\tltgtRegex: /&lt;|&gt;/g,\n\n\t\t\tbrReplaceRegex: /<br\\/>/ig,\n\n\t\t\ttestStrAvg: 'WgI',\n\n\t\t\t// This style is applied over the parent smartlabel container. The container is kept hidden from the viewport\n\t\t\tparentContainerStyle: {\n\t\t\t\tposition: 'absolute',\n\t\t\t\ttop: '-9999em',\n\t\t\t\twhiteSpace: 'nowrap',\n\t\t\t\tpadding: '0px',\n\t\t\t\twidth: '1px',\n\t\t\t\theight: '1px',\n\t\t\t\toverflow: 'hidden'\n\t\t\t},\n\n\t\t\t// All the style which might affect the text metrics\n\t\t\tsupportedStyle: {\n\t\t\t\tfont: 'font',\n\t\t\t\tfontFamily: 'font-family',\n\t\t\t\t'font-family': 'font-family',\n\t\t\t\tfontWeight: 'font-weight',\n\t\t\t\t'font-weight': 'font-weight',\n\t\t\t\tfontSize: 'font-size',\n\t\t\t\t'font-size': 'font-size',\n\t\t\t\tlineHeight: 'line-height',\n\t\t\t\t'line-height': 'line-height',\n\t\t\t\tfontStyle: 'font-style',\n\t\t\t\t'font-style': 'font-style'\n\t\t\t},\n\n\t\t\t// Get the support list for html the document where the text calcution is to be done.\n\t\t\tgetDocumentSupport: function getDocumentSupport() {\n\t\t\t\tvar childRetriverFn, childRetriverString, noClassTesting;\n\n\t\t\t\tif (doc.getElementsByClassName) {\n\t\t\t\t\tchildRetriverFn = 'getElementsByClassName';\n\t\t\t\t\tchildRetriverString = classNameWithTag;\n\t\t\t\t\tnoClassTesting = true;\n\t\t\t\t} else {\n\t\t\t\t\tchildRetriverFn = 'getElementsByTagName';\n\t\t\t\t\tchildRetriverString = 'span';\n\t\t\t\t\tnoClassTesting = false;\n\t\t\t\t}\n\n\t\t\t\treturn {\n\t\t\t\t\tisIE: /msie/i.test(userAgent) && !win.opera,\n\t\t\t\t\thasSVG: Boolean(win.SVGAngle || doc.implementation.hasFeature('http://www.w3.org/TR/SVG11/feature#BasicStructure', '1.1')),\n\t\t\t\t\tisHeadLess: new RegExp(' HtmlUnit').test(userAgent),\n\t\t\t\t\tisWebKit: new RegExp(' AppleWebKit/').test(userAgent),\n\t\t\t\t\tchildRetriverFn: childRetriverFn,\n\t\t\t\t\tchildRetriverString: childRetriverString,\n\t\t\t\t\tnoClassTesting: noClassTesting\n\t\t\t\t};\n\t\t\t},\n\n\t\t\t/*\n    * Create a html div element and attach it with a parent. All the subsequent operations are performed\n    * by upding this dom tree only.\n    *\n    * @param {HTMLElement} - The html element where the newly created div is to be attached. If not passed,\n    *                      the new div is appended on the body.\n    */\n\t\t\tcreateContainer: function createContainer(containerParent) {\n\t\t\t\tvar body, container;\n\n\t\t\t\tif (containerParent && (containerParent.offsetWidth || containerParent.offsetHeight)) {\n\t\t\t\t\tif (containerParent.appendChild) {\n\t\t\t\t\t\tcontainerParent.appendChild(container = doc.createElement(DIV));\n\t\t\t\t\t\tcontainer.className = containerClass;\n\t\t\t\t\t\tcontainer.setAttribute('aria-hidden', 'true');\n\t\t\t\t\t\tcontainer.setAttribute('role', 'presentation');\n\t\t\t\t\t\treturn container;\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tbody = doc.getElementsByTagName('body')[0];\n\n\t\t\t\t\tif (body && body.appendChild) {\n\t\t\t\t\t\tcontainer = doc.createElement(DIV);\n\t\t\t\t\t\tcontainer.className = containerClass;\n\t\t\t\t\t\tcontainer.setAttribute('aria-hidden', 'true');\n\t\t\t\t\t\tcontainer.setAttribute('role', 'presentation');\n\t\t\t\t\t\tcontainerInstanceCount += 1;\n\t\t\t\t\t\tbody.appendChild(container);\n\t\t\t\t\t\treturn container;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t},\n\n\t\t\t// Finds a approximate position where the text is to be broken\n\t\t\tgetNearestBreakIndex: function getNearestBreakIndex(text, maxWidth, sl) {\n\t\t\t\tif (!text || !text.length) {\n\t\t\t\t\treturn 0;\n\t\t\t\t}\n\n\t\t\t\tvar difference,\n\t\t\t\t    getWidth = sl._getWidthFn(),\n\t\t\t\t    charLen = 0,\n\t\t\t\t    increment = 0,\n\t\t\t\t    oriWidth = getWidth(text),\n\t\t\t\t    avgWidth = oriWidth / text.length;\n\n\t\t\t\tdifference = maxWidth;\n\t\t\t\tcharLen = ceil(maxWidth / avgWidth);\n\n\t\t\t\tif (oriWidth < maxWidth) {\n\t\t\t\t\treturn text.length - 1;\n\t\t\t\t}\n\n\t\t\t\tif (charLen > text.length) {\n\t\t\t\t\tdifference = maxWidth - oriWidth;\n\t\t\t\t\tcharLen = text.length;\n\t\t\t\t}\n\n\t\t\t\twhile (difference > 0) {\n\t\t\t\t\tdifference = maxWidth - getWidth(text.substr(0, charLen));\n\t\t\t\t\tincrement = floor(difference / avgWidth);\n\t\t\t\t\tif (increment) {\n\t\t\t\t\t\tcharLen += increment;\n\t\t\t\t\t} else {\n\t\t\t\t\t\treturn charLen;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\twhile (difference < 0) {\n\t\t\t\t\tdifference = maxWidth - getWidth(text.substr(0, charLen));\n\t\t\t\t\tincrement = floor(difference / avgWidth);\n\t\t\t\t\tif (increment) {\n\t\t\t\t\t\tcharLen += increment;\n\t\t\t\t\t} else {\n\t\t\t\t\t\treturn charLen;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn charLen;\n\t\t\t},\n\n\t\t\t/*\n    * Determine lineheight of a text for a given style. It adds propery lineHeight to the style passed\n    *\n    * @param {Object} - The style based on which the text's metric needs to be calculated. The calculation happens\n    *                  based on fontSize property, if its not present a default font size is assumed.\n    *\n    * @return {Object} - The style that was passed with lineHeight as a named propery set on the object.\n    */\n\t\t\tsetLineHeight: function setLineHeight(styleObj) {\n\t\t\t\tvar fSize = styleObj.fontSize = styleObj.fontSize || '12px';\n\t\t\t\tstyleObj.lineHeight = styleObj.lineHeight || styleObj['line-height'] || parseInt(fSize, 10) * 1.2 + 'px';\n\t\t\t\treturn styleObj;\n\t\t\t}\n\t\t};\n\n\t\treturn lib;\n\t}\n};\n\nexports['default'] = lib;\nmodule.exports = exports['default'];","(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"hyperdis\", [], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"hyperdis\"] = factory();\n\telse\n\t\troot[\"hyperdis\"] = factory();\n})(window, function() {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n","const makeEntry = (arr, sCon) => {\n    arr.forEach((elem) => {\n        if (elem === undefined || elem === null) {\n            return;\n        }\n        sCon[elem] = 1;\n    });\n};\n\nexport default class ForeignSet {\n    constructor (arr) {\n        this._set = {};\n        makeEntry(arr, this._set);\n    }\n\n    append (arr) {\n        makeEntry(arr, this._set);\n        return this;\n    }\n\n    toArray () {\n        return Object.keys(this._set);\n    }\n\n    static difference (set1, set2) {\n        let key;\n        const filteredKeys = [],\n            s1 = set1._set,\n            s2 = set2._set;\n        for (key in s1) {\n            if (!({}).hasOwnProperty.call(s1, key)) {\n                continue;\n            }\n            if (key in s2) {\n                continue;\n            }\n            filteredKeys.push(key);\n        }\n        return new ForeignSet(filteredKeys);\n    }\n}\n","/* global window */\n\nimport ForeignSet from './set';\n\nconst\n    isSimpleObject = (obj) => {\n        let token;\n        if (typeof obj === 'object') {\n            if (obj === null) { return false; }\n            token = Object.prototype.toString.call(obj);\n            if (token === '[object Object]') {\n                return (obj.constructor.toString().match(/^function (.*)\\(\\)/m) || [])[1] === 'Object';\n            }\n        }\n        return false;\n    },\n    minMsThreshold = 16,\n    /* istanbul ignore next */win = typeof window === 'undefined' ? (this || {}) : window,\n    /* istanbul ignore next */ reqAnimFrame = win.requestAnimationFrame || win.webkitRequestAnimationFrame ||\n        win.mozRequestAnimationFrame || win.oRequestAnimationFrame ||\n        win.msRequestAnimationFrame ||\n        function (callback) {\n            setTimeout(callback, minMsThreshold);\n        },\n\n    getTimeBasedId = () => {\n        if (getTimeBasedId.__lastTime === new Date().getTime()) {\n            return (getTimeBasedId.__lastTime).toString() + (getTimeBasedId.__id++).toString();\n        }\n\n        getTimeBasedId.__id = 0;\n        getTimeBasedId.__lastTime = new Date().getTime();\n        return (getTimeBasedId.__lastTime).toString() + (getTimeBasedId.__id++).toString();\n    },\n    pullableRecent = (nodes, fn) => {\n        let nFn = () => {\n            fn(...nodes.map((node) => {\n                const\n                    hist = node.history,\n                    l = hist.length - 1;\n                return [hist[l - 1 < 0 ? 0 : l - 1], hist[l]];\n            }));\n        };\n        nFn.__id = getTimeBasedId();\n        return nFn;\n    },\n    pullableEnd = (nodes, fn) => {\n        let nFn = () => {\n            fn(...nodes.map((node) => {\n                const hist = node.history;\n                return [hist[0], hist[hist.length - 1]];\n            }));\n        };\n        nFn.__id = getTimeBasedId();\n        return nFn;\n    },\n    unique = fns => fns\n                    .reduce((store, fn) => {\n                // @warn function with side effect, it mutates the store passed during initialization\n                        if (fn.__id in store.map) {\n                            return store;\n                        }\n\n                        store.map[fn.__id] = 1;\n                        store.unique.push(fn);\n\n                        return store;\n                    }, { map: {}, unique: [] })\n                    .unique,\n    compose = fns => () => {\n        fns.forEach(fn => fn());\n    },\n    flat = (...params) => {\n        const res = [];\n        params.forEach(param => res.push(...param));\n        return res;\n    },\n    identityMap = arrays => arrays,\n    splitPathProp = (path) => {\n        const pathArr = path.split('.'),\n            len = pathArr.length;\n        return [pathArr.slice(0, len - 1), pathArr[len - 1]];\n    },\n    scheduler = (onFinishCallback) => {\n        let queue = [],\n            animationFrame = null;\n\n        onFinishCallback = onFinishCallback &&\n            typeof onFinishCallback === 'function' && onFinishCallback || (() => { });\n\n        return (listeners, payload) => {\n            [].push.apply(queue, listeners);\n            if (animationFrame === null) {\n                animationFrame = reqAnimFrame(() => {\n                    const tempQ = queue.slice(0);\n                    queue.length = 0;\n                    animationFrame = null;\n\n                    unique(tempQ).forEach(fn => fn());\n                    onFinishCallback(payload);\n                });\n            }\n        };\n    },\n    fetch = namedNode => (...params) => params.map((param) => {\n        const node = namedNode[param];\n        return {\n            name: node.name,\n            qualifiedName: node.qualifiedName,\n            value: node.seed\n        };\n    }),\n    fetchAggregator = (...params) => ({\n        dependencies: params.slice(0, params.length - 1),\n        fn: params[params.length - 1]\n    }),\n    getUpstreamNodes = (list) => {\n        let res = [];\n        const map = {};\n        list.forEach(node => map[node.qualifiedName] = -1);\n        function rec (arr) {\n            arr.forEach((node) => {\n                let qname,\n                    placedIndex,\n                    preArr,\n                    postArr;\n                if (!((qname = node.qualifiedName) in map)) {\n                    map[qname] = res.push(node) - 1;\n                } else {\n                    placedIndex = map[qname];\n                    if (placedIndex !== -1 && placedIndex !== res.length - 1) {\n                        // If not the last element, readjust the array so that the later dependency position is saved\n                        preArr = res.slice(0, placedIndex);\n                        postArr = res.slice(placedIndex + 1);\n                        res = preArr.concat(postArr);\n\n                        // reset the index in map\n                        postArr.forEach((elem, i) => map[elem.qualifiedName] = i + preArr.length);\n                        map[qname] = res.push(node) - 1;\n                    }\n                }\n                rec(node.outgoingEdges);\n            });\n        }\n        rec(list);\n        return res;\n    },\n    resolver = {\n        accumulate: (...params) => {\n            const resp = {};\n            params.forEach((nodeDetails) => {\n                Object.assign(resp, { [nodeDetails.name]: nodeDetails.value });\n            });\n            return resp;\n        },\n        identity: nodeDetails => nodeDetails.value\n    };\n\nfunction resolveDependencyOrder (node, resolved, resolveMap) {\n    let qname;\n    node.edges.forEach((neighbour) => {\n        resolveDependencyOrder(neighbour, resolved, resolveMap);\n    });\n\n    if (node.isRoot() || (qname = node.qualifiedName) in resolveMap) {\n        return;\n    }\n    resolved.push(node);\n    resolveMap[qname] = 1;\n}\n\nclass CustomResolver {\n    constructor (resolver) {\n        this.fn = resolver;\n        this.dep = [];\n    }\n\n    addDependencies(...dep) {\n        this.dep.push(...dep);\n        return this;\n    }\n\n    getDependencies () {\n        return this.dep;\n    }\n\n    get () {\n        return this.fn;\n    }\n}\n\nexport {\n    isSimpleObject,\n    scheduler,\n    compose,\n    flat,\n    identityMap,\n    pullableEnd,\n    pullableRecent,\n    unique,\n    splitPathProp,\n    resolver,\n    ForeignSet,\n    resolveDependencyOrder,\n    fetch,\n    fetchAggregator,\n    CustomResolver,\n    getUpstreamNodes\n};\n","export default class GraphNode {\n    constructor (name, qualifiedName, options) {\n        /* istanbul ignore next */options = options || {};\n        this.name = name;\n        this.qualifiedName = qualifiedName;\n        this.edges = [];\n        this.outgoingEdges = [];\n        this._seed = null;\n        this.requireResolve = true;\n        this.retriever = options.retriever;\n        this.history = [];\n        this.resolver = null;\n        this.electricEdges = [];\n    }\n\n    addDependencies (...dep) {\n        this.edges.push(...dep);\n        dep.forEach(entry => entry.outgoingEdges.push(this));\n        return this;\n    }\n\n    addElectricNode (node) {\n        this.electricEdges.push(node);\n        return this;\n    }\n\n    get seed () {\n        return this._seed;\n    }\n\n    set seed (value) {\n        this._seed = value;\n        this.requireResolve = true;\n        return this;\n    }\n\n    resolve () {\n        this.seed = this.resolver(...this.retrieveDetails());\n        this.history.push(this.seed);\n        this.requireResolve = false;\n        return this;\n    }\n\n    retrieveDetails () {\n        if (this.edges.length === 0) {\n            return [{\n                name: this.name,\n                qualifiedName: this.qualifiedName,\n                value: this.seed\n            }];\n        }\n        return this.retriever(...this.edges.map(edge => edge.qualifiedName));\n    }\n\n    repeatHead () {\n        const\n            history = this.history,\n            head = history[history.length - 1];\n        // @todo- Akash, write test case if history.length === 0 to pass code coverage\n        if (history.length === 0) {\n            return this;\n        }\n        history.push(head);\n        return this;\n    }\n\n    flush () {\n        const hist = this.history,\n            head = hist[hist.length - 1];\n        hist.length = 0;\n        hist.push(head);\n        return this;\n    }\n\n    isRoot () {\n        return this.name === null;\n    }\n}\n","import {\n    pullableRecent,\n    pullableEnd\n} from './utils';\n\nexport default class ElectricNode {\n    constructor () {\n        this.edges = [];\n        this.listeners = {\n            nextFrame: [],\n            currentFrame: []\n        };\n    }\n\n    addEdges (...nodes) {\n        this.edges.push(...nodes);\n        return this;\n    }\n\n    regListenerForCurrFrame (fn) {\n        const lstnrs = this.listeners.currentFrame;\n        let index = lstnrs.push(pullableRecent(this.edges, fn)) - 1;\n\n        return () => {\n            this.listeners.currentFrame = lstnrs.filter((fn, i) => i !== index);\n        };\n    }\n\n    regListenerForNextFrame (fn) {\n        const lstnrs = this.listeners.nextFrame;\n        let index = lstnrs.push(pullableEnd(this.edges, fn)) - 1;\n\n        return () => {\n            this.listeners.nextFrame = lstnrs.filter((fn, i) => i !== index);\n        };\n    }\n\n    hasNextFrameListener () {\n        return !!this.listeners.nextFrame.length;\n    }\n}\n","import {\n    isSimpleObject,\n    resolver,\n    // upstreamNodes,\n    flat,\n    resolveDependencyOrder,\n    getUpstreamNodes,\n    ForeignSet,\n    fetch,\n    CustomResolver,\n    scheduler\n} from './utils';\nimport Node from './graph-node';\nimport ElectricNode from './electric-node';\n\nexport default class Graph {\n    constructor () {\n        this.qualifiedNodeMap = {};\n        this.retriever = fetch(this.qualifiedNodeMap);\n        this.root = new Node(null, null, { retriever: this.retriever });\n        this.root.resolver = resolver.accumulate;\n\n        this._wholeSet = null;\n        this._propagate = true;\n        this.propagationOverride = {\n            currentFrameListeners: false,\n            nextFrameListeners: false\n        };\n\n        this._schedule = scheduler((payload) => {\n            let qname;\n            for (qname in payload.flushTarget) {\n                if (!({}).hasOwnProperty.call(this.qualifiedNodeMap, qname)) {\n                    return;\n                }\n                this.qualifiedNodeMap[qname].flush();\n            }\n        });\n    }\n\n    createNodesFrom (obj, mount) {\n        let val,\n            resolveReqList;\n        const qualifiedNodeMap = this.qualifiedNodeMap,\n            root = this.root,\n            retriever = this.retriever;\n\n        (function rec (objn, qualifiedName, history) {\n            let key,\n                qname,\n                perv,\n                node;\n\n            for (key in objn) {\n                if (!({}).hasOwnProperty.call(objn, key)) {\n                    continue;\n                }\n                qname = `${qualifiedName}${key}`;\n                node = new Node(key, qname, { retriever });\n                qualifiedNodeMap[qname] = node;\n\n                if ((perv = history.perv) !== undefined) {\n                    perv.addDependencies(node);\n                } else {\n                    // top most level entries\n                    root.addDependencies(node);\n                }\n\n                if (isSimpleObject(val = objn[key])) {\n                    rec(val, `${qualifiedName}${key}.`, { perv: node });\n                    node.resolver = resolver.accumulate;\n                } else if (val instanceof CustomResolver) {\n                    node.resolver = val.get();\n                    node.addDependencies(...val.getDependencies().map(qname => qualifiedNodeMap[qname]));\n                } else {\n                    node.resolver = resolver.identity;\n                    node.seed = val;\n                    // node.resolve();\n                }\n            }\n        }(obj, mount === null ? '' : `${mount}.`, {\n            perv: qualifiedNodeMap[mount]\n        }));\n\n        this._wholeSet = new ForeignSet(Object.keys(this.qualifiedNodeMap));\n\n        // Recalculate the model without firing the listeners\n        // @todo selective branch resolve. Currently resolve gets called even for a branch which was updated\n        resolveReqList = this.constructor.getResolvedList(root).concat(root).filter(node => node.requireResolve);\n        resolveReqList.forEach(node => node.resolve());\n        getUpstreamNodes(resolveReqList).forEach(node => node.resolve());\n        return this;\n    }\n\n    getNodeValue (prop) {\n        if (prop in this.qualifiedNodeMap) {\n            return this.qualifiedNodeMap[prop].seed;\n        }\n        return undefined;\n    }\n\n    createElectricNodeOf (props, fnSpec) {\n        const nodes = props.map(prop => this.qualifiedNodeMap[prop]),\n            eNode = new ElectricNode().addEdges(...nodes);\n\n        nodes.forEach(node => node.addElectricNode(eNode));\n        return eNode[`regListenerFor${fnSpec.type}`](fnSpec.fn);\n    }\n\n    update (...params) {\n        let changedSet,\n            upstreamNodes;\n        const\n            electricEdges = [],\n            nodes = params.map((entry) => {\n                entry[0].seed = entry[1];\n                return entry[0];\n            });\n        nodes.forEach(node => node.resolve());\n        electricEdges.push(...flat(...nodes.map(node => node.electricEdges)));\n        changedSet = new ForeignSet(nodes.map(node => node.qualifiedName));\n\n        if (!this._propagate) {\n            this.__execUniqueElectricEdges(electricEdges);\n            this._propagate = true;\n            return this;\n        }\n\n        upstreamNodes = getUpstreamNodes(nodes);\n        upstreamNodes.forEach(upstreamNode => upstreamNode.resolve());\n        changedSet.append(upstreamNodes.map(node => node.qualifiedName));\n        electricEdges.push(...flat(...upstreamNodes.map(node => node.electricEdges)));\n\n        this.__execUniqueElectricEdges(Array.from(new Set(electricEdges)), changedSet);\n        return this;\n    }\n\n    __execUniqueElectricEdges (electricEdges, changedSet) {\n        const\n            cfLstnrs = [], // current frame listeners\n            nfLstnrs = []; // next frame listeners\n        if (changedSet) {\n            const\n                differenceSet = ForeignSet.difference(this._wholeSet, changedSet),\n                entries = differenceSet.toArray();\n\n            entries.forEach(entry => this.qualifiedNodeMap[entry].repeatHead());\n        }\n\n        electricEdges.forEach((e) => {\n            cfLstnrs.push(...e.listeners.currentFrame);\n        });\n        electricEdges.forEach((e) => {\n            nfLstnrs.push(...e.listeners.nextFrame);\n        });\n\n        !this.propagationOverride.currentFrameListeners && cfLstnrs.forEach(fn => fn());\n        !this.propagationOverride.nextFrameListeners && this._schedule(nfLstnrs, { flushTarget: changedSet });\n        this.resetPropagationOverride();\n        return this;\n    }\n\n    resetNodeValue (...qnames) {\n        const nodes = qnames.map(qname => this.qualifiedNodeMap[qname]),\n            args = nodes.map(node => [node, node.seed]);\n        this.update(...args);\n        return this;\n    }\n\n    static getResolvedList (node) {\n        const resolved = [];\n        resolveDependencyOrder(node, resolved, {});\n        return resolved;\n    }\n\n    stopPropagation () {\n        this._propagate = false;\n        return this;\n    }\n\n    resetPropagationOverride () {\n        this.propagationOverride.currentFrameListeners = false;\n        this.propagationOverride.nextFrameListeners = false;\n        return this;\n    }\n\n    setPropagationOverride (key) {\n        this.propagationOverride[`${key}Listeners`] = true;\n        return this;\n    }\n\n    getNodeFromQualifiedName (qname) {\n        return this.qualifiedNodeMap[qname];\n    }\n}\n","import Graph from './graph';\nimport { CustomResolver, fetchAggregator } from './utils';\n\n/**\n * The container class for Hyperdis. Hyperdis is an enabler for observable object with few interesting features like,\n * calculated property, next frame and same frame listeners, multiple listeners etc with a dependency resolving system.\n * It internally uses a graph to hold the hierarchial relationship of a object. Model is merely a container which\n * ties all the components together.\n *\n * @todo Circular dependency detection is not present\n *\n * @example check src/index.spec.js\n * @class\n */\nclass Model {\n    constructor () {\n        this._graph = new Graph();\n        this._lockFlag = false;\n        this._reqQ = [];\n    }\n\n    /**\n     * Static method to create and init the model with an observable seed\n     *\n     * @param {Object} obj The target object which is required to be made observable\n     * @return {Model} instance of the observable object model\n     */\n    static create (obj) {\n        return new Model()._addPropInModel(null, obj);\n    }\n\n    /**\n     * Appends more observable property on the already observable instance. This mutates the original model.\n     *\n     * This function works in two mode. One being\n     * @param {String} mountPoint the property on which the new set of properties will be mounted. If its a nested\n     *                          property then the mountPoint has to be written such a way so it feels like you are\n     *                          accessing the object. If the mount point is not found then he obeservables are added in\n     *                          the root.\n     * @param {Object} The target object which is required to be made observable\n     *\n     * Another being\n     * @param {Object} The target object which is required to be made observable\n     *\n     * @return {Model} instance of the observable object model\n     */\n    append (...params) {\n        let mountPoint,\n            obj;\n\n        if (params.length === 1) {\n            mountPoint = null;\n            obj = params[0];\n        } else {\n            mountPoint = params[0];\n            obj = params[1];\n        }\n\n        this._addPropInModel(mountPoint, obj);\n        return this;\n    }\n\n    /**\n     * Creates a calculated variable from existing variable. This variable can't be updated from outside.\n     * @param {string} mountpoint property path on which the new variable will be placed\n     * @param {string} name name of the variable. If the variable could have hierarchy like `limits.start`\n     * @param {Function} fn funtion where the dependent variables are injected based on the dependency requirement\n     */\n    calculatedProp (...params) {\n        let calculationConfig,\n            customResolver,\n            varName,\n            mount,\n            fetchFn;\n\n        if (params.length > 2) {\n            mount = params[0];\n            varName = params[1];\n            fetchFn = params[2];\n        } else {\n            mount = null;\n            varName = params[0];\n            fetchFn = params[1];\n        }\n\n        calculationConfig = fetchFn(fetchAggregator);\n        customResolver = new CustomResolver(calculationConfig.fn);\n        customResolver.addDependencies(...calculationConfig.dependencies);\n\n        this._addPropInModel(mount, { [varName]: customResolver });\n        return this;\n    }\n\n    // eslint-disable-next-line require-jsdoc\n    _addPropInModel (mountPoint, obj) {\n        this._graph.createNodesFrom(obj, mountPoint);\n        return this;\n    }\n\n    /**\n     * Register a listener in the current frame when a property or group of properties is changed.\n     *\n     * @example\n     * This function takes a single or group of property and handler which is called when any of the properties are\n     * changed.\n     * When a single property is changed the handler is called with two parameter, what was the old value of the state\n     * property and what is the new value.\n     * myState.on('range.start', (oldValue, newValue) => {\n     *      console.log('Value before prop change', oldValue);\n     *      console.log('Value after prop change', newValue);\n     * });\n     *\n     * myState.prop('range.start', 9);\n     * // Output\n     * Value before prop change 1\n     * Value after prop change 9\n     *\n     * If a handler is registered on change of a property which has another state property as value, then the handler\n     * gets called whenever any state property connected to it gets changed\n     *\n     * myState.on('range', (oldValue, newValue) => {\n     *      console.log('Value before prop change', oldValue);\n     *      console.log('Value after prop change', newValue);\n     * });\n     *\n     * myState.prop('range.start', 10);\n     * myState.prop('range.type.absolute', false);\n     *\n     * // Output\n     * Value before prop change\n     * range {\n     *      start: 9,\n     *      end: 5,\n     *      type: {\n     *          absolute: true\n     *      }\n     * }\n     * Value after prop change\n     * range: {\n     *      start: 10,\n     *      end: 5,\n     *      type: {\n     *          absolute: false\n     *      }\n     * }\n     * If a handler is registered with more than one property change then, the handler is called when any of the\n     * properties gets changed. In this cast the handler is called with more than one parameter: each for one state\n     * property which is registered for listening. Each parameter is of type array containing [oldValue, newValue]\n     *\n     * myState.on('range.start', 'range.end', (start, end) => {\n     *      console.log('Start', start);\n     *      console.log('End', end);\n     * });\n     *\n     * myState.prop('range.start', 12);\n     *\n     * // Output\n     * Start [10, 12]\n     * End [5, 5]\n     *\n     * myState.prop('range.end', 7);\n     *\n     * // Output\n     * Start [12, 12]\n     * End [5, 7]\n     *\n     * The on returns a function which is when called the listener registered gets unregistered\n     *\n     * let unsub = myState.on(['range.start', 'range.end'], (start, end) => {\n     *      console.log('Start', start);\n     *      console.log('End', end);\n     * });\n     *\n     * // Unsubscribe\n     * unsub()\n     *\n     * On takes an optional boolean value as the last parameter, which if passed as a true value the handler gets called\n     * during registration itself.\n     *\n     * @param {Array.<String>} props List of properties which is of interest\n     * @param {Function} fn Listener to be executed when any of them is changed. The listener is called with the old\n     *                      value and new value of the properties\n     * @param {*} instantCall When registered if the function is to be triggered with the value of the property\n     *\n     * @return {Function} function to unsubscribe from the listeners registry\n     */\n    on (props, fn, instantCall) {\n        const\n            propsArr = props instanceof Array ? props : [props],\n            // All there listeners will be executed in the current stack frame\n            unsub = this._graph.createElectricNodeOf(propsArr, {\n                type: 'CurrFrame',\n                fn\n            });\n\n        if (instantCall) {\n            // Bar current next frame listeners from getting fired\n            this._graph.stopPropagation().setPropagationOverride('nextFrame').resetNodeValue(...props);\n        }\n        return unsub;\n    }\n\n    /**\n     * Register a listener for the next frame when a property or group of properties is changed.\n     *\n     * @example\n     * See the examples for the on listener\n     *\n     * @param {Array.<String>} props List of properties which is of interest\n     * @param {Function} fn Listener to be executed when any of them is changed. The listener is called with the old\n     *                      value and new value of the properties. Here the oldvalue is last value of the last frame\n     * @param {*} instantCall When registered if the function is to be triggered with the value of the property\n     *\n     * @return {Function} function to unsubscribe from the listeners registry\n     */\n    next (props, fn, instantCall) {\n        const\n            propsArr = props instanceof Array ? props : [props],\n            // All there listeners will be executed at the tick of next animation frame\n            unsub = this._graph.createElectricNodeOf(propsArr, {\n                type: 'NextFrame',\n                fn\n            });\n\n        // @todo check support for this from the graph side\n        if (instantCall) {\n            // Bar current frame listeners from getting fired\n            this._graph.stopPropagation().setPropagationOverride('currentFrame').resetNodeValue(...props);\n        }\n\n        return unsub;\n    }\n\n    /**\n     * Lock queues the request of property change and releases the change when unlock is called. This is helpful when\n     * multiple property is getting called and the model listeners are to be fired once at the end of update.\n     *\n     * @return {Model} instance of the model\n     */\n    lock () {\n        this._lockFlag = true;\n        this._reqQ.length = 0;\n        return this;\n    }\n\n    /**\n     * Unlock unleashes the change done after the lock was called.\n\n     * @return {Model} instance of the model\n     */\n    unlock () {\n        this._lockFlag = false;\n        this.setProp(...this._reqQ);\n        this._reqQ.length = 0;\n        return this;\n    }\n\n    /**\n     * This acts as getter and setter. If the function is called by passing only one argument, it retrieve the value\n     * associated with the property. If the same function is called using two parameters, first one being the property\n     * and second one being the value, then the value is set for the property and the handlers are called (if any)\n     * which got registered using the on function\n     *\n     * Getter\n     * @param {string} prop property path whose value to be retrieved\n     * @return {Object} value of the property at the time of call\n     *\n     * Setter\n     * @param {string} property property path whose value to be ser\n     * @return {Model} instance of the model\n     */\n    prop (...params) {\n        let prop,\n            val,\n            len;\n\n        switch (len = params.length) {\n        case 1:\n            prop = params[0];\n            break;\n\n        case 2:\n            prop = params[0];\n            val = params[1];\n            break;\n\n        default:\n            return this;\n        }\n\n        if (len === 2) {\n            this._lockFlag ? this._reqQ.push([prop, val]) : this.setProp([prop, val]);\n            return this;\n        }\n\n        return this._graph.getNodeValue(prop);\n    }\n\n    // eslint-disable-next-line require-jsdoc\n    setProp (...props) {\n        // Filter out the calculated variables, so that it cant be changed from outside\n        // @todo if a node is not leafValue, and change is called, ignore it too\n        // props = props.filter(prop => !(VirtualObj.walkTill(prop[0].split('.'), this._vObj).leafValue()\n        //     instanceof CalculatedVar));\n\n        if (props.length === 0) {\n            return this;\n        }\n\n        this._graph.update(...props.map(prop => [this._graph.getNodeFromQualifiedName(prop[0]), prop[1]]));\n        return this;\n    }\n\n    /**\n     * Retrieves the graph representation of the object\n     * @return {Graph} instance of the graph associated to the model\n     */\n    graph () {\n        return this._graph;\n    }\n\n    /**\n     * Get serialized data from the model\n     *\n     * @return {Object} Serialized data\n     */\n    serialize () {\n        return this._graph.root.seed;\n    }\n}\n\nexport default Model;\n","import Model from './model';\n\nexport default Model;\n","const Muze = require('./muze');\n\nmodule.exports = Muze.default ? Muze.default : Muze;\n","'use strict';\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\nvar _lib = require('./lib');\n\nvar _lib2 = _interopRequireDefault(_lib);\n\nvar slLib = _lib2['default'].init(typeof window !== \"undefined\" ? window : undefined),\n    doc = slLib.win.document,\n    documentSupport = slLib.getDocumentSupport(),\n    SVG_BBOX_CORRECTION = documentSupport.isWebKit ? 0 : 4.5;\n\nfunction ContainerManager(parentContainer, isBrowserLess, maxContainers) {\n    var svg;\n\n    maxContainers = maxContainers > 5 ? maxContainers : 5;\n    maxContainers = maxContainers < 20 ? maxContainers : 20;\n\n    this.maxContainers = maxContainers;\n    this.first = null;\n    this.last = null;\n    this.containers = {};\n    this.length = 0;\n    this.rootNode = parentContainer;\n\n    if (isBrowserLess) {\n        svg = doc.createElementNS('http://www.w3.org/2000/svg', 'svg');\n        svg.setAttributeNS('http://www.w3.org/2000/svg', 'xlink', 'http://www.w3.org/1999/xlink');\n        svg.setAttributeNS('http://www.w3.org/2000/svg', 'height', '0');\n        svg.setAttributeNS('http://www.w3.org/2000/svg', 'width', '0');\n        this.svgRoot = svg;\n        this.rootNode.appendChild(svg);\n    }\n}\n\nContainerManager.prototype.get = function (style) {\n    var diff,\n        key,\n        containerObj,\n        containers = this.containers,\n        len = this.length,\n        max = this.maxContainers,\n        keyStr = '';\n\n    for (key in slLib.supportedStyle) {\n        if (style[key] !== undefined) {\n            keyStr += slLib.supportedStyle[key] + ':' + style[key] + ';';\n        }\n    }\n\n    if (!keyStr) {\n        return false;\n    }\n\n    if (containerObj = containers[keyStr]) {\n        if (this.first !== containerObj) {\n            containerObj.prev && (containerObj.prev.next = containerObj.next);\n            containerObj.next && (containerObj.next.prev = containerObj.prev);\n            containerObj.next = this.first;\n            containerObj.next.prev = containerObj;\n            this.last === containerObj && (this.last = containerObj.prev);\n            containerObj.prev = null;\n            this.first = containerObj;\n        }\n    } else {\n        if (len >= max) {\n            diff = len - max + 1;\n            // +1 is to remove an extra entry to make space for the new container to be added.\n            while (diff--) {\n                this.removeContainer(this.last);\n            }\n        }\n        containerObj = this.addContainer(keyStr);\n    }\n\n    return containerObj;\n};\n\nContainerManager.prototype.addContainer = function (keyStr) {\n    var node, container;\n\n    this.containers[keyStr] = container = {\n        next: null,\n        prev: null,\n        node: null,\n        ellipsesWidth: 0,\n        lineHeight: 0,\n        dotWidth: 0,\n        avgCharWidth: 4,\n        keyStr: keyStr,\n        charCache: {}\n    };\n\n    // Since the container objects are arranged from most recent to least recent order, we need to add the new\n    // object at the beginning of the list.\n    container.next = this.first;\n    container.next && (container.next.prev = container);\n    this.first = container;\n    if (!this.last) {\n        this.last = container;\n    }\n    this.length += 1;\n\n    node = container.node = doc.createElement('div');\n    this.rootNode.appendChild(node);\n\n    if (documentSupport.isIE && !documentSupport.hasSVG) {\n        node.style.setAttribute('cssText', keyStr);\n    } else {\n        node.setAttribute('style', keyStr);\n    }\n\n    node.setAttribute('aria-hidden', 'true');\n    node.setAttribute('role', 'presentation');\n    node.style.display = 'inline-block';\n\n    node.innerHTML = slLib.testStrAvg; // A test string.\n    container.lineHeight = node.offsetHeight;\n    container.avgCharWidth = node.offsetWidth / 3;\n\n    if (documentSupport.isBrowserLess) {\n        node = container.svgText = doc.createElementNS('http://www.w3.org/2000/svg', 'text');\n        node.setAttribute('style', keyStr);\n        this.svgRoot.appendChild(node);\n\n        node.textContent = slLib.testStrAvg; // A test string.\n        container.lineHeight = node.getBBox().height;\n        container.avgCharWidth = (node.getBBox().width - SVG_BBOX_CORRECTION) / 3;\n\n        node.textContent = '...';\n        container.ellipsesWidth = node.getBBox().width - SVG_BBOX_CORRECTION;\n        node.textContent = '.';\n        container.dotWidth = node.getBBox().width - SVG_BBOX_CORRECTION;\n    } else {\n        node.innerHTML = '...';\n        container.ellipsesWidth = node.offsetWidth;\n        node.innerHTML = '.';\n        container.dotWidth = node.offsetWidth;\n        node.innerHTML = '';\n    }\n\n    return container;\n};\n\nContainerManager.prototype.removeContainer = function (cObj) {\n    var keyStr = cObj.keyStr;\n\n    if (!keyStr || !this.length || !cObj) {\n        return;\n    }\n    this.length -= 1;\n\n    cObj.prev && (cObj.prev.next = cObj.next);\n    cObj.next && (cObj.next.prev = cObj.prev);\n    this.first === cObj && (this.first = cObj.next);\n    this.last === cObj && (this.last = cObj.prev);\n\n    cObj.node.parentNode.removeChild(cObj.node);\n\n    delete this.containers[keyStr];\n};\n\nContainerManager.prototype.dispose = function () {\n    var key,\n        containers = this.containers;\n\n    this.maxContainers = null;\n    for (key in containers) {\n        this.removeContainer(containers[key]);\n    }\n\n    this.rootNode.parentNode.removeChild(this.rootNode);\n\n    this.rootNode = null;\n    this.first = null;\n    this.last = null;\n};\n\nmodule.exports = ContainerManager;","export default function(a, b) {\n  return a < b ? -1 : a > b ? 1 : a >= b ? 0 : NaN;\n}\n","import ascending from \"./ascending\";\n\nexport default function(compare) {\n  if (compare.length === 1) compare = ascendingComparator(compare);\n  return {\n    left: function(a, x, lo, hi) {\n      if (lo == null) lo = 0;\n      if (hi == null) hi = a.length;\n      while (lo < hi) {\n        var mid = lo + hi >>> 1;\n        if (compare(a[mid], x) < 0) lo = mid + 1;\n        else hi = mid;\n      }\n      return lo;\n    },\n    right: function(a, x, lo, hi) {\n      if (lo == null) lo = 0;\n      if (hi == null) hi = a.length;\n      while (lo < hi) {\n        var mid = lo + hi >>> 1;\n        if (compare(a[mid], x) > 0) hi = mid;\n        else lo = mid + 1;\n      }\n      return lo;\n    }\n  };\n}\n\nfunction ascendingComparator(f) {\n  return function(d, x) {\n    return ascending(f(d), x);\n  };\n}\n","import ascending from \"./ascending\";\nimport bisector from \"./bisector\";\n\nvar ascendingBisect = bisector(ascending);\nexport var bisectRight = ascendingBisect.right;\nexport var bisectLeft = ascendingBisect.left;\nexport default bisectRight;\n","import {pair} from \"./pairs\";\n\nexport default function(values0, values1, reduce) {\n  var n0 = values0.length,\n      n1 = values1.length,\n      values = new Array(n0 * n1),\n      i0,\n      i1,\n      i,\n      value0;\n\n  if (reduce == null) reduce = pair;\n\n  for (i0 = i = 0; i0 < n0; ++i0) {\n    for (value0 = values0[i0], i1 = 0; i1 < n1; ++i1, ++i) {\n      values[i] = reduce(value0, values1[i1]);\n    }\n  }\n\n  return values;\n}\n","export default function(x) {\n  return x === null ? NaN : +x;\n}\n","var array = Array.prototype;\n\nexport var slice = array.slice;\nexport var map = array.map;\n","export default function(start, stop, step) {\n  start = +start, stop = +stop, step = (n = arguments.length) < 2 ? (stop = start, start = 0, 1) : n < 3 ? 1 : +step;\n\n  var i = -1,\n      n = Math.max(0, Math.ceil((stop - start) / step)) | 0,\n      range = new Array(n);\n\n  while (++i < n) {\n    range[i] = start + i * step;\n  }\n\n  return range;\n}\n","var e10 = Math.sqrt(50),\n    e5 = Math.sqrt(10),\n    e2 = Math.sqrt(2);\n\nexport default function(start, stop, count) {\n  var reverse,\n      i = -1,\n      n,\n      ticks,\n      step;\n\n  stop = +stop, start = +start, count = +count;\n  if (start === stop && count > 0) return [start];\n  if (reverse = stop < start) n = start, start = stop, stop = n;\n  if ((step = tickIncrement(start, stop, count)) === 0 || !isFinite(step)) return [];\n\n  if (step > 0) {\n    start = Math.ceil(start / step);\n    stop = Math.floor(stop / step);\n    ticks = new Array(n = Math.ceil(stop - start + 1));\n    while (++i < n) ticks[i] = (start + i) * step;\n  } else {\n    start = Math.floor(start * step);\n    stop = Math.ceil(stop * step);\n    ticks = new Array(n = Math.ceil(start - stop + 1));\n    while (++i < n) ticks[i] = (start - i) / step;\n  }\n\n  if (reverse) ticks.reverse();\n\n  return ticks;\n}\n\nexport function tickIncrement(start, stop, count) {\n  var step = (stop - start) / Math.max(0, count),\n      power = Math.floor(Math.log(step) / Math.LN10),\n      error = step / Math.pow(10, power);\n  return power >= 0\n      ? (error >= e10 ? 10 : error >= e5 ? 5 : error >= e2 ? 2 : 1) * Math.pow(10, power)\n      : -Math.pow(10, -power) / (error >= e10 ? 10 : error >= e5 ? 5 : error >= e2 ? 2 : 1);\n}\n\nexport function tickStep(start, stop, count) {\n  var step0 = Math.abs(stop - start) / Math.max(0, count),\n      step1 = Math.pow(10, Math.floor(Math.log(step0) / Math.LN10)),\n      error = step0 / step1;\n  if (error >= e10) step1 *= 10;\n  else if (error >= e5) step1 *= 5;\n  else if (error >= e2) step1 *= 2;\n  return stop < start ? -step1 : step1;\n}\n","export default function(values) {\n  return Math.ceil(Math.log(values.length) / Math.LN2) + 1;\n}\n","import number from \"./number\";\n\nexport default function(values, p, valueof) {\n  if (valueof == null) valueof = number;\n  if (!(n = values.length)) return;\n  if ((p = +p) <= 0 || n < 2) return +valueof(values[0], 0, values);\n  if (p >= 1) return +valueof(values[n - 1], n - 1, values);\n  var n,\n      i = (n - 1) * p,\n      i0 = Math.floor(i),\n      value0 = +valueof(values[i0], i0, values),\n      value1 = +valueof(values[i0 + 1], i0 + 1, values);\n  return value0 + (value1 - value0) * (i - i0);\n}\n","export var prefix = \"$\";\n\nfunction Map() {}\n\nMap.prototype = map.prototype = {\n  constructor: Map,\n  has: function(key) {\n    return (prefix + key) in this;\n  },\n  get: function(key) {\n    return this[prefix + key];\n  },\n  set: function(key, value) {\n    this[prefix + key] = value;\n    return this;\n  },\n  remove: function(key) {\n    var property = prefix + key;\n    return property in this && delete this[property];\n  },\n  clear: function() {\n    for (var property in this) if (property[0] === prefix) delete this[property];\n  },\n  keys: function() {\n    var keys = [];\n    for (var property in this) if (property[0] === prefix) keys.push(property.slice(1));\n    return keys;\n  },\n  values: function() {\n    var values = [];\n    for (var property in this) if (property[0] === prefix) values.push(this[property]);\n    return values;\n  },\n  entries: function() {\n    var entries = [];\n    for (var property in this) if (property[0] === prefix) entries.push({key: property.slice(1), value: this[property]});\n    return entries;\n  },\n  size: function() {\n    var size = 0;\n    for (var property in this) if (property[0] === prefix) ++size;\n    return size;\n  },\n  empty: function() {\n    for (var property in this) if (property[0] === prefix) return false;\n    return true;\n  },\n  each: function(f) {\n    for (var property in this) if (property[0] === prefix) f(this[property], property.slice(1), this);\n  }\n};\n\nfunction map(object, f) {\n  var map = new Map;\n\n  // Copy constructor.\n  if (object instanceof Map) object.each(function(value, key) { map.set(key, value); });\n\n  // Index array by numeric index or specified key function.\n  else if (Array.isArray(object)) {\n    var i = -1,\n        n = object.length,\n        o;\n\n    if (f == null) while (++i < n) map.set(i, object[i]);\n    else while (++i < n) map.set(f(o = object[i], i, object), o);\n  }\n\n  // Convert object to map.\n  else if (object) for (var key in object) map.set(key, object[key]);\n\n  return map;\n}\n\nexport default map;\n","import map from \"./map\";\n\nexport default function() {\n  var keys = [],\n      sortKeys = [],\n      sortValues,\n      rollup,\n      nest;\n\n  function apply(array, depth, createResult, setResult) {\n    if (depth >= keys.length) {\n      if (sortValues != null) array.sort(sortValues);\n      return rollup != null ? rollup(array) : array;\n    }\n\n    var i = -1,\n        n = array.length,\n        key = keys[depth++],\n        keyValue,\n        value,\n        valuesByKey = map(),\n        values,\n        result = createResult();\n\n    while (++i < n) {\n      if (values = valuesByKey.get(keyValue = key(value = array[i]) + \"\")) {\n        values.push(value);\n      } else {\n        valuesByKey.set(keyValue, [value]);\n      }\n    }\n\n    valuesByKey.each(function(values, key) {\n      setResult(result, key, apply(values, depth, createResult, setResult));\n    });\n\n    return result;\n  }\n\n  function entries(map, depth) {\n    if (++depth > keys.length) return map;\n    var array, sortKey = sortKeys[depth - 1];\n    if (rollup != null && depth >= keys.length) array = map.entries();\n    else array = [], map.each(function(v, k) { array.push({key: k, values: entries(v, depth)}); });\n    return sortKey != null ? array.sort(function(a, b) { return sortKey(a.key, b.key); }) : array;\n  }\n\n  return nest = {\n    object: function(array) { return apply(array, 0, createObject, setObject); },\n    map: function(array) { return apply(array, 0, createMap, setMap); },\n    entries: function(array) { return entries(apply(array, 0, createMap, setMap), 0); },\n    key: function(d) { keys.push(d); return nest; },\n    sortKeys: function(order) { sortKeys[keys.length - 1] = order; return nest; },\n    sortValues: function(order) { sortValues = order; return nest; },\n    rollup: function(f) { rollup = f; return nest; }\n  };\n}\n\nfunction createObject() {\n  return {};\n}\n\nfunction setObject(object, key, value) {\n  object[key] = value;\n}\n\nfunction createMap() {\n  return map();\n}\n\nfunction setMap(map, key, value) {\n  map.set(key, value);\n}\n","import {default as map, prefix} from \"./map\";\n\nfunction Set() {}\n\nvar proto = map.prototype;\n\nSet.prototype = set.prototype = {\n  constructor: Set,\n  has: proto.has,\n  add: function(value) {\n    value += \"\";\n    this[prefix + value] = value;\n    return this;\n  },\n  remove: proto.remove,\n  clear: proto.clear,\n  values: proto.keys,\n  size: proto.size,\n  empty: proto.empty,\n  each: proto.each\n};\n\nfunction set(object, f) {\n  var set = new Set;\n\n  // Copy constructor.\n  if (object instanceof Set) object.each(function(value) { set.add(value); });\n\n  // Otherwise, assume it’s an array.\n  else if (object) {\n    var i = -1, n = object.length;\n    if (f == null) while (++i < n) set.add(object[i]);\n    else while (++i < n) set.add(f(object[i], i, object));\n  }\n\n  return set;\n}\n\nexport default set;\n","var array = Array.prototype;\n\nexport var map = array.map;\nexport var slice = array.slice;\n","import {map} from \"d3-collection\";\nimport {slice} from \"./array\";\n\nexport var implicit = {name: \"implicit\"};\n\nexport default function ordinal(range) {\n  var index = map(),\n      domain = [],\n      unknown = implicit;\n\n  range = range == null ? [] : slice.call(range);\n\n  function scale(d) {\n    var key = d + \"\", i = index.get(key);\n    if (!i) {\n      if (unknown !== implicit) return unknown;\n      index.set(key, i = domain.push(d));\n    }\n    return range[(i - 1) % range.length];\n  }\n\n  scale.domain = function(_) {\n    if (!arguments.length) return domain.slice();\n    domain = [], index = map();\n    var i = -1, n = _.length, d, key;\n    while (++i < n) if (!index.has(key = (d = _[i]) + \"\")) index.set(key, domain.push(d));\n    return scale;\n  };\n\n  scale.range = function(_) {\n    return arguments.length ? (range = slice.call(_), scale) : range.slice();\n  };\n\n  scale.unknown = function(_) {\n    return arguments.length ? (unknown = _, scale) : unknown;\n  };\n\n  scale.copy = function() {\n    return ordinal()\n        .domain(domain)\n        .range(range)\n        .unknown(unknown);\n  };\n\n  return scale;\n}\n","import {range as sequence} from \"d3-array\";\nimport ordinal from \"./ordinal\";\n\nexport default function band() {\n  var scale = ordinal().unknown(undefined),\n      domain = scale.domain,\n      ordinalRange = scale.range,\n      range = [0, 1],\n      step,\n      bandwidth,\n      round = false,\n      paddingInner = 0,\n      paddingOuter = 0,\n      align = 0.5;\n\n  delete scale.unknown;\n  function rescale() {\n    var n = domain().length,\n        reverse = range[1] < range[0],\n        start = range[reverse - 0],\n        stop = range[1 - reverse];\n    step = (stop - start) / Math.max(1, n - paddingInner + paddingOuter * 2);\n    if (round) step = Math.floor(step);\n    start += (stop - start - step * (n - paddingInner)) * align;\n    bandwidth = step * (1 - paddingInner);\n    if (round) start = Math.round(start), bandwidth = Math.round(bandwidth);\n    var values = sequence(n).map(function(i) { return start + step * i; });\n    return ordinalRange(reverse ? values.reverse() : values);\n  }\n\n  scale.domain = function(_) {\n    return arguments.length ? (domain(_), rescale()) : domain();\n  };\n\n  scale.range = function(_) {\n    return arguments.length ? (range = [+_[0], +_[1]], rescale()) : range.slice();\n  };\n\n  scale.rangeRound = function(_) {\n    return range = [+_[0], +_[1]], round = true, rescale();\n  };\n\n  scale.bandwidth = function() {\n    return bandwidth;\n  };\n\n  scale.step = function() {\n    return step;\n  };\n\n  scale.round = function(_) {\n    return arguments.length ? (round = !!_, rescale()) : round;\n  };\n\n  scale.padding = function(_) {\n    return arguments.length ? (paddingInner = paddingOuter = Math.max(0, Math.min(1, _)), rescale()) : paddingInner;\n  };\n\n  scale.paddingInner = function(_) {\n    return arguments.length ? (paddingInner = Math.max(0, Math.min(1, _)), rescale()) : paddingInner;\n  };\n\n  scale.paddingOuter = function(_) {\n    return arguments.length ? (paddingOuter = Math.max(0, Math.min(1, _)), rescale()) : paddingOuter;\n  };\n\n  scale.align = function(_) {\n    return arguments.length ? (align = Math.max(0, Math.min(1, _)), rescale()) : align;\n  };\n\n  scale.copy = function() {\n    return band()\n        .domain(domain())\n        .range(range)\n        .round(round)\n        .paddingInner(paddingInner)\n        .paddingOuter(paddingOuter)\n        .align(align);\n  };\n\n  scale.invertExtent = function(r0, r1) {\n    var lo = +r0,\n        hi = arguments.length > 1 ? +r1 : lo,\n        reverse = range[1] < range[0],\n        values = reverse ? ordinalRange().reverse() : ordinalRange(),\n        n = values.length - 1, a, b, t,\n        hiIndex;\n    values.push(values[n] + this.step());\n    // order range inputs, bail if outside of scale range\n    if (hi < lo) t = lo, lo = hi, hi = t;\n    if (hi < values[0] || lo > range[1-reverse]) return undefined;\n\n    // binary search to index into scale range\n    a = Math.max(0, getClosestIndexOf(values, lo));\n    hiIndex = getClosestIndexOf(values, hi);\n    b = lo===hi ? a : Math.max(a, hiIndex - 1);\n\n    // increment index a if lo is within padding gap\n    // if (lo - values[a] > bandwidth + 1e-10) ++a;\n\n    if (reverse) t = a, a = n - b, b = n - t; // map + swap\n    return (a > b) ? undefined : domain().slice(a, b+1);\n  };\n\n  scale.invert = function (r0, r1) {\n    var lo = +r0,\n        hi = arguments.length > 1 ? +r1 : lo,\n        reverse = range[1] < range[0],\n        values = reverse ? ordinalRange().reverse() : ordinalRange(),\n        n = values.length - 1,\n        a,\n        t;\n\n    // order range inputs, bail if outside of scale range\n    if (hi < lo) t = lo, lo = hi, hi = t;\n    if (hi < values[0] || lo > range[1-reverse]) return undefined;\n\n    // binary search to index into scale range\n    a = Math.max(0, getClosestIndexOf(values, lo, 'left'));\n\n    // increment index a if lo is within padding gap\n    // if (lo - values[a] > bandwidth + 1e-10) ++a;\n\n    return domain()[reverse ? n - a : a];\n  }\n  return rescale();\n}\n\nfunction pointish(scale) {\n  var copy = scale.copy;\n\n  scale.padding = scale.paddingOuter;\n  delete scale.paddingInner;\n  delete scale.paddingOuter;\n\n  scale.copy = function() {\n    return pointish(copy());\n  };\n\n  return scale;\n}\n\nexport function point() {\n  return pointish(band().paddingInner(1));\n}\n\nfunction getClosestIndexOf (arr, value, side) {\n  var low = 0,\n      arrLen = arr.length,\n      high = arrLen - 1,\n      highVal,\n      mid,\n      d1,\n      d2;\n\n  while (low < high) {\n      mid = Math.floor((low + high) / 2);\n      d1 = Math.abs(arr[mid] - value);\n      d2 = Math.abs(arr[mid + 1] - value);\n\n      if (d2 <= d1) {\n          low = mid + 1;\n      }\n      else {\n          high = mid;\n      }\n  }\n\n  if (!side) {\n      return high;\n  }\n\n  highVal = arr[high];\n  if (highVal === value) {\n      return high;\n  } else if (highVal > value) {\n      if (high === 0) { return high; }\n      return side === 'left'? high - 1 : high;\n  } else {\n      if (high === arr.length - 1) { return high; }\n      return side === 'left'? high : high + 1;\n  }\n}","export default function(a, b) {\n  return a = +a, b = +b, function(t) {\n    return a * (1 - t) + b * t;\n  };\n}\n","export default function(constructor, factory, prototype) {\n  constructor.prototype = factory.prototype = prototype;\n  prototype.constructor = constructor;\n}\n\nexport function extend(parent, definition) {\n  var prototype = Object.create(parent.prototype);\n  for (var key in definition) prototype[key] = definition[key];\n  return prototype;\n}\n","import define, {extend} from \"./define.js\";\n\nexport function Color() {}\n\nexport var darker = 0.7;\nexport var brighter = 1 / darker;\n\nvar reI = \"\\\\s*([+-]?\\\\d+)\\\\s*\",\n    reN = \"\\\\s*([+-]?\\\\d*\\\\.?\\\\d+(?:[eE][+-]?\\\\d+)?)\\\\s*\",\n    reP = \"\\\\s*([+-]?\\\\d*\\\\.?\\\\d+(?:[eE][+-]?\\\\d+)?)%\\\\s*\",\n    reHex = /^#([0-9a-f]{3,8})$/,\n    reRgbInteger = new RegExp(\"^rgb\\\\(\" + [reI, reI, reI] + \"\\\\)$\"),\n    reRgbPercent = new RegExp(\"^rgb\\\\(\" + [reP, reP, reP] + \"\\\\)$\"),\n    reRgbaInteger = new RegExp(\"^rgba\\\\(\" + [reI, reI, reI, reN] + \"\\\\)$\"),\n    reRgbaPercent = new RegExp(\"^rgba\\\\(\" + [reP, reP, reP, reN] + \"\\\\)$\"),\n    reHslPercent = new RegExp(\"^hsl\\\\(\" + [reN, reP, reP] + \"\\\\)$\"),\n    reHslaPercent = new RegExp(\"^hsla\\\\(\" + [reN, reP, reP, reN] + \"\\\\)$\");\n\nvar named = {\n  aliceblue: 0xf0f8ff,\n  antiquewhite: 0xfaebd7,\n  aqua: 0x00ffff,\n  aquamarine: 0x7fffd4,\n  azure: 0xf0ffff,\n  beige: 0xf5f5dc,\n  bisque: 0xffe4c4,\n  black: 0x000000,\n  blanchedalmond: 0xffebcd,\n  blue: 0x0000ff,\n  blueviolet: 0x8a2be2,\n  brown: 0xa52a2a,\n  burlywood: 0xdeb887,\n  cadetblue: 0x5f9ea0,\n  chartreuse: 0x7fff00,\n  chocolate: 0xd2691e,\n  coral: 0xff7f50,\n  cornflowerblue: 0x6495ed,\n  cornsilk: 0xfff8dc,\n  crimson: 0xdc143c,\n  cyan: 0x00ffff,\n  darkblue: 0x00008b,\n  darkcyan: 0x008b8b,\n  darkgoldenrod: 0xb8860b,\n  darkgray: 0xa9a9a9,\n  darkgreen: 0x006400,\n  darkgrey: 0xa9a9a9,\n  darkkhaki: 0xbdb76b,\n  darkmagenta: 0x8b008b,\n  darkolivegreen: 0x556b2f,\n  darkorange: 0xff8c00,\n  darkorchid: 0x9932cc,\n  darkred: 0x8b0000,\n  darksalmon: 0xe9967a,\n  darkseagreen: 0x8fbc8f,\n  darkslateblue: 0x483d8b,\n  darkslategray: 0x2f4f4f,\n  darkslategrey: 0x2f4f4f,\n  darkturquoise: 0x00ced1,\n  darkviolet: 0x9400d3,\n  deeppink: 0xff1493,\n  deepskyblue: 0x00bfff,\n  dimgray: 0x696969,\n  dimgrey: 0x696969,\n  dodgerblue: 0x1e90ff,\n  firebrick: 0xb22222,\n  floralwhite: 0xfffaf0,\n  forestgreen: 0x228b22,\n  fuchsia: 0xff00ff,\n  gainsboro: 0xdcdcdc,\n  ghostwhite: 0xf8f8ff,\n  gold: 0xffd700,\n  goldenrod: 0xdaa520,\n  gray: 0x808080,\n  green: 0x008000,\n  greenyellow: 0xadff2f,\n  grey: 0x808080,\n  honeydew: 0xf0fff0,\n  hotpink: 0xff69b4,\n  indianred: 0xcd5c5c,\n  indigo: 0x4b0082,\n  ivory: 0xfffff0,\n  khaki: 0xf0e68c,\n  lavender: 0xe6e6fa,\n  lavenderblush: 0xfff0f5,\n  lawngreen: 0x7cfc00,\n  lemonchiffon: 0xfffacd,\n  lightblue: 0xadd8e6,\n  lightcoral: 0xf08080,\n  lightcyan: 0xe0ffff,\n  lightgoldenrodyellow: 0xfafad2,\n  lightgray: 0xd3d3d3,\n  lightgreen: 0x90ee90,\n  lightgrey: 0xd3d3d3,\n  lightpink: 0xffb6c1,\n  lightsalmon: 0xffa07a,\n  lightseagreen: 0x20b2aa,\n  lightskyblue: 0x87cefa,\n  lightslategray: 0x778899,\n  lightslategrey: 0x778899,\n  lightsteelblue: 0xb0c4de,\n  lightyellow: 0xffffe0,\n  lime: 0x00ff00,\n  limegreen: 0x32cd32,\n  linen: 0xfaf0e6,\n  magenta: 0xff00ff,\n  maroon: 0x800000,\n  mediumaquamarine: 0x66cdaa,\n  mediumblue: 0x0000cd,\n  mediumorchid: 0xba55d3,\n  mediumpurple: 0x9370db,\n  mediumseagreen: 0x3cb371,\n  mediumslateblue: 0x7b68ee,\n  mediumspringgreen: 0x00fa9a,\n  mediumturquoise: 0x48d1cc,\n  mediumvioletred: 0xc71585,\n  midnightblue: 0x191970,\n  mintcream: 0xf5fffa,\n  mistyrose: 0xffe4e1,\n  moccasin: 0xffe4b5,\n  navajowhite: 0xffdead,\n  navy: 0x000080,\n  oldlace: 0xfdf5e6,\n  olive: 0x808000,\n  olivedrab: 0x6b8e23,\n  orange: 0xffa500,\n  orangered: 0xff4500,\n  orchid: 0xda70d6,\n  palegoldenrod: 0xeee8aa,\n  palegreen: 0x98fb98,\n  paleturquoise: 0xafeeee,\n  palevioletred: 0xdb7093,\n  papayawhip: 0xffefd5,\n  peachpuff: 0xffdab9,\n  peru: 0xcd853f,\n  pink: 0xffc0cb,\n  plum: 0xdda0dd,\n  powderblue: 0xb0e0e6,\n  purple: 0x800080,\n  rebeccapurple: 0x663399,\n  red: 0xff0000,\n  rosybrown: 0xbc8f8f,\n  royalblue: 0x4169e1,\n  saddlebrown: 0x8b4513,\n  salmon: 0xfa8072,\n  sandybrown: 0xf4a460,\n  seagreen: 0x2e8b57,\n  seashell: 0xfff5ee,\n  sienna: 0xa0522d,\n  silver: 0xc0c0c0,\n  skyblue: 0x87ceeb,\n  slateblue: 0x6a5acd,\n  slategray: 0x708090,\n  slategrey: 0x708090,\n  snow: 0xfffafa,\n  springgreen: 0x00ff7f,\n  steelblue: 0x4682b4,\n  tan: 0xd2b48c,\n  teal: 0x008080,\n  thistle: 0xd8bfd8,\n  tomato: 0xff6347,\n  turquoise: 0x40e0d0,\n  violet: 0xee82ee,\n  wheat: 0xf5deb3,\n  white: 0xffffff,\n  whitesmoke: 0xf5f5f5,\n  yellow: 0xffff00,\n  yellowgreen: 0x9acd32\n};\n\ndefine(Color, color, {\n  copy: function(channels) {\n    return Object.assign(new this.constructor, this, channels);\n  },\n  displayable: function() {\n    return this.rgb().displayable();\n  },\n  hex: color_formatHex, // Deprecated! Use color.formatHex.\n  formatHex: color_formatHex,\n  formatHsl: color_formatHsl,\n  formatRgb: color_formatRgb,\n  toString: color_formatRgb\n});\n\nfunction color_formatHex() {\n  return this.rgb().formatHex();\n}\n\nfunction color_formatHsl() {\n  return hslConvert(this).formatHsl();\n}\n\nfunction color_formatRgb() {\n  return this.rgb().formatRgb();\n}\n\nexport default function color(format) {\n  var m, l;\n  format = (format + \"\").trim().toLowerCase();\n  return (m = reHex.exec(format)) ? (l = m[1].length, m = parseInt(m[1], 16), l === 6 ? rgbn(m) // #ff0000\n      : l === 3 ? new Rgb((m >> 8 & 0xf) | (m >> 4 & 0xf0), (m >> 4 & 0xf) | (m & 0xf0), ((m & 0xf) << 4) | (m & 0xf), 1) // #f00\n      : l === 8 ? new Rgb(m >> 24 & 0xff, m >> 16 & 0xff, m >> 8 & 0xff, (m & 0xff) / 0xff) // #ff000000\n      : l === 4 ? new Rgb((m >> 12 & 0xf) | (m >> 8 & 0xf0), (m >> 8 & 0xf) | (m >> 4 & 0xf0), (m >> 4 & 0xf) | (m & 0xf0), (((m & 0xf) << 4) | (m & 0xf)) / 0xff) // #f000\n      : null) // invalid hex\n      : (m = reRgbInteger.exec(format)) ? new Rgb(m[1], m[2], m[3], 1) // rgb(255, 0, 0)\n      : (m = reRgbPercent.exec(format)) ? new Rgb(m[1] * 255 / 100, m[2] * 255 / 100, m[3] * 255 / 100, 1) // rgb(100%, 0%, 0%)\n      : (m = reRgbaInteger.exec(format)) ? rgba(m[1], m[2], m[3], m[4]) // rgba(255, 0, 0, 1)\n      : (m = reRgbaPercent.exec(format)) ? rgba(m[1] * 255 / 100, m[2] * 255 / 100, m[3] * 255 / 100, m[4]) // rgb(100%, 0%, 0%, 1)\n      : (m = reHslPercent.exec(format)) ? hsla(m[1], m[2] / 100, m[3] / 100, 1) // hsl(120, 50%, 50%)\n      : (m = reHslaPercent.exec(format)) ? hsla(m[1], m[2] / 100, m[3] / 100, m[4]) // hsla(120, 50%, 50%, 1)\n      : named.hasOwnProperty(format) ? rgbn(named[format]) // eslint-disable-line no-prototype-builtins\n      : format === \"transparent\" ? new Rgb(NaN, NaN, NaN, 0)\n      : null;\n}\n\nfunction rgbn(n) {\n  return new Rgb(n >> 16 & 0xff, n >> 8 & 0xff, n & 0xff, 1);\n}\n\nfunction rgba(r, g, b, a) {\n  if (a <= 0) r = g = b = NaN;\n  return new Rgb(r, g, b, a);\n}\n\nexport function rgbConvert(o) {\n  if (!(o instanceof Color)) o = color(o);\n  if (!o) return new Rgb;\n  o = o.rgb();\n  return new Rgb(o.r, o.g, o.b, o.opacity);\n}\n\nexport function rgb(r, g, b, opacity) {\n  return arguments.length === 1 ? rgbConvert(r) : new Rgb(r, g, b, opacity == null ? 1 : opacity);\n}\n\nexport function Rgb(r, g, b, opacity) {\n  this.r = +r;\n  this.g = +g;\n  this.b = +b;\n  this.opacity = +opacity;\n}\n\ndefine(Rgb, rgb, extend(Color, {\n  brighter: function(k) {\n    k = k == null ? brighter : Math.pow(brighter, k);\n    return new Rgb(this.r * k, this.g * k, this.b * k, this.opacity);\n  },\n  darker: function(k) {\n    k = k == null ? darker : Math.pow(darker, k);\n    return new Rgb(this.r * k, this.g * k, this.b * k, this.opacity);\n  },\n  rgb: function() {\n    return this;\n  },\n  displayable: function() {\n    return (-0.5 <= this.r && this.r < 255.5)\n        && (-0.5 <= this.g && this.g < 255.5)\n        && (-0.5 <= this.b && this.b < 255.5)\n        && (0 <= this.opacity && this.opacity <= 1);\n  },\n  hex: rgb_formatHex, // Deprecated! Use color.formatHex.\n  formatHex: rgb_formatHex,\n  formatRgb: rgb_formatRgb,\n  toString: rgb_formatRgb\n}));\n\nfunction rgb_formatHex() {\n  return \"#\" + hex(this.r) + hex(this.g) + hex(this.b);\n}\n\nfunction rgb_formatRgb() {\n  var a = this.opacity; a = isNaN(a) ? 1 : Math.max(0, Math.min(1, a));\n  return (a === 1 ? \"rgb(\" : \"rgba(\")\n      + Math.max(0, Math.min(255, Math.round(this.r) || 0)) + \", \"\n      + Math.max(0, Math.min(255, Math.round(this.g) || 0)) + \", \"\n      + Math.max(0, Math.min(255, Math.round(this.b) || 0))\n      + (a === 1 ? \")\" : \", \" + a + \")\");\n}\n\nfunction hex(value) {\n  value = Math.max(0, Math.min(255, Math.round(value) || 0));\n  return (value < 16 ? \"0\" : \"\") + value.toString(16);\n}\n\nfunction hsla(h, s, l, a) {\n  if (a <= 0) h = s = l = NaN;\n  else if (l <= 0 || l >= 1) h = s = NaN;\n  else if (s <= 0) h = NaN;\n  return new Hsl(h, s, l, a);\n}\n\nexport function hslConvert(o) {\n  if (o instanceof Hsl) return new Hsl(o.h, o.s, o.l, o.opacity);\n  if (!(o instanceof Color)) o = color(o);\n  if (!o) return new Hsl;\n  if (o instanceof Hsl) return o;\n  o = o.rgb();\n  var r = o.r / 255,\n      g = o.g / 255,\n      b = o.b / 255,\n      min = Math.min(r, g, b),\n      max = Math.max(r, g, b),\n      h = NaN,\n      s = max - min,\n      l = (max + min) / 2;\n  if (s) {\n    if (r === max) h = (g - b) / s + (g < b) * 6;\n    else if (g === max) h = (b - r) / s + 2;\n    else h = (r - g) / s + 4;\n    s /= l < 0.5 ? max + min : 2 - max - min;\n    h *= 60;\n  } else {\n    s = l > 0 && l < 1 ? 0 : h;\n  }\n  return new Hsl(h, s, l, o.opacity);\n}\n\nexport function hsl(h, s, l, opacity) {\n  return arguments.length === 1 ? hslConvert(h) : new Hsl(h, s, l, opacity == null ? 1 : opacity);\n}\n\nfunction Hsl(h, s, l, opacity) {\n  this.h = +h;\n  this.s = +s;\n  this.l = +l;\n  this.opacity = +opacity;\n}\n\ndefine(Hsl, hsl, extend(Color, {\n  brighter: function(k) {\n    k = k == null ? brighter : Math.pow(brighter, k);\n    return new Hsl(this.h, this.s, this.l * k, this.opacity);\n  },\n  darker: function(k) {\n    k = k == null ? darker : Math.pow(darker, k);\n    return new Hsl(this.h, this.s, this.l * k, this.opacity);\n  },\n  rgb: function() {\n    var h = this.h % 360 + (this.h < 0) * 360,\n        s = isNaN(h) || isNaN(this.s) ? 0 : this.s,\n        l = this.l,\n        m2 = l + (l < 0.5 ? l : 1 - l) * s,\n        m1 = 2 * l - m2;\n    return new Rgb(\n      hsl2rgb(h >= 240 ? h - 240 : h + 120, m1, m2),\n      hsl2rgb(h, m1, m2),\n      hsl2rgb(h < 120 ? h + 240 : h - 120, m1, m2),\n      this.opacity\n    );\n  },\n  displayable: function() {\n    return (0 <= this.s && this.s <= 1 || isNaN(this.s))\n        && (0 <= this.l && this.l <= 1)\n        && (0 <= this.opacity && this.opacity <= 1);\n  },\n  formatHsl: function() {\n    var a = this.opacity; a = isNaN(a) ? 1 : Math.max(0, Math.min(1, a));\n    return (a === 1 ? \"hsl(\" : \"hsla(\")\n        + (this.h || 0) + \", \"\n        + (this.s || 0) * 100 + \"%, \"\n        + (this.l || 0) * 100 + \"%\"\n        + (a === 1 ? \")\" : \", \" + a + \")\");\n  }\n}));\n\n/* From FvD 13.37, CSS Color Module Level 3 */\nfunction hsl2rgb(h, m1, m2) {\n  return (h < 60 ? m1 + (m2 - m1) * h / 60\n      : h < 180 ? m2\n      : h < 240 ? m1 + (m2 - m1) * (240 - h) / 60\n      : m1) * 255;\n}\n","export function basis(t1, v0, v1, v2, v3) {\n  var t2 = t1 * t1, t3 = t2 * t1;\n  return ((1 - 3 * t1 + 3 * t2 - t3) * v0\n      + (4 - 6 * t2 + 3 * t3) * v1\n      + (1 + 3 * t1 + 3 * t2 - 3 * t3) * v2\n      + t3 * v3) / 6;\n}\n\nexport default function(values) {\n  var n = values.length - 1;\n  return function(t) {\n    var i = t <= 0 ? (t = 0) : t >= 1 ? (t = 1, n - 1) : Math.floor(t * n),\n        v1 = values[i],\n        v2 = values[i + 1],\n        v0 = i > 0 ? values[i - 1] : 2 * v1 - v2,\n        v3 = i < n - 1 ? values[i + 2] : 2 * v2 - v1;\n    return basis((t - i / n) * n, v0, v1, v2, v3);\n  };\n}\n","export default function(x) {\n  return function() {\n    return x;\n  };\n}\n","import constant from \"./constant.js\";\n\nfunction linear(a, d) {\n  return function(t) {\n    return a + t * d;\n  };\n}\n\nfunction exponential(a, b, y) {\n  return a = Math.pow(a, y), b = Math.pow(b, y) - a, y = 1 / y, function(t) {\n    return Math.pow(a + t * b, y);\n  };\n}\n\nexport function hue(a, b) {\n  var d = b - a;\n  return d ? linear(a, d > 180 || d < -180 ? d - 360 * Math.round(d / 360) : d) : constant(isNaN(a) ? b : a);\n}\n\nexport function gamma(y) {\n  return (y = +y) === 1 ? nogamma : function(a, b) {\n    return b - a ? exponential(a, b, y) : constant(isNaN(a) ? b : a);\n  };\n}\n\nexport default function nogamma(a, b) {\n  var d = b - a;\n  return d ? linear(a, d) : constant(isNaN(a) ? b : a);\n}\n","import {rgb as colorRgb} from \"d3-color\";\nimport basis from \"./basis.js\";\nimport basisClosed from \"./basisClosed.js\";\nimport nogamma, {gamma} from \"./color.js\";\n\nexport default (function rgbGamma(y) {\n  var color = gamma(y);\n\n  function rgb(start, end) {\n    var r = color((start = colorRgb(start)).r, (end = colorRgb(end)).r),\n        g = color(start.g, end.g),\n        b = color(start.b, end.b),\n        opacity = nogamma(start.opacity, end.opacity);\n    return function(t) {\n      start.r = r(t);\n      start.g = g(t);\n      start.b = b(t);\n      start.opacity = opacity(t);\n      return start + \"\";\n    };\n  }\n\n  rgb.gamma = rgbGamma;\n\n  return rgb;\n})(1);\n\nfunction rgbSpline(spline) {\n  return function(colors) {\n    var n = colors.length,\n        r = new Array(n),\n        g = new Array(n),\n        b = new Array(n),\n        i, color;\n    for (i = 0; i < n; ++i) {\n      color = colorRgb(colors[i]);\n      r[i] = color.r || 0;\n      g[i] = color.g || 0;\n      b[i] = color.b || 0;\n    }\n    r = spline(r);\n    g = spline(g);\n    b = spline(b);\n    color.opacity = 1;\n    return function(t) {\n      color.r = r(t);\n      color.g = g(t);\n      color.b = b(t);\n      return color + \"\";\n    };\n  };\n}\n\nexport var rgbBasis = rgbSpline(basis);\nexport var rgbBasisClosed = rgbSpline(basisClosed);\n","export default function(a, b) {\n  if (!b) b = [];\n  var n = a ? Math.min(b.length, a.length) : 0,\n      c = b.slice(),\n      i;\n  return function(t) {\n    for (i = 0; i < n; ++i) c[i] = a[i] * (1 - t) + b[i] * t;\n    return c;\n  };\n}\n\nexport function isNumberArray(x) {\n  return ArrayBuffer.isView(x) && !(x instanceof DataView);\n}\n","import {basis} from \"./basis.js\";\n\nexport default function(values) {\n  var n = values.length;\n  return function(t) {\n    var i = Math.floor(((t %= 1) < 0 ? ++t : t) * n),\n        v0 = values[(i + n - 1) % n],\n        v1 = values[i % n],\n        v2 = values[(i + 1) % n],\n        v3 = values[(i + 2) % n];\n    return basis((t - i / n) * n, v0, v1, v2, v3);\n  };\n}\n","import value from \"./value.js\";\nimport numberArray, {isNumberArray} from \"./numberArray.js\";\n\nexport default function(a, b) {\n  return (isNumberArray(b) ? numberArray : genericArray)(a, b);\n}\n\nexport function genericArray(a, b) {\n  var nb = b ? b.length : 0,\n      na = a ? Math.min(nb, a.length) : 0,\n      x = new Array(na),\n      c = new Array(nb),\n      i;\n\n  for (i = 0; i < na; ++i) x[i] = value(a[i], b[i]);\n  for (; i < nb; ++i) c[i] = b[i];\n\n  return function(t) {\n    for (i = 0; i < na; ++i) c[i] = x[i](t);\n    return c;\n  };\n}\n","import value from \"./value.js\";\n\nexport default function(a, b) {\n  var i = {},\n      c = {},\n      k;\n\n  if (a === null || typeof a !== \"object\") a = {};\n  if (b === null || typeof b !== \"object\") b = {};\n\n  for (k in b) {\n    if (k in a) {\n      i[k] = value(a[k], b[k]);\n    } else {\n      c[k] = b[k];\n    }\n  }\n\n  return function(t) {\n    for (k in i) c[k] = i[k](t);\n    return c;\n  };\n}\n","import number from \"./number.js\";\n\nvar reA = /[-+]?(?:\\d+\\.?\\d*|\\.?\\d+)(?:[eE][-+]?\\d+)?/g,\n    reB = new RegExp(reA.source, \"g\");\n\nfunction zero(b) {\n  return function() {\n    return b;\n  };\n}\n\nfunction one(b) {\n  return function(t) {\n    return b(t) + \"\";\n  };\n}\n\nexport default function(a, b) {\n  var bi = reA.lastIndex = reB.lastIndex = 0, // scan index for next number in b\n      am, // current match in a\n      bm, // current match in b\n      bs, // string preceding current number in b, if any\n      i = -1, // index in s\n      s = [], // string constants and placeholders\n      q = []; // number interpolators\n\n  // Coerce inputs to strings.\n  a = a + \"\", b = b + \"\";\n\n  // Interpolate pairs of numbers in a & b.\n  while ((am = reA.exec(a))\n      && (bm = reB.exec(b))) {\n    if ((bs = bm.index) > bi) { // a string precedes the next number in b\n      bs = b.slice(bi, bs);\n      if (s[i]) s[i] += bs; // coalesce with previous string\n      else s[++i] = bs;\n    }\n    if ((am = am[0]) === (bm = bm[0])) { // numbers in a & b match\n      if (s[i]) s[i] += bm; // coalesce with previous string\n      else s[++i] = bm;\n    } else { // interpolate non-matching numbers\n      s[++i] = null;\n      q.push({i: i, x: number(am, bm)});\n    }\n    bi = reB.lastIndex;\n  }\n\n  // Add remains of b.\n  if (bi < b.length) {\n    bs = b.slice(bi);\n    if (s[i]) s[i] += bs; // coalesce with previous string\n    else s[++i] = bs;\n  }\n\n  // Special optimization for only a single match.\n  // Otherwise, interpolate each of the numbers and rejoin the string.\n  return s.length < 2 ? (q[0]\n      ? one(q[0].x)\n      : zero(b))\n      : (b = q.length, function(t) {\n          for (var i = 0, o; i < b; ++i) s[(o = q[i]).i] = o.x(t);\n          return s.join(\"\");\n        });\n}\n","import {color} from \"d3-color\";\nimport rgb from \"./rgb.js\";\nimport {genericArray} from \"./array.js\";\nimport date from \"./date.js\";\nimport number from \"./number.js\";\nimport object from \"./object.js\";\nimport string from \"./string.js\";\nimport constant from \"./constant.js\";\nimport numberArray, {isNumberArray} from \"./numberArray.js\";\n\nexport default function(a, b) {\n  var t = typeof b, c;\n  return b == null || t === \"boolean\" ? constant(b)\n      : (t === \"number\" ? number\n      : t === \"string\" ? ((c = color(b)) ? (b = c, rgb) : string)\n      : b instanceof color ? rgb\n      : b instanceof Date ? date\n      : isNumberArray(b) ? numberArray\n      : Array.isArray(b) ? genericArray\n      : typeof b.valueOf !== \"function\" && typeof b.toString !== \"function\" || isNaN(b) ? object\n      : number)(a, b);\n}\n","export default function(a, b) {\n  var d = new Date;\n  return a = +a, b = +b, function(t) {\n    return d.setTime(a * (1 - t) + b * t), d;\n  };\n}\n","export default function(a, b) {\n  return a = +a, b = +b, function(t) {\n    return Math.round(a * (1 - t) + b * t);\n  };\n}\n","export default function(x) {\n  return function() {\n    return x;\n  };\n}\n","export default function(x) {\n  return +x;\n}\n","import {bisect} from \"d3-array\";\nimport {interpolate as interpolateValue, interpolateRound} from \"d3-interpolate\";\nimport {map, slice} from \"./array\";\nimport constant from \"./constant\";\nimport number from \"./number\";\n\nvar unit = [0, 1];\n\nexport function deinterpolateLinear(a, b) {\n  return (b -= (a = +a))\n      ? function(x) { return (x - a) / b; }\n      : constant(b);\n}\n\nfunction deinterpolateClamp(deinterpolate) {\n  return function(a, b) {\n    var d = deinterpolate(a = +a, b = +b);\n    return function(x) { return x <= a ? 0 : x >= b ? 1 : d(x); };\n  };\n}\n\nfunction reinterpolateClamp(reinterpolate) {\n  return function(a, b) {\n    var r = reinterpolate(a = +a, b = +b);\n    return function(t) { return t <= 0 ? a : t >= 1 ? b : r(t); };\n  };\n}\n\nfunction bimap(domain, range, deinterpolate, reinterpolate) {\n  var d0 = domain[0], d1 = domain[1], r0 = range[0], r1 = range[1];\n  if (d1 < d0) d0 = deinterpolate(d1, d0), r0 = reinterpolate(r1, r0);\n  else d0 = deinterpolate(d0, d1), r0 = reinterpolate(r0, r1);\n  return function(x) { return r0(d0(x)); };\n}\n\nfunction polymap(domain, range, deinterpolate, reinterpolate) {\n  var j = Math.min(domain.length, range.length) - 1,\n      d = new Array(j),\n      r = new Array(j),\n      i = -1;\n\n  // Reverse descending domains.\n  if (domain[j] < domain[0]) {\n    domain = domain.slice().reverse();\n    range = range.slice().reverse();\n  }\n\n  while (++i < j) {\n    d[i] = deinterpolate(domain[i], domain[i + 1]);\n    r[i] = reinterpolate(range[i], range[i + 1]);\n  }\n\n  return function(x) {\n    var i = bisect(domain, x, 1, j) - 1;\n    return r[i](d[i](x));\n  };\n}\n\nexport function copy(source, target) {\n  return target\n      .domain(source.domain())\n      .range(source.range())\n      .interpolate(source.interpolate())\n      .clamp(source.clamp());\n}\n\n// deinterpolate(a, b)(x) takes a domain value x in [a,b] and returns the corresponding parameter t in [0,1].\n// reinterpolate(a, b)(t) takes a parameter t in [0,1] and returns the corresponding domain value x in [a,b].\nexport default function continuous(deinterpolate, reinterpolate) {\n  var domain = unit,\n      range = unit,\n      interpolate = interpolateValue,\n      clamp = false,\n      piecewise,\n      output,\n      input;\n\n  function rescale() {\n    piecewise = Math.min(domain.length, range.length) > 2 ? polymap : bimap;\n    output = input = null;\n    return scale;\n  }\n\n  function scale(x) {\n    return (output || (output = piecewise(domain, range, clamp ? deinterpolateClamp(deinterpolate) : deinterpolate, interpolate)))(+x);\n  }\n\n  scale.invert = function(y) {\n    return (input || (input = piecewise(range, domain, deinterpolateLinear, clamp ? reinterpolateClamp(reinterpolate) : reinterpolate)))(+y);\n  };\n\n  scale.domain = function(_) {\n    return arguments.length ? (domain = map.call(_, number), rescale()) : domain.slice();\n  };\n\n  scale.range = function(_) {\n    return arguments.length ? (range = slice.call(_), rescale()) : range.slice();\n  };\n\n  scale.rangeRound = function(_) {\n    return range = slice.call(_), interpolate = interpolateRound, rescale();\n  };\n\n  scale.clamp = function(_) {\n    return arguments.length ? (clamp = !!_, rescale()) : clamp;\n  };\n\n  scale.interpolate = function(_) {\n    return arguments.length ? (interpolate = _, rescale()) : interpolate;\n  };\n\n  return rescale();\n}\n","// [[fill]align][sign][symbol][0][width][,][.precision][~][type]\nvar re = /^(?:(.)?([<>=^]))?([+\\-( ])?([$#])?(0)?(\\d+)?(,)?(\\.\\d+)?(~)?([a-z%])?$/i;\n\nexport default function formatSpecifier(specifier) {\n  if (!(match = re.exec(specifier))) throw new Error(\"invalid format: \" + specifier);\n  var match;\n  return new FormatSpecifier({\n    fill: match[1],\n    align: match[2],\n    sign: match[3],\n    symbol: match[4],\n    zero: match[5],\n    width: match[6],\n    comma: match[7],\n    precision: match[8] && match[8].slice(1),\n    trim: match[9],\n    type: match[10]\n  });\n}\n\nformatSpecifier.prototype = FormatSpecifier.prototype; // instanceof\n\nexport function FormatSpecifier(specifier) {\n  this.fill = specifier.fill === undefined ? \" \" : specifier.fill + \"\";\n  this.align = specifier.align === undefined ? \">\" : specifier.align + \"\";\n  this.sign = specifier.sign === undefined ? \"-\" : specifier.sign + \"\";\n  this.symbol = specifier.symbol === undefined ? \"\" : specifier.symbol + \"\";\n  this.zero = !!specifier.zero;\n  this.width = specifier.width === undefined ? undefined : +specifier.width;\n  this.comma = !!specifier.comma;\n  this.precision = specifier.precision === undefined ? undefined : +specifier.precision;\n  this.trim = !!specifier.trim;\n  this.type = specifier.type === undefined ? \"\" : specifier.type + \"\";\n}\n\nFormatSpecifier.prototype.toString = function() {\n  return this.fill\n      + this.align\n      + this.sign\n      + this.symbol\n      + (this.zero ? \"0\" : \"\")\n      + (this.width === undefined ? \"\" : Math.max(1, this.width | 0))\n      + (this.comma ? \",\" : \"\")\n      + (this.precision === undefined ? \"\" : \".\" + Math.max(0, this.precision | 0))\n      + (this.trim ? \"~\" : \"\")\n      + this.type;\n};\n","// Computes the decimal coefficient and exponent of the specified number x with\n// significant digits p, where x is positive and p is in [1, 21] or undefined.\n// For example, formatDecimal(1.23) returns [\"123\", 0].\nexport default function(x, p) {\n  if ((i = (x = p ? x.toExponential(p - 1) : x.toExponential()).indexOf(\"e\")) < 0) return null; // NaN, ±Infinity\n  var i, coefficient = x.slice(0, i);\n\n  // The string returned by toExponential either has the form \\d\\.\\d+e[-+]\\d+\n  // (e.g., 1.2e+3) or the form \\de[-+]\\d+ (e.g., 1e+3).\n  return [\n    coefficient.length > 1 ? coefficient[0] + coefficient.slice(2) : coefficient,\n    +x.slice(i + 1)\n  ];\n}\n","import formatDecimal from \"./formatDecimal.js\";\n\nexport var prefixExponent;\n\nexport default function(x, p) {\n  var d = formatDecimal(x, p);\n  if (!d) return x + \"\";\n  var coefficient = d[0],\n      exponent = d[1],\n      i = exponent - (prefixExponent = Math.max(-8, Math.min(8, Math.floor(exponent / 3))) * 3) + 1,\n      n = coefficient.length;\n  return i === n ? coefficient\n      : i > n ? coefficient + new Array(i - n + 1).join(\"0\")\n      : i > 0 ? coefficient.slice(0, i) + \".\" + coefficient.slice(i)\n      : \"0.\" + new Array(1 - i).join(\"0\") + formatDecimal(x, Math.max(0, p + i - 1))[0]; // less than 1y!\n}\n","import formatLocale from \"./locale.js\";\n\nvar locale;\nexport var format;\nexport var formatPrefix;\n\ndefaultLocale({\n  decimal: \".\",\n  thousands: \",\",\n  grouping: [3],\n  currency: [\"$\", \"\"],\n  minus: \"-\"\n});\n\nexport default function defaultLocale(definition) {\n  locale = formatLocale(definition);\n  format = locale.format;\n  formatPrefix = locale.formatPrefix;\n  return locale;\n}\n","import formatDecimal from \"./formatDecimal.js\";\n\nexport default function(x) {\n  return x = formatDecimal(Math.abs(x)), x ? x[1] : NaN;\n}\n","// Trims insignificant zeros, e.g., replaces 1.2000k with 1.2k.\nexport default function(s) {\n  out: for (var n = s.length, i = 1, i0 = -1, i1; i < n; ++i) {\n    switch (s[i]) {\n      case \".\": i0 = i1 = i; break;\n      case \"0\": if (i0 === 0) i0 = i; i1 = i; break;\n      default: if (!+s[i]) break out; if (i0 > 0) i0 = 0; break;\n    }\n  }\n  return i0 > 0 ? s.slice(0, i0) + s.slice(i1 + 1) : s;\n}\n","import formatDecimal from \"./formatDecimal.js\";\n\nexport default function(x, p) {\n  var d = formatDecimal(x, p);\n  if (!d) return x + \"\";\n  var coefficient = d[0],\n      exponent = d[1];\n  return exponent < 0 ? \"0.\" + new Array(-exponent).join(\"0\") + coefficient\n      : coefficient.length > exponent + 1 ? coefficient.slice(0, exponent + 1) + \".\" + coefficient.slice(exponent + 1)\n      : coefficient + new Array(exponent - coefficient.length + 2).join(\"0\");\n}\n","import formatPrefixAuto from \"./formatPrefixAuto.js\";\nimport formatRounded from \"./formatRounded.js\";\n\nexport default {\n  \"%\": function(x, p) { return (x * 100).toFixed(p); },\n  \"b\": function(x) { return Math.round(x).toString(2); },\n  \"c\": function(x) { return x + \"\"; },\n  \"d\": function(x) { return Math.round(x).toString(10); },\n  \"e\": function(x, p) { return x.toExponential(p); },\n  \"f\": function(x, p) { return x.toFixed(p); },\n  \"g\": function(x, p) { return x.toPrecision(p); },\n  \"o\": function(x) { return Math.round(x).toString(8); },\n  \"p\": function(x, p) { return formatRounded(x * 100, p); },\n  \"r\": formatRounded,\n  \"s\": formatPrefixAuto,\n  \"X\": function(x) { return Math.round(x).toString(16).toUpperCase(); },\n  \"x\": function(x) { return Math.round(x).toString(16); }\n};\n","export default function(x) {\n  return x;\n}\n","import exponent from \"./exponent.js\";\nimport formatGroup from \"./formatGroup.js\";\nimport formatNumerals from \"./formatNumerals.js\";\nimport formatSpecifier from \"./formatSpecifier.js\";\nimport formatTrim from \"./formatTrim.js\";\nimport formatTypes from \"./formatTypes.js\";\nimport {prefixExponent} from \"./formatPrefixAuto.js\";\nimport identity from \"./identity.js\";\n\nvar map = Array.prototype.map,\n    prefixes = [\"y\",\"z\",\"a\",\"f\",\"p\",\"n\",\"µ\",\"m\",\"\",\"k\",\"M\",\"G\",\"T\",\"P\",\"E\",\"Z\",\"Y\"];\n\nexport default function(locale) {\n  var group = locale.grouping === undefined || locale.thousands === undefined ? identity : formatGroup(map.call(locale.grouping, Number), locale.thousands + \"\"),\n      currencyPrefix = locale.currency === undefined ? \"\" : locale.currency[0] + \"\",\n      currencySuffix = locale.currency === undefined ? \"\" : locale.currency[1] + \"\",\n      decimal = locale.decimal === undefined ? \".\" : locale.decimal + \"\",\n      numerals = locale.numerals === undefined ? identity : formatNumerals(map.call(locale.numerals, String)),\n      percent = locale.percent === undefined ? \"%\" : locale.percent + \"\",\n      minus = locale.minus === undefined ? \"-\" : locale.minus + \"\",\n      nan = locale.nan === undefined ? \"NaN\" : locale.nan + \"\";\n\n  function newFormat(specifier) {\n    specifier = formatSpecifier(specifier);\n\n    var fill = specifier.fill,\n        align = specifier.align,\n        sign = specifier.sign,\n        symbol = specifier.symbol,\n        zero = specifier.zero,\n        width = specifier.width,\n        comma = specifier.comma,\n        precision = specifier.precision,\n        trim = specifier.trim,\n        type = specifier.type;\n\n    // The \"n\" type is an alias for \",g\".\n    if (type === \"n\") comma = true, type = \"g\";\n\n    // The \"\" type, and any invalid type, is an alias for \".12~g\".\n    else if (!formatTypes[type]) precision === undefined && (precision = 12), trim = true, type = \"g\";\n\n    // If zero fill is specified, padding goes after sign and before digits.\n    if (zero || (fill === \"0\" && align === \"=\")) zero = true, fill = \"0\", align = \"=\";\n\n    // Compute the prefix and suffix.\n    // For SI-prefix, the suffix is lazily computed.\n    var prefix = symbol === \"$\" ? currencyPrefix : symbol === \"#\" && /[boxX]/.test(type) ? \"0\" + type.toLowerCase() : \"\",\n        suffix = symbol === \"$\" ? currencySuffix : /[%p]/.test(type) ? percent : \"\";\n\n    // What format function should we use?\n    // Is this an integer type?\n    // Can this type generate exponential notation?\n    var formatType = formatTypes[type],\n        maybeSuffix = /[defgprs%]/.test(type);\n\n    // Set the default precision if not specified,\n    // or clamp the specified precision to the supported range.\n    // For significant precision, it must be in [1, 21].\n    // For fixed precision, it must be in [0, 20].\n    precision = precision === undefined ? 6\n        : /[gprs]/.test(type) ? Math.max(1, Math.min(21, precision))\n        : Math.max(0, Math.min(20, precision));\n\n    function format(value) {\n      var valuePrefix = prefix,\n          valueSuffix = suffix,\n          i, n, c;\n\n      if (type === \"c\") {\n        valueSuffix = formatType(value) + valueSuffix;\n        value = \"\";\n      } else {\n        value = +value;\n\n        // Perform the initial formatting.\n        var valueNegative = value < 0;\n        value = isNaN(value) ? nan : formatType(Math.abs(value), precision);\n\n        // Trim insignificant zeros.\n        if (trim) value = formatTrim(value);\n\n        // If a negative value rounds to zero during formatting, treat as positive.\n        if (valueNegative && +value === 0) valueNegative = false;\n\n        // Compute the prefix and suffix.\n        valuePrefix = (valueNegative ? (sign === \"(\" ? sign : minus) : sign === \"-\" || sign === \"(\" ? \"\" : sign) + valuePrefix;\n\n        valueSuffix = (type === \"s\" ? prefixes[8 + prefixExponent / 3] : \"\") + valueSuffix + (valueNegative && sign === \"(\" ? \")\" : \"\");\n\n        // Break the formatted value into the integer “value” part that can be\n        // grouped, and fractional or exponential “suffix” part that is not.\n        if (maybeSuffix) {\n          i = -1, n = value.length;\n          while (++i < n) {\n            if (c = value.charCodeAt(i), 48 > c || c > 57) {\n              valueSuffix = (c === 46 ? decimal + value.slice(i + 1) : value.slice(i)) + valueSuffix;\n              value = value.slice(0, i);\n              break;\n            }\n          }\n        }\n      }\n\n      // If the fill character is not \"0\", grouping is applied before padding.\n      if (comma && !zero) value = group(value, Infinity);\n\n      // Compute the padding.\n      var length = valuePrefix.length + value.length + valueSuffix.length,\n          padding = length < width ? new Array(width - length + 1).join(fill) : \"\";\n\n      // If the fill character is \"0\", grouping is applied after padding.\n      if (comma && zero) value = group(padding + value, padding.length ? width - valueSuffix.length : Infinity), padding = \"\";\n\n      // Reconstruct the final output based on the desired alignment.\n      switch (align) {\n        case \"<\": value = valuePrefix + value + valueSuffix + padding; break;\n        case \"=\": value = valuePrefix + padding + value + valueSuffix; break;\n        case \"^\": value = padding.slice(0, length = padding.length >> 1) + valuePrefix + value + valueSuffix + padding.slice(length); break;\n        default: value = padding + valuePrefix + value + valueSuffix; break;\n      }\n\n      return numerals(value);\n    }\n\n    format.toString = function() {\n      return specifier + \"\";\n    };\n\n    return format;\n  }\n\n  function formatPrefix(specifier, value) {\n    var f = newFormat((specifier = formatSpecifier(specifier), specifier.type = \"f\", specifier)),\n        e = Math.max(-8, Math.min(8, Math.floor(exponent(value) / 3))) * 3,\n        k = Math.pow(10, -e),\n        prefix = prefixes[8 + e / 3];\n    return function(value) {\n      return f(k * value) + prefix;\n    };\n  }\n\n  return {\n    format: newFormat,\n    formatPrefix: formatPrefix\n  };\n}\n","export default function(grouping, thousands) {\n  return function(value, width) {\n    var i = value.length,\n        t = [],\n        j = 0,\n        g = grouping[0],\n        length = 0;\n\n    while (i > 0 && g > 0) {\n      if (length + g + 1 > width) g = Math.max(1, width - length);\n      t.push(value.substring(i -= g, i + g));\n      if ((length += g + 1) > width) break;\n      g = grouping[j = (j + 1) % grouping.length];\n    }\n\n    return t.reverse().join(thousands);\n  };\n}\n","export default function(numerals) {\n  return function(value) {\n    return value.replace(/[0-9]/g, function(i) {\n      return numerals[+i];\n    });\n  };\n}\n","import exponent from \"./exponent.js\";\n\nexport default function(step, max) {\n  step = Math.abs(step), max = Math.abs(max) - step;\n  return Math.max(0, exponent(max) - exponent(step)) + 1;\n}\n","import {tickStep} from \"d3-array\";\nimport {format, formatPrefix, formatSpecifier, precisionFixed, precisionPrefix, precisionRound} from \"d3-format\";\n\nexport default function(domain, count, specifier) {\n  var start = domain[0],\n      stop = domain[domain.length - 1],\n      step = tickStep(start, stop, count == null ? 10 : count),\n      precision;\n  specifier = formatSpecifier(specifier == null ? \",f\" : specifier);\n  switch (specifier.type) {\n    case \"s\": {\n      var value = Math.max(Math.abs(start), Math.abs(stop));\n      if (specifier.precision == null && !isNaN(precision = precisionPrefix(step, value))) specifier.precision = precision;\n      return formatPrefix(specifier, value);\n    }\n    case \"\":\n    case \"e\":\n    case \"g\":\n    case \"p\":\n    case \"r\": {\n      if (specifier.precision == null && !isNaN(precision = precisionRound(step, Math.max(Math.abs(start), Math.abs(stop))))) specifier.precision = precision - (specifier.type === \"e\");\n      break;\n    }\n    case \"f\":\n    case \"%\": {\n      if (specifier.precision == null && !isNaN(precision = precisionFixed(step))) specifier.precision = precision - (specifier.type === \"%\") * 2;\n      break;\n    }\n  }\n  return format(specifier);\n}\n","import exponent from \"./exponent.js\";\n\nexport default function(step, value) {\n  return Math.max(0, Math.max(-8, Math.min(8, Math.floor(exponent(value) / 3))) * 3 - exponent(Math.abs(step)));\n}\n","import exponent from \"./exponent.js\";\n\nexport default function(step) {\n  return Math.max(0, -exponent(Math.abs(step)));\n}\n","import {ticks, tickIncrement} from \"d3-array\";\nimport {interpolateNumber as reinterpolate} from \"d3-interpolate\";\nimport {default as continuous, copy, deinterpolateLinear as deinterpolate} from \"./continuous\";\nimport tickFormat from \"./tickFormat\";\n\nexport function linearish(scale) {\n  var domain = scale.domain;\n\n  scale.ticks = function(count) {\n    var d = domain();\n    return ticks(d[0], d[d.length - 1], count == null ? 10 : count);\n  };\n\n  scale.tickFormat = function(count, specifier) {\n    return tickFormat(domain(), count, specifier);\n  };\n\n  scale.nice = function(count) {\n    if (count == null) count = 10;\n\n    var d = domain(),\n        i0 = 0,\n        i1 = d.length - 1,\n        start = d[i0],\n        stop = d[i1],\n        step;\n\n    if (stop < start) {\n      step = start, start = stop, stop = step;\n      step = i0, i0 = i1, i1 = step;\n    }\n\n    step = tickIncrement(start, stop, count);\n\n    if (step > 0) {\n      start = Math.floor(start / step) * step;\n      stop = Math.ceil(stop / step) * step;\n      step = tickIncrement(start, stop, count);\n    } else if (step < 0) {\n      start = Math.ceil(start * step) / step;\n      stop = Math.floor(stop * step) / step;\n      step = tickIncrement(start, stop, count);\n    }\n\n    if (step > 0) {\n      d[i0] = Math.floor(start / step) * step;\n      d[i1] = Math.ceil(stop / step) * step;\n      domain(d);\n    } else if (step < 0) {\n      d[i0] = Math.ceil(start * step) / step;\n      d[i1] = Math.floor(stop * step) / step;\n      domain(d);\n    }\n\n    return scale;\n  };\n\n  return scale;\n}\n\nexport default function linear() {\n  var scale = continuous(deinterpolate, reinterpolate);\n\n  scale.copy = function() {\n    return copy(scale, linear());\n  };\n\n  return linearish(scale);\n}\n","import {map} from \"./array\";\nimport {linearish} from \"./linear\";\nimport number from \"./number\";\n\nexport default function identity() {\n  var domain = [0, 1];\n\n  function scale(x) {\n    return +x;\n  }\n\n  scale.invert = scale;\n\n  scale.domain = scale.range = function(_) {\n    return arguments.length ? (domain = map.call(_, number), scale) : domain.slice();\n  };\n\n  scale.copy = function() {\n    return identity().domain(domain);\n  };\n\n  return linearish(scale);\n}\n","export default function(domain, interval) {\n  domain = domain.slice();\n\n  var i0 = 0,\n      i1 = domain.length - 1,\n      x0 = domain[i0],\n      x1 = domain[i1],\n      t;\n\n  if (x1 < x0) {\n    t = i0, i0 = i1, i1 = t;\n    t = x0, x0 = x1, x1 = t;\n  }\n\n  domain[i0] = interval.floor(x0);\n  domain[i1] = interval.ceil(x1);\n  return domain;\n}\n","import {ticks} from \"d3-array\";\nimport {format} from \"d3-format\";\nimport constant from \"./constant\";\nimport nice from \"./nice\";\nimport {default as continuous, copy} from \"./continuous\";\n\nfunction deinterpolate(a, b) {\n  return (b = Math.log(b / a))\n      ? function(x) { return Math.log(x / a) / b; }\n      : constant(b);\n}\n\nfunction reinterpolate(a, b) {\n  return a < 0\n      ? function(t) { return -Math.pow(-b, t) * Math.pow(-a, 1 - t); }\n      : function(t) { return Math.pow(b, t) * Math.pow(a, 1 - t); };\n}\n\nfunction pow10(x) {\n  return isFinite(x) ? +(\"1e\" + x) : x < 0 ? 0 : x;\n}\n\nfunction powp(base) {\n  return base === 10 ? pow10\n      : base === Math.E ? Math.exp\n      : function(x) { return Math.pow(base, x); };\n}\n\nfunction logp(base) {\n  return base === Math.E ? Math.log\n      : base === 10 && Math.log10\n      || base === 2 && Math.log2\n      || (base = Math.log(base), function(x) { return Math.log(x) / base; });\n}\n\nfunction reflect(f) {\n  return function(x) {\n    return -f(-x);\n  };\n}\n\nexport default function log() {\n  var scale = continuous(deinterpolate, reinterpolate).domain([1, 10]),\n      domain = scale.domain,\n      base = 10,\n      logs = logp(10),\n      pows = powp(10);\n\n  function rescale() {\n    logs = logp(base), pows = powp(base);\n    if (domain()[0] < 0) logs = reflect(logs), pows = reflect(pows);\n    return scale;\n  }\n\n  scale.base = function(_) {\n    return arguments.length ? (base = +_, rescale()) : base;\n  };\n\n  scale.domain = function(_) {\n    return arguments.length ? (domain(_), rescale()) : domain();\n  };\n\n  scale.ticks = function(count) {\n    var d = domain(),\n        u = d[0],\n        v = d[d.length - 1],\n        r;\n\n    if (r = v < u) i = u, u = v, v = i;\n\n    var i = logs(u),\n        j = logs(v),\n        p,\n        k,\n        t,\n        n = count == null ? 10 : +count,\n        z = [];\n\n    if (!(base % 1) && j - i < n) {\n      i = Math.round(i) - 1, j = Math.round(j) + 1;\n      if (u > 0) for (; i < j; ++i) {\n        for (k = 1, p = pows(i); k < base; ++k) {\n          t = p * k;\n          if (t < u) continue;\n          if (t > v) break;\n          z.push(t);\n        }\n      } else for (; i < j; ++i) {\n        for (k = base - 1, p = pows(i); k >= 1; --k) {\n          t = p * k;\n          if (t < u) continue;\n          if (t > v) break;\n          z.push(t);\n        }\n      }\n    } else {\n      z = ticks(i, j, Math.min(j - i, n)).map(pows);\n    }\n\n    return r ? z.reverse() : z;\n  };\n\n  scale.tickFormat = function(count, specifier) {\n    if (specifier == null) specifier = base === 10 ? \".0e\" : \",\";\n    if (typeof specifier !== \"function\") specifier = format(specifier);\n    if (count === Infinity) return specifier;\n    if (count == null) count = 10;\n    var k = Math.max(1, base * count / scale.ticks().length); // TODO fast estimate?\n    return function(d) {\n      var i = d / pows(Math.round(logs(d)));\n      if (i * base < base - 0.5) i *= base;\n      return i <= k ? specifier(d) : \"\";\n    };\n  };\n\n  scale.nice = function() {\n    return domain(nice(domain(), {\n      floor: function(x) { return pows(Math.floor(logs(x))); },\n      ceil: function(x) { return pows(Math.ceil(logs(x))); }\n    }));\n  };\n\n  scale.copy = function() {\n    return copy(scale, log().base(base));\n  };\n\n  return scale;\n}\n","import constant from \"./constant\";\nimport {linearish} from \"./linear\";\nimport {default as continuous, copy} from \"./continuous\";\n\nfunction raise(x, exponent) {\n  return x < 0 ? -Math.pow(-x, exponent) : Math.pow(x, exponent);\n}\n\nexport default function pow() {\n  var exponent = 1,\n      scale = continuous(deinterpolate, reinterpolate),\n      domain = scale.domain;\n\n  function deinterpolate(a, b) {\n    return (b = raise(b, exponent) - (a = raise(a, exponent)))\n        ? function(x) { return (raise(x, exponent) - a) / b; }\n        : constant(b);\n  }\n\n  function reinterpolate(a, b) {\n    b = raise(b, exponent) - (a = raise(a, exponent));\n    return function(t) { return raise(a + b * t, 1 / exponent); };\n  }\n\n  scale.exponent = function(_) {\n    return arguments.length ? (exponent = +_, domain(domain())) : exponent;\n  };\n\n  scale.copy = function() {\n    return copy(scale, pow().exponent(exponent));\n  };\n\n  return linearish(scale);\n}\n\nexport function sqrt() {\n  return pow().exponent(0.5);\n}\n","import {ascending, bisect, quantile as threshold} from \"d3-array\";\nimport {slice} from \"./array\";\n\nexport default function quantile() {\n  var domain = [],\n      range = [],\n      thresholds = [];\n\n  function rescale() {\n    var i = 0, n = Math.max(1, range.length);\n    thresholds = new Array(n - 1);\n    while (++i < n) thresholds[i - 1] = threshold(domain, i / n);\n    return scale;\n  }\n\n  function scale(x) {\n    if (!isNaN(x = +x)) return range[bisect(thresholds, x)];\n  }\n\n  scale.invertExtent = function(y) {\n    var i = range.indexOf(y);\n    return i < 0 ? [NaN, NaN] : [\n      i > 0 ? thresholds[i - 1] : domain[0],\n      i < thresholds.length ? thresholds[i] : domain[domain.length - 1]\n    ];\n  };\n\n  scale.domain = function(_) {\n    if (!arguments.length) return domain.slice();\n    domain = [];\n    for (var i = 0, n = _.length, d; i < n; ++i) if (d = _[i], d != null && !isNaN(d = +d)) domain.push(d);\n    domain.sort(ascending);\n    return rescale();\n  };\n\n  scale.range = function(_) {\n    return arguments.length ? (range = slice.call(_), rescale()) : range.slice();\n  };\n\n  scale.quantiles = function() {\n    return thresholds.slice();\n  };\n\n  scale.copy = function() {\n    return quantile()\n        .domain(domain)\n        .range(range);\n  };\n\n  return scale;\n}\n","import {bisect} from \"d3-array\";\nimport {slice} from \"./array\";\nimport {linearish} from \"./linear\";\n\nexport default function quantize() {\n  var x0 = 0,\n      x1 = 1,\n      n = 1,\n      domain = [0.5],\n      range = [0, 1];\n\n  function scale(x) {\n    if (x <= x) return range[bisect(domain, x, 0, n)];\n  }\n\n  function rescale() {\n    var i = -1;\n    domain = new Array(n);\n    while (++i < n) domain[i] = ((i + 1) * x1 - (i - n) * x0) / (n + 1);\n    return scale;\n  }\n\n  scale.domain = function(_) {\n    return arguments.length ? (x0 = +_[0], x1 = +_[1], rescale()) : [x0, x1];\n  };\n\n  scale.range = function(_) {\n    return arguments.length ? (n = (range = slice.call(_)).length - 1, rescale()) : range.slice();\n  };\n\n  scale.invertExtent = function(y) {\n    var i = range.indexOf(y);\n    return i < 0 ? [NaN, NaN]\n        : i < 1 ? [x0, domain[0]]\n        : i >= n ? [domain[n - 1], x1]\n        : [domain[i - 1], domain[i]];\n  };\n\n  scale.copy = function() {\n    return quantize()\n        .domain([x0, x1])\n        .range(range);\n  };\n\n  return linearish(scale);\n}\n","import {bisect} from \"d3-array\";\nimport {slice} from \"./array\";\n\nexport default function threshold() {\n  var domain = [0.5],\n      range = [0, 1],\n      n = 1;\n\n  function scale(x) {\n    if (x <= x) return range[bisect(domain, x, 0, n)];\n  }\n\n  scale.domain = function(_) {\n    return arguments.length ? (domain = slice.call(_), n = Math.min(domain.length, range.length - 1), scale) : domain.slice();\n  };\n\n  scale.range = function(_) {\n    return arguments.length ? (range = slice.call(_), n = Math.min(domain.length, range.length - 1), scale) : range.slice();\n  };\n\n  scale.invertExtent = function(y) {\n    var i = range.indexOf(y);\n    return [domain[i - 1], domain[i]];\n  };\n\n  scale.copy = function() {\n    return threshold()\n        .domain(domain)\n        .range(range);\n  };\n\n  return scale;\n}\n","var t0 = new Date,\n    t1 = new Date;\n\nexport default function newInterval(floori, offseti, count, field) {\n\n  function interval(date) {\n    return floori(date = arguments.length === 0 ? new Date : new Date(+date)), date;\n  }\n\n  interval.floor = function(date) {\n    return floori(date = new Date(+date)), date;\n  };\n\n  interval.ceil = function(date) {\n    return floori(date = new Date(date - 1)), offseti(date, 1), floori(date), date;\n  };\n\n  interval.round = function(date) {\n    var d0 = interval(date),\n        d1 = interval.ceil(date);\n    return date - d0 < d1 - date ? d0 : d1;\n  };\n\n  interval.offset = function(date, step) {\n    return offseti(date = new Date(+date), step == null ? 1 : Math.floor(step)), date;\n  };\n\n  interval.range = function(start, stop, step) {\n    var range = [], previous;\n    start = interval.ceil(start);\n    step = step == null ? 1 : Math.floor(step);\n    if (!(start < stop) || !(step > 0)) return range; // also handles Invalid Date\n    do range.push(previous = new Date(+start)), offseti(start, step), floori(start);\n    while (previous < start && start < stop);\n    return range;\n  };\n\n  interval.filter = function(test) {\n    return newInterval(function(date) {\n      if (date >= date) while (floori(date), !test(date)) date.setTime(date - 1);\n    }, function(date, step) {\n      if (date >= date) {\n        if (step < 0) while (++step <= 0) {\n          while (offseti(date, -1), !test(date)) {} // eslint-disable-line no-empty\n        } else while (--step >= 0) {\n          while (offseti(date, +1), !test(date)) {} // eslint-disable-line no-empty\n        }\n      }\n    });\n  };\n\n  if (count) {\n    interval.count = function(start, end) {\n      t0.setTime(+start), t1.setTime(+end);\n      floori(t0), floori(t1);\n      return Math.floor(count(t0, t1));\n    };\n\n    interval.every = function(step) {\n      step = Math.floor(step);\n      return !isFinite(step) || !(step > 0) ? null\n          : !(step > 1) ? interval\n          : interval.filter(field\n              ? function(d) { return field(d) % step === 0; }\n              : function(d) { return interval.count(0, d) % step === 0; });\n    };\n  }\n\n  return interval;\n}\n","import interval from \"./interval.js\";\n\nvar year = interval(function(date) {\n  date.setMonth(0, 1);\n  date.setHours(0, 0, 0, 0);\n}, function(date, step) {\n  date.setFullYear(date.getFullYear() + step);\n}, function(start, end) {\n  return end.getFullYear() - start.getFullYear();\n}, function(date) {\n  return date.getFullYear();\n});\n\n// An optimized implementation for this simple case.\nyear.every = function(k) {\n  return !isFinite(k = Math.floor(k)) || !(k > 0) ? null : interval(function(date) {\n    date.setFullYear(Math.floor(date.getFullYear() / k) * k);\n    date.setMonth(0, 1);\n    date.setHours(0, 0, 0, 0);\n  }, function(date, step) {\n    date.setFullYear(date.getFullYear() + step * k);\n  });\n};\n\nexport default year;\nexport var years = year.range;\n","import interval from \"./interval.js\";\n\nvar month = interval(function(date) {\n  date.setDate(1);\n  date.setHours(0, 0, 0, 0);\n}, function(date, step) {\n  date.setMonth(date.getMonth() + step);\n}, function(start, end) {\n  return end.getMonth() - start.getMonth() + (end.getFullYear() - start.getFullYear()) * 12;\n}, function(date) {\n  return date.getMonth();\n});\n\nexport default month;\nexport var months = month.range;\n","export var durationSecond = 1e3;\nexport var durationMinute = 6e4;\nexport var durationHour = 36e5;\nexport var durationDay = 864e5;\nexport var durationWeek = 6048e5;\n","import interval from \"./interval.js\";\nimport {durationMinute, durationWeek} from \"./duration.js\";\n\nfunction weekday(i) {\n  return interval(function(date) {\n    date.setDate(date.getDate() - (date.getDay() + 7 - i) % 7);\n    date.setHours(0, 0, 0, 0);\n  }, function(date, step) {\n    date.setDate(date.getDate() + step * 7);\n  }, function(start, end) {\n    return (end - start - (end.getTimezoneOffset() - start.getTimezoneOffset()) * durationMinute) / durationWeek;\n  });\n}\n\nexport var sunday = weekday(0);\nexport var monday = weekday(1);\nexport var tuesday = weekday(2);\nexport var wednesday = weekday(3);\nexport var thursday = weekday(4);\nexport var friday = weekday(5);\nexport var saturday = weekday(6);\n\nexport var sundays = sunday.range;\nexport var mondays = monday.range;\nexport var tuesdays = tuesday.range;\nexport var wednesdays = wednesday.range;\nexport var thursdays = thursday.range;\nexport var fridays = friday.range;\nexport var saturdays = saturday.range;\n","import interval from \"./interval.js\";\nimport {durationDay, durationMinute} from \"./duration.js\";\n\nvar day = interval(function(date) {\n  date.setHours(0, 0, 0, 0);\n}, function(date, step) {\n  date.setDate(date.getDate() + step);\n}, function(start, end) {\n  return (end - start - (end.getTimezoneOffset() - start.getTimezoneOffset()) * durationMinute) / durationDay;\n}, function(date) {\n  return date.getDate() - 1;\n});\n\nexport default day;\nexport var days = day.range;\n","import interval from \"./interval.js\";\nimport {durationHour, durationMinute, durationSecond} from \"./duration.js\";\n\nvar hour = interval(function(date) {\n  date.setTime(date - date.getMilliseconds() - date.getSeconds() * durationSecond - date.getMinutes() * durationMinute);\n}, function(date, step) {\n  date.setTime(+date + step * durationHour);\n}, function(start, end) {\n  return (end - start) / durationHour;\n}, function(date) {\n  return date.getHours();\n});\n\nexport default hour;\nexport var hours = hour.range;\n","import interval from \"./interval.js\";\nimport {durationMinute, durationSecond} from \"./duration.js\";\n\nvar minute = interval(function(date) {\n  date.setTime(date - date.getMilliseconds() - date.getSeconds() * durationSecond);\n}, function(date, step) {\n  date.setTime(+date + step * durationMinute);\n}, function(start, end) {\n  return (end - start) / durationMinute;\n}, function(date) {\n  return date.getMinutes();\n});\n\nexport default minute;\nexport var minutes = minute.range;\n","import interval from \"./interval.js\";\nimport {durationSecond} from \"./duration.js\";\n\nvar second = interval(function(date) {\n  date.setTime(date - date.getMilliseconds());\n}, function(date, step) {\n  date.setTime(+date + step * durationSecond);\n}, function(start, end) {\n  return (end - start) / durationSecond;\n}, function(date) {\n  return date.getUTCSeconds();\n});\n\nexport default second;\nexport var seconds = second.range;\n","import interval from \"./interval.js\";\n\nvar millisecond = interval(function() {\n  // noop\n}, function(date, step) {\n  date.setTime(+date + step);\n}, function(start, end) {\n  return end - start;\n});\n\n// An optimized implementation for this simple case.\nmillisecond.every = function(k) {\n  k = Math.floor(k);\n  if (!isFinite(k) || !(k > 0)) return null;\n  if (!(k > 1)) return millisecond;\n  return interval(function(date) {\n    date.setTime(Math.floor(date / k) * k);\n  }, function(date, step) {\n    date.setTime(+date + step * k);\n  }, function(start, end) {\n    return (end - start) / k;\n  });\n};\n\nexport default millisecond;\nexport var milliseconds = millisecond.range;\n","import interval from \"./interval.js\";\nimport {durationWeek} from \"./duration.js\";\n\nfunction utcWeekday(i) {\n  return interval(function(date) {\n    date.setUTCDate(date.getUTCDate() - (date.getUTCDay() + 7 - i) % 7);\n    date.setUTCHours(0, 0, 0, 0);\n  }, function(date, step) {\n    date.setUTCDate(date.getUTCDate() + step * 7);\n  }, function(start, end) {\n    return (end - start) / durationWeek;\n  });\n}\n\nexport var utcSunday = utcWeekday(0);\nexport var utcMonday = utcWeekday(1);\nexport var utcTuesday = utcWeekday(2);\nexport var utcWednesday = utcWeekday(3);\nexport var utcThursday = utcWeekday(4);\nexport var utcFriday = utcWeekday(5);\nexport var utcSaturday = utcWeekday(6);\n\nexport var utcSundays = utcSunday.range;\nexport var utcMondays = utcMonday.range;\nexport var utcTuesdays = utcTuesday.range;\nexport var utcWednesdays = utcWednesday.range;\nexport var utcThursdays = utcThursday.range;\nexport var utcFridays = utcFriday.range;\nexport var utcSaturdays = utcSaturday.range;\n","import interval from \"./interval.js\";\nimport {durationDay} from \"./duration.js\";\n\nvar utcDay = interval(function(date) {\n  date.setUTCHours(0, 0, 0, 0);\n}, function(date, step) {\n  date.setUTCDate(date.getUTCDate() + step);\n}, function(start, end) {\n  return (end - start) / durationDay;\n}, function(date) {\n  return date.getUTCDate() - 1;\n});\n\nexport default utcDay;\nexport var utcDays = utcDay.range;\n","import interval from \"./interval.js\";\n\nvar utcYear = interval(function(date) {\n  date.setUTCMonth(0, 1);\n  date.setUTCHours(0, 0, 0, 0);\n}, function(date, step) {\n  date.setUTCFullYear(date.getUTCFullYear() + step);\n}, function(start, end) {\n  return end.getUTCFullYear() - start.getUTCFullYear();\n}, function(date) {\n  return date.getUTCFullYear();\n});\n\n// An optimized implementation for this simple case.\nutcYear.every = function(k) {\n  return !isFinite(k = Math.floor(k)) || !(k > 0) ? null : interval(function(date) {\n    date.setUTCFullYear(Math.floor(date.getUTCFullYear() / k) * k);\n    date.setUTCMonth(0, 1);\n    date.setUTCHours(0, 0, 0, 0);\n  }, function(date, step) {\n    date.setUTCFullYear(date.getUTCFullYear() + step * k);\n  });\n};\n\nexport default utcYear;\nexport var utcYears = utcYear.range;\n","import {\n  timeDay,\n  timeSunday,\n  timeMonday,\n  timeThursday,\n  timeYear,\n  utcDay,\n  utcSunday,\n  utcMonday,\n  utcThursday,\n  utcYear\n} from \"d3-time\";\n\nfunction localDate(d) {\n  if (0 <= d.y && d.y < 100) {\n    var date = new Date(-1, d.m, d.d, d.H, d.M, d.S, d.L);\n    date.setFullYear(d.y);\n    return date;\n  }\n  return new Date(d.y, d.m, d.d, d.H, d.M, d.S, d.L);\n}\n\nfunction utcDate(d) {\n  if (0 <= d.y && d.y < 100) {\n    var date = new Date(Date.UTC(-1, d.m, d.d, d.H, d.M, d.S, d.L));\n    date.setUTCFullYear(d.y);\n    return date;\n  }\n  return new Date(Date.UTC(d.y, d.m, d.d, d.H, d.M, d.S, d.L));\n}\n\nfunction newDate(y, m, d) {\n  return {y: y, m: m, d: d, H: 0, M: 0, S: 0, L: 0};\n}\n\nexport default function formatLocale(locale) {\n  var locale_dateTime = locale.dateTime,\n      locale_date = locale.date,\n      locale_time = locale.time,\n      locale_periods = locale.periods,\n      locale_weekdays = locale.days,\n      locale_shortWeekdays = locale.shortDays,\n      locale_months = locale.months,\n      locale_shortMonths = locale.shortMonths;\n\n  var periodRe = formatRe(locale_periods),\n      periodLookup = formatLookup(locale_periods),\n      weekdayRe = formatRe(locale_weekdays),\n      weekdayLookup = formatLookup(locale_weekdays),\n      shortWeekdayRe = formatRe(locale_shortWeekdays),\n      shortWeekdayLookup = formatLookup(locale_shortWeekdays),\n      monthRe = formatRe(locale_months),\n      monthLookup = formatLookup(locale_months),\n      shortMonthRe = formatRe(locale_shortMonths),\n      shortMonthLookup = formatLookup(locale_shortMonths);\n\n  var formats = {\n    \"a\": formatShortWeekday,\n    \"A\": formatWeekday,\n    \"b\": formatShortMonth,\n    \"B\": formatMonth,\n    \"c\": null,\n    \"d\": formatDayOfMonth,\n    \"e\": formatDayOfMonth,\n    \"f\": formatMicroseconds,\n    \"H\": formatHour24,\n    \"I\": formatHour12,\n    \"j\": formatDayOfYear,\n    \"L\": formatMilliseconds,\n    \"m\": formatMonthNumber,\n    \"M\": formatMinutes,\n    \"p\": formatPeriod,\n    \"q\": formatQuarter,\n    \"Q\": formatUnixTimestamp,\n    \"s\": formatUnixTimestampSeconds,\n    \"S\": formatSeconds,\n    \"u\": formatWeekdayNumberMonday,\n    \"U\": formatWeekNumberSunday,\n    \"V\": formatWeekNumberISO,\n    \"w\": formatWeekdayNumberSunday,\n    \"W\": formatWeekNumberMonday,\n    \"x\": null,\n    \"X\": null,\n    \"y\": formatYear,\n    \"Y\": formatFullYear,\n    \"Z\": formatZone,\n    \"%\": formatLiteralPercent\n  };\n\n  var utcFormats = {\n    \"a\": formatUTCShortWeekday,\n    \"A\": formatUTCWeekday,\n    \"b\": formatUTCShortMonth,\n    \"B\": formatUTCMonth,\n    \"c\": null,\n    \"d\": formatUTCDayOfMonth,\n    \"e\": formatUTCDayOfMonth,\n    \"f\": formatUTCMicroseconds,\n    \"H\": formatUTCHour24,\n    \"I\": formatUTCHour12,\n    \"j\": formatUTCDayOfYear,\n    \"L\": formatUTCMilliseconds,\n    \"m\": formatUTCMonthNumber,\n    \"M\": formatUTCMinutes,\n    \"p\": formatUTCPeriod,\n    \"q\": formatUTCQuarter,\n    \"Q\": formatUnixTimestamp,\n    \"s\": formatUnixTimestampSeconds,\n    \"S\": formatUTCSeconds,\n    \"u\": formatUTCWeekdayNumberMonday,\n    \"U\": formatUTCWeekNumberSunday,\n    \"V\": formatUTCWeekNumberISO,\n    \"w\": formatUTCWeekdayNumberSunday,\n    \"W\": formatUTCWeekNumberMonday,\n    \"x\": null,\n    \"X\": null,\n    \"y\": formatUTCYear,\n    \"Y\": formatUTCFullYear,\n    \"Z\": formatUTCZone,\n    \"%\": formatLiteralPercent\n  };\n\n  var parses = {\n    \"a\": parseShortWeekday,\n    \"A\": parseWeekday,\n    \"b\": parseShortMonth,\n    \"B\": parseMonth,\n    \"c\": parseLocaleDateTime,\n    \"d\": parseDayOfMonth,\n    \"e\": parseDayOfMonth,\n    \"f\": parseMicroseconds,\n    \"H\": parseHour24,\n    \"I\": parseHour24,\n    \"j\": parseDayOfYear,\n    \"L\": parseMilliseconds,\n    \"m\": parseMonthNumber,\n    \"M\": parseMinutes,\n    \"p\": parsePeriod,\n    \"q\": parseQuarter,\n    \"Q\": parseUnixTimestamp,\n    \"s\": parseUnixTimestampSeconds,\n    \"S\": parseSeconds,\n    \"u\": parseWeekdayNumberMonday,\n    \"U\": parseWeekNumberSunday,\n    \"V\": parseWeekNumberISO,\n    \"w\": parseWeekdayNumberSunday,\n    \"W\": parseWeekNumberMonday,\n    \"x\": parseLocaleDate,\n    \"X\": parseLocaleTime,\n    \"y\": parseYear,\n    \"Y\": parseFullYear,\n    \"Z\": parseZone,\n    \"%\": parseLiteralPercent\n  };\n\n  // These recursive directive definitions must be deferred.\n  formats.x = newFormat(locale_date, formats);\n  formats.X = newFormat(locale_time, formats);\n  formats.c = newFormat(locale_dateTime, formats);\n  utcFormats.x = newFormat(locale_date, utcFormats);\n  utcFormats.X = newFormat(locale_time, utcFormats);\n  utcFormats.c = newFormat(locale_dateTime, utcFormats);\n\n  function newFormat(specifier, formats) {\n    return function(date) {\n      var string = [],\n          i = -1,\n          j = 0,\n          n = specifier.length,\n          c,\n          pad,\n          format;\n\n      if (!(date instanceof Date)) date = new Date(+date);\n\n      while (++i < n) {\n        if (specifier.charCodeAt(i) === 37) {\n          string.push(specifier.slice(j, i));\n          if ((pad = pads[c = specifier.charAt(++i)]) != null) c = specifier.charAt(++i);\n          else pad = c === \"e\" ? \" \" : \"0\";\n          if (format = formats[c]) c = format(date, pad);\n          string.push(c);\n          j = i + 1;\n        }\n      }\n\n      string.push(specifier.slice(j, i));\n      return string.join(\"\");\n    };\n  }\n\n  function newParse(specifier, Z) {\n    return function(string) {\n      var d = newDate(1900, undefined, 1),\n          i = parseSpecifier(d, specifier, string += \"\", 0),\n          week, day;\n      if (i != string.length) return null;\n\n      // If a UNIX timestamp is specified, return it.\n      if (\"Q\" in d) return new Date(d.Q);\n      if (\"s\" in d) return new Date(d.s * 1000 + (\"L\" in d ? d.L : 0));\n\n      // If this is utcParse, never use the local timezone.\n      if (Z && !(\"Z\" in d)) d.Z = 0;\n\n      // The am-pm flag is 0 for AM, and 1 for PM.\n      if (\"p\" in d) d.H = d.H % 12 + d.p * 12;\n\n      // If the month was not specified, inherit from the quarter.\n      if (d.m === undefined) d.m = \"q\" in d ? d.q : 0;\n\n      // Convert day-of-week and week-of-year to day-of-year.\n      if (\"V\" in d) {\n        if (d.V < 1 || d.V > 53) return null;\n        if (!(\"w\" in d)) d.w = 1;\n        if (\"Z\" in d) {\n          week = utcDate(newDate(d.y, 0, 1)), day = week.getUTCDay();\n          week = day > 4 || day === 0 ? utcMonday.ceil(week) : utcMonday(week);\n          week = utcDay.offset(week, (d.V - 1) * 7);\n          d.y = week.getUTCFullYear();\n          d.m = week.getUTCMonth();\n          d.d = week.getUTCDate() + (d.w + 6) % 7;\n        } else {\n          week = localDate(newDate(d.y, 0, 1)), day = week.getDay();\n          week = day > 4 || day === 0 ? timeMonday.ceil(week) : timeMonday(week);\n          week = timeDay.offset(week, (d.V - 1) * 7);\n          d.y = week.getFullYear();\n          d.m = week.getMonth();\n          d.d = week.getDate() + (d.w + 6) % 7;\n        }\n      } else if (\"W\" in d || \"U\" in d) {\n        if (!(\"w\" in d)) d.w = \"u\" in d ? d.u % 7 : \"W\" in d ? 1 : 0;\n        day = \"Z\" in d ? utcDate(newDate(d.y, 0, 1)).getUTCDay() : localDate(newDate(d.y, 0, 1)).getDay();\n        d.m = 0;\n        d.d = \"W\" in d ? (d.w + 6) % 7 + d.W * 7 - (day + 5) % 7 : d.w + d.U * 7 - (day + 6) % 7;\n      }\n\n      // If a time zone is specified, all fields are interpreted as UTC and then\n      // offset according to the specified time zone.\n      if (\"Z\" in d) {\n        d.H += d.Z / 100 | 0;\n        d.M += d.Z % 100;\n        return utcDate(d);\n      }\n\n      // Otherwise, all fields are in local time.\n      return localDate(d);\n    };\n  }\n\n  function parseSpecifier(d, specifier, string, j) {\n    var i = 0,\n        n = specifier.length,\n        m = string.length,\n        c,\n        parse;\n\n    while (i < n) {\n      if (j >= m) return -1;\n      c = specifier.charCodeAt(i++);\n      if (c === 37) {\n        c = specifier.charAt(i++);\n        parse = parses[c in pads ? specifier.charAt(i++) : c];\n        if (!parse || ((j = parse(d, string, j)) < 0)) return -1;\n      } else if (c != string.charCodeAt(j++)) {\n        return -1;\n      }\n    }\n\n    return j;\n  }\n\n  function parsePeriod(d, string, i) {\n    var n = periodRe.exec(string.slice(i));\n    return n ? (d.p = periodLookup[n[0].toLowerCase()], i + n[0].length) : -1;\n  }\n\n  function parseShortWeekday(d, string, i) {\n    var n = shortWeekdayRe.exec(string.slice(i));\n    return n ? (d.w = shortWeekdayLookup[n[0].toLowerCase()], i + n[0].length) : -1;\n  }\n\n  function parseWeekday(d, string, i) {\n    var n = weekdayRe.exec(string.slice(i));\n    return n ? (d.w = weekdayLookup[n[0].toLowerCase()], i + n[0].length) : -1;\n  }\n\n  function parseShortMonth(d, string, i) {\n    var n = shortMonthRe.exec(string.slice(i));\n    return n ? (d.m = shortMonthLookup[n[0].toLowerCase()], i + n[0].length) : -1;\n  }\n\n  function parseMonth(d, string, i) {\n    var n = monthRe.exec(string.slice(i));\n    return n ? (d.m = monthLookup[n[0].toLowerCase()], i + n[0].length) : -1;\n  }\n\n  function parseLocaleDateTime(d, string, i) {\n    return parseSpecifier(d, locale_dateTime, string, i);\n  }\n\n  function parseLocaleDate(d, string, i) {\n    return parseSpecifier(d, locale_date, string, i);\n  }\n\n  function parseLocaleTime(d, string, i) {\n    return parseSpecifier(d, locale_time, string, i);\n  }\n\n  function formatShortWeekday(d) {\n    return locale_shortWeekdays[d.getDay()];\n  }\n\n  function formatWeekday(d) {\n    return locale_weekdays[d.getDay()];\n  }\n\n  function formatShortMonth(d) {\n    return locale_shortMonths[d.getMonth()];\n  }\n\n  function formatMonth(d) {\n    return locale_months[d.getMonth()];\n  }\n\n  function formatPeriod(d) {\n    return locale_periods[+(d.getHours() >= 12)];\n  }\n\n  function formatQuarter(d) {\n    return 1 + ~~(d.getMonth() / 3);\n  }\n\n  function formatUTCShortWeekday(d) {\n    return locale_shortWeekdays[d.getUTCDay()];\n  }\n\n  function formatUTCWeekday(d) {\n    return locale_weekdays[d.getUTCDay()];\n  }\n\n  function formatUTCShortMonth(d) {\n    return locale_shortMonths[d.getUTCMonth()];\n  }\n\n  function formatUTCMonth(d) {\n    return locale_months[d.getUTCMonth()];\n  }\n\n  function formatUTCPeriod(d) {\n    return locale_periods[+(d.getUTCHours() >= 12)];\n  }\n\n  function formatUTCQuarter(d) {\n    return 1 + ~~(d.getUTCMonth() / 3);\n  }\n\n  return {\n    format: function(specifier) {\n      var f = newFormat(specifier += \"\", formats);\n      f.toString = function() { return specifier; };\n      return f;\n    },\n    parse: function(specifier) {\n      var p = newParse(specifier += \"\", false);\n      p.toString = function() { return specifier; };\n      return p;\n    },\n    utcFormat: function(specifier) {\n      var f = newFormat(specifier += \"\", utcFormats);\n      f.toString = function() { return specifier; };\n      return f;\n    },\n    utcParse: function(specifier) {\n      var p = newParse(specifier += \"\", true);\n      p.toString = function() { return specifier; };\n      return p;\n    }\n  };\n}\n\nvar pads = {\"-\": \"\", \"_\": \" \", \"0\": \"0\"},\n    numberRe = /^\\s*\\d+/, // note: ignores next directive\n    percentRe = /^%/,\n    requoteRe = /[\\\\^$*+?|[\\]().{}]/g;\n\nfunction pad(value, fill, width) {\n  var sign = value < 0 ? \"-\" : \"\",\n      string = (sign ? -value : value) + \"\",\n      length = string.length;\n  return sign + (length < width ? new Array(width - length + 1).join(fill) + string : string);\n}\n\nfunction requote(s) {\n  return s.replace(requoteRe, \"\\\\$&\");\n}\n\nfunction formatRe(names) {\n  return new RegExp(\"^(?:\" + names.map(requote).join(\"|\") + \")\", \"i\");\n}\n\nfunction formatLookup(names) {\n  var map = {}, i = -1, n = names.length;\n  while (++i < n) map[names[i].toLowerCase()] = i;\n  return map;\n}\n\nfunction parseWeekdayNumberSunday(d, string, i) {\n  var n = numberRe.exec(string.slice(i, i + 1));\n  return n ? (d.w = +n[0], i + n[0].length) : -1;\n}\n\nfunction parseWeekdayNumberMonday(d, string, i) {\n  var n = numberRe.exec(string.slice(i, i + 1));\n  return n ? (d.u = +n[0], i + n[0].length) : -1;\n}\n\nfunction parseWeekNumberSunday(d, string, i) {\n  var n = numberRe.exec(string.slice(i, i + 2));\n  return n ? (d.U = +n[0], i + n[0].length) : -1;\n}\n\nfunction parseWeekNumberISO(d, string, i) {\n  var n = numberRe.exec(string.slice(i, i + 2));\n  return n ? (d.V = +n[0], i + n[0].length) : -1;\n}\n\nfunction parseWeekNumberMonday(d, string, i) {\n  var n = numberRe.exec(string.slice(i, i + 2));\n  return n ? (d.W = +n[0], i + n[0].length) : -1;\n}\n\nfunction parseFullYear(d, string, i) {\n  var n = numberRe.exec(string.slice(i, i + 4));\n  return n ? (d.y = +n[0], i + n[0].length) : -1;\n}\n\nfunction parseYear(d, string, i) {\n  var n = numberRe.exec(string.slice(i, i + 2));\n  return n ? (d.y = +n[0] + (+n[0] > 68 ? 1900 : 2000), i + n[0].length) : -1;\n}\n\nfunction parseZone(d, string, i) {\n  var n = /^(Z)|([+-]\\d\\d)(?::?(\\d\\d))?/.exec(string.slice(i, i + 6));\n  return n ? (d.Z = n[1] ? 0 : -(n[2] + (n[3] || \"00\")), i + n[0].length) : -1;\n}\n\nfunction parseQuarter(d, string, i) {\n  var n = numberRe.exec(string.slice(i, i + 1));\n  return n ? (d.q = n[0] * 3 - 3, i + n[0].length) : -1;\n}\n\nfunction parseMonthNumber(d, string, i) {\n  var n = numberRe.exec(string.slice(i, i + 2));\n  return n ? (d.m = n[0] - 1, i + n[0].length) : -1;\n}\n\nfunction parseDayOfMonth(d, string, i) {\n  var n = numberRe.exec(string.slice(i, i + 2));\n  return n ? (d.d = +n[0], i + n[0].length) : -1;\n}\n\nfunction parseDayOfYear(d, string, i) {\n  var n = numberRe.exec(string.slice(i, i + 3));\n  return n ? (d.m = 0, d.d = +n[0], i + n[0].length) : -1;\n}\n\nfunction parseHour24(d, string, i) {\n  var n = numberRe.exec(string.slice(i, i + 2));\n  return n ? (d.H = +n[0], i + n[0].length) : -1;\n}\n\nfunction parseMinutes(d, string, i) {\n  var n = numberRe.exec(string.slice(i, i + 2));\n  return n ? (d.M = +n[0], i + n[0].length) : -1;\n}\n\nfunction parseSeconds(d, string, i) {\n  var n = numberRe.exec(string.slice(i, i + 2));\n  return n ? (d.S = +n[0], i + n[0].length) : -1;\n}\n\nfunction parseMilliseconds(d, string, i) {\n  var n = numberRe.exec(string.slice(i, i + 3));\n  return n ? (d.L = +n[0], i + n[0].length) : -1;\n}\n\nfunction parseMicroseconds(d, string, i) {\n  var n = numberRe.exec(string.slice(i, i + 6));\n  return n ? (d.L = Math.floor(n[0] / 1000), i + n[0].length) : -1;\n}\n\nfunction parseLiteralPercent(d, string, i) {\n  var n = percentRe.exec(string.slice(i, i + 1));\n  return n ? i + n[0].length : -1;\n}\n\nfunction parseUnixTimestamp(d, string, i) {\n  var n = numberRe.exec(string.slice(i));\n  return n ? (d.Q = +n[0], i + n[0].length) : -1;\n}\n\nfunction parseUnixTimestampSeconds(d, string, i) {\n  var n = numberRe.exec(string.slice(i));\n  return n ? (d.s = +n[0], i + n[0].length) : -1;\n}\n\nfunction formatDayOfMonth(d, p) {\n  return pad(d.getDate(), p, 2);\n}\n\nfunction formatHour24(d, p) {\n  return pad(d.getHours(), p, 2);\n}\n\nfunction formatHour12(d, p) {\n  return pad(d.getHours() % 12 || 12, p, 2);\n}\n\nfunction formatDayOfYear(d, p) {\n  return pad(1 + timeDay.count(timeYear(d), d), p, 3);\n}\n\nfunction formatMilliseconds(d, p) {\n  return pad(d.getMilliseconds(), p, 3);\n}\n\nfunction formatMicroseconds(d, p) {\n  return formatMilliseconds(d, p) + \"000\";\n}\n\nfunction formatMonthNumber(d, p) {\n  return pad(d.getMonth() + 1, p, 2);\n}\n\nfunction formatMinutes(d, p) {\n  return pad(d.getMinutes(), p, 2);\n}\n\nfunction formatSeconds(d, p) {\n  return pad(d.getSeconds(), p, 2);\n}\n\nfunction formatWeekdayNumberMonday(d) {\n  var day = d.getDay();\n  return day === 0 ? 7 : day;\n}\n\nfunction formatWeekNumberSunday(d, p) {\n  return pad(timeSunday.count(timeYear(d) - 1, d), p, 2);\n}\n\nfunction formatWeekNumberISO(d, p) {\n  var day = d.getDay();\n  d = (day >= 4 || day === 0) ? timeThursday(d) : timeThursday.ceil(d);\n  return pad(timeThursday.count(timeYear(d), d) + (timeYear(d).getDay() === 4), p, 2);\n}\n\nfunction formatWeekdayNumberSunday(d) {\n  return d.getDay();\n}\n\nfunction formatWeekNumberMonday(d, p) {\n  return pad(timeMonday.count(timeYear(d) - 1, d), p, 2);\n}\n\nfunction formatYear(d, p) {\n  return pad(d.getFullYear() % 100, p, 2);\n}\n\nfunction formatFullYear(d, p) {\n  return pad(d.getFullYear() % 10000, p, 4);\n}\n\nfunction formatZone(d) {\n  var z = d.getTimezoneOffset();\n  return (z > 0 ? \"-\" : (z *= -1, \"+\"))\n      + pad(z / 60 | 0, \"0\", 2)\n      + pad(z % 60, \"0\", 2);\n}\n\nfunction formatUTCDayOfMonth(d, p) {\n  return pad(d.getUTCDate(), p, 2);\n}\n\nfunction formatUTCHour24(d, p) {\n  return pad(d.getUTCHours(), p, 2);\n}\n\nfunction formatUTCHour12(d, p) {\n  return pad(d.getUTCHours() % 12 || 12, p, 2);\n}\n\nfunction formatUTCDayOfYear(d, p) {\n  return pad(1 + utcDay.count(utcYear(d), d), p, 3);\n}\n\nfunction formatUTCMilliseconds(d, p) {\n  return pad(d.getUTCMilliseconds(), p, 3);\n}\n\nfunction formatUTCMicroseconds(d, p) {\n  return formatUTCMilliseconds(d, p) + \"000\";\n}\n\nfunction formatUTCMonthNumber(d, p) {\n  return pad(d.getUTCMonth() + 1, p, 2);\n}\n\nfunction formatUTCMinutes(d, p) {\n  return pad(d.getUTCMinutes(), p, 2);\n}\n\nfunction formatUTCSeconds(d, p) {\n  return pad(d.getUTCSeconds(), p, 2);\n}\n\nfunction formatUTCWeekdayNumberMonday(d) {\n  var dow = d.getUTCDay();\n  return dow === 0 ? 7 : dow;\n}\n\nfunction formatUTCWeekNumberSunday(d, p) {\n  return pad(utcSunday.count(utcYear(d) - 1, d), p, 2);\n}\n\nfunction formatUTCWeekNumberISO(d, p) {\n  var day = d.getUTCDay();\n  d = (day >= 4 || day === 0) ? utcThursday(d) : utcThursday.ceil(d);\n  return pad(utcThursday.count(utcYear(d), d) + (utcYear(d).getUTCDay() === 4), p, 2);\n}\n\nfunction formatUTCWeekdayNumberSunday(d) {\n  return d.getUTCDay();\n}\n\nfunction formatUTCWeekNumberMonday(d, p) {\n  return pad(utcMonday.count(utcYear(d) - 1, d), p, 2);\n}\n\nfunction formatUTCYear(d, p) {\n  return pad(d.getUTCFullYear() % 100, p, 2);\n}\n\nfunction formatUTCFullYear(d, p) {\n  return pad(d.getUTCFullYear() % 10000, p, 4);\n}\n\nfunction formatUTCZone() {\n  return \"+0000\";\n}\n\nfunction formatLiteralPercent() {\n  return \"%\";\n}\n\nfunction formatUnixTimestamp(d) {\n  return +d;\n}\n\nfunction formatUnixTimestampSeconds(d) {\n  return Math.floor(+d / 1000);\n}\n","import formatLocale from \"./locale.js\";\n\nvar locale;\nexport var timeFormat;\nexport var timeParse;\nexport var utcFormat;\nexport var utcParse;\n\ndefaultLocale({\n  dateTime: \"%x, %X\",\n  date: \"%-m/%-d/%Y\",\n  time: \"%-I:%M:%S %p\",\n  periods: [\"AM\", \"PM\"],\n  days: [\"Sunday\", \"Monday\", \"Tuesday\", \"Wednesday\", \"Thursday\", \"Friday\", \"Saturday\"],\n  shortDays: [\"Sun\", \"Mon\", \"Tue\", \"Wed\", \"Thu\", \"Fri\", \"Sat\"],\n  months: [\"January\", \"February\", \"March\", \"April\", \"May\", \"June\", \"July\", \"August\", \"September\", \"October\", \"November\", \"December\"],\n  shortMonths: [\"Jan\", \"Feb\", \"Mar\", \"Apr\", \"May\", \"Jun\", \"Jul\", \"Aug\", \"Sep\", \"Oct\", \"Nov\", \"Dec\"]\n});\n\nexport default function defaultLocale(definition) {\n  locale = formatLocale(definition);\n  timeFormat = locale.format;\n  timeParse = locale.parse;\n  utcFormat = locale.utcFormat;\n  utcParse = locale.utcParse;\n  return locale;\n}\n","import {bisector, tickStep} from \"d3-array\";\nimport {interpolateNumber as reinterpolate} from \"d3-interpolate\";\nimport {timeYear, timeMonth, timeWeek, timeDay, timeHour, timeMinute, timeSecond, timeMillisecond} from \"d3-time\";\nimport {timeFormat} from \"d3-time-format\";\nimport {map} from \"./array\";\nimport {default as continuous, copy, deinterpolateLinear as deinterpolate} from \"./continuous\";\nimport nice from \"./nice\";\n\nvar durationSecond = 1000,\n    durationMinute = durationSecond * 60,\n    durationHour = durationMinute * 60,\n    durationDay = durationHour * 24,\n    durationWeek = durationDay * 7,\n    durationMonth = durationDay * 30,\n    durationYear = durationDay * 365;\n\nfunction date(t) {\n  return new Date(t);\n}\n\nfunction number(t) {\n  return t instanceof Date ? +t : +new Date(+t);\n}\n\nexport function calendar(year, month, week, day, hour, minute, second, millisecond, format) {\n  var scale = continuous(deinterpolate, reinterpolate),\n      invert = scale.invert,\n      domain = scale.domain;\n\n  var formatMillisecond = format(\".%L\"),\n      formatSecond = format(\":%S\"),\n      formatMinute = format(\"%I:%M\"),\n      formatHour = format(\"%I %p\"),\n      formatDay = format(\"%a %d\"),\n      formatWeek = format(\"%b %d\"),\n      formatMonth = format(\"%B\"),\n      formatYear = format(\"%Y\");\n\n  var tickIntervals = [\n    [second,  1,      durationSecond],\n    [second,  5,  5 * durationSecond],\n    [second, 15, 15 * durationSecond],\n    [second, 30, 30 * durationSecond],\n    [minute,  1,      durationMinute],\n    [minute,  5,  5 * durationMinute],\n    [minute, 15, 15 * durationMinute],\n    [minute, 30, 30 * durationMinute],\n    [  hour,  1,      durationHour  ],\n    [  hour,  3,  3 * durationHour  ],\n    [  hour,  6,  6 * durationHour  ],\n    [  hour, 12, 12 * durationHour  ],\n    [   day,  1,      durationDay   ],\n    [   day,  2,  2 * durationDay   ],\n    [  week,  1,      durationWeek  ],\n    [ month,  1,      durationMonth ],\n    [ month,  3,  3 * durationMonth ],\n    [  year,  1,      durationYear  ]\n  ];\n\n  function tickFormat(date) {\n    return (second(date) < date ? formatMillisecond\n        : minute(date) < date ? formatSecond\n        : hour(date) < date ? formatMinute\n        : day(date) < date ? formatHour\n        : month(date) < date ? (week(date) < date ? formatDay : formatWeek)\n        : year(date) < date ? formatMonth\n        : formatYear)(date);\n  }\n\n  function tickInterval(interval, start, stop, step) {\n    if (interval == null) interval = 10;\n\n    // If a desired tick count is specified, pick a reasonable tick interval\n    // based on the extent of the domain and a rough estimate of tick size.\n    // Otherwise, assume interval is already a time interval and use it.\n    if (typeof interval === \"number\") {\n      var target = Math.abs(stop - start) / interval,\n          i = bisector(function(i) { return i[2]; }).right(tickIntervals, target);\n      if (i === tickIntervals.length) {\n        step = tickStep(start / durationYear, stop / durationYear, interval);\n        interval = year;\n      } else if (i) {\n        i = tickIntervals[target / tickIntervals[i - 1][2] < tickIntervals[i][2] / target ? i - 1 : i];\n        step = i[1];\n        interval = i[0];\n      } else {\n        step = Math.max(tickStep(start, stop, interval), 1);\n        interval = millisecond;\n      }\n    }\n\n    return step == null ? interval : interval.every(step);\n  }\n\n  scale.invert = function(y) {\n    return new Date(invert(y));\n  };\n\n  scale.domain = function(_) {\n    return arguments.length ? domain(map.call(_, number)) : domain().map(date);\n  };\n\n  scale.ticks = function(interval, step) {\n    var d = domain(),\n        t0 = d[0],\n        t1 = d[d.length - 1],\n        r = t1 < t0,\n        t;\n    if (r) t = t0, t0 = t1, t1 = t;\n    t = tickInterval(interval, t0, t1, step);\n    t = t ? t.range(t0, t1 + 1) : []; // inclusive stop\n    return r ? t.reverse() : t;\n  };\n\n  scale.tickFormat = function(count, specifier) {\n    return specifier == null ? tickFormat : format(specifier);\n  };\n\n  scale.nice = function(interval, step) {\n    var d = domain();\n    return (interval = tickInterval(interval, d[0], d[d.length - 1], step))\n        ? domain(nice(d, interval))\n        : scale;\n  };\n\n  scale.copy = function() {\n    return copy(scale, calendar(year, month, week, day, hour, minute, second, millisecond, format));\n  };\n\n  return scale;\n}\n\nexport default function() {\n  return calendar(timeYear, timeMonth, timeWeek, timeDay, timeHour, timeMinute, timeSecond, timeMillisecond, timeFormat).domain([new Date(2000, 0, 1), new Date(2000, 0, 2)]);\n}\n","import interval from \"./interval.js\";\n\nvar utcMonth = interval(function(date) {\n  date.setUTCDate(1);\n  date.setUTCHours(0, 0, 0, 0);\n}, function(date, step) {\n  date.setUTCMonth(date.getUTCMonth() + step);\n}, function(start, end) {\n  return end.getUTCMonth() - start.getUTCMonth() + (end.getUTCFullYear() - start.getUTCFullYear()) * 12;\n}, function(date) {\n  return date.getUTCMonth();\n});\n\nexport default utcMonth;\nexport var utcMonths = utcMonth.range;\n","import interval from \"./interval.js\";\nimport {durationHour} from \"./duration.js\";\n\nvar utcHour = interval(function(date) {\n  date.setUTCMinutes(0, 0, 0);\n}, function(date, step) {\n  date.setTime(+date + step * durationHour);\n}, function(start, end) {\n  return (end - start) / durationHour;\n}, function(date) {\n  return date.getUTCHours();\n});\n\nexport default utcHour;\nexport var utcHours = utcHour.range;\n","import interval from \"./interval.js\";\nimport {durationMinute} from \"./duration.js\";\n\nvar utcMinute = interval(function(date) {\n  date.setUTCSeconds(0, 0);\n}, function(date, step) {\n  date.setTime(+date + step * durationMinute);\n}, function(start, end) {\n  return (end - start) / durationMinute;\n}, function(date) {\n  return date.getUTCMinutes();\n});\n\nexport default utcMinute;\nexport var utcMinutes = utcMinute.range;\n","export default function(s) {\n  return s.match(/.{6}/g).map(function(x) {\n    return \"#\" + x;\n  });\n}\n","import colors from \"./colors\";\n\nexport default colors(\"1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf\");\n","import colors from \"./colors\";\n\nexport default colors(\"393b795254a36b6ecf9c9ede6379398ca252b5cf6bcedb9c8c6d31bd9e39e7ba52e7cb94843c39ad494ad6616be7969c7b4173a55194ce6dbdde9ed6\");\n","import colors from \"./colors\";\n\nexport default colors(\"1f77b4aec7e8ff7f0effbb782ca02c98df8ad62728ff98969467bdc5b0d58c564bc49c94e377c2f7b6d27f7f7fc7c7c7bcbd22dbdb8d17becf9edae5\");\n","import colors from \"./colors\";\n\nexport default colors(\"3182bd6baed69ecae1c6dbefe6550dfd8d3cfdae6bfdd0a231a35474c476a1d99bc7e9c0756bb19e9ac8bcbddcdadaeb636363969696bdbdbdd9d9d9\");\n","export var deg2rad = Math.PI / 180;\nexport var rad2deg = 180 / Math.PI;\n","import define, {extend} from \"./define.js\";\nimport {Color, rgbConvert, Rgb, darker, brighter} from \"./color.js\";\nimport {deg2rad, rad2deg} from \"./math.js\";\n\nvar A = -0.14861,\n    B = +1.78277,\n    C = -0.29227,\n    D = -0.90649,\n    E = +1.97294,\n    ED = E * D,\n    EB = E * B,\n    BC_DA = B * C - D * A;\n\nfunction cubehelixConvert(o) {\n  if (o instanceof Cubehelix) return new Cubehelix(o.h, o.s, o.l, o.opacity);\n  if (!(o instanceof Rgb)) o = rgbConvert(o);\n  var r = o.r / 255,\n      g = o.g / 255,\n      b = o.b / 255,\n      l = (BC_DA * b + ED * r - EB * g) / (BC_DA + ED - EB),\n      bl = b - l,\n      k = (E * (g - l) - C * bl) / D,\n      s = Math.sqrt(k * k + bl * bl) / (E * l * (1 - l)), // NaN if l=0 or l=1\n      h = s ? Math.atan2(k, bl) * rad2deg - 120 : NaN;\n  return new Cubehelix(h < 0 ? h + 360 : h, s, l, o.opacity);\n}\n\nexport default function cubehelix(h, s, l, opacity) {\n  return arguments.length === 1 ? cubehelixConvert(h) : new Cubehelix(h, s, l, opacity == null ? 1 : opacity);\n}\n\nexport function Cubehelix(h, s, l, opacity) {\n  this.h = +h;\n  this.s = +s;\n  this.l = +l;\n  this.opacity = +opacity;\n}\n\ndefine(Cubehelix, cubehelix, extend(Color, {\n  brighter: function(k) {\n    k = k == null ? brighter : Math.pow(brighter, k);\n    return new Cubehelix(this.h, this.s, this.l * k, this.opacity);\n  },\n  darker: function(k) {\n    k = k == null ? darker : Math.pow(darker, k);\n    return new Cubehelix(this.h, this.s, this.l * k, this.opacity);\n  },\n  rgb: function() {\n    var h = isNaN(this.h) ? 0 : (this.h + 120) * deg2rad,\n        l = +this.l,\n        a = isNaN(this.s) ? 0 : this.s * l * (1 - l),\n        cosh = Math.cos(h),\n        sinh = Math.sin(h);\n    return new Rgb(\n      255 * (l + a * (A * cosh + B * sinh)),\n      255 * (l + a * (C * cosh + D * sinh)),\n      255 * (l + a * (E * cosh)),\n      this.opacity\n    );\n  }\n}));\n","import {cubehelix as colorCubehelix} from \"d3-color\";\nimport color, {hue} from \"./color.js\";\n\nfunction cubehelix(hue) {\n  return (function cubehelixGamma(y) {\n    y = +y;\n\n    function cubehelix(start, end) {\n      var h = hue((start = colorCubehelix(start)).h, (end = colorCubehelix(end)).h),\n          s = color(start.s, end.s),\n          l = color(start.l, end.l),\n          opacity = color(start.opacity, end.opacity);\n      return function(t) {\n        start.h = h(t);\n        start.s = s(t);\n        start.l = l(Math.pow(t, y));\n        start.opacity = opacity(t);\n        return start + \"\";\n      };\n    }\n\n    cubehelix.gamma = cubehelixGamma;\n\n    return cubehelix;\n  })(1);\n}\n\nexport default cubehelix(hue);\nexport var cubehelixLong = cubehelix(color);\n","import {cubehelix} from \"d3-color\";\nimport {interpolateCubehelixLong} from \"d3-interpolate\";\n\nexport default interpolateCubehelixLong(cubehelix(300, 0.5, 0.0), cubehelix(-240, 0.5, 1.0));\n","import {cubehelix} from \"d3-color\";\nimport {interpolateCubehelixLong} from \"d3-interpolate\";\n\nexport var warm = interpolateCubehelixLong(cubehelix(-100, 0.75, 0.35), cubehelix(80, 1.50, 0.8));\n\nexport var cool = interpolateCubehelixLong(cubehelix(260, 0.75, 0.35), cubehelix(80, 1.50, 0.8));\n\nvar rainbow = cubehelix();\n\nexport default function(t) {\n  if (t < 0 || t > 1) t -= Math.floor(t);\n  var ts = Math.abs(t - 0.5);\n  rainbow.h = 360 * t - 100;\n  rainbow.s = 1.5 - 1.5 * ts;\n  rainbow.l = 0.8 - 0.9 * ts;\n  return rainbow + \"\";\n}\n","import colors from \"./colors\";\n\nfunction ramp(range) {\n  var n = range.length;\n  return function(t) {\n    return range[Math.max(0, Math.min(n - 1, Math.floor(t * n)))];\n  };\n}\n\nexport default ramp(colors(\"44015444025645045745055946075a46085c460a5d460b5e470d60470e6147106347116447136548146748166848176948186a481a6c481b6d481c6e481d6f481f70482071482173482374482475482576482677482878482979472a7a472c7a472d7b472e7c472f7d46307e46327e46337f463480453581453781453882443983443a83443b84433d84433e85423f854240864241864142874144874045884046883f47883f48893e49893e4a893e4c8a3d4d8a3d4e8a3c4f8a3c508b3b518b3b528b3a538b3a548c39558c39568c38588c38598c375a8c375b8d365c8d365d8d355e8d355f8d34608d34618d33628d33638d32648e32658e31668e31678e31688e30698e306a8e2f6b8e2f6c8e2e6d8e2e6e8e2e6f8e2d708e2d718e2c718e2c728e2c738e2b748e2b758e2a768e2a778e2a788e29798e297a8e297b8e287c8e287d8e277e8e277f8e27808e26818e26828e26828e25838e25848e25858e24868e24878e23888e23898e238a8d228b8d228c8d228d8d218e8d218f8d21908d21918c20928c20928c20938c1f948c1f958b1f968b1f978b1f988b1f998a1f9a8a1e9b8a1e9c891e9d891f9e891f9f881fa0881fa1881fa1871fa28720a38620a48621a58521a68522a78522a88423a98324aa8325ab8225ac8226ad8127ad8128ae8029af7f2ab07f2cb17e2db27d2eb37c2fb47c31b57b32b67a34b67935b77937b87838b9773aba763bbb753dbc743fbc7340bd7242be7144bf7046c06f48c16e4ac16d4cc26c4ec36b50c46a52c56954c56856c66758c7655ac8645cc8635ec96260ca6063cb5f65cb5e67cc5c69cd5b6ccd5a6ece5870cf5773d05675d05477d1537ad1517cd2507fd34e81d34d84d44b86d54989d5488bd6468ed64590d74393d74195d84098d83e9bd93c9dd93ba0da39a2da37a5db36a8db34aadc32addc30b0dd2fb2dd2db5de2bb8de29bade28bddf26c0df25c2df23c5e021c8e020cae11fcde11dd0e11cd2e21bd5e21ad8e219dae319dde318dfe318e2e418e5e419e7e419eae51aece51befe51cf1e51df4e61ef6e620f8e621fbe723fde725\"));\n\nexport var magma = ramp(colors(\"00000401000501010601010802010902020b02020d03030f03031204041405041606051806051a07061c08071e0907200a08220b09240c09260d0a290e0b2b100b2d110c2f120d31130d34140e36150e38160f3b180f3d19103f1a10421c10441d11471e114920114b21114e22115024125325125527125829115a2a115c2c115f2d11612f116331116533106734106936106b38106c390f6e3b0f703d0f713f0f72400f74420f75440f764510774710784910784a10794c117a4e117b4f127b51127c52137c54137d56147d57157e59157e5a167e5c167f5d177f5f187f601880621980641a80651a80671b80681c816a1c816b1d816d1d816e1e81701f81721f817320817521817621817822817922827b23827c23827e24828025828125818326818426818627818827818928818b29818c29818e2a81902a81912b81932b80942c80962c80982d80992d809b2e7f9c2e7f9e2f7fa02f7fa1307ea3307ea5317ea6317da8327daa337dab337cad347cae347bb0357bb2357bb3367ab5367ab73779b83779ba3878bc3978bd3977bf3a77c03a76c23b75c43c75c53c74c73d73c83e73ca3e72cc3f71cd4071cf4070d0416fd2426fd3436ed5446dd6456cd8456cd9466bdb476adc4869de4968df4a68e04c67e24d66e34e65e44f64e55064e75263e85362e95462ea5661eb5760ec5860ed5a5fee5b5eef5d5ef05f5ef1605df2625df2645cf3655cf4675cf4695cf56b5cf66c5cf66e5cf7705cf7725cf8745cf8765cf9785df9795df97b5dfa7d5efa7f5efa815ffb835ffb8560fb8761fc8961fc8a62fc8c63fc8e64fc9065fd9266fd9467fd9668fd9869fd9a6afd9b6bfe9d6cfe9f6dfea16efea36ffea571fea772fea973feaa74feac76feae77feb078feb27afeb47bfeb67cfeb77efeb97ffebb81febd82febf84fec185fec287fec488fec68afec88cfeca8dfecc8ffecd90fecf92fed194fed395fed597fed799fed89afdda9cfddc9efddea0fde0a1fde2a3fde3a5fde5a7fde7a9fde9aafdebacfcecaefceeb0fcf0b2fcf2b4fcf4b6fcf6b8fcf7b9fcf9bbfcfbbdfcfdbf\"));\n\nexport var inferno = ramp(colors(\"00000401000501010601010802010a02020c02020e03021004031204031405041706041907051b08051d09061f0a07220b07240c08260d08290e092b10092d110a30120a32140b34150b37160b39180c3c190c3e1b0c411c0c431e0c451f0c48210c4a230c4c240c4f260c51280b53290b552b0b572d0b592f0a5b310a5c320a5e340a5f3609613809623909633b09643d09653e0966400a67420a68440a68450a69470b6a490b6a4a0c6b4c0c6b4d0d6c4f0d6c510e6c520e6d540f6d550f6d57106e59106e5a116e5c126e5d126e5f136e61136e62146e64156e65156e67166e69166e6a176e6c186e6d186e6f196e71196e721a6e741a6e751b6e771c6d781c6d7a1d6d7c1d6d7d1e6d7f1e6c801f6c82206c84206b85216b87216b88226a8a226a8c23698d23698f24699025689225689326679526679727669827669a28659b29649d29649f2a63a02a63a22b62a32c61a52c60a62d60a82e5fa92e5eab2f5ead305dae305cb0315bb1325ab3325ab43359b63458b73557b93556ba3655bc3754bd3853bf3952c03a51c13a50c33b4fc43c4ec63d4dc73e4cc83f4bca404acb4149cc4248ce4347cf4446d04545d24644d34743d44842d54a41d74b3fd84c3ed94d3dda4e3cdb503bdd513ade5238df5337e05536e15635e25734e35933e45a31e55c30e65d2fe75e2ee8602de9612bea632aeb6429eb6628ec6726ed6925ee6a24ef6c23ef6e21f06f20f1711ff1731df2741cf3761bf37819f47918f57b17f57d15f67e14f68013f78212f78410f8850ff8870ef8890cf98b0bf98c0af98e09fa9008fa9207fa9407fb9606fb9706fb9906fb9b06fb9d07fc9f07fca108fca309fca50afca60cfca80dfcaa0ffcac11fcae12fcb014fcb216fcb418fbb61afbb81dfbba1ffbbc21fbbe23fac026fac228fac42afac62df9c72ff9c932f9cb35f8cd37f8cf3af7d13df7d340f6d543f6d746f5d949f5db4cf4dd4ff4df53f4e156f3e35af3e55df2e661f2e865f2ea69f1ec6df1ed71f1ef75f1f179f2f27df2f482f3f586f3f68af4f88ef5f992f6fa96f8fb9af9fc9dfafda1fcffa4\"));\n\nexport var plasma = ramp(colors(\"0d088710078813078916078a19068c1b068d1d068e20068f2206902406912605912805922a05932c05942e05952f059631059733059735049837049938049a3a049a3c049b3e049c3f049c41049d43039e44039e46039f48039f4903a04b03a14c02a14e02a25002a25102a35302a35502a45601a45801a45901a55b01a55c01a65e01a66001a66100a76300a76400a76600a76700a86900a86a00a86c00a86e00a86f00a87100a87201a87401a87501a87701a87801a87a02a87b02a87d03a87e03a88004a88104a78305a78405a78606a68707a68808a68a09a58b0aa58d0ba58e0ca48f0da4910ea3920fa39410a29511a19613a19814a099159f9a169f9c179e9d189d9e199da01a9ca11b9ba21d9aa31e9aa51f99a62098a72197a82296aa2395ab2494ac2694ad2793ae2892b02991b12a90b22b8fb32c8eb42e8db52f8cb6308bb7318ab83289ba3388bb3488bc3587bd3786be3885bf3984c03a83c13b82c23c81c33d80c43e7fc5407ec6417dc7427cc8437bc9447aca457acb4679cc4778cc4977cd4a76ce4b75cf4c74d04d73d14e72d24f71d35171d45270d5536fd5546ed6556dd7566cd8576bd9586ada5a6ada5b69db5c68dc5d67dd5e66de5f65de6164df6263e06363e16462e26561e26660e3685fe4695ee56a5de56b5de66c5ce76e5be76f5ae87059e97158e97257ea7457eb7556eb7655ec7754ed7953ed7a52ee7b51ef7c51ef7e50f07f4ff0804ef1814df1834cf2844bf3854bf3874af48849f48948f58b47f58c46f68d45f68f44f79044f79143f79342f89441f89540f9973ff9983ef99a3efa9b3dfa9c3cfa9e3bfb9f3afba139fba238fca338fca537fca636fca835fca934fdab33fdac33fdae32fdaf31fdb130fdb22ffdb42ffdb52efeb72dfeb82cfeba2cfebb2bfebd2afebe2afec029fdc229fdc328fdc527fdc627fdc827fdca26fdcb26fccd25fcce25fcd025fcd225fbd324fbd524fbd724fad824fada24f9dc24f9dd25f8df25f8e125f7e225f7e425f6e626f6e826f5e926f5eb27f4ed27f3ee27f3f027f2f227f1f426f1f525f0f724f0f921\"));\n","import {linearish} from \"./linear\";\n\nexport default function sequential(interpolator) {\n  var x0 = 0,\n      x1 = 1,\n      clamp = false;\n\n  function scale(x) {\n    var t = (x - x0) / (x1 - x0);\n    return interpolator(clamp ? Math.max(0, Math.min(1, t)) : t);\n  }\n\n  scale.domain = function(_) {\n    return arguments.length ? (x0 = +_[0], x1 = +_[1], scale) : [x0, x1];\n  };\n\n  scale.clamp = function(_) {\n    return arguments.length ? (clamp = !!_, scale) : clamp;\n  };\n\n  scale.interpolator = function(_) {\n    return arguments.length ? (interpolator = _, scale) : interpolator;\n  };\n\n  scale.copy = function() {\n    return sequential(interpolator).domain([x0, x1]).clamp(clamp);\n  };\n\n  return linearish(scale);\n}\n","export default function(specifier) {\n  var n = specifier.length / 6 | 0, colors = new Array(n), i = 0;\n  while (i < n) colors[i] = \"#\" + specifier.slice(i * 6, ++i * 6);\n  return colors;\n}\n","import colors from \"../colors.js\";\n\nexport default colors(\"1b9e77d95f027570b3e7298a66a61ee6ab02a6761d666666\");\n","import colors from \"../colors.js\";\n\nexport default colors(\"a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928\");\n","import colors from \"../colors.js\";\n\nexport default colors(\"7fc97fbeaed4fdc086ffff99386cb0f0027fbf5b17666666\");\n","import colors from \"../colors.js\";\n\nexport default colors(\"fbb4aeb3cde3ccebc5decbe4fed9a6ffffcce5d8bdfddaecf2f2f2\");\n","import colors from \"../colors.js\";\n\nexport default colors(\"b3e2cdfdcdaccbd5e8f4cae4e6f5c9fff2aef1e2cccccccc\");\n","import colors from \"../colors.js\";\n\nexport default colors(\"e41a1c377eb84daf4a984ea3ff7f00ffff33a65628f781bf999999\");\n","import colors from \"../colors.js\";\n\nexport default colors(\"66c2a5fc8d628da0cbe78ac3a6d854ffd92fe5c494b3b3b3\");\n","import colors from \"../colors.js\";\n\nexport default colors(\"8dd3c7ffffb3bebadafb807280b1d3fdb462b3de69fccde5d9d9d9bc80bdccebc5ffed6f\");\n","import {interpolateRgbBasis} from \"d3-interpolate\";\n\nexport default function(scheme) {\n  return interpolateRgbBasis(scheme[scheme.length - 1]);\n}\n","import colors from \"../colors.js\";\nimport ramp from \"../ramp.js\";\n\nexport var scheme = new Array(3).concat(\n  \"deebf79ecae13182bd\",\n  \"eff3ffbdd7e76baed62171b5\",\n  \"eff3ffbdd7e76baed63182bd08519c\",\n  \"eff3ffc6dbef9ecae16baed63182bd08519c\",\n  \"eff3ffc6dbef9ecae16baed64292c62171b5084594\",\n  \"f7fbffdeebf7c6dbef9ecae16baed64292c62171b5084594\",\n  \"f7fbffdeebf7c6dbef9ecae16baed64292c62171b508519c08306b\"\n).map(colors);\n\nexport default ramp(scheme);\n","import colors from \"../colors.js\";\nimport ramp from \"../ramp.js\";\n\nexport var scheme = new Array(3).concat(\n  \"d8b365f5f5f55ab4ac\",\n  \"a6611adfc27d80cdc1018571\",\n  \"a6611adfc27df5f5f580cdc1018571\",\n  \"8c510ad8b365f6e8c3c7eae55ab4ac01665e\",\n  \"8c510ad8b365f6e8c3f5f5f5c7eae55ab4ac01665e\",\n  \"8c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e\",\n  \"8c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e\",\n  \"5430058c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e003c30\",\n  \"5430058c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e003c30\"\n).map(colors);\n\nexport default ramp(scheme);\n","import colors from \"../colors.js\";\nimport ramp from \"../ramp.js\";\n\nexport var scheme = new Array(3).concat(\n  \"af8dc3f7f7f77fbf7b\",\n  \"7b3294c2a5cfa6dba0008837\",\n  \"7b3294c2a5cff7f7f7a6dba0008837\",\n  \"762a83af8dc3e7d4e8d9f0d37fbf7b1b7837\",\n  \"762a83af8dc3e7d4e8f7f7f7d9f0d37fbf7b1b7837\",\n  \"762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b7837\",\n  \"762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b7837\",\n  \"40004b762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b783700441b\",\n  \"40004b762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b783700441b\"\n).map(colors);\n\nexport default ramp(scheme);\n","import colors from \"../colors.js\";\nimport ramp from \"../ramp.js\";\n\nexport var scheme = new Array(3).concat(\n  \"e9a3c9f7f7f7a1d76a\",\n  \"d01c8bf1b6dab8e1864dac26\",\n  \"d01c8bf1b6daf7f7f7b8e1864dac26\",\n  \"c51b7de9a3c9fde0efe6f5d0a1d76a4d9221\",\n  \"c51b7de9a3c9fde0eff7f7f7e6f5d0a1d76a4d9221\",\n  \"c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221\",\n  \"c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221\",\n  \"8e0152c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221276419\",\n  \"8e0152c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221276419\"\n).map(colors);\n\nexport default ramp(scheme);\n","import colors from \"../colors.js\";\nimport ramp from \"../ramp.js\";\n\nexport var scheme = new Array(3).concat(\n  \"998ec3f7f7f7f1a340\",\n  \"5e3c99b2abd2fdb863e66101\",\n  \"5e3c99b2abd2f7f7f7fdb863e66101\",\n  \"542788998ec3d8daebfee0b6f1a340b35806\",\n  \"542788998ec3d8daebf7f7f7fee0b6f1a340b35806\",\n  \"5427888073acb2abd2d8daebfee0b6fdb863e08214b35806\",\n  \"5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b35806\",\n  \"2d004b5427888073acb2abd2d8daebfee0b6fdb863e08214b358067f3b08\",\n  \"2d004b5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b358067f3b08\"\n).map(colors);\n\nexport default ramp(scheme);\n","import colors from \"../colors.js\";\nimport ramp from \"../ramp.js\";\n\nexport var scheme = new Array(3).concat(\n  \"ef8a62f7f7f767a9cf\",\n  \"ca0020f4a58292c5de0571b0\",\n  \"ca0020f4a582f7f7f792c5de0571b0\",\n  \"b2182bef8a62fddbc7d1e5f067a9cf2166ac\",\n  \"b2182bef8a62fddbc7f7f7f7d1e5f067a9cf2166ac\",\n  \"b2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac\",\n  \"b2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac\",\n  \"67001fb2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac053061\",\n  \"67001fb2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac053061\"\n).map(colors);\n\nexport default ramp(scheme);\n","import colors from \"../colors.js\";\nimport ramp from \"../ramp.js\";\n\nexport var scheme = new Array(3).concat(\n  \"ef8a62ffffff999999\",\n  \"ca0020f4a582bababa404040\",\n  \"ca0020f4a582ffffffbababa404040\",\n  \"b2182bef8a62fddbc7e0e0e09999994d4d4d\",\n  \"b2182bef8a62fddbc7ffffffe0e0e09999994d4d4d\",\n  \"b2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d\",\n  \"b2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d\",\n  \"67001fb2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d1a1a1a\",\n  \"67001fb2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d1a1a1a\"\n).map(colors);\n\nexport default ramp(scheme);\n","import colors from \"../colors.js\";\nimport ramp from \"../ramp.js\";\n\nexport var scheme = new Array(3).concat(\n  \"fc8d59ffffbf91bfdb\",\n  \"d7191cfdae61abd9e92c7bb6\",\n  \"d7191cfdae61ffffbfabd9e92c7bb6\",\n  \"d73027fc8d59fee090e0f3f891bfdb4575b4\",\n  \"d73027fc8d59fee090ffffbfe0f3f891bfdb4575b4\",\n  \"d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4\",\n  \"d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4\",\n  \"a50026d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4313695\",\n  \"a50026d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4313695\"\n).map(colors);\n\nexport default ramp(scheme);\n","import colors from \"../colors.js\";\nimport ramp from \"../ramp.js\";\n\nexport var scheme = new Array(3).concat(\n  \"fc8d59ffffbf91cf60\",\n  \"d7191cfdae61a6d96a1a9641\",\n  \"d7191cfdae61ffffbfa6d96a1a9641\",\n  \"d73027fc8d59fee08bd9ef8b91cf601a9850\",\n  \"d73027fc8d59fee08bffffbfd9ef8b91cf601a9850\",\n  \"d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850\",\n  \"d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850\",\n  \"a50026d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850006837\",\n  \"a50026d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850006837\"\n).map(colors);\n\nexport default ramp(scheme);\n","import colors from \"../colors.js\";\nimport ramp from \"../ramp.js\";\n\nexport var scheme = new Array(3).concat(\n  \"fc8d59ffffbf99d594\",\n  \"d7191cfdae61abdda42b83ba\",\n  \"d7191cfdae61ffffbfabdda42b83ba\",\n  \"d53e4ffc8d59fee08be6f59899d5943288bd\",\n  \"d53e4ffc8d59fee08bffffbfe6f59899d5943288bd\",\n  \"d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd\",\n  \"d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd\",\n  \"9e0142d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd5e4fa2\",\n  \"9e0142d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd5e4fa2\"\n).map(colors);\n\nexport default ramp(scheme);\n","import colors from \"../colors.js\";\nimport ramp from \"../ramp.js\";\n\nexport var scheme = new Array(3).concat(\n  \"e5f5e0a1d99b31a354\",\n  \"edf8e9bae4b374c476238b45\",\n  \"edf8e9bae4b374c47631a354006d2c\",\n  \"edf8e9c7e9c0a1d99b74c47631a354006d2c\",\n  \"edf8e9c7e9c0a1d99b74c47641ab5d238b45005a32\",\n  \"f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45005a32\",\n  \"f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45006d2c00441b\"\n).map(colors);\n\nexport default ramp(scheme);\n","import colors from \"../colors.js\";\nimport ramp from \"../ramp.js\";\n\nexport var scheme = new Array(3).concat(\n  \"f0f0f0bdbdbd636363\",\n  \"f7f7f7cccccc969696525252\",\n  \"f7f7f7cccccc969696636363252525\",\n  \"f7f7f7d9d9d9bdbdbd969696636363252525\",\n  \"f7f7f7d9d9d9bdbdbd969696737373525252252525\",\n  \"fffffff0f0f0d9d9d9bdbdbd969696737373525252252525\",\n  \"fffffff0f0f0d9d9d9bdbdbd969696737373525252252525000000\"\n).map(colors);\n\nexport default ramp(scheme);\n","import colors from \"../colors.js\";\nimport ramp from \"../ramp.js\";\n\nexport var scheme = new Array(3).concat(\n  \"fee6cefdae6be6550d\",\n  \"feeddefdbe85fd8d3cd94701\",\n  \"feeddefdbe85fd8d3ce6550da63603\",\n  \"feeddefdd0a2fdae6bfd8d3ce6550da63603\",\n  \"feeddefdd0a2fdae6bfd8d3cf16913d948018c2d04\",\n  \"fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d948018c2d04\",\n  \"fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d94801a636037f2704\"\n).map(colors);\n\nexport default ramp(scheme);\n","import colors from \"../colors.js\";\nimport ramp from \"../ramp.js\";\n\nexport var scheme = new Array(3).concat(\n  \"efedf5bcbddc756bb1\",\n  \"f2f0f7cbc9e29e9ac86a51a3\",\n  \"f2f0f7cbc9e29e9ac8756bb154278f\",\n  \"f2f0f7dadaebbcbddc9e9ac8756bb154278f\",\n  \"f2f0f7dadaebbcbddc9e9ac8807dba6a51a34a1486\",\n  \"fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a34a1486\",\n  \"fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a354278f3f007d\"\n).map(colors);\n\nexport default ramp(scheme);\n","import colors from \"../colors.js\";\nimport ramp from \"../ramp.js\";\n\nexport var scheme = new Array(3).concat(\n  \"fee0d2fc9272de2d26\",\n  \"fee5d9fcae91fb6a4acb181d\",\n  \"fee5d9fcae91fb6a4ade2d26a50f15\",\n  \"fee5d9fcbba1fc9272fb6a4ade2d26a50f15\",\n  \"fee5d9fcbba1fc9272fb6a4aef3b2ccb181d99000d\",\n  \"fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181d99000d\",\n  \"fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181da50f1567000d\"\n).map(colors);\n\nexport default ramp(scheme);\n","import colors from \"../colors.js\";\n\nfunction ramp(range) {\n  var n = range.length;\n  return function(t) {\n    return range[Math.max(0, Math.min(n - 1, Math.floor(t * n)))];\n  };\n}\n\nexport default ramp(colors(\"44015444025645045745055946075a46085c460a5d460b5e470d60470e6147106347116447136548146748166848176948186a481a6c481b6d481c6e481d6f481f70482071482173482374482475482576482677482878482979472a7a472c7a472d7b472e7c472f7d46307e46327e46337f463480453581453781453882443983443a83443b84433d84433e85423f854240864241864142874144874045884046883f47883f48893e49893e4a893e4c8a3d4d8a3d4e8a3c4f8a3c508b3b518b3b528b3a538b3a548c39558c39568c38588c38598c375a8c375b8d365c8d365d8d355e8d355f8d34608d34618d33628d33638d32648e32658e31668e31678e31688e30698e306a8e2f6b8e2f6c8e2e6d8e2e6e8e2e6f8e2d708e2d718e2c718e2c728e2c738e2b748e2b758e2a768e2a778e2a788e29798e297a8e297b8e287c8e287d8e277e8e277f8e27808e26818e26828e26828e25838e25848e25858e24868e24878e23888e23898e238a8d228b8d228c8d228d8d218e8d218f8d21908d21918c20928c20928c20938c1f948c1f958b1f968b1f978b1f988b1f998a1f9a8a1e9b8a1e9c891e9d891f9e891f9f881fa0881fa1881fa1871fa28720a38620a48621a58521a68522a78522a88423a98324aa8325ab8225ac8226ad8127ad8128ae8029af7f2ab07f2cb17e2db27d2eb37c2fb47c31b57b32b67a34b67935b77937b87838b9773aba763bbb753dbc743fbc7340bd7242be7144bf7046c06f48c16e4ac16d4cc26c4ec36b50c46a52c56954c56856c66758c7655ac8645cc8635ec96260ca6063cb5f65cb5e67cc5c69cd5b6ccd5a6ece5870cf5773d05675d05477d1537ad1517cd2507fd34e81d34d84d44b86d54989d5488bd6468ed64590d74393d74195d84098d83e9bd93c9dd93ba0da39a2da37a5db36a8db34aadc32addc30b0dd2fb2dd2db5de2bb8de29bade28bddf26c0df25c2df23c5e021c8e020cae11fcde11dd0e11cd2e21bd5e21ad8e219dae319dde318dfe318e2e418e5e419e7e419eae51aece51befe51cf1e51df4e61ef6e620f8e621fbe723fde725\"));\n\nexport var magma = ramp(colors(\"00000401000501010601010802010902020b02020d03030f03031204041405041606051806051a07061c08071e0907200a08220b09240c09260d0a290e0b2b100b2d110c2f120d31130d34140e36150e38160f3b180f3d19103f1a10421c10441d11471e114920114b21114e22115024125325125527125829115a2a115c2c115f2d11612f116331116533106734106936106b38106c390f6e3b0f703d0f713f0f72400f74420f75440f764510774710784910784a10794c117a4e117b4f127b51127c52137c54137d56147d57157e59157e5a167e5c167f5d177f5f187f601880621980641a80651a80671b80681c816a1c816b1d816d1d816e1e81701f81721f817320817521817621817822817922827b23827c23827e24828025828125818326818426818627818827818928818b29818c29818e2a81902a81912b81932b80942c80962c80982d80992d809b2e7f9c2e7f9e2f7fa02f7fa1307ea3307ea5317ea6317da8327daa337dab337cad347cae347bb0357bb2357bb3367ab5367ab73779b83779ba3878bc3978bd3977bf3a77c03a76c23b75c43c75c53c74c73d73c83e73ca3e72cc3f71cd4071cf4070d0416fd2426fd3436ed5446dd6456cd8456cd9466bdb476adc4869de4968df4a68e04c67e24d66e34e65e44f64e55064e75263e85362e95462ea5661eb5760ec5860ed5a5fee5b5eef5d5ef05f5ef1605df2625df2645cf3655cf4675cf4695cf56b5cf66c5cf66e5cf7705cf7725cf8745cf8765cf9785df9795df97b5dfa7d5efa7f5efa815ffb835ffb8560fb8761fc8961fc8a62fc8c63fc8e64fc9065fd9266fd9467fd9668fd9869fd9a6afd9b6bfe9d6cfe9f6dfea16efea36ffea571fea772fea973feaa74feac76feae77feb078feb27afeb47bfeb67cfeb77efeb97ffebb81febd82febf84fec185fec287fec488fec68afec88cfeca8dfecc8ffecd90fecf92fed194fed395fed597fed799fed89afdda9cfddc9efddea0fde0a1fde2a3fde3a5fde5a7fde7a9fde9aafdebacfcecaefceeb0fcf0b2fcf2b4fcf4b6fcf6b8fcf7b9fcf9bbfcfbbdfcfdbf\"));\n\nexport var inferno = ramp(colors(\"00000401000501010601010802010a02020c02020e03021004031204031405041706041907051b08051d09061f0a07220b07240c08260d08290e092b10092d110a30120a32140b34150b37160b39180c3c190c3e1b0c411c0c431e0c451f0c48210c4a230c4c240c4f260c51280b53290b552b0b572d0b592f0a5b310a5c320a5e340a5f3609613809623909633b09643d09653e0966400a67420a68440a68450a69470b6a490b6a4a0c6b4c0c6b4d0d6c4f0d6c510e6c520e6d540f6d550f6d57106e59106e5a116e5c126e5d126e5f136e61136e62146e64156e65156e67166e69166e6a176e6c186e6d186e6f196e71196e721a6e741a6e751b6e771c6d781c6d7a1d6d7c1d6d7d1e6d7f1e6c801f6c82206c84206b85216b87216b88226a8a226a8c23698d23698f24699025689225689326679526679727669827669a28659b29649d29649f2a63a02a63a22b62a32c61a52c60a62d60a82e5fa92e5eab2f5ead305dae305cb0315bb1325ab3325ab43359b63458b73557b93556ba3655bc3754bd3853bf3952c03a51c13a50c33b4fc43c4ec63d4dc73e4cc83f4bca404acb4149cc4248ce4347cf4446d04545d24644d34743d44842d54a41d74b3fd84c3ed94d3dda4e3cdb503bdd513ade5238df5337e05536e15635e25734e35933e45a31e55c30e65d2fe75e2ee8602de9612bea632aeb6429eb6628ec6726ed6925ee6a24ef6c23ef6e21f06f20f1711ff1731df2741cf3761bf37819f47918f57b17f57d15f67e14f68013f78212f78410f8850ff8870ef8890cf98b0bf98c0af98e09fa9008fa9207fa9407fb9606fb9706fb9906fb9b06fb9d07fc9f07fca108fca309fca50afca60cfca80dfcaa0ffcac11fcae12fcb014fcb216fcb418fbb61afbb81dfbba1ffbbc21fbbe23fac026fac228fac42afac62df9c72ff9c932f9cb35f8cd37f8cf3af7d13df7d340f6d543f6d746f5d949f5db4cf4dd4ff4df53f4e156f3e35af3e55df2e661f2e865f2ea69f1ec6df1ed71f1ef75f1f179f2f27df2f482f3f586f3f68af4f88ef5f992f6fa96f8fb9af9fc9dfafda1fcffa4\"));\n\nexport var plasma = ramp(colors(\"0d088710078813078916078a19068c1b068d1d068e20068f2206902406912605912805922a05932c05942e05952f059631059733059735049837049938049a3a049a3c049b3e049c3f049c41049d43039e44039e46039f48039f4903a04b03a14c02a14e02a25002a25102a35302a35502a45601a45801a45901a55b01a55c01a65e01a66001a66100a76300a76400a76600a76700a86900a86a00a86c00a86e00a86f00a87100a87201a87401a87501a87701a87801a87a02a87b02a87d03a87e03a88004a88104a78305a78405a78606a68707a68808a68a09a58b0aa58d0ba58e0ca48f0da4910ea3920fa39410a29511a19613a19814a099159f9a169f9c179e9d189d9e199da01a9ca11b9ba21d9aa31e9aa51f99a62098a72197a82296aa2395ab2494ac2694ad2793ae2892b02991b12a90b22b8fb32c8eb42e8db52f8cb6308bb7318ab83289ba3388bb3488bc3587bd3786be3885bf3984c03a83c13b82c23c81c33d80c43e7fc5407ec6417dc7427cc8437bc9447aca457acb4679cc4778cc4977cd4a76ce4b75cf4c74d04d73d14e72d24f71d35171d45270d5536fd5546ed6556dd7566cd8576bd9586ada5a6ada5b69db5c68dc5d67dd5e66de5f65de6164df6263e06363e16462e26561e26660e3685fe4695ee56a5de56b5de66c5ce76e5be76f5ae87059e97158e97257ea7457eb7556eb7655ec7754ed7953ed7a52ee7b51ef7c51ef7e50f07f4ff0804ef1814df1834cf2844bf3854bf3874af48849f48948f58b47f58c46f68d45f68f44f79044f79143f79342f89441f89540f9973ff9983ef99a3efa9b3dfa9c3cfa9e3bfb9f3afba139fba238fca338fca537fca636fca835fca934fdab33fdac33fdae32fdaf31fdb130fdb22ffdb42ffdb52efeb72dfeb82cfeba2cfebb2bfebd2afebe2afec029fdc229fdc328fdc527fdc627fdc827fdca26fdcb26fccd25fcce25fcd025fcd225fbd324fbd524fbd724fad824fada24f9dc24f9dd25f8df25f8e125f7e225f7e425f6e626f6e826f5e926f5eb27f4ed27f3ee27f3f027f2f227f1f426f1f525f0f724f0f921\"));\n","import {cubehelix} from \"d3-color\";\nimport {interpolateCubehelixLong} from \"d3-interpolate\";\n\nexport var warm = interpolateCubehelixLong(cubehelix(-100, 0.75, 0.35), cubehelix(80, 1.50, 0.8));\n\nexport var cool = interpolateCubehelixLong(cubehelix(260, 0.75, 0.35), cubehelix(80, 1.50, 0.8));\n\nvar c = cubehelix();\n\nexport default function(t) {\n  if (t < 0 || t > 1) t -= Math.floor(t);\n  var ts = Math.abs(t - 0.5);\n  c.h = 360 * t - 100;\n  c.s = 1.5 - 1.5 * ts;\n  c.l = 0.8 - 0.9 * ts;\n  return c + \"\";\n}\n","import {cubehelix} from \"d3-color\";\nimport {interpolateCubehelixLong} from \"d3-interpolate\";\n\nexport default interpolateCubehelixLong(cubehelix(300, 0.5, 0.0), cubehelix(-240, 0.5, 1.0));\n","import colors from \"../colors.js\";\nimport ramp from \"../ramp.js\";\n\nexport var scheme = new Array(3).concat(\n  \"e5f5f999d8c92ca25f\",\n  \"edf8fbb2e2e266c2a4238b45\",\n  \"edf8fbb2e2e266c2a42ca25f006d2c\",\n  \"edf8fbccece699d8c966c2a42ca25f006d2c\",\n  \"edf8fbccece699d8c966c2a441ae76238b45005824\",\n  \"f7fcfde5f5f9ccece699d8c966c2a441ae76238b45005824\",\n  \"f7fcfde5f5f9ccece699d8c966c2a441ae76238b45006d2c00441b\"\n).map(colors);\n\nexport default ramp(scheme);\n","import colors from \"../colors.js\";\nimport ramp from \"../ramp.js\";\n\nexport var scheme = new Array(3).concat(\n  \"e0ecf49ebcda8856a7\",\n  \"edf8fbb3cde38c96c688419d\",\n  \"edf8fbb3cde38c96c68856a7810f7c\",\n  \"edf8fbbfd3e69ebcda8c96c68856a7810f7c\",\n  \"edf8fbbfd3e69ebcda8c96c68c6bb188419d6e016b\",\n  \"f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d6e016b\",\n  \"f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d810f7c4d004b\"\n).map(colors);\n\nexport default ramp(scheme);\n","import colors from \"../colors.js\";\nimport ramp from \"../ramp.js\";\n\nexport var scheme = new Array(3).concat(\n  \"e0f3dba8ddb543a2ca\",\n  \"f0f9e8bae4bc7bccc42b8cbe\",\n  \"f0f9e8bae4bc7bccc443a2ca0868ac\",\n  \"f0f9e8ccebc5a8ddb57bccc443a2ca0868ac\",\n  \"f0f9e8ccebc5a8ddb57bccc44eb3d32b8cbe08589e\",\n  \"f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe08589e\",\n  \"f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe0868ac084081\"\n).map(colors);\n\nexport default ramp(scheme);\n","import colors from \"../colors.js\";\nimport ramp from \"../ramp.js\";\n\nexport var scheme = new Array(3).concat(\n  \"fee8c8fdbb84e34a33\",\n  \"fef0d9fdcc8afc8d59d7301f\",\n  \"fef0d9fdcc8afc8d59e34a33b30000\",\n  \"fef0d9fdd49efdbb84fc8d59e34a33b30000\",\n  \"fef0d9fdd49efdbb84fc8d59ef6548d7301f990000\",\n  \"fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301f990000\",\n  \"fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301fb300007f0000\"\n).map(colors);\n\nexport default ramp(scheme);\n","import colors from \"../colors.js\";\nimport ramp from \"../ramp.js\";\n\nexport var scheme = new Array(3).concat(\n  \"ece2f0a6bddb1c9099\",\n  \"f6eff7bdc9e167a9cf02818a\",\n  \"f6eff7bdc9e167a9cf1c9099016c59\",\n  \"f6eff7d0d1e6a6bddb67a9cf1c9099016c59\",\n  \"f6eff7d0d1e6a6bddb67a9cf3690c002818a016450\",\n  \"fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016450\",\n  \"fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016c59014636\"\n).map(colors);\n\nexport default ramp(scheme);\n","import colors from \"../colors.js\";\nimport ramp from \"../ramp.js\";\n\nexport var scheme = new Array(3).concat(\n  \"ece7f2a6bddb2b8cbe\",\n  \"f1eef6bdc9e174a9cf0570b0\",\n  \"f1eef6bdc9e174a9cf2b8cbe045a8d\",\n  \"f1eef6d0d1e6a6bddb74a9cf2b8cbe045a8d\",\n  \"f1eef6d0d1e6a6bddb74a9cf3690c00570b0034e7b\",\n  \"fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0034e7b\",\n  \"fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0045a8d023858\"\n).map(colors);\n\nexport default ramp(scheme);\n","import colors from \"../colors.js\";\nimport ramp from \"../ramp.js\";\n\nexport var scheme = new Array(3).concat(\n  \"e7e1efc994c7dd1c77\",\n  \"f1eef6d7b5d8df65b0ce1256\",\n  \"f1eef6d7b5d8df65b0dd1c77980043\",\n  \"f1eef6d4b9dac994c7df65b0dd1c77980043\",\n  \"f1eef6d4b9dac994c7df65b0e7298ace125691003f\",\n  \"f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125691003f\",\n  \"f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125698004367001f\"\n).map(colors);\n\nexport default ramp(scheme);\n","import colors from \"../colors.js\";\nimport ramp from \"../ramp.js\";\n\nexport var scheme = new Array(3).concat(\n  \"fde0ddfa9fb5c51b8a\",\n  \"feebe2fbb4b9f768a1ae017e\",\n  \"feebe2fbb4b9f768a1c51b8a7a0177\",\n  \"feebe2fcc5c0fa9fb5f768a1c51b8a7a0177\",\n  \"feebe2fcc5c0fa9fb5f768a1dd3497ae017e7a0177\",\n  \"fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a0177\",\n  \"fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a017749006a\"\n).map(colors);\n\nexport default ramp(scheme);\n","import colors from \"../colors.js\";\nimport ramp from \"../ramp.js\";\n\nexport var scheme = new Array(3).concat(\n  \"edf8b17fcdbb2c7fb8\",\n  \"ffffcca1dab441b6c4225ea8\",\n  \"ffffcca1dab441b6c42c7fb8253494\",\n  \"ffffccc7e9b47fcdbb41b6c42c7fb8253494\",\n  \"ffffccc7e9b47fcdbb41b6c41d91c0225ea80c2c84\",\n  \"ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea80c2c84\",\n  \"ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea8253494081d58\"\n).map(colors);\n\nexport default ramp(scheme);\n","import colors from \"../colors.js\";\nimport ramp from \"../ramp.js\";\n\nexport var scheme = new Array(3).concat(\n  \"f7fcb9addd8e31a354\",\n  \"ffffccc2e69978c679238443\",\n  \"ffffccc2e69978c67931a354006837\",\n  \"ffffccd9f0a3addd8e78c67931a354006837\",\n  \"ffffccd9f0a3addd8e78c67941ab5d238443005a32\",\n  \"ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443005a32\",\n  \"ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443006837004529\"\n).map(colors);\n\nexport default ramp(scheme);\n","import colors from \"../colors.js\";\nimport ramp from \"../ramp.js\";\n\nexport var scheme = new Array(3).concat(\n  \"fff7bcfec44fd95f0e\",\n  \"ffffd4fed98efe9929cc4c02\",\n  \"ffffd4fed98efe9929d95f0e993404\",\n  \"ffffd4fee391fec44ffe9929d95f0e993404\",\n  \"ffffd4fee391fec44ffe9929ec7014cc4c028c2d04\",\n  \"ffffe5fff7bcfee391fec44ffe9929ec7014cc4c028c2d04\",\n  \"ffffe5fff7bcfee391fec44ffe9929ec7014cc4c02993404662506\"\n).map(colors);\n\nexport default ramp(scheme);\n","import colors from \"../colors.js\";\nimport ramp from \"../ramp.js\";\n\nexport var scheme = new Array(3).concat(\n  \"ffeda0feb24cf03b20\",\n  \"ffffb2fecc5cfd8d3ce31a1c\",\n  \"ffffb2fecc5cfd8d3cf03b20bd0026\",\n  \"ffffb2fed976feb24cfd8d3cf03b20bd0026\",\n  \"ffffb2fed976feb24cfd8d3cfc4e2ae31a1cb10026\",\n  \"ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cb10026\",\n  \"ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cbd0026800026\"\n).map(colors);\n\nexport default ramp(scheme);\n","export const UNIT_GLOBAL_NAMESPACE = 'app.units';\nexport const UNIT_LOCAL_NAMESPACE = 'local.units';\nexport const LAYER_LOCAL_NAMESPACE = 'local.layers';\nexport const LAYER_GLOBAL_NAMESPACE = 'app.layers';\nexport const GROUP_GLOBAL_NAMESPACE = 'app.group';\nexport const GROUP_LOCAL_NAMESPACE = 'local.group';\nexport const CANVAS_LOCAL_NAMESPACE = 'local.canvas';\nexport const CANVAS_GLOBAL_NAMESPACE = 'app.canvas';\n\n","const swap = (arr, i, j) => {\n    const tmp = arr[i];\n    arr[i] = arr[j];\n    arr[j] = tmp;\n};\n\nconst defaultCompare = (a, b) => {\n    if (a > b) {\n        return -1;\n    }\n    return a > b ? 1 : 0;\n};\n\nconst quickselectStep = (arr, k, left, right, compare) => {\n    while (right > left) {\n        if (right - left > 600) {\n            const n = right - left + 1;\n            const m = k - left + 1;\n            const z = Math.log(n);\n            const s = 0.5 * Math.exp(2 * z / 3);\n            const sd = 0.5 * Math.sqrt(z * s * (n - s) / n) * (m - n / 2 < 0 ? -1 : 1);\n            const newLeft = Math.max(left, Math.floor(k - m * s / n + sd));\n            const newRight = Math.min(right, Math.floor(k + (n - m) * s / n + sd));\n            quickselectStep(arr, k, newLeft, newRight, compare);\n        }\n\n        const t = arr[k];\n        let i = left;\n        let j = right;\n\n        swap(arr, left, k);\n        if (compare(arr[right], t) > 0) swap(arr, left, right);\n\n        while (i < j) {\n            swap(arr, i, j);\n            i++;\n            j--;\n            while (compare(arr[i], t) < 0) i++;\n            while (compare(arr[j], t) > 0) j--;\n        }\n\n        if (compare(arr[left], t) === 0) swap(arr, left, j);\n        else {\n            j++;\n            swap(arr, j, right);\n        }\n\n        if (j <= k) left = j + 1;\n        if (k <= j) right = j - 1;\n    }\n};\n\n/**\n * Rearranges items so that all items in the [left, k] are the smallest. The k-th element will have the\n * (k - left + 1)-th smallest value in [left, right].\n * array: the array to partially sort (in place)\n * k: middle index for partial sorting (as defined above)\n * left: left index of the range to sort (0 by default)\n * right: right index (last index of the array by default)\n * compareFn: compare function\n *\n * Ref: https://github.com/mourner/quickselect\n * Example:\n * var arr = [65, 28, 59, 33, 21, 56, 22, 95, 50, 12, 90, 53, 28, 77, 39];\n * quickselect(arr, 8);\n * arr is [39, 28, 28, 33, 21, 12, 22, 50, 53, 56, 59, 65, 90, 77, 95]\n *                                         ^^ middle index\n * @param {Array} arr the array to partially sort (in place)\n * @param {Number} k middle index for partial sorting (as defined above)\n * @param {Number} left left index of the range to sort (0 by default)\n * @param {Number} right right index (last index of the array by default)\n * @param {Function} compare compare function\n */\nconst quickselect = (arr, k, left, right, compare) => {\n    quickselectStep(arr, k, left || 0, right || (arr.length - 1), compare || defaultCompare);\n};\n\nexport default quickselect;\n","import quickselect from './quick-select';\n\nconst createNode = children => ({\n    children,\n    height: 1,\n    leaf: true,\n    minX: Infinity,\n    minY: Infinity,\n    maxX: -Infinity,\n    maxY: -Infinity\n});\n\nconst extend = (a, b) => {\n    a.minX = Math.min(a.minX, b.minX);\n    a.minY = Math.min(a.minY, b.minY);\n    a.maxX = Math.max(a.maxX, b.maxX);\n    a.maxY = Math.max(a.maxY, b.maxY);\n    return a;\n};\n\n// min bounding rectangle of node children from k to p-1\nconst distBBox = (node, k, p, toBBox, destNode) => {\n    if (!destNode) destNode = createNode(null);\n    destNode.minX = Infinity;\n    destNode.minY = Infinity;\n    destNode.maxX = -Infinity;\n    destNode.maxY = -Infinity;\n\n    for (let i = k; i < p; i++) {\n        const child = node.children[i];\n        extend(destNode, node.leaf ? toBBox(child) : child);\n    }\n\n    return destNode;\n};\n\n// calculate node's bbox from bboxes of its children\nconst calcBBox = (node, toBBox) => {\n    distBBox(node, 0, node.children.length, toBBox, node);\n};\n\nconst compareNodeMinX = (a, b) => a.minX - b.minX;\nconst compareNodeMinY = (a, b) => a.minY - b.minY;\n\nconst bboxArea = a => (a.maxX - a.minX) * (a.maxY - a.minY);\n\nconst bboxMargin = a => (a.maxX - a.minX) + (a.maxY - a.minY);\n\nconst enlargedArea = (a, b) => (Math.max(b.maxX, a.maxX) - Math.min(b.minX, a.minX)) *\n           (Math.max(b.maxY, a.maxY) - Math.min(b.minY, a.minY));\n\nconst intersectionArea = (a, b) => {\n    const minX = Math.max(a.minX, b.minX);\n    const minY = Math.max(a.minY, b.minY);\n    const maxX = Math.min(a.maxX, b.maxX);\n    const maxY = Math.min(a.maxY, b.maxY);\n\n    return Math.max(0, maxX - minX) *\n           Math.max(0, maxY - minY);\n};\n\nconst contains = (a, b) => a.minX <= b.minX &&\n           a.minY <= b.minY &&\n           b.maxX <= a.maxX &&\n           b.maxY <= a.maxY;\n\nconst intersects = (a, b) => b.minX <= a.maxX &&\n           b.minY <= a.maxY &&\n           b.maxX >= a.minX &&\n           b.maxY >= a.minY;\n\nconst findItem = (item, items, equalsFn) => {\n    if (!equalsFn) return items.indexOf(item);\n\n    for (let i = 0; i < items.length; i++) {\n        if (equalsFn(item, items[i])) return i;\n    }\n    return -1;\n};\n\n// sort an array so that items come in groups of n unsorted items, with groups sorted between each other;\n// combines selection algorithm with binary divide & conquer approach\n\nconst multiSelect = (arr, left, right, n, compare) => {\n    const stack = [left, right];\n\n    while (stack.length) {\n        right = stack.pop();\n        left = stack.pop();\n\n        if (right - left <= n) continue;\n\n        const mid = left + Math.ceil((right - left) / n / 2) * n;\n        quickselect(arr, mid, left, right, compare);\n\n        stack.push(left, mid, mid, right);\n    }\n};\n\nconst all = (node, result) => {\n    const nodesToSearch = [];\n    while (node) {\n        if (node.leaf) result.push(...node.children);\n        else nodesToSearch.push(...node.children);\n\n        node = nodesToSearch.pop();\n    }\n    return result;\n};\n\nexport default class RTree {\n    constructor (maxEntries = 9) {\n        // max entries in a node is 9 by default; min node fill is 40% for best performance\n        this._maxEntries = Math.max(4, maxEntries);\n        this._minEntries = Math.max(2, Math.ceil(this._maxEntries * 0.4));\n        this.clear();\n    }\n\n    all () {\n        return all(this.data, []);\n    }\n\n    search (bbox) {\n        let node = this.data;\n        const result = [];\n\n        if (!intersects(bbox, node)) return result;\n\n        const toBBox = this.toBBox;\n        const nodesToSearch = [];\n\n        while (node) {\n            for (const child of node.children) {\n                const childBBox = node.leaf ? toBBox(child) : child;\n\n                if (intersects(bbox, childBBox)) {\n                    if (node.leaf) result.push(child);\n                    else if (contains(bbox, childBBox)) all(child, result);\n                    else nodesToSearch.push(child);\n                }\n            }\n\n            node = nodesToSearch.pop();\n        }\n\n        return result;\n    }\n\n    load (data) {\n        if (!(data && data.length)) return this;\n\n        if (data.length < this._minEntries) {\n            for (let i = 0; i < data.length; i++) {\n                this.insert(data[i]);\n            }\n            return this;\n        }\n\n        // recursively build the tree with the given data from scratch using OMT algorithm\n        let node = this.build(data.slice(), 0, data.length - 1, 0);\n\n        if (!this.data.children.length) {\n            // save as is if tree is empty\n            this.data = node;\n        } else if (this.data.height === node.height) {\n            // split root if trees have the same height\n            this.splitRoot(this.data, node);\n        } else {\n            if (this.data.height < node.height) {\n                // swap trees if inserted one is bigger\n                const tmpNode = this.data;\n                this.data = node;\n                node = tmpNode;\n            }\n\n            // insert the small tree into the large tree at appropriate level\n            this.insertSingleItem(node, this.data.height - node.height - 1, true);\n        }\n\n        return this;\n    }\n\n    insert (item) {\n        if (item) this.insertSingleItem(item, this.data.height - 1);\n        return this;\n    }\n\n    clear () {\n        this.data = createNode([]);\n        return this;\n    }\n\n    remove (item, equalsFn) {\n        if (!item) return this;\n\n        let i;\n        let parent;\n        let goingUp;\n        let node = this.data;\n        const bbox = this.toBBox(item);\n        const path = [];\n        const indexes = [];\n\n        // depth-first iterative tree traversal\n        while (node || path.length) {\n            if (!node) { // go up\n                node = path.pop();\n                parent = path[path.length - 1];\n                i = indexes.pop();\n                goingUp = true;\n            }\n\n            if (node.leaf) { // check current node\n                const index = findItem(item, node.children, equalsFn);\n\n                if (index !== -1) {\n                    // item found, remove the item and condense tree upwards\n                    node.children.splice(index, 1);\n                    path.push(node);\n                    this.condense(path);\n                    return this;\n                }\n            }\n\n            if (!goingUp && !node.leaf && contains(node, bbox)) { // go down\n                path.push(node);\n                indexes.push(i);\n                i = 0;\n                parent = node;\n                node = node.children[0];\n            } else if (parent) { // go right\n                i++;\n                node = parent.children[i];\n                goingUp = false;\n            } else node = null; // nothing found\n        }\n\n        return this;\n    }\n\n    toJSON () { return this.data; }\n\n    fromJSON (data) {\n        this.data = data;\n        return this;\n    }\n\n    toBBox (item) { return item; }\n\n    compareMinX (a, b) { return a.minX - b.minX; }\n    compareMinY (a, b) { return a.minY - b.minY; }\n\n    build (items, left, right, height) {\n        const N = right - left + 1;\n        let M = this._maxEntries;\n        let node;\n\n        if (N <= M) {\n            // reached leaf level; return leaf\n            node = createNode(items.slice(left, right + 1));\n            calcBBox(node, this.toBBox);\n            return node;\n        }\n\n        if (!height) {\n            // target height of the bulk-loaded tree\n            height = Math.ceil(Math.log(N) / Math.log(M));\n\n            // target number of root entries to maximize storage utilization\n            M = Math.ceil(N / (M ** (height - 1)));\n        }\n\n        node = createNode([]);\n        node.leaf = false;\n        node.height = height;\n\n        // split the items into M mostly square tiles\n\n        const N2 = Math.ceil(N / M);\n        const N1 = N2 * Math.ceil(Math.sqrt(M));\n\n        multiSelect(items, left, right, N1, this.compareMinX);\n\n        for (let i = left; i <= right; i += N1) {\n            const right2 = Math.min(i + N1 - 1, right);\n\n            multiSelect(items, i, right2, N2, this.compareMinY);\n\n            for (let j = i; j <= right2; j += N2) {\n                const right3 = Math.min(j + N2 - 1, right2);\n\n                // pack each entry recursively\n                node.children.push(this.build(items, j, right3, height - 1));\n            }\n        }\n\n        calcBBox(node, this.toBBox);\n\n        return node;\n    }\n\n    chooseSubtree (bbox, node, level, path) {\n        while (true) {\n            path.push(node);\n\n            if (node.leaf || path.length - 1 === level) break;\n\n            let minArea = Infinity;\n            let minEnlargement = Infinity;\n            let targetNode;\n\n            for (const child of node.children) {\n                const area = bboxArea(child);\n                const enlargement = enlargedArea(bbox, child) - area;\n\n                // choose entry with the least area enlargement\n                if (enlargement < minEnlargement) {\n                    minEnlargement = enlargement;\n                    minArea = area < minArea ? area : minArea;\n                    targetNode = child;\n                } else if (enlargement === minEnlargement) {\n                    // otherwise choose one with the smallest area\n                    if (area < minArea) {\n                        minArea = area;\n                        targetNode = child;\n                    }\n                }\n            }\n\n            node = targetNode || node.children[0];\n        }\n\n        return node;\n    }\n\n    insertSingleItem (item, level, isNode) {\n        const bbox = isNode ? item : this.toBBox(item);\n        const insertPath = [];\n\n        // find the best node for accommodating the item, saving all nodes along the path too\n        const node = this.chooseSubtree(bbox, this.data, level, insertPath);\n\n        // put the item into the node\n        node.children.push(item);\n        extend(node, bbox);\n\n        // split on node overflow; propagate upwards if necessary\n        while (level >= 0) {\n            if (insertPath[level].children.length > this._maxEntries) {\n                this.split(insertPath, level);\n                level--;\n            } else break;\n        }\n\n        // adjust bboxes along the insertion path\n        this.adjustParentBoxes(bbox, insertPath, level);\n    }\n\n    // split overflowed node into two\n    split (insertPath, level) {\n        const node = insertPath[level];\n        const M = node.children.length;\n        const m = this._minEntries;\n\n        this.chooseSplitAxis(node, m, M);\n\n        const splitIndex = this.chooseSplitIndex(node, m, M);\n\n        const newNode = createNode(node.children.splice(splitIndex, node.children.length - splitIndex));\n        newNode.height = node.height;\n        newNode.leaf = node.leaf;\n\n        calcBBox(node, this.toBBox);\n        calcBBox(newNode, this.toBBox);\n\n        if (level) insertPath[level - 1].children.push(newNode);\n        else this.splitRoot(node, newNode);\n    }\n\n    splitRoot (node, newNode) {\n        // split root node\n        this.data = createNode([node, newNode]);\n        this.data.height = node.height + 1;\n        this.data.leaf = false;\n        calcBBox(this.data, this.toBBox);\n    }\n\n    chooseSplitIndex (node, m, M) {\n        let index;\n        let minOverlap = Infinity;\n        let minArea = Infinity;\n\n        for (let i = m; i <= M - m; i++) {\n            const bbox1 = distBBox(node, 0, i, this.toBBox);\n            const bbox2 = distBBox(node, i, M, this.toBBox);\n\n            const overlap = intersectionArea(bbox1, bbox2);\n            const area = bboxArea(bbox1) + bboxArea(bbox2);\n\n            // choose distribution with minimum overlap\n            if (overlap < minOverlap) {\n                minOverlap = overlap;\n                index = i;\n\n                minArea = area < minArea ? area : minArea;\n            } else if (overlap === minOverlap) {\n                // otherwise choose distribution with minimum area\n                if (area < minArea) {\n                    minArea = area;\n                    index = i;\n                }\n            }\n        }\n\n        return index || M - m;\n    }\n\n    // sorts node children by the best axis for split\n    chooseSplitAxis (node, m, M) {\n        const compareMinX = node.leaf ? this.compareMinX : compareNodeMinX;\n        const compareMinY = node.leaf ? this.compareMinY : compareNodeMinY;\n        const xMargin = this.allDistMargin(node, m, M, compareMinX);\n        const yMargin = this.allDistMargin(node, m, M, compareMinY);\n\n        // if total distributions margin value is minimal for x, sort by minX,\n        // otherwise it's already sorted by minY\n        if (xMargin < yMargin) node.children.sort(compareMinX);\n    }\n\n    // total margin of all possible split distributions where each node is at least m full\n    allDistMargin (node, m, M, compare) {\n        node.children.sort(compare);\n\n        const toBBox = this.toBBox;\n        const leftBBox = distBBox(node, 0, m, toBBox);\n        const rightBBox = distBBox(node, M - m, M, toBBox);\n        let margin = bboxMargin(leftBBox) + bboxMargin(rightBBox);\n\n        for (let i = m; i < M - m; i++) {\n            const child = node.children[i];\n            extend(leftBBox, node.leaf ? toBBox(child) : child);\n            margin += bboxMargin(leftBBox);\n        }\n\n        for (let i = M - m - 1; i >= m; i--) {\n            const child = node.children[i];\n            extend(rightBBox, node.leaf ? toBBox(child) : child);\n            margin += bboxMargin(rightBBox);\n        }\n\n        return margin;\n    }\n\n    adjustParentBoxes (bbox, path, level) {\n        // adjust bboxes along the given tree path\n        for (let i = level; i >= 0; i--) {\n            extend(path[i], bbox);\n        }\n    }\n\n    condense (path) {\n        // go through the path, removing empty nodes and updating bboxes\n        for (let i = path.length - 1, siblings; i >= 0; i--) {\n            if (path[i].children.length === 0) {\n                if (i > 0) {\n                    siblings = path[i - 1].children;\n                    siblings.splice(siblings.indexOf(path[i]), 1);\n                } else this.clear();\n            } else calcBBox(path[i], this.toBBox);\n        }\n    }\n}\n","const ReservedFields = {\n    ROW_ID: '__id__',\n    MEASURE_NAMES: '__measure_names__'\n};\n\nexport default ReservedFields;\n","const CommonProps = {\n    ACTION_INF: 'actionInf',\n    ON_LAYER_DRAW: 'onLayerDraw',\n    MATRIX_CREATED: 'matrixCreated'\n};\n\nexport default CommonProps;\n","export const COORD_TYPES = {\n    POLAR: 'polar',\n    CARTESIAN: 'cartesian'\n};\nexport const DATA_TYPE = {\n    FUNCTION: 'function',\n    STRING: 'string',\n    NUMBER: 'number',\n    BOOLEAN: 'Boolean'\n};\nexport const SORT_ORDER_ASCENDING = 'asc';\nexport const SORT_ORDER_DESCENDING = 'desc';\n","export var slice = Array.prototype.slice;\n","export default function(x) {\n  return x;\n}\n","import {slice} from \"./array\";\nimport identity from \"./identity\";\n\nvar top = 1,\n    right = 2,\n    bottom = 3,\n    left = 4,\n    epsilon = 1e-6;\n\nfunction translateX(x) {\n  return \"translate(\" + (x + 0.5) + \",0)\";\n}\n\nfunction translateY(y) {\n  return \"translate(0,\" + (y + 0.5) + \")\";\n}\n\nfunction number(scale) {\n  return function(d) {\n    return +scale(d);\n  };\n}\n\nfunction center(scale) {\n  var offset = Math.max(0, scale.bandwidth() - 1) / 2; // Adjust for 0.5px offset.\n  if (scale.round()) offset = Math.round(offset);\n  return function(d) {\n    return +scale(d) + offset;\n  };\n}\n\nfunction entering() {\n  return !this.__axis;\n}\n\nfunction axis(orient, scale) {\n  var tickArguments = [],\n      tickValues = null,\n      tickFormat = null,\n      tickTransform = null,\n      tickSizeInner = 6,\n      tickSizeOuter = 6,\n      tickPadding = 3,\n      k = orient === top || orient === left ? -1 : 1,\n      x = orient === left || orient === right ? \"x\" : \"y\",\n      transform = orient === top || orient === bottom ? translateX : translateY;\n\n  function axis(context) {\n    var values = tickValues == null ? (scale.ticks ? scale.ticks.apply(scale, tickArguments) : scale.domain()) : tickValues,\n        format = tickFormat == null ? (scale.tickFormat ? scale.tickFormat.apply(scale, tickArguments) : identity) : tickFormat,\n        spacing = Math.max(tickSizeInner, 0) + tickPadding,\n        range = scale.range(),\n        range0 = +range[0] + 0.5,\n        range1 = +range[range.length - 1] + 0.5,\n        position = (scale.bandwidth ? center : number)(scale.copy()),\n        selection = context.selection ? context.selection() : context,\n        path = selection.selectAll(\".domain\").data([null]),\n        tick = selection.selectAll(\".tick\").data(values, scale).order(),\n        tickExit = tick.exit(),\n        tickEnter = tick.enter().append(\"g\").attr(\"class\", \"tick\"),\n        line = tick.select(\"line\"),\n        text = tick.select(\"text\");\n\n    path = path.merge(path.enter().insert(\"path\", \".tick\")\n        .attr(\"class\", \"domain\")\n        .attr(\"stroke\", \"#000\"));\n\n    tick = tick.merge(tickEnter);\n\n    line = line.merge(tickEnter.append(\"line\")\n        .attr(\"stroke\", \"#000\")\n        .attr(x + \"2\", k * tickSizeInner));\n\n    text = text.merge(tickEnter.append(\"text\")\n        .attr(\"fill\", \"#000\")\n        .attr(x, k * spacing)\n        .attr(\"dy\", orient === top ? \"0em\" : orient === bottom ? \"0.71em\" : \"0.32em\"))\n        .style('transform', tickTransform);\n\n    if (context !== selection) {\n      path = path.transition(context);\n      tick = tick.transition(context);\n      line = line.transition(context);\n      text = text.transition(context);\n\n      tickExit = tickExit.transition(context)\n          .attr(\"opacity\", epsilon)\n          .attr(\"transform\", function(d) { return isFinite(d = position(d)) ? transform(d) : this.getAttribute(\"transform\"); });\n\n      tickEnter\n          .attr(\"opacity\", epsilon)\n          .attr(\"transform\", function(d) { var p = this.parentNode.__axis; return transform(p && isFinite(p = p(d)) ? p : position(d)); });\n    }\n\n    tickExit.remove();\n\n    path\n        .attr(\"d\", orient === left || orient == right\n            ? \"M\" + k * tickSizeOuter + \",\" + range0 + \"H0.5V\" + range1 + \"H\" + k * tickSizeOuter\n            : \"M\" + range0 + \",\" + k * tickSizeOuter + \"V0.5H\" + range1 + \"V\" + k * tickSizeOuter);\n\n    tick\n        .attr(\"opacity\", 1)\n        .attr(\"transform\", function(d) { return transform(position(d)); });\n\n    line\n        .attr(x + \"2\", k * tickSizeInner);\n\n    text\n        .attr(x, k * spacing)\n        .text(format);\n\n    selection.filter(entering)\n        .attr(\"fill\", \"none\")\n        .attr(\"font-size\", 10)\n        .attr(\"font-family\", \"sans-serif\")\n        .attr(\"text-anchor\", orient === right ? \"start\" : orient === left ? \"end\" : \"middle\");\n\n    selection\n        .each(function() { this.__axis = position; });\n  }\n\n  axis.scale = function(_) {\n    return arguments.length ? (scale = _, axis) : scale;\n  };\n\n  axis.tickTransform = function(_) {\n    return arguments.length ? (tickTransform = _, axis) : tickTransform;\n  };\n\n  axis.ticks = function() {\n    return tickArguments = slice.call(arguments), axis;\n  };\n\n  axis.tickArguments = function(_) {\n    return arguments.length ? (tickArguments = _ == null ? [] : slice.call(_), axis) : tickArguments.slice();\n  };\n\n  axis.tickValues = function(_) {\n    return arguments.length ? (tickValues = _ == null ? null : slice.call(_), axis) : tickValues && tickValues.slice();\n  };\n\n  axis.tickFormat = function(_) {\n    return arguments.length ? (tickFormat = _, axis) : tickFormat;\n  };\n\n  axis.tickSize = function(_) {\n    return arguments.length ? (tickSizeInner = tickSizeOuter = +_, axis) : tickSizeInner;\n  };\n\n  axis.tickSizeInner = function(_) {\n    return arguments.length ? (tickSizeInner = +_, axis) : tickSizeInner;\n  };\n\n  axis.tickSizeOuter = function(_) {\n    return arguments.length ? (tickSizeOuter = +_, axis) : tickSizeOuter;\n  };\n\n  axis.tickPadding = function(_) {\n    return arguments.length ? (tickPadding = +_, axis) : tickPadding;\n  };\n\n  return axis;\n}\n\nexport function axisTop(scale) {\n  return axis(top, scale);\n}\n\nexport function axisRight(scale) {\n  return axis(right, scale);\n}\n\nexport function axisBottom(scale) {\n  return axis(bottom, scale);\n}\n\nexport function axisLeft(scale) {\n  return axis(left, scale);\n}\n","export var abs = Math.abs;\nexport var atan2 = Math.atan2;\nexport var cos = Math.cos;\nexport var max = Math.max;\nexport var min = Math.min;\nexport var sin = Math.sin;\nexport var sqrt = Math.sqrt;\n\nexport var epsilon = 1e-12;\nexport var pi = Math.PI;\nexport var halfPi = pi / 2;\nexport var tau = 2 * pi;\n\nexport function acos(x) {\n  return x > 1 ? 0 : x < -1 ? pi : Math.acos(x);\n}\n\nexport function asin(x) {\n  return x >= 1 ? halfPi : x <= -1 ? -halfPi : Math.asin(x);\n}\n","import {pi, tau} from \"../math.js\";\n\nexport default {\n  draw: function(context, size) {\n    var r = Math.sqrt(size / pi);\n    context.moveTo(r, 0);\n    context.arc(0, 0, r, 0, tau);\n  }\n};\n","export default {\n  draw: function(context, size) {\n    var r = Math.sqrt(size / 5) / 2;\n    context.moveTo(-3 * r, -r);\n    context.lineTo(-r, -r);\n    context.lineTo(-r, -3 * r);\n    context.lineTo(r, -3 * r);\n    context.lineTo(r, -r);\n    context.lineTo(3 * r, -r);\n    context.lineTo(3 * r, r);\n    context.lineTo(r, r);\n    context.lineTo(r, 3 * r);\n    context.lineTo(-r, 3 * r);\n    context.lineTo(-r, r);\n    context.lineTo(-3 * r, r);\n    context.closePath();\n  }\n};\n","var tan30 = Math.sqrt(1 / 3),\n    tan30_2 = tan30 * 2;\n\nexport default {\n  draw: function(context, size) {\n    var y = Math.sqrt(size / tan30_2),\n        x = y * tan30;\n    context.moveTo(0, -y);\n    context.lineTo(x, 0);\n    context.lineTo(0, y);\n    context.lineTo(-x, 0);\n    context.closePath();\n  }\n};\n","export default {\n  draw: function(context, size) {\n    var w = Math.sqrt(size),\n        x = -w / 2;\n    context.rect(x, x, w, w);\n  }\n};\n","import {pi, tau} from \"../math.js\";\n\nvar ka = 0.89081309152928522810,\n    kr = Math.sin(pi / 10) / Math.sin(7 * pi / 10),\n    kx = Math.sin(tau / 10) * kr,\n    ky = -Math.cos(tau / 10) * kr;\n\nexport default {\n  draw: function(context, size) {\n    var r = Math.sqrt(size * ka),\n        x = kx * r,\n        y = ky * r;\n    context.moveTo(0, -r);\n    context.lineTo(x, y);\n    for (var i = 1; i < 5; ++i) {\n      var a = tau * i / 5,\n          c = Math.cos(a),\n          s = Math.sin(a);\n      context.lineTo(s * r, -c * r);\n      context.lineTo(c * x - s * y, s * x + c * y);\n    }\n    context.closePath();\n  }\n};\n","var c = -0.5,\n    s = Math.sqrt(3) / 2,\n    k = 1 / Math.sqrt(12),\n    a = (k / 2 + 1) * 3;\n\nexport default {\n  draw: function(context, size) {\n    var r = Math.sqrt(size / a),\n        x0 = r / 2,\n        y0 = r * k,\n        x1 = x0,\n        y1 = r * k + r,\n        x2 = -x1,\n        y2 = y1;\n    context.moveTo(x0, y0);\n    context.lineTo(x1, y1);\n    context.lineTo(x2, y2);\n    context.lineTo(c * x0 - s * y0, s * x0 + c * y0);\n    context.lineTo(c * x1 - s * y1, s * x1 + c * y1);\n    context.lineTo(c * x2 - s * y2, s * x2 + c * y2);\n    context.lineTo(c * x0 + s * y0, c * y0 - s * x0);\n    context.lineTo(c * x1 + s * y1, c * y1 - s * x1);\n    context.lineTo(c * x2 + s * y2, c * y2 - s * x2);\n    context.closePath();\n  }\n};\n","var sqrt3 = Math.sqrt(3);\n\nexport default {\n  draw: function(context, size) {\n    var y = -Math.sqrt(size / (sqrt3 * 3));\n    context.moveTo(0, y * 2);\n    context.lineTo(-sqrt3 * y, -y);\n    context.lineTo(sqrt3 * y, -y);\n    context.closePath();\n  }\n};\n","var pi = Math.PI,\n    tau = 2 * pi,\n    epsilon = 1e-6,\n    tauEpsilon = tau - epsilon;\n\nfunction Path() {\n  this._x0 = this._y0 = // start of current subpath\n  this._x1 = this._y1 = null; // end of current subpath\n  this._ = \"\";\n}\n\nfunction path() {\n  return new Path;\n}\n\nPath.prototype = path.prototype = {\n  constructor: Path,\n  moveTo: function(x, y) {\n    this._ += \"M\" + (this._x0 = this._x1 = +x) + \",\" + (this._y0 = this._y1 = +y);\n  },\n  closePath: function() {\n    if (this._x1 !== null) {\n      this._x1 = this._x0, this._y1 = this._y0;\n      this._ += \"Z\";\n    }\n  },\n  lineTo: function(x, y) {\n    this._ += \"L\" + (this._x1 = +x) + \",\" + (this._y1 = +y);\n  },\n  quadraticCurveTo: function(x1, y1, x, y) {\n    this._ += \"Q\" + (+x1) + \",\" + (+y1) + \",\" + (this._x1 = +x) + \",\" + (this._y1 = +y);\n  },\n  bezierCurveTo: function(x1, y1, x2, y2, x, y) {\n    this._ += \"C\" + (+x1) + \",\" + (+y1) + \",\" + (+x2) + \",\" + (+y2) + \",\" + (this._x1 = +x) + \",\" + (this._y1 = +y);\n  },\n  arcTo: function(x1, y1, x2, y2, r) {\n    x1 = +x1, y1 = +y1, x2 = +x2, y2 = +y2, r = +r;\n    var x0 = this._x1,\n        y0 = this._y1,\n        x21 = x2 - x1,\n        y21 = y2 - y1,\n        x01 = x0 - x1,\n        y01 = y0 - y1,\n        l01_2 = x01 * x01 + y01 * y01;\n\n    // Is the radius negative? Error.\n    if (r < 0) throw new Error(\"negative radius: \" + r);\n\n    // Is this path empty? Move to (x1,y1).\n    if (this._x1 === null) {\n      this._ += \"M\" + (this._x1 = x1) + \",\" + (this._y1 = y1);\n    }\n\n    // Or, is (x1,y1) coincident with (x0,y0)? Do nothing.\n    else if (!(l01_2 > epsilon));\n\n    // Or, are (x0,y0), (x1,y1) and (x2,y2) collinear?\n    // Equivalently, is (x1,y1) coincident with (x2,y2)?\n    // Or, is the radius zero? Line to (x1,y1).\n    else if (!(Math.abs(y01 * x21 - y21 * x01) > epsilon) || !r) {\n      this._ += \"L\" + (this._x1 = x1) + \",\" + (this._y1 = y1);\n    }\n\n    // Otherwise, draw an arc!\n    else {\n      var x20 = x2 - x0,\n          y20 = y2 - y0,\n          l21_2 = x21 * x21 + y21 * y21,\n          l20_2 = x20 * x20 + y20 * y20,\n          l21 = Math.sqrt(l21_2),\n          l01 = Math.sqrt(l01_2),\n          l = r * Math.tan((pi - Math.acos((l21_2 + l01_2 - l20_2) / (2 * l21 * l01))) / 2),\n          t01 = l / l01,\n          t21 = l / l21;\n\n      // If the start tangent is not coincident with (x0,y0), line to.\n      if (Math.abs(t01 - 1) > epsilon) {\n        this._ += \"L\" + (x1 + t01 * x01) + \",\" + (y1 + t01 * y01);\n      }\n\n      this._ += \"A\" + r + \",\" + r + \",0,0,\" + (+(y01 * x20 > x01 * y20)) + \",\" + (this._x1 = x1 + t21 * x21) + \",\" + (this._y1 = y1 + t21 * y21);\n    }\n  },\n  arc: function(x, y, r, a0, a1, ccw) {\n    x = +x, y = +y, r = +r, ccw = !!ccw;\n    var dx = r * Math.cos(a0),\n        dy = r * Math.sin(a0),\n        x0 = x + dx,\n        y0 = y + dy,\n        cw = 1 ^ ccw,\n        da = ccw ? a0 - a1 : a1 - a0;\n\n    // Is the radius negative? Error.\n    if (r < 0) throw new Error(\"negative radius: \" + r);\n\n    // Is this path empty? Move to (x0,y0).\n    if (this._x1 === null) {\n      this._ += \"M\" + x0 + \",\" + y0;\n    }\n\n    // Or, is (x0,y0) not coincident with the previous point? Line to (x0,y0).\n    else if (Math.abs(this._x1 - x0) > epsilon || Math.abs(this._y1 - y0) > epsilon) {\n      this._ += \"L\" + x0 + \",\" + y0;\n    }\n\n    // Is this arc empty? We’re done.\n    if (!r) return;\n\n    // Does the angle go the wrong way? Flip the direction.\n    if (da < 0) da = da % tau + tau;\n\n    // Is this a complete circle? Draw two arcs to complete the circle.\n    if (da > tauEpsilon) {\n      this._ += \"A\" + r + \",\" + r + \",0,1,\" + cw + \",\" + (x - dx) + \",\" + (y - dy) + \"A\" + r + \",\" + r + \",0,1,\" + cw + \",\" + (this._x1 = x0) + \",\" + (this._y1 = y0);\n    }\n\n    // Is this arc non-empty? Draw an arc!\n    else if (da > epsilon) {\n      this._ += \"A\" + r + \",\" + r + \",0,\" + (+(da >= pi)) + \",\" + cw + \",\" + (this._x1 = x + r * Math.cos(a1)) + \",\" + (this._y1 = y + r * Math.sin(a1));\n    }\n  },\n  rect: function(x, y, w, h) {\n    this._ += \"M\" + (this._x0 = this._x1 = +x) + \",\" + (this._y0 = this._y1 = +y) + \"h\" + (+w) + \"v\" + (+h) + \"h\" + (-w) + \"Z\";\n  },\n  toString: function() {\n    return this._;\n  }\n};\n\nexport default path;\n","export default function(x) {\n  return function constant() {\n    return x;\n  };\n}\n","export default function(series) {\n  var n = series.length, o = new Array(n);\n  while (--n >= 0) o[n] = n;\n  return o;\n}\n","import none from \"./none.js\";\n\nexport default function(series) {\n  var sums = series.map(sum);\n  return none(series).sort(function(a, b) { return sums[a] - sums[b]; });\n}\n\nexport function sum(series) {\n  var s = 0, i = -1, n = series.length, v;\n  while (++i < n) if (v = +series[i][1]) s += v;\n  return s;\n}\n","import ascending from \"./ascending.js\";\n\nexport default function(series) {\n  return ascending(series).reverse();\n}\n","export default function(series, order) {\n  if (!((n = series.length) > 1)) return;\n  for (var i = 1, j, s0, s1 = series[order[0]], n, m = s1.length; i < n; ++i) {\n    s0 = s1, s1 = series[order[i]];\n    for (j = 0; j < m; ++j) {\n      s1[j][1] += s1[j][0] = isNaN(s0[j][1]) ? s0[j][0] : s0[j][1];\n    }\n  }\n}\n","export var slice = Array.prototype.slice;\n","import {slice} from \"./array.js\";\nimport constant from \"./constant.js\";\nimport offsetNone from \"./offset/none.js\";\nimport orderNone from \"./order/none.js\";\n\nfunction stackValue(d, key) {\n  return d[key];\n}\n\nexport default function() {\n  var keys = constant([]),\n      order = orderNone,\n      offset = offsetNone,\n      value = stackValue;\n\n  function stack(data) {\n    var kz = keys.apply(this, arguments),\n        i,\n        m = data.length,\n        n = kz.length,\n        sz = new Array(n),\n        oz;\n\n    for (i = 0; i < n; ++i) {\n      for (var ki = kz[i], si = sz[i] = new Array(m), j = 0, sij; j < m; ++j) {\n        si[j] = sij = [0, +value(data[j], ki, j, data)];\n        sij.data = data[j];\n      }\n      si.key = ki;\n    }\n\n    for (i = 0, oz = order(sz); i < n; ++i) {\n      sz[oz[i]].index = i;\n    }\n\n    offset(sz, oz);\n    return sz;\n  }\n\n  stack.keys = function(_) {\n    return arguments.length ? (keys = typeof _ === \"function\" ? _ : constant(slice.call(_)), stack) : keys;\n  };\n\n  stack.value = function(_) {\n    return arguments.length ? (value = typeof _ === \"function\" ? _ : constant(+_), stack) : value;\n  };\n\n  stack.order = function(_) {\n    return arguments.length ? (order = _ == null ? orderNone : typeof _ === \"function\" ? _ : constant(slice.call(_)), stack) : order;\n  };\n\n  stack.offset = function(_) {\n    return arguments.length ? (offset = _ == null ? offsetNone : _, stack) : offset;\n  };\n\n  return stack;\n}\n","function Linear(context) {\n  this._context = context;\n}\n\nLinear.prototype = {\n  areaStart: function() {\n    this._line = 0;\n  },\n  areaEnd: function() {\n    this._line = NaN;\n  },\n  lineStart: function() {\n    this._point = 0;\n  },\n  lineEnd: function() {\n    if (this._line || (this._line !== 0 && this._point === 1)) this._context.closePath();\n    this._line = 1 - this._line;\n  },\n  point: function(x, y) {\n    x = +x, y = +y;\n    switch (this._point) {\n      case 0: this._point = 1; this._line ? this._context.lineTo(x, y) : this._context.moveTo(x, y); break;\n      case 1: this._point = 2; // proceed\n      default: this._context.lineTo(x, y); break;\n    }\n  }\n};\n\nexport default function(context) {\n  return new Linear(context);\n}\n","function Step(context, t) {\n  this._context = context;\n  this._t = t;\n}\n\nStep.prototype = {\n  areaStart: function() {\n    this._line = 0;\n  },\n  areaEnd: function() {\n    this._line = NaN;\n  },\n  lineStart: function() {\n    this._x = this._y = NaN;\n    this._point = 0;\n  },\n  lineEnd: function() {\n    if (0 < this._t && this._t < 1 && this._point === 2) this._context.lineTo(this._x, this._y);\n    if (this._line || (this._line !== 0 && this._point === 1)) this._context.closePath();\n    if (this._line >= 0) this._t = 1 - this._t, this._line = 1 - this._line;\n  },\n  point: function(x, y) {\n    x = +x, y = +y;\n    switch (this._point) {\n      case 0: this._point = 1; this._line ? this._context.lineTo(x, y) : this._context.moveTo(x, y); break;\n      case 1: this._point = 2; // proceed\n      default: {\n        if (this._t <= 0) {\n          this._context.lineTo(this._x, y);\n          this._context.lineTo(x, y);\n        } else {\n          var x1 = this._x * (1 - this._t) + x * this._t;\n          this._context.lineTo(x1, this._y);\n          this._context.lineTo(x1, y);\n        }\n        break;\n      }\n    }\n    this._x = x, this._y = y;\n  }\n};\n\nexport default function(context) {\n  return new Step(context, 0.5);\n}\n\nexport function stepBefore(context) {\n  return new Step(context, 0);\n}\n\nexport function stepAfter(context) {\n  return new Step(context, 1);\n}\n","export function point(that, x, y) {\n  that._context.bezierCurveTo(\n    that._x1 + that._k * (that._x2 - that._x0),\n    that._y1 + that._k * (that._y2 - that._y0),\n    that._x2 + that._k * (that._x1 - x),\n    that._y2 + that._k * (that._y1 - y),\n    that._x2,\n    that._y2\n  );\n}\n\nexport function Cardinal(context, tension) {\n  this._context = context;\n  this._k = (1 - tension) / 6;\n}\n\nCardinal.prototype = {\n  areaStart: function() {\n    this._line = 0;\n  },\n  areaEnd: function() {\n    this._line = NaN;\n  },\n  lineStart: function() {\n    this._x0 = this._x1 = this._x2 =\n    this._y0 = this._y1 = this._y2 = NaN;\n    this._point = 0;\n  },\n  lineEnd: function() {\n    switch (this._point) {\n      case 2: this._context.lineTo(this._x2, this._y2); break;\n      case 3: point(this, this._x1, this._y1); break;\n    }\n    if (this._line || (this._line !== 0 && this._point === 1)) this._context.closePath();\n    this._line = 1 - this._line;\n  },\n  point: function(x, y) {\n    x = +x, y = +y;\n    switch (this._point) {\n      case 0: this._point = 1; this._line ? this._context.lineTo(x, y) : this._context.moveTo(x, y); break;\n      case 1: this._point = 2; this._x1 = x, this._y1 = y; break;\n      case 2: this._point = 3; // proceed\n      default: point(this, x, y); break;\n    }\n    this._x0 = this._x1, this._x1 = this._x2, this._x2 = x;\n    this._y0 = this._y1, this._y1 = this._y2, this._y2 = y;\n  }\n};\n\nexport default (function custom(tension) {\n\n  function cardinal(context) {\n    return new Cardinal(context, tension);\n  }\n\n  cardinal.tension = function(tension) {\n    return custom(+tension);\n  };\n\n  return cardinal;\n})(0);\n","import {epsilon} from \"../math.js\";\nimport {Cardinal} from \"./cardinal.js\";\n\nexport function point(that, x, y) {\n  var x1 = that._x1,\n      y1 = that._y1,\n      x2 = that._x2,\n      y2 = that._y2;\n\n  if (that._l01_a > epsilon) {\n    var a = 2 * that._l01_2a + 3 * that._l01_a * that._l12_a + that._l12_2a,\n        n = 3 * that._l01_a * (that._l01_a + that._l12_a);\n    x1 = (x1 * a - that._x0 * that._l12_2a + that._x2 * that._l01_2a) / n;\n    y1 = (y1 * a - that._y0 * that._l12_2a + that._y2 * that._l01_2a) / n;\n  }\n\n  if (that._l23_a > epsilon) {\n    var b = 2 * that._l23_2a + 3 * that._l23_a * that._l12_a + that._l12_2a,\n        m = 3 * that._l23_a * (that._l23_a + that._l12_a);\n    x2 = (x2 * b + that._x1 * that._l23_2a - x * that._l12_2a) / m;\n    y2 = (y2 * b + that._y1 * that._l23_2a - y * that._l12_2a) / m;\n  }\n\n  that._context.bezierCurveTo(x1, y1, x2, y2, that._x2, that._y2);\n}\n\nfunction CatmullRom(context, alpha) {\n  this._context = context;\n  this._alpha = alpha;\n}\n\nCatmullRom.prototype = {\n  areaStart: function() {\n    this._line = 0;\n  },\n  areaEnd: function() {\n    this._line = NaN;\n  },\n  lineStart: function() {\n    this._x0 = this._x1 = this._x2 =\n    this._y0 = this._y1 = this._y2 = NaN;\n    this._l01_a = this._l12_a = this._l23_a =\n    this._l01_2a = this._l12_2a = this._l23_2a =\n    this._point = 0;\n  },\n  lineEnd: function() {\n    switch (this._point) {\n      case 2: this._context.lineTo(this._x2, this._y2); break;\n      case 3: this.point(this._x2, this._y2); break;\n    }\n    if (this._line || (this._line !== 0 && this._point === 1)) this._context.closePath();\n    this._line = 1 - this._line;\n  },\n  point: function(x, y) {\n    x = +x, y = +y;\n\n    if (this._point) {\n      var x23 = this._x2 - x,\n          y23 = this._y2 - y;\n      this._l23_a = Math.sqrt(this._l23_2a = Math.pow(x23 * x23 + y23 * y23, this._alpha));\n    }\n\n    switch (this._point) {\n      case 0: this._point = 1; this._line ? this._context.lineTo(x, y) : this._context.moveTo(x, y); break;\n      case 1: this._point = 2; break;\n      case 2: this._point = 3; // proceed\n      default: point(this, x, y); break;\n    }\n\n    this._l01_a = this._l12_a, this._l12_a = this._l23_a;\n    this._l01_2a = this._l12_2a, this._l12_2a = this._l23_2a;\n    this._x0 = this._x1, this._x1 = this._x2, this._x2 = x;\n    this._y0 = this._y1, this._y1 = this._y2, this._y2 = y;\n  }\n};\n\nexport default (function custom(alpha) {\n\n  function catmullRom(context) {\n    return alpha ? new CatmullRom(context, alpha) : new Cardinal(context, 0);\n  }\n\n  catmullRom.alpha = function(alpha) {\n    return custom(+alpha);\n  };\n\n  return catmullRom;\n})(0.5);\n","export function x(p) {\n  return p[0];\n}\n\nexport function y(p) {\n  return p[1];\n}\n","import {path} from \"d3-path\";\nimport constant from \"./constant.js\";\nimport curveLinear from \"./curve/linear.js\";\nimport {x as pointX, y as pointY} from \"./point.js\";\n\nexport default function() {\n  var x = pointX,\n      y = pointY,\n      defined = constant(true),\n      context = null,\n      curve = curveLinear,\n      output = null;\n\n  function line(data) {\n    var i,\n        n = data.length,\n        d,\n        defined0 = false,\n        buffer;\n\n    if (context == null) output = curve(buffer = path());\n\n    for (i = 0; i <= n; ++i) {\n      if (!(i < n && defined(d = data[i], i, data)) === defined0) {\n        if (defined0 = !defined0) output.lineStart();\n        else output.lineEnd();\n      }\n      if (defined0) output.point(+x(d, i, data), +y(d, i, data));\n    }\n\n    if (buffer) return output = null, buffer + \"\" || null;\n  }\n\n  line.x = function(_) {\n    return arguments.length ? (x = typeof _ === \"function\" ? _ : constant(+_), line) : x;\n  };\n\n  line.y = function(_) {\n    return arguments.length ? (y = typeof _ === \"function\" ? _ : constant(+_), line) : y;\n  };\n\n  line.defined = function(_) {\n    return arguments.length ? (defined = typeof _ === \"function\" ? _ : constant(!!_), line) : defined;\n  };\n\n  line.curve = function(_) {\n    return arguments.length ? (curve = _, context != null && (output = curve(context)), line) : curve;\n  };\n\n  line.context = function(_) {\n    return arguments.length ? (_ == null ? context = output = null : output = curve(context = _), line) : context;\n  };\n\n  return line;\n}\n","export default function(a, b) {\n  return b < a ? -1 : b > a ? 1 : b >= a ? 0 : NaN;\n}\n","export default function(d) {\n  return d;\n}\n","import {path} from \"d3-path\";\nimport constant from \"./constant.js\";\nimport {abs, acos, asin, atan2, cos, epsilon, halfPi, max, min, pi, sin, sqrt, tau} from \"./math.js\";\n\nfunction arcInnerRadius(d) {\n  return d.innerRadius;\n}\n\nfunction arcOuterRadius(d) {\n  return d.outerRadius;\n}\n\nfunction arcStartAngle(d) {\n  return d.startAngle;\n}\n\nfunction arcEndAngle(d) {\n  return d.endAngle;\n}\n\nfunction arcPadAngle(d) {\n  return d && d.padAngle; // Note: optional!\n}\n\nfunction intersect(x0, y0, x1, y1, x2, y2, x3, y3) {\n  var x10 = x1 - x0, y10 = y1 - y0,\n      x32 = x3 - x2, y32 = y3 - y2,\n      t = y32 * x10 - x32 * y10;\n  if (t * t < epsilon) return;\n  t = (x32 * (y0 - y2) - y32 * (x0 - x2)) / t;\n  return [x0 + t * x10, y0 + t * y10];\n}\n\n// Compute perpendicular offset line of length rc.\n// http://mathworld.wolfram.com/Circle-LineIntersection.html\nfunction cornerTangents(x0, y0, x1, y1, r1, rc, cw) {\n  var x01 = x0 - x1,\n      y01 = y0 - y1,\n      lo = (cw ? rc : -rc) / sqrt(x01 * x01 + y01 * y01),\n      ox = lo * y01,\n      oy = -lo * x01,\n      x11 = x0 + ox,\n      y11 = y0 + oy,\n      x10 = x1 + ox,\n      y10 = y1 + oy,\n      x00 = (x11 + x10) / 2,\n      y00 = (y11 + y10) / 2,\n      dx = x10 - x11,\n      dy = y10 - y11,\n      d2 = dx * dx + dy * dy,\n      r = r1 - rc,\n      D = x11 * y10 - x10 * y11,\n      d = (dy < 0 ? -1 : 1) * sqrt(max(0, r * r * d2 - D * D)),\n      cx0 = (D * dy - dx * d) / d2,\n      cy0 = (-D * dx - dy * d) / d2,\n      cx1 = (D * dy + dx * d) / d2,\n      cy1 = (-D * dx + dy * d) / d2,\n      dx0 = cx0 - x00,\n      dy0 = cy0 - y00,\n      dx1 = cx1 - x00,\n      dy1 = cy1 - y00;\n\n  // Pick the closer of the two intersection points.\n  // TODO Is there a faster way to determine which intersection to use?\n  if (dx0 * dx0 + dy0 * dy0 > dx1 * dx1 + dy1 * dy1) cx0 = cx1, cy0 = cy1;\n\n  return {\n    cx: cx0,\n    cy: cy0,\n    x01: -ox,\n    y01: -oy,\n    x11: cx0 * (r1 / r - 1),\n    y11: cy0 * (r1 / r - 1)\n  };\n}\n\nexport default function() {\n  var innerRadius = arcInnerRadius,\n      outerRadius = arcOuterRadius,\n      cornerRadius = constant(0),\n      padRadius = null,\n      startAngle = arcStartAngle,\n      endAngle = arcEndAngle,\n      padAngle = arcPadAngle,\n      context = null;\n\n  function arc() {\n    var buffer,\n        r,\n        r0 = +innerRadius.apply(this, arguments),\n        r1 = +outerRadius.apply(this, arguments),\n        a0 = startAngle.apply(this, arguments) - halfPi,\n        a1 = endAngle.apply(this, arguments) - halfPi,\n        da = abs(a1 - a0),\n        cw = a1 > a0;\n\n    if (!context) context = buffer = path();\n\n    // Ensure that the outer radius is always larger than the inner radius.\n    if (r1 < r0) r = r1, r1 = r0, r0 = r;\n\n    // Is it a point?\n    if (!(r1 > epsilon)) context.moveTo(0, 0);\n\n    // Or is it a circle or annulus?\n    else if (da > tau - epsilon) {\n      context.moveTo(r1 * cos(a0), r1 * sin(a0));\n      context.arc(0, 0, r1, a0, a1, !cw);\n      if (r0 > epsilon) {\n        context.moveTo(r0 * cos(a1), r0 * sin(a1));\n        context.arc(0, 0, r0, a1, a0, cw);\n      }\n    }\n\n    // Or is it a circular or annular sector?\n    else {\n      var a01 = a0,\n          a11 = a1,\n          a00 = a0,\n          a10 = a1,\n          da0 = da,\n          da1 = da,\n          ap = padAngle.apply(this, arguments) / 2,\n          rp = (ap > epsilon) && (padRadius ? +padRadius.apply(this, arguments) : sqrt(r0 * r0 + r1 * r1)),\n          rc = min(abs(r1 - r0) / 2, +cornerRadius.apply(this, arguments)),\n          rc0 = rc,\n          rc1 = rc,\n          t0,\n          t1;\n\n      // Apply padding? Note that since r1 ≥ r0, da1 ≥ da0.\n      if (rp > epsilon) {\n        var p0 = asin(rp / r0 * sin(ap)),\n            p1 = asin(rp / r1 * sin(ap));\n        if ((da0 -= p0 * 2) > epsilon) p0 *= (cw ? 1 : -1), a00 += p0, a10 -= p0;\n        else da0 = 0, a00 = a10 = (a0 + a1) / 2;\n        if ((da1 -= p1 * 2) > epsilon) p1 *= (cw ? 1 : -1), a01 += p1, a11 -= p1;\n        else da1 = 0, a01 = a11 = (a0 + a1) / 2;\n      }\n\n      var x01 = r1 * cos(a01),\n          y01 = r1 * sin(a01),\n          x10 = r0 * cos(a10),\n          y10 = r0 * sin(a10);\n\n      // Apply rounded corners?\n      if (rc > epsilon) {\n        var x11 = r1 * cos(a11),\n            y11 = r1 * sin(a11),\n            x00 = r0 * cos(a00),\n            y00 = r0 * sin(a00),\n            oc;\n\n        // Restrict the corner radius according to the sector angle.\n        if (da < pi && (oc = intersect(x01, y01, x00, y00, x11, y11, x10, y10))) {\n          var ax = x01 - oc[0],\n              ay = y01 - oc[1],\n              bx = x11 - oc[0],\n              by = y11 - oc[1],\n              kc = 1 / sin(acos((ax * bx + ay * by) / (sqrt(ax * ax + ay * ay) * sqrt(bx * bx + by * by))) / 2),\n              lc = sqrt(oc[0] * oc[0] + oc[1] * oc[1]);\n          rc0 = min(rc, (r0 - lc) / (kc - 1));\n          rc1 = min(rc, (r1 - lc) / (kc + 1));\n        }\n      }\n\n      // Is the sector collapsed to a line?\n      if (!(da1 > epsilon)) context.moveTo(x01, y01);\n\n      // Does the sector’s outer ring have rounded corners?\n      else if (rc1 > epsilon) {\n        t0 = cornerTangents(x00, y00, x01, y01, r1, rc1, cw);\n        t1 = cornerTangents(x11, y11, x10, y10, r1, rc1, cw);\n\n        context.moveTo(t0.cx + t0.x01, t0.cy + t0.y01);\n\n        // Have the corners merged?\n        if (rc1 < rc) context.arc(t0.cx, t0.cy, rc1, atan2(t0.y01, t0.x01), atan2(t1.y01, t1.x01), !cw);\n\n        // Otherwise, draw the two corners and the ring.\n        else {\n          context.arc(t0.cx, t0.cy, rc1, atan2(t0.y01, t0.x01), atan2(t0.y11, t0.x11), !cw);\n          context.arc(0, 0, r1, atan2(t0.cy + t0.y11, t0.cx + t0.x11), atan2(t1.cy + t1.y11, t1.cx + t1.x11), !cw);\n          context.arc(t1.cx, t1.cy, rc1, atan2(t1.y11, t1.x11), atan2(t1.y01, t1.x01), !cw);\n        }\n      }\n\n      // Or is the outer ring just a circular arc?\n      else context.moveTo(x01, y01), context.arc(0, 0, r1, a01, a11, !cw);\n\n      // Is there no inner ring, and it’s a circular sector?\n      // Or perhaps it’s an annular sector collapsed due to padding?\n      if (!(r0 > epsilon) || !(da0 > epsilon)) context.lineTo(x10, y10);\n\n      // Does the sector’s inner ring (or point) have rounded corners?\n      else if (rc0 > epsilon) {\n        t0 = cornerTangents(x10, y10, x11, y11, r0, -rc0, cw);\n        t1 = cornerTangents(x01, y01, x00, y00, r0, -rc0, cw);\n\n        context.lineTo(t0.cx + t0.x01, t0.cy + t0.y01);\n\n        // Have the corners merged?\n        if (rc0 < rc) context.arc(t0.cx, t0.cy, rc0, atan2(t0.y01, t0.x01), atan2(t1.y01, t1.x01), !cw);\n\n        // Otherwise, draw the two corners and the ring.\n        else {\n          context.arc(t0.cx, t0.cy, rc0, atan2(t0.y01, t0.x01), atan2(t0.y11, t0.x11), !cw);\n          context.arc(0, 0, r0, atan2(t0.cy + t0.y11, t0.cx + t0.x11), atan2(t1.cy + t1.y11, t1.cx + t1.x11), cw);\n          context.arc(t1.cx, t1.cy, rc0, atan2(t1.y11, t1.x11), atan2(t1.y01, t1.x01), !cw);\n        }\n      }\n\n      // Or is the inner ring just a circular arc?\n      else context.arc(0, 0, r0, a10, a00, cw);\n    }\n\n    context.closePath();\n\n    if (buffer) return context = null, buffer + \"\" || null;\n  }\n\n  arc.centroid = function() {\n    var r = (+innerRadius.apply(this, arguments) + +outerRadius.apply(this, arguments)) / 2,\n        a = (+startAngle.apply(this, arguments) + +endAngle.apply(this, arguments)) / 2 - pi / 2;\n    return [cos(a) * r, sin(a) * r];\n  };\n\n  arc.innerRadius = function(_) {\n    return arguments.length ? (innerRadius = typeof _ === \"function\" ? _ : constant(+_), arc) : innerRadius;\n  };\n\n  arc.outerRadius = function(_) {\n    return arguments.length ? (outerRadius = typeof _ === \"function\" ? _ : constant(+_), arc) : outerRadius;\n  };\n\n  arc.cornerRadius = function(_) {\n    return arguments.length ? (cornerRadius = typeof _ === \"function\" ? _ : constant(+_), arc) : cornerRadius;\n  };\n\n  arc.padRadius = function(_) {\n    return arguments.length ? (padRadius = _ == null ? null : typeof _ === \"function\" ? _ : constant(+_), arc) : padRadius;\n  };\n\n  arc.startAngle = function(_) {\n    return arguments.length ? (startAngle = typeof _ === \"function\" ? _ : constant(+_), arc) : startAngle;\n  };\n\n  arc.endAngle = function(_) {\n    return arguments.length ? (endAngle = typeof _ === \"function\" ? _ : constant(+_), arc) : endAngle;\n  };\n\n  arc.padAngle = function(_) {\n    return arguments.length ? (padAngle = typeof _ === \"function\" ? _ : constant(+_), arc) : padAngle;\n  };\n\n  arc.context = function(_) {\n    return arguments.length ? ((context = _ == null ? null : _), arc) : context;\n  };\n\n  return arc;\n}\n","import {hsl as colorHsl} from \"d3-color\";\nimport color, {hue} from \"./color.js\";\n\nfunction hsl(hue) {\n  return function(start, end) {\n    var h = hue((start = colorHsl(start)).h, (end = colorHsl(end)).h),\n        s = color(start.s, end.s),\n        l = color(start.l, end.l),\n        opacity = color(start.opacity, end.opacity);\n    return function(t) {\n      start.h = h(t);\n      start.s = s(t);\n      start.l = l(t);\n      start.opacity = opacity(t);\n      return start + \"\";\n    };\n  }\n}\n\nexport default hsl(hue);\nexport var hslLong = hsl(color);\n","export default function piecewise(interpolate, values) {\n  var i = 0, n = values.length - 1, v = values[0], I = new Array(n < 0 ? 0 : n);\n  while (i < n) I[i] = interpolate(v, v = values[++i]);\n  return function(t) {\n    var i = Math.max(0, Math.min(n - 1, Math.floor(t *= n)));\n    return I[i](t - i);\n  };\n}\n","export function cubicIn(t) {\n  return t * t * t;\n}\n\nexport function cubicOut(t) {\n  return --t * t * t + 1;\n}\n\nexport function cubicInOut(t) {\n  return ((t *= 2) <= 1 ? t * t * t : (t -= 2) * t * t + 2) / 2;\n}\n","var b1 = 4 / 11,\n    b2 = 6 / 11,\n    b3 = 8 / 11,\n    b4 = 3 / 4,\n    b5 = 9 / 11,\n    b6 = 10 / 11,\n    b7 = 15 / 16,\n    b8 = 21 / 22,\n    b9 = 63 / 64,\n    b0 = 1 / b1 / b1;\n\nexport function bounceIn(t) {\n  return 1 - bounceOut(1 - t);\n}\n\nexport function bounceOut(t) {\n  return (t = +t) < b1 ? b0 * t * t : t < b3 ? b0 * (t -= b2) * t + b4 : t < b6 ? b0 * (t -= b5) * t + b7 : b0 * (t -= b8) * t + b9;\n}\n\nexport function bounceInOut(t) {\n  return ((t *= 2) <= 1 ? 1 - bounceOut(1 - t) : bounceOut(t - 1) + 1) / 2;\n}\n","var tau = 2 * Math.PI,\n    amplitude = 1,\n    period = 0.3;\n\nexport var elasticIn = (function custom(a, p) {\n  var s = Math.asin(1 / (a = Math.max(1, a))) * (p /= tau);\n\n  function elasticIn(t) {\n    return a * Math.pow(2, 10 * --t) * Math.sin((s - t) / p);\n  }\n\n  elasticIn.amplitude = function(a) { return custom(a, p * tau); };\n  elasticIn.period = function(p) { return custom(a, p); };\n\n  return elasticIn;\n})(amplitude, period);\n\nexport var elasticOut = (function custom(a, p) {\n  var s = Math.asin(1 / (a = Math.max(1, a))) * (p /= tau);\n\n  function elasticOut(t) {\n    return 1 - a * Math.pow(2, -10 * (t = +t)) * Math.sin((t + s) / p);\n  }\n\n  elasticOut.amplitude = function(a) { return custom(a, p * tau); };\n  elasticOut.period = function(p) { return custom(a, p); };\n\n  return elasticOut;\n})(amplitude, period);\n\nexport var elasticInOut = (function custom(a, p) {\n  var s = Math.asin(1 / (a = Math.max(1, a))) * (p /= tau);\n\n  function elasticInOut(t) {\n    return ((t = t * 2 - 1) < 0\n        ? a * Math.pow(2, 10 * t) * Math.sin((s - t) / p)\n        : 2 - a * Math.pow(2, -10 * t) * Math.sin((s + t) / p)) / 2;\n  }\n\n  elasticInOut.amplitude = function(a) { return custom(a, p * tau); };\n  elasticInOut.period = function(p) { return custom(a, p); };\n\n  return elasticInOut;\n})(amplitude, period);\n","var overshoot = 1.70158;\n\nexport var backIn = (function custom(s) {\n  s = +s;\n\n  function backIn(t) {\n    return t * t * ((s + 1) * t - s);\n  }\n\n  backIn.overshoot = custom;\n\n  return backIn;\n})(overshoot);\n\nexport var backOut = (function custom(s) {\n  s = +s;\n\n  function backOut(t) {\n    return --t * t * ((s + 1) * t + s) + 1;\n  }\n\n  backOut.overshoot = custom;\n\n  return backOut;\n})(overshoot);\n\nexport var backInOut = (function custom(s) {\n  s = +s;\n\n  function backInOut(t) {\n    return ((t *= 2) < 1 ? t * t * ((s + 1) * t - s) : (t -= 2) * t * ((s + 1) * t + s) + 2) / 2;\n  }\n\n  backInOut.overshoot = custom;\n\n  return backInOut;\n})(overshoot);\n","var exponent = 3;\n\nexport var polyIn = (function custom(e) {\n  e = +e;\n\n  function polyIn(t) {\n    return Math.pow(t, e);\n  }\n\n  polyIn.exponent = custom;\n\n  return polyIn;\n})(exponent);\n\nexport var polyOut = (function custom(e) {\n  e = +e;\n\n  function polyOut(t) {\n    return 1 - Math.pow(1 - t, e);\n  }\n\n  polyOut.exponent = custom;\n\n  return polyOut;\n})(exponent);\n\nexport var polyInOut = (function custom(e) {\n  e = +e;\n\n  function polyInOut(t) {\n    return ((t *= 2) <= 1 ? Math.pow(t, e) : 2 - Math.pow(2 - t, e)) / 2;\n  }\n\n  polyInOut.exponent = custom;\n\n  return polyInOut;\n})(exponent);\n","export default function(x) {\n  return function() {\n    return x;\n  };\n}\n","export function x(d) {\n  return d[0];\n}\n\nexport function y(d) {\n  return d[1];\n}\n","function RedBlackTree() {\n  this._ = null; // root node\n}\n\nexport function RedBlackNode(node) {\n  node.U = // parent node\n  node.C = // color - true for red, false for black\n  node.L = // left node\n  node.R = // right node\n  node.P = // previous node\n  node.N = null; // next node\n}\n\nRedBlackTree.prototype = {\n  constructor: RedBlackTree,\n\n  insert: function(after, node) {\n    var parent, grandpa, uncle;\n\n    if (after) {\n      node.P = after;\n      node.N = after.N;\n      if (after.N) after.N.P = node;\n      after.N = node;\n      if (after.R) {\n        after = after.R;\n        while (after.L) after = after.L;\n        after.L = node;\n      } else {\n        after.R = node;\n      }\n      parent = after;\n    } else if (this._) {\n      after = RedBlackFirst(this._);\n      node.P = null;\n      node.N = after;\n      after.P = after.L = node;\n      parent = after;\n    } else {\n      node.P = node.N = null;\n      this._ = node;\n      parent = null;\n    }\n    node.L = node.R = null;\n    node.U = parent;\n    node.C = true;\n\n    after = node;\n    while (parent && parent.C) {\n      grandpa = parent.U;\n      if (parent === grandpa.L) {\n        uncle = grandpa.R;\n        if (uncle && uncle.C) {\n          parent.C = uncle.C = false;\n          grandpa.C = true;\n          after = grandpa;\n        } else {\n          if (after === parent.R) {\n            RedBlackRotateLeft(this, parent);\n            after = parent;\n            parent = after.U;\n          }\n          parent.C = false;\n          grandpa.C = true;\n          RedBlackRotateRight(this, grandpa);\n        }\n      } else {\n        uncle = grandpa.L;\n        if (uncle && uncle.C) {\n          parent.C = uncle.C = false;\n          grandpa.C = true;\n          after = grandpa;\n        } else {\n          if (after === parent.L) {\n            RedBlackRotateRight(this, parent);\n            after = parent;\n            parent = after.U;\n          }\n          parent.C = false;\n          grandpa.C = true;\n          RedBlackRotateLeft(this, grandpa);\n        }\n      }\n      parent = after.U;\n    }\n    this._.C = false;\n  },\n\n  remove: function(node) {\n    if (node.N) node.N.P = node.P;\n    if (node.P) node.P.N = node.N;\n    node.N = node.P = null;\n\n    var parent = node.U,\n        sibling,\n        left = node.L,\n        right = node.R,\n        next,\n        red;\n\n    if (!left) next = right;\n    else if (!right) next = left;\n    else next = RedBlackFirst(right);\n\n    if (parent) {\n      if (parent.L === node) parent.L = next;\n      else parent.R = next;\n    } else {\n      this._ = next;\n    }\n\n    if (left && right) {\n      red = next.C;\n      next.C = node.C;\n      next.L = left;\n      left.U = next;\n      if (next !== right) {\n        parent = next.U;\n        next.U = node.U;\n        node = next.R;\n        parent.L = node;\n        next.R = right;\n        right.U = next;\n      } else {\n        next.U = parent;\n        parent = next;\n        node = next.R;\n      }\n    } else {\n      red = node.C;\n      node = next;\n    }\n\n    if (node) node.U = parent;\n    if (red) return;\n    if (node && node.C) { node.C = false; return; }\n\n    do {\n      if (node === this._) break;\n      if (node === parent.L) {\n        sibling = parent.R;\n        if (sibling.C) {\n          sibling.C = false;\n          parent.C = true;\n          RedBlackRotateLeft(this, parent);\n          sibling = parent.R;\n        }\n        if ((sibling.L && sibling.L.C)\n            || (sibling.R && sibling.R.C)) {\n          if (!sibling.R || !sibling.R.C) {\n            sibling.L.C = false;\n            sibling.C = true;\n            RedBlackRotateRight(this, sibling);\n            sibling = parent.R;\n          }\n          sibling.C = parent.C;\n          parent.C = sibling.R.C = false;\n          RedBlackRotateLeft(this, parent);\n          node = this._;\n          break;\n        }\n      } else {\n        sibling = parent.L;\n        if (sibling.C) {\n          sibling.C = false;\n          parent.C = true;\n          RedBlackRotateRight(this, parent);\n          sibling = parent.L;\n        }\n        if ((sibling.L && sibling.L.C)\n          || (sibling.R && sibling.R.C)) {\n          if (!sibling.L || !sibling.L.C) {\n            sibling.R.C = false;\n            sibling.C = true;\n            RedBlackRotateLeft(this, sibling);\n            sibling = parent.L;\n          }\n          sibling.C = parent.C;\n          parent.C = sibling.L.C = false;\n          RedBlackRotateRight(this, parent);\n          node = this._;\n          break;\n        }\n      }\n      sibling.C = true;\n      node = parent;\n      parent = parent.U;\n    } while (!node.C);\n\n    if (node) node.C = false;\n  }\n};\n\nfunction RedBlackRotateLeft(tree, node) {\n  var p = node,\n      q = node.R,\n      parent = p.U;\n\n  if (parent) {\n    if (parent.L === p) parent.L = q;\n    else parent.R = q;\n  } else {\n    tree._ = q;\n  }\n\n  q.U = parent;\n  p.U = q;\n  p.R = q.L;\n  if (p.R) p.R.U = p;\n  q.L = p;\n}\n\nfunction RedBlackRotateRight(tree, node) {\n  var p = node,\n      q = node.L,\n      parent = p.U;\n\n  if (parent) {\n    if (parent.L === p) parent.L = q;\n    else parent.R = q;\n  } else {\n    tree._ = q;\n  }\n\n  q.U = parent;\n  p.U = q;\n  p.L = q.R;\n  if (p.L) p.L.U = p;\n  q.R = p;\n}\n\nfunction RedBlackFirst(node) {\n  while (node.L) node = node.L;\n  return node;\n}\n\nexport default RedBlackTree;\n","import {cells, edges, epsilon} from \"./Diagram\";\n\nexport function createEdge(left, right, v0, v1) {\n  var edge = [null, null],\n      index = edges.push(edge) - 1;\n  edge.left = left;\n  edge.right = right;\n  if (v0) setEdgeEnd(edge, left, right, v0);\n  if (v1) setEdgeEnd(edge, right, left, v1);\n  cells[left.index].halfedges.push(index);\n  cells[right.index].halfedges.push(index);\n  return edge;\n}\n\nexport function createBorderEdge(left, v0, v1) {\n  var edge = [v0, v1];\n  edge.left = left;\n  return edge;\n}\n\nexport function setEdgeEnd(edge, left, right, vertex) {\n  if (!edge[0] && !edge[1]) {\n    edge[0] = vertex;\n    edge.left = left;\n    edge.right = right;\n  } else if (edge.left === right) {\n    edge[1] = vertex;\n  } else {\n    edge[0] = vertex;\n  }\n}\n\n// Liang–Barsky line clipping.\nfunction clipEdge(edge, x0, y0, x1, y1) {\n  var a = edge[0],\n      b = edge[1],\n      ax = a[0],\n      ay = a[1],\n      bx = b[0],\n      by = b[1],\n      t0 = 0,\n      t1 = 1,\n      dx = bx - ax,\n      dy = by - ay,\n      r;\n\n  r = x0 - ax;\n  if (!dx && r > 0) return;\n  r /= dx;\n  if (dx < 0) {\n    if (r < t0) return;\n    if (r < t1) t1 = r;\n  } else if (dx > 0) {\n    if (r > t1) return;\n    if (r > t0) t0 = r;\n  }\n\n  r = x1 - ax;\n  if (!dx && r < 0) return;\n  r /= dx;\n  if (dx < 0) {\n    if (r > t1) return;\n    if (r > t0) t0 = r;\n  } else if (dx > 0) {\n    if (r < t0) return;\n    if (r < t1) t1 = r;\n  }\n\n  r = y0 - ay;\n  if (!dy && r > 0) return;\n  r /= dy;\n  if (dy < 0) {\n    if (r < t0) return;\n    if (r < t1) t1 = r;\n  } else if (dy > 0) {\n    if (r > t1) return;\n    if (r > t0) t0 = r;\n  }\n\n  r = y1 - ay;\n  if (!dy && r < 0) return;\n  r /= dy;\n  if (dy < 0) {\n    if (r > t1) return;\n    if (r > t0) t0 = r;\n  } else if (dy > 0) {\n    if (r < t0) return;\n    if (r < t1) t1 = r;\n  }\n\n  if (!(t0 > 0) && !(t1 < 1)) return true; // TODO Better check?\n\n  if (t0 > 0) edge[0] = [ax + t0 * dx, ay + t0 * dy];\n  if (t1 < 1) edge[1] = [ax + t1 * dx, ay + t1 * dy];\n  return true;\n}\n\nfunction connectEdge(edge, x0, y0, x1, y1) {\n  var v1 = edge[1];\n  if (v1) return true;\n\n  var v0 = edge[0],\n      left = edge.left,\n      right = edge.right,\n      lx = left[0],\n      ly = left[1],\n      rx = right[0],\n      ry = right[1],\n      fx = (lx + rx) / 2,\n      fy = (ly + ry) / 2,\n      fm,\n      fb;\n\n  if (ry === ly) {\n    if (fx < x0 || fx >= x1) return;\n    if (lx > rx) {\n      if (!v0) v0 = [fx, y0];\n      else if (v0[1] >= y1) return;\n      v1 = [fx, y1];\n    } else {\n      if (!v0) v0 = [fx, y1];\n      else if (v0[1] < y0) return;\n      v1 = [fx, y0];\n    }\n  } else {\n    fm = (lx - rx) / (ry - ly);\n    fb = fy - fm * fx;\n    if (fm < -1 || fm > 1) {\n      if (lx > rx) {\n        if (!v0) v0 = [(y0 - fb) / fm, y0];\n        else if (v0[1] >= y1) return;\n        v1 = [(y1 - fb) / fm, y1];\n      } else {\n        if (!v0) v0 = [(y1 - fb) / fm, y1];\n        else if (v0[1] < y0) return;\n        v1 = [(y0 - fb) / fm, y0];\n      }\n    } else {\n      if (ly < ry) {\n        if (!v0) v0 = [x0, fm * x0 + fb];\n        else if (v0[0] >= x1) return;\n        v1 = [x1, fm * x1 + fb];\n      } else {\n        if (!v0) v0 = [x1, fm * x1 + fb];\n        else if (v0[0] < x0) return;\n        v1 = [x0, fm * x0 + fb];\n      }\n    }\n  }\n\n  edge[0] = v0;\n  edge[1] = v1;\n  return true;\n}\n\nexport function clipEdges(x0, y0, x1, y1) {\n  var i = edges.length,\n      edge;\n\n  while (i--) {\n    if (!connectEdge(edge = edges[i], x0, y0, x1, y1)\n        || !clipEdge(edge, x0, y0, x1, y1)\n        || !(Math.abs(edge[0][0] - edge[1][0]) > epsilon\n            || Math.abs(edge[0][1] - edge[1][1]) > epsilon)) {\n      delete edges[i];\n    }\n  }\n}\n","import {createBorderEdge} from \"./Edge\";\nimport {cells, edges, epsilon} from \"./Diagram\";\n\nexport function createCell(site) {\n  return cells[site.index] = {\n    site: site,\n    halfedges: []\n  };\n}\n\nfunction cellHalfedgeAngle(cell, edge) {\n  var site = cell.site,\n      va = edge.left,\n      vb = edge.right;\n  if (site === vb) vb = va, va = site;\n  if (vb) return Math.atan2(vb[1] - va[1], vb[0] - va[0]);\n  if (site === va) va = edge[1], vb = edge[0];\n  else va = edge[0], vb = edge[1];\n  return Math.atan2(va[0] - vb[0], vb[1] - va[1]);\n}\n\nexport function cellHalfedgeStart(cell, edge) {\n  return edge[+(edge.left !== cell.site)];\n}\n\nexport function cellHalfedgeEnd(cell, edge) {\n  return edge[+(edge.left === cell.site)];\n}\n\nexport function sortCellHalfedges() {\n  for (var i = 0, n = cells.length, cell, halfedges, j, m; i < n; ++i) {\n    if ((cell = cells[i]) && (m = (halfedges = cell.halfedges).length)) {\n      var index = new Array(m),\n          array = new Array(m);\n      for (j = 0; j < m; ++j) index[j] = j, array[j] = cellHalfedgeAngle(cell, edges[halfedges[j]]);\n      index.sort(function(i, j) { return array[j] - array[i]; });\n      for (j = 0; j < m; ++j) array[j] = halfedges[index[j]];\n      for (j = 0; j < m; ++j) halfedges[j] = array[j];\n    }\n  }\n}\n\nexport function clipCells(x0, y0, x1, y1) {\n  var nCells = cells.length,\n      iCell,\n      cell,\n      site,\n      iHalfedge,\n      halfedges,\n      nHalfedges,\n      start,\n      startX,\n      startY,\n      end,\n      endX,\n      endY,\n      cover = true;\n\n  for (iCell = 0; iCell < nCells; ++iCell) {\n    if (cell = cells[iCell]) {\n      site = cell.site;\n      halfedges = cell.halfedges;\n      iHalfedge = halfedges.length;\n\n      // Remove any dangling clipped edges.\n      while (iHalfedge--) {\n        if (!edges[halfedges[iHalfedge]]) {\n          halfedges.splice(iHalfedge, 1);\n        }\n      }\n\n      // Insert any border edges as necessary.\n      iHalfedge = 0, nHalfedges = halfedges.length;\n      while (iHalfedge < nHalfedges) {\n        end = cellHalfedgeEnd(cell, edges[halfedges[iHalfedge]]), endX = end[0], endY = end[1];\n        start = cellHalfedgeStart(cell, edges[halfedges[++iHalfedge % nHalfedges]]), startX = start[0], startY = start[1];\n        if (Math.abs(endX - startX) > epsilon || Math.abs(endY - startY) > epsilon) {\n          halfedges.splice(iHalfedge, 0, edges.push(createBorderEdge(site, end,\n              Math.abs(endX - x0) < epsilon && y1 - endY > epsilon ? [x0, Math.abs(startX - x0) < epsilon ? startY : y1]\n              : Math.abs(endY - y1) < epsilon && x1 - endX > epsilon ? [Math.abs(startY - y1) < epsilon ? startX : x1, y1]\n              : Math.abs(endX - x1) < epsilon && endY - y0 > epsilon ? [x1, Math.abs(startX - x1) < epsilon ? startY : y0]\n              : Math.abs(endY - y0) < epsilon && endX - x0 > epsilon ? [Math.abs(startY - y0) < epsilon ? startX : x0, y0]\n              : null)) - 1);\n          ++nHalfedges;\n        }\n      }\n\n      if (nHalfedges) cover = false;\n    }\n  }\n\n  // If there weren’t any edges, have the closest site cover the extent.\n  // It doesn’t matter which corner of the extent we measure!\n  if (cover) {\n    var dx, dy, d2, dc = Infinity;\n\n    for (iCell = 0, cover = null; iCell < nCells; ++iCell) {\n      if (cell = cells[iCell]) {\n        site = cell.site;\n        dx = site[0] - x0;\n        dy = site[1] - y0;\n        d2 = dx * dx + dy * dy;\n        if (d2 < dc) dc = d2, cover = cell;\n      }\n    }\n\n    if (cover) {\n      var v00 = [x0, y0], v01 = [x0, y1], v11 = [x1, y1], v10 = [x1, y0];\n      cover.halfedges.push(\n        edges.push(createBorderEdge(site = cover.site, v00, v01)) - 1,\n        edges.push(createBorderEdge(site, v01, v11)) - 1,\n        edges.push(createBorderEdge(site, v11, v10)) - 1,\n        edges.push(createBorderEdge(site, v10, v00)) - 1\n      );\n    }\n  }\n\n  // Lastly delete any cells with no edges; these were entirely clipped.\n  for (iCell = 0; iCell < nCells; ++iCell) {\n    if (cell = cells[iCell]) {\n      if (!cell.halfedges.length) {\n        delete cells[iCell];\n      }\n    }\n  }\n}\n","import {RedBlackNode} from \"./RedBlackTree\";\nimport {circles, epsilon2} from \"./Diagram\";\n\nvar circlePool = [];\n\nexport var firstCircle;\n\nfunction Circle() {\n  RedBlackNode(this);\n  this.x =\n  this.y =\n  this.arc =\n  this.site =\n  this.cy = null;\n}\n\nexport function attachCircle(arc) {\n  var lArc = arc.P,\n      rArc = arc.N;\n\n  if (!lArc || !rArc) return;\n\n  var lSite = lArc.site,\n      cSite = arc.site,\n      rSite = rArc.site;\n\n  if (lSite === rSite) return;\n\n  var bx = cSite[0],\n      by = cSite[1],\n      ax = lSite[0] - bx,\n      ay = lSite[1] - by,\n      cx = rSite[0] - bx,\n      cy = rSite[1] - by;\n\n  var d = 2 * (ax * cy - ay * cx);\n  if (d >= -epsilon2) return;\n\n  var ha = ax * ax + ay * ay,\n      hc = cx * cx + cy * cy,\n      x = (cy * ha - ay * hc) / d,\n      y = (ax * hc - cx * ha) / d;\n\n  var circle = circlePool.pop() || new Circle;\n  circle.arc = arc;\n  circle.site = cSite;\n  circle.x = x + bx;\n  circle.y = (circle.cy = y + by) + Math.sqrt(x * x + y * y); // y bottom\n\n  arc.circle = circle;\n\n  var before = null,\n      node = circles._;\n\n  while (node) {\n    if (circle.y < node.y || (circle.y === node.y && circle.x <= node.x)) {\n      if (node.L) node = node.L;\n      else { before = node.P; break; }\n    } else {\n      if (node.R) node = node.R;\n      else { before = node; break; }\n    }\n  }\n\n  circles.insert(before, circle);\n  if (!before) firstCircle = circle;\n}\n\nexport function detachCircle(arc) {\n  var circle = arc.circle;\n  if (circle) {\n    if (!circle.P) firstCircle = circle.N;\n    circles.remove(circle);\n    circlePool.push(circle);\n    RedBlackNode(circle);\n    arc.circle = null;\n  }\n}\n","import {RedBlackNode} from \"./RedBlackTree\";\nimport {createCell} from \"./Cell\";\nimport {attachCircle, detachCircle} from \"./Circle\";\nimport {createEdge, setEdgeEnd} from \"./Edge\";\nimport {beaches, epsilon} from \"./Diagram\";\n\nvar beachPool = [];\n\nfunction Beach() {\n  RedBlackNode(this);\n  this.edge =\n  this.site =\n  this.circle = null;\n}\n\nfunction createBeach(site) {\n  var beach = beachPool.pop() || new Beach;\n  beach.site = site;\n  return beach;\n}\n\nfunction detachBeach(beach) {\n  detachCircle(beach);\n  beaches.remove(beach);\n  beachPool.push(beach);\n  RedBlackNode(beach);\n}\n\nexport function removeBeach(beach) {\n  var circle = beach.circle,\n      x = circle.x,\n      y = circle.cy,\n      vertex = [x, y],\n      previous = beach.P,\n      next = beach.N,\n      disappearing = [beach];\n\n  detachBeach(beach);\n\n  var lArc = previous;\n  while (lArc.circle\n      && Math.abs(x - lArc.circle.x) < epsilon\n      && Math.abs(y - lArc.circle.cy) < epsilon) {\n    previous = lArc.P;\n    disappearing.unshift(lArc);\n    detachBeach(lArc);\n    lArc = previous;\n  }\n\n  disappearing.unshift(lArc);\n  detachCircle(lArc);\n\n  var rArc = next;\n  while (rArc.circle\n      && Math.abs(x - rArc.circle.x) < epsilon\n      && Math.abs(y - rArc.circle.cy) < epsilon) {\n    next = rArc.N;\n    disappearing.push(rArc);\n    detachBeach(rArc);\n    rArc = next;\n  }\n\n  disappearing.push(rArc);\n  detachCircle(rArc);\n\n  var nArcs = disappearing.length,\n      iArc;\n  for (iArc = 1; iArc < nArcs; ++iArc) {\n    rArc = disappearing[iArc];\n    lArc = disappearing[iArc - 1];\n    setEdgeEnd(rArc.edge, lArc.site, rArc.site, vertex);\n  }\n\n  lArc = disappearing[0];\n  rArc = disappearing[nArcs - 1];\n  rArc.edge = createEdge(lArc.site, rArc.site, null, vertex);\n\n  attachCircle(lArc);\n  attachCircle(rArc);\n}\n\nexport function addBeach(site) {\n  var x = site[0],\n      directrix = site[1],\n      lArc,\n      rArc,\n      dxl,\n      dxr,\n      node = beaches._;\n\n  while (node) {\n    dxl = leftBreakPoint(node, directrix) - x;\n    if (dxl > epsilon) node = node.L; else {\n      dxr = x - rightBreakPoint(node, directrix);\n      if (dxr > epsilon) {\n        if (!node.R) {\n          lArc = node;\n          break;\n        }\n        node = node.R;\n      } else {\n        if (dxl > -epsilon) {\n          lArc = node.P;\n          rArc = node;\n        } else if (dxr > -epsilon) {\n          lArc = node;\n          rArc = node.N;\n        } else {\n          lArc = rArc = node;\n        }\n        break;\n      }\n    }\n  }\n\n  createCell(site);\n  var newArc = createBeach(site);\n  beaches.insert(lArc, newArc);\n\n  if (!lArc && !rArc) return;\n\n  if (lArc === rArc) {\n    detachCircle(lArc);\n    rArc = createBeach(lArc.site);\n    beaches.insert(newArc, rArc);\n    newArc.edge = rArc.edge = createEdge(lArc.site, newArc.site);\n    attachCircle(lArc);\n    attachCircle(rArc);\n    return;\n  }\n\n  if (!rArc) { // && lArc\n    newArc.edge = createEdge(lArc.site, newArc.site);\n    return;\n  }\n\n  // else lArc !== rArc\n  detachCircle(lArc);\n  detachCircle(rArc);\n\n  var lSite = lArc.site,\n      ax = lSite[0],\n      ay = lSite[1],\n      bx = site[0] - ax,\n      by = site[1] - ay,\n      rSite = rArc.site,\n      cx = rSite[0] - ax,\n      cy = rSite[1] - ay,\n      d = 2 * (bx * cy - by * cx),\n      hb = bx * bx + by * by,\n      hc = cx * cx + cy * cy,\n      vertex = [(cy * hb - by * hc) / d + ax, (bx * hc - cx * hb) / d + ay];\n\n  setEdgeEnd(rArc.edge, lSite, rSite, vertex);\n  newArc.edge = createEdge(lSite, site, null, vertex);\n  rArc.edge = createEdge(site, rSite, null, vertex);\n  attachCircle(lArc);\n  attachCircle(rArc);\n}\n\nfunction leftBreakPoint(arc, directrix) {\n  var site = arc.site,\n      rfocx = site[0],\n      rfocy = site[1],\n      pby2 = rfocy - directrix;\n\n  if (!pby2) return rfocx;\n\n  var lArc = arc.P;\n  if (!lArc) return -Infinity;\n\n  site = lArc.site;\n  var lfocx = site[0],\n      lfocy = site[1],\n      plby2 = lfocy - directrix;\n\n  if (!plby2) return lfocx;\n\n  var hl = lfocx - rfocx,\n      aby2 = 1 / pby2 - 1 / plby2,\n      b = hl / plby2;\n\n  if (aby2) return (-b + Math.sqrt(b * b - 2 * aby2 * (hl * hl / (-2 * plby2) - lfocy + plby2 / 2 + rfocy - pby2 / 2))) / aby2 + rfocx;\n\n  return (rfocx + lfocx) / 2;\n}\n\nfunction rightBreakPoint(arc, directrix) {\n  var rArc = arc.N;\n  if (rArc) return leftBreakPoint(rArc, directrix);\n  var site = arc.site;\n  return site[1] === directrix ? site[0] : Infinity;\n}\n","import {addBeach, removeBeach} from \"./Beach\";\nimport {sortCellHalfedges, cellHalfedgeStart, clipCells} from \"./Cell\";\nimport {firstCircle} from \"./Circle\";\nimport {clipEdges} from \"./Edge\";\nimport RedBlackTree from \"./RedBlackTree\";\n\nexport var epsilon = 1e-6;\nexport var epsilon2 = 1e-12;\nexport var beaches;\nexport var cells;\nexport var circles;\nexport var edges;\n\nfunction triangleArea(a, b, c) {\n  return (a[0] - c[0]) * (b[1] - a[1]) - (a[0] - b[0]) * (c[1] - a[1]);\n}\n\nfunction lexicographic(a, b) {\n  return b[1] - a[1]\n      || b[0] - a[0];\n}\n\nexport default function Diagram(sites, extent) {\n  var site = sites.sort(lexicographic).pop(),\n      x,\n      y,\n      circle;\n\n  edges = [];\n  cells = new Array(sites.length);\n  beaches = new RedBlackTree;\n  circles = new RedBlackTree;\n\n  while (true) {\n    circle = firstCircle;\n    if (site && (!circle || site[1] < circle.y || (site[1] === circle.y && site[0] < circle.x))) {\n      if (site[0] !== x || site[1] !== y) {\n        addBeach(site);\n        x = site[0], y = site[1];\n      }\n      site = sites.pop();\n    } else if (circle) {\n      removeBeach(circle.arc);\n    } else {\n      break;\n    }\n  }\n\n  sortCellHalfedges();\n\n  if (extent) {\n    var x0 = +extent[0][0],\n        y0 = +extent[0][1],\n        x1 = +extent[1][0],\n        y1 = +extent[1][1];\n    clipEdges(x0, y0, x1, y1);\n    clipCells(x0, y0, x1, y1);\n  }\n\n  this.edges = edges;\n  this.cells = cells;\n\n  beaches =\n  circles =\n  edges =\n  cells = null;\n}\n\nDiagram.prototype = {\n  constructor: Diagram,\n\n  polygons: function() {\n    var edges = this.edges;\n\n    return this.cells.map(function(cell) {\n      var polygon = cell.halfedges.map(function(i) { return cellHalfedgeStart(cell, edges[i]); });\n      polygon.data = cell.site.data;\n      return polygon;\n    });\n  },\n\n  triangles: function() {\n    var triangles = [],\n        edges = this.edges;\n\n    this.cells.forEach(function(cell, i) {\n      if (!(m = (halfedges = cell.halfedges).length)) return;\n      var site = cell.site,\n          halfedges,\n          j = -1,\n          m,\n          s0,\n          e1 = edges[halfedges[m - 1]],\n          s1 = e1.left === site ? e1.right : e1.left;\n\n      while (++j < m) {\n        s0 = s1;\n        e1 = edges[halfedges[j]];\n        s1 = e1.left === site ? e1.right : e1.left;\n        if (s0 && s1 && i < s0.index && i < s1.index && triangleArea(site, s0, s1) < 0) {\n          triangles.push([site.data, s0.data, s1.data]);\n        }\n      }\n    });\n\n    return triangles;\n  },\n\n  links: function() {\n    return this.edges.filter(function(edge) {\n      return edge.right;\n    }).map(function(edge) {\n      return {\n        source: edge.left.data,\n        target: edge.right.data\n      };\n    });\n  },\n\n  find: function(x, y, radius) {\n    var that = this, i0, i1 = that._found || 0, n = that.cells.length, cell;\n\n    // Use the previously-found cell, or start with an arbitrary one.\n    while (!(cell = that.cells[i1])) if (++i1 >= n) return null;\n    var dx = x - cell.site[0], dy = y - cell.site[1], d2 = dx * dx + dy * dy;\n\n    // Traverse the half-edges to find a closer cell, if any.\n    do {\n      cell = that.cells[i0 = i1], i1 = null;\n      cell.halfedges.forEach(function(e) {\n        var edge = that.edges[e], v = edge.left;\n        if ((v === cell.site || !v) && !(v = edge.right)) return;\n        var vx = x - v[0], vy = y - v[1], v2 = vx * vx + vy * vy;\n        if (v2 < d2) d2 = v2, i1 = v.index;\n      });\n    } while (i1 !== null);\n\n    that._found = i0;\n\n    return radius == null || d2 <= radius * radius ? cell.site : null;\n  }\n}\n","import constant from \"./constant\";\nimport {x as pointX, y as pointY} from \"./point\";\nimport Diagram, {epsilon} from \"./Diagram\";\n\nexport default function() {\n  var x = pointX,\n      y = pointY,\n      extent = null;\n\n  function voronoi(data) {\n    return new Diagram(data.map(function(d, i) {\n      var s = [Math.round(x(d, i, data) / epsilon) * epsilon, Math.round(y(d, i, data) / epsilon) * epsilon];\n      s.index = i;\n      s.data = d;\n      return s;\n    }), extent);\n  }\n\n  voronoi.polygons = function(data) {\n    return voronoi(data).polygons();\n  };\n\n  voronoi.links = function(data) {\n    return voronoi(data).links();\n  };\n\n  voronoi.triangles = function(data) {\n    return voronoi(data).triangles();\n  };\n\n  voronoi.x = function(_) {\n    return arguments.length ? (x = typeof _ === \"function\" ? _ : constant(+_), voronoi) : x;\n  };\n\n  voronoi.y = function(_) {\n    return arguments.length ? (y = typeof _ === \"function\" ? _ : constant(+_), voronoi) : y;\n  };\n\n  voronoi.extent = function(_) {\n    return arguments.length ? (extent = _ == null ? null : [[+_[0][0], +_[0][1]], [+_[1][0], +_[1][1]]], voronoi) : extent && [[extent[0][0], extent[0][1]], [extent[1][0], extent[1][1]]];\n  };\n\n  voronoi.size = function(_) {\n    return arguments.length ? (extent = _ == null ? null : [[0, 0], [+_[0], +_[1]]], voronoi) : extent && [extent[1][0] - extent[0][0], extent[1][1] - extent[0][1]];\n  };\n\n  return voronoi;\n}\n","import { defaultValue } from '../common-utils';\n\nconst sortSelection = (dataObjects, updateData, sortFn) =>\n    (a, b) => {\n        const kA = a[0];\n        const kB = b[0];\n        return sortFn([a[0], dataObjects.get(kA), updateData.get(kA)], [kB, dataObjects.get(kB), updateData.get(kB)]);\n    };\n\n/**\n * This class represents a selection applied on a data array.\n *\n * @class Selection\n */\nclass Selection {\n    /**\n     * Creates an instance of Selection.\n     * @param {Array<DataObject>} data Array of DataObjects.\n     * @memberof Selection\n     */\n    constructor (idGetter) {\n        this._dataObjects = new Map();\n        this._updateData = new Map();\n        this._enterData = new Map();\n        this._exitData = new Map();\n        this._idGetter = idGetter;\n    }\n\n    /**\n     * This method is used to supply seed data to a selection.\n     *\n     * @param {Array} newData Seed data to create the enter selection.\n     * @param {Functon | undefined } idGetter This function is used to uniqely identify a data entry.\n     * @return {Selection} Modified selection.\n     * @memberof Selection\n     */\n    data (newData) {\n        const entryData = new Map();\n        const exitdata = new Map();\n        const tempMap = new Map();\n        const duplicateData = new Map();\n        const updatedData = this._updateData;\n        const idGetter = this._idGetter;\n\n        newData.forEach((...params) => {\n            const key = idGetter ? idGetter(...params) : params[1];\n            if (!tempMap.has(key)) {\n                tempMap.set(key, params[0]);\n            } else {\n                duplicateData.push(key, params[0]);\n            }\n        });\n\n        let val;\n        // prepare enter data\n        let entries = tempMap.entries();\n        while (val = entries.next().value) {\n            if (!updatedData.has(val[0])) {\n                entryData.set(val[0], val[1]);\n            } else {\n                updatedData.set(val[0], val[1]);\n            }\n        }\n        // prepare exit data\n        entries = updatedData.entries();\n        while (val = entries.next().value) {\n            if (!tempMap.has(val[0])) {\n                exitdata.set(val[0], val[1]);\n            }\n        }\n\n        // put duplicate data to exit list\n        entries = duplicateData.entries();\n        while (val = entries.next().value) {\n            exitdata.set(val[0], val[1]);\n        }\n\n        const newSelection = new Selection(this._idGetter);\n        newSelection._updateData = updatedData;\n        newSelection._dataObjects = this._dataObjects;\n        newSelection._enterData = entryData;\n        newSelection._exitData = exitdata;\n\n        return newSelection;\n    }\n\n    /**\n     * Applies the supplied callback to each data element\n     * and returns a new selection.\n     *\n     * @param {Function} callback Callback to execute on each item.\n     * @return {Selection} New selection with data created using callback.\n     * @memberof Selection\n     */\n    append (callback) {\n        let val;\n        const dataObjects = new Map();\n        const data = new Map();\n        const mode = defaultValue(this._mode, 'update');\n        const currentData = this[`_${mode}Data`];\n        const entries = currentData.entries();\n\n        while (val = entries.next().value) {\n            dataObjects.set(val[0], callback(val[1]));\n            data.set(val[0], val[1]);\n        }\n\n        const newSelection = new Selection(this._idGetter);\n        newSelection._updateData = data;\n        newSelection._dataObjects = dataObjects;\n\n        return newSelection;\n    }\n\n     /**\n     * This method returns an enter selection that\n     * allows or update operations.\n     *\n     * @return {Selection} Instance of enter selection.\n     * @memberof Selection\n     */\n    enter () {\n        this._mode = 'enter';\n        return this;\n    }\n\n    /**\n     * Returns a selection with exit data.\n     *\n     * @return {Selection} Instance of selection.\n     * @memberof Selection\n     */\n    exit () {\n        this._mode = 'exit';\n        return this;\n    }\n\n     /**\n     * This method merges the data of one selection with another.\n     *\n     * @param {Selection} selection Instance of selection.\n     * @return {Selection} Modified selection.\n     * @memberof Selection\n     */\n    merge (target) {\n        const mergedObjects = new Map();\n        const mergedData = new Map();\n        let val;\n        let entries;\n\n        // merge Object and data present in this selection\n        entries = this._updateData.entries();\n        while (val = entries.next().value) {\n            if (!this._exitData.has(val[0])) {\n                mergedData.set(val[0], val[1]);\n                mergedObjects.set(val[0], this._dataObjects.get(val[0]));\n            }\n        }\n\n        // merge object from target selection\n        entries = target._updateData.entries();\n        while (val = entries.next().value) {\n            if (!(mergedData.has(val[0]) || target._exitData.has(val[0]))) {\n                mergedData.set(val[0], val[1]);\n                mergedObjects.set(val[0], target._dataObjects.get(val[0]));\n            }\n        }\n\n        const newSelection = new Selection(this._idGetter);\n        newSelection._updateData = mergedData;\n        newSelection._dataObjects = mergedObjects;\n\n        return newSelection;\n    }\n\n    each (fn) {\n        let val;\n        const entries = this._dataObjects.entries();\n\n        while (val = entries.next().value) {\n            fn(val[1], this._updateData.get(val[0]), val[0]);\n        }\n    }\n\n    map (fn) {\n        const newdata = new Map();\n        let val;\n        const entries = this._dataObjects.entries();\n\n        while (val = entries.next().value) {\n            newdata.set(val[0], fn(val[1], this._updateData.get(val[0]), val[0]));\n        }\n        const newSelection = new Selection(this._idGetter);\n        newSelection._updateData = this._updateData;\n        newSelection._dataObjects = newdata;\n\n        return newSelection;\n    }\n\n    remove () {\n        const mode = defaultValue(this._mode, 'update');\n        const currentData = this[`_${mode}Data`];\n\n        currentData.clear();\n\n        return this;\n    }\n\n    sort (sortFn) {\n        const updateData = this._updateData;\n        const dataObjects = this._dataObjects;\n        const sortSel = sortSelection(dataObjects, updateData, sortFn);\n\n        this._updateData = new Map([...updateData.entries()].sort(sortSel));\n        this._dataObjects = new Map([...dataObjects.entries()].sort(sortSel));\n        return this;\n    }\n\n    /**\n     *  Gets the object bound to a class\n     *\n     * @return {Object} current data set bound to the class\n     * @memberof Selection\n     */\n    getObjects () {\n        let val;\n        const objects = [];\n        const dataObjects = this._dataObjects;\n        // select the data to create object\n        const mode = defaultValue(this._mode, 'update');\n        const currentData = this[`_${mode}Data`];\n        const entries = currentData.entries();\n\n        while (val = entries.next().value) {\n            if (dataObjects.has(val[0])) {\n                objects.push(dataObjects.get(val[0]));\n            }\n        }\n\n        return objects;\n    }\n}\n\nexport default Selection;\n","import Selection from './selection';\n/**\n * This function applies a selection operation on a data array.\n *\n * @export\n * @param {Array} [data=[]] The data array to be observed.\n * @return {Selection} Instance of a selection.\n */\nexport default function dataSelect (idFn) {\n    return new Selection(idFn);\n}\n\n","export const ORDER_ASCENDING = 'ascending';\nexport const ORDER_DESCENDING = 'descending';\nexport const ORDER_NONE = 'none';\nexport const OFFSET_DIVERGING = 'diverging';\nexport const OFFSET_NONE = 'none';\nexport const OFFSET_EXPAND = 'expand';\nexport const OFFSET_WIGGLE = 'wiggle';\n","/* global window, requestAnimationFrame, cancelAnimationFrame */\nimport { FieldType, DimensionSubtype, DateTimeFormatter, DM_DERIVATIVES, default as DataModel } from 'datamodel';\n\nimport {\n    axisLeft,\n    axisRight,\n    axisTop,\n    axisBottom\n} from 'd3-axis';\nimport {\n    symbolCircle,\n    symbolCross,\n    symbolDiamond,\n    symbolSquare,\n    symbolStar,\n    symbolWye,\n    symbolTriangle,\n    symbol,\n    stack as d3Stack,\n    stackOffsetDiverging,\n    stackOrderNone,\n    stackOrderAscending,\n    stackOrderDescending,\n    stackOffsetNone,\n    stackOffsetExpand,\n    stackOffsetWiggle,\n    pie,\n    arc,\n    line,\n    curveLinear,\n    curveStepAfter,\n    curveStepBefore,\n    curveStep,\n    curveCatmullRom,\n    area\n} from 'd3-shape';\nimport { scaleBand } from 'd3-scale';\nimport { nest } from 'd3-collection';\nimport {\n    interpolate,\n    interpolateRgb,\n    piecewise,\n    interpolateNumber,\n    interpolateHslLong\n} from 'd3-interpolate';\nimport {\n    easeCubic,\n    easeBounce,\n    easePoly,\n    easeBack,\n    easeCircle,\n    easeLinear,\n    easeElastic\n} from 'd3-ease';\nimport {\n    color,\n    rgb,\n    hsl\n} from 'd3-color';\nimport { voronoi } from 'd3-voronoi';\nimport { dataSelect } from './DataSystem';\nimport * as scales from './scales';\nimport { DATA_TYPE, SORT_ORDER_ASCENDING, SORT_ORDER_DESCENDING, ReservedFields } from './enums';\nimport * as STACK_CONFIG from './enums/stack-config';\n\nconst { CATEGORICAL, TEMPORAL } = DimensionSubtype;\nconst { STRING, FUNCTION } = DATA_TYPE;\nconst { InvalidAwareTypes } = DataModel;\nconst HTMLElement = window.HTMLElement;\n\nconst isSimpleObject = (obj) => {\n    let token;\n    if (typeof obj === 'object') {\n        if (obj === null) { return false; }\n        token = Object.prototype.toString.call(obj);\n        if (token === '[object Object]') {\n            return (obj.constructor.toString().match(/^function (.*)\\(\\)/m) || [])[1] === 'Object';\n        }\n    }\n    return false;\n};\n\n/**\n * Returns unique id\n * @return {string} Unique id string\n */\nconst\n    getUniqueId = () => `id-${new Date().getTime()}${Math.round(Math.random() * 10000)}`;\n\n/**\n * Deep copies an object and returns a new object.\n * @param {Object} o Object to clone\n * @return {Object} New Object.\n */\nconst clone = (o) => {\n    const output = {};\n    let v;\n    for (const key in o) {\n        if ({}.hasOwnProperty.call(o, key)) {\n            v = o[key];\n            output[key] = isSimpleObject(v) ? clone(v) : v;\n        }\n    }\n    return output;\n};\n\n/**\n* Checks the existence of keys in an object\n* @param {Array} keys Set of keys which are to be checked\n* @param {Object} obj whose keys are checked from the set of keys provided\n* @return {Object} Error if the keys are absent, or the object itself\n*/\nconst checkExistence = (keys, obj) => {\n    const nonExistentKeys = [];\n    keys.forEach((key) => {\n        if (key in obj) {\n            return;\n        }\n        nonExistentKeys.push(key);\n    });\n    return nonExistentKeys;\n};\n\nconst sanitizeIP = {\n    typeObj: (keys, obj) => {\n        if (typeof obj !== 'object') {\n            return Error('Argument type object expected');\n        }\n\n        const nonExistentKeys = checkExistence(keys, obj);\n        if (nonExistentKeys.length) {\n            return Error(`Missing keys from parameter ${nonExistentKeys.join(', ')}`);\n        }\n        return obj;\n    },\n\n    /* istanbul ignore next */ htmlElem: (elem) => {\n        if (!(elem instanceof HTMLElement)) {\n            return Error('HTMLElement required');\n        }\n        return elem;\n    }\n};\n\n/**\n * Gets the maximum value from an array of objects for a given property name\n * @param  {Array.<Object>} data   Array of objects\n * @param  {string} field Field name\n * @return {number} Maximum value\n */\nconst getMax = (data, field) => Math.max(...data.map(d => d[field]));\n\n/**\n * Gets the minimum value from an array of objects for a given property name\n * @param  {Array.<Object>} data   Array of objects\n * @param  {string} field Field name\n * @return {number} Minimum value\n */\nconst getMin = (data, field) => Math.min(...data.map(d => d[field]));\n\n/**\n * Gets the domain from the data based on the field name and type of field\n * @param  {Array.<Object> | Array.<Array>} data       Data Array\n * @param  {Array.<string>} fields    Array of fields from where the domain will be calculated\n * @param {string} fieldType Type of field - nominal, quantitiative, temporal.\n * @return {Array} Usually contains a min and max value if field is quantitative or\n * an array of values if field type is nominal or ordinal\n */\nconst getDomainFromData = (data, fields, fieldType) => {\n    let domain;\n    const domArr = [];\n    data = data[0] instanceof Array ? data : [data];\n\n    switch (fieldType) {\n    case CATEGORICAL:\n        domain = [].concat(...data.map(arr => arr.map(d => d[fields[0]]).filter(d => d !== undefined)));\n        break;\n    default:\n        for (let i = 0, len = data.length; i < len; i++) {\n            const arr = data[i];\n            const [field0, field1] = fields;\n            const arr0 = arr.filter(d => !isNaN(d[field0]));\n            const arr1 = arr.filter(d => !isNaN(d[field1]));\n            if (arr0.length || arr1.length) {\n                const firstMin = getMin(arr0, field0);\n                const secondMin = getMin(arr1, field1);\n                const firstMax = getMax(arr0, field0);\n                const secondMax = getMax(arr1, field1);\n                domArr.push([Math.min(firstMin, secondMin), Math.max(firstMax, secondMax)]);\n            }\n        }\n        domain = domArr.length ? [Math.min(...domArr.map(d => d[0])), Math.max(...domArr.map(d => d[1]))] : [];\n        break;\n    }\n    return domain;\n};\n\nconst sanitizeDomainWhenEqual = (domain) => {\n    if (domain[0] === domain[1]) {\n        domain[0] = domain[0] > 0 ? 0 : domain[0];\n        domain[1] = domain[1] > 0 ? domain[1] : 0;\n    }\n    return domain;\n};\n\n/**\n * Union Domain values\n * @param {Array.<Array>} domains Array of domain values\n * @param {string} fieldType type of field - dimension,measure or datetime.\n * @return {Array} Unioned domain of all domain values.\n */\nconst unionDomain = (domains, fieldType) => {\n    let domain = [];\n    domains = domains.filter(dom => dom && dom.length);\n    if (domains.length) {\n        if (fieldType === CATEGORICAL) {\n            domain = [].concat(...domains);\n        } else {\n            domain = [Math.min(...domains.map(d => d[0])), Math.max(...domains.map(d => d[1]))];\n        }\n    }\n\n    return domain;\n};\n\nconst symbolFns = {\n    circle: symbolCircle,\n    cross: symbolCross,\n    diamond: symbolDiamond,\n    square: symbolSquare,\n    star: symbolStar,\n    wye: symbolWye,\n    triangle: symbolTriangle\n};\n\nconst easeFns = {\n    cubic: easeCubic,\n    bounce: easeBounce,\n    linear: easeLinear,\n    elastic: easeElastic,\n    back: easeBack,\n    poly: easePoly,\n    circle: easeCircle\n};\n\n/**\n * Returns the maximum or minimum points of a compare value from an array of objects.\n * @param {Array} points Array of objects\n * @param {string} compareValue Key in the object on which the comparing will be done.\n * @param {string} minOrMax minimum or maximum.\n * @return {Object} Minimum or maximum point.\n */\nconst getExtremePoint = (points, compareValue, minOrMax) => {\n    let extremePoint;\n    let point;\n    const len = points.length;\n    let minOrMaxVal = minOrMax === 'max' ? -Infinity : Infinity;\n    let val;\n\n    for (let i = 0; i < len; i++) {\n        point = points[i];\n        val = point[compareValue];\n        if (minOrMax === 'min' ? val < minOrMaxVal : val > minOrMaxVal) {\n            minOrMaxVal = val;\n            extremePoint = point;\n        }\n    }\n\n    return extremePoint;\n};\n\n/**\n * Returns the minimum point of a compare value from an array of objects.\n * @param {Array} points Array of objects\n * @param {string} compareValue Key in the object on which the comparing will be done.\n * @return {Object} Minimum point.\n */\nconst getMinPoint = (points, compareValue) => getExtremePoint(points, compareValue, 'min');\n\n/**\n * Returns the maximum point of a compare value from an array of objects.\n * @param {Array} points Array of objects\n * @param {string} compareValue Key in the object on which the comparing will be done.\n * @return {Object} Maximum point.\n */\nconst getMaxPoint = (points, compareValue) => getExtremePoint(points, compareValue, 'max');\n\n/**\n * Gets the index of the closest value of the given value from the array.\n * @param {Array} arr Array of values\n * @param {number} value Value from which the nearest value will be calculated.\n * @param {string} side side property.\n * @return {number} index of the closest value\n */\n/* istanbul ignore next */const getClosestIndexOf = (arr, value, side) => {\n    let low = 0;\n    const arrLen = arr.length;\n    let high = arrLen - 1;\n\n    let mid;\n    let d1;\n    let d2;\n\n    while (low < high) {\n        mid = Math.floor((low + high) / 2);\n        d1 = Math.abs(arr[mid] - value);\n        d2 = Math.abs(arr[mid + 1] - value);\n\n        if (d2 <= d1) {\n            low = mid + 1;\n        } else {\n            high = mid;\n        }\n    }\n\n    if (!side) {\n        return high;\n    }\n\n    const highVal = arr[high];\n    if (highVal === value) {\n        return high;\n    } else if (highVal > value) {\n        if (high === 0) { return high; }\n        return side === 'left' ? high - 1 : high;\n    }\n    if (high === arr.length - 1) { return high; }\n    return side === 'left' ? high : high + 1;\n};\n\nconst getNearestValue = (data, key) => {\n    const filterData = data.filter(d => typeof d === 'number');\n    return filterData[getClosestIndexOf(filterData, key)];\n};\n\n/**\n * Returns the browser window object\n * @return {Window} Window object\n*/\nconst getWindow = () => window;\n\n/**\n * Returns the browser window object\n * @return {Window} Window object\n*/\nconst reqAnimFrame = (() => requestAnimationFrame)();\n\nconst cancelAnimFrame = (() => cancelAnimationFrame)();\n\n/**\n * Capitalizes the first letter of the word\n * @param {string} text word\n * @return {string} Capitalized word\n */\nconst capitalizeFirst = (text) => {\n    text = text.toLowerCase();\n\n    return text.replace(/\\w\\S*/g, txt => txt.charAt(0).toUpperCase() + txt.substr(1));\n};\n\n/**\n *\n *\n * @param {*} arr\n */\nconst unique = (arr, fn = d => d) => {\n    const vals = arr.reduce((acc, v) => {\n        acc[fn(v)] = v;\n        return acc;\n    }, {});\n    return Object.values(vals);\n};\n\n/**\n * Gets the minimum difference between two consecutive numbers  in an array.\n * @param {Array} arr Array of numbers\n * @param {number} index index of the value\n * @return {number} minimum difference between values\n */\n/* istanbul ignore next */ const getMinDiff = (arr, index) => {\n    let diff;\n    let uniqueVals;\n    if (index !== undefined) {\n        uniqueVals = unique(arr.map(d => d[index]));\n    } else {\n        uniqueVals = unique(arr);\n    }\n    if (uniqueVals.length > 1) {\n        diff = Math.abs(uniqueVals[1] - uniqueVals[0]);\n        for (let i = 2, len = uniqueVals.length; i < len; i++) {\n            diff = Math.min(diff, Math.abs(uniqueVals[i] - uniqueVals[i - 1]));\n        }\n    } else {\n        diff = uniqueVals[0];\n    }\n\n    return diff;\n};\n\n/**\n * Returns the class name appended with a given id.\n * @param {string} cls class name\n * @param {string} id unique identifier\n * @param {string} prefix string needed to add before the classname\n * @return {string} qualified class name\n */\n/* istanbul ignore next */const getQualifiedClassName = (cls, id, prefix) => {\n    cls = cls.replace(/^\\.*/, '');\n    return [`${prefix}-${cls}`, `${prefix}-${cls}-${id}`];\n};\n\n/**\n * This method is used to set the default value for variables\n * without sullying the code with conditional statements.\n *\n * @export\n * @param {any} param The parameter to test.\n * @param {any} value The default value to assign.\n * @return {any} The value.\n */\n/* istanbul ignore next */ const defaultValue = (param, value) => {\n    if (typeof param === 'undefined' || (typeof param === 'object' && !param)) {\n        return value;\n    }\n    return param;\n};\n\n/**\n * DESCRIPTION TODO\n *\n * @export\n * @param {Object} graph graph whose dependency order has to be generated\n * @return {Object}\n */\nconst getDependencyOrder = (graph) => {\n    const dependencyOrder = [];\n    const visited = {};\n    const keys = Object.keys(graph);\n    /**\n     * DESCRIPTION TODO\n     *\n     * @export\n     * @param {Object} name\n     * @return {Object}\n     */\n    const visit = (name) => {\n        if (dependencyOrder.length === keys.length) {\n            return true;\n        }\n        visited[name] = true;\n        const edges = graph[name];\n        for (let e = 0; e < edges.length; e++) {\n            const dep = edges[e];\n            if (!visited[dep]) {\n                visit(dep);\n            }\n        }\n\n        dependencyOrder.push(name);\n        return false;\n    };\n\n    for (let i = 0; i < keys.length; i++) {\n        if (visit(keys[i], i)) break;\n    }\n\n    return dependencyOrder;\n};\n\n/**\n * Iterates over the properties of an object and applies the function\n *\n * @param {any} obj object to be iterated upon\n * @param {any} fn  function to be applied on it\n */\nconst objectIterator = (obj, fn) => {\n    for (const key in obj) {\n        if (Object.hasOwnProperty.call(obj, key)) {\n            fn(key, obj);\n        }\n    }\n};\n\n/**\n * This class creates a d3 voronoi for retrieving the nearest neighbour of any point from a set of two\n * dimensional points\n * @class Voronoi\n */\n/* istanbul ignore next */ class Voronoi {\n    /**\n     * Initialize the voronoi with the data given.\n     * @param {Array.<Object>} data Array of points.\n     */\n    constructor (data = []) {\n        this._voronoi = voronoi().x(d => d.x).y(d => d.y);\n        this.data(data);\n    }\n\n    /**\n     * Sets the data to voronoi\n     * @param {Array.<Object>} data Array of objects.\n     * @return {Voronoi} Instance of voronoi.\n     */\n    data (data) {\n        if (data) {\n            this._voronoiFn = this._voronoi(data);\n        }\n        return this;\n    }\n\n    /**\n     * Finds the closest point to the x and y position given.\n     * @param {number} x x value\n     * @param {number} y y value\n     * @param {number} radius search radius.\n     * @return {Object} Details of the nearest point.\n     */\n    find (x, y, radius) {\n        return this._voronoiFn.find(x, y, radius);\n    }\n}\n\nconst getObjProp = (obj, ...fields) => {\n    if (obj === undefined || obj === null) {\n        return obj;\n    }\n    let retObj = obj;\n    for (let i = 0, len = fields.length; i < len; i++) {\n        retObj = retObj[fields[i]];\n        if (retObj === undefined || retObj === null) {\n            break;\n        }\n    }\n    return retObj;\n};\n\n/**\n * Sanitize an input number / string mixed number. Currently dot in the no is not supported.\n *\n * @param {number | string} val pure number or string mixed number\n * @return {number | null}  Number if it can be extracted. Otherwise null\n */\nconst intSanitizer = (val) => {\n    const arr = val.toString().match(/(\\d+)(px)*/g);\n    if (!arr) {\n        // If only characters are passed\n        return null;\n    }\n\n    return parseInt(arr[0], 10);\n};\n\nconst generateGetterSetters = (context, props) => {\n    Object.entries(props).forEach((propInfo) => {\n        const prop = propInfo[0];\n        const { sanitization, preset, onset, typeChecker, defaultValue: defVal } = propInfo[1];\n        const prototype = context.constructor.prototype;\n        if (!(Object.hasOwnProperty.call(prototype, prop))) {\n            if (defVal) {\n                context[`_${prop}`] = defVal;\n            }\n            context[prop] = (...params) => {\n                if (params.length) {\n                    let value = params[0];\n                    if (sanitization) {\n                        value = sanitization(context, params[0], context[`_${prop}`]);\n                    }\n                    if (preset) {\n                        preset(context, value);\n                    }\n                    if (typeChecker && !typeChecker(value)) {\n                        return context[`_${prop}`];\n                    }\n                    context[`_${prop}`] = value;\n                    if (onset) {\n                        onset(context, value);\n                    }\n                    return context;\n                } return context[`_${prop}`];\n            };\n        }\n    });\n};\n\n/**\n *\n *\n * @param {*} arr\n * @param {*} prop\n */\nconst getArraySum = (arr, prop) => arr.reduce((total, elem) => {\n    total += prop ? elem[prop] : elem;\n    return total;\n}, 0);\n\n/**\n *\n *\n * @param {*} arr1\n * @param {*} arr2\n *\n */\nconst arraysEqual = (arr1, arr2) => {\n    if (arr1.length !== arr2.length) { return false; }\n    for (let i = arr1.length; i >= 0; i--) {\n        if (arr1[i] !== arr2[i]) { return false; }\n    }\n\n    return true;\n};\n\n/* eslint valid-typeof:0 */\n/**\n * Returns a validation function which can be used to validate variables against a type and value\n *\n * @param {any} type type of value that the object should have\n * @return {Object} validation function\n */\nconst isEqual = type => (oldVal, newVal) => {\n    if (type === 'Array') {\n        if (!oldVal) {\n            return false;\n        }\n        return arraysEqual(oldVal, newVal);\n    } else if (type === 'Object') {\n        return Object.is(oldVal, newVal);\n    } return oldVal === newVal;\n};\n\n/**\n * Description @todo\n *\n * @param {any} transactionModel @todo\n * @param {any} transactionEndpoint @todo\n * @param {any} transactionItems @todo\n * @return {any} @todo\n */\nconst enableChainedTransaction = (transactionModel, transactionEndpoint, transactionItems) =>\n    transactionItems.forEach(item => transactionModel\n        .registerImmediateListener(item, ([, newVal]) => transactionEndpoint[item](newVal)));\n\n/**\n * Chceks if the element is istanceof HTMLElement\n *\n * @param {Object} elem any JS Object\n */\nconst isHTMLElem = elem => elem instanceof HTMLElement;\n\nconst ERROR_MSG = {\n    INTERFACE_IMPL: 'Method not implemented'\n};\n\n/**\n * Merges the sink object in the source by recursively iterating through the object properties\n * @param {Object} source Source Object\n * @param {Object} sink Sink Object\n * @return {Object} Merged object\n */\nconst mergeRecursive = (source, sink) => {\n    for (const prop in sink) {\n        if (isSimpleObject(source[prop]) && isSimpleObject(sink[prop])) {\n            mergeRecursive(source[prop], sink[prop]);\n        } else if (sink[prop] instanceof Object && sink[prop].constructor === Object) {\n            source[prop] = {};\n            mergeRecursive(source[prop], sink[prop]);\n        } else {\n            source[prop] = sink[prop];\n        }\n    }\n    return source;\n};\n\n/**\n * Creates a selection set from a data set with corresponding attributes\n *\n * @export\n * @param {Selection} sel contains previous selection\n * @param {Object} appendObj Object to be appended\n * @param {Array} data Data based on which the selection is entered/updated/removed\n * @param {Object} [attrs={}] Attributes to be set on the data\n * @return {Selection} Merged selection\n */\nconst createSelection = (sel, appendObj, data, idFn) => {\n    let selection = sel || dataSelect(idFn);\n\n    selection = selection.data(data);\n\n    const enter = selection.enter().append(appendObj);\n    const mergedSelection = enter.merge(selection);\n\n    const exitSelection = selection.exit();\n    exitSelection.getObjects().forEach(inst => inst.remove());\n    exitSelection.remove();\n    return mergedSelection;\n};\n\nconst interpolateArray = (data, fitCount) => {\n    const linearInterpolate = function (before, after, atPoint) {\n        return before + (after - before) * atPoint;\n    };\n    const newData = [];\n    const springFactor = ((data.length - 1) / (fitCount - 1));\n    newData[0] = data[0]; // for new allocation\n    for (let i = 1; i < fitCount - 1; i++) {\n        const tmp = i * springFactor;\n        const before = (Math.floor(tmp)).toFixed();\n        const after = (Math.ceil(tmp)).toFixed();\n        const atPoint = tmp - before;\n        newData[i] = linearInterpolate(data[before], data[after], atPoint);\n    }\n    newData[fitCount - 1] = data[data.length - 1]; // for new allocation\n    return newData;\n};\n\n/**\n *\n *\n * @param {*} fn\n */\nconst nextFrame = (fn) => {\n    setTimeout(() => {\n        fn();\n    }, 0);\n};\n\n/**\n *\n *\n * @param {*} angle\n */\nconst angleToRadian = angle => angle * Math.PI / 180;\n\n/**\n *\n *\n * @param {*} newName\n * @param {*} oldName\n */\nconst replaceCSSPrefix = () => {\n    // @todo\n};\n\n/**\n * Gets the  interpolator function from d3 color\n *\n */\nconst interpolator = () => interpolate;\n\n/**\n * Gets the number interpolator from d3 color\n *\n */\nconst numberInterpolator = () => interpolateNumber;\n\n/**\n * Gets the rgb interpolator from d3 color\n *\n */\nconst colorInterpolator = () => interpolateRgb;\n\n/**\n * Gets the hsl interpolator from d3 color\n *\n */\nconst hslInterpolator = () => interpolateHslLong;\n\nconst transformColors = () => ({\n    color,\n    rgb,\n    hsl\n});\n\n/**\n * Gets the piecewise interpolator from d3 color\n *\n */\nconst piecewiseInterpolator = () => piecewise;\n\nfunction hue2rgb (p, q, t) {\n    if (t < 0) t += 1;\n    if (t > 1) t -= 1;\n    if (t < 1 / 6) return p + (q - p) * 6 * t;\n    if (t < 1 / 2) return q;\n    if (t < 2 / 3) return p + (q - p) * (2 / 3 - t) * 6;\n    return p;\n}\n\n/**\n * Converts an HSL color value to RGB. Conversion formula\n * adapted from http://en.wikipedia.org/wiki/HSL_color_space.\n * Assumes h, s, and l are contained in the set [0, 1] and\n * returns r, g, and b in the set [0, 255].\n *\n * @param   Number  h       The hue\n * @param   Number  s       The saturation\n * @param   Number  l       The lightness\n * @return  Array           The RGB representation\n */\nconst hslToRgb = (h, s, l, a = 1) => {\n    let r;\n    let g;\n    let b;\n\n    if (s === 0) {\n        r = g = b = l; // achromatic\n    } else {\n        const q = l < 0.5 ? l * (1 + s) : l + s - l * s;\n        const p = 2 * l - q;\n\n        r = hue2rgb(p, q, h + 1 / 3);\n        g = hue2rgb(p, q, h);\n        b = hue2rgb(p, q, h - 1 / 3);\n    }\n\n    return [r * 255, g * 255, b * 255, a];\n};\n\n/**\n * Converts an RGB color value to HSV. Conversion formula\n * adapted from http://en.wikipedia.org/wiki/HSV_color_space.\n * Assumes r, g, and b are contained in the set [0, 255] and\n * returns h, s, and v in the set [0, 1].\n *\n * @param   Number  r       The red color value\n * @param   Number  g       The green color value\n * @param   Number  b       The blue color value\n * @return  Array           The HSV representation\n */\nconst rgbToHsv = (r, g, b, a = 1) => {\n    r = +r; g = +g; b = +b; a = +a;\n    r /= 255; g /= 255; b /= 255;\n    const max = Math.max(r, g, b);\n    const min = Math.min(r, g, b);\n    let h;\n    let s;\n    const l = (max + min) / 2;\n\n    if (max === min) {\n        h = s = 0; // achromatic\n    } else {\n        const d = max - min;\n        s = l > 0.5 ? d / (2 - max - min) : d / (max + min);\n        switch (max) {\n        case r: h = (g - b) / d + (g < b ? 6 : 0); break;\n        case g: h = (b - r) / d + 2; break;\n        case b: h = (r - g) / d + 4; break;\n        default: break;\n        }\n        h /= 6;\n    }\n    return [h, s, l, a];\n};\n\n/**\n * Converts an HSV color value to RGB. Conversion formula\n * adapted from http://en.wikipedia.org/wiki/HSV_color_space.\n * Assumes h, s, and v are contained in the set [0, 1] and\n * returns r, g, and b in the set [0, 255].\n *\n * @param   Number  h       The hue\n * @param   Number  s       The saturation\n * @param   Number  v       The value\n * @return  Array           The RGB representation\n */\nconst hsvToRgb = (h, s, v, a = 1) => {\n    let r;\n    let g;\n    let b;\n\n    const i = Math.floor(h * 6);\n    const f = h * 6 - i;\n    const p = v * (1 - s);\n    const q = v * (1 - f * s);\n    const t = v * (1 - (1 - f) * s);\n\n    switch (i % 6) {\n    case 0: r = v; g = t; b = p; break;\n    case 1: r = q; g = v; b = p; break;\n    case 2: r = p; g = v; b = t; break;\n    case 3: r = p; g = q; b = v; break;\n    case 4: r = t; g = p; b = v; break;\n    case 5: r = v; g = p; b = q; break;\n    default: break;\n    }\n\n    return [r * 255, g * 255, b * 255, a];\n};\n\nconst hexToHsv = (hex) => {\n    const shorthandRegex = /^#?([a-f\\d])([a-f\\d])([a-f\\d])$/i;\n    hex = hex.replace(shorthandRegex, (m, r, g, b) => r + r + g + g + b + b);\n\n    const result = /^#?([a-f\\d]{2})([a-f\\d]{2})([a-f\\d]{2})$/i.exec(hex);\n    return result ? rgbToHsv(parseInt(result[1], 16), parseInt(result[2], 16), parseInt(result[3], 16)) : '';\n};\n\nconst RGBAtoRGB = (r, g, b, a, r2 = 255, g2 = 255, b2 = 255) => {\n    const r3 = Math.round(((1 - a) * r2) + (a * r));\n    const g3 = Math.round(((1 - a) * g2) + (a * g));\n    const b3 = Math.round(((1 - a) * b2) + (a * b));\n    return `rgb(${r3},${g3},${b3})`;\n};\n\nconst hslaToRgb = (h, s, l, a) => {\n    const [r, g, b, a1] = hslToRgb(h, s, l, a);\n    return RGBAtoRGB(r, g, b, a1);\n};\n\nconst detectColor = (col) => {\n    const matchRgb = /rgb\\((\\d{1,3}), (\\d{1,3}), (\\d{1,3})\\)/;\n    const matchHsl = /hsl\\((\\d+),\\s*([\\d.]+)%,\\s*([\\d.]+)%\\)/g;\n\n    // Source :  https://gist.github.com/sethlopezme/d072b945969a3cc2cc11\n    // eslint-disable-next-line\n    const matchRgba = /rgba?\\(((25[0-5]|2[0-4]\\d|1\\d{1,2}|\\d\\d?)\\s*,\\s*?){2}(25[0-5]|2[0-4]\\d|1\\d{1,2}|\\d\\d?)\\s*,?\\s*([01]\\.?\\d*?)?\\)/;\n    // eslint-disable-next-line\n    const matchHsla = /^hsla\\(([\\d.]+),\\s*([\\d.]+)%,\\s*([\\d.]+)%,\\s*(\\d*(?:\\.\\d+)?)\\)$/;\n    const matchHex = /^#([0-9a-f]{3}){1,2}$/i;\n\n    if (matchRgb.test(col) || matchRgba.test(col)) {\n        return 'rgb';\n    } else if (matchHsl.test(col) || matchHsla.test(col)) {\n        return 'hsl';\n    } else if (matchHex.test(col)) {\n        return 'hex';\n    } return col;\n};\n\nfunction RGBAToHexA (rgba) {\n    const sep = rgba.indexOf(',') > -1 ? ',' : ' ';\n    rgba = rgba.substr(5).split(')')[0].split(sep);\n\n  // Strip the slash if using space-separated syntax\n    if (rgba.indexOf('/') > -1) { rgba.splice(3, 1); }\n\n    for (const R in rgba) {\n        const r = rgba[R];\n        if (r.indexOf('%') > -1) {\n            const p = r.substr(0, r.length - 1) / 100;\n\n            if (R < 3) {\n                rgba[R] = Math.round(p * 255);\n            } else {\n                rgba[R] = p;\n            }\n        }\n    }\n\n    let r = (+rgba[0]).toString(16);\n    let g = (+rgba[1]).toString(16);\n    let b = (+rgba[2]).toString(16);\n    let a = Math.round(+rgba[3] * 255).toString(16);\n\n    if (r.length === 1) { r = `0${r}`; }\n    if (g.length === 1) { g = `0${g}`; }\n    if (b.length === 1) { b = `0${b}`; }\n    if (a.length === 1) { a = `0${a}`; }\n\n    return `#${r}${g}${b}${a}`;\n}\n\nconst transformToHex = (datumStyle, colorType) => {\n    if (colorType === 'rgb') {\n        const [r, g, b, a] = datumStyle.replace(/[^\\d,]/g, '').split(',');\n        const aa = a || 1;\n\n        const rgbaString = `rgba(${r}, ${g}, ${b}, ${aa})`;\n        return RGBAToHexA(rgbaString);\n    }\n    // Add methods to handle hsl and hex conversion\n    return null;\n};\n\nconst assembleModelFromIdentifiers = (model, identifiers) => {\n    let schema = [];\n    let data;\n    const fieldMap = model.getFieldsConfig();\n    if (identifiers.length) {\n        const fields = identifiers[0];\n        const len = fields.length;\n        for (let i = 0; i < len; i++) {\n            const field = fields[i];\n            const fieldObj = fieldMap[field] && Object.assign({}, fieldMap[field].def);\n            if (fieldObj) {\n                schema.push(Object.assign(fieldObj));\n            }\n        }\n\n        data = [];\n        const header = identifiers[0];\n        for (let i = 1; i < identifiers.length; i += 1) {\n            const vals = identifiers[i];\n            const temp = {};\n            vals.forEach((fieldVal, cIdx) => {\n                temp[header[cIdx]] = fieldVal;\n            });\n            data.push(temp);\n        }\n    } else {\n        data = [];\n        schema = [];\n    }\n\n    return new model.constructor(data, schema);\n};\n\n/**\n *\n *\n * @param {*} dataModel\n * @param {*} criteria\n *\n */\nconst getDataModelFromRange = (dataModel, criteria, mode, criteriaFields) => {\n    if (criteria === null) return null;\n    const fieldsConfig = dataModel.getFieldsConfig();\n    const selFields = criteriaFields || Object.keys(criteria).filter(d => d in fieldsConfig);\n    const selFn = fields => selFields.every((field) => {\n        const fieldValue = fields[field].internalValue;\n        const range = criteria[field][0] instanceof Array ? criteria[field][0] : criteria[field];\n\n        if (typeof range[0] === STRING) {\n            return range.find(d => d === fieldValue) !== undefined;\n        }\n\n        if (range) {\n            // Check if the selected bar value lies insid e the selection box\n            return fieldValue >= range[0] && fieldValue <= range[1];\n        }\n\n        return false;\n    });\n\n    return dataModel.select(selFn, {\n        saveChild: false,\n        mode\n    });\n};\n\nconst getArrayIndexMap = arr => arr.reduce((acc, value, i) => {\n    acc[value] = i;\n    return acc;\n}, {});\n/**\n *\n *\n * @param {*} dataModel\n * @param {*} identifiers\n *\n */\nconst getDataModelFromIdentifiers = (dataModel, identifiers, mode, hasBarLayer) => {\n    let filteredDataModel;\n    if (identifiers instanceof Array) {\n        const fieldsConfig = dataModel.getFieldsConfig();\n\n        const dataArr = identifiers.slice(1, identifiers.length);\n        if (identifiers instanceof Function) {\n            filteredDataModel = identifiers(dataModel, {}, false);\n        } else if (identifiers instanceof Array && identifiers[0].length) {\n            const filteredSchema = identifiers[0].filter(d => d in fieldsConfig || d === ReservedFields.ROW_ID);\n            filteredDataModel = dataModel.select((fields, rowId) => {\n                let include = true;\n                filteredSchema.forEach((propField, idx) => {\n                    const value = propField === ReservedFields.ROW_ID ? rowId : fields[propField].internalValue;\n                    const index = dataArr.findIndex(d => d[idx] === value);\n                    include = include && index !== -1;\n                });\n                return include;\n            }, {\n                saveChild: false,\n                mode\n            });\n        } else {\n            filteredDataModel = dataModel.select(() => false, {\n                saveChild: false,\n                mode\n            });\n        }\n    } else {\n        filteredDataModel = getDataModelFromRange(dataModel, identifiers, mode, hasBarLayer);\n    }\n    return filteredDataModel;\n};\n\n/**\n *\n *\n * @param {*} context\n * @param {*} listenerMap\n */\nconst registerListeners = (context, listenerMap, ...params) => {\n    const propListenerMap = listenerMap(context, ...params);\n    for (const key in propListenerMap) {\n        if ({}.hasOwnProperty.call(propListenerMap, key)) {\n            const { namespace } = params[1];\n            let ns = null;\n            if (namespace) {\n                ns = namespace;\n            }\n            const mapObj = propListenerMap[key];\n            const propType = mapObj.type;\n            const props = mapObj.props;\n            const listenerFn = mapObj.listener;\n            context.store()[propType](props, listenerFn, false, {\n                namespace: ns\n            });\n        }\n    }\n};\n\nconst isValidValue = value => !isNaN(value) && value !== -Infinity && value !== Infinity;\n/**\n *\n *\n * @param {*} str\n *\n */\nconst escapeHTML = (str) => {\n    const htmlEscapes = {\n        '&': '&amp;',\n        '<': '&lt;',\n        '>': '&gt;',\n        '\"': '&quot;',\n        \"'\": '&#x27;',\n        '/': '&#x2F;'\n    };\n    const htmlEscaper = /[&<>\"'/]/g;\n    return (`${str}`).replace(htmlEscaper, match => htmlEscapes[match]);\n};\n\n/**\n *\n *\n * @param {*} arr\n */\nconst transposeArray = arr => arr[0].map((col, i) => arr.map(row => row[i]));\nconst toArray = arr => (arr instanceof Array ? arr : [arr]);\nconst extendsClass = (cls, extendsFrom, found) => {\n    if (!cls) {\n        return false;\n    }\n    const prototype = cls.prototype;\n    if (prototype instanceof extendsFrom) {\n        found = true;\n    } else {\n        found = extendsClass(prototype, extendsFrom, found);\n    }\n    return found;\n};\n\n/**\n *\n * @param {*} dm1\n * @param {*} dm2\n */\nconst concatModels = (dm1, dm2) => {\n    const dataObj1 = dm1.getData();\n    const dataObj2 = dm2.getData();\n    const data1 = dataObj1.data;\n    const data2 = dataObj2.data;\n    const schema1 = dataObj1.schema;\n    const schema2 = dataObj2.schema;\n    const tuples1 = {};\n    const tuples2 = {};\n    const commonTuples = {};\n    for (let i = 0; i < data1.length; i++) {\n        for (let ii = 0; ii < data2.length; ii++) {\n            const row1 = data1[i];\n            const row2 = data2[ii];\n            const dim1Values = row1.filter((d, idx) => schema1[idx].type === FieldType.DIMENSION);\n            const dim2Values = row2.filter((d, idx) => schema2[idx].type === FieldType.DIMENSION);\n            const allDimSame = dim1Values.every(value => dim2Values.indexOf(value) !== -1);\n            if (allDimSame) {\n                const key = dim1Values.join();\n                !commonTuples[key] && (commonTuples[key] = {});\n                row1.forEach((value, idx) => {\n                    commonTuples[key][schema1[idx].name] = value;\n                });\n                row2.forEach((value, idx) => {\n                    commonTuples[key][schema2[idx].name] = value;\n                });\n            } else {\n                const dm1Key = dim1Values.join();\n                const dm2Key = dim2Values.join();\n                if (!commonTuples[dm1Key]) {\n                    !commonTuples[dm1Key] && (commonTuples[dm1Key] = {});\n                    row1.forEach((value, idx) => {\n                        commonTuples[dm1Key][schema1[idx].name] = value;\n                    });\n                }\n                if (!commonTuples[dm2Key]) {\n                    !commonTuples[dm2Key] && (commonTuples[dm2Key] = {});\n                    row2.forEach((value, idx) => {\n                        commonTuples[dm2Key][schema2[idx].name] = value;\n                    });\n                }\n            }\n        }\n    }\n\n    const commonSchema = [...schema1, ...schema2.filter(s2 => schema1.findIndex(s1 => s1.name === s2.name) === -1)];\n    const data = [...Object.values(tuples1), ...Object.values(tuples2), ...Object.values(commonTuples)];\n    return [data, commonSchema];\n};\n\nconst getSymbol = type => symbol().type(symbolFns[type]);\n\nconst stackOrders = {\n    [STACK_CONFIG.ORDER_NONE]: stackOrderNone,\n    [STACK_CONFIG.ORDER_ASCENDING]: stackOrderAscending,\n    [STACK_CONFIG.ORDER_DESCENDING]: stackOrderDescending\n};\nconst stackOffsets = {\n    [STACK_CONFIG.OFFSET_DIVERGING]: stackOffsetDiverging,\n    [STACK_CONFIG.OFFSET_NONE]: stackOffsetNone,\n    [STACK_CONFIG.OFFSET_EXPAND]: stackOffsetExpand,\n    [STACK_CONFIG.OFFSET_WIGGLE]: stackOffsetWiggle\n};\n\n// eslint-disable-next-line require-jsdoc\nconst stack = params => d3Stack().keys(params.keys).offset(stackOffsets[params.offset])\n    .order(stackOrders[params.order])(params.data);\n\n/**\n * Groups the data into a hierarchical tree structure based on one or more fields.\n * @param { Object } params Configuration properties for nesting data\n * @param { Array.<Array> } params.data Data which needs to be grouped\n * @param { Array.<number> } params.keys Field indices by which the data will be grouped\n * @return { Array.<Object> } Grouped data array\n */\nconst nestCollection = (params) => {\n    const nestFn = nest();\n    params.keys.forEach(key => nestFn.key(d => d[key]));\n    return nestFn.entries(params.data);\n};\n\n/**\n * Returns array difference, elements in array A, not in Array B\n * @param { Array.<number> } arr Data which needs to be grouped\n * @param { Array.<number> } arr1 Field indices by which the data will be grouped\n * @return { Array.<number> } Returns the array difference (A - B)\n */\nconst getArrayDiff = (arr, arr1) => arr.filter(el => arr1.indexOf(el) < 0);\n\nconst pathInterpolators = {\n    curveLinear,\n    curveStepAfter,\n    curveStepBefore,\n    curveStep,\n    curveCatmullRom,\n    stepAfter: curveStepAfter,\n    catmullRom: curveCatmullRom,\n    step: curveStep,\n    stepBefore: curveStepBefore,\n    linear: curveLinear\n};\n\nconst Symbols = {\n    axisLeft,\n    axisRight,\n    axisTop,\n    axisBottom,\n    line,\n    area,\n    pie,\n    arc,\n    nest\n};\n\nconst Scales = {\n    band: scaleBand\n};\n\nconst getSmallestDiff = (points) => {\n    points = points.sort((a, b) => a - b);\n    let minDiff = points[1] - points[0];\n    for (let i = 2; i < points.length; i++) {\n        minDiff = Math.min(minDiff, points[i] - points[i - 1]);\n    }\n\n    return minDiff;\n};\n\nconst timeFormats = {\n    millisecond: '%A, %b %e, %H:%M:%S.%L',\n    second: '%A, %b %e, %H:%M:%S',\n    minute: '%A, %b %e, %H:%M',\n    hour: '%A, %b %e, %H:%M',\n    day: '%A, %b %e, %Y',\n    month: '%B %Y',\n    year: '%Y'\n};\n\nconst timeDurations = [\n    ['millisecond', 'second', 'minute', 'hour', 'day', 'month', 'year'],\n    [1, 1000, 60000, 3600000, 86400000, 2592000000, 31536000000]\n];\n\nconst getNearestInterval = (interval) => {\n    const index = getClosestIndexOf(timeDurations[1], interval);\n    return timeDurations[0][index];\n};\n\nconst formatTemporal = (value, interval) => {\n    const nearestInterval = getNearestInterval(interval);\n    return DateTimeFormatter.formatAs(value, timeFormats[nearestInterval]);\n};\n\nconst temporalFields = (dataModel) => {\n    const filteredFields = {};\n    Object.entries(dataModel.getFieldspace().getDimension()).forEach(([fieldName, fieldObj]) => {\n        if (fieldObj.subtype() === TEMPORAL) {\n            filteredFields[fieldName] = fieldObj;\n        }\n    });\n    return filteredFields;\n};\n\nconst require = (lookupWhat, lookupDetails) => ({\n    resolvable: (store) => {\n        const lookupTarget = store[lookupWhat];\n        const depArr = lookupDetails.slice(0, lookupDetails.length - 1);\n        const fn = lookupDetails[lookupDetails.length - 1]; // fn\n\n        const deps = depArr.map(str => lookupTarget[str]);\n        return {\n            fn: fn(...deps),\n            depArr\n        };\n    }\n});\n\nconst nextAnimFrame = window.requestAnimationFrame || window.webkitRequestAnimationFrame ||\n    window.mozRequestAnimationFrame || window.oRequestAnimationFrame || window.msRequestAnimationFrame ||\n    function (callback) {\n        setTimeout(callback, 16);\n    };\n\nconst getValueParser = config => (val) => {\n    if (InvalidAwareTypes.getInvalidType(val)) {\n        return val in config ? config[val] : `${val}`;\n    }\n    return val;\n};\n\nconst retrieveNearestGroupByReducers = (dataModel, ...measureFieldNames) => {\n    const filteredReducers = {};\n    if (dataModel instanceof DataModel) {\n        const derivations = [...dataModel.getDerivations().reverse(), ...dataModel.getAncestorDerivations().reverse()];\n        const nearestReducers = defaultValue(\n            getObjProp(derivations.find(derv => derv.op === DM_DERIVATIVES.GROUPBY), 'criteria'), {});\n\n        const measures = dataModel.getFieldspace().getMeasure();\n        measureFieldNames = measureFieldNames.length ? measureFieldNames : Object.keys(measures);\n        measureFieldNames.forEach((measureName) => {\n            if (nearestReducers[measureName]) {\n                filteredReducers[measureName] = nearestReducers[measureName];\n            } else {\n                const measureField = measures[measureName];\n                if (measureField) {\n                    filteredReducers[measureName] = measureField.defAggFn();\n                }\n            }\n        });\n    }\n    return filteredReducers;\n};\n\nconst retrieveFieldDisplayName = (dm, fieldName) => dm.getFieldspace().fieldsObj()[fieldName].displayName();\n/**\n * Fetches the nearest sort operation details by traversing the chain of parent DataModels\n * @param {Object} dataModel Instance of DataModel\n *\n * @return {Array|null} sort criteria, null if no sort operation found\n */\nconst nearestSortingDetails = (dataModel) => {\n    const allDerivations = [...dataModel.getAncestorDerivations(), ...dataModel.getDerivations()];\n    const nearestSortDerivation = allDerivations.reverse().find(derivation => derivation.op === DM_DERIVATIVES.SORT);\n\n    return nearestSortDerivation ? nearestSortDerivation.criteria : null;\n};\n\nconst sortingOrder = (a, b) => {\n    const sortOrder = !(a instanceof InvalidAwareTypes || b instanceof InvalidAwareTypes)\n    ? a.localeCompare(b)\n    : 1;\n    return sortOrder;\n};\n\n/**\n * Map containing key, value sortingOrder pairs\n */\nconst sortOrderMap = {\n    [SORT_ORDER_ASCENDING]: (firstVal, secondVal) => sortingOrder(firstVal, secondVal),\n    [SORT_ORDER_DESCENDING]: (firstVal, secondVal) => sortingOrder(secondVal, firstVal)\n};\n\n/**\n * Sort categorical field based on it's sorting order\n * @param {string} sortOrder Order by which field is to be sorted (asc or desc or func)\n * @param {string} firstVal First sort parameter\n * @param {string} secondVal Second sort parameter\n * @return {number} position|null if sort order is invalid\n*/\nconst sortCategoricalField = (sortOrder, firstVal, secondVal) => {\n    const sortOrderType = typeof sortOrder;\n\n    if (sortOrderType === FUNCTION) {\n        return sortOrder(firstVal, secondVal);\n    } else if (sortOrderType === STRING) {\n        if (!sortOrderMap[sortOrder]) return null;\n        return sortOrderMap[sortOrder](firstVal, secondVal);\n    }\n    return null;\n};\n\nconst intersect = (arr1, arr2, accessors = [v => v, v => v]) => {\n    const [fn1, fn2] = accessors;\n    const set = new Set(arr2.map(v => fn2(v)));\n    return arr1.filter(value => set.has(fn1(value)));\n};\n\nconst difference = (arr1, arr2, accessors = [v => v, v => v]) => {\n    const [fn1, fn2] = accessors;\n    const set = new Set(arr2.map(v => fn2(v)));\n    return arr1.filter(value => !set.has(fn1(value)));\n};\n\nconst partition = (array, filterFn) => array.reduce((acc, v, i) => {\n    const pass = filterFn(v, i, array);\n\n    pass ? acc[0].push(v) : acc[1].push(v);\n    return acc;\n}, [[], []]);\n\nconst mix = superclass => ({\n    with: (...mixins) => mixins.reduce((cls, mixin) => mixin(cls), superclass)\n});\n\nconst componentRegistry = (comps) => {\n    const reg = Object.assign({}, comps);\n    const regObj = {\n        register: (def, customKey) => {\n            const key = customKey || def.formalName();\n\n            reg[key] = def;\n            return regObj;\n        },\n        get: () => reg\n    };\n\n    return regObj;\n};\n\nconst getReadableTicks = (domain, steps) => {\n    // scaling the axis based on steps provided\n    const orderedDomain = [Math.min(...domain), Math.max(...domain)];\n    if (steps < 3) {\n        return orderedDomain;\n    }\n\n    const tempScale = scales.scaleQuantize().domain(orderedDomain).nice();\n    let tempAxis = null;\n    let legendTicks = null;\n\n    tempAxis = Symbols.axisBottom().scale(tempScale);\n\n    legendTicks = tempAxis.scale().ticks(steps);\n\n    if (Math.max(...legendTicks) < orderedDomain[1]) {\n        // legendTicks.pop();\n        legendTicks.push(orderedDomain[1]);\n    }\n    if (Math.min(...legendTicks) > orderedDomain[0]) {\n        // legendTicks.shift();\n        legendTicks.unshift(orderedDomain[0]);\n    }\n    return legendTicks;\n};\n\nconst RGBAToHSLA = (r, g, b, a = 1) => {\n    // Make r, g, and b fractions of 1\n    r /= 255;\n    g /= 255;\n    b /= 255;\n\n    // Find greatest and smallest channel values\n    const cmin = Math.min(r, g, b);\n    const cmax = Math.max(r, g, b);\n    const delta = cmax - cmin;\n    let h = 0;\n    let s = 0;\n    let l = 0;\n\n    // Calculate hue\n    // No difference\n    if (delta === 0) {\n        h = 0;\n    } else if (cmax === r) {\n        // Red is max\n        h = ((g - b) / delta) % 6;\n    } else if (cmax === g) {\n        // Green is max\n        h = (b - r) / delta + 2;\n    } else {\n        // Blue is max\n        h = (r - g) / delta + 4;\n    }\n    h = Math.round(h * 60);\n\n    // Make negative hues positive behind 360°\n    if (h < 0) { h += 360; }\n    // Calculate lightness\n    l = (cmax + cmin) / 2;\n    // Calculate saturation\n    s = delta === 0 ? 0 : delta / (1 - Math.abs(2 * l - 1));\n    // Multiply l and s by 100\n    s = +(s * 100).toFixed(1);\n    l = +(l * 100).toFixed(1);\n\n    return {\n        color: `hsla(${h},${s}%,${l}%,${a})`,\n        code: [h, s, l, a]\n    };\n};\n\nconst transformColor = (rgbaValues, { h = 0, s = 0, l = 0, a }, datum, apply) => {\n    const [origH, origS, origL, origA] = RGBAToHSLA(...rgbaValues).code;\n    const sanitizedA = parseFloat(a || origA, 10);\n    const newH = origH + h;\n    const newS = origS + s;\n    const newL = origL + l;\n    let newA = sanitizedA + 1;\n\n    if (!apply) {\n        newA = sanitizedA - 1;\n    }\n\n    const finalcolor = {\n        color: `hsla(${newH},${newS}%,${newL}%,${newA})`,\n        hsla: [newH, newS, newL, newA]\n    };\n    return finalcolor;\n};\n\nconst pointWithinCircle = (c, point) => {\n    const { x: cx, y: cy, r } = c;\n    const { x, y } = point;\n\n    const dist = Math.sqrt((cx - x) ** 2 + (cy - y) ** 2);\n    return dist <= r;\n};\n\n/**\n * Generates a function which performs an intersection (dataModel select)\n * operation for multiple fields\n * @param {Array} targetData - Nested array with field and values in the format:\n * [\n *  [field1, field2]\n *  [val1, val2]\n * ]\n * @param {Object} dm - The dataModel instance\n * @return {Function} filter function\n */\nconst dmMultipleSelection = (targetData, dm) => {\n    const targetFields = targetData[0];\n    const targetVals = targetData.slice(1, targetData.length);\n    const payloadMap = targetVals.reduce((acc, v) => {\n        acc[v] = v;\n        return acc;\n    }, {});\n    const measures = Object.keys(dm.getFieldspace().getMeasure());\n\n    const filterFn = (fields, i) => {\n        const row = `${targetFields.map((field) => {\n            let val;\n            if (field === ReservedFields.MEASURE_NAMES) {\n                val = measures;\n            } else if (field === ReservedFields.ROW_ID) {\n                val = i;\n            } else {\n                const currentField = fields[field];\n                const isFieldInvalid = currentField instanceof InvalidAwareTypes;\n\n                val = isFieldInvalid ? currentField.value() : (currentField || {}).internalValue;\n            }\n            return val;\n        })}`;\n        return row in payloadMap;\n    };\n    return filterFn;\n};\n\nconst getIndexMap = (arr, prop) => arr.reduce((acc, v, i) => {\n    const key = prop ? v[prop] : v;\n    acc[key] = i;\n    return acc;\n}, {});\n\nexport {\n    getIndexMap,\n    arraysEqual,\n    componentRegistry,\n    mix,\n    partition,\n    getArrayIndexMap,\n    getValueParser,\n    require,\n    intersect,\n    difference,\n    Scales,\n    Symbols,\n    pathInterpolators,\n    stack,\n    nestCollection,\n    getArrayDiff,\n    getSymbol,\n    transformColor,\n    transformColors,\n    detectColor,\n    hexToHsv,\n    hslToRgb,\n    rgbToHsv,\n    transformToHex,\n    hsvToRgb,\n    hslaToRgb,\n    concatModels,\n    toArray,\n    angleToRadian,\n    escapeHTML,\n    generateGetterSetters,\n    getArraySum,\n    interpolator,\n    piecewiseInterpolator,\n    getDataModelFromIdentifiers,\n    getDataModelFromRange,\n    colorInterpolator,\n    numberInterpolator,\n    ERROR_MSG,\n    reqAnimFrame,\n    nextAnimFrame,\n    transposeArray,\n    cancelAnimFrame,\n    getMax,\n    getMin,\n    getDomainFromData,\n    getUniqueId,\n    mergeRecursive,\n    unionDomain,\n    symbolFns,\n    easeFns,\n    unique,\n    clone,\n    isEqual,\n    interpolateArray,\n    getMinPoint,\n    defaultValue,\n    getMaxPoint,\n    getClosestIndexOf,\n    Voronoi,\n    checkExistence,\n    sanitizeIP,\n    getMinDiff,\n    capitalizeFirst,\n    getWindow,\n    getQualifiedClassName,\n    getDependencyOrder,\n    objectIterator,\n    intSanitizer,\n    enableChainedTransaction,\n    isHTMLElem,\n    isSimpleObject,\n    nextFrame,\n    registerListeners,\n    replaceCSSPrefix,\n    getObjProp,\n    extendsClass,\n    assembleModelFromIdentifiers,\n    isValidValue,\n    hslInterpolator,\n    getSmallestDiff,\n    getNearestValue,\n    retrieveNearestGroupByReducers,\n    nearestSortingDetails,\n    createSelection,\n    formatTemporal,\n    temporalFields,\n    retrieveFieldDisplayName,\n    sanitizeDomainWhenEqual,\n    sortCategoricalField,\n    getReadableTicks,\n    dmMultipleSelection,\n    pointWithinCircle\n};\n","export function linear(t) {\n  return +t;\n}\n","export function circleIn(t) {\n  return 1 - Math.sqrt(1 - t * t);\n}\n\nexport function circleOut(t) {\n  return Math.sqrt(1 - --t * t);\n}\n\nexport function circleInOut(t) {\n  return ((t *= 2) <= 1 ? 1 - Math.sqrt(1 - t * t) : Math.sqrt(1 - (t -= 2) * t) + 1) / 2;\n}\n","import {path} from \"d3-path\";\nimport circle from \"./symbol/circle.js\";\nimport cross from \"./symbol/cross.js\";\nimport diamond from \"./symbol/diamond.js\";\nimport star from \"./symbol/star.js\";\nimport square from \"./symbol/square.js\";\nimport triangle from \"./symbol/triangle.js\";\nimport wye from \"./symbol/wye.js\";\nimport constant from \"./constant.js\";\n\nexport var symbols = [\n  circle,\n  cross,\n  diamond,\n  square,\n  star,\n  triangle,\n  wye\n];\n\nexport default function() {\n  var type = constant(circle),\n      size = constant(64),\n      context = null;\n\n  function symbol() {\n    var buffer;\n    if (!context) context = buffer = path();\n    type.apply(this, arguments).draw(context, +size.apply(this, arguments));\n    if (buffer) return context = null, buffer + \"\" || null;\n  }\n\n  symbol.type = function(_) {\n    return arguments.length ? (type = typeof _ === \"function\" ? _ : constant(_), symbol) : type;\n  };\n\n  symbol.size = function(_) {\n    return arguments.length ? (size = typeof _ === \"function\" ? _ : constant(+_), symbol) : size;\n  };\n\n  symbol.context = function(_) {\n    return arguments.length ? (context = _ == null ? null : _, symbol) : context;\n  };\n\n  return symbol;\n}\n","export default function(series, order) {\n  if (!((n = series.length) > 0)) return;\n  for (var i, j = 0, d, dy, yp, yn, n, m = series[order[0]].length; j < m; ++j) {\n    for (yp = yn = 0, i = 0; i < n; ++i) {\n      if ((dy = (d = series[order[i]][j])[1] - d[0]) > 0) {\n        d[0] = yp, d[1] = yp += dy;\n      } else if (dy < 0) {\n        d[1] = yn, d[0] = yn += dy;\n      } else {\n        d[0] = 0, d[1] = dy;\n      }\n    }\n  }\n}\n","import none from \"./none.js\";\n\nexport default function(series, order) {\n  if (!((n = series.length) > 0)) return;\n  for (var i, n, j = 0, m = series[0].length, y; j < m; ++j) {\n    for (y = i = 0; i < n; ++i) y += series[i][j][1] || 0;\n    if (y) for (i = 0; i < n; ++i) series[i][j][1] /= y;\n  }\n  none(series, order);\n}\n","import none from \"./none.js\";\n\nexport default function(series, order) {\n  if (!((n = series.length) > 0) || !((m = (s0 = series[order[0]]).length) > 0)) return;\n  for (var y = 0, j = 1, s0, m, n; j < m; ++j) {\n    for (var i = 0, s1 = 0, s2 = 0; i < n; ++i) {\n      var si = series[order[i]],\n          sij0 = si[j][1] || 0,\n          sij1 = si[j - 1][1] || 0,\n          s3 = (sij0 - sij1) / 2;\n      for (var k = 0; k < i; ++k) {\n        var sk = series[order[k]],\n            skj0 = sk[j][1] || 0,\n            skj1 = sk[j - 1][1] || 0;\n        s3 += skj0 - skj1;\n      }\n      s1 += sij0, s2 += s3 * sij0;\n    }\n    s0[j - 1][1] += s0[j - 1][0] = y;\n    if (s1) y -= s2 / s1;\n  }\n  s0[j - 1][1] += s0[j - 1][0] = y;\n  none(series, order);\n}\n","import {path} from \"d3-path\";\nimport constant from \"./constant.js\";\nimport curveLinear from \"./curve/linear.js\";\nimport line from \"./line.js\";\nimport {x as pointX, y as pointY} from \"./point.js\";\n\nexport default function() {\n  var x0 = pointX,\n      x1 = null,\n      y0 = constant(0),\n      y1 = pointY,\n      defined = constant(true),\n      context = null,\n      curve = curveLinear,\n      output = null;\n\n  function area(data) {\n    var i,\n        j,\n        k,\n        n = data.length,\n        d,\n        defined0 = false,\n        buffer,\n        x0z = new Array(n),\n        y0z = new Array(n);\n\n    if (context == null) output = curve(buffer = path());\n\n    for (i = 0; i <= n; ++i) {\n      if (!(i < n && defined(d = data[i], i, data)) === defined0) {\n        if (defined0 = !defined0) {\n          j = i;\n          output.areaStart();\n          output.lineStart();\n        } else {\n          output.lineEnd();\n          output.lineStart();\n          for (k = i - 1; k >= j; --k) {\n            output.point(x0z[k], y0z[k]);\n          }\n          output.lineEnd();\n          output.areaEnd();\n        }\n      }\n      if (defined0) {\n        x0z[i] = +x0(d, i, data), y0z[i] = +y0(d, i, data);\n        output.point(x1 ? +x1(d, i, data) : x0z[i], y1 ? +y1(d, i, data) : y0z[i]);\n      }\n    }\n\n    if (buffer) return output = null, buffer + \"\" || null;\n  }\n\n  function arealine() {\n    return line().defined(defined).curve(curve).context(context);\n  }\n\n  area.x = function(_) {\n    return arguments.length ? (x0 = typeof _ === \"function\" ? _ : constant(+_), x1 = null, area) : x0;\n  };\n\n  area.x0 = function(_) {\n    return arguments.length ? (x0 = typeof _ === \"function\" ? _ : constant(+_), area) : x0;\n  };\n\n  area.x1 = function(_) {\n    return arguments.length ? (x1 = _ == null ? null : typeof _ === \"function\" ? _ : constant(+_), area) : x1;\n  };\n\n  area.y = function(_) {\n    return arguments.length ? (y0 = typeof _ === \"function\" ? _ : constant(+_), y1 = null, area) : y0;\n  };\n\n  area.y0 = function(_) {\n    return arguments.length ? (y0 = typeof _ === \"function\" ? _ : constant(+_), area) : y0;\n  };\n\n  area.y1 = function(_) {\n    return arguments.length ? (y1 = _ == null ? null : typeof _ === \"function\" ? _ : constant(+_), area) : y1;\n  };\n\n  area.lineX0 =\n  area.lineY0 = function() {\n    return arealine().x(x0).y(y0);\n  };\n\n  area.lineY1 = function() {\n    return arealine().x(x0).y(y1);\n  };\n\n  area.lineX1 = function() {\n    return arealine().x(x1).y(y0);\n  };\n\n  area.defined = function(_) {\n    return arguments.length ? (defined = typeof _ === \"function\" ? _ : constant(!!_), area) : defined;\n  };\n\n  area.curve = function(_) {\n    return arguments.length ? (curve = _, context != null && (output = curve(context)), area) : curve;\n  };\n\n  area.context = function(_) {\n    return arguments.length ? (_ == null ? context = output = null : output = curve(context = _), area) : context;\n  };\n\n  return area;\n}\n","import constant from \"./constant.js\";\nimport descending from \"./descending.js\";\nimport identity from \"./identity.js\";\nimport {tau} from \"./math.js\";\n\nexport default function() {\n  var value = identity,\n      sortValues = descending,\n      sort = null,\n      startAngle = constant(0),\n      endAngle = constant(tau),\n      padAngle = constant(0);\n\n  function pie(data) {\n    var i,\n        n = data.length,\n        j,\n        k,\n        sum = 0,\n        index = new Array(n),\n        arcs = new Array(n),\n        a0 = +startAngle.apply(this, arguments),\n        da = Math.min(tau, Math.max(-tau, endAngle.apply(this, arguments) - a0)),\n        a1,\n        p = Math.min(Math.abs(da) / n, padAngle.apply(this, arguments)),\n        pa = p * (da < 0 ? -1 : 1),\n        v;\n\n    for (i = 0; i < n; ++i) {\n      if ((v = arcs[index[i] = i] = +value(data[i], i, data)) > 0) {\n        sum += v;\n      }\n    }\n\n    // Optionally sort the arcs by previously-computed values or by data.\n    if (sortValues != null) index.sort(function(i, j) { return sortValues(arcs[i], arcs[j]); });\n    else if (sort != null) index.sort(function(i, j) { return sort(data[i], data[j]); });\n\n    // Compute the arcs! They are stored in the original data's order.\n    for (i = 0, k = sum ? (da - n * pa) / sum : 0; i < n; ++i, a0 = a1) {\n      j = index[i], v = arcs[j], a1 = a0 + (v > 0 ? v * k : 0) + pa, arcs[j] = {\n        data: data[j],\n        index: i,\n        value: v,\n        startAngle: a0,\n        endAngle: a1,\n        padAngle: p\n      };\n    }\n\n    return arcs;\n  }\n\n  pie.value = function(_) {\n    return arguments.length ? (value = typeof _ === \"function\" ? _ : constant(+_), pie) : value;\n  };\n\n  pie.sortValues = function(_) {\n    return arguments.length ? (sortValues = _, sort = null, pie) : sortValues;\n  };\n\n  pie.sort = function(_) {\n    return arguments.length ? (sort = _, sortValues = null, pie) : sort;\n  };\n\n  pie.startAngle = function(_) {\n    return arguments.length ? (startAngle = typeof _ === \"function\" ? _ : constant(+_), pie) : startAngle;\n  };\n\n  pie.endAngle = function(_) {\n    return arguments.length ? (endAngle = typeof _ === \"function\" ? _ : constant(+_), pie) : endAngle;\n  };\n\n  pie.padAngle = function(_) {\n    return arguments.length ? (padAngle = typeof _ === \"function\" ? _ : constant(+_), pie) : padAngle;\n  };\n\n  return pie;\n}\n","function none() {}\n\nexport default function(selector) {\n  return selector == null ? none : function() {\n    return this.querySelector(selector);\n  };\n}\n","function empty() {\n  return [];\n}\n\nexport default function(selector) {\n  return selector == null ? empty : function() {\n    return this.querySelectorAll(selector);\n  };\n}\n","export default function(selector) {\n  return function() {\n    return this.matches(selector);\n  };\n}\n","export default function(update) {\n  return new Array(update.length);\n}\n","import sparse from \"./sparse\";\nimport {Selection} from \"./index\";\n\nexport default function() {\n  return new Selection(this._enter || this._groups.map(sparse), this._parents);\n}\n\nexport function EnterNode(parent, datum) {\n  this.ownerDocument = parent.ownerDocument;\n  this.namespaceURI = parent.namespaceURI;\n  this._next = null;\n  this._parent = parent;\n  this.__data__ = datum;\n}\n\nEnterNode.prototype = {\n  constructor: EnterNode,\n  appendChild: function(child) { return this._parent.insertBefore(child, this._next); },\n  insertBefore: function(child, next) { return this._parent.insertBefore(child, next); },\n  querySelector: function(selector) { return this._parent.querySelector(selector); },\n  querySelectorAll: function(selector) { return this._parent.querySelectorAll(selector); }\n};\n","export default function(x) {\n  return function() {\n    return x;\n  };\n}\n","import {Selection} from \"./index\";\nimport {EnterNode} from \"./enter\";\nimport constant from \"../constant\";\n\nvar keyPrefix = \"$\"; // Protect against keys like “__proto__”.\n\nfunction bindIndex(parent, group, enter, update, exit, data) {\n  var i = 0,\n      node,\n      groupLength = group.length,\n      dataLength = data.length;\n\n  // Put any non-null nodes that fit into update.\n  // Put any null nodes into enter.\n  // Put any remaining data into enter.\n  for (; i < dataLength; ++i) {\n    if (node = group[i]) {\n      node.__data__ = data[i];\n      update[i] = node;\n    } else {\n      enter[i] = new EnterNode(parent, data[i]);\n    }\n  }\n\n  // Put any non-null nodes that don’t fit into exit.\n  for (; i < groupLength; ++i) {\n    if (node = group[i]) {\n      exit[i] = node;\n    }\n  }\n}\n\nfunction bindKey(parent, group, enter, update, exit, data, key) {\n  var i,\n      node,\n      nodeByKeyValue = {},\n      groupLength = group.length,\n      dataLength = data.length,\n      keyValues = new Array(groupLength),\n      keyValue;\n\n  // Compute the key for each node.\n  // If multiple nodes have the same key, the duplicates are added to exit.\n  for (i = 0; i < groupLength; ++i) {\n    if (node = group[i]) {\n      keyValues[i] = keyValue = keyPrefix + key.call(node, node.__data__, i, group);\n      if (keyValue in nodeByKeyValue) {\n        exit[i] = node;\n      } else {\n        nodeByKeyValue[keyValue] = node;\n      }\n    }\n  }\n\n  // Compute the key for each datum.\n  // If there a node associated with this key, join and add it to update.\n  // If there is not (or the key is a duplicate), add it to enter.\n  for (i = 0; i < dataLength; ++i) {\n    keyValue = keyPrefix + key.call(parent, data[i], i, data);\n    if (node = nodeByKeyValue[keyValue]) {\n      update[i] = node;\n      node.__data__ = data[i];\n      nodeByKeyValue[keyValue] = null;\n    } else {\n      enter[i] = new EnterNode(parent, data[i]);\n    }\n  }\n\n  // Add any remaining nodes that were not bound to data to exit.\n  for (i = 0; i < groupLength; ++i) {\n    if ((node = group[i]) && (nodeByKeyValue[keyValues[i]] === node)) {\n      exit[i] = node;\n    }\n  }\n}\n\nexport default function(value, key) {\n  if (!value) {\n    data = new Array(this.size()), j = -1;\n    this.each(function(d) { data[++j] = d; });\n    return data;\n  }\n\n  var bind = key ? bindKey : bindIndex,\n      parents = this._parents,\n      groups = this._groups;\n\n  if (typeof value !== \"function\") value = constant(value);\n\n  for (var m = groups.length, update = new Array(m), enter = new Array(m), exit = new Array(m), j = 0; j < m; ++j) {\n    var parent = parents[j],\n        group = groups[j],\n        groupLength = group.length,\n        data = value.call(parent, parent && parent.__data__, j, parents),\n        dataLength = data.length,\n        enterGroup = enter[j] = new Array(dataLength),\n        updateGroup = update[j] = new Array(dataLength),\n        exitGroup = exit[j] = new Array(groupLength);\n\n    bind(parent, group, enterGroup, updateGroup, exitGroup, data, key);\n\n    // Now connect the enter nodes to their following update node, such that\n    // appendChild can insert the materialized enter node before this node,\n    // rather than at the end of the parent node.\n    for (var i0 = 0, i1 = 0, previous, next; i0 < dataLength; ++i0) {\n      if (previous = enterGroup[i0]) {\n        if (i0 >= i1) i1 = i0 + 1;\n        while (!(next = updateGroup[i1]) && ++i1 < dataLength);\n        previous._next = next || null;\n      }\n    }\n  }\n\n  update = new Selection(update, parents);\n  update._enter = enter;\n  update._exit = exit;\n  return update;\n}\n","import {Selection} from \"./index\";\n\nexport default function(compare) {\n  if (!compare) compare = ascending;\n\n  function compareNode(a, b) {\n    return a && b ? compare(a.__data__, b.__data__) : !a - !b;\n  }\n\n  for (var groups = this._groups, m = groups.length, sortgroups = new Array(m), j = 0; j < m; ++j) {\n    for (var group = groups[j], n = group.length, sortgroup = sortgroups[j] = new Array(n), node, i = 0; i < n; ++i) {\n      if (node = group[i]) {\n        sortgroup[i] = node;\n      }\n    }\n    sortgroup.sort(compareNode);\n  }\n\n  return new Selection(sortgroups, this._parents).order();\n}\n\nfunction ascending(a, b) {\n  return a < b ? -1 : a > b ? 1 : a >= b ? 0 : NaN;\n}\n","export default function() {\n  var callback = arguments[0];\n  arguments[0] = this;\n  callback.apply(null, arguments);\n  return this;\n}\n","export var xhtml = \"http://www.w3.org/1999/xhtml\";\n\nexport default {\n  svg: \"http://www.w3.org/2000/svg\",\n  xhtml: xhtml,\n  xlink: \"http://www.w3.org/1999/xlink\",\n  xml: \"http://www.w3.org/XML/1998/namespace\",\n  xmlns: \"http://www.w3.org/2000/xmlns/\"\n};\n","import namespaces from \"./namespaces\";\n\nexport default function(name) {\n  var prefix = name += \"\", i = prefix.indexOf(\":\");\n  if (i >= 0 && (prefix = name.slice(0, i)) !== \"xmlns\") name = name.slice(i + 1);\n  return namespaces.hasOwnProperty(prefix) ? {space: namespaces[prefix], local: name} : name;\n}\n","import namespace from \"../namespace\";\n\nfunction attrRemove(name) {\n  return function() {\n    this.removeAttribute(name);\n  };\n}\n\nfunction attrRemoveNS(fullname) {\n  return function() {\n    this.removeAttributeNS(fullname.space, fullname.local);\n  };\n}\n\nfunction attrConstant(name, value) {\n  return function() {\n    this.setAttribute(name, value);\n  };\n}\n\nfunction attrConstantNS(fullname, value) {\n  return function() {\n    this.setAttributeNS(fullname.space, fullname.local, value);\n  };\n}\n\nfunction attrFunction(name, value) {\n  return function() {\n    var v = value.apply(this, arguments);\n    if (v == null) this.removeAttribute(name);\n    else this.setAttribute(name, v);\n  };\n}\n\nfunction attrFunctionNS(fullname, value) {\n  return function() {\n    var v = value.apply(this, arguments);\n    if (v == null) this.removeAttributeNS(fullname.space, fullname.local);\n    else this.setAttributeNS(fullname.space, fullname.local, v);\n  };\n}\n\nexport default function(name, value) {\n  var fullname = namespace(name);\n\n  if (arguments.length < 2) {\n    var node = this.node();\n    return fullname.local\n        ? node.getAttributeNS(fullname.space, fullname.local)\n        : node.getAttribute(fullname);\n  }\n\n  return this.each((value == null\n      ? (fullname.local ? attrRemoveNS : attrRemove) : (typeof value === \"function\"\n      ? (fullname.local ? attrFunctionNS : attrFunction)\n      : (fullname.local ? attrConstantNS : attrConstant)))(fullname, value));\n}\n","export default function(node) {\n  return (node.ownerDocument && node.ownerDocument.defaultView) // node is a Node\n      || (node.document && node) // node is a Window\n      || node.defaultView; // node is a Document\n}\n","import defaultView from \"../window\";\n\nfunction styleRemove(name) {\n  return function() {\n    this.style.removeProperty(name);\n  };\n}\n\nfunction styleConstant(name, value, priority) {\n  return function() {\n    this.style.setProperty(name, value, priority);\n  };\n}\n\nfunction styleFunction(name, value, priority) {\n  return function() {\n    var v = value.apply(this, arguments);\n    if (v == null) this.style.removeProperty(name);\n    else this.style.setProperty(name, v, priority);\n  };\n}\n\nexport default function(name, value, priority) {\n  return arguments.length > 1\n      ? this.each((value == null\n            ? styleRemove : typeof value === \"function\"\n            ? styleFunction\n            : styleConstant)(name, value, priority == null ? \"\" : priority))\n      : styleValue(this.node(), name);\n}\n\nexport function styleValue(node, name) {\n  return node.style.getPropertyValue(name)\n      || defaultView(node).getComputedStyle(node, null).getPropertyValue(name);\n}\n","function classArray(string) {\n  return string.trim().split(/^|\\s+/);\n}\n\nfunction classList(node) {\n  return node.classList || new ClassList(node);\n}\n\nfunction ClassList(node) {\n  this._node = node;\n  this._names = classArray(node.getAttribute(\"class\") || \"\");\n}\n\nClassList.prototype = {\n  add: function(name) {\n    var i = this._names.indexOf(name);\n    if (i < 0) {\n      this._names.push(name);\n      this._node.setAttribute(\"class\", this._names.join(\" \"));\n    }\n  },\n  remove: function(name) {\n    var i = this._names.indexOf(name);\n    if (i >= 0) {\n      this._names.splice(i, 1);\n      this._node.setAttribute(\"class\", this._names.join(\" \"));\n    }\n  },\n  contains: function(name) {\n    return this._names.indexOf(name) >= 0;\n  }\n};\n\nfunction classedAdd(node, names) {\n  var list = classList(node), i = -1, n = names.length;\n  while (++i < n) list.add(names[i]);\n}\n\nfunction classedRemove(node, names) {\n  var list = classList(node), i = -1, n = names.length;\n  while (++i < n) list.remove(names[i]);\n}\n\nfunction classedTrue(names) {\n  return function() {\n    classedAdd(this, names);\n  };\n}\n\nfunction classedFalse(names) {\n  return function() {\n    classedRemove(this, names);\n  };\n}\n\nfunction classedFunction(names, value) {\n  return function() {\n    (value.apply(this, arguments) ? classedAdd : classedRemove)(this, names);\n  };\n}\n\nexport default function(name, value) {\n  var names = classArray(name + \"\");\n\n  if (arguments.length < 2) {\n    var list = classList(this.node()), i = -1, n = names.length;\n    while (++i < n) if (!list.contains(names[i])) return false;\n    return true;\n  }\n\n  return this.each((typeof value === \"function\"\n      ? classedFunction : value\n      ? classedTrue\n      : classedFalse)(names, value));\n}\n","function textRemove() {\n  this.textContent = \"\";\n}\n\nfunction textConstant(value) {\n  return function() {\n    this.textContent = value;\n  };\n}\n\nfunction textFunction(value) {\n  return function() {\n    var v = value.apply(this, arguments);\n    this.textContent = v == null ? \"\" : v;\n  };\n}\n\nexport default function(value) {\n  return arguments.length\n      ? this.each(value == null\n          ? textRemove : (typeof value === \"function\"\n          ? textFunction\n          : textConstant)(value))\n      : this.node().textContent;\n}\n","function htmlRemove() {\n  this.innerHTML = \"\";\n}\n\nfunction htmlConstant(value) {\n  return function() {\n    this.innerHTML = value;\n  };\n}\n\nfunction htmlFunction(value) {\n  return function() {\n    var v = value.apply(this, arguments);\n    this.innerHTML = v == null ? \"\" : v;\n  };\n}\n\nexport default function(value) {\n  return arguments.length\n      ? this.each(value == null\n          ? htmlRemove : (typeof value === \"function\"\n          ? htmlFunction\n          : htmlConstant)(value))\n      : this.node().innerHTML;\n}\n","function raise() {\n  if (this.nextSibling) this.parentNode.appendChild(this);\n}\n\nexport default function() {\n  return this.each(raise);\n}\n","function lower() {\n  if (this.previousSibling) this.parentNode.insertBefore(this, this.parentNode.firstChild);\n}\n\nexport default function() {\n  return this.each(lower);\n}\n","import namespace from \"./namespace\";\nimport {xhtml} from \"./namespaces\";\n\nfunction creatorInherit(name) {\n  return function() {\n    var document = this.ownerDocument,\n        uri = this.namespaceURI;\n    return uri === xhtml && document.documentElement.namespaceURI === xhtml\n        ? document.createElement(name)\n        : document.createElementNS(uri, name);\n  };\n}\n\nfunction creatorFixed(fullname) {\n  return function() {\n    return this.ownerDocument.createElementNS(fullname.space, fullname.local);\n  };\n}\n\nexport default function(name) {\n  var fullname = namespace(name);\n  return (fullname.local\n      ? creatorFixed\n      : creatorInherit)(fullname);\n}\n","import creator from \"../creator\";\nimport selector from \"../selector\";\n\nfunction constantNull() {\n  return null;\n}\n\nexport default function(name, before) {\n  var create = typeof name === \"function\" ? name : creator(name),\n      select = before == null ? constantNull : typeof before === \"function\" ? before : selector(before);\n  return this.select(function() {\n    return this.insertBefore(create.apply(this, arguments), select.apply(this, arguments) || null);\n  });\n}\n","function remove() {\n  var parent = this.parentNode;\n  if (parent) parent.removeChild(this);\n}\n\nexport default function() {\n  return this.each(remove);\n}\n","function selection_cloneShallow() {\n  var clone = this.cloneNode(false), parent = this.parentNode;\n  return parent ? parent.insertBefore(clone, this.nextSibling) : clone;\n}\n\nfunction selection_cloneDeep() {\n  var clone = this.cloneNode(true), parent = this.parentNode;\n  return parent ? parent.insertBefore(clone, this.nextSibling) : clone;\n}\n\nexport default function(deep) {\n  return this.select(deep ? selection_cloneDeep : selection_cloneShallow);\n}\n","var filterEvents = {};\n\nexport var event = null;\n\nif (typeof document !== \"undefined\") {\n  var element = document.documentElement;\n  if (!(\"onmouseenter\" in element)) {\n    filterEvents = {mouseenter: \"mouseover\", mouseleave: \"mouseout\"};\n  }\n}\n\nfunction filterContextListener(listener, index, group) {\n  listener = contextListener(listener, index, group);\n  return function(event) {\n    var related = event.relatedTarget;\n    if (!related || (related !== this && !(related.compareDocumentPosition(this) & 8))) {\n      listener.call(this, event);\n    }\n  };\n}\n\nfunction contextListener(listener, index, group) {\n  return function(event1) {\n    var event0 = event; // Events can be reentrant (e.g., focus).\n    event = event1;\n    try {\n      listener.call(this, this.__data__, index, group);\n    } finally {\n      event = event0;\n    }\n  };\n}\n\nfunction parseTypenames(typenames) {\n  return typenames.trim().split(/^|\\s+/).map(function(t) {\n    var name = \"\", i = t.indexOf(\".\");\n    if (i >= 0) name = t.slice(i + 1), t = t.slice(0, i);\n    return {type: t, name: name};\n  });\n}\n\nfunction onRemove(typename) {\n  return function() {\n    var on = this.__on;\n    if (!on) return;\n    for (var j = 0, i = -1, m = on.length, o; j < m; ++j) {\n      if (o = on[j], (!typename.type || o.type === typename.type) && o.name === typename.name) {\n        this.removeEventListener(o.type, o.listener, o.capture);\n      } else {\n        on[++i] = o;\n      }\n    }\n    if (++i) on.length = i;\n    else delete this.__on;\n  };\n}\n\nfunction onAdd(typename, value, capture) {\n  var wrap = filterEvents.hasOwnProperty(typename.type) ? filterContextListener : contextListener;\n  return function(d, i, group) {\n    var on = this.__on, o, listener = wrap(value, i, group);\n    if (on) for (var j = 0, m = on.length; j < m; ++j) {\n      if ((o = on[j]).type === typename.type && o.name === typename.name) {\n        this.removeEventListener(o.type, o.listener, o.capture);\n        this.addEventListener(o.type, o.listener = listener, o.capture = capture);\n        o.value = value;\n        return;\n      }\n    }\n    this.addEventListener(typename.type, listener, capture);\n    o = {type: typename.type, name: typename.name, value: value, listener: listener, capture: capture};\n    if (!on) this.__on = [o];\n    else on.push(o);\n  };\n}\n\nexport default function(typename, value, capture) {\n  var typenames = parseTypenames(typename + \"\"), i, n = typenames.length, t;\n\n  if (arguments.length < 2) {\n    var on = this.node().__on;\n    if (on) for (var j = 0, m = on.length, o; j < m; ++j) {\n      for (i = 0, o = on[j]; i < n; ++i) {\n        if ((t = typenames[i]).type === o.type && t.name === o.name) {\n          return o.value;\n        }\n      }\n    }\n    return;\n  }\n\n  on = value ? onAdd : onRemove;\n  if (capture == null) capture = false;\n  for (i = 0; i < n; ++i) this.each(on(typenames[i], value, capture));\n  return this;\n}\n\nexport function customEvent(event1, listener, that, args) {\n  var event0 = event;\n  event1.sourceEvent = event;\n  event = event1;\n  try {\n    return listener.apply(that, args);\n  } finally {\n    event = event0;\n  }\n}\n","import defaultView from \"../window\";\n\nfunction dispatchEvent(node, type, params) {\n  var window = defaultView(node),\n      event = window.CustomEvent;\n\n  if (typeof event === \"function\") {\n    event = new event(type, params);\n  } else {\n    event = window.document.createEvent(\"Event\");\n    if (params) event.initEvent(type, params.bubbles, params.cancelable), event.detail = params.detail;\n    else event.initEvent(type, false, false);\n  }\n\n  node.dispatchEvent(event);\n}\n\nfunction dispatchConstant(type, params) {\n  return function() {\n    return dispatchEvent(this, type, params);\n  };\n}\n\nfunction dispatchFunction(type, params) {\n  return function() {\n    return dispatchEvent(this, type, params.apply(this, arguments));\n  };\n}\n\nexport default function(type, params) {\n  return this.each((typeof params === \"function\"\n      ? dispatchFunction\n      : dispatchConstant)(type, params));\n}\n","import selection_select from \"./select\";\nimport selection_selectAll from \"./selectAll\";\nimport selection_filter from \"./filter\";\nimport selection_data from \"./data\";\nimport selection_enter from \"./enter\";\nimport selection_exit from \"./exit\";\nimport selection_join from \"./join\";\nimport selection_merge from \"./merge\";\nimport selection_order from \"./order\";\nimport selection_sort from \"./sort\";\nimport selection_call from \"./call\";\nimport selection_nodes from \"./nodes\";\nimport selection_node from \"./node\";\nimport selection_size from \"./size\";\nimport selection_empty from \"./empty\";\nimport selection_each from \"./each\";\nimport selection_attr from \"./attr\";\nimport selection_style from \"./style\";\nimport selection_property from \"./property\";\nimport selection_classed from \"./classed\";\nimport selection_text from \"./text\";\nimport selection_html from \"./html\";\nimport selection_raise from \"./raise\";\nimport selection_lower from \"./lower\";\nimport selection_append from \"./append\";\nimport selection_insert from \"./insert\";\nimport selection_remove from \"./remove\";\nimport selection_clone from \"./clone\";\nimport selection_datum from \"./datum\";\nimport selection_on from \"./on\";\nimport selection_dispatch from \"./dispatch\";\n\nexport var root = [null];\n\nexport function Selection(groups, parents) {\n  this._groups = groups;\n  this._parents = parents;\n}\n\nfunction selection() {\n  return new Selection([[document.documentElement]], root);\n}\n\nSelection.prototype = selection.prototype = {\n  constructor: Selection,\n  select: selection_select,\n  selectAll: selection_selectAll,\n  filter: selection_filter,\n  data: selection_data,\n  enter: selection_enter,\n  exit: selection_exit,\n  join: selection_join,\n  merge: selection_merge,\n  order: selection_order,\n  sort: selection_sort,\n  call: selection_call,\n  nodes: selection_nodes,\n  node: selection_node,\n  size: selection_size,\n  empty: selection_empty,\n  each: selection_each,\n  attr: selection_attr,\n  style: selection_style,\n  property: selection_property,\n  classed: selection_classed,\n  text: selection_text,\n  html: selection_html,\n  raise: selection_raise,\n  lower: selection_lower,\n  append: selection_append,\n  insert: selection_insert,\n  remove: selection_remove,\n  clone: selection_clone,\n  datum: selection_datum,\n  on: selection_on,\n  dispatch: selection_dispatch\n};\n\nexport default selection;\n","import {Selection} from \"./index\";\nimport selector from \"../selector\";\n\nexport default function(select) {\n  if (typeof select !== \"function\") select = selector(select);\n\n  for (var groups = this._groups, m = groups.length, subgroups = new Array(m), j = 0; j < m; ++j) {\n    for (var group = groups[j], n = group.length, subgroup = subgroups[j] = new Array(n), node, subnode, i = 0; i < n; ++i) {\n      if ((node = group[i]) && (subnode = select.call(node, node.__data__, i, group))) {\n        if (\"__data__\" in node) subnode.__data__ = node.__data__;\n        subgroup[i] = subnode;\n      }\n    }\n  }\n\n  return new Selection(subgroups, this._parents);\n}\n","import {Selection} from \"./index\";\nimport selectorAll from \"../selectorAll\";\n\nexport default function(select) {\n  if (typeof select !== \"function\") select = selectorAll(select);\n\n  for (var groups = this._groups, m = groups.length, subgroups = [], parents = [], j = 0; j < m; ++j) {\n    for (var group = groups[j], n = group.length, node, i = 0; i < n; ++i) {\n      if (node = group[i]) {\n        subgroups.push(select.call(node, node.__data__, i, group));\n        parents.push(node);\n      }\n    }\n  }\n\n  return new Selection(subgroups, parents);\n}\n","import {Selection} from \"./index\";\nimport matcher from \"../matcher\";\n\nexport default function(match) {\n  if (typeof match !== \"function\") match = matcher(match);\n\n  for (var groups = this._groups, m = groups.length, subgroups = new Array(m), j = 0; j < m; ++j) {\n    for (var group = groups[j], n = group.length, subgroup = subgroups[j] = [], node, i = 0; i < n; ++i) {\n      if ((node = group[i]) && match.call(node, node.__data__, i, group)) {\n        subgroup.push(node);\n      }\n    }\n  }\n\n  return new Selection(subgroups, this._parents);\n}\n","import sparse from \"./sparse\";\nimport {Selection} from \"./index\";\n\nexport default function() {\n  return new Selection(this._exit || this._groups.map(sparse), this._parents);\n}\n","export default function(onenter, onupdate, onexit) {\n  var enter = this.enter(), update = this, exit = this.exit();\n  enter = typeof onenter === \"function\" ? onenter(enter) : enter.append(onenter + \"\");\n  if (onupdate != null) update = onupdate(update);\n  if (onexit == null) exit.remove(); else onexit(exit);\n  return enter && update ? enter.merge(update).order() : update;\n}\n","import {Selection} from \"./index\";\n\nexport default function(selection) {\n\n  for (var groups0 = this._groups, groups1 = selection._groups, m0 = groups0.length, m1 = groups1.length, m = Math.min(m0, m1), merges = new Array(m0), j = 0; j < m; ++j) {\n    for (var group0 = groups0[j], group1 = groups1[j], n = group0.length, merge = merges[j] = new Array(n), node, i = 0; i < n; ++i) {\n      if (node = group0[i] || group1[i]) {\n        merge[i] = node;\n      }\n    }\n  }\n\n  for (; j < m0; ++j) {\n    merges[j] = groups0[j];\n  }\n\n  return new Selection(merges, this._parents);\n}\n","export default function() {\n\n  for (var groups = this._groups, j = -1, m = groups.length; ++j < m;) {\n    for (var group = groups[j], i = group.length - 1, next = group[i], node; --i >= 0;) {\n      if (node = group[i]) {\n        if (next && node.compareDocumentPosition(next) ^ 4) next.parentNode.insertBefore(node, next);\n        next = node;\n      }\n    }\n  }\n\n  return this;\n}\n","export default function() {\n  var nodes = new Array(this.size()), i = -1;\n  this.each(function() { nodes[++i] = this; });\n  return nodes;\n}\n","export default function() {\n\n  for (var groups = this._groups, j = 0, m = groups.length; j < m; ++j) {\n    for (var group = groups[j], i = 0, n = group.length; i < n; ++i) {\n      var node = group[i];\n      if (node) return node;\n    }\n  }\n\n  return null;\n}\n","export default function() {\n  var size = 0;\n  this.each(function() { ++size; });\n  return size;\n}\n","export default function() {\n  return !this.node();\n}\n","export default function(callback) {\n\n  for (var groups = this._groups, j = 0, m = groups.length; j < m; ++j) {\n    for (var group = groups[j], i = 0, n = group.length, node; i < n; ++i) {\n      if (node = group[i]) callback.call(node, node.__data__, i, group);\n    }\n  }\n\n  return this;\n}\n","function propertyRemove(name) {\n  return function() {\n    delete this[name];\n  };\n}\n\nfunction propertyConstant(name, value) {\n  return function() {\n    this[name] = value;\n  };\n}\n\nfunction propertyFunction(name, value) {\n  return function() {\n    var v = value.apply(this, arguments);\n    if (v == null) delete this[name];\n    else this[name] = v;\n  };\n}\n\nexport default function(name, value) {\n  return arguments.length > 1\n      ? this.each((value == null\n          ? propertyRemove : typeof value === \"function\"\n          ? propertyFunction\n          : propertyConstant)(name, value))\n      : this.node()[name];\n}\n","import creator from \"../creator\";\n\nexport default function(name) {\n  var create = typeof name === \"function\" ? name : creator(name);\n  return this.select(function() {\n    return this.appendChild(create.apply(this, arguments));\n  });\n}\n","export default function(value) {\n  return arguments.length\n      ? this.property(\"__data__\", value)\n      : this.node().__data__;\n}\n","import {Selection, root} from \"./selection/index\";\n\nexport default function(selector) {\n  return typeof selector === \"string\"\n      ? new Selection([[document.querySelector(selector)]], [document.documentElement])\n      : new Selection([[selector]], root);\n}\n","export default function(node, event) {\n  var svg = node.ownerSVGElement || node;\n\n  if (svg.createSVGPoint) {\n    var point = svg.createSVGPoint();\n    point.x = event.clientX, point.y = event.clientY;\n    point = point.matrixTransform(node.getScreenCTM().inverse());\n    return [point.x, point.y];\n  }\n\n  var rect = node.getBoundingClientRect();\n  return [event.clientX - rect.left - node.clientLeft, event.clientY - rect.top - node.clientTop];\n}\n","var noop = {value: function() {}};\n\nfunction dispatch() {\n  for (var i = 0, n = arguments.length, _ = {}, t; i < n; ++i) {\n    if (!(t = arguments[i] + \"\") || (t in _) || /[\\s.]/.test(t)) throw new Error(\"illegal type: \" + t);\n    _[t] = [];\n  }\n  return new Dispatch(_);\n}\n\nfunction Dispatch(_) {\n  this._ = _;\n}\n\nfunction parseTypenames(typenames, types) {\n  return typenames.trim().split(/^|\\s+/).map(function(t) {\n    var name = \"\", i = t.indexOf(\".\");\n    if (i >= 0) name = t.slice(i + 1), t = t.slice(0, i);\n    if (t && !types.hasOwnProperty(t)) throw new Error(\"unknown type: \" + t);\n    return {type: t, name: name};\n  });\n}\n\nDispatch.prototype = dispatch.prototype = {\n  constructor: Dispatch,\n  on: function(typename, callback) {\n    var _ = this._,\n        T = parseTypenames(typename + \"\", _),\n        t,\n        i = -1,\n        n = T.length;\n\n    // If no callback was specified, return the callback of the given type and name.\n    if (arguments.length < 2) {\n      while (++i < n) if ((t = (typename = T[i]).type) && (t = get(_[t], typename.name))) return t;\n      return;\n    }\n\n    // If a type was specified, set the callback for the given type and name.\n    // Otherwise, if a null callback was specified, remove callbacks of the given name.\n    if (callback != null && typeof callback !== \"function\") throw new Error(\"invalid callback: \" + callback);\n    while (++i < n) {\n      if (t = (typename = T[i]).type) _[t] = set(_[t], typename.name, callback);\n      else if (callback == null) for (t in _) _[t] = set(_[t], typename.name, null);\n    }\n\n    return this;\n  },\n  copy: function() {\n    var copy = {}, _ = this._;\n    for (var t in _) copy[t] = _[t].slice();\n    return new Dispatch(copy);\n  },\n  call: function(type, that) {\n    if ((n = arguments.length - 2) > 0) for (var args = new Array(n), i = 0, n, t; i < n; ++i) args[i] = arguments[i + 2];\n    if (!this._.hasOwnProperty(type)) throw new Error(\"unknown type: \" + type);\n    for (t = this._[type], i = 0, n = t.length; i < n; ++i) t[i].value.apply(that, args);\n  },\n  apply: function(type, that, args) {\n    if (!this._.hasOwnProperty(type)) throw new Error(\"unknown type: \" + type);\n    for (var t = this._[type], i = 0, n = t.length; i < n; ++i) t[i].value.apply(that, args);\n  }\n};\n\nfunction get(type, name) {\n  for (var i = 0, n = type.length, c; i < n; ++i) {\n    if ((c = type[i]).name === name) {\n      return c.value;\n    }\n  }\n}\n\nfunction set(type, name, callback) {\n  for (var i = 0, n = type.length; i < n; ++i) {\n    if (type[i].name === name) {\n      type[i] = noop, type = type.slice(0, i).concat(type.slice(i + 1));\n      break;\n    }\n  }\n  if (callback != null) type.push({name: name, value: callback});\n  return type;\n}\n\nexport default dispatch;\n","import {event} from \"./selection/on\";\n\nexport default function() {\n  var current = event, source;\n  while (source = current.sourceEvent) current = source;\n  return current;\n}\n","import sourceEvent from \"./sourceEvent\";\nimport point from \"./point\";\n\nexport default function(node) {\n  var event = sourceEvent();\n  if (event.changedTouches) event = event.changedTouches[0];\n  return point(node, event);\n}\n","import sourceEvent from \"./sourceEvent\";\nimport point from \"./point\";\n\nexport default function(node, touches, identifier) {\n  if (arguments.length < 3) identifier = touches, touches = sourceEvent().changedTouches;\n\n  for (var i = 0, n = touches ? touches.length : 0, touch; i < n; ++i) {\n    if ((touch = touches[i]).identifier === identifier) {\n      return point(node, touch);\n    }\n  }\n\n  return null;\n}\n","import {event} from \"d3-selection\";\n\nexport function nopropagation() {\n  event.stopImmediatePropagation();\n}\n\nexport default function() {\n  event.preventDefault();\n  event.stopImmediatePropagation();\n}\n","import {select} from \"d3-selection\";\nimport noevent from \"./noevent.js\";\n\nexport default function(view) {\n  var root = view.document.documentElement,\n      selection = select(view).on(\"dragstart.drag\", noevent, true);\n  if (\"onselectstart\" in root) {\n    selection.on(\"selectstart.drag\", noevent, true);\n  } else {\n    root.__noselect = root.style.MozUserSelect;\n    root.style.MozUserSelect = \"none\";\n  }\n}\n\nexport function yesdrag(view, noclick) {\n  var root = view.document.documentElement,\n      selection = select(view).on(\"dragstart.drag\", null);\n  if (noclick) {\n    selection.on(\"click.drag\", noevent, true);\n    setTimeout(function() { selection.on(\"click.drag\", null); }, 0);\n  }\n  if (\"onselectstart\" in root) {\n    selection.on(\"selectstart.drag\", null);\n  } else {\n    root.style.MozUserSelect = root.__noselect;\n    delete root.__noselect;\n  }\n}\n","export default function(x) {\n  return function() {\n    return x;\n  };\n}\n","export default function DragEvent(target, type, subject, id, active, x, y, dx, dy, dispatch) {\n  this.target = target;\n  this.type = type;\n  this.subject = subject;\n  this.identifier = id;\n  this.active = active;\n  this.x = x;\n  this.y = y;\n  this.dx = dx;\n  this.dy = dy;\n  this._ = dispatch;\n}\n\nDragEvent.prototype.on = function() {\n  var value = this._.on.apply(this._, arguments);\n  return value === this._ ? this : value;\n};\n","import {dispatch} from \"d3-dispatch\";\nimport {event, customEvent, select, mouse, touch} from \"d3-selection\";\nimport nodrag, {yesdrag} from \"./nodrag.js\";\nimport noevent, {nopropagation} from \"./noevent.js\";\nimport constant from \"./constant.js\";\nimport DragEvent from \"./event.js\";\n\n// Ignore right-click, since that should open the context menu.\nfunction defaultFilter() {\n  return !event.ctrlKey && !event.button;\n}\n\nfunction defaultContainer() {\n  return this.parentNode;\n}\n\nfunction defaultSubject(d) {\n  return d == null ? {x: event.x, y: event.y} : d;\n}\n\nfunction defaultTouchable() {\n  return navigator.maxTouchPoints || (\"ontouchstart\" in this);\n}\n\nexport default function() {\n  var filter = defaultFilter,\n      container = defaultContainer,\n      subject = defaultSubject,\n      touchable = defaultTouchable,\n      gestures = {},\n      listeners = dispatch(\"start\", \"drag\", \"end\"),\n      active = 0,\n      mousedownx,\n      mousedowny,\n      mousemoving,\n      touchending,\n      clickDistance2 = 0;\n\n  function drag(selection) {\n    selection\n        .on(\"mousedown.drag\", mousedowned)\n      .filter(touchable)\n        .on(\"touchstart.drag\", touchstarted)\n        .on(\"touchmove.drag\", touchmoved)\n        .on(\"touchend.drag touchcancel.drag\", touchended)\n        .style(\"touch-action\", \"none\")\n        .style(\"-webkit-tap-highlight-color\", \"rgba(0,0,0,0)\");\n  }\n\n  function mousedowned() {\n    if (touchending || !filter.apply(this, arguments)) return;\n    var gesture = beforestart(\"mouse\", container.apply(this, arguments), mouse, this, arguments);\n    if (!gesture) return;\n    select(event.view).on(\"mousemove.drag\", mousemoved, true).on(\"mouseup.drag\", mouseupped, true);\n    nodrag(event.view);\n    nopropagation();\n    mousemoving = false;\n    mousedownx = event.clientX;\n    mousedowny = event.clientY;\n    gesture(\"start\");\n  }\n\n  function mousemoved() {\n    noevent();\n    if (!mousemoving) {\n      var dx = event.clientX - mousedownx, dy = event.clientY - mousedowny;\n      mousemoving = dx * dx + dy * dy > clickDistance2;\n    }\n    gestures.mouse(\"drag\");\n  }\n\n  function mouseupped() {\n    select(event.view).on(\"mousemove.drag mouseup.drag\", null);\n    yesdrag(event.view, mousemoving);\n    noevent();\n    gestures.mouse(\"end\");\n  }\n\n  function touchstarted() {\n    if (!filter.apply(this, arguments)) return;\n    var touches = event.changedTouches,\n        c = container.apply(this, arguments),\n        n = touches.length, i, gesture;\n\n    for (i = 0; i < n; ++i) {\n      if (gesture = beforestart(touches[i].identifier, c, touch, this, arguments)) {\n        nopropagation();\n        gesture(\"start\");\n      }\n    }\n  }\n\n  function touchmoved() {\n    var touches = event.changedTouches,\n        n = touches.length, i, gesture;\n\n    for (i = 0; i < n; ++i) {\n      if (gesture = gestures[touches[i].identifier]) {\n        noevent();\n        gesture(\"drag\");\n      }\n    }\n  }\n\n  function touchended() {\n    var touches = event.changedTouches,\n        n = touches.length, i, gesture;\n\n    if (touchending) clearTimeout(touchending);\n    touchending = setTimeout(function() { touchending = null; }, 500); // Ghost clicks are delayed!\n    for (i = 0; i < n; ++i) {\n      if (gesture = gestures[touches[i].identifier]) {\n        nopropagation();\n        gesture(\"end\");\n      }\n    }\n  }\n\n  function beforestart(id, container, point, that, args) {\n    var p = point(container, id), s, dx, dy,\n        sublisteners = listeners.copy();\n\n    if (!customEvent(new DragEvent(drag, \"beforestart\", s, id, active, p[0], p[1], 0, 0, sublisteners), function() {\n      if ((event.subject = s = subject.apply(that, args)) == null) return false;\n      dx = s.x - p[0] || 0;\n      dy = s.y - p[1] || 0;\n      return true;\n    })) return;\n\n    return function gesture(type) {\n      var p0 = p, n;\n      switch (type) {\n        case \"start\": gestures[id] = gesture, n = active++; break;\n        case \"end\": delete gestures[id], --active; // nobreak\n        case \"drag\": p = point(container, id), n = active; break;\n      }\n      customEvent(new DragEvent(drag, type, s, id, n, p[0] + dx, p[1] + dy, p[0] - p0[0], p[1] - p0[1], sublisteners), sublisteners.apply, sublisteners, [type, that, args]);\n    };\n  }\n\n  drag.filter = function(_) {\n    return arguments.length ? (filter = typeof _ === \"function\" ? _ : constant(!!_), drag) : filter;\n  };\n\n  drag.container = function(_) {\n    return arguments.length ? (container = typeof _ === \"function\" ? _ : constant(_), drag) : container;\n  };\n\n  drag.subject = function(_) {\n    return arguments.length ? (subject = typeof _ === \"function\" ? _ : constant(_), drag) : subject;\n  };\n\n  drag.touchable = function(_) {\n    return arguments.length ? (touchable = typeof _ === \"function\" ? _ : constant(!!_), drag) : touchable;\n  };\n\n  drag.on = function() {\n    var value = listeners.on.apply(listeners, arguments);\n    return value === listeners ? drag : value;\n  };\n\n  drag.clickDistance = function(_) {\n    return arguments.length ? (clickDistance2 = (_ = +_) * _, drag) : Math.sqrt(clickDistance2);\n  };\n\n  return drag;\n}\n","var frame = 0, // is an animation frame pending?\n    timeout = 0, // is a timeout pending?\n    interval = 0, // are any timers active?\n    pokeDelay = 1000, // how frequently we check for clock skew\n    taskHead,\n    taskTail,\n    clockLast = 0,\n    clockNow = 0,\n    clockSkew = 0,\n    clock = typeof performance === \"object\" && performance.now ? performance : Date,\n    setFrame = typeof window === \"object\" && window.requestAnimationFrame ? window.requestAnimationFrame.bind(window) : function(f) { setTimeout(f, 17); };\n\nexport function now() {\n  return clockNow || (setFrame(clearNow), clockNow = clock.now() + clockSkew);\n}\n\nfunction clearNow() {\n  clockNow = 0;\n}\n\nexport function Timer() {\n  this._call =\n  this._time =\n  this._next = null;\n}\n\nTimer.prototype = timer.prototype = {\n  constructor: Timer,\n  restart: function(callback, delay, time) {\n    if (typeof callback !== \"function\") throw new TypeError(\"callback is not a function\");\n    time = (time == null ? now() : +time) + (delay == null ? 0 : +delay);\n    if (!this._next && taskTail !== this) {\n      if (taskTail) taskTail._next = this;\n      else taskHead = this;\n      taskTail = this;\n    }\n    this._call = callback;\n    this._time = time;\n    sleep();\n  },\n  stop: function() {\n    if (this._call) {\n      this._call = null;\n      this._time = Infinity;\n      sleep();\n    }\n  }\n};\n\nexport function timer(callback, delay, time) {\n  var t = new Timer;\n  t.restart(callback, delay, time);\n  return t;\n}\n\nexport function timerFlush() {\n  now(); // Get the current time, if not already set.\n  ++frame; // Pretend we’ve set an alarm, if we haven’t already.\n  var t = taskHead, e;\n  while (t) {\n    if ((e = clockNow - t._time) >= 0) t._call.call(null, e);\n    t = t._next;\n  }\n  --frame;\n}\n\nfunction wake() {\n  clockNow = (clockLast = clock.now()) + clockSkew;\n  frame = timeout = 0;\n  try {\n    timerFlush();\n  } finally {\n    frame = 0;\n    nap();\n    clockNow = 0;\n  }\n}\n\nfunction poke() {\n  var now = clock.now(), delay = now - clockLast;\n  if (delay > pokeDelay) clockSkew -= delay, clockLast = now;\n}\n\nfunction nap() {\n  var t0, t1 = taskHead, t2, time = Infinity;\n  while (t1) {\n    if (t1._call) {\n      if (time > t1._time) time = t1._time;\n      t0 = t1, t1 = t1._next;\n    } else {\n      t2 = t1._next, t1._next = null;\n      t1 = t0 ? t0._next = t2 : taskHead = t2;\n    }\n  }\n  taskTail = t0;\n  sleep(time);\n}\n\nfunction sleep(time) {\n  if (frame) return; // Soonest alarm already set, or will be.\n  if (timeout) timeout = clearTimeout(timeout);\n  var delay = time - clockNow; // Strictly less than if we recomputed clockNow.\n  if (delay > 24) {\n    if (time < Infinity) timeout = setTimeout(wake, time - clock.now() - clockSkew);\n    if (interval) interval = clearInterval(interval);\n  } else {\n    if (!interval) clockLast = clock.now(), interval = setInterval(poke, pokeDelay);\n    frame = 1, setFrame(wake);\n  }\n}\n","import {Timer} from \"./timer.js\";\n\nexport default function(callback, delay, time) {\n  var t = new Timer;\n  delay = delay == null ? 0 : +delay;\n  t.restart(function(elapsed) {\n    t.stop();\n    callback(elapsed + delay);\n  }, delay, time);\n  return t;\n}\n","import {dispatch} from \"d3-dispatch\";\nimport {timer, timeout} from \"d3-timer\";\n\nvar emptyOn = dispatch(\"start\", \"end\", \"cancel\", \"interrupt\");\nvar emptyTween = [];\n\nexport var CREATED = 0;\nexport var SCHEDULED = 1;\nexport var STARTING = 2;\nexport var STARTED = 3;\nexport var RUNNING = 4;\nexport var ENDING = 5;\nexport var ENDED = 6;\n\nexport default function(node, name, id, index, group, timing) {\n  var schedules = node.__transition;\n  if (!schedules) node.__transition = {};\n  else if (id in schedules) return;\n  create(node, id, {\n    name: name,\n    index: index, // For context during callback.\n    group: group, // For context during callback.\n    on: emptyOn,\n    tween: emptyTween,\n    time: timing.time,\n    delay: timing.delay,\n    duration: timing.duration,\n    ease: timing.ease,\n    timer: null,\n    state: CREATED\n  });\n}\n\nexport function init(node, id) {\n  var schedule = get(node, id);\n  if (schedule.state > CREATED) throw new Error(\"too late; already scheduled\");\n  return schedule;\n}\n\nexport function set(node, id) {\n  var schedule = get(node, id);\n  if (schedule.state > STARTED) throw new Error(\"too late; already running\");\n  return schedule;\n}\n\nexport function get(node, id) {\n  var schedule = node.__transition;\n  if (!schedule || !(schedule = schedule[id])) throw new Error(\"transition not found\");\n  return schedule;\n}\n\nfunction create(node, id, self) {\n  var schedules = node.__transition,\n      tween;\n\n  // Initialize the self timer when the transition is created.\n  // Note the actual delay is not known until the first callback!\n  schedules[id] = self;\n  self.timer = timer(schedule, 0, self.time);\n\n  function schedule(elapsed) {\n    self.state = SCHEDULED;\n    self.timer.restart(start, self.delay, self.time);\n\n    // If the elapsed delay is less than our first sleep, start immediately.\n    if (self.delay <= elapsed) start(elapsed - self.delay);\n  }\n\n  function start(elapsed) {\n    var i, j, n, o;\n\n    // If the state is not SCHEDULED, then we previously errored on start.\n    if (self.state !== SCHEDULED) return stop();\n\n    for (i in schedules) {\n      o = schedules[i];\n      if (o.name !== self.name) continue;\n\n      // While this element already has a starting transition during this frame,\n      // defer starting an interrupting transition until that transition has a\n      // chance to tick (and possibly end); see d3/d3-transition#54!\n      if (o.state === STARTED) return timeout(start);\n\n      // Interrupt the active transition, if any.\n      if (o.state === RUNNING) {\n        o.state = ENDED;\n        o.timer.stop();\n        o.on.call(\"interrupt\", node, node.__data__, o.index, o.group);\n        delete schedules[i];\n      }\n\n      // Cancel any pre-empted transitions.\n      else if (+i < id) {\n        o.state = ENDED;\n        o.timer.stop();\n        o.on.call(\"cancel\", node, node.__data__, o.index, o.group);\n        delete schedules[i];\n      }\n    }\n\n    // Defer the first tick to end of the current frame; see d3/d3#1576.\n    // Note the transition may be canceled after start and before the first tick!\n    // Note this must be scheduled before the start event; see d3/d3-transition#16!\n    // Assuming this is successful, subsequent callbacks go straight to tick.\n    timeout(function() {\n      if (self.state === STARTED) {\n        self.state = RUNNING;\n        self.timer.restart(tick, self.delay, self.time);\n        tick(elapsed);\n      }\n    });\n\n    // Dispatch the start event.\n    // Note this must be done before the tween are initialized.\n    self.state = STARTING;\n    self.on.call(\"start\", node, node.__data__, self.index, self.group);\n    if (self.state !== STARTING) return; // interrupted\n    self.state = STARTED;\n\n    // Initialize the tween, deleting null tween.\n    tween = new Array(n = self.tween.length);\n    for (i = 0, j = -1; i < n; ++i) {\n      if (o = self.tween[i].value.call(node, node.__data__, self.index, self.group)) {\n        tween[++j] = o;\n      }\n    }\n    tween.length = j + 1;\n  }\n\n  function tick(elapsed) {\n    var t = elapsed < self.duration ? self.ease.call(null, elapsed / self.duration) : (self.timer.restart(stop), self.state = ENDING, 1),\n        i = -1,\n        n = tween.length;\n\n    while (++i < n) {\n      tween[i].call(node, t);\n    }\n\n    // Dispatch the end event.\n    if (self.state === ENDING) {\n      self.on.call(\"end\", node, node.__data__, self.index, self.group);\n      stop();\n    }\n  }\n\n  function stop() {\n    self.state = ENDED;\n    self.timer.stop();\n    delete schedules[id];\n    for (var i in schedules) return; // eslint-disable-line no-unused-vars\n    delete node.__transition;\n  }\n}\n","import {STARTING, ENDING, ENDED} from \"./transition/schedule.js\";\n\nexport default function(node, name) {\n  var schedules = node.__transition,\n      schedule,\n      active,\n      empty = true,\n      i;\n\n  if (!schedules) return;\n\n  name = name == null ? null : name + \"\";\n\n  for (i in schedules) {\n    if ((schedule = schedules[i]).name !== name) { empty = false; continue; }\n    active = schedule.state > STARTING && schedule.state < ENDING;\n    schedule.state = ENDED;\n    schedule.timer.stop();\n    schedule.on.call(active ? \"interrupt\" : \"cancel\", node, node.__data__, schedule.index, schedule.group);\n    delete schedules[i];\n  }\n\n  if (empty) delete node.__transition;\n}\n","import decompose, {identity} from \"./decompose.js\";\n\nvar cssNode,\n    cssRoot,\n    cssView,\n    svgNode;\n\nexport function parseCss(value) {\n  if (value === \"none\") return identity;\n  if (!cssNode) cssNode = document.createElement(\"DIV\"), cssRoot = document.documentElement, cssView = document.defaultView;\n  cssNode.style.transform = value;\n  value = cssView.getComputedStyle(cssRoot.appendChild(cssNode), null).getPropertyValue(\"transform\");\n  cssRoot.removeChild(cssNode);\n  value = value.slice(7, -1).split(\",\");\n  return decompose(+value[0], +value[1], +value[2], +value[3], +value[4], +value[5]);\n}\n\nexport function parseSvg(value) {\n  if (value == null) return identity;\n  if (!svgNode) svgNode = document.createElementNS(\"http://www.w3.org/2000/svg\", \"g\");\n  svgNode.setAttribute(\"transform\", value);\n  if (!(value = svgNode.transform.baseVal.consolidate())) return identity;\n  value = value.matrix;\n  return decompose(value.a, value.b, value.c, value.d, value.e, value.f);\n}\n","var degrees = 180 / Math.PI;\n\nexport var identity = {\n  translateX: 0,\n  translateY: 0,\n  rotate: 0,\n  skewX: 0,\n  scaleX: 1,\n  scaleY: 1\n};\n\nexport default function(a, b, c, d, e, f) {\n  var scaleX, scaleY, skewX;\n  if (scaleX = Math.sqrt(a * a + b * b)) a /= scaleX, b /= scaleX;\n  if (skewX = a * c + b * d) c -= a * skewX, d -= b * skewX;\n  if (scaleY = Math.sqrt(c * c + d * d)) c /= scaleY, d /= scaleY, skewX /= scaleY;\n  if (a * d < b * c) a = -a, b = -b, skewX = -skewX, scaleX = -scaleX;\n  return {\n    translateX: e,\n    translateY: f,\n    rotate: Math.atan2(b, a) * degrees,\n    skewX: Math.atan(skewX) * degrees,\n    scaleX: scaleX,\n    scaleY: scaleY\n  };\n}\n","import number from \"../number.js\";\nimport {parseCss, parseSvg} from \"./parse.js\";\n\nfunction interpolateTransform(parse, pxComma, pxParen, degParen) {\n\n  function pop(s) {\n    return s.length ? s.pop() + \" \" : \"\";\n  }\n\n  function translate(xa, ya, xb, yb, s, q) {\n    if (xa !== xb || ya !== yb) {\n      var i = s.push(\"translate(\", null, pxComma, null, pxParen);\n      q.push({i: i - 4, x: number(xa, xb)}, {i: i - 2, x: number(ya, yb)});\n    } else if (xb || yb) {\n      s.push(\"translate(\" + xb + pxComma + yb + pxParen);\n    }\n  }\n\n  function rotate(a, b, s, q) {\n    if (a !== b) {\n      if (a - b > 180) b += 360; else if (b - a > 180) a += 360; // shortest path\n      q.push({i: s.push(pop(s) + \"rotate(\", null, degParen) - 2, x: number(a, b)});\n    } else if (b) {\n      s.push(pop(s) + \"rotate(\" + b + degParen);\n    }\n  }\n\n  function skewX(a, b, s, q) {\n    if (a !== b) {\n      q.push({i: s.push(pop(s) + \"skewX(\", null, degParen) - 2, x: number(a, b)});\n    } else if (b) {\n      s.push(pop(s) + \"skewX(\" + b + degParen);\n    }\n  }\n\n  function scale(xa, ya, xb, yb, s, q) {\n    if (xa !== xb || ya !== yb) {\n      var i = s.push(pop(s) + \"scale(\", null, \",\", null, \")\");\n      q.push({i: i - 4, x: number(xa, xb)}, {i: i - 2, x: number(ya, yb)});\n    } else if (xb !== 1 || yb !== 1) {\n      s.push(pop(s) + \"scale(\" + xb + \",\" + yb + \")\");\n    }\n  }\n\n  return function(a, b) {\n    var s = [], // string constants and placeholders\n        q = []; // number interpolators\n    a = parse(a), b = parse(b);\n    translate(a.translateX, a.translateY, b.translateX, b.translateY, s, q);\n    rotate(a.rotate, b.rotate, s, q);\n    skewX(a.skewX, b.skewX, s, q);\n    scale(a.scaleX, a.scaleY, b.scaleX, b.scaleY, s, q);\n    a = b = null; // gc\n    return function(t) {\n      var i = -1, n = q.length, o;\n      while (++i < n) s[(o = q[i]).i] = o.x(t);\n      return s.join(\"\");\n    };\n  };\n}\n\nexport var interpolateTransformCss = interpolateTransform(parseCss, \"px, \", \"px)\", \"deg)\");\nexport var interpolateTransformSvg = interpolateTransform(parseSvg, \", \", \")\", \")\");\n","import {get, set} from \"./schedule.js\";\n\nfunction tweenRemove(id, name) {\n  var tween0, tween1;\n  return function() {\n    var schedule = set(this, id),\n        tween = schedule.tween;\n\n    // If this node shared tween with the previous node,\n    // just assign the updated shared tween and we’re done!\n    // Otherwise, copy-on-write.\n    if (tween !== tween0) {\n      tween1 = tween0 = tween;\n      for (var i = 0, n = tween1.length; i < n; ++i) {\n        if (tween1[i].name === name) {\n          tween1 = tween1.slice();\n          tween1.splice(i, 1);\n          break;\n        }\n      }\n    }\n\n    schedule.tween = tween1;\n  };\n}\n\nfunction tweenFunction(id, name, value) {\n  var tween0, tween1;\n  if (typeof value !== \"function\") throw new Error;\n  return function() {\n    var schedule = set(this, id),\n        tween = schedule.tween;\n\n    // If this node shared tween with the previous node,\n    // just assign the updated shared tween and we’re done!\n    // Otherwise, copy-on-write.\n    if (tween !== tween0) {\n      tween1 = (tween0 = tween).slice();\n      for (var t = {name: name, value: value}, i = 0, n = tween1.length; i < n; ++i) {\n        if (tween1[i].name === name) {\n          tween1[i] = t;\n          break;\n        }\n      }\n      if (i === n) tween1.push(t);\n    }\n\n    schedule.tween = tween1;\n  };\n}\n\nexport default function(name, value) {\n  var id = this._id;\n\n  name += \"\";\n\n  if (arguments.length < 2) {\n    var tween = get(this.node(), id).tween;\n    for (var i = 0, n = tween.length, t; i < n; ++i) {\n      if ((t = tween[i]).name === name) {\n        return t.value;\n      }\n    }\n    return null;\n  }\n\n  return this.each((value == null ? tweenRemove : tweenFunction)(id, name, value));\n}\n\nexport function tweenValue(transition, name, value) {\n  var id = transition._id;\n\n  transition.each(function() {\n    var schedule = set(this, id);\n    (schedule.value || (schedule.value = {}))[name] = value.apply(this, arguments);\n  });\n\n  return function(node) {\n    return get(node, id).value[name];\n  };\n}\n","import {color} from \"d3-color\";\nimport {interpolateNumber, interpolateRgb, interpolateString} from \"d3-interpolate\";\n\nexport default function(a, b) {\n  var c;\n  return (typeof b === \"number\" ? interpolateNumber\n      : b instanceof color ? interpolateRgb\n      : (c = color(b)) ? (b = c, interpolateRgb)\n      : interpolateString)(a, b);\n}\n","function removeFunction(id) {\n  return function() {\n    var parent = this.parentNode;\n    for (var i in this.__transition) if (+i !== id) return;\n    if (parent) parent.removeChild(this);\n  };\n}\n\nexport default function() {\n  return this.on(\"end.remove\", removeFunction(this._id));\n}\n","import {selection} from \"d3-selection\";\n\nvar Selection = selection.prototype.constructor;\n\nexport default function() {\n  return new Selection(this._groups, this._parents);\n}\n","import {interpolateTransformCss as interpolateTransform} from \"d3-interpolate\";\nimport {style} from \"d3-selection\";\nimport {set} from \"./schedule.js\";\nimport {tweenValue} from \"./tween.js\";\nimport interpolate from \"./interpolate.js\";\n\nfunction styleNull(name, interpolate) {\n  var string00,\n      string10,\n      interpolate0;\n  return function() {\n    var string0 = style(this, name),\n        string1 = (this.style.removeProperty(name), style(this, name));\n    return string0 === string1 ? null\n        : string0 === string00 && string1 === string10 ? interpolate0\n        : interpolate0 = interpolate(string00 = string0, string10 = string1);\n  };\n}\n\nfunction styleRemove(name) {\n  return function() {\n    this.style.removeProperty(name);\n  };\n}\n\nfunction styleConstant(name, interpolate, value1) {\n  var string00,\n      string1 = value1 + \"\",\n      interpolate0;\n  return function() {\n    var string0 = style(this, name);\n    return string0 === string1 ? null\n        : string0 === string00 ? interpolate0\n        : interpolate0 = interpolate(string00 = string0, value1);\n  };\n}\n\nfunction styleFunction(name, interpolate, value) {\n  var string00,\n      string10,\n      interpolate0;\n  return function() {\n    var string0 = style(this, name),\n        value1 = value(this),\n        string1 = value1 + \"\";\n    if (value1 == null) string1 = value1 = (this.style.removeProperty(name), style(this, name));\n    return string0 === string1 ? null\n        : string0 === string00 && string1 === string10 ? interpolate0\n        : (string10 = string1, interpolate0 = interpolate(string00 = string0, value1));\n  };\n}\n\nfunction styleMaybeRemove(id, name) {\n  var on0, on1, listener0, key = \"style.\" + name, event = \"end.\" + key, remove;\n  return function() {\n    var schedule = set(this, id),\n        on = schedule.on,\n        listener = schedule.value[key] == null ? remove || (remove = styleRemove(name)) : undefined;\n\n    // If this node shared a dispatch with the previous node,\n    // just assign the updated shared dispatch and we’re done!\n    // Otherwise, copy-on-write.\n    if (on !== on0 || listener0 !== listener) (on1 = (on0 = on).copy()).on(event, listener0 = listener);\n\n    schedule.on = on1;\n  };\n}\n\nexport default function(name, value, priority) {\n  var i = (name += \"\") === \"transform\" ? interpolateTransform : interpolate;\n  return value == null ? this\n      .styleTween(name, styleNull(name, i))\n      .on(\"end.style.\" + name, styleRemove(name))\n    : typeof value === \"function\" ? this\n      .styleTween(name, styleFunction(name, i, tweenValue(this, \"style.\" + name, value)))\n      .each(styleMaybeRemove(this._id, name))\n    : this\n      .styleTween(name, styleConstant(name, i, value), priority)\n      .on(\"end.style.\" + name, null);\n}\n","function textInterpolate(i) {\n  return function(t) {\n    this.textContent = i.call(this, t);\n  };\n}\n\nfunction textTween(value) {\n  var t0, i0;\n  function tween() {\n    var i = value.apply(this, arguments);\n    if (i !== i0) t0 = (i0 = i) && textInterpolate(i);\n    return t0;\n  }\n  tween._value = value;\n  return tween;\n}\n\nexport default function(value) {\n  var key = \"text\";\n  if (arguments.length < 1) return (key = this.tween(key)) && key._value;\n  if (value == null) return this.tween(key, null);\n  if (typeof value !== \"function\") throw new Error;\n  return this.tween(key, textTween(value));\n}\n","import {selection} from \"d3-selection\";\nimport transition_attr from \"./attr.js\";\nimport transition_attrTween from \"./attrTween.js\";\nimport transition_delay from \"./delay.js\";\nimport transition_duration from \"./duration.js\";\nimport transition_ease from \"./ease.js\";\nimport transition_filter from \"./filter.js\";\nimport transition_merge from \"./merge.js\";\nimport transition_on from \"./on.js\";\nimport transition_remove from \"./remove.js\";\nimport transition_select from \"./select.js\";\nimport transition_selectAll from \"./selectAll.js\";\nimport transition_selection from \"./selection.js\";\nimport transition_style from \"./style.js\";\nimport transition_styleTween from \"./styleTween.js\";\nimport transition_text from \"./text.js\";\nimport transition_textTween from \"./textTween.js\";\nimport transition_transition from \"./transition.js\";\nimport transition_tween from \"./tween.js\";\nimport transition_end from \"./end.js\";\n\nvar id = 0;\n\nexport function Transition(groups, parents, name, id) {\n  this._groups = groups;\n  this._parents = parents;\n  this._name = name;\n  this._id = id;\n}\n\nexport default function transition(name) {\n  return selection().transition(name);\n}\n\nexport function newId() {\n  return ++id;\n}\n\nvar selection_prototype = selection.prototype;\n\nTransition.prototype = transition.prototype = {\n  constructor: Transition,\n  select: transition_select,\n  selectAll: transition_selectAll,\n  filter: transition_filter,\n  merge: transition_merge,\n  selection: transition_selection,\n  transition: transition_transition,\n  call: selection_prototype.call,\n  nodes: selection_prototype.nodes,\n  node: selection_prototype.node,\n  size: selection_prototype.size,\n  empty: selection_prototype.empty,\n  each: selection_prototype.each,\n  on: transition_on,\n  attr: transition_attr,\n  attrTween: transition_attrTween,\n  style: transition_style,\n  styleTween: transition_styleTween,\n  text: transition_text,\n  textTween: transition_textTween,\n  remove: transition_remove,\n  tween: transition_tween,\n  delay: transition_delay,\n  duration: transition_duration,\n  ease: transition_ease,\n  end: transition_end\n};\n","import {selector} from \"d3-selection\";\nimport {Transition} from \"./index.js\";\nimport schedule, {get} from \"./schedule.js\";\n\nexport default function(select) {\n  var name = this._name,\n      id = this._id;\n\n  if (typeof select !== \"function\") select = selector(select);\n\n  for (var groups = this._groups, m = groups.length, subgroups = new Array(m), j = 0; j < m; ++j) {\n    for (var group = groups[j], n = group.length, subgroup = subgroups[j] = new Array(n), node, subnode, i = 0; i < n; ++i) {\n      if ((node = group[i]) && (subnode = select.call(node, node.__data__, i, group))) {\n        if (\"__data__\" in node) subnode.__data__ = node.__data__;\n        subgroup[i] = subnode;\n        schedule(subgroup[i], name, id, i, subgroup, get(node, id));\n      }\n    }\n  }\n\n  return new Transition(subgroups, this._parents, name, id);\n}\n","import {selectorAll} from \"d3-selection\";\nimport {Transition} from \"./index.js\";\nimport schedule, {get} from \"./schedule.js\";\n\nexport default function(select) {\n  var name = this._name,\n      id = this._id;\n\n  if (typeof select !== \"function\") select = selectorAll(select);\n\n  for (var groups = this._groups, m = groups.length, subgroups = [], parents = [], j = 0; j < m; ++j) {\n    for (var group = groups[j], n = group.length, node, i = 0; i < n; ++i) {\n      if (node = group[i]) {\n        for (var children = select.call(node, node.__data__, i, group), child, inherit = get(node, id), k = 0, l = children.length; k < l; ++k) {\n          if (child = children[k]) {\n            schedule(child, name, id, k, children, inherit);\n          }\n        }\n        subgroups.push(children);\n        parents.push(node);\n      }\n    }\n  }\n\n  return new Transition(subgroups, parents, name, id);\n}\n","import {matcher} from \"d3-selection\";\nimport {Transition} from \"./index.js\";\n\nexport default function(match) {\n  if (typeof match !== \"function\") match = matcher(match);\n\n  for (var groups = this._groups, m = groups.length, subgroups = new Array(m), j = 0; j < m; ++j) {\n    for (var group = groups[j], n = group.length, subgroup = subgroups[j] = [], node, i = 0; i < n; ++i) {\n      if ((node = group[i]) && match.call(node, node.__data__, i, group)) {\n        subgroup.push(node);\n      }\n    }\n  }\n\n  return new Transition(subgroups, this._parents, this._name, this._id);\n}\n","import {Transition} from \"./index.js\";\n\nexport default function(transition) {\n  if (transition._id !== this._id) throw new Error;\n\n  for (var groups0 = this._groups, groups1 = transition._groups, m0 = groups0.length, m1 = groups1.length, m = Math.min(m0, m1), merges = new Array(m0), j = 0; j < m; ++j) {\n    for (var group0 = groups0[j], group1 = groups1[j], n = group0.length, merge = merges[j] = new Array(n), node, i = 0; i < n; ++i) {\n      if (node = group0[i] || group1[i]) {\n        merge[i] = node;\n      }\n    }\n  }\n\n  for (; j < m0; ++j) {\n    merges[j] = groups0[j];\n  }\n\n  return new Transition(merges, this._parents, this._name, this._id);\n}\n","import {Transition, newId} from \"./index.js\";\nimport schedule, {get} from \"./schedule.js\";\n\nexport default function() {\n  var name = this._name,\n      id0 = this._id,\n      id1 = newId();\n\n  for (var groups = this._groups, m = groups.length, j = 0; j < m; ++j) {\n    for (var group = groups[j], n = group.length, node, i = 0; i < n; ++i) {\n      if (node = group[i]) {\n        var inherit = get(node, id0);\n        schedule(node, name, id1, i, group, {\n          time: inherit.time + inherit.delay + inherit.duration,\n          delay: 0,\n          duration: inherit.duration,\n          ease: inherit.ease\n        });\n      }\n    }\n  }\n\n  return new Transition(groups, this._parents, name, id1);\n}\n","import {get, set, init} from \"./schedule.js\";\n\nfunction start(name) {\n  return (name + \"\").trim().split(/^|\\s+/).every(function(t) {\n    var i = t.indexOf(\".\");\n    if (i >= 0) t = t.slice(0, i);\n    return !t || t === \"start\";\n  });\n}\n\nfunction onFunction(id, name, listener) {\n  var on0, on1, sit = start(name) ? init : set;\n  return function() {\n    var schedule = sit(this, id),\n        on = schedule.on;\n\n    // If this node shared a dispatch with the previous node,\n    // just assign the updated shared dispatch and we’re done!\n    // Otherwise, copy-on-write.\n    if (on !== on0) (on1 = (on0 = on).copy()).on(name, listener);\n\n    schedule.on = on1;\n  };\n}\n\nexport default function(name, listener) {\n  var id = this._id;\n\n  return arguments.length < 2\n      ? get(this.node(), id).on.on(name)\n      : this.each(onFunction(id, name, listener));\n}\n","import {interpolateTransformSvg as interpolateTransform} from \"d3-interpolate\";\nimport {namespace} from \"d3-selection\";\nimport {tweenValue} from \"./tween.js\";\nimport interpolate from \"./interpolate.js\";\n\nfunction attrRemove(name) {\n  return function() {\n    this.removeAttribute(name);\n  };\n}\n\nfunction attrRemoveNS(fullname) {\n  return function() {\n    this.removeAttributeNS(fullname.space, fullname.local);\n  };\n}\n\nfunction attrConstant(name, interpolate, value1) {\n  var string00,\n      string1 = value1 + \"\",\n      interpolate0;\n  return function() {\n    var string0 = this.getAttribute(name);\n    return string0 === string1 ? null\n        : string0 === string00 ? interpolate0\n        : interpolate0 = interpolate(string00 = string0, value1);\n  };\n}\n\nfunction attrConstantNS(fullname, interpolate, value1) {\n  var string00,\n      string1 = value1 + \"\",\n      interpolate0;\n  return function() {\n    var string0 = this.getAttributeNS(fullname.space, fullname.local);\n    return string0 === string1 ? null\n        : string0 === string00 ? interpolate0\n        : interpolate0 = interpolate(string00 = string0, value1);\n  };\n}\n\nfunction attrFunction(name, interpolate, value) {\n  var string00,\n      string10,\n      interpolate0;\n  return function() {\n    var string0, value1 = value(this), string1;\n    if (value1 == null) return void this.removeAttribute(name);\n    string0 = this.getAttribute(name);\n    string1 = value1 + \"\";\n    return string0 === string1 ? null\n        : string0 === string00 && string1 === string10 ? interpolate0\n        : (string10 = string1, interpolate0 = interpolate(string00 = string0, value1));\n  };\n}\n\nfunction attrFunctionNS(fullname, interpolate, value) {\n  var string00,\n      string10,\n      interpolate0;\n  return function() {\n    var string0, value1 = value(this), string1;\n    if (value1 == null) return void this.removeAttributeNS(fullname.space, fullname.local);\n    string0 = this.getAttributeNS(fullname.space, fullname.local);\n    string1 = value1 + \"\";\n    return string0 === string1 ? null\n        : string0 === string00 && string1 === string10 ? interpolate0\n        : (string10 = string1, interpolate0 = interpolate(string00 = string0, value1));\n  };\n}\n\nexport default function(name, value) {\n  var fullname = namespace(name), i = fullname === \"transform\" ? interpolateTransform : interpolate;\n  return this.attrTween(name, typeof value === \"function\"\n      ? (fullname.local ? attrFunctionNS : attrFunction)(fullname, i, tweenValue(this, \"attr.\" + name, value))\n      : value == null ? (fullname.local ? attrRemoveNS : attrRemove)(fullname)\n      : (fullname.local ? attrConstantNS : attrConstant)(fullname, i, value));\n}\n","import {namespace} from \"d3-selection\";\n\nfunction attrInterpolate(name, i) {\n  return function(t) {\n    this.setAttribute(name, i.call(this, t));\n  };\n}\n\nfunction attrInterpolateNS(fullname, i) {\n  return function(t) {\n    this.setAttributeNS(fullname.space, fullname.local, i.call(this, t));\n  };\n}\n\nfunction attrTweenNS(fullname, value) {\n  var t0, i0;\n  function tween() {\n    var i = value.apply(this, arguments);\n    if (i !== i0) t0 = (i0 = i) && attrInterpolateNS(fullname, i);\n    return t0;\n  }\n  tween._value = value;\n  return tween;\n}\n\nfunction attrTween(name, value) {\n  var t0, i0;\n  function tween() {\n    var i = value.apply(this, arguments);\n    if (i !== i0) t0 = (i0 = i) && attrInterpolate(name, i);\n    return t0;\n  }\n  tween._value = value;\n  return tween;\n}\n\nexport default function(name, value) {\n  var key = \"attr.\" + name;\n  if (arguments.length < 2) return (key = this.tween(key)) && key._value;\n  if (value == null) return this.tween(key, null);\n  if (typeof value !== \"function\") throw new Error;\n  var fullname = namespace(name);\n  return this.tween(key, (fullname.local ? attrTweenNS : attrTween)(fullname, value));\n}\n","function styleInterpolate(name, i, priority) {\n  return function(t) {\n    this.style.setProperty(name, i.call(this, t), priority);\n  };\n}\n\nfunction styleTween(name, value, priority) {\n  var t, i0;\n  function tween() {\n    var i = value.apply(this, arguments);\n    if (i !== i0) t = (i0 = i) && styleInterpolate(name, i, priority);\n    return t;\n  }\n  tween._value = value;\n  return tween;\n}\n\nexport default function(name, value, priority) {\n  var key = \"style.\" + (name += \"\");\n  if (arguments.length < 2) return (key = this.tween(key)) && key._value;\n  if (value == null) return this.tween(key, null);\n  if (typeof value !== \"function\") throw new Error;\n  return this.tween(key, styleTween(name, value, priority == null ? \"\" : priority));\n}\n","import {tweenValue} from \"./tween.js\";\n\nfunction textConstant(value) {\n  return function() {\n    this.textContent = value;\n  };\n}\n\nfunction textFunction(value) {\n  return function() {\n    var value1 = value(this);\n    this.textContent = value1 == null ? \"\" : value1;\n  };\n}\n\nexport default function(value) {\n  return this.tween(\"text\", typeof value === \"function\"\n      ? textFunction(tweenValue(this, \"text\", value))\n      : textConstant(value == null ? \"\" : value + \"\"));\n}\n","import {get, init} from \"./schedule.js\";\n\nfunction delayFunction(id, value) {\n  return function() {\n    init(this, id).delay = +value.apply(this, arguments);\n  };\n}\n\nfunction delayConstant(id, value) {\n  return value = +value, function() {\n    init(this, id).delay = value;\n  };\n}\n\nexport default function(value) {\n  var id = this._id;\n\n  return arguments.length\n      ? this.each((typeof value === \"function\"\n          ? delayFunction\n          : delayConstant)(id, value))\n      : get(this.node(), id).delay;\n}\n","import {get, set} from \"./schedule.js\";\n\nfunction durationFunction(id, value) {\n  return function() {\n    set(this, id).duration = +value.apply(this, arguments);\n  };\n}\n\nfunction durationConstant(id, value) {\n  return value = +value, function() {\n    set(this, id).duration = value;\n  };\n}\n\nexport default function(value) {\n  var id = this._id;\n\n  return arguments.length\n      ? this.each((typeof value === \"function\"\n          ? durationFunction\n          : durationConstant)(id, value))\n      : get(this.node(), id).duration;\n}\n","import {get, set} from \"./schedule.js\";\n\nfunction easeConstant(id, value) {\n  if (typeof value !== \"function\") throw new Error;\n  return function() {\n    set(this, id).ease = value;\n  };\n}\n\nexport default function(value) {\n  var id = this._id;\n\n  return arguments.length\n      ? this.each(easeConstant(id, value))\n      : get(this.node(), id).ease;\n}\n","import {set} from \"./schedule.js\";\n\nexport default function() {\n  var on0, on1, that = this, id = that._id, size = that.size();\n  return new Promise(function(resolve, reject) {\n    var cancel = {value: reject},\n        end = {value: function() { if (--size === 0) resolve(); }};\n\n    that.each(function() {\n      var schedule = set(this, id),\n          on = schedule.on;\n\n      // If this node shared a dispatch with the previous node,\n      // just assign the updated shared dispatch and we’re done!\n      // Otherwise, copy-on-write.\n      if (on !== on0) {\n        on1 = (on0 = on).copy();\n        on1._.cancel.push(cancel);\n        on1._.interrupt.push(cancel);\n        on1._.end.push(end);\n      }\n\n      schedule.on = on1;\n    });\n  });\n}\n","import {Transition, newId} from \"../transition/index.js\";\nimport schedule from \"../transition/schedule.js\";\nimport {easeCubicInOut} from \"d3-ease\";\nimport {now} from \"d3-timer\";\n\nvar defaultTiming = {\n  time: null, // Set on use.\n  delay: 0,\n  duration: 250,\n  ease: easeCubicInOut\n};\n\nfunction inherit(node, id) {\n  var timing;\n  while (!(timing = node.__transition) || !(timing = timing[id])) {\n    if (!(node = node.parentNode)) {\n      return defaultTiming.time = now(), defaultTiming;\n    }\n  }\n  return timing;\n}\n\nexport default function(name) {\n  var id,\n      timing;\n\n  if (name instanceof Transition) {\n    id = name._id, name = name._name;\n  } else {\n    id = newId(), (timing = defaultTiming).time = now(), name = name == null ? null : name + \"\";\n  }\n\n  for (var groups = this._groups, m = groups.length, j = 0; j < m; ++j) {\n    for (var group = groups[j], n = group.length, node, i = 0; i < n; ++i) {\n      if (node = group[i]) {\n        schedule(node, name, id, i, group, timing || inherit(node, id));\n      }\n    }\n  }\n\n  return new Transition(groups, this._parents, name, id);\n}\n","import {selection} from \"d3-selection\";\nimport selection_interrupt from \"./interrupt.js\";\nimport selection_transition from \"./transition.js\";\n\nselection.prototype.interrupt = selection_interrupt;\nselection.prototype.transition = selection_transition;\n","import interrupt from \"../interrupt.js\";\n\nexport default function(name) {\n  return this.each(function() {\n    interrupt(this, name);\n  });\n}\n","import { select, event as d3event, selection, clientPoint } from 'd3-selection';\nimport { drag as d3drag } from 'd3-drag';\nimport 'd3-transition';\nimport { mergeRecursive } from './common-utils';\n/**\n * This function takes a raw DOM element or\n * a string and returns a d3 selection of that element.\n *\n * @param {HTMLElement | string} element The element to wrap in d3 selection.\n * @return {Selection} Instance of d3 selection.\n */\nconst selectElement = element => select(element);\n\n/**\n * It creates a new d3 element on the parent element\n * @param  {Selection} parent Element to which the element is to be appended\n * @param  {Object} elemType Type of the new element\n * @param  {Array} data Data for the new element\n * @param  {Object} selector classname/id/tagname for the element\n * @return {HTMLElement} Newly Created Element\n */\nconst makeElement = (parent, elemType, data, selector, callbacks = {}, keyFn) => {\n    if ((parent instanceof HTMLElement || parent instanceof SVGElement)) {\n        parent = selectElement(parent);\n    }\n\n    const selectorVal = selector ? selector[0] : null;\n    let selectorType = null;\n    let actualSelector = null;\n    let element = null;\n    let enterSel = null;\n    let mergeSel = null;\n    let filter;\n    if (selectorVal) {\n        if (selectorVal === '#') {\n            selectorType = 'id';\n            actualSelector = selector;\n        } else {\n            selectorType = 'class';\n            actualSelector = selector[0] === '.' ? selector : `.${selector}`;\n        }\n    } else {\n        actualSelector = elemType;\n        filter = true;\n    }\n    element = parent.selectAll(actualSelector);\n\n    filter && (element = element.filter(function () {\n        return this.parentNode === parent.node();\n    }));\n    element = element.data(data, keyFn);\n\n    enterSel = element.enter()\n                            .append(elemType || 'div');\n    callbacks.enter && enterSel.each(function (...params) {\n        callbacks.enter(selectElement(this), ...params);\n    });\n\n    mergeSel = enterSel.merge(element);\n    callbacks.update && mergeSel.each(function (...params) {\n        callbacks.update(selectElement(this), ...params);\n    });\n    if (selectorType === 'class') {\n        mergeSel.classed(selectorVal === '.' ? selector.substring(1, selector.length) : selector, true);\n    } else if (selectorType === 'id') {\n        mergeSel.attr('id', selector.substring(1, selector.length));\n    }\n    const exitSel = element.exit();\n\n    if (callbacks.exit) {\n        exitSel.each(function (...params) {\n            callbacks.exit(selectElement(this), ...params);\n        });\n    } else {\n        exitSel.remove();\n    }\n    return mergeSel;\n};\n\n/**\n * This function applies styles to an element\n *  @param  {Object} elem Element Selection\n * @param  {Object} styleObj Style Object to be applied\n * @return {Element} Newly Created Element\n*/\nconst applyStyle = (elem, styleObj) => {\n    Object.entries(styleObj).forEach((d) => {\n        elem.style(d[0], d[1]);\n    }, this);\n    return elem;\n};\n\n/**\n * This function appends a dom element in another element.\n * @param {HTMLElement | SVGElement} element1 The element in which to append the second element\n * @param {HTMLElement | SVGElement} element2 The element which will be appended.\n */\nconst appendElement = (element1, element2) => {\n    element1.appendChild(element2);\n};\n\n/**\n * Sets the attributes to the element.\n * @param {HTMLElement | SVGElement} element Element on which attributes will be applied\n * @param {Object} attrs Attributes which need to be applied\n */\nconst setElementAttrs = (element, attrs) => {\n    for (const key in attrs) {\n        if ({}.hasOwnProperty.call(attrs, key)) {\n            element.attr(key, attrs[key]);\n        }\n    }\n};\n\n/**\n * Sets attributes in the svg or html element\n * @param {SVGElement | HTMLElement} element The element on which attrs will be applied\n * @param {Array.<Object>} attrs Array of attributes\n * @param {string} className className of elements to select.\n * @return {SVGElement | HTMLElement} SVGElement or html element.\n */\nconst setAttrs = (element, attrs, className) => {\n    if (!(element instanceof selection)) {\n        element = selectElement(element);\n    }\n    className !== undefined ? element.selectAll(`.${className}`).each(function () {\n        setElementAttrs(select(this), attrs);\n    }) : setElementAttrs(element, attrs);\n    return element;\n};\n\n/**\n * Adds a css class to elements which passes the filter function.If filter function is not given,\n * then all elements will be applied the class.\n * @param {HTMLElement | SVGElement} element element\n * @param {string} className css class\n * @param {string} selector css selector\n * @param {Function} filterFn filter method.\n */\nconst addClass = (element, className, selector, filterFn) => {\n    select(element).selectAll(selector).each(function (data) {\n        const elem = select(this);\n        filterFn ? filterFn(data) && elem.classed(className, true) :\n                elem.classed(className, true);\n    });\n};\n\n/**\n * Removes the css class from elements which passes the filter function.If filter function is not given,\n * then all elements will be applied the class.\n * @param {HTMLElement | SVGElement} element element\n * @param {string} className css class\n * @param {string} selector css selector\n * @param {Function} filterFn filter method.\n */\nconst removeClass = (element, className, selector, filterFn) => {\n    select(element).selectAll(selector).each(function (data) {\n        const elem = select(this);\n        filterFn ? filterFn(data) && elem.classed(className, false) :\n                elem.classed(className, false);\n    });\n};\n\n/**\n * Sets styles in the svg or html element\n * @param {SVGElement | HTMLElement} element The element on which styles will be applied\n * @param {Array.<Object>} styles Array of style attributes\n * @return {SVGElement | HTMLElement} SVGElement or html element.\n */\nconst setStyles = (element, styles) => {\n    if (!(element instanceof selection)) {\n        element = selectElement(element);\n    }\n    for (const key in styles) {\n        if ({}.hasOwnProperty.call(styles, key)) {\n            element.style(key, styles[key]);\n        }\n    }\n    return element;\n};\n\n/**\n * Creates svg or html elements by binding data to the selection.Removes extra elements\n * on exit.\n * @param {Object} params Parameter object\n * @param {SVGElement | HTMLElement} params.container Container element where all elements will be appended\n * @param {string} params.selector Selector by which elements will be selected from dom\n * @param {string} params.append Append tag\n * @param {Function} params.each Function which will be executed for each data point and element.\n */\nconst createElements = (params) => {\n    const container = select(params.container);\n    let data;\n\n    data = params.data;\n    if (typeof data === 'number') {\n        data = Array(data).fill().map((d, i) => i);\n    }\n    const sel = container.selectAll(params.selector).filter(function () {\n        return this.parentNode === container.node();\n    }).data(data);\n\n    const selectionMerge = sel.enter().append(params.append).merge(sel).each(function (d, i) {\n        params.each(d, select(this), i);\n    });\n\n    selectionMerge.attr('class', params.className || '');\n    sel.exit().remove();\n};\n\n/**\n * Clips an element with given measurement. Basically it is used to hide overflowing portions\n * of any element.\n * @param {SVGElement} container svg element which needs to be clipped.\n * @param {Object} measurement Dimensions of the clipped rectangle.\n * @param {string} id Unique id of the clip element\n */\nconst clipElement = (container, measurement, id) => {\n    const clipPathElement = makeElement(select(container), 'clipPath', [1], `#${id}`);\n    const clipPathRect = makeElement(clipPathElement, 'rect', [1]);\n    clipPathRect.attr('x', measurement.x)\n                    .attr('y', measurement.x)\n                    .attr('width', measurement.width)\n                    .attr('height', measurement.height);\n    clipPathElement.attr('clip-path', `url(#${id})`);\n};\n\n/**\n * Returns the element of the corresponding classname.\n * @param {HTMLElement | SVGElement} node html or svg node element.\n * @param {string} className css class to be applied.\n * @return {HTMLElement | SVGElement} html or svg element.\n */\nconst getElementsByClassName = (node, className) => select(node).selectAll(className).nodes();\n\n/**\n * Gets the mouse position relative to an svg type of element\n * @param {SVGElement} element Any svg element like rect, circle, etc.\n * @param {Event} event Event object.\n * @return {Object} x and y position relative to the container element passed.\n */\nconst getMousePos = (element, event) => {\n    const boundingClientRect = element.getBoundingClientRect();\n    return {\n        x: event.x - boundingClientRect.x,\n        y: event.y - boundingClientRect.y\n    };\n};\n\nconst getClientPoint = (...params) => {\n    const pos = clientPoint(...params);\n    return {\n        x: pos[0],\n        y: pos[1]\n    };\n};\n\n/** This function appends a dom element in another element.\n * @param {Object} tag The tag name of the element to append\n * @param {Object} mount Mount point fo the element\n * @return {Object} selection of the appended element\n */\nconst createElement = (tag, mount) => select(mount).append(tag).node();\n\n/**\n * Gets the d3 event function\n * @return {Object} d3 event\n */\nconst getEvent = () => d3event;\n\n/**\n * Gets the d3 drag function\n * @return {Object} d3 drag\n */\nconst getD3Drag = () => d3drag;\n\nconst getSmartComputedStyle = (group, css) => {\n    let textEl;\n    const testText = 'W';\n    const mandatoryStyle = {\n        'fill-opacity': 0\n    };\n    const className = typeof css === 'string' ? css : (css instanceof Array ? css.join(' ') : undefined);\n\n    if (group.node() instanceof HTMLElement) {\n        textEl = group.append('div').html(testText);\n    } else {\n        textEl = group.append('text').text(testText);\n    }\n\n    if (className) {\n        textEl.attr('class', className);\n    } else if (typeof css === 'object') {\n        delete css['fill-opacity'];\n        mergeRecursive(mandatoryStyle, css);\n    }\n\n    textEl.style(mandatoryStyle);\n    const computedStyle = window.getComputedStyle(textEl.node());\n    const styleForSmartLabel = {\n        fontSize: computedStyle.fontSize,\n        fontFamily: computedStyle.fontFamily,\n        fontWeight: computedStyle.fontWeight,\n        fontStyle: computedStyle.fontStyle\n    };\n\n    textEl.remove();\n\n    return styleForSmartLabel;\n};\n\nconst hasTouch = () => 'ontouchstart' in document.documentElement;\n\nexport {\n    hasTouch,\n    selectElement,\n    makeElement,\n    applyStyle,\n    addClass,\n    removeClass,\n    appendElement,\n    setAttrs,\n    setStyles,\n    createElement,\n    createElements,\n    clipElement,\n    getElementsByClassName,\n    getMousePos,\n    getEvent,\n    getD3Drag,\n    getSmartComputedStyle,\n    getClientPoint\n};\n","import Model from 'hyperdis';\nimport { defaultValue, getObjProp, toArray } from './common-utils';\n\nconst initProp = (obj, props, val = () => ({})) => {\n    props.forEach((prop) => {\n        if (!obj[prop]) {\n            obj[prop] = val();\n        }\n        obj = obj[prop];\n    });\n    return obj;\n};\n\nconst fetchPropValues = (propNames, params, deps) => params.map((param, i) => {\n    const prop = propNames[i];\n\n    return param.map(val => (val === undefined || val === null ? val : val[deps[prop]]));\n});\n\nconst addListenerToNamespace = (namespaceInf, fn, context) => {\n    let key = namespaceInf.key;\n    const namespace = namespaceInf.id;\n    const listeners = context._listeners;\n\n    if (namespace) {\n        !listeners.get(namespace) && (listeners.set(namespace, new Map()));\n        const namespaceListeners = listeners.get(namespace);\n\n        if (!key) {\n            key = namespaceListeners.size;\n        }\n        namespaceListeners.set(key, fn);\n    } else {\n        key = key || listeners.size;\n        listeners.set(key, fn);\n    }\n};\n\nconst setContexts = (contexts, propObj, contextMap) => {\n    for (const key of propObj.keys()) {\n        contexts[key] = {\n            context: contextMap[key],\n            deps: propObj.get(key).depProps\n        };\n    }\n    return contexts;\n};\n\nconst registerPropInMaps = (store, props, namespaceInf, type) => {\n    const {\n        _registeredListeners: registeredListeners,\n        _propListenerMap: propListenerMap\n    } = store;\n    const {\n        subNamespace,\n        namespace: ns\n    } = namespaceInf;\n\n    initProp(registeredListeners, [ns]);\n    props.forEach((prop) => {\n        const subNamespaces = defaultValue(getObjProp(registeredListeners, ns, prop, 'subNamespace'), []);\n        let fns = defaultValue(getObjProp(propListenerMap, prop, type, 'fns'), 0);\n\n        fns++;\n        subNamespace && subNamespaces.push(subNamespace);\n        registeredListeners[ns][prop] = {\n            subNamespace: subNamespaces,\n            allProps: props,\n            subNamespaces: {}\n        };\n        initProp(propListenerMap, [prop, type]);\n        propListenerMap[prop][type] = {\n            fns,\n            _fnCount: fns\n        };\n    });\n};\n\nconst registerListener = (context, type, ...options) => {\n    const [propList, callBack, instantCall, namespaceInf = {}] = options;\n    let props = propList;\n\n    if (!Array.isArray(propList)) {\n        props = [propList];\n    }\n\n    const { namespace: ns } = namespaceInf;\n    const callbackFn = ((propNames, namespaceVal) => (...params) => {\n        const { _savedCommits: commits, _propListenerMap: propListenerMap } = context;\n\n        if (!propNames.some(prop => getObjProp(propListenerMap, prop, 'disabled'))) {\n            if (namespaceVal) {\n                const listenersObj = context._registeredListeners[namespaceVal];\n                const contextMap = context._contextMap[namespaceVal];\n                const contextsObj = {};\n\n                propNames.forEach((prop) => {\n                    const commitsObj = defaultValue(getObjProp(commits, prop, type), {});\n                    const listeners = listenersObj[prop].subNamespaces;\n                    const propDeps = propListenerMap[prop][type];\n\n                    for (const nm in commitsObj) {\n                        const fnInf = defaultValue(propDeps[nm], { fns: 0 });\n                        let { fns } = fnInf;\n\n                        if (fns > 0) {\n                            setContexts(contextsObj, listeners[nm], contextMap);\n                            fns--;\n                        }\n\n                        if (fns <= 0) {\n                            delete commitsObj[nm];\n                        }\n                        fnInf.fns = fns;\n                    }\n                });\n                for (const key in contextsObj) {\n                    const obj = contextsObj[key];\n\n                    callBack(obj.context, ...fetchPropValues(propNames, params, obj.deps));\n                }\n            } else {\n                callBack(...params);\n            }\n        }\n    })(props, ns, type);\n\n    const fn = context.model[type](props, callbackFn, instantCall);\n\n    if (ns) {\n        registerPropInMaps(context, props, namespaceInf, type);\n    }\n    addListenerToNamespace(namespaceInf, fn, context);\n};\n\nconst retrieveNamespaces = (names, key) => {\n    if (names instanceof Object) {\n        return [names[key]];\n    } else if (names instanceof Array) {\n        return names;\n    }\n    return [names];\n};\n\nconst createMap = () => new Map();\n\nconst listenerTypes = ['next', 'on'];\n\nconst removePropValue = (context, map, propInf) => {\n    const { subNamespace: sns, prop, propListenerMap } = propInf;\n    const propObj = propListenerMap[prop];\n\n    listenerTypes.forEach((type) => {\n        if (type in propObj) {\n            delete propObj[type][sns];\n        }\n    });\n    if (map.has(sns)) {\n        const value = context.get(prop);\n\n        if (value instanceof Object && sns in value) {\n            delete value[sns];\n        }\n        map.delete(sns);\n    }\n};\n\n/**\n * Methods to handle changes to table configuration and reactivity are handled by this\n * class.\n */\n/**\n *  Common store class\n *\n * @class Store\n */\nexport class Store {\n    /**\n     * Creates an instance of Store.\n     * @param {Object} config The object to create the state store with.\n     * @memberof Store\n     */\n    constructor (config) {\n        // create reactive model\n        this.model = Model.create(config);\n        this._listeners = new Map();\n        this._registeredListeners = {};\n        this._contextMap = {};\n        this._commits = {};\n        this._savedCommits = {};\n        this._queuedProps = {};\n        this._propListenerMap = {};\n        this._locked = false;\n    }\n\n    lockModel () {\n        this.model.lock();\n        this._locked = true;\n        return this;\n    }\n\n    unlockModel () {\n        this._locked = false;\n        this.model.unlock();\n        return this;\n    }\n\n    /**\n     * This method returns a plain JSON object\n     * with all the fields in the state store.\n     *\n     * @return {Object} Serialized representation of state store.\n     * @memberof Store\n     */\n    serialize () {\n        return this.model.serialize();\n    }\n\n    lockCommits (props) {\n        props.forEach((prop) => {\n            this._commits[prop] = {\n                locked: true,\n                queue: []\n            };\n        });\n        return this;\n    }\n\n    unlockCommits (props) {\n        const commitsObj = this._commits;\n\n        this.lockModel();\n        props.forEach((prop) => {\n            commitsObj[prop].locked = false;\n            const queuedProps = {};\n            const { queue } = commitsObj[prop];\n\n            queue.forEach((params) => {\n                const [propName, value, namespace] = params;\n\n                if (namespace) {\n                    const propObj = initProp(queuedProps, [propName, namespace]);\n\n                    Object.assign(propObj, value);\n                }\n            });\n            queue.forEach((params) => {\n                const [propName, value, namespace] = params;\n\n                this.commit(propName, propName in queuedProps ? queuedProps[propName][namespace] : value,\n                    namespace);\n            });\n            delete commitsObj[prop];\n        });\n        this.unlockModel();\n        return this;\n    }\n\n    addSubNamespace (sns, namespace, context) {\n        // Get all the listeners registered by the component\n        const listeners = this._registeredListeners[namespace];\n        const propListenerMap = this._propListenerMap;\n\n        initProp(this._contextMap, [namespace]);\n        this._contextMap[namespace][sns] = context;\n        for (const key in listeners) {\n            const obj = listeners[key];\n            const propObj = propListenerMap[key];\n            const propFns = listenerTypes.reduce((acc, type) => {\n                const val = defaultValue(getObjProp(propObj, type, 'fns'), 0);\n                val && (acc[type] = val);\n                return acc;\n            }, {});\n            const { allProps, subNamespaces, subNamespace } = obj;\n            const snsArr = subNamespace.length ? subNamespace : [sns];\n\n            snsArr.forEach((ns) => {\n                const nsObj = ns instanceof Function ? ns(context) : ns;\n                const names = retrieveNamespaces(nsObj, key);\n                const depProps = allProps.reduce((acc, prop) => {\n                    acc[prop] = ns instanceof Function ? nsObj[prop] : ns;\n                    return acc;\n                }, {});\n\n                names.forEach((nm) => {\n                    initProp(subNamespaces, [nm], createMap).set(sns, {\n                        depProps\n                    });\n\n                    for (const type in propFns) {\n                        initProp(propObj, [type, nm]);\n                        const fns = propFns[type];\n\n                        propObj[type][nm] = {\n                            fns,\n                            _fnCount: fns\n                        };\n                    }\n                });\n            });\n        }\n        return this;\n    }\n\n    /**\n     * This method is used to update the value of a property in the state store.\n     *\n     * @param {string} propName The name of the property.\n     * @param {number} value The new value of the property.\n     * @memberof Store\n     */\n    commit (propName, value, namespace, disableListener = false) {\n        let sanitizedVal = value;\n        const commits = this._commits;\n        const savedCommits = this._savedCommits;\n        const locked = getObjProp(commits, propName, 'locked');\n        const propListenerMap = this._propListenerMap[propName] || {};\n\n        propListenerMap.disabled = disableListener;\n\n        if (locked) {\n            commits[propName].queue.push([propName, value, namespace]);\n            return this;\n        }\n\n        if (namespace) {\n            if (this._locked) {\n                const queuedProps = initProp(this._queuedProps, [propName]);\n                queuedProps[namespace] = value;\n                sanitizedVal = queuedProps;\n            } else {\n                sanitizedVal = defaultValue(this.get(propName), {});\n                sanitizedVal[namespace] = value;\n            }\n\n            listenerTypes.forEach((type) => {\n                initProp(savedCommits, [propName, type]);\n                savedCommits[propName][type][namespace] = true;\n                if (getObjProp(propListenerMap, type, namespace)) {\n                    propListenerMap[type][namespace].fns = propListenerMap[type][namespace]._fnCount;\n                }\n            });\n        }\n\n        this.model.prop(propName, sanitizedVal);\n        return this;\n    }\n\n    /**\n     * This method is used to register a callback that will execute\n     * when one or more properties change.\n     *\n     * @param {string | Array} propNames name of property or array of props.\n     * @param {Function} callBack The callback to execute.\n     * @memberof Store\n     */\n    /* istanbul ignore next */registerChangeListener (...params) {\n        registerListener(this, 'next', ...params);\n        return this;\n    }\n\n    /**\n     * This method is used to register a callback that will execute\n     * when one or more properties change.\n     *\n     * @param {string | Array} propNames name of property or array of props.\n     * @param {Function} callBack The callback to execute.\n     * @memberof Store\n     */\n    /* istanbul ignore next */ registerImmediateListener (...params) {\n        registerListener(this, 'on', ...params);\n    }\n\n    /**\n     * This method is used to get the name of the property\n     * from the state store.\n     *\n     * @param {string} propName The name of the field in state store.\n     * @return {any} The value of the field.\n     * @memberof Store\n     */\n    get (propName, subNamespace) {\n        const value = this.model.prop(propName);\n        return subNamespace ? value && value[subNamespace] : value;\n    }\n\n    /**\n     * This method is used to register a computed property that is computed every time\n     * the store value changes.\n     *\n     * @param {string} propName The name of the property to create.\n     * @param {Function} callBack The function to execute when depemdent props change.\n     * @memberof Store\n     */\n    computed (propName, callBack) {\n        return this.model.calculatedProp(propName, callBack);\n    }\n\n    append (...params) {\n        this.model.append(...params);\n        return this;\n    }\n\n    unsubscribeAll () {\n        Object.values(this._listeners).forEach(fn => fn());\n        return this;\n    }\n\n    unsubscribe (namespaceInf = {}) {\n        const { id, key } = namespaceInf;\n        const listenersMap = this._listeners;\n        const listeners = listenersMap.get(id);\n\n        if (key) {\n            const fn = listenersMap.get(key);\n\n            fn && fn();\n        } else {\n            for (const fn of listeners.values()) {\n                fn();\n            }\n            listenersMap.set(id, []);\n        }\n        return this;\n    }\n\n    removeSubNamespace (subNamespace, namespace) {\n        const {\n            _registeredListeners: listenerMap,\n            _contextMap: contextMap,\n            _propListenerMap: propListenerMap\n        } = this;\n        const listenersObj = listenerMap[namespace];\n\n        for (const prop in listenersObj) {\n            const { subNamespaces } = listenersObj[prop];\n            const propInf = {\n                subNamespace,\n                prop,\n                propListenerMap\n            };\n\n            if (subNamespaces[subNamespace]) {\n                removePropValue(this, subNamespaces[subNamespace], propInf);\n                delete subNamespaces[subNamespace];\n            } else {\n                for (const ns in subNamespaces) {\n                    const snsMap = subNamespaces[ns];\n\n                    removePropValue(this, snsMap, propInf);\n                    if (!snsMap.size) {\n                        delete subNamespaces[ns];\n                    }\n                }\n            }\n        }\n        delete contextMap[namespace][subNamespace];\n        return this;\n    }\n}\n\n/**\n * Setter getter creator from config\n * Format\n *  PROPERTRY_NAME: {\n *      value: // default value of the property,\n *      meta: {\n *          typeCheck: // The setter value will be checked using this. If the value is function then the setter value\n *                     // is passed as args. (Optional)\n *          typeExpected: // The output of typecheck action will be tested against this. Truthy value will set the\n *                       // value to the setter\n *          sanitization: // Need for sanitization before type is checked\n *      }\n *  }\n *\n * @param {Object} holder an empty object on which the getters and setters will be mounted\n * @param {Object} options options config based on which the getters and setters are determined.\n * @param {Hyperdis} model optional model to attach the property. If not sent new moel is created.\n * @return {Array}\n */\nexport const transactor = (holder, options, model, namespaceInf = {}) => {\n    let conf;\n    const store = model instanceof Store ? model : new Store({});\n    const stateProps = {};\n    const { namespace, subNamespace } = namespaceInf;\n\n    for (const prop in options) {\n        if ({}.hasOwnProperty.call(options, prop)) {\n            conf = options[prop];\n            const nameSpaceProp = namespace ? `${namespace}.${prop}` : prop;\n\n            if (subNamespace) {\n                const value = defaultValue(store.get(nameSpaceProp), {});\n                value[subNamespace] = conf.value;\n                stateProps[nameSpaceProp] = value;\n            } else {\n                stateProps[prop] = conf.value;\n            }\n\n            holder[prop] = ((context, meta, nsProp) => (...params) => {\n                const paramsLen = params.length;\n                if (paramsLen) {\n                    const { takesMultipleParams = false } = meta || {};\n                    // If parameters are passed then it's a setter\n                    let val = takesMultipleParams ? params : params[0];\n\n                    if (meta) {\n                        let values;\n                        const prevVal = context.get(nsProp, subNamespace);\n                        const { sanitization, typeCheck, typeExpected } = meta;\n                        if (typeof sanitization === 'function') {\n                            // Sanitize if required\n                            val = sanitization(val, prevVal, holder);\n                        }\n\n                        // Checking if a setter is valid\n                        if (typeof typeCheck === 'function') {\n                            const typeCheckResult = typeCheck(val);\n\n                            if (typeCheckResult) {\n                                values = val;\n                            }\n                        } else if (typeof typeCheck === 'string' && typeCheck === 'constructor') {\n                            if (val && val.constructor.name === typeExpected) {\n                                values = val;\n                            }\n                        } else {\n                            values = val;\n                        }\n\n                        const preset = meta.preset;\n                        const oldValues = toArray(context.get(nsProp, subNamespace));\n                        preset && preset(values, holder);\n                        if (takesMultipleParams) {\n                            oldValues.forEach((value, i) => {\n                                if (values[i] === undefined) {\n                                    values[i] = value;\n                                }\n                            });\n                        }\n                        values && context.commit(nsProp, values, subNamespace);\n                    } else {\n                        context.commit(nsProp, val, subNamespace);\n                    }\n                    return holder;\n                }\n                // No parameters are passed hence its a getter\n                return context.get(nsProp, subNamespace);\n            })(store, conf.meta, nameSpaceProp, Array.isArray(conf.value));\n        }\n    }\n\n    if (subNamespace) {\n        for (const key in stateProps) {\n            store.commit(key, stateProps[key][subNamespace], subNamespace);\n        }\n    } else if (namespace === undefined) {\n        store.append(stateProps);\n    } else {\n        store.append(namespace, stateProps);\n    }\n\n    return [holder, store];\n};\n","const events = [\n    'initialized',\n    'beforeupdate',\n    'updated',\n    'beforedraw',\n    'drawn',\n    'beforeremove',\n    'removed',\n    'animationend'\n];\n\nconst compositions = [\n    'canvas',\n    'unit',\n    'layer',\n    'axis',\n    'facet-headers',\n    'legend',\n    'caption'\n];\n\nconst EVENT_LIST = [];\n\ncompositions.forEach((composition) => {\n    events.forEach((event) => {\n        EVENT_LIST.push(`${composition}.${event}`);\n    });\n});\n\nexport default EVENT_LIST;\n","import EVENT_LIST from './event-list';\nimport { createPromise } from './helper';\n\n/**\n * At first call it accepts one function\n * calling it second time accepts notification object.\n * notification object then called with first accepted function\n *\n * @param {Function} resolveFn a promise's resolve function\n * @return {Function} a function to accept notification object\n */\nconst resolver = resolveFn => notification => resolveFn(notification);\n\n/**\n * Checks if the property string is present in the source object\n *\n * @param {Object} source source object whom you want to check the property\n * @param {string} property key name that need to be checked\n * @return {boolean} returns true if the property found in the source object\n */\nconst hasOwn = (source, property) => Object.prototype.hasOwnProperty.call(source, property);\n\n/**\n * LifeCycleManager which goes as a dependendecy to a muze\n * it accepts notification from the entire library throughout\n * the exeecution life\n *\n * @export\n * @class LifeCycleManager\n */\nexport default class LifeCycleManager {\n\n    /**\n     * Creates an instance of LifeCycleManager.\n     * @memberof LifeCycleManager\n     */\n    constructor () {\n        this._eventList = EVENT_LIST;\n        this._promises = new Map();\n        this._notifiers = {};\n        this._lifeCycles = {};\n        this._unreleasedLifeCycles = {};\n        this._boot();\n    }\n\n    /**\n     * Fills all the notifiers with resolver callback\n     *\n     * @memberof LifeCycleManager\n     */\n    _boot () {\n        this._notifiers = this._eventList.reduce((acc, name) => {\n            acc[name] = resolver;\n            return acc;\n        }, {});\n        this._preparePromises();\n    }\n\n    /**\n     * Public method which gives the promise corresponding\n     * to the event name\n     *\n     * @param {string} eventName name of the event like `canvas.drawn`\n     * @return {promise} promise that is passed to the user\n     * @memberof LifeCycleManager\n     */\n    retrieve (eventName) {\n        return this._promises.get(eventName);\n    }\n\n    /**\n     * Creates a promise that will be passed to user's callback\n     *\n     * @param {string} eventName name of the event like `canvas.drawn`\n     * @return {promise} a pending promise waiting for resolve to be called\n     * @memberof LifeCycleManager\n     */\n    _makeNotifierPromise (eventName) {\n        return new Promise((resolve) => {\n            this._notifiers[eventName] = resolver(resolve);\n        });\n    }\n\n    /**\n     * Prepares the promise map with pending promises\n     * all the promises are in a pending state where their's\n     * resolve function waiting to be called with notification object\n     * @memberof LifeCycleManager\n     */\n    _preparePromises () {\n        this._eventList.forEach((eventName) => {\n            const promise = this._makeNotifierPromise(eventName);\n            this._promises.set(eventName, promise);\n            createPromise(promise, eventName, this);\n        });\n    }\n\n    /**\n     * Resolves the promise with notification object\n     *\n     * @param {string} eventName name of the event in the system\n     * @param {Object} notification notification object\n     * @param {string} notification.formalName name of the sender creating the notification\n     * @param {Object} notification.client instance or array of instances sending the notification\n     * @param {string} notification.action the stage name when the event happened like `beforedraw`\n     *\n     * @memberof LifeCycleManager\n     */\n    _resolvePromise (eventName, notification) {\n        this._notifiers[eventName](notification);\n    }\n\n    /**\n     * Public method which is being called by different\n     * subcompoents of the system at different execution atages\n     * @param {Object} notification notification object\n     * @param {string} notification.formalName name of the sender creating the notification\n     * @param {Object} notification.client instance or array of instances sending the notification\n     * @param {string} notification.action the stage name when the event happened like `beforedraw`\n     * @memberof LifeCycleManager\n     */\n    notify (notification) {\n        // get the composition name from notification\n        // or from static formalName() method\n        const composition = notification.formalName || notification.client.constructor.formalName();\n        notification.formalName = composition;\n        this._releasePromisesFromCache();\n        this._notify(composition, notification);\n    }\n\n    /**\n     * Notify user the with promsie in a callback\n     * if callback not found then cache it\n     *\n     * @param {string} composition\n     * @param {Object} notification notification object\n     * @param {string} notification.formalName name of the sender creating the notification\n     * @param {Object} notification.client instance or array of instances sending the notification\n     * @param {string} notification.action the stage name when the event happened like `beforedraw`\n     * @memberof LifeCycleManager\n     */\n    _notify (composition, notification) {\n        const stage = notification.action;\n        const eventName = `${composition}.${stage}`;\n\n        // resolves promise with the notification object\n        this._resolvePromise(eventName, notification);\n\n        // get the promise from the promise map\n        const promise = this.retrieve(eventName);\n\n        if (this._lifeCycles[composition]) {\n            if (this._lifeCycles[composition][stage]) {\n                // if user given call back exists, then call with promise\n                this._callLifeCycleCallback(composition, stage, promise);\n            } else {\n                // otherwise cache the promise\n                this._cachePromise(composition, stage, promise);\n            }\n        } else {\n            this._cachePromise(composition, stage, promise);\n        }\n    }\n\n    /**\n     * Calls the user's callback with callback\n     *\n     * @param {string} composition name of the compositon like `canvas`\n     * @param {string} stage the stage name when the event happened like `beforedraw`\n     * @param {promise} promise promise that is passed to the user\n     * @memberof LifeCycleManager\n     */\n    _callLifeCycleCallback (composition, stage, promise) {\n        const eventName = `${composition}.${stage}`;\n        this._lifeCycles[composition][stage](promise);\n        this._resetTargetPromise(eventName);\n    }\n\n    /**\n     * Try to clear the cached promsies once we have\n     * macthed callbacks from the user\n     *\n     * @memberof LifeCycleManager\n     */\n    _releasePromisesFromCache () {\n        const compositions = Object.keys(this._unreleasedLifeCycles);\n        compositions.forEach((composition) => {\n            const stages = Object.keys(this._unreleasedLifeCycles[composition]);\n            stages.forEach((stage) => {\n                if (this._lifeCycles[composition]) {\n                    if (this._lifeCycles[composition][stage]) {\n                        // take the promise from unreleased lifeCycles\n                        const promise = this._unreleasedLifeCycles[composition][stage];\n                        // call the user given callback with that promise\n                        this._callLifeCycleCallback(composition, stage, promise);\n                        // delete promise from unreleased lifeCycles\n                        delete this._unreleasedLifeCycles[composition][stage];\n                    }\n                }\n            });\n        });\n    }\n\n    /**\n     * Cache the promise in the map. This cache\n     * then get consumed if we get user callbacks\n     * @param {string} composition name of the compositon like `canvas`\n     * @param {string} stage the stage name when the event happened like `beforedraw`\n     * @param {promise} promise promise that is passed to the user\n     * @memberof LifeCycleManager\n     */\n    _cachePromise (composition, stage, promise) {\n        if (!hasOwn(this._unreleasedLifeCycles, composition)) {\n            this._unreleasedLifeCycles[composition] = {};\n        }\n\n        if (!hasOwn(this._unreleasedLifeCycles[composition], stage)) {\n            this._unreleasedLifeCycles[composition][stage] = {};\n        }\n        this._unreleasedLifeCycles[composition][stage] = promise;\n    }\n\n    /**\n     * It register's the callbacks gievn the user\n     *\n     * @param {Object} [lifeCycles={}] a object with list of callbacks\n     * @memberof LifeCycleManager\n     */\n    register (lifeCycles = {}) {\n        this._lifeCycles = lifeCycles;\n        // as we get all the callbacks, try to call them\n        // from unreleased promise map\n        this._releasePromisesFromCache();\n    }\n\n    /**\n     * Reset the promise into pending state\n     *\n     * @param {string} eventName name of the event happening\n     * @memberof LifeCycleManager\n     */\n    _resetTargetPromise (eventName) {\n        setTimeout(() => {\n            this._notifiers[eventName] = resolver;\n            this._promises.set(eventName, this._makeNotifierPromise(eventName));\n        }, 0);\n    }\n}\n","import LifeCycleManager from './lifecycle-manager';\n\nexport default LifeCycleManager;\n","/**\n * Creates a new promise when the given promise is resolved. This needs to be done so that after the lifecycle event\n * is completed, then again when the event gets completed, then a new promise gets resolved.\n *\n * @param {Promise} promise Instance of promise\n * @param {string} eventName name of event\n * @param {LifeCycleManager} context Instance of lifecyclemanager\n */\nexport const createPromise = (promise, eventName, context) => {\n    promise.then(() => {\n        const prm = context._makeNotifierPromise(eventName);\n        context._promises.set(eventName, prm);\n        createPromise(prm, eventName, context);\n    });\n};\n","import { default as DataModel } from 'datamodel';\nimport * as scales from './scales';\nimport * as colorSchemes from './color-schemes';\nimport * as STATE_NAMESPACES from './enums/namespace';\nimport RTree from './r-tree';\n\nconst InvalidAwareTypes = DataModel.InvalidAwareTypes;\n\nexport {\n    InvalidAwareTypes,\n    DataModel\n};\n\nexport {\n    ReservedFields,\n    CommonProps,\n    COORD_TYPES\n} from './enums';\n\nexport { STATE_NAMESPACES };\n\nexport {\n    scales,\n    colorSchemes\n};\n\nexport {\n    getNearestValue,\n    getValueParser,\n    transformColor,\n    transformColors,\n    detectColor,\n    hslToRgb,\n    rgbToHsv,\n    hexToHsv,\n    hsvToRgb,\n    hslaToRgb,\n    escapeHTML,\n    angleToRadian,\n    generateGetterSetters,\n    getArraySum,\n    ERROR_MSG,\n    interpolator,\n    colorInterpolator,\n    numberInterpolator,\n    piecewiseInterpolator,\n    reqAnimFrame,\n    cancelAnimFrame,\n    nextAnimFrame,\n    getMax,\n    getMin,\n    getDomainFromData,\n    getUniqueId,\n    mergeRecursive,\n    unionDomain,\n    replaceCSSPrefix,\n    symbolFns,\n    defaultValue,\n    easeFns,\n    clone,\n    interpolateArray,\n    getMinPoint,\n    getMaxPoint,\n    getClosestIndexOf,\n    registerListeners,\n    Voronoi,\n    checkExistence,\n    sanitizeIP,\n    getMinDiff,\n    capitalizeFirst,\n    getWindow,\n    getQualifiedClassName,\n    getDependencyOrder,\n    objectIterator,\n    intSanitizer,\n    enableChainedTransaction,\n    isHTMLElem,\n    isEqual,\n    isSimpleObject,\n    nextFrame,\n    getObjProp,\n    getDataModelFromIdentifiers,\n    getDataModelFromRange,\n    transposeArray,\n    toArray,\n    extendsClass,\n    concatModels,\n    assembleModelFromIdentifiers,\n    isValidValue,\n    nestCollection,\n    stack,\n    getSymbol,\n    Scales,\n    Symbols,\n    pathInterpolators,\n    hslInterpolator,\n    getSmallestDiff,\n    require,\n    formatTemporal,\n    nearestSortingDetails,\n    createSelection,\n    temporalFields,\n    retrieveNearestGroupByReducers,\n    retrieveFieldDisplayName,\n    sanitizeDomainWhenEqual,\n    sortCategoricalField,\n    intersect,\n    partition,\n    mix,\n    componentRegistry,\n    getArrayDiff,\n    difference,\n    getArrayIndexMap,\n    arraysEqual,\n    getReadableTicks,\n    unique,\n    dmMultipleSelection,\n    pointWithinCircle,\n    getIndexMap\n} from './common-utils';\n\nexport {\n    selectElement,\n    makeElement,\n    applyStyle,\n    addClass,\n    removeClass,\n    appendElement,\n    setAttrs,\n    setStyles,\n    createElement,\n    createElements,\n    clipElement,\n    getElementsByClassName,\n    getMousePos,\n    getEvent,\n    getD3Drag,\n    getSmartComputedStyle,\n    getClientPoint,\n    hasTouch\n} from './renderer-utils';\n\nexport {\n    Store,\n    transactor\n} from './store';\n\nexport {\n    timeMillisecond,\n    timeSecond,\n    timeMinute,\n    timeHour,\n    timeDay,\n    timeWeek,\n    timeMonth,\n    timeYear\n} from 'd3-time';\n\nexport { default as Smartlabel } from 'fusioncharts-smartlabel';\nexport { dataSelect } from './DataSystem';\n\nexport { default as LifeCycleManager } from './lifecycle-manager';\n\nexport {\n    DimensionSubtype,\n    FieldType,\n    MeasureSubtype,\n    DateTimeFormatter,\n    DM_DERIVATIVES,\n    GROUP_BY_FUNCTIONS\n} from 'datamodel';\n\nexport {\n    RTree\n};\n\n","export const CLASSPREFIX = 'muze';\nexport const STACK = 'stack';\nexport const GROUP = 'group';\nexport const IDENTITY = 'identity';\nexport const ANGLE = 'angle';\nexport const RADIUS = 'radius';\nexport const SIZE = 'size';\nexport const COLOR = 'color';\nexport const SHAPE = 'shape';\nexport const TEXT = 'text';\nexport const OUTER_RADIUS_VALUE = 'outerRadiusValue';\nexport const TEXT_ANCHOR_MIDDLE = 'middle';\nexport const ENCODING = {\n    X: 'x',\n    Y: 'y',\n    X0: 'x0',\n    Y0: 'y0',\n    RADIUS: 'radius',\n    RADIUS0: 'radius0',\n    ANGLE: 'angle',\n    ANGLE0: 'angle0',\n    COLOR: 'color',\n    SHAPE: 'shape',\n    SIZE: 'size',\n    TEXT: 'text'\n};\n\nexport const STROKE_DASHARRAY = 'stroke-dasharray';\n\nexport const ASCENDING = 'asc';\n\nexport const AGG_FN_SUM = 'sum';\n\nexport const AREA_LAYER = 'area';\nexport const ARC_LAYER = 'arc';\nexport const LINE_LAYER = 'line';\nexport const TEXT_LAYER = 'text';\nexport const POINT_LAYER = 'point';\nexport const BAR_LAYER = 'bar';\nexport const TICK_LAYER = 'tick';\nexport const SIMPLE_LAYER = 'simple';\nexport const BASE_LAYER = 'base';\n","import { ERROR_MSG } from 'muze-utils';\n\n/**\n * This is an interface class which any new layer class has to extend.\n *\n * @example\n * class BarLayer extends BaseLayer {\n *   update (params) {\n *       // super.update(params);\n *       // Update the bar layer\n *   }\n * }\n * @class\n */\nexport default class SimpleLayer {\n\n    formalName () {\n        throw new Error(ERROR_MSG.INTERFACE_IMPL);\n    }\n\n    /**\n     * Sets or gets the dependencies.\n     * @param {Object} dependencies Dependencies needed by layer\n     * @return {BaseLayer} Instance of base layer.\n     */\n    dependencies () {\n        throw new Error(ERROR_MSG.INTERFACE_IMPL);\n    }\n\n    /**\n     * Returns the config of the layer\n     *\n     * @param {Object} config Configuration of layer\n     * @return {Object} configuration of layer\n     */\n    config () {\n        throw new Error(ERROR_MSG.INTERFACE_IMPL);\n    }\n\n    /**\n     * Acts as a getter or setter function\n     * When setter\n     * Returns the datamodel of the layer\n     * @param { DataModel } dataModel instance of DataModel\n     * @return { DataModel } DataModel instance of the layer\n     */\n    data () {\n        throw new Error(ERROR_MSG.INTERFACE_IMPL);\n    }\n\n    /**\n     * Returns a serialized schema of the layer\n     * @return {Object} Serialized schema\n     */\n    serialize () {\n        throw new Error(ERROR_MSG.INTERFACE_IMPL);\n    }\n\n    /**\n     * Returns the unique identifier of this layer\n     * @return {string} id of the layer\n     */\n    id () {\n        throw new Error(ERROR_MSG.INTERFACE_IMPL);\n    }\n    /*\n     * This method resolves the x, y, x0 and y0 values from the transformed data.\n     * It also checks the type of transformed data for example, if it is a stacked data\n     * then it fetches the y and y0 values from the stacked data.\n     * @param {Array.<Array>} transformedData transformed data\n     * @param {Object} fieldMap field definitions\n     * @param {string} transformType type of transformed data - stack, group or identity.\n     * @return {Array.<Object>} Normalized data\n     * @private\n     */\n    normalizeTransformedData () {\n        throw new Error(ERROR_MSG.INTERFACE_IMPL);\n    }\n\n    /**\n     * Gets the transform method from transform factory based on type of transform. It then calls the\n     * transform method with the data and passes the configuration parameters of transform such as\n     * groupBy, value field, etc.\n     *\n     * @param {DataModel} dataModel Instance of dataModel\n     * @param {Object} config configuration for transforming data\n     * @return {Array.<Array>} Transformed data.\n     * @private\n     */\n    getTransformedData () {\n        throw new Error(ERROR_MSG.INTERFACE_IMPL);\n    }\n\n    /**\n     * Calculates the domain from the data.\n     * It checks the type of field and calculates the domain based on that. For example, if it\n     * is a quantitative or temporal field, then it calculates the min and max from the data or\n     * if it is a nominal field then it gets all the values from the data of that field.\n     * @param {Array} data DataArray\n     * @return {Array} Domain values array.\n     */\n    _calculateDomainFromData () {\n        throw new Error(ERROR_MSG.INTERFACE_IMPL);\n    }\n\n    /**\n     * Returns the domain for the axis.\n     *\n     * @param {string} encodingType type of encoding x, y, color, etc.\n     * @return {Object} Axis domains\n     */\n    getDomain () {\n        throw new Error(ERROR_MSG.INTERFACE_IMPL);\n    }\n\n    /**\n     * Abstract method for getting nearest point\n     * @return {BaseLayer} Instance of base layer\n     */\n    getNearestPoint () {\n        throw new Error(ERROR_MSG.INTERFACE_IMPL);\n    }\n\n    /**\n     * Abstract method for highlighting points\n     * @return {BaseLayer} Instance of base layer\n     */\n    highlightPoint () {\n        throw new Error(ERROR_MSG.INTERFACE_IMPL);\n    }\n\n    /**\n     * Abstract method for deselecting points\n     * @return {BaseLayer} Instance of base layer\n     */\n    dehighlightPoint () {\n        return this;\n    }\n\n    linkLayerStore () {\n        throw new Error(ERROR_MSG.INTERFACE_IMPL);\n    }\n\n    /**\n     * Sets the container element for the layer to be renderered.\n     * @param {SVGElement} mountPoint SVG element or group element.\n     */\n    mount () {\n        throw new Error(ERROR_MSG.INTERFACE_IMPL);\n    }\n\n    render () {\n        throw new Error(ERROR_MSG.INTERFACE_IMPL);\n    }\n}\n","export const DATA = 'data';\nexport const CONFIG = 'config';\nexport const MEASUREMENT = 'measurement';\nexport const DOMAIN = 'domain';\nexport const MOUNT = 'mount';\n","import { COORD_TYPES, mergeRecursive } from 'muze-utils';\nimport * as PROPS from '../enums/props';\n\nconst { CARTESIAN } = COORD_TYPES;\nexport const props = {\n    axes: {},\n    mount: {},\n    measurement: {},\n    metaInf: {},\n    valueParser: {\n        defaultValue: val => val\n    },\n    coord: {\n        defaultValue: CARTESIAN\n    },\n    [PROPS.CONFIG]: {\n        value: null,\n        sanitization: (context, config) => {\n            context._customConfig = config;\n            const constructor = context.constructor;\n            const newConf = mergeRecursive({}, constructor.defaultConfig());\n\n            return constructor.defaultPolicy(newConf, config);\n        }\n    },\n    encodingTransform: {},\n    encodingFieldsInf: {},\n    dependencies: {},\n    dataProps: {}\n};\n","/**\n * @module Axis\n * This file declares a class that is used to render an axis to add  meaning to\n * plots.\n */\nimport { Symbols } from 'muze-utils';\nimport * as AxisOrientation from '../enums/axis-orientation';\n\n/**\n * @module Axis\n * This file exports constants that are used to reference axis orientations\n * in a consistent manner.\n */\nexport const BOTTOM = 'bottom';\nexport const TOP = 'top';\nexport const LEFT = 'left';\nexport const RIGHT = 'right';\n\n/**\n  * This object is used to associate the axis orientation with the d3 class\n  * used to represent that axis.\n  */\nexport const axisOrientationMap = {\n    [AxisOrientation.LEFT]: Symbols.axisLeft,\n    [AxisOrientation.BOTTOM]: Symbols.axisBottom,\n    [AxisOrientation.RIGHT]: Symbols.axisRight,\n    [AxisOrientation.TOP]: Symbols.axisTop\n};\n","/**\n * @module axis\n * This file exports constants used to reference scale type\n * consistently throughout the project.\n */\nexport const LINEAR = 'linear';\nexport const BAND = 'band';\nexport const TIME = 'temporal';\nexport const COLOR = 'color';\nexport const ORDINAL = 'ordinal';\nexport const QUANTIZE = 'quantize';\nexport const QUANTILE = 'quantile';\nexport const LOG = 'log';\nexport const POW = 'pow';\nexport const IDENTITY = 'identity';\nexport const SEQUENTIAL = 'sequential';\nexport const THRESHOLD = 'threshold';\n","export const CLASSPREFIX = 'muze';\n\nexport const CONTINOUS = 'continous';\nexport const DISCRETE = 'discrete';\nexport const SEQUENTIAL = 'sequential';\nexport const ORDINAL = 'ordinal';\nexport const LINEAR = 'linear';\nexport const BAND = 'band';\nexport const THRESHOLD = 'threshold';\nexport const QUANTIZE = 'quantize';\nexport const QUANTILE = 'quantile';\n\nexport const COLOR = 'color';\nexport const SHAPE = 'shape';\nexport const SIZE = 'size';\n\nexport const DOMAIN = 'domain';\nexport const HIDDEN = 'hidden';\nexport const NUMBER = 'number';\nexport const BOTTOM = 'bottom';\nexport const TOP = 'top';\n\nexport const RGB = 'rgb';\nexport const HEX = 'hex';\nexport const HSLA = 'hsla';\nexport const HSL = 'hsl';\n\nexport const DEFAULT_ANGLE_DOMAIN = [1];\nexport const MIN_NO_OF_TICKS = 2;\nexport const DEFAULT_NO_OF_TICKS = 10;\n\n","import { scales, colorSchemes } from 'muze-utils';\n\nimport {\n    SEQUENTIAL,\n    ORDINAL,\n    LINEAR,\n    CONTINOUS,\n    THRESHOLD,\n    QUANTIZE\n} from './enums/constants';\n\nimport * as ScaleType from './enums/scale-type';\n\nconst {\n    scaleLinear,\n    scaleThreshold,\n    scaleLog,\n    scalePow,\n    scaleIdentity,\n    scaleOrdinal,\n    scaleSequential,\n    scaleQuantize,\n    scaleQuantile,\n    schemeCategory10,\n    schemeCategory20,\n    schemeCategory20b,\n    scaleBand,\n    scaleTime\n} = scales;\nexport const scaleMap = {\n    [ScaleType.LINEAR]: scaleLinear,\n    [ScaleType.BAND]: scaleBand,\n    [ScaleType.QUANTIZE]: scaleQuantize,\n    [ScaleType.QUANTILE]: scaleQuantile,\n    [ScaleType.THRESHOLD]: scaleThreshold,\n    [ScaleType.SEQUENTIAL]: scaleSequential,\n    [ScaleType.LOG]: scaleLog,\n    [ScaleType.POW]: scalePow,\n    [ScaleType.IDENTITY]: scaleIdentity,\n    [ScaleType.TIME]: scaleTime,\n    [ScaleType.COLOR]: scaleLinear,\n    [ScaleType.ORDINAL]: scaleOrdinal\n};\nexport const SCHEMES = {\n    SCHEME1: schemeCategory10,\n    SCHEME2: schemeCategory20,\n    SCHEME3: schemeCategory20b\n};\n\n/**\n * Accepts a scheme in a string format and returns the scale from d3-scale-chromatic\n *\n * @export\n * @param {string} scheme a string representing the kind of scheme for the color axis\n * @return {Object} The corresponding scale from a scheme type from d3 chromatic scale\n */\nexport function getScheme (scheme) {\n    if (scheme[0] === 'i') {\n        return scaleSequential(colorSchemes[scheme]);\n    }\n    return scaleOrdinal(colorSchemes[scheme]);\n}\n\n/**\n *\n *\n * @export\n * @param {*} scheme\n *\n */\nexport function getSchemeType (scheme) {\n    let schemeType = '';\n    if (scheme && typeof (scheme) === 'string') {\n        schemeType = scheme[0] === 'i' ? SEQUENTIAL : ORDINAL;\n    } else {\n        schemeType = ORDINAL;\n    }\n    return schemeType;\n}\n\n/**\n * This function is used to create a scale that is assigned to\n * an instance of axis.\n *\n * @export\n * @param {Object} params the input parameters to create a Scale object\n * @param {string} params.type the type of scale\n * @param {Array} params.range the range of scale\n * @return {Object} instance of scale\n */\nexport function createScale (params) {\n    if (!params.type || !scaleMap[params.type]) {\n        throw new Error(`${params.type} is not a valid scale type`);\n    }\n    if (!Array.isArray(params.range)) {\n        throw new Error('range parameter must be an array');\n    }\n    let scaleFactory = null;\n    const range = params.range;\n    // @todo: do it using scale decorator\n    if (params.type === LINEAR && params.interpolator) {\n        scaleFactory = scaleMap[params.interpolator];\n        if (params.interpolator === ScaleType.POW) {\n            return scaleFactory().range(range).exponent(params.exponent);\n        } else if (params.interpolator === ScaleType.LOG) {\n            return scaleFactory().range(range).base([params.base]);\n        }\n    } else {\n        scaleFactory = scaleMap[params.type];\n    }\n\n    if (params.type === QUANTIZE) {\n        scaleFactory().nice();\n    }\n    return scaleFactory().range(range);\n}\n\n/**\n * This method is used to update the range of a scale\n * so that the core module can remain agnostic of the d3\n * scale api.\n *\n * @export\n * @param {Scale} scale Instance of d3 Scale.\n * @param {Array} range new range of the scale.\n * @return {Scale} Updated scale.\n */\nexport function updateScaleRange (scale, range) {\n    return scale.range(range);\n}\n\n/**\n *\n *\n * @export\n * @param {*} domainType\n * @param {*} rangeType\n * @param {*} steps\n *\n */\nexport function getScaleType (domainType, rangeType, steps) {\n    if (rangeType === CONTINOUS) {\n        return LINEAR;\n    }\n    if (domainType === CONTINOUS) {\n        if (steps instanceof Array) {\n            return THRESHOLD;\n        }\n        return QUANTIZE;\n    }\n    return ORDINAL;\n}\n","import { getUniqueId } from 'muze-utils';\nimport { CLASSPREFIX } from '../enums/constants';\n\n/**\n *\n *\n */\nexport const defaultConfig = {\n    id: getUniqueId(),\n    adjustRange: false,\n    axisName: {\n        defClassName: 'axis-name'\n    },\n    axisNamePadding: 7,\n    base: 10,\n    classPrefix: CLASSPREFIX,\n    className: `${CLASSPREFIX}-axis`,\n    exponent: 1,\n    interpolator: 'linear',\n    fixedBaseline: true,\n    labels: {\n        rotation: null,\n        smartTicks: null\n    },\n    orientation: 'left',\n    numberFormat: val => val,\n    padding: 0.3,\n    nice: true,\n    numberOfTicks: null,\n    rotate: false,\n    show: true,\n    showAxisName: true,\n    showInnerTicks: true,\n    showOuterTicks: true,\n    style: {},\n    type: 'linear',\n    tickFormat: null,\n    tickValues: null,\n    xOffset: 0,\n    yOffset: 0,\n    defaultSort: 'asc'\n};\n\n","/**\n * This file exports functionality that is used to render axis.\n */\nimport { selectElement, makeElement, angleToRadian } from 'muze-utils';\nimport * as AxisOrientation from './enums/axis-orientation';\nimport { LINEAR, HIDDEN, BOTTOM, TOP } from './enums/constants';\n\n/**\n *\n *\n * @param {*} instance\n * @param {*} container\n * @param {*} labelManager\n * @param {*} config\n */\nconst rotateAxis = (instance, tickText, labelManager) => {\n    let rotation;\n    const axis = instance.axis();\n    const config = instance.config();\n    const renderConfig = instance.renderConfig();\n    const smartTicks = instance.smartTicks();\n    const scale = axis.scale();\n    const labelFunc = scale.ticks || scale.quantile || scale.domain;\n    const ticks = labelFunc();\n    const {\n        orientation,\n        fixedBaseline,\n        type\n    } = config;\n    const {\n        labels\n    } = renderConfig;\n\n    rotation = labels.rotation;\n\n    const tickSize = instance.getTickSize();\n    tickText.each(function (d, index) {\n        let yShift;\n        let xShift;\n        let datum = smartTicks[index] ? smartTicks[index].text : d;\n\n        datum = datum.toString();\n\n        const tickLabelDim = labelManager.getOriSize(datum);\n\n        const width = tickLabelDim.width * 0.5;\n        const height = tickLabelDim.height * 0.5;\n\n        if (rotation < 0) {\n            rotation = 360 + rotation;\n        }\n\n        const quadrant = 4 - Math.floor(rotation / 90);\n        const rotationNormalizer = ((quadrant % 2 === 0) ? rotation : 180 * Math.ceil(rotation / 180) - rotation) % 180;\n\n        yShift = Math.sqrt(height ** 2 + width ** 2) * Math.sin(angleToRadian(rotationNormalizer));\n\n        if ((quadrant === 3 || quadrant === 2) && !(rotationNormalizer > 67.5 && rotationNormalizer <= 90)) {\n            yShift += height * 2;\n        }\n        xShift = width;\n\n        if (rotation === 90) {\n            xShift = height;\n        } else if (rotation === 270) {\n            xShift = -height;\n        } else {\n            xShift = 0;\n        }\n\n        if (orientation === AxisOrientation.TOP) {\n            xShift = (fixedBaseline && ticks[0] === d && type === LINEAR) ? xShift + xShift / 2 : xShift;\n            selectElement(this)\n                            .attr('transform', `translate(${-xShift + tickSize}\n                                ${-yShift - tickSize}) rotate(${rotation})`);\n        } else {\n            xShift = (fixedBaseline && ticks[0] === d && type === LINEAR) ? xShift - xShift / 2 : xShift;\n\n            selectElement(this)\n                            .attr('transform', `translate(${xShift - tickSize}\n                                ${yShift + tickSize}) rotate(${rotation})`);\n        }\n        // selectElement(this).transition()\n        //                 .duration(1000).text(datum);\n    });\n    return tickText;\n};\n\n/**\n *\n *\n * @param {*} tickText\n * @param {*} axisInstance\n */\nconst changeTickOrientation = (selectContainer, axisInstance, tickSize) => {\n    const {\n        _smartTicks\n    } = axisInstance;\n    const config = axisInstance.config();\n    const renderConfig = axisInstance.renderConfig();\n    const labelManager = axisInstance.dependencies().labelManager;\n    const {\n        orientation,\n        classPrefix\n    } = config;\n    const {\n        labels\n    } = renderConfig;\n    const {\n        rotation,\n        smartTicks: isSmartTicks\n    } = labels;\n\n    const tickText = selectContainer.selectAll('.tick text');\n    tickText.selectAll('tspan').remove();\n\n    // rotate labels if not enough space is available\n    if (rotation && (orientation === TOP || orientation === BOTTOM)) {\n        rotateAxis(axisInstance, tickText, labelManager);\n    } else if (!rotation && !isSmartTicks) {\n        tickText.attr('transform', '');\n    } else {\n        tickText.text('');\n        if (orientation === TOP || orientation === BOTTOM) {\n            tickText.attr('y', 0)\n                            .attr('x', 0)\n                            .attr('transform', '')\n                            .text('');\n            const tspan = makeElement(tickText, 'tspan', (d, i) => {\n                if (_smartTicks[i]) {\n                    return _smartTicks[i].lines;\n                } return [];\n            }, `${classPrefix}-smart-text`);\n\n            tspan.attr('dy', '0')\n                            .style('opacity', '0')\n\n                            .transition()\n                            .duration(1000)\n                            .on('end', axisInstance.registerAnimationDoneHook())\n                            .attr('dy', (d, i) => {\n                                if (orientation === BOTTOM || i !== 0) {\n                                    return _smartTicks[0].oriTextHeight;\n                                }\n                                return -_smartTicks[0].oriTextHeight * (_smartTicks[0].lines.length - 1) - tickSize;\n                            })\n                            .style('opacity', 1)\n                            .text(e => e)\n                            .attr('x', 0);\n        } else {\n            const tspan = makeElement(tickText, 'tspan', (d, i) => _smartTicks[i].lines, `${classPrefix}-smart-text`);\n            tspan.text(e => e);\n        }\n    }\n\n    return tickText;\n};\n\nconst setFixedBaseline = (axisInstance) => {\n    const {\n        fixedBaseline\n    } = axisInstance.config();\n    const {\n        showInnerTicks\n    } = axisInstance.renderConfig();\n    const domain = axisInstance.domain();\n    if (fixedBaseline && domain.length && showInnerTicks) {\n        axisInstance.setFixedBaseline();\n    }\n};\n\n/**\n *\n *\n * @param {*} textNode\n * @param {*} orientation\n * @param {*} measures\n */\nconst setAxisNamePos = (textNode, orientation, measures) => {\n    const {\n        axisNameHeight,\n        availableSpace\n    } = measures;\n\n    switch (orientation) {\n    case AxisOrientation.LEFT:\n        textNode.attr('transform',\n            `translate(${-(availableSpace.width - axisNameHeight)},${availableSpace.height / 2})rotate(-90)`);\n        break;\n    case AxisOrientation.RIGHT:\n        textNode.attr('transform',\n             `translate(${(availableSpace.width - axisNameHeight)},${availableSpace.height / 2})rotate(90)`);\n        break;\n    case AxisOrientation.TOP:\n        textNode.attr('transform',\n             `translate(${availableSpace.width / 2},${-availableSpace.height + axisNameHeight})`);\n        break;\n    case AxisOrientation.BOTTOM:\n        textNode.attr('transform',\n             `translate(${availableSpace.width / 2},${availableSpace.height - axisNameHeight / 2})`);\n        break;\n    default:\n    }\n    return textNode;\n};\n\n/**\n * This method is used to render the axis inside an\n * svg container.\n *\n * @export\n * @param {Object} axisInstance the nput object required to render axis\n * @param {string} axisInstance.orientation the orientation of axis\n * @param {Object} axisInstance.scale instance of d3 scale\n * @param {SVGElement} axisInstance.container the container in which to render\n */\nexport function renderAxis (axisInstance) {\n    const renderConfig = axisInstance.renderConfig();\n    const config = axisInstance.config();\n\n    const {\n        show,\n        xOffset,\n        yOffset,\n        showAxisName,\n        labels,\n        smartAxisName\n    } = renderConfig;\n    const mount = axisInstance.mount();\n\n    const {\n        orientation,\n        axisNamePadding,\n        className,\n        id,\n        classPrefix\n    } = config;\n\n    if (!show) {\n        return;\n    }\n\n    const selectContainer = makeElement(selectElement(mount), 'g', [axisInstance], `${className}`, {},\n    key => key.config().id);\n    selectContainer.attr('transform', `translate(${xOffset},${yOffset})`);\n\n    let availableSpace;\n    let labelProps;\n    let tickSize;\n    if (axisInstance.domain().length > 0) {\n        const labelManager = axisInstance.dependencies().labelManager;\n        const range = axisInstance.range();\n        const axis = axisInstance.axis();\n        const scale = axisInstance.scale();\n\n        const {\n            _tickLabelStyle: tickLabelStyle,\n            _tickFormatter: axisTickFormatter\n        } = axisInstance;\n\n        tickSize = axisInstance.getTickSize();\n\n        // Set style for tick labels\n        labelManager.setStyle(tickLabelStyle);\n\n        const labelFunc = scale.ticks || scale.quantile || scale.domain;\n\n        const ticks = axis.tickValues() || labelFunc();\n\n        axis.tickFormat(axisTickFormatter(ticks));\n\n        // Get range(length of range)\n        availableSpace = Math.abs(range[0] - range[1]);\n\n        // Get width and height taken by axis labels\n        labelProps = axisInstance.axisComponentDimensions().largestTickDimensions;\n\n        // Draw axis ticks\n        setFixedBaseline(axisInstance);\n        if (!labels.rotation && labels.smartTicks === false) {\n            selectContainer.transition()\n                            .duration(1000)\n                            .on('end', axisInstance.registerAnimationDoneHook())\n                            .call(axis);\n        } else {\n            selectContainer.call(axis);\n            changeTickOrientation(selectContainer, axisInstance, tickSize);\n        }\n\n        selectContainer.selectAll('.tick').classed(`${classPrefix}-ticks`, true);\n        selectContainer.selectAll('.tick line').classed(`${classPrefix}-tick-lines`, true);\n\n        // Set classes for ticks\n        const tickText = selectContainer.selectAll('.tick text');\n        tickText.classed(`${classPrefix}-ticks`, true)\n                        .classed(`${classPrefix}-ticks-${id}`, true);\n    }\n    // Create axis name\n    const textNode = makeElement(selectContainer, 'text', [smartAxisName], `${classPrefix}-axis-name`)\n                    .attr('text-anchor', 'middle')\n                    .classed(`${classPrefix}-axis-name-${id}`, true)\n                    .text(d => d.text);\n\n    // Hide axis name if show is off\n    textNode.classed(HIDDEN, !showAxisName);\n\n    // render labels based on orientation of axis\n    const labelOffset = availableSpace / 2;\n\n    const measures = {\n        labelProps,\n        tickSize,\n        axisNamePadding,\n        axisNameHeight: smartAxisName.height,\n        yOffset,\n        xOffset,\n        labelOffset,\n        availableSpace: axisInstance.availableSpace()\n    };\n    // Set position for axis name\n    setAxisNamePos(textNode, orientation, measures);\n}\n","import {\n    timeMillisecond,\n    timeSecond,\n    timeMinute,\n    timeHour,\n    timeDay,\n    timeWeek,\n    timeMonth,\n    timeYear\n} from 'muze-utils';\n\nconst durationSecond = 1000;\nconst durationMinute = durationSecond * 60;\nconst durationHour = durationMinute * 60;\nconst durationDay = durationHour * 24;\nconst durationWeek = durationDay * 7;\nconst durationMonth = durationDay * 30;\nconst durationYear = durationDay * 365;\n\n// Longest Word for each level based on which tick skipping is decided\nconst longestWord = {\n    month: 'September',\n    quarter: 'October',\n    halfYearly: 'July',\n    year: 9999,\n    day: 'September',\n    hour: '24 AM',\n    mintues: '60:60',\n    seconds: ':60',\n    week: 'Wed 31'\n};\n\n// These are the various levels of ticks that can be shown by Muze.\n// Each level is described as how frequently the ticks appear\n// The format is as follows:\n// [Frequency, Milliseconds, Name of Seconds, Tick Generator, Level Type]\nconst tickIntervals = [\n    [1, 1, 'milliseconds', timeMillisecond.every(1), 'seconds'],\n    [1, durationSecond, 'seconds', timeSecond.every(1), 'seconds'],\n    [5, 5 * durationSecond, 'five seconds', timeSecond.every(5), 'seconds'],\n    [10, 10 * durationSecond, 'ten seconds', timeSecond.every(10), 'seconds'],\n    [15, 15 * durationSecond, 'fifteen seconds', timeSecond.every(15), 'seconds'],\n    [30, 30 * durationSecond, 'thirty seconds', timeSecond.every(30), 'seconds'],\n    [1, durationMinute, 'minute', timeMinute.every(1), 'minutes'],\n    [5, 5 * durationMinute, 'five minutes', timeMinute.every(5), 'minutes'],\n    [10, 10 * durationMinute, 'ten minutes', timeMinute.every(10), 'minutes'],\n    [15, 15 * durationMinute, 'fifteen minutes', timeMinute.every(15), 'minutes'],\n    [30, 30 * durationMinute, 'thirty minutes', timeMinute.every(30), 'minutes'],\n    [1, durationHour, 'hour', timeHour.every(1), 'hour'],\n    [3, 3 * durationHour, 'three hours', timeHour.every(3), 'hour'],\n    [6, 6 * durationHour, 'six hours', timeHour.every(6), 'hour'],\n    [12, 12 * durationHour, 'twelve hours', timeHour.every(12), 'hour'],\n    [1, durationDay, 'daily', timeDay.every(1), 'day'],\n    [1, durationWeek, 'weekly', timeWeek.every(1), 'week'],\n    [1, durationMonth, 'monthly', timeMonth.every(1), 'week'],\n    [3, 3 * durationMonth, 'quaterly', timeMonth.every(3), 'quarter'],\n    [6, 6 * durationMonth, 'half yearly', timeMonth.every(6), 'halfYearly'],\n    [1, durationYear, 'yearly', timeYear.every(1), 'year'],\n    [2, 2 * durationYear, '2 year', timeYear.every(2), 'year'],\n    [3, 3 * durationYear, '3 year', timeYear.every(3), 'year'],\n    [5, 5 * durationYear, '5 year', timeYear.every(5), 'year'],\n    [10, 10 * durationYear, 'decade', timeYear.every(10), 'year'],\n    [100, 100 * durationYear, 'century', timeYear.every(100), 'year'],\n    [1000, 1000 * durationYear, 'millenium', timeYear.every(1000), 'year']\n];\n/**\n * Get the actual tick interval based on the available width, number of ticks\n * and the distance between two ticks\n *\n * @param {Object} context Axis Context\n * @param {number} noOfTicks Number of Ticks based on which interval is calculated\n * @return {number} The width for the tick interval\n */\nconst getActualTickInterval = (context, noOfTicks) => {\n    const minTickDistance = context._minTickDistance;\n    const minWidthBetweenTicks = minTickDistance.width;\n\n    const { width } = context.availableSpace();\n    const actualTickInterval = Math.floor(((width - (noOfTicks - 1) * (minWidthBetweenTicks)) / noOfTicks));\n\n    return actualTickInterval;\n};\n\n/**\n * Get the tick interval based on the current level of ticks. Levels are decided on\n * the number of ticks that are possible to show\n *\n * @param {Object} context Axis Context\n * @param {string} type Type of level (yearly, monthly, etc)\n * @return {number} The width for the tick interval\n */\nconst getTickIntervalBasedOnCurrentLevel = (context, type) => {\n    const labelManager = context._dependencies.labelManager;\n    const longestWordType = longestWord[type];\n    const measure = labelManager.getOriSize(longestWordType);\n\n    return measure.width;\n};\n\nconst getTickIntervalFnBasedOnNumberOfTicks = (interval, count, context) => {\n    let possibleTickLevelIndex = tickIntervals.length - 1;\n    let maxPossibleTicks = 1;\n    let tickIntervalLevelInfo = null;\n\n    // Decide possible tick level based on min tick width (with ellipses)\n    for (let i = tickIntervals.length - 1; i >= 0; i--) {\n        const tickIntervalInfo = tickIntervals[i];\n        const numOfPossibleTicks = Math.floor(interval / tickIntervalInfo[1]);\n        if (numOfPossibleTicks <= count) {\n            possibleTickLevelIndex = i;\n            maxPossibleTicks = numOfPossibleTicks;\n        }\n    }\n\n    tickIntervalLevelInfo = tickIntervals[possibleTickLevelIndex];\n\n    // Get actual tick interval based on the level of ticks generated\n    const actualTickInterval = getActualTickInterval(context, maxPossibleTicks);\n\n    // Maximum Possible tick Interval for a particular level based on a pre decided set of values\n    const maxTickInterval = getTickIntervalBasedOnCurrentLevel(context, tickIntervalLevelInfo[4]);\n\n    // Display the next level involving tick skipping if current level does not meet the requirement\n    // for displaying max tick\n    if (actualTickInterval < maxTickInterval && possibleTickLevelIndex < tickIntervals.length - 1) {\n        tickIntervalLevelInfo = tickIntervals[possibleTickLevelIndex + 1];\n    }\n    return tickIntervalLevelInfo[3];\n};\n\nexport const getSkippedTicks = (context, maxPossibleTicks) => {\n    let actualNumberOfTicks = maxPossibleTicks;\n    const domain = context.domain();\n    const minDiff = context._minDiff;\n    // Get the interval in ms from the domain\n    const millisecondInterval = domain[1] - domain[0];\n    // Get number of ticks based on the minimum difference in the data\n    const numOfTicksAccordingToMinDiff = Math.floor(millisecondInterval / minDiff);\n\n    // Show ticks according to min diff if possible\n    if (maxPossibleTicks >= numOfTicksAccordingToMinDiff) {\n        actualNumberOfTicks = numOfTicksAccordingToMinDiff;\n    }\n\n    return getTickIntervalFnBasedOnNumberOfTicks(millisecondInterval, actualNumberOfTicks, context);\n};\n","import { BOTTOM, TOP, LEFT, RIGHT } from '../enums/axis-orientation';\nimport { getSkippedTicks } from './skip-ticks';\nimport { TIME, LINEAR, BAND } from '../enums/scale-type';\n\nexport const applyTickSkipping = (context) => {\n    const minTickDistance = context._minTickDistance;\n    const minTickSpace = context._minTickSpace;\n    const minWidthBetweenTicks = minTickDistance.width;\n    const minTickWidth = minTickSpace.width;\n\n    const { width } = context.availableSpace();\n\n    const maxTicks = Math.floor((width + minWidthBetweenTicks) / (minTickWidth + minWidthBetweenTicks));\n\n    const ticks = context.scale().ticks(getSkippedTicks(context, maxTicks));\n\n    context.renderConfig({\n        tickValues: ticks\n    });\n};\n\nconst adjustHorizontalRange = (range, diff) => {\n    range[0] += diff;\n    range[1] -= diff;\n    return range;\n};\n\nconst adjustVerticalRange = (range, diff) => {\n    range[0] -= diff;\n    range[1] += diff;\n    return range;\n};\n\nconst rangeAdjustmentMap = {\n    [TOP]: adjustHorizontalRange,\n    [BOTTOM]: adjustHorizontalRange,\n    [LEFT]: adjustVerticalRange,\n    [RIGHT]: adjustVerticalRange\n};\n\nexport const setAxisRange = (context, type, rangeBounds, offset) => {\n    context.range(rangeBounds);\n    offset && context.renderConfig({ [`${type}Offset`]: offset });\n};\n\nconst getAxisOffset = (timeDiff, range, domain) => {\n    const avWidth = Math.abs(range[1] - range[0]);\n    const pvr = avWidth / (domain[1] - domain[0]);\n    const width = (pvr * timeDiff);\n    const bars = avWidth / width;\n    const barWidth = avWidth / (bars + 1);\n    const diff = avWidth - barWidth * bars;\n\n    return diff / 2;\n};\n\nexport const getAdjustedRange = (minDiff, range, domain, config) => {\n    const {\n        orientation,\n        adjustRange\n    } = config;\n    const diff = getAxisOffset(minDiff, range, domain);\n\n    if (adjustRange) {\n        return rangeAdjustmentMap[orientation](range, diff);\n    }\n    return range;\n};\n\nexport const spaceSetter = (context, spaceConfig) => {\n    let tickInterval;\n    let heightForTicks;\n    const config = context.config();\n    const {\n        width: availWidth,\n        height: availHeight,\n        padding\n    } = context.availableSpace();\n    const {\n        top,\n        left,\n        bottom,\n        right\n    } = padding;\n    const {\n        isOffset\n    } = spaceConfig;\n    const {\n        showAxisName,\n        labels\n    } = context.renderConfig();\n    const {\n        rotation\n    } = labels;\n    const {\n        fixedBaseline,\n        axisNamePadding,\n        tickValues\n    } = config;\n\n    const {\n        tickDimensions,\n        allTickDimensions,\n        axisNameDimensions,\n        tickSize\n    } = context.getAxisDimensions();\n\n    const {\n        height: tickDimHeight,\n        width: tickDimWidth\n    } = tickDimensions;\n\n    const namePadding = showAxisName ? axisNamePadding : 0;\n    const labelConfig = { smartTicks: true, rotation: labels.rotation };\n    const minTickDistance = context._minTickDistance;\n    const minTickSpace = context._minTickSpace;\n    const minDiff = context._minDiff;\n    const domain = context.domain();\n    const axisNameHeight = axisNameDimensions.height;\n    const minWidthBetweenTicks = minTickDistance.width;\n    const minTickWidth = Math.min(minTickSpace.width, tickDimWidth);\n    const minTickHeight = Math.min(minTickSpace.height, tickDimHeight);\n\n    return {\n        [TIME]: {\n            x: () => {\n                !tickValues && context.applyTickSkipping();\n                const noOfTicks = context.getTickValues().length;\n\n                // Get the Tick Interval\n                tickInterval = ((availWidth - (noOfTicks - 1) * (minWidthBetweenTicks)) / noOfTicks);\n\n                // Get height for ticks\n                heightForTicks = availHeight - axisNameHeight - tickSize - namePadding;\n\n                if (tickInterval < minTickWidth && rotation !== 0) {\n                    // set smart ticks and rotation config\n                    labelConfig.rotation = rotation;\n                    // Remove ticks if not enough height\n                    if (tickInterval < minTickHeight) {\n                        heightForTicks = availHeight;\n                        tickInterval = minTickHeight;\n                        context.renderConfig({ showInnerTicks: false, showOuterTicks: false });\n                    }\n                }\n                if (availHeight < axisNameHeight) {\n                    context.renderConfig({ show: false });\n                }\n\n                const tickShifter = Math.min(tickInterval, tickDimWidth);\n                // set range for axis\n                setAxisRange(context, 'y', getAdjustedRange(minDiff, [tickShifter / 2,\n                    availWidth - left - right - tickShifter / 2], domain, config),\n                        isOffset ? availHeight : null);\n\n                context.maxTickSpaces({\n                    width: tickInterval,\n                    height: heightForTicks,\n                    noWrap: rotation !== null\n                });\n\n                return labelConfig;\n            },\n            y: () => {\n                let widthForTicks = availWidth;\n                const tickShifter = tickDimHeight / 2;\n\n                setAxisRange(context, 'x', getAdjustedRange(minDiff,\n                    [availHeight - top - bottom - tickShifter, tickShifter], domain, config),\n                        isOffset ? availWidth : null);\n\n                if ((availWidth - axisNameHeight - namePadding) <= minWidthBetweenTicks) {\n                    widthForTicks = 0;\n                    context.renderConfig({ showInnerTicks: false, showOuterTicks: false });\n                }\n\n                context.maxTickSpaces({\n                    width: widthForTicks,\n                    height: availHeight,\n                    noWrap: true\n                });\n                if (availWidth < axisNameHeight) {\n                    context.renderConfig({ show: false });\n                }\n                return labelConfig;\n            }\n        },\n        [BAND]: {\n            x: () => {\n                setAxisRange(context, 'y', [0, availWidth - left - right], isOffset ? availHeight : null);\n                const range = context.range();\n\n                // Get Tick Interval\n                tickInterval = ((range[1] - range[0]) / (tickValues || domain).length) - minWidthBetweenTicks;\n\n                // Get height available for ticks\n                heightForTicks = availHeight - axisNameHeight - tickSize - namePadding;\n\n                if (tickInterval < minTickWidth && rotation !== 0) {\n                    // set smart ticks and rotation config\n                    labelConfig.rotation = rotation === null ? -90 : rotation;\n                    labelConfig.smartTicks = false;\n\n                    tickInterval = Math.max(heightForTicks, minTickWidth);\n\n                    if (heightForTicks < minTickWidth) {\n                        context.renderConfig({ showAxisName: false });\n                    }\n                } else if (tickValues) {\n                    const interval = (availWidth / domain.length) - minWidthBetweenTicks;\n                    if (interval < minTickWidth) {\n                        context.range([minTickHeight / 2, availWidth - minTickHeight / 2]);\n                    }\n                }\n                if (availHeight < axisNameHeight) {\n                    context.renderConfig({ show: false });\n                }\n\n                context.maxTickSpaces({\n                    width: tickInterval,\n                    height: heightForTicks,\n                    noWrap: rotation !== null\n                });\n                return labelConfig;\n            },\n            y: () => {\n                setAxisRange(context, 'x', [availHeight - bottom, top], isOffset ? availWidth : null);\n\n                let widthForTicks = availWidth - axisNameHeight - tickSize - namePadding;\n                if (widthForTicks <= minWidthBetweenTicks) {\n                    widthForTicks = 0;\n                    context.renderConfig({ showInnerTicks: false, showOuterTicks: false });\n                }\n\n                context.maxTickSpaces({\n                    width: widthForTicks,\n                    height: availHeight,\n                    noWrap: true\n                });\n                if (availWidth < axisNameHeight) {\n                    context.renderConfig({ show: false });\n                }\n                return labelConfig;\n            }\n        },\n        [LINEAR]: {\n            x: () => {\n                labelConfig.smartTicks = false;\n                const tickShifter = tickDimWidth / 2;\n\n                const baseline = fixedBaseline ? 0 : tickShifter;\n\n                setAxisRange(context, 'y', [baseline + left, availWidth - right - tickShifter],\n                    isOffset ? availHeight : null);\n\n                const range = context.range();\n\n                // Get Tick widths and available space\n                const totalTickWidth = allTickDimensions.length * (tickDimWidth + minWidthBetweenTicks);\n                const availableWidth = range[1] - range[0];\n\n                 // Rotate labels if not enough width\n                if (availableWidth < totalTickWidth && labels.rotation !== null) {\n                    if (availHeight - tickDimWidth - namePadding - tickSize > axisNameHeight) {\n                        labelConfig.rotation = null;\n                        context.renderConfig({\n                            showInnerTicks: true,\n                            showAxisName: true\n                        });\n                    } else {\n                        labelConfig.rotation = -90;\n                        context.renderConfig({\n                            showInnerTicks: true,\n                            showAxisName: false\n                        });\n                    }\n                }\n                if (availHeight < axisNameHeight) {\n                    context.renderConfig({ show: false });\n                }\n                return labelConfig;\n            },\n            y: () => {\n                labelConfig.smartTicks = false;\n                const tickShifter = tickDimHeight / 2;\n                const baseline = fixedBaseline ? 1 : tickShifter;\n\n                setAxisRange(context, 'x', [availHeight - bottom - baseline, tickShifter + top],\n                    isOffset ? availWidth : null);\n\n                // Remove display of ticks if no space is left\n                if (availWidth < tickDimWidth + axisNameHeight + namePadding) {\n                    context.renderConfig({ showInnerTicks: false });\n                    if (availWidth < axisNameHeight) {\n                        context.renderConfig({ show: false });\n                    }\n                }\n                return labelConfig;\n            }\n        }\n    };\n};\n","import { defaultValue } from 'muze-utils';\nimport { TOP, LEFT, BOTTOM } from '../enums/axis-orientation';\nimport { MIN_NO_OF_TICKS, DEFAULT_NO_OF_TICKS } from '../enums/constants';\nimport { setAxisRange, getAdjustedRange } from './space-setter';\n\nexport const getRotatedSpaces = (rotation = 0, width, height) => {\n    let rotatedHeight = height;\n    let rotatedWidth = width;\n    if (rotation) {\n        const angle = ((rotation || 0) * Math.PI) / 180;\n        rotatedWidth = Math.abs(height * Math.sin(angle)) + Math.abs(width * Math.cos(angle));\n        rotatedHeight = Math.abs(width * Math.sin(angle)) + Math.abs(height * Math.cos(angle));\n    }\n    return { width: rotatedWidth, height: rotatedHeight };\n};\n\nexport const setOffset = (context) => {\n    let x = 0;\n    let y = 0;\n    const logicalSpace = context.logicalSpace();\n    const config = context.config();\n    const {\n        orientation,\n        xOffset,\n        yOffset\n    } = config;\n    if (orientation === LEFT) {\n        x = xOffset === undefined ? logicalSpace.width : xOffset;\n    }\n    if (orientation === TOP) {\n        y = yOffset === undefined ? logicalSpace.height : yOffset;\n    }\n\n    context.renderConfig({ xOffset: x, yOffset: y });\n};\n\nexport const getNumberOfTicks = (availableSpace, labelDim, axis, axisInstance) => {\n    let numberOfValues = 0;\n    let tickValues = [];\n    let { numberOfTicks } = axisInstance.config();\n    const ticks = axis.scale().ticks();\n    const tickLength = ticks.length;\n    const minTickDistance = axisInstance._minTickDistance.width;\n\n    numberOfValues = tickLength;\n\n    if (tickLength * (labelDim + minTickDistance) > availableSpace) {\n        numberOfValues = Math.floor(availableSpace / (labelDim + minTickDistance));\n    }\n\n    numberOfTicks = numberOfTicks || numberOfValues;\n    numberOfValues = Math.min(numberOfTicks, Math.max(MIN_NO_OF_TICKS, numberOfValues));\n\n    tickValues = axis.scale().ticks(numberOfValues);\n\n    if (tickValues.length > numberOfValues) {\n        tickValues = tickValues.filter((e, i) => i % 2 === 0);\n    }\n\n    if (numberOfValues === MIN_NO_OF_TICKS) {\n        tickValues = axis.scale().ticks(DEFAULT_NO_OF_TICKS);\n        tickValues = [tickValues[0], tickValues[tickValues.length - 1]];\n    }\n    return tickValues;\n};\n\nexport const getAxisComponentDimensions = (context) => {\n    let largestTick = '';\n    let largestTickDimensions = { width: 0, height: 0 };\n    let smartTick = {};\n    let axisTicks;\n    const allTickDimensions = [];\n    const scale = context.scale();\n    const { tickValues, showAxisName } = context.renderConfig();\n    const { name } = context.config();\n    const { labelManager } = context.dependencies();\n    const labelFunc = scale.ticks || scale.quantile || scale.domain;\n\n    // set the style on the shared label manager instance\n    labelManager.setStyle(context._tickLabelStyle);\n\n    // get the values along the domain\n    axisTicks = tickValues || labelFunc();\n\n    // Get the tick labels\n    axisTicks = axisTicks.map((originalLabel, i) => {\n        const label = context.getFormattedText(originalLabel, i, axisTicks);\n\n    // convert to string for quant values\n        const tickDimensions = labelManager.getOriSize(label);\n\n    // Get spaces for all labels\n        allTickDimensions.push(tickDimensions);\n\n    // Getting largest label\n        if (tickDimensions.width > largestTickDimensions.width) {\n            largestTick = label;\n            smartTick = context.smartTicks() ? context.smartTicks()[i] : {};\n\n            largestTickDimensions = tickDimensions;\n            smartTick = smartTick || tickDimensions;\n        }\n        return label;\n    });\n\n    labelManager.setStyle(context._axisNameStyle);\n    const axisNameDimensions = showAxisName ? labelManager.getOriSize(name) : { width: 0, height: 0 };\n\n    return {\n        axisNameDimensions,\n        largestTick,\n        largestTickDimensions,\n        allTickDimensions,\n        axisTicks,\n        smartTick,\n        tickSize: context.getTickSize()\n    };\n};\n\nexport const computeAxisDimensions = (context) => {\n    let tickDimensions = {};\n    const { labels } = context.renderConfig();\n    const { smartTicks, rotation } = labels;\n\n    const {\n        largestTickDimensions,\n        axisTicks,\n        smartTick,\n        axisNameDimensions,\n        allTickDimensions,\n        tickSize\n    } = getAxisComponentDimensions(context);\n    const { height: labelHeight, width: labelWidth } = largestTickDimensions;\n\n    // get the domain of axis\n    const domain = context.domain();\n    // const angle = ((rotation || 0) * Math.PI) / 180;\n\n    if (domain.length === 0) {\n        return {\n            allTickDimensions,\n            tickSize: 0,\n            tickDimensions: { height: 0, width: 0 },\n            axisNameDimensions,\n            largestTickDimensions,\n            axisTicks\n        };\n    }\n\n    if (smartTicks) {\n        tickDimensions = smartTick;\n    } else {\n        tickDimensions = { width: labelWidth, height: labelHeight };\n    }\n    tickDimensions = getRotatedSpaces(rotation, tickDimensions.width, tickDimensions.height);\n\n    if (tickSize === 0) {\n        tickDimensions = { width: 0, height: 0 };\n    }\n\n    return {\n        allTickDimensions,\n        tickSize,\n        tickDimensions,\n        axisNameDimensions,\n        largestTickDimensions,\n        axisTicks\n    };\n};\n\n/**\n *\n *\n * @param {*} axisDimensions\n * @param {*} config\n * @param {*} range\n *\n */\nexport const getHorizontalAxisSpace = (context, axisDimensions, range) => {\n    let width;\n    let height;\n    const domain = context.domain();\n    const minTickDistance = context._minTickDistance.width;\n    const { tickSize, tickDimensions, axisNameDimensions } = axisDimensions;\n    const { axisNamePadding, tickValues } = context.config();\n    const { showAxisName } = context.renderConfig();\n    const { height: axisDimHeight } = axisNameDimensions;\n    const { height: tickDimHeight, width: tickDimWidth } = tickDimensions;\n\n    width = range && range.length ? range[1] - range[0] : ((tickDimWidth + minTickDistance) * 3);\n\n    height = 0;\n    if (tickValues) {\n        const minTickDiff = context.getMinTickDifference();\n        const [min, max] = [\n            Math.min(...tickValues, ...domain),\n            Math.max(...tickValues, ...domain)\n        ];\n\n        width = ((max - min) / Math.abs(minTickDiff)) * (tickDimWidth + context._minTickDistance.width);\n    }\n    if (!range || !range.length) {\n        height = Math.max(tickDimWidth, tickDimHeight);\n    } else {\n        height = tickDimHeight;\n    }\n\n    height += (showAxisName ? axisDimHeight + axisNamePadding : 0) + tickSize;\n\n    return {\n        width,\n        height\n    };\n};\n\n/**\n *\n *\n * @param {*} axisDimensions\n * @param {*} config\n * @param {*} range\n *\n */\nexport const getVerticalAxisSpace = (context, axisDimensions) => {\n    let height;\n    let width;\n    const domain = context.domain();\n    const { tickSize, tickDimensions, axisNameDimensions } = axisDimensions;\n    const { axisNamePadding, tickValues } = context.config();\n    const { showAxisName } = context.renderConfig();\n    const { height: axisDimHeight } = axisNameDimensions;\n    const { height: tickDimHeight, width: tickDimWidth } = tickDimensions;\n\n    height = 0;\n    width = tickDimWidth;\n    if (tickValues) {\n        const minTickDiff = context.getMinTickDifference();\n        const [min, max] = [\n            Math.min(...tickValues, ...domain),\n            Math.max(...tickValues, ...domain)\n        ];\n\n        height = ((max - min) / Math.abs(minTickDiff)) * tickDimHeight;\n    }\n    width += (showAxisName ? axisDimHeight : 0) + tickSize + (tickValues ? axisNamePadding : 0);\n\n    return {\n        height,\n        width\n    };\n};\n\n/**\n * Calculates the logical space of the axis\n * @return {Object} Width and height occupied by the axis.\n */\nexport const calculateBandSpace = (context) => {\n    const range = context.range();\n    const axisDimensions = context.getAxisDimensions();\n\n    const { orientation } = context.config();\n    const { show } = context.renderConfig();\n    const { largestTickDimensions, axisTicks, allTickDimensions } = axisDimensions;\n    const { height: largestDimHeight } = largestTickDimensions;\n    const minTickWidth = context._minTickDistance.width;\n    if (orientation === TOP || orientation === BOTTOM) {\n        let {\n            width,\n            height\n        } = getHorizontalAxisSpace(context, axisDimensions, range);\n\n        if (!range || !range.length) {\n            width = allTickDimensions.reduce((t, n) =>\n                t + Math.min(n.width, n.height) + minTickWidth, 0);\n        }\n\n        if (show === false) {\n            height = 0;\n            width = 0;\n        }\n        return {\n            width,\n            height\n        };\n    }\n\n    let {\n        width,\n        height\n    } = getVerticalAxisSpace(context, axisDimensions, range);\n\n    if (!height || height === 0) {\n        height = axisTicks.length * (largestDimHeight + context._minTickDistance.height);\n    }\n    if (show === false) {\n        width = 0;\n    }\n    return {\n        width,\n        height\n    };\n};\n\n/**\n * Calculates the logical space of the axis\n * @return {Object} Width and height occupied by the axis.\n */\nexport const calculateContinousSpace = (context) => {\n    const range = context.range();\n    const axisDimensions = context.getAxisDimensions();\n    const { orientation } = context.config();\n    const { show, showAxisName } = context.renderConfig();\n    const { axisNameDimensions } = axisDimensions;\n\n    if (show === false) {\n        return {\n            width: 0,\n            height: 0\n        };\n    }\n\n    const { width: axisNameWidth } = axisNameDimensions;\n\n    if (orientation === TOP || orientation === BOTTOM) {\n        const {\n            width,\n            height\n        } = getHorizontalAxisSpace(context, axisDimensions, range);\n        const axisWidth = Math.max(width, axisNameWidth);\n\n        return {\n            width: axisWidth,\n            height\n        };\n    }\n    const {\n        width,\n        height\n    } = getVerticalAxisSpace(context, axisDimensions, range);\n\n    const effHeight = Math.max(height, showAxisName ? axisNameWidth : 0);\n\n    return {\n        width,\n        height: effHeight\n    };\n};\n\n/**\n * Overwrites domain with user defined domain (if present)\n * @param {Object} context reference to current axes\n * @param {Array} domain default domain\n *\n * @return {Array} domain\n */\nexport const getValidDomain = (context, domain) => {\n    const { domain: userDom } = context.config();\n\n    if (userDom) {\n        domain = userDom;\n    }\n\n    return defaultValue(domain, []);\n};\n\nexport const setContinousAxisDomain = (context, domain) => {\n    const { nice } = context.config();\n    const scale = context.scale.bind(context);\n\n    scale().domain(domain);\n    nice && scale().nice();\n    context._domain = scale().domain();\n};\n\n/**\n * Checks if any of the properties have changed between two objects\n * @param {Object} obj first object\n * @param {Object} obj1 second object\n * @param {Array} properties properties to be compared between two objects\n *\n * @return {Boolean} boolean value\n */\nexport const hasAxesConfigChanged = (obj = {}, obj1 = {}, properties) => {\n    if (!Object.keys(obj).length || !Object.keys(obj1).length) {\n        return false;\n    }\n    return properties.some(key => obj[key] !== obj1[key]);\n};\n\nexport const resetTickInterval = (context, domain) => {\n    const {\n        orientation,\n        isOffset\n    } = context.config();\n\n    const minDiff = context._minDiff;\n     // Set available space on interaction\n    if (context.range().length && (orientation === TOP || orientation === BOTTOM)) {\n        context.applyTickSkipping();\n        const {\n            largestTickDimensions\n        } = context.getAxisDimensions();\n\n        const noOfTicks = context.getTickValues().length;\n\n        const { width, height, padding } = context.availableSpace();\n        const {\n            left,\n            right\n        } = padding;\n        // Get the Tick Interval\n        const tickInterval = Math.min(largestTickDimensions.width,\n            ((width - (noOfTicks - 1) * (context._minTickDistance.width)) / noOfTicks));\n\n        context.maxTickSpaces({\n            width: tickInterval\n        });\n\n        const adjustedRange = getAdjustedRange(minDiff, [tickInterval / 2,\n            width - left - right - tickInterval / 2], domain, context.config());\n\n         // set range for axis\n        setAxisRange(context, 'y', adjustedRange, isOffset ? height : null);\n\n        context.setTickConfig();\n    }\n};\n\nexport const getSmartAxisName = (name, width, labelManager) => {\n    const oriSize = labelManager.getOriSize(name);\n\n    labelManager.useEllipsesOnOverflow(true);\n\n    return labelManager.getSmartText(name, width, oriSize.height, true);\n};\n","import { mergeRecursive } from 'muze-utils';\nimport { hasAxesConfigChanged } from './helper';\n\nexport const PROPS = {\n    availableSpace: {},\n    axisDimensions: {},\n    axisComponentDimensions: {},\n    config: {\n        sanitization: (context, value) => {\n            const oldConfig = Object.assign({}, context._config || {});\n            const mockedOldConfig = mergeRecursive({}, oldConfig);\n            value = mergeRecursive(mockedOldConfig, value);\n\n            value.axisNamePadding = Math.max(value.axisNamePadding, 0);\n            const shouldAxesScaleUpdate = hasAxesConfigChanged(\n                value, oldConfig, ['interpolator', 'exponent', 'base', 'orientation']\n            );\n            const tickFormatter = context.sanitizeTickFormatter(value);\n\n            if (shouldAxesScaleUpdate) {\n                context._scale = context.createScale(value);\n                context._axis = context.createAxis(value);\n            }\n\n            context._tickFormatter = ticks => tickFormatter(ticks);\n\n            context.resetRenderConfig(value);\n            return value;\n        }\n    },\n    renderConfig: {\n        sanitization: (context, value) => {\n            const oldConfig = Object.assign({}, context._renderConfig || {});\n            value = mergeRecursive(oldConfig, value);\n            return value;\n        }\n    },\n    logicalSpace: {},\n    mount: {\n    },\n    range: {\n        sanitization: (context, value) => {\n            context.scale().range(value);\n            context.logicalSpace(null);\n            return value;\n        }\n    },\n\n    smartTicks: {},\n    tickSize: {},\n    maxTickSpaces: {\n        sanitization: (context, value) => {\n            const oldConfig = Object.assign({}, context._maxTickSpaces || {});\n            value = mergeRecursive(oldConfig, value);\n            return value;\n        }\n    },\n    valueParser: {\n        defaultValue: val => val\n    }\n};\n","import {\n    mergeRecursive,\n    getSmartComputedStyle,\n    selectElement,\n    generateGetterSetters,\n    getUniqueId\n} from 'muze-utils';\nimport { createScale } from '../scale-creator';\nimport { axisOrientationMap, BOTTOM, TOP } from '../enums/axis-orientation';\nimport { defaultConfig } from './default-config';\nimport { renderAxis } from '../axis-renderer';\nimport { spaceSetter } from './space-setter';\nimport {\n    getAxisComponentDimensions,\n    computeAxisDimensions,\n    calculateContinousSpace,\n    setOffset,\n    getValidDomain,\n    getSmartAxisName\n} from './helper';\nimport { PROPS } from './props';\n\nexport default class SimpleAxis {\n\n    /**\n     * Creates an instance of SimpleAxis.\n     * @memberof SimpleAxis\n     */\n    constructor (config, dependencies) {\n        this._id = getUniqueId();\n\n        this._dependencies = dependencies;\n        this._mount = null;\n        this._range = [];\n        this._domain = [];\n        this._domainLock = false;\n        this._axisDimensions = {};\n        this._smartTicks = [];\n\n        const defCon = mergeRecursive({}, this.constructor.defaultConfig());\n        const simpleConfig = mergeRecursive(defCon, config);\n\n        const bodyElem = selectElement('body');\n        const classPrefix = simpleConfig.classPrefix;\n        this._tickLabelStyle = getSmartComputedStyle(bodyElem, `${classPrefix}-ticks`);\n        this._axisNameStyle = getSmartComputedStyle(bodyElem, `${classPrefix}-axis-name`);\n\n        dependencies.labelManager.setStyle(this._tickLabelStyle);\n        const dist = dependencies.labelManager.getOriSize('w');\n\n        this._minTickDistance = { width: dist.width * 3 / 4, height: dist.height / 2 };\n        this._minTickSpace = dependencies.labelManager.getOriSize('www...');\n\n        generateGetterSetters(this, PROPS);\n        this.config(simpleConfig);\n\n        this._scale = this.createScale(this._config);\n        this._axis = this.createAxis(this._config);\n        this._animationDonePromises = [];\n    }\n\n    /**\n     * Returns the default configuration of simple axis\n     *  @return {Object} default configurations\n     */\n    static defaultConfig () {\n        return defaultConfig;\n    }\n\n    /**\n     * Sets a fixed baseline for the first ticks so that they can render effectively within\n     * the given area\n     *\n     * @param {*} tickText\n     * @param {*} config\n     * @param {*} labelManager\n     */\n    setFixedBaseline () {\n        return this;\n    }\n\n    /**\n     *\n     *\n     * @readonly\n     * @memberof SimpleAxis\n     */\n    scale (...params) {\n        if (params.length) {\n            this._scale = params[0];\n            return this;\n        }\n        return this._scale;\n    }\n\n    resetDomain () {\n        this._domain = [];\n        return this;\n    }\n\n    /**\n     *\n     *\n     * @readonly\n     * @memberof SimpleAxis\n     */\n    axis (...params) {\n        if (params.length) {\n            this._axis = params[0];\n            return this;\n        }\n        return this._axis;\n    }\n\n    /**\n     *\n     *\n     * @param {*} d\n     *\n     * @memberof SimpleAxis\n     */\n    domain (...domain) {\n        if (domain.length) {\n            const domainValue = getValidDomain(this, domain[0]);\n            this.scale().domain(domainValue);\n            this._domain = this.scale().domain();\n            this.setAxisComponentDimensions();\n            this.logicalSpace(null);\n            return this;\n        }\n        return this._domain;\n    }\n\n    setAxisComponentDimensions () {\n        this.axisComponentDimensions(getAxisComponentDimensions(this));\n    }\n\n    /**\n     *\n     *\n     *\n     * @memberof SimpleAxis\n     */\n    dependencies () {\n        return this._dependencies;\n    }\n\n    /**\n     *\n     *\n     *\n     * @memberof SimpleAxis\n     */\n    createScale (config) {\n        const {\n            base,\n            padding,\n            interpolator,\n            exponent\n        } = config;\n        const range = this.range();\n        const scale = createScale({\n            padding,\n            interpolator,\n            exponent,\n            base,\n            range,\n            type: this.constructor.type()\n        });\n\n        return scale;\n    }\n\n    sanitizeTickFormatter (value) {\n        const { tickFormat, numberFormat } = value;\n\n        if (tickFormat) {\n            return ticks => (val, i) => tickFormat(numberFormat(val), val, i, ticks);\n        }\n\n        return () => val => numberFormat(val);\n    }\n\n    resetRenderConfig (config) {\n        const {\n            labels,\n            show,\n            showInnerTicks,\n            showOuterTicks,\n            showAxisName,\n            xOffset,\n            yOffset,\n            tickValues,\n            smartAxisName\n        } = config;\n        this.renderConfig({\n            labels,\n            show,\n            showInnerTicks,\n            showOuterTicks,\n            showAxisName,\n            xOffset,\n            yOffset,\n            tickValues,\n            smartAxisName\n        });\n        return this;\n    }\n\n    resetLogicalSpace () {\n        this.logicalSpace(null);\n        this.range([]);\n\n        this.resetRenderConfig(this.config());\n    }\n\n    getFormattedText (text, index, axisTicks) {\n        const formatter = this._tickFormatter;\n\n        return formatter(axisTicks)(text, index);\n    }\n\n    /**\n     *\n     *\n     *\n     * @memberof SimpleAxis\n     */\n    createAxis (config) {\n        const { orientation } = config;\n        const axisClass = axisOrientationMap[orientation];\n\n        if (axisClass) {\n            const axis = axisClass(this.scale());\n            return axis;\n        }\n        return null;\n    }\n\n    setTickValues (tickValues) {\n        const renderConfig = this.renderConfig();\n        this.config({ ...renderConfig, tickValues });\n        this.tickValues = tickValues;\n        this.axis().tickValues(tickValues);\n    }\n\n    /**\n     * This method is used to set the space availiable to render\n     * the SimpleCell.\n     *\n     * @param {number} width The width of SimpleCell.\n     * @param {number} height The height of SimpleCell.\n     * @memberof AxisCell\n     */\n    setAvailableSpace (width = 0, height, padding, isOffset) {\n        let labelConfig = {};\n        const {\n           orientation\n       } = this.config();\n\n        this.availableSpace({ width, height, padding });\n        const type = this.constructor.type();\n\n        if (orientation === TOP || orientation === BOTTOM) {\n            labelConfig = spaceSetter(this, { isOffset })[type].x();\n        } else {\n            labelConfig = spaceSetter(this, { isOffset })[type].y();\n        }\n\n        // Set config\n        this.renderConfig({\n            labels: labelConfig\n        });\n        this.setTickConfig();\n        this.setSmartAxisName();\n        return this;\n    }\n\n    setSmartAxisName () {\n        const { orientation, name } = this.config();\n        const dimType = (orientation === TOP || orientation === BOTTOM) ? 'width' : 'height';\n        const widthDim = this.availableSpace()[dimType];\n        const labelManager = this.dependencies().labelManager;\n        labelManager.setStyle(this._axisNameStyle);\n        this.renderConfig({\n            smartAxisName: getSmartAxisName(name, widthDim, labelManager)\n        });\n        return this;\n    }\n\n    /**\n     *\n     *\n     * @memberof SimpleAxis\n     */\n    setTickConfig () {\n        return this;\n    }\n\n    getScaleValue (domainVal) {\n        if (domainVal === null || domainVal === undefined) {\n            return undefined;\n        }\n        return this.scale()(domainVal);\n    }\n\n    /**\n     *\n     *\n     *\n     * @memberof SimpleAxis\n     */\n    getTickSize () {\n        return this.axis().tickSize();\n    }\n\n    /**\n     * Gets the space occupied by the parts of an axis\n     *\n     * @return {Object} object with details about sizes of the axis.\n     * @memberof SimpleAxis\n     */\n    getAxisDimensions (...params) {\n        this.axisDimensions(computeAxisDimensions(this, ...params));\n        return this.axisDimensions();\n    }\n\n    /**\n     * Gets the space occupied by the axis\n     *\n     * @return {Object} object with details about size of the axis.\n     * @memberof SimpleAxis\n     */\n    getLogicalSpace () {\n        if (!this.logicalSpace()) {\n            this.logicalSpace(calculateContinousSpace(this));\n        }\n        setOffset(this);\n\n        return this.logicalSpace();\n    }\n\n    /**\n     * Returns the value from the domain when given a value from the range.\n     * @param {number} value Value from the range.\n     * @return {number} Value\n     */\n    invert (value) {\n        return this.scale().invert(value);\n    }\n\n    /**\n     * Gets the nearest range value from the given range values.\n     * @param {number} v1 Start range value\n     * @param {number} v2 End range value\n     *\n     * @return {Array} range values\n     */\n    getNearestRange (v1, v2) {\n        return [v1, v2];\n    }\n\n    invertExtent (v1, v2) {\n        return [this.invert(v1), this.invert(v2)];\n    }\n\n    getMinTickDifference () {\n        return this.domain();\n    }\n\n    getFormattedTickValues (tickValues) {\n        return tickValues;\n    }\n\n    /**\n     * This method returns the width in pixels for one\n     * unit along the axis. It is only applicable to band scale\n     * and returns undefined for other scale type.\n     *\n     * @return {number} the width of one band along band scale axis\n     * @memberof SimpleAxis\n     */\n    getUnitWidth () {\n        return 0;\n    }\n\n    /**\n     * This method returns an object that can be used to\n     * reconstruct this instance.\n     *\n     * @return {Object} the serializable props of axis\n     * @memberof SimpleAxis\n     */\n    serialize () {\n        return {\n            name: this.name,\n            type: this.type,\n            range: this.range(),\n            config: this.config()\n        };\n    }\n\n    /**\n     * Returns the id of the axis.\n     * @return {string} Unique identifier of the axis.\n     */\n    get id () {\n        return this._id;\n    }\n\n    /**\n     * This method is used to render the axis inside\n     * the supplied svg container.\n     *\n     * @param {SVGElement} svg the svg element in which to render the path\n     * @memberof SimpleAxis\n     */\n    /* istanbul ignore next */render () {\n        if (this.mount()) {\n            this.setTickConfig();\n            renderAxis(this);\n        }\n        return this;\n    }\n\n    /**\n     *\n     *\n     *\n     * @memberof SimpleAxis\n     */\n    remove () {\n        selectElement(this.mount()).remove();\n        return this;\n    }\n\n    /**\n     *\n     *\n     * @memberof SimpleAxis\n     */\n    unsubscribe () {\n        return this;\n    }\n\n    /**\n     *\n     *\n     *\n     * @memberof SimpleAxis\n     */\n    isReverse () {\n        const range = this.range();\n        return range[0] > range[1];\n    }\n\n    /**\n     *\n     *\n     *\n     * @memberof SimpleAxis\n     */\n    getPixelToValueRatio () {\n        const scale = this.scale();\n        const range = scale.range();\n        const domain = scale.domain();\n\n        return Math.abs(range[1] - range[0]) / (domain[1] - domain[0]);\n    }\n\n     /**\n     * Notifies when all animations/transitions of the axis are completed.\n     *\n     * @public\n     * @return {Promise} Returns a promise to notify the animation completion.\n     */\n    animationDone () {\n        return Promise.all(this._animationDonePromises);\n    }\n\n    registerAnimationDoneHook () {\n        let resolveFn;\n        const promise = new Promise((resolve) => {\n            resolveFn = resolve;\n        });\n        this._animationDonePromises.push(promise);\n\n        return () => {\n            resolveFn();\n        };\n    }\n\n    _getRawTickValue (data) {\n        return data;\n    }\n\n    getTicksBasedOnData (tickData) {\n        const allTicks = selectElement(this.mount()).selectAll('.tick');\n        let elementToBeModified = null;\n        let elementNotToBeModified = null;\n        if (tickData) {\n            elementToBeModified = allTicks.filter(tickValue => tickData === this._getRawTickValue(tickValue));\n            elementNotToBeModified = allTicks.filter(tickValue => !(tickData === this._getRawTickValue(tickValue)));\n        }\n        return {\n            selectionSet: elementToBeModified,\n            rejectionSet: elementNotToBeModified || allTicks\n        };\n    }\n}\n","import { sanitizeDomainWhenEqual } from 'muze-utils';\nimport { scaleMap } from '../../scale-creator';\n\nexport default class LinearInterpolator {\n\n    createScale (config) {\n        const {\n            range\n        } = config;\n        const scaleFactory = scaleMap.linear;\n        this._scale = scaleFactory().range(range);\n        return this._scale;\n    }\n\n    getScaleValue (domainVal) {\n        return this._scale(domainVal) + 0.5;\n    }\n\n    sanitizeDomain (domain) {\n        if (domain.length) {\n            domain = sanitizeDomainWhenEqual(domain);\n        }\n        return domain;\n    }\n}\n","import { scaleMap } from '../../scale-creator';\n\nexport default class LogInterpolator {\n\n    createScale (config) {\n        const {\n            range,\n            base\n        } = config;\n        const scaleFactory = scaleMap.log;\n        this._scale = scaleFactory().range(range).base(base);\n        return this._scale;\n    }\n\n    getScaleValue (domainVal) {\n        const scale = this._scale;\n        if (domainVal <= 0) {\n            return scale(scale.domain()[0]);\n        }\n\n        return scale(domainVal) + 0.5;\n    }\n\n    sanitizeDomain (domain) {\n        if (domain[0] <= 0) {\n            domain[0] = Math.max(1, domain[0]);\n        }\n        if (domain[1] <= 0) {\n            domain[1] = Math.max(1, domain[1]);\n        }\n        return domain;\n    }\n}\n","import { scaleMap } from '../../scale-creator';\n\nexport default class PowInterpolator {\n\n    createScale (config) {\n        const {\n            range,\n            exponent\n        } = config;\n        const scaleFactory = scaleMap.pow;\n        this._scale = scaleFactory().range(range).exponent(exponent);\n        return this._scale;\n    }\n\n    getScaleValue (domainVal) {\n        return this._scale(domainVal) + 0.5;\n    }\n\n    sanitizeDomain (domain) {\n        return domain;\n    }\n}\n","import { getSmallestDiff } from 'muze-utils';\nimport SimpleAxis from './simple-axis';\nimport { BOTTOM, TOP, LEFT, RIGHT } from '../enums/axis-orientation';\nimport { LINEAR, LOG, POW } from '../enums/scale-type';\nimport { LogInterpolator, PowInterpolator, LinearInterpolator } from './interpolators';\nimport {\n    getNumberOfTicks,\n    getValidDomain,\n    setContinousAxisDomain\n} from './helper';\n\nexport const interpolatorMap = {\n    [LOG]: LogInterpolator,\n    [POW]: PowInterpolator,\n    [LINEAR]: LinearInterpolator\n};\n\nexport default class ContinousAxis extends SimpleAxis {\n    constructor (config, dependencies) {\n        config.tickFormat = config.tickFormat || (val => val);\n        super(config, dependencies);\n    }\n    /**\n     *\n     *\n     *\n     * @memberof SimpleAxis\n     */\n    createScale (config) {\n        const {\n            base,\n            padding,\n            interpolator,\n            exponent\n        } = config;\n        const range = this.range();\n        const InterpolatorCls = interpolatorMap[interpolator];\n\n        this._interpolator = new InterpolatorCls();\n        let scale = this._interpolator.createScale({\n            padding,\n            exponent,\n            base,\n            range\n        });\n\n        scale = scale.nice();\n        return scale;\n    }\n\n    /**\n     *\n     *\n     * @static\n     *\n     * @memberof ContinousAxis\n     */\n    static type () {\n        return LINEAR;\n    }\n\n    getScaleValue (domainVal) {\n        if (domainVal === null || domainVal === undefined) {\n            return undefined;\n        }\n        return this._interpolator.getScaleValue(domainVal);\n    }\n /**\n     *\n     *\n     *\n     * @memberof SimpleAxis\n     */\n    getTickSize () {\n        const {\n            showInnerTicks,\n            showOuterTicks\n        } = this.renderConfig();\n        const axis = this.axis();\n        axis.tickSizeInner(showInnerTicks === false ? 0 : 6);\n        axis.tickSizeOuter(showOuterTicks === false ? 0 : 6);\n\n        return axis.tickSize();\n    }\n\n    /**\n     *\n     *\n     * @param {*} d\n     *\n     * @memberof SimpleAxis\n     */\n    domain (...domain) {\n        if (domain.length) {\n            const domainVal = this._interpolator.sanitizeDomain(getValidDomain(this, domain[0]));\n            setContinousAxisDomain(this, domainVal);\n            this.setAxisComponentDimensions();\n            this.logicalSpace(null);\n            return this;\n        }\n        return this._domain;\n    }\n\n    /**\n     * This method is used to set the space availiable to render\n     * the SimpleCell.\n     *\n     * @param {number} width The width of SimpleCell.\n     * @param {number} height The height of SimpleCell.\n     * @memberof AxisCell\n     */\n    setAvailableSpace (...params) {\n        super.setAvailableSpace(...params);\n        this.getTickSize();\n        return this;\n    }\n\n    /**\n     *\n     *\n     * @param {*} tickValues\n     *\n     * @memberof SimpleAxis\n     */\n    setTickConfig () {\n        const {\n            tickValues,\n            showInnerTicks\n        } = this.renderConfig();\n        const axis = this.axis();\n\n        if (!showInnerTicks) {\n            axis.tickValues([]);\n            return this;\n        }\n\n        if (tickValues) {\n            tickValues instanceof Array && this.axis().tickValues(tickValues);\n        }\n        const newTickValues = this.getTickValues();\n\n        axis.tickValues(newTickValues);\n        const smartLabel = this.dependencies().labelManager;\n        smartLabel.setStyle(this._tickLabelStyle);\n        const formatter = this._tickFormatter(newTickValues);\n        const smartTicks = newTickValues.map((val, i) => {\n            const text = formatter(val, i);\n            const tickSpace = smartLabel.getOriSize(text);\n\n            tickSpace.text = text;\n            return tickSpace;\n        });\n\n        this.smartTicks(smartTicks);\n        return this;\n    }\n\n    /**\n     *\n     *\n     *\n     * @memberof SimpleAxis\n     */\n    getTickValues () {\n        let labelDim = 0;\n        const {\n            orientation\n\n        } = this.config();\n        const {\n            tickValues\n        } = this.renderConfig();\n        const range = this.range();\n        const axis = this.axis();\n\n        const availableSpace = Math.abs(range[0] - range[1]);\n\n        const labelProps = this.axisComponentDimensions().largestTickDimensions;\n\n        if (tickValues) {\n            return tickValues;\n        }\n        labelDim = labelProps[orientation === BOTTOM || orientation === TOP ? 'width' : 'height'];\n\n        return getNumberOfTicks(availableSpace, labelDim, axis, this);\n    }\n\n    getMinTickDifference () {\n        return getSmallestDiff(this.renderConfig().tickValues);\n    }\n\n    /**\n     * Sets a fixed baseline for the first ticks so that they can render effectively within\n     * the given area\n     *\n     * @param {*} tickText\n     * @param {*} config\n     * @param {*} labelManager\n     */\n    setFixedBaseline (tickText) {\n        const {\n            orientation\n        } = this.config();\n        const {\n            labels\n        } = this.renderConfig();\n\n        const {\n            rotation\n        } = labels;\n        const axis = this.axis();\n        const ticks = axis.tickValues();\n        const smartTicks = this.smartTicks();\n\n        if (smartTicks && smartTicks.length) {\n            const { width, height } = this.smartTicks()[0];\n\n            axis.tickTransform((d) => {\n                if (d === ticks[0]) {\n                    if ((orientation === LEFT || orientation === RIGHT)) {\n                        return `translate(0, -${(height) / 3}px)`;\n                    }\n\n                    if ((orientation === TOP || orientation === BOTTOM) && !rotation) {\n                        return `translate(${width / 2}px,  ${0}px)`;\n                    }\n                } return '';\n            });\n        }\n        return tickText;\n    }\n\n}\n","import SimpleAxis from './simple-axis';\nimport { BAND } from '../enums/scale-type';\nimport { calculateBandSpace, setOffset, getRotatedSpaces } from './helper';\n\nexport default class BandAxis extends SimpleAxis {\n    /**\n     *\n     *\n     * @static\n     *\n     * @memberof BandAxis\n     */\n    static type () {\n        return BAND;\n    }\n\n    /**\n     *\n     *\n     *\n     * @memberof BandAxis\n     */\n    setTickConfig () {\n        let smartTicks = '';\n        let smartlabel;\n        const domain = this.domain();\n        const { labelManager } = this._dependencies;\n        const { padding } = this.config();\n        const { labels, tickValues } = this.renderConfig();\n        const { height: availHeight, width: availWidth, noWrap } = this.maxTickSpaces();\n        const { width, height } = getRotatedSpaces(labels.rotation, availWidth, availHeight);\n\n        tickValues && this.axis().tickValues(tickValues);\n        smartTicks = tickValues || domain;\n\n        // set the style on the shared label manager instance\n        labelManager.setStyle(this._tickLabelStyle);\n\n        // Update padding between plots\n        if (typeof padding === 'number') {\n            const paddingNormalized = Math.min(1, Math.max(0, padding));\n            this.scale().padding(paddingNormalized);\n        }\n\n        if (domain && domain.length) {\n            const values = tickValues || domain;\n            const tickFormatter = this._tickFormatter(values);\n            smartTicks = values.map((d, i) => {\n                labelManager.useEllipsesOnOverflow(true);\n\n                smartlabel = labelManager.getSmartText(tickFormatter(d, i), width, height, noWrap);\n                return labelManager.constructor.textToLines(smartlabel);\n            });\n        }\n        this.smartTicks(smartTicks);\n        return this;\n    }\n\n    /**\n     * Gets the space occupied by the axis\n     *\n     * @return {Object} object with details about size of the axis.\n     * @memberof SimpleAxis\n     */\n    getLogicalSpace () {\n        if (!this.logicalSpace()) {\n            this.logicalSpace(calculateBandSpace(this));\n        }\n        setOffset(this);\n\n        return this.logicalSpace();\n    }\n\n    /**\n     *\n     *\n     * @memberof BandAxis\n     */\n    getTickValues () {\n        return this.axis().scale().domain();\n    }\n\n    formatTickValue (val) {\n        return this.valueParser()(val);\n    }\n\n    sanitizeTickFormatter (value) {\n        const { tickFormat } = value;\n\n        if (tickFormat) {\n            return ticks => (val, i) => tickFormat(this.formatTickValue(val), val, i, ticks);\n        }\n        return () => val => this.formatTickValue(val);\n    }\n\n    /**\n     *\n     *\n     *\n     * @memberof BandAxis\n     */\n    getUnitWidth () {\n        return this.scale().bandwidth();\n    }\n\n    /**\n     *\n     *\n     *\n     * @memberof SimpleAxis\n     */\n    getTickSize () {\n        const {\n            showInnerTicks,\n            showOuterTicks\n        } = this.renderConfig();\n        const axis = this.axis();\n\n        axis.tickSizeInner(showInnerTicks ? 6 : 0);\n        axis.tickSizeOuter(showOuterTicks ? 6 : 0);\n        return axis.tickSize();\n    }\n\n    invertExtent (v1, v2) {\n        return this.scale().invertExtent(v1, v2);\n    }\n\n    /**\n     * Gets the nearest range value from the given range values.\n     * @param {number} v1 Start range value\n     * @param {number} v2 End range value\n     * @return {Array} range values\n     */\n    getNearestRange (v1, v2) {\n        const scale = this.scale();\n        const range = scale.range();\n        const reverse = range[0] > range[1];\n\n        const extent = this.invertExtent(v1, v2);\n        const p1 = scale(reverse ? extent[extent.length - 1] : extent[0]);\n        const p2 = scale(reverse ? extent[0] : extent[extent.length - 1]) + scale.bandwidth();\n        return [p1, p2];\n    }\n\n}\n","import { getSmallestDiff } from 'muze-utils';\nimport SimpleAxis from './simple-axis';\nimport { TIME } from '../enums/scale-type';\nimport { calculateBandSpace, getRotatedSpaces, getValidDomain, setContinousAxisDomain, setOffset,\n    resetTickInterval } from './helper';\nimport { applyTickSkipping } from './space-setter';\n\n/**\n *\n *\n * @export\n * @class TimeAxis\n * @extends {SimpleAxis}\n */\nexport default class TimeAxis extends SimpleAxis {\n\n    constructor (...params) {\n        super(...params);\n        this._minDiff = Infinity;\n    }\n\n    /**\n     *\n     *\n     * @param {*} range\n     *\n     * @memberof TimeAxis\n     */\n    createScale (range) {\n        let scale = super.createScale(range);\n\n        scale = scale.nice();\n        return scale;\n    }\n\n    /**\n     *\n     *\n     * @static\n     *\n     * @memberof TimeAxis\n     */\n    static type () {\n        return TIME;\n    }\n\n    formatTickValue (val) {\n        return this.scale().tickFormat()(val);\n    }\n\n    sanitizeTickFormatter (value) {\n        const { tickFormat } = value;\n\n        if (tickFormat) {\n            return (ticks) => {\n                const rawTicks = ticks.map(t => t.getTime());\n                return (val, i) => tickFormat(this.formatTickValue(val), val.getTime(), i, rawTicks);\n            };\n        }\n        return () => val => this.formatTickValue(val);\n    }\n\n     /**\n     *\n     *\n     *\n     * @memberof SimpleAxis\n     */\n    getTickSize () {\n        const {\n            showInnerTicks,\n            showOuterTicks\n        } = this.renderConfig();\n        const axis = this.axis();\n        axis.tickSizeInner(showInnerTicks === false ? 0 : 6);\n        axis.tickSizeOuter(showOuterTicks === false ? 0 : 6);\n        return super.getTickSize();\n    }\n\n    /**\n     *\n     *\n     *\n     * @memberof TimeAxis\n     */\n    getTickValues () {\n        return this.renderConfig().tickValues || this.scale().ticks();\n    }\n\n    /**\n     *\n     *\n     * @param {*} diff\n     *\n     * @memberof TimeAxis\n     */\n    minDiff (diff) {\n        this._minDiff = Math.min(this._minDiff, diff);\n        return this;\n    }\n\n    applyTickSkipping () {\n        applyTickSkipping(this);\n    }\n\n    /**\n     *\n     *\n     * @param {*} d\n     *\n     * @memberof SimpleAxis\n     */\n    domain (...domain) {\n        if (domain.length) {\n            const domainValue = getValidDomain(this, domain[0]);\n            setContinousAxisDomain(this, domainValue);\n            this.setAxisComponentDimensions();\n            this.logicalSpace(null);\n\n            resetTickInterval(this, domainValue);\n            return this;\n        }\n        return this._domain;\n    }\n\n    /**\n     * Gets the space occupied by the axis\n     *\n     * @return {Object} object with details about size of the axis.\n     * @memberof SimpleAxis\n     */\n    getLogicalSpace () {\n        if (!this.logicalSpace()) {\n            this.logicalSpace(calculateBandSpace(this));\n        }\n        setOffset(this);\n\n        return this.logicalSpace();\n    }\n\n    getMinTickDifference () {\n        return getSmallestDiff(this.config().tickValues);\n    }\n\n    /**\n     * This method is used to set the space availiable to render\n     * the SimpleCell.\n     *\n     * @param {number} width The width of SimpleCell.\n     * @param {number} height The height of SimpleCell.\n     * @memberof AxisCell\n     */\n    setAvailableSpace (...params) {\n        super.setAvailableSpace(...params);\n        this.getTickSize();\n        return this;\n    }\n\n    /**\n     *\n     *\n     * @returns\n     * @memberof BandAxis\n     */\n    setTickConfig () {\n        let smartTicks;\n        let smartlabel;\n\n        const { labels, tickValues } = this.renderConfig();\n        const { height: availHeight, width: availWidth, noWrap } = this.maxTickSpaces();\n        const { labelManager } = this._dependencies;\n        const domain = this.getTickValues();\n\n        tickValues && this.axis().tickValues(tickValues);\n\n        const { width, height } = getRotatedSpaces(labels.rotation, availWidth, availHeight);\n\n        smartTicks = tickValues || domain;\n\n        // set the style on the shared label manager instance\n        labelManager.setStyle(this._tickLabelStyle);\n\n        if (domain && domain.length) {\n            const values = tickValues || domain;\n            const tickFormatter = this._tickFormatter(values);\n            smartTicks = values.map((d, i) => {\n                labelManager.useEllipsesOnOverflow(true);\n\n                smartlabel = labelManager.getSmartText(tickFormatter(d, i), width, height, noWrap);\n                return labelManager.constructor.textToLines(smartlabel);\n            });\n        }\n\n        this.smartTicks(smartTicks);\n        return this;\n    }\n    _getRawTickValue (data) {\n        return (new Date(data)).getTime();\n    }\n}\n","export const x11Colors = {\n    Pink: { hex: 'ffc0cb', rgb: '255,192,203' },\n    LightPink: { hex: 'ffb6c1', rgb: '255,182,193' },\n    HotPink: { hex: 'ff69b4', rgb: '255,105,180' },\n    DeepPink: { hex: 'ff1493', rgb: '255,20,147' },\n    PaleVioletRed: { hex: 'db7093', rgb: '219,112,147' },\n    MediumVioletRed: { hex: 'c71585', rgb: '199,21,133' },\n    LightSalmon: { hex: 'ffa07a', rgb: '255,160,122' },\n    Salmon: { hex: 'fa8072', rgb: '250,128,114' },\n    DarkSalmon: { hex: 'e9967a', rgb: '233,150,122' },\n    LightCoral: { hex: 'f08080', rgb: '240,128,128' },\n    IndianRed: { hex: 'cd5c5c', rgb: '205,92,92' },\n    Crimson: { hex: 'dc143c', rgb: '220,20,60' },\n    FireBrick: { hex: 'b22222', rgb: '178,34,34' },\n    DarkRed: { hex: '8b0000', rgb: '139,0,0' },\n    Red: { hex: 'ff0000', rgb: '255,0,0' },\n    OrangeRed: { hex: 'ff4500', rgb: '255,69,0' },\n    Tomato: { hex: 'ff6347', rgb: '255,99,71' },\n    Coral: { hex: 'ff7f50', rgb: '255,127,80' },\n    DarkOrange: { hex: 'ff8c00', rgb: '255,140,0' },\n    Orange: { hex: 'ffa500', rgb: '255,165,0' },\n    Gold: { hex: 'ffd700', rgb: '255,215,0' },\n    Yellow: { hex: 'ffff00', rgb: '255,255,0' },\n    LightYellow: { hex: 'ffffe0', rgb: '255,255,224' },\n    LemonChiffon: { hex: 'fffacd', rgb: '255,250,205' },\n    LightGoldenrodYellow: { hex: 'fafad2', rgb: '250,250,210' },\n    PapayaWhip: { hex: 'ffefd5', rgb: '255,239,213' },\n    Moccasin: { hex: 'ffe4b5', rgb: '255,228,181' },\n    PeachPuff: { hex: 'ffdab9', rgb: '255,218,185' },\n    PaleGoldenrod: { hex: 'eee8aa', rgb: '238,232,170' },\n    Khaki: { hex: 'f0e68c', rgb: '240,230,140' },\n    DarkKhaki: { hex: 'bdb76b', rgb: '189,183,107' },\n    Cornsilk: { hex: 'fff8dc', rgb: '255,248,220' },\n    BlanchedAlmond: { hex: 'ffebcd', rgb: '255,235,205' },\n    Bisque: { hex: 'ffe4c4', rgb: '255,228,196' },\n    NavajoWhite: { hex: 'ffdead', rgb: '255,222,173' },\n    Wheat: { hex: 'f5deb3', rgb: '245,222,179' },\n    BurlyWood: { hex: 'deb887', rgb: '222,184,135' },\n    Tan: { hex: 'd2b48c', rgb: '210,180,140' },\n    RosyBrown: { hex: 'bc8f8f', rgb: '188,143,143' },\n    SandyBrown: { hex: 'f4a460', rgb: '244,164,96' },\n    Goldenrod: { hex: 'daa520', rgb: '218,165,32' },\n    DarkGoldenrod: { hex: 'b8860b', rgb: '184,134,11' },\n    Peru: { hex: 'cd853f', rgb: '205,133,63' },\n    Chocolate: { hex: 'd2691e', rgb: '210,105,30' },\n    SaddleBrown: { hex: '8b4513', rgb: '139,69,19' },\n    Sienna: { hex: 'a0522d', rgb: '160,82,45' },\n    Brown: { hex: 'a52a2a', rgb: '165,42,42' },\n    Maroon: { hex: '800000', rgb: '128,0,0' },\n    DarkOliveGreen: { hex: '556b2f', rgb: '85,107,47' },\n    Olive: { hex: '808000', rgb: '128,128,0' },\n    OliveDrab: { hex: '6b8e23', rgb: '107,142,35' },\n    YellowGreen: { hex: '9acd32', rgb: '154,205,50' },\n    LimeGreen: { hex: '32cd32', rgb: '50,205,50' },\n    Lime: { hex: '00ff00', rgb: '0,255,0' },\n    LawnGreen: { hex: '7cfc00', rgb: '124,252,0' },\n    Chartreuse: { hex: '7fff00', rgb: '127,255,0' },\n    GreenYellow: { hex: 'adff2f', rgb: '173,255,47' },\n    SpringGreen: { hex: '00ff7f', rgb: '0,255,127' },\n    MediumSpringGreen: { hex: '00fa9a', rgb: '0,250,154' },\n    LightGreen: { hex: '90ee90', rgb: '144,238,144' },\n    PaleGreen: { hex: '98fb98', rgb: '152,251,152' },\n    DarkSeaGreen: { hex: '8fbc8f', rgb: '143,188,143' },\n    MediumSeaGreen: { hex: '3cb371', rgb: '60,179,113' },\n    SeaGreen: { hex: '2e8b57', rgb: '46,139,87' },\n    ForestGreen: { hex: '228b22', rgb: '34,139,34' },\n    Green: { hex: '008000', rgb: '0,128,0' },\n    DarkGreen: { hex: '006400', rgb: '0,100,0' },\n    MediumAquamarine: { hex: '66cdaa', rgb: '102,205,170' },\n    Aqua: { hex: '00ffff', rgb: '0,255,255' },\n    Cyan: { hex: '00ffff', rgb: '0,255,255' },\n    LightCyan: { hex: 'e0ffff', rgb: '224,255,255' },\n    PaleTurquoise: { hex: 'afeeee', rgb: '175,238,238' },\n    Aquamarine: { hex: '7fffd4', rgb: '127,255,212' },\n    Turquoise: { hex: '40e0d0', rgb: '64,224,208' },\n    MediumTurquoise: { hex: '48d1cc', rgb: '72,209,204' },\n    DarkTurquoise: { hex: '00ced1', rgb: '0,206,209' },\n    LightSeaGreen: { hex: '20b2aa', rgb: '32,178,170' },\n    CadetBlue: { hex: '5f9ea0', rgb: '95,158,160' },\n    DarkCyan: { hex: '008b8b', rgb: '0,139,139' },\n    Teal: { hex: '008080', rgb: '0,128,128' },\n    LightSteelBlue: { hex: 'b0c4de', rgb: '176,196,222' },\n    PowderBlue: { hex: 'b0e0e6', rgb: '176,224,230' },\n    LightBlue: { hex: 'add8e6', rgb: '173,216,230' },\n    SkyBlue: { hex: '87ceeb', rgb: '135,206,235' },\n    LightSkyBlue: { hex: '87cefa', rgb: '135,206,250' },\n    DeepSkyBlue: { hex: '00bfff', rgb: '0,191,255' },\n    DodgerBlue: { hex: '1e90ff', rgb: '30,144,255' },\n    CornflowerBlue: { hex: '6495ed', rgb: '100,149,237' },\n    SteelBlue: { hex: '4682b4', rgb: '70,130,180' },\n    RoyalBlue: { hex: '4169e1', rgb: '65,105,225' },\n    Blue: { hex: '0000ff', rgb: '0,0,255' },\n    MediumBlue: { hex: '0000cd', rgb: '0,0,205' },\n    DarkBlue: { hex: '00008b', rgb: '0,0,139' },\n    Navy: { hex: '000080', rgb: '0,0,128' },\n    MidnightBlue: { hex: '191970', rgb: '25,25,112' },\n    Lavender: { hex: 'e6e6fa', rgb: '230,230,250' },\n    Thistle: { hex: 'd8bfd8', rgb: '216,191,216' },\n    Plum: { hex: 'dda0dd', rgb: '221,160,221' },\n    Violet: { hex: 'ee82ee', rgb: '238,130,238' },\n    Orchid: { hex: 'da70d6', rgb: '218,112,214' },\n    Fuchsia: { hex: 'ff00ff', rgb: '255,0,255' },\n    Magenta: { hex: 'ff00ff', rgb: '255,0,255' },\n    MediumOrchid: { hex: 'ba55d3', rgb: '186,85,211' },\n    MediumPurple: { hex: '9370db', rgb: '147,112,219' },\n    BlueViolet: { hex: '8a2be2', rgb: '138,43,226' },\n    DarkViolet: { hex: '9400d3', rgb: '148,0,211' },\n    DarkOrchid: { hex: '9932cc', rgb: '153,50,204' },\n    DarkMagenta: { hex: '8b008b', rgb: '139,0,139' },\n    Purple: { hex: '800080', rgb: '128,0,128' },\n    Indigo: { hex: '4b0082', rgb: '75,0,130' },\n    DarkSlateBlue: { hex: '483d8b', rgb: '72,61,139' },\n    SlateBlue: { hex: '6a5acd', rgb: '106,90,205' },\n    MediumSlateBlue: { hex: '7b68ee', rgb: '123,104,238' },\n    White: { hex: 'ffffff', rgb: '255,255,255' },\n    Snow: { hex: 'fffafa', rgb: '255,250,250' },\n    Honeydew: { hex: 'f0fff0', rgb: '240,255,240' },\n    MintCream: { hex: 'f5fffa', rgb: '245,255,250' },\n    Azure: { hex: 'f0ffff', rgb: '240,255,255' },\n    AliceBlue: { hex: 'f0f8ff', rgb: '240,248,255' },\n    GhostWhite: { hex: 'f8f8ff', rgb: '248,248,255' },\n    WhiteSmoke: { hex: 'f5f5f5', rgb: '245,245,245' },\n    Seashell: { hex: 'fff5ee', rgb: '255,245,238' },\n    Beige: { hex: 'f5f5dc', rgb: '245,245,220' },\n    OldLace: { hex: 'fdf5e6', rgb: '253,245,230' },\n    FloralWhite: { hex: 'fffaf0', rgb: '255,250,240' },\n    Ivory: { hex: 'fffff0', rgb: '255,255,240' },\n    AntiqueWhite: { hex: 'faebd7', rgb: '250,235,215' },\n    Linen: { hex: 'faf0e6', rgb: '250,240,230' },\n    LavenderBlush: { hex: 'fff0f5', rgb: '255,240,245' },\n    MistyRose: { hex: 'ffe4e1', rgb: '255,228,225' },\n    Gainsboro: { hex: 'dcdcdc', rgb: '220,220,220' },\n    LightGray: { hex: 'd3d3d3', rgb: '211,211,211' },\n    Silver: { hex: 'c0c0c0', rgb: '192,192,192' },\n    DarkGrey: { hex: 'a9a9a9', rgb: '169,169,169' },\n    Grey: { hex: '808080', rgb: '128,128,128' },\n    DimGrey: { hex: '696969', rgb: '105,105,105' },\n    LightSlateGrey: { hex: '778899', rgb: '119,136,153' },\n    SlateGrey: { hex: '708090', rgb: '112,128,144' },\n    DarkSlateGrey: { hex: '2f4f4f', rgb: '47,79,79' },\n    Black: { hex: '000000', rgb: '0,0,0' }\n};\n","import {\n    LINEAR\n} from '../enums/constants';\n/**\n * Set of default colors\n */\nexport const palette = [\n    '#1f77b4',\n    '#ff7f0e',\n    '#2ca02c',\n    '#d62728',\n    '#9467bd',\n    '#8c564b',\n    '#e377c2',\n    '#7f7f7f',\n    '#bcbd22',\n    '#17becf'\n];\n\nexport const DEFAULT_GRADIENT_COLOR = '#eaeaea';\n\nexport const DEFAULT_CONFIG = {\n    range: palette,\n    value: palette[0],\n    step: false,\n    stops: 5,\n    type: LINEAR\n};\n","import { mergeRecursive, detectColor, hexToHsv, rgbToHsv, defaultValue } from 'muze-utils';\nimport { x11Colors } from './color-maps';\nimport { palette, DEFAULT_GRADIENT_COLOR, DEFAULT_CONFIG } from './defaults';\nimport { LINEAR, RGB, HEX, HSL, HSLA } from '../enums/constants';\n\nexport const getHslString = hslArr => `hsla(${hslArr[0] * 360},${hslArr[1] * 100}%,${hslArr[2] * 100}%,\\\n${hslArr[3] || 1})`;\n\nexport const convertToXllString = baseString => (baseString.split(' ') || [])\n                .reduce((x, e) => `${x}${e.charAt(0).toUpperCase()}${e.slice(1)}`, '');\n\nexport const getActualHslColor = (e, paletteColor) => {\n    let color = '';\n    if (typeof e === 'string') {\n        e = e.replace(/ /g, '');\n        e = e.toLowerCase();\n        if (detectColor(e) === HSL || detectColor(e) === HSLA) {\n            color = e.match(/(\\d+(\\.\\d+)?)/g);\n            color = [color[0] / 360, color[1] / 100, color[2] / 100, defaultValue(Number(color[3]), 1)];\n        } else if (detectColor(e) === HEX) {\n            color = hexToHsv(e);\n        } else if (detectColor(e) === RGB) {\n            const col = e.substring(e.indexOf('(') + 1, e.lastIndexOf(')')).split(/,\\s*/);\n            color = rgbToHsv(...col);\n        } else if (x11Colors[convertToXllString(e)]) {\n            color = rgbToHsv(...x11Colors[convertToXllString(e)].rgb.split(','));\n        }\n    } else if (!(e instanceof Array)) {\n        color = rgbToHsv(paletteColor);\n    } else {\n        color = e;\n    }\n    return color;\n};\n\nexport const PROPS = {\n    config: {\n        sanitization: (context, config) => {\n            const defCon = mergeRecursive({}, context.constructor.defaultConfig());\n            if (config.type === LINEAR) {\n                config.range = config.range || [defCon.range[0]];\n                config.range = config.range.length > 1 ? config.range : [DEFAULT_GRADIENT_COLOR, ...config.range];\n            }\n            const oldConfig = mergeRecursive(defCon, context.config());\n            const newConfig = mergeRecursive(oldConfig, config);\n\n            if (newConfig.range instanceof Array) {\n                newConfig.range = newConfig.range.map((e, i) => getActualHslColor(e, palette[i]));\n                newConfig.stops = config.stops ?\n                                    config.stops :\n                                    config.range && config.range.length > 2 ?\n                                             config.range.length :\n                                                DEFAULT_CONFIG.stops;\n            }\n            newConfig.value = getActualHslColor(newConfig.value, newConfig.value);\n            return newConfig;\n        }\n    },\n    domain: {},\n    scale: {},\n    uniqueValues: {}\n};\n","import { InvalidAwareTypes, getObjProp } from 'muze-utils';\n\nexport const treatNullMeasures = (domainVal, scaledVal, minDomainScaledVal) => {\n    if (domainVal instanceof InvalidAwareTypes) {\n        return minDomainScaledVal;\n    }\n    return scaledVal;\n};\n\nexport const resolveAxisConfig = (propVal, defaultVal, context) => {\n    const constructor = getObjProp(propVal, 'constructor');\n    switch (constructor) {\n    case Function:\n        return propVal(defaultVal, context);\n    case Array:\n        return propVal;\n    default:\n        return defaultVal;\n    }\n};\n\nexport const sanitiseConfigIntervals = (intervals) => {\n    if (intervals) {\n        return intervals;\n    }\n    return 5;\n};\n","import { piecewiseInterpolator,\n        hslInterpolator,\n        sanitizeDomainWhenEqual, getReadableTicks } from 'muze-utils';\nimport { CONTINOUS, DISCRETE } from '../enums/constants';\nimport { LINEAR, SEQUENTIAL, ORDINAL, QUANTILE } from '../enums/scale-type';\nimport { getHslString } from './props';\nimport { treatNullMeasures } from '../helper';\n\nconst getStops = (domain, stops) => {\n    let newStops = [];\n\n    if (stops instanceof Array) {\n        newStops = stops.slice().sort();\n        newStops = [...new Set([domain[0], ...stops, domain[1]])].sort();\n    } else {\n        newStops = getReadableTicks(domain, stops);\n    }\n    return { domain, newStops };\n};\n\nconst rangeStops = (newStopsLength, range) => {\n    let newRange = [];\n    const maxRangeLength = Math.min(range.length, 18);\n\n    if (newStopsLength > maxRangeLength) {\n        const interpolator = piecewiseInterpolator()(hslInterpolator(), range.map(e => getHslString(e)));\n        for (let i = 0; i < newStopsLength; i++) {\n            newRange[i] = interpolator(i / (newStopsLength - 1));\n        }\n    } else {\n        newRange = range.slice(0, newStopsLength);\n    }\n    return { newRange };\n};\n\n/**\n*\n*\n* @param {*} domain\n*\n*/\nconst indexedDomain = (domain) => {\n    const uniqueVals = domain;\n    const retDomain = domain.map((d, i) => (i) / (domain.length - 1));\n    return { domain: retDomain, uniqueVals, scaleDomain: [0, 1] };\n};\n\n/**\n *\n *\n * @param {*} domain\n *\n */\nconst indexedDomainMeasure = (domain, stops, range) => {\n    const uniqueVals = domain;\n    return { domain, uniqueVals, scaleDomain: [0, 1], range };\n};\n\n/**\n *\n *\n * @param {*} domain\n *\n */\nconst normalDomain = (domain, stops, range) => {\n    const uniqueVals = domain;\n    return { uniqueVals, domain, nice: true, range };\n};\n\n/**\n *\n *\n * @param {*} domain\n * @param {*} stops\n *\n */\nconst steppedDomain = (domain, stops, range) => {\n    const { domain: uniqueVals, newStops } = getStops(domain, stops);\n    const { newRange } = rangeStops(newStops.length - 1, range);\n\n    return { uniqueVals, domain: newStops, nice: true, range: newRange };\n};\n\nconst continousSteppedDomain = (domain, stops, range) => {\n    const { domain: uniqueVals, newStops } = getStops(sanitizeDomainWhenEqual(domain), range.length - 1);\n    const hslRange = range.map(e => getHslString(e));\n    return { uniqueVals, domain: newStops, nice: true, range: hslRange };\n};\n\n/**\n *\n *\n * @param {*} domainValue\n * @param {*} scale\n * @param {*} domain\n * @param {*} uniqueVals\n *\n */\nconst uniqueRange = (domainValue, scale, domain, uniqueVals) => {\n    const index = uniqueVals.indexOf(domainValue);\n    const numVal = domain[index];\n    return scale(numVal);\n};\n\n/**\n *\n *\n * @param {*} domainValue\n * @param {*} scale\n * @param {*} domain\n *\n */\nconst indexedRange = (domainValue, scale, domain) => {\n    const numVal = (domainValue - domain[0]) / (domain[domain.length - 1] - domain[0]);\n\n    return treatNullMeasures(domainValue, scale(numVal), scale(0));\n};\n\n/**\n *\n *\n * @param {*} domainValue\n * @param {*} scale\n */\nconst normalRange = (domainValue, scale, domain) => treatNullMeasures(domainValue, scale(domainValue),\n    scale(domain[0]));\n\n/**\n *\n *\n * @param {*} stops\n */\nconst strategies = () => ({\n    [`${CONTINOUS}-${CONTINOUS}-${SEQUENTIAL}`]: {\n        scale: SEQUENTIAL,\n        domainRange: () => indexedDomainMeasure,\n        value: () => indexedRange\n    },\n    [`${CONTINOUS}-${DISCRETE}-${SEQUENTIAL}`]: {\n        scale: SEQUENTIAL,\n        domainRange: () => indexedDomainMeasure,\n        value: () => indexedRange\n    },\n    [`${DISCRETE}-${DISCRETE}-${SEQUENTIAL}`]: {\n        scale: SEQUENTIAL,\n        domainRange: () => indexedDomain,\n        value: () => uniqueRange\n    },\n    [`${DISCRETE}-${DISCRETE}-${ORDINAL}`]: {\n        scale: ORDINAL,\n        domainRange: () => normalDomain,\n        value: () => normalRange\n    },\n    [`${CONTINOUS}-${CONTINOUS}-${ORDINAL}`]: {\n        scale: LINEAR,\n        domainRange: () => continousSteppedDomain,\n        value: () => normalRange\n    },\n    [`${CONTINOUS}-${DISCRETE}-${ORDINAL}`]: {\n        scale: QUANTILE,\n        domainRange: () => steppedDomain,\n        value: () => normalRange\n\n    }\n});\n\n/**\n *\n *\n * @param {*} domainType\n * @param {*} rangeType\n * @param {*} schemeType\n * @param {*} stops\n */\nexport const strategyGetter = (domainType, rangeType, schemeType) =>\n    strategies()[`${domainType}-${rangeType}-${schemeType || ''}`];\n","/**\n * @module Axis\n * This file declares a class that is used to render an axis to add  meaning to\n * plots.\n */\nimport { getUniqueId, generateGetterSetters, rgbToHsv, defaultValue } from 'muze-utils';\nimport { createScale, getScheme, getSchemeType, scaleMap } from '../scale-creator';\nimport { CONTINOUS, DISCRETE, ORDINAL, COLOR } from '../enums/constants';\nimport { strategyGetter } from './color-strategy';\nimport { DEFAULT_CONFIG } from './defaults';\nimport { PROPS, getHslString, getActualHslColor } from './props';\n\n/**\n* This class is used to instantiate a SimpleAxis.\n* @class SimpleAxis\n*/\nexport default class ColorAxis {\n\n    /**\n    * Creates an instance of SimpleAxis.\n    * @param {Object} config input parameters.\n    * @param {Object | undefined} params.range Type of color range.\n    * @param {string} params.name the label to show on axis.\n    * @param {string} params.type The type of scale to handle.\n    * @memberof ColorAxis\n    */\n    constructor (config) {\n        generateGetterSetters(this, PROPS);\n        this.config(config);\n\n        this._domainType = this._config.type === 'linear' ? CONTINOUS : DISCRETE;\n        this._rangeType = (this._config.type === 'linear' && !this._config.step) ? CONTINOUS : DISCRETE;\n\n        this._schemeType = getSchemeType(this._config.range);\n\n        this._colorStrategy = this.setColorStrategy(this._domainType, this._rangeType, this._schemeType);\n        this._scale = this.createScale(this._colorStrategy);\n\n        this._id = getUniqueId();\n\n        this.updateDomain(config.domain);\n    }\n\n    /**\n     *\n     *\n     * @static\n     *\n     * @memberof ColorAxis\n     */\n    static defaultConfig () {\n        return DEFAULT_CONFIG;\n    }\n\n    /**\n     *\n     *\n     * @static\n     *\n     * @memberof ColorAxis\n     */\n    static type () {\n        return COLOR;\n    }\n\n    /**\n     *\n     *\n     * @param {*} colorStrategy\n     *\n     * @memberof ColorAxis\n     */\n    createScale (colorStrategy) {\n        const { range } = this.config();\n        if (range && typeof (range) === 'string') {\n            return getScheme(range);\n        }\n        return createScale({\n            type: colorStrategy.scale,\n            range\n        });\n    }\n\n    /**\n     *\n     *\n     * @param {*} domainType\n     * @param {*} rangeType\n     * @param {*} schemeType\n     *\n     * @memberof ColorAxis\n     */\n    setColorStrategy (domainType, rangeType, schemeType) {\n        return strategyGetter(domainType, rangeType, schemeType);\n    }\n\n    /**\n     *\n     *\n     * @param {*} domainVal\n     *\n     * @memberof ColorAxis\n     */\n    getHslString (hslColorArray) {\n        return getHslString(hslColorArray);\n    }\n    /**\n     *\n     *\n     * @param {*} domainVal\n     *\n     * @memberof ColorAxis\n     */\n    getColor (domainVal) {\n        return this.getHslString(this.getRawColor(domainVal));\n    }\n\n    /**\n     *\n     *\n     * @param {*} domainVal\n     *\n     * @memberof ColorAxis\n     */\n    getRawColor (domainVal) {\n        if (this.domain() && domainVal !== undefined) {\n            const scale = this.scale();\n            const range = scale.range ? scale.range() : null;\n            const color = this._colorStrategy.value(range)(domainVal, scale, this.domain(), this.uniqueValues());\n\n            if (color) {\n                if (typeof color === 'string') {\n                    const col = color.substring(color.indexOf('(') + 1, color.lastIndexOf(')')).split(/,\\s*/);\n                    return rgbToHsv(...col);\n                }\n                return [...color];\n            }\n        }\n        return [...this.config().value];\n    }\n\n    setRangeWithInterpolatedColors (scaleType, scaleInfo) {\n        const { domain: originalDomain, range: originalRange } = scaleInfo;\n        const originalDomainLen = originalDomain.length;\n        const originalRangeLen = originalRange.length;\n\n        if (scaleType === ORDINAL && originalDomainLen > originalRangeLen) {\n            const newRange = [];\n            const newDomain = originalDomain.map((d, i) => i / originalDomainLen);\n\n            this._linearScale = scaleMap.linear()\n                .range(this._config.range)\n                .domain(newDomain);\n\n            for (let i = 0, len = originalDomainLen; i < len; i++) {\n                const rangeVal = (1 / len) * i;\n                newRange.push([...this._linearScale(rangeVal)]);\n            }\n            this.scale().range(newRange);\n        }\n    }\n\n    /**\n     *\n     *\n     * @param {*} [domain=[]]\n     *\n     * @memberof ColorAxis\n     */\n    updateDomain (domain = []) {\n        if (domain.length) {\n            const scale = this.scale();\n            const range = scale.range ? scale.range() : null;\n            const domainRangeFn = this._colorStrategy.domainRange();\n            const scaleType = this._colorStrategy.scale;\n            const scaleInfo = domainRangeFn(domain, this.config().stops, range);\n\n            this.domain(scaleInfo.domain);\n            scaleInfo.range && this.scale().range(scaleInfo.range);\n            this.uniqueValues(scaleInfo.uniqueVals);\n            this.scale().domain(scaleInfo.scaleDomain || this.domain());\n\n            // Interpolate colors using linear scale if domain exceeds range\n            this.setRangeWithInterpolatedColors(scaleType, scaleInfo);\n        }\n        return this;\n    }\n\n    /**\n     * This method returns an object that can be used to\n     * reconstruct this instance.\n     *\n     * @return {Object} the serializable props of axis\n     * @memberof ShapeAxis\n     */\n    serialize () {\n        return {\n            type: this.constructor.type(),\n            scale: this.scale(),\n            domain: this.domain(),\n            config: this.config()\n        };\n    }\n\n    transformColor (color, transformationArr) {\n        const h = color[0] * 360;\n        const s = color[1] * 100;\n        const l = color[2] * 100;\n        const a = Math.min(defaultValue(color[3], 0), 1);\n        const newH = h + transformationArr[0];\n        const newS = s + transformationArr[1];\n        const newL = l + transformationArr[2];\n        const newA = Math.min(a + transformationArr[3] || 0, 1);\n\n        return { color: `hsla(${newH},${newS}%,${newL}%,${newA})`, hsla: [newH / 360, newS / 100, newL / 100, newA] };\n    }\n\n    /**\n     * Returns the id of the axis.\n     * @return {string} Unique identifier of the axis.\n     */\n    id () {\n        return this._id;\n    }\n\n    getHslArray (color) {\n        return getActualHslColor(color);\n    }\n\n}\n","export const DEFAULT_CONFIG = {\n    value: 51,\n    range: [51, 1000]\n};\n","import { numberInterpolator, piecewiseInterpolator, getReadableTicks } from 'muze-utils';\nimport { CONTINOUS, DISCRETE } from '../enums/constants';\nimport { LINEAR, THRESHOLD } from '../enums/scale-type';\nimport { treatNullMeasures } from '../helper';\n\n/**\n *\n *\n * @param {*} domain\n *\n */\nconst indexedDomain = (domain) => {\n    const uniqueVals = domain;\n    const retDomain = domain.map((d, i) => (i) / (domain.length - 1));\n    return { domain: retDomain, uniqueVals, scaleDomain: [0, 1] };\n};\n\n/**\n *\n *\n * @param {*} domain\n *\n */\nconst normalDomain = (domain) => {\n    const uniqueVals = domain;\n    return { uniqueVals, domain };\n};\n\n/**\n *\n *\n * @param {*} domain\n * @param {*} intervals\n *\n */\nconst steppedDomain = (domain, intervals) => {\n    let newIntervals = [];\n    if (intervals instanceof Array) {\n        newIntervals = intervals.slice().sort();\n    } else {\n        // const interpolator = numberInterpolator()(...domain);\n        // for (let i = 0; i < intervals; i++) {\n        //     newIntervals[i] = interpolator(i / (intervals - 1));\n        // }\n        newIntervals = getReadableTicks(domain, intervals);\n    }\n    // if (newIntervals[0] < domain[0]) {\n    //     newIntervals.shift();\n    // }\n    const retDomain = newIntervals;\n    return { uniqueVals: newIntervals, domain: retDomain, nice: true };\n};\n\n/**\n *\n *\n * @param {*} domainValue\n * @param {*} scale\n * @param {*} domain\n * @param {*} uniqueVals\n *\n */\nconst discreteRange = (domainValue, scale, domain) => {\n    const numVal = (domainValue - domain[0]) / (domain[domain.length - 1] - domain[0]);\n    const interpolator = numberInterpolator()(...scale.range());\n    return treatNullMeasures(domainValue, interpolator(numVal), interpolator(domain[0]));\n};\n\n/**\n *\n *\n * @param {*} domainValue\n * @param {*} scale\n * @param {*} domain\n *\n */\nconst pieceWiseRange = (domainValue, scale, domain, uniqueVals) => {\n    const index = uniqueVals.indexOf(domainValue);\n    const numVal = domain[index];\n    const fn = piecewiseInterpolator()(numberInterpolator(), [...scale.range()]);\n    return fn(numVal);\n};\n\n/**\n *\n *\n * @param {*} domainValue\n * @param {*} scale\n */\nconst normalRange = (domainValue, scale, domain) =>\n    treatNullMeasures(domainValue, scale(domainValue), scale(domain[0]));\n\n/**\n *\n *\n * @param {*} intervals\n */\nconst strategies = {\n    [`${DISCRETE}-${CONTINOUS}`]: {\n        scale: LINEAR,\n        domain: indexedDomain,\n        range: pieceWiseRange\n    },\n    [`${CONTINOUS}-${CONTINOUS}`]: {\n        scale: LINEAR,\n        domain: normalDomain,\n        range: normalRange\n    },\n    [`${CONTINOUS}-${DISCRETE}`]: {\n        scale: THRESHOLD,\n        domain: steppedDomain,\n        range: discreteRange\n    }\n};\n\n/**\n *\n *\n * @param {*} domainType\n * @param {*} rangeType\n * @param {*} schemeType\n * @param {*} intervals\n */\nexport const strategyGetter = (domainType, rangeType) =>\n     strategies[`${domainType}-${rangeType}`];\n","import { mergeRecursive } from 'muze-utils';\n\nexport const PROPS = {\n    config: {\n        sanitization: (context, value) => {\n            context._userRange = value.range;\n            return mergeRecursive(context._config || {}, value);\n        }\n    },\n    domain: {\n        sanitization: (context, value) => {\n            context.scale().domain(value);\n            return value;\n        }\n    },\n    range: {},\n    scale: {},\n    uniqueValues: {}\n};\n","/**\n * @module Axis\n * This file declares a class that is used to render an axis to add  meaning to\n * plots.\n */\nimport { getUniqueId, generateGetterSetters } from 'muze-utils';\nimport { createScale } from '../scale-creator';\nimport { DEFAULT_CONFIG } from './defaults';\nimport { SIZE, CONTINOUS, DISCRETE } from '../enums/constants';\nimport { strategyGetter } from './size-strategy';\nimport { PROPS } from './props';\nimport { sanitiseConfigIntervals } from '../helper';\n\n/**\n* This class is used to instantiate a SimpleAxis.\n* @class SimpleAxis\n*/\nexport default class SizeAxis {\n\n    /**\n     * Creates an instance of SimpleAxis.\n     * @param {Object} config input parameters.\n     * @memberof SizeAxis\n     */\n    constructor (config) {\n        generateGetterSetters(this, PROPS);\n\n        this._id = getUniqueId();\n        this.config(this.constructor.defaultConfig());\n        this.config(config);\n        // @todo: Will use configuration override using scale decorator\n        this._domainType = this._config.type === 'linear' ? CONTINOUS : DISCRETE;\n\n        this._config.range = this._userRange ? this._userRange : this._config.range;\n\n        this._config.stops = sanitiseConfigIntervals(this._config.stops);\n        this._rangeType = this._config.type === 'linear' && !!this._config.stops ? DISCRETE : CONTINOUS;\n\n        this._sizeStrategy = this.setStrategy(this._domainType, this._rangeType);\n        this._scale = this.createScale(this._sizeStrategy);\n        this._range = this._config.range;\n\n        this.updateDomain(config.domain);\n    }\n\n     /**\n     *\n     *\n     * @param {*} domainType\n     * @param {*} rangeType\n     * @param {*} schemeType\n     *\n     * @memberof ColorAxis\n     */\n    setStrategy (domainType, rangeType) {\n        return strategyGetter(domainType, rangeType);\n    }\n\n    /**\n     *\n     *\n     *\n     * @memberof SizeAxis\n     */\n    createScale (strategy) {\n        const {\n            range\n        } = this.config();\n        return createScale({\n            type: strategy.scale,\n            range\n        });\n    }\n\n    /**\n     *\n     *\n     * @static\n     *\n     * @memberof ColorAxis\n     */\n    static defaultConfig () {\n        return DEFAULT_CONFIG;\n    }\n\n     /**\n     *\n     *\n     * @static\n     *\n     * @memberof ColorAxis\n     */\n    static type () {\n        return SIZE;\n    }\n\n    /**\n     *\n     *\n     * @param {*} domainVal\n     *\n     * @memberof SizeAxis\n     */\n    getSize (domainVal = 0) {\n        let sizeVal = 1;\n        const {\n            value\n        } = this.config();\n        const scale = this.scale();\n        const domain = this.domain() || [1, 1];\n\n        if (!scale || domain[0] === domain[1] || domain.length === 1) {\n            sizeVal = value;\n        } else {\n            return this._sizeStrategy.range(domainVal, scale, this.domain(), this.uniqueValues());\n        }\n        return sizeVal;\n    }\n\n    /**\n     * This method is used to assign a domain to the axis.\n     *\n     * @param {Array} domain the domain of the scale\n     * @memberof SizeAxis\n     */\n    updateDomain (domain) {\n        if (domain) {\n            const domainFn = this._sizeStrategy.domain;\n\n            const domainInfo = domainFn(domain, this.config().stops);\n\n            this.domain(domainInfo.domain);\n            this.uniqueValues(domainInfo.uniqueVals);\n\n            this.scale().domain(domainInfo.scaleDomain || this.domain());\n        }\n        return this;\n    }\n\n    /**\n     * This method returns an object that can be used to\n     * reconstruct this instance.\n     *\n     * @return {Object} the serializable props of axis\n     * @memberof ShapeAxis\n     */\n    serialize () {\n        return {\n            type: this.constructor.type(),\n            scale: this.scale(),\n            domain: this.domain(),\n            range: this.range(),\n            config: this.config()\n        };\n    }\n\n    /**\n     * Returns the id of the axis.\n     * @return {string} Unique identifier of the axis.\n     */\n    id () {\n        return this._id;\n    }\n}\n","export const DEFAULT_CONFIG = {\n    generator: null,\n    value: 'circle',\n    range: ['circle', 'diamond', 'star', 'cross', 'square', 'wye', 'triangle']\n};\n","export const PROPS = {\n    config: {},\n    domain: {},\n    scale: {},\n    uniqueValues: {},\n    generator: {}\n};\n\n","/**\n * @module Axis\n * This file declares a class that is used to render an axis to add  meaning to\n * plots.\n */\nimport { getUniqueId, getSymbol, generateGetterSetters, mergeRecursive, InvalidAwareTypes } from 'muze-utils';\nimport { createScale } from '../scale-creator';\nimport { DEFAULT_CONFIG } from './defaults';\nimport { SHAPE } from '../enums/constants';\nimport { shapeGenerator } from './helper';\nimport { PROPS } from './props';\n\n/**\n* This class is used to instantiate a SimpleAxis.\n* @class SimpleAxis\n*/\nexport default class ShapeAxis {\n    /**\n    * Creates an instance of SimpleAxis.\n    * @param {Object} params input parameters.\n    * @param {Object | undefined} params.range Type of color scheme.\n    * @memberof ShapeAxis\n    */\n    constructor (config) {\n        generateGetterSetters(this, PROPS);\n\n        this._id = getUniqueId();\n        this._config = Object.assign({}, this.constructor.defaultConfig());\n        this._config = mergeRecursive(this._config, config);\n\n        this._scale = createScale({\n            type: 'ordinal',\n            range: this._config.range\n        });\n        this.updateDomain(config.domain);\n    }\n\n     /**\n     *\n     *\n     * @static\n     *\n     * @memberof ColorAxis\n     */\n    static defaultConfig () {\n        return DEFAULT_CONFIG;\n    }\n\n     /**\n     *\n     *\n     * @static\n     *\n     * @memberof ColorAxis\n     */\n    static type () {\n        return SHAPE;\n    }\n\n    /**\n     *\n     *\n     * @param {*} value\n     *\n     * @memberof ShapeAxis\n     */\n    getShape (value) {\n        if (!this.scale() || !this.domain() || !value || value instanceof InvalidAwareTypes) {\n            return this.config().value;\n        }\n\n        if (this._generatedShapes) {\n            return this._generatedShapes[value];\n        }\n\n        const shapeType = this.scale()(value);\n        if (shapeType === 'string') {\n            return getSymbol(shapeType);\n        }\n\n        return shapeType;\n    }\n\n    /**\n     * This method is used to assign a domain to the axis.\n     *\n     * @param {Array} domain the domain of the scale\n     * @memberof ShapeAxis\n     */\n    updateDomain (domain = []) {\n        if (domain.length) {\n            this.uniqueValues(domain);\n            this.domain(domain);\n            this.scale().domain(domain);\n\n            if (this.config().generator) {\n                this._generatedShapes = shapeGenerator(domain, this.config().generator);\n            }\n        }\n        return this;\n    }\n\n    /**\n     * This method returns an object that can be used to\n     * reconstruct this instance.\n     *\n     * @return {Object} the serializable props of axis\n     * @memberof ShapeAxis\n     */\n    serialize () {\n        return {\n            type: this.constructor.type(),\n            scale: this.scale(),\n            domain: this.domain(),\n            range: this.config().range,\n            config: this.config()\n        };\n    }\n\n    /**\n     * Returns the id of the axis.\n     * @return {string} Unique identifier of the axis.\n     */\n    id () {\n        return this._id;\n    }\n}\n","/**\n *\n *\n * @param {*} domain\n * @param {*} generatorFn\n *\n */\nexport const shapeGenerator = (domain, generatorFn) => {\n    const generatedShapes = {};\n    domain.forEach((value) => {\n        generatedShapes[value] = generatorFn(value);\n    });\n    return generatedShapes;\n};\n","import { mergeRecursive } from 'muze-utils';\n\nexport const PROPS = {\n    config: {\n        sanitization: (context, config) => mergeRecursive(context.config(), config),\n        preset: (context, config) => {\n            const { range, domain } = config;\n            range && context.range(range);\n            domain && context.domain(domain);\n        }\n    },\n    domain: {},\n    range: {}\n};\n","/**\n * @module Axis\n * This file declares a class that is used to render an axis to add  meaning to\n * plots.\n */\nimport { getUniqueId, Symbols, mergeRecursive, generateGetterSetters } from 'muze-utils';\nimport { createScale } from '../scale-creator';\nimport { DEFAULT_ANGLE_DOMAIN } from '../enums/constants';\nimport { PROPS } from './props';\nimport { resolveAxisConfig } from '../helper';\n\nconst { pie } = Symbols;\n\nconst createAngleValues = (context) => {\n    const angleData = context._angleFn(context._domain);\n    angleData.forEach((v) => {\n        v.startAngle -= Math.PI / 2;\n        v.endAngle -= Math.PI / 2;\n    });\n    context._angleValues = angleData.reduce((values, d) => {\n        const key = d.data;\n        !values[key] && (values[key] = []);\n        values[key].push(d);\n        return values;\n    }, {});\n};\n\n/**\n* This class is used to instantiate a AngleAxis.\n* @class AngleAxis\n*/\nexport default class AngleAxis {\n\n    /**\n     * Creates an instance of AngleAxis.\n     * @param {Object} config input parameters.\n     * @memberof AngleAxis\n     */\n    constructor (config = {}) {\n        this._id = getUniqueId();\n        generateGetterSetters(this, PROPS);\n        this._config = mergeRecursive({}, this.constructor.defaultConfig());\n        this.config(config);\n        this._range = [0, 360];\n        this._angleFn = pie()\n                .value(d => (typeof d === 'string' ? 1 : d))\n                .sortValues(null);\n        this._angleValues = {};\n    }\n\n    static defaultConfig () {\n        return {};\n    }\n\n    createScale (strategy) {\n        const {\n            range\n        } = this.config();\n        return createScale({\n            type: strategy.scale,\n            range\n        });\n    }\n\n    getScaleValue (domainVal) {\n        return this._angleValues[domainVal];\n    }\n\n    padAngle (angle) {\n        this._angleFn = this._angleFn.padAngle(angle);\n    }\n\n    domain (...domainVal) {\n        if (domainVal.length) {\n            const { domain: customDomain } = this.config();\n            const domain = domainVal[0].length ? domainVal[0] : DEFAULT_ANGLE_DOMAIN;\n            this._domain = resolveAxisConfig(customDomain, domain, this);\n            createAngleValues(this);\n            return this;\n        }\n        return this._domain;\n    }\n\n    range (...range) {\n        if (range.length) {\n            const { range: customRange } = this.config();\n            this._range = resolveAxisConfig(customRange, range[0], this);\n            const domain = this.domain();\n            const [startAngle, endAngle] = this._range;\n            this._angleFn\n                    .startAngle((startAngle / 180) * Math.PI)\n                    .endAngle(Math.PI * endAngle / 180);\n            if (domain && domain.length) {\n                createAngleValues(this);\n            }\n            return this;\n        }\n        return this._range;\n    }\n}\n","/**\n * This file exports constants that are used as enums in the\n *  crosstab group implementation.\n */\n/**\n * Width of the crosstab.\n */\nexport const X = 'x';\n/**\n * Width of the crosstab.\n */\nexport const Y = 'y';\n/**\n * Width of the crosstab.\n */\nexport const WIDTH = 'width';\n\n/**\n * Height of the crosstab.\n */\nexport const HEIGHT = 'height';\n\n/**\n * Field referring to object storing measurement configuration.\n */\nexport const MEASUREMENT = 'measurement';\n\n/**\n * Field referring to object storing configuration properties.\n */\nexport const CONFIG = 'config';\n\n/**\n * Width of visual unit in crosstab.\n */\nexport const MIN_UNIT_WIDTH = 'minUnitWidth';\n\n/**\n * Height of visual unit.\n */\nexport const MIN_UNIT_HEIGHT = 'minUnitHeight';\n\n/**\n * Field to store the array of dimensions to facet by.\n */\nexport const DIMENSIONS = 'dimensions';\n\n/**\n * Field to store array of measures to use as x axis.\n */\nexport const MEASURES = 'measures';\n\n/**\n * Field to store the array of dimensions to facet by.\n */\nexport const DIMENSION = 'dimension';\n\n/**\n * Field to store array of measures to use as x axis.\n */\nexport const MEASURE = 'measure';\n\n/**\n * Flag to specify if model should be pivoted.\n */\nexport const PIVOT = 'pivot';\n\n/**\n * Flag to specify format\n */\nexport const FORMAT = 'format';\n\n/**\n * Mount point where the variable will be hosted\n */\nexport const MOUNT = 'mount';\n\n/**\n * Data update flag\n */\nexport const HAS_DATA_UPDATED = 'hasDataUpdated';\n\n/**\n * Field referring to object storing set of rows\n */\nexport const ROWS = 'rows';\n\n/**\n * Field referring to object storing set of columns\n */\nexport const COLUMNS = 'columns';\n\n/**\n * Field referring to object storing data\n */\nexport const DATA = 'data';\n\n/**\n * Field referring to object storing set of columns\n */\nexport const COL = 'col';\n\n/**\n * Field referring to object storing set of rows\n */\nexport const ROW = 'row';\n\n/**\n * Field referring to object storing set of columns\n */\nexport const COLUMN = 'column';\n\n/**\n * Field referring to object storing color field\n */\nexport const COLOR = 'color';\n\n/**\n * Field referring to object storing shape field\n */\nexport const SHAPE = 'shape';\n\n/**\n * Field referring to object storing size field\n */\nexport const SIZE = 'size';\n\n/**\n * Field referring to object storing detail field\n */\nexport const DETAIL = 'detail';\n\n/**\n * Field referring to object storing set of layers\n */\nexport const LAYERS = 'layers';\n\n/**\n * Field referring to object storing the transforms\n */\nexport const TRANSFORM = 'transform';\n\n/**\n * Field referring to object storing the transforms\n */\nexport const ORDINAL = 'ordinal';\n\n/**\n * Field referring to object storing the transforms\n */\nexport const LINEAR = 'linear';\n/**\n * Field referring to object storing the transforms\n */\nexport const LEFT = 'left';\n/**\n * Field referring to object storing the transforms\n */\nexport const RIGHT = 'right';\n/**\n * Field referring to object storing the transforms\n */\nexport const TOP = 'top';\n/**\n * Field referring to object storing the transforms\n */\nexport const BOTTOM = 'bottom';\n\n/**\n * Field referring to object storing the transforms\n */\nexport const RETINAL = 'retinal';\n/**\n * Field referring to object storing the transforms\n */\nexport const CELL = 'cell';\n/**\n * Field referring to object storing the transforms\n */\nexport const X_AXES = 'xAxes';\n/**\n * Field referring to object storing the transforms\n */\nexport const Y_AXES = 'yAxes';\n/**\n * Field referring to object storing the transforms\n */\nexport const ENTRY_CELLS = 'entryCell';\n/**\n * Field referring to object storing the transforms\n */\nexport const INITIALIZED = 'initialized';\n/**\n * Field referring to object storing the transforms\n */\nexport const EXIT_CELLS = 'exitCell';\n/**\n * Field referring to object storing the transforms\n */\nexport const AXIS = 'axis';\n/**\n * Field referring to object storing the transforms\n */\nexport const UNIT = 'unit';\n/**\n * Field referring to object storing the transforms\n */\nexport const UPDATED = 'updated';\n/**\n * Field referring to object storing the transforms\n */\nexport const BEFORE_UPDATE = 'beforeupdate';\n/**\n * Field referring to object storing the transforms\n */\nexport const VALUE_MATRIX = 'valueMatrix';\n/**\n * Field referring to object storing the transforms\n */\nexport const FACET_HEADERS = 'facet-headers';\n/**\n * Field referring to object storing the transforms\n */\nexport const RADIUS = 'radius';\n/**\n * Field referring to object storing the transforms\n */\nexport const ANGLE = 'angle';\n\nexport const ANGLE0 = 'angle0';\n/**\n * Field referring to object storing the transforms\n */\nexport const ARC = 'arc';\n/**\n * Field referring to object storing the transforms\n */\nexport const CATEGORICAL = 'categorical';\n/**\n * Field referring to object storing the transforms\n */\nexport const TEMPORAL = 'temporal';\n/**\n * Field referring to object storing the transforms\n */\nexport const BAR = 'bar';\n/**\n * Field referring to object storing the transforms\n */\nexport const LINE = 'line';\n/**\n * Field referring to object storing the transforms\n */\nexport const POINT = 'point';\n/**\n * Field referring to object storing the transforms\n */\nexport const PRIMARY = 'Primary';\n/**\n * Field referring to object storing the transforms\n */\nexport const SECONDARY = 'Secondary';\n/**\n * Field referring to object storing the transforms\n */\nexport const BOTH = 'both';\n/**\n * Field referring to object storing the transforms\n */\nexport const INTERACTION = 'interaction';\n/**\n * Field referring to object storing the transforms\n */\nexport const GRID_LINES = 'gridLines';\n/**\n * Field referring to object storing the transforms\n */\nexport const GRID_BANDS = 'gridBands';\n/**\n * Field referring to object storing the transforms\n */\nexport const HEADER = 'header';\n/**\n * Field referring to object storing the transforms\n */\nexport const FACET = 'facet';\nexport const DEFAULT = 'default';\n/**\n * Ordering type\n */\nexport const ASCENDING = 'asc';\n/**\n * Ordering type\n */\nexport const DESCENDING = 'desc';\n\nexport const DARK = 'dark';\nexport const NONE = 'none';\nexport const NORMAL = 'normal';\nexport const DARKER = 'darker';\n","/**\n * @module Axis\n * This file declares a class that is used to render an axis to add  meaning to\n * plots.\n */\nimport { getUniqueId, mergeRecursive, generateGetterSetters, sanitizeDomainWhenEqual } from 'muze-utils';\nimport { createScale } from '../scale-creator';\nimport { LINEAR } from '../../../visual-group/src/enums/constants';\nimport { PROPS } from './props';\nimport { resolveAxisConfig } from '../helper';\n\nconst adjustDomain = (context) => {\n    const minOuterRadius = context.config().minOuterRadius;\n    const domain = context._domain;\n    if (context._range.length) {\n        const scale = context._scale;\n        const value = scale.invert(minOuterRadius) - scale.invert(0);\n        context._domain = [domain[0] - value, domain[1]];\n        scale.domain(context._domain);\n    }\n};\n\n/**\n* This class is used to instantiate a RadiusAxis.\n* @class RadiusAxis\n*/\nexport default class RadiusAxis {\n\n    /**\n     * Creates an instance of RadiusAxis.\n     * @param {Object} config input parameters.\n     * @memberof RadiusAxis\n     */\n    constructor (config = {}) {\n        this._id = getUniqueId();\n        generateGetterSetters(this, PROPS);\n        this._range = [];\n        this._radiusFactor = 1;\n        this._config = mergeRecursive({}, this.constructor.defaultConfig());\n        this.config(config);\n        this._scale = this.createScale({\n            scale: LINEAR\n        });\n    }\n\n    static defaultConfig () {\n        return {\n            padding: [0, 1],\n            minOuterRadius: 10\n        };\n    }\n\n    config (...params) {\n        if (params.length) {\n            const config = mergeRecursive(this.config(), params[0]);\n            this._config = config;\n            return this;\n        }\n        return this._config;\n    }\n\n    createScale (strategy) {\n        return createScale({\n            type: strategy.scale,\n            range: this.range()\n        });\n    }\n\n    domain (...domainVal) {\n        if (domainVal.length) {\n            const { domain: customDomain } = this.config();\n            let domain = resolveAxisConfig(customDomain, domainVal[0], this);\n            domain = sanitizeDomainWhenEqual(domain);\n            this._scale.domain(domain);\n            this._domain = domain;\n            adjustDomain(this);\n        }\n        return this._domain;\n    }\n\n    getInnerRadius (domainVal) {\n        if (domainVal === undefined) {\n            return this.range()[0];\n        }\n        return this._scale(domainVal);\n    }\n\n    getOuterRadius (domainVal) {\n        if (domainVal === undefined) {\n            return this.range()[1];\n        }\n        const radius = this._scale(domainVal) * this._radiusFactor;\n        return radius;\n    }\n\n    range (...range) {\n        if (range.length) {\n            const { padding, range: customRange } = this.config();\n            const sanitizedRange = range[0].map((v, i) => v + (i ? -padding[i] : padding[i]));\n            const rangeVal = resolveAxisConfig(customRange, sanitizedRange, this);\n            this._range = rangeVal;\n            this._scale.range(rangeVal);\n            adjustDomain(this);\n        }\n        return this._range;\n    }\n\n    setRadiusFactor (val) {\n        this._radiusFactor = val;\n        return this;\n    }\n}\n","import * as ScaleType from './enums/scale-type';\n\nconst DATA_TYPES = {\n    DIMENSION: 'dimension',\n    CATEGORICAL: 'categorical',\n    MEASURE: 'measure',\n    TEMPORAL: 'temporal'\n};\n\n/**\n * Map of DataModel types to associated field types.\n */\nexport const dataTypeScaleMap = {\n    [DATA_TYPES.DIMENSION]: ScaleType.BAND,\n    [DATA_TYPES.MEASURE]: ScaleType.LINEAR,\n    [DATA_TYPES.TEMPORAL]: ScaleType.TIME\n};\n\n","import { nestCollection, InvalidAwareTypes } from 'muze-utils';\n\n/**\n * Create multiple datasets from a single dataset by grouping the data using\n * a dimensional field.\n * @param {Array} schema Name and type of fields are stored in schema\n * @param {Array} data Data array\n * @param {Object} config Configuration object\n * @return {Array} Grouped data array\n */\nexport default (schema, data, config) => {\n    const groupBy = config.groupBy instanceof Array ? config.groupBy : [config.groupBy];\n    const groupByIndices = groupBy.map(fieldName => schema.findIndex(d => d.name === fieldName));\n\n    if (groupByIndices.find(d => d === -1) !== undefined) {\n        throw new Error(`Groupby field ${groupBy} not found in schema`);\n    }\n\n    const groupedData = nestCollection({\n        keys: groupByIndices,\n        data\n    });\n\n    groupedData.forEach((d) => {\n        const key = d.key;\n        if (InvalidAwareTypes.isInvalid(key)) {\n            d.key = InvalidAwareTypes.getInvalidType(key);\n        }\n    });\n    return groupedData;\n};\n","/**\n * @module Transform\n * This file exports a function that is used to implement\n * the identity transform\n */\n /* eslint no-unused-vars: 0 */\n /**\n  * This function accepts data and returns the data unchanged.\n  * @param {Object} schema The schema.\n  * @param {Array} data The data array.\n  * @param {Object} config The config object.\n  * @return {Array} The unchanged data.\n  */\n function identityTransform (schema, data, config) {\n     return data;\n }\n\n export default identityTransform;\n","/**\n * @module Transform\n * This file exports the transform factory.\n */\nimport * as TransformType from '../enums/transform-type';\nimport identity from '../identity-transform';\nimport group from '../group-transform';\nimport stack from '../stack-transform';\n\n/* istanbul ignore next */\nconst transformMap = {\n    [TransformType.IDENTITY]: identity,\n    [TransformType.GROUP]: group,\n    [TransformType.STACK]: stack\n};\n\n/**\n * This function is used to retirn a transform associated\n * with the given type.\n *\n * @param {string} type The type of the transform.\n * @return {Function} The transform function.\n */\nfunction transformFactory (type) {\n    const transform = transformMap[type];\n    if (typeof transform !== 'function') {\n        throw new Error('Invalid transform type supplied.');\n    }\n    return transform;\n}\n\nexport default transformFactory;\n","/**\n * @module Transform\n * This module exports constants that are used to reference transforms in\n * a consistent manner throughout the project.\n */\n/* eslint one-var: 0 */\n export const IDENTITY = 'identity';\n export const GROUP = 'group';\n export const STACK = 'stack';\n export const FRACTURE = 'fracture';\n","import { stack, InvalidAwareTypes } from 'muze-utils';\n\nimport group from '../group-transform';\n/*\n    Normalize the data to a form which can be given to d3 stack for stacking the data\n    ['Product', 'Sales', 'Region'],\n    0 ['A', 2000, 'North'],\n    1 ['A', 3000, 'South'],\n    2 ['B', 3000, 'South'],\n    3 ['B', 2000, 'North'],\n    4 ['C', 3000, 'South'],\n    5 ['C', 2000, 'North']\n            |\n            |\n    ['Product', 'North', 'South'],\n    ['A', 2000, 3000],\n    ['B', 2000, 3000],\n    ['C', 2000, 3000]\n*/\n// eslint-disable-next-line require-jsdoc\nconst normalizeData = (data, schema, valueField, uniqueField, groupBy) => {\n    const groupedData = group(schema, data, {\n        groupBy: uniqueField\n    });\n    const uniqueFieldIndex = schema.findIndex(d => d.name === uniqueField);\n    const valueFieldIndex = schema.findIndex(d => d.name === valueField);\n    const seriesKeyIndex = schema.findIndex(d => d.name === groupBy);\n    const seriesKeys = data.map(d => d[seriesKeyIndex]).filter((item, pos, arr) => arr.indexOf(item) === pos).sort();\n\n    const fieldNames = schema.reduce((acc, obj, i) => {\n        acc[i] = obj.name;\n        return acc;\n    }, {});\n    const dataArr = groupedData.map((arr) => {\n        const tuples = {};\n        const rowObj = arr.values.reduce((acc, row) => {\n            acc = row.reduce((obj, value, i) => {\n                if (i === seriesKeyIndex) {\n                    if (row[valueFieldIndex] instanceof InvalidAwareTypes) {\n                        row[valueFieldIndex] = null;\n                    }\n                    obj[value] = row[valueFieldIndex];\n                    tuples[value] = row;\n                } else if (i !== valueFieldIndex) {\n                    obj[fieldNames[i]] = value;\n                }\n                return obj;\n            }, acc);\n            return acc;\n        }, {});\n        rowObj._tuple = tuples;\n            // Set missing values field to zero value\n        seriesKeys.forEach((seriesKey) => {\n            if (rowObj[seriesKey] === undefined) {\n                rowObj[seriesKey] = 0;\n                const newArr = new Array(arr.values[0].length);\n                newArr[uniqueFieldIndex] = arr.key;\n                newArr[seriesKeyIndex] = seriesKey;\n                rowObj._tuple[seriesKey] = newArr;\n            }\n        });\n        return rowObj;\n    });\n\n    return {\n        data: dataArr,\n        keys: seriesKeys\n    };\n};\n\n/**\n * Generate a stacked representation of data\n * @param {Array} schema schema Array\n * @param {Array} data data array\n * @param {Object} config Configuration object\n * @return {Array} stacked data\n */\nexport default (schema, data, config) => {\n    const { uniqueField, value: valueField, groupBy } = config;\n    const sort = config.sort || 'descending';\n    const normalizedData = normalizeData(data, schema, valueField, uniqueField, groupBy);\n    const keys = normalizedData.keys;\n    const map = {};\n    const orderBy = config.orderBy;\n    const orderIndex = schema.findIndex(d => d.name === orderBy);\n    const groupByIndex = schema.findIndex(d => d.name === groupBy);\n\n    if (orderIndex !== -1) {\n        keys.forEach((key) => {\n            const name = data.find(d => d[groupByIndex] === key);\n            map[key] = name[orderIndex];\n        });\n        normalizedData.keys.sort((a, b) => map[a].localeCompare(map[b]));\n    }\n\n    const stackData = stack({\n        keys: normalizedData.keys,\n        offset: config.offset || 'diverging',\n        order: sort,\n        data: normalizedData.data\n    });\n\n    stackData.forEach((seriesData) => {\n        seriesData.forEach((dataObj) => {\n            dataObj.data = dataObj.data._tuple[seriesData.key];\n        });\n    });\n\n    return stackData;\n};\n\n","import {\n    FieldType,\n    getDomainFromData,\n    setStyles,\n    easeFns,\n    selectElement,\n    DimensionSubtype,\n    retrieveNearestGroupByReducers,\n    getObjProp,\n    COORD_TYPES,\n    CommonProps,\n    defaultValue,\n    isSimpleObject,\n    InvalidAwareTypes\n} from 'muze-utils';\nimport { ScaleType } from '@chartshq/muze-axis';\nimport { transformFactory } from '@chartshq/transform';\nimport { IDENTITY, STACK, GROUP, COLOR, SHAPE, SIZE, ENCODING, AGG_FN_SUM, ASCENDING, TEXT } from '../enums/constants';\n\nconst BAND = ScaleType.BAND;\nconst { POLAR, CARTESIAN } = COORD_TYPES;\n\nexport const transformColor = (colorAxis, datum, styleType, intensity, interactionType) => {\n    const meta = datum.meta;\n    const stateColor = defaultValue(meta.currentState[interactionType][styleType], meta.originalState[styleType]);\n    const colorInfo = colorAxis.transformColor(stateColor, intensity);\n\n    // meta.stateColor[styleType] = colorInfo.hsla;\n    meta.currentState[interactionType][styleType] = colorInfo.hsla;\n    return colorInfo;\n};\n\nexport const applyInteractionStyle = (context, selectionSet, interactionStyles, config) => {\n    const elements = context.getPlotElementsFromSet(selectionSet);\n    const { apply, interactionType, reset } = config;\n    const mountPoint = selectElement(context.mount()).select('.muze-overlay-paths').node();\n\n    elements.forEach((elem) => {\n        const options = { mountPoint, apply, reset };\n        context.applyLayerStyle(elem, interactionType, interactionStyles, options);\n\n        // const interactionStylesEntries = Object.entries(interactionStyles.style);\n\n        // for (const [type, value] of interactionStylesEntries) {\n        //     const style = { type, value };\n        //     const options = { mountPoint, apply, reset };\n        //     context.applyLayerStyle(elem, interactionType, style, options);\n        // }\n    });\n};\n\nexport const retrieveEncodingInf = (encoding, fieldsConfig, encodingNames) => {\n    const encodingInf = {};\n\n    encodingNames\n        .forEach((e) => {\n            const field = getObjProp(encoding, e, 'field');\n            encodingInf[`${e}Field`] = field;\n            encodingInf[`${e}FieldIndex`] = getObjProp(fieldsConfig, field, 'index');\n            encodingInf[`${e}FieldType`] = getObjProp(fieldsConfig, field, 'def', 'type');\n            encodingInf[`${e}FieldSubType`] = getObjProp(fieldsConfig, field, 'def', 'subtype');\n        });\n    return encodingInf;\n};\n\nexport const encodingFieldInfRetriever = {\n    [POLAR]: (encoding, fieldsConfig) => {\n        const fields = [ENCODING.RADIUS, ENCODING.RADIUS0, ENCODING.ANGLE, ENCODING.ANGLE0, COLOR, SHAPE, SIZE, TEXT];\n        return retrieveEncodingInf(encoding, fieldsConfig, fields);\n    },\n    [CARTESIAN]: (encoding, fieldsConfig) => {\n        const fields = [ENCODING.X, ENCODING.Y, ENCODING.X0, ENCODING.Y0, COLOR, SHAPE, SIZE, TEXT];\n        return retrieveEncodingInf(encoding, fieldsConfig, fields);\n    }\n};\n\nexport const setNullsInStack = (transformedData, schema, value, setNulls) => {\n    const uniqueFieldIndex = schema.findIndex(d => d.name === value);\n    transformedData.forEach((seriesData) => {\n        seriesData.forEach((dataObj) => {\n            if (dataObj.data[uniqueFieldIndex] === null && !setNulls) {\n                dataObj[0] = new InvalidAwareTypes();\n                dataObj[1] = new InvalidAwareTypes();\n            }\n        });\n    });\n    return transformedData;\n};\n\n/**\n *\n *\n * @param {*} dataModel\n * @param {*} config\n * @param {*} transformType\n *\n */\nexport const transformData = (dataModel, config, transformType, encodingFieldInf) => {\n    const data = dataModel.getData({ withUid: true });\n    const schema = data.schema;\n    const { transform, connectNullData: setNullData } = config;\n    const {\n        xField,\n        yField,\n        xFieldType,\n        yFieldType\n    } = encodingFieldInf;\n    const uniqueField = xFieldType === FieldType.MEASURE ? yField : xField;\n    const value = yFieldType === FieldType.MEASURE ? yField : xField;\n    let transformedData = transformFactory(transformType)(schema, data.data, {\n        groupBy: transform.groupBy,\n        uniqueField,\n        sort: transform.sort || 'none',\n        offset: transform.offset,\n        orderBy: transform.orderBy,\n        value\n    }, data.uids);\n\n    if (transformType === STACK) {\n        transformedData = setNullsInStack(transformedData, schema, value, setNullData);\n    }\n    return transformedData;\n};\n\nexport const getIndividualClassName = (d, i, data, context) => {\n    const className = context.config().individualClassName;\n    let classNameStr = '';\n    if (className instanceof Function) {\n        classNameStr = className(d, i, data, context);\n    }\n    return classNameStr;\n};\n\nexport const dataNormalizers = {\n    [POLAR]: (transformedData, encodingFieldInf, fieldsConfig) => {\n        const {\n            radiusFieldIndex,\n            angleFieldIndex,\n            radius0FieldIndex,\n            angle0FieldIndex\n        } = encodingFieldInf;\n        const fieldsLen = Object.keys(fieldsConfig).length;\n\n        /**\n         * Returns normalized data from transformed data. It recursively traverses through\n         * the transformed data if there it is nested.\n         */\n        return transformedData.map(data => data.map((d) => {\n            const pointObj = {\n                radius: d[radiusFieldIndex],\n                angle: angleFieldIndex !== undefined ? d[angleFieldIndex] : 1,\n                radius0: d[radius0FieldIndex],\n                angle0: d[angle0FieldIndex]\n            };\n            [COLOR, SHAPE, SIZE, TEXT].forEach((enc) => {\n                pointObj[enc] = d[encodingFieldInf[`${enc}FieldIndex`]];\n            });\n            pointObj.source = d;\n            pointObj.rowId = d[fieldsLen];\n            return pointObj;\n        })).filter(d => d.length);\n    },\n    [CARTESIAN]: (transformedData, encodingFieldInf, fieldsConfig, transformType) => {\n        const {\n            xFieldType,\n            xFieldIndex,\n            yFieldIndex,\n            x0FieldIndex,\n            y0FieldIndex\n        } = encodingFieldInf;\n        const fieldsArr = Object.keys(fieldsConfig);\n        const fieldsLen = fieldsArr.length;\n\n        /**\n         * Returns normalized data from transformed data. It recursively traverses through\n         * the transformed data if there it is nested.\n         */\n        return transformedData.map((data) => {\n            const values = transformType === GROUP ? data.values : data;\n            return values.map((d) => {\n                let pointObj = {};\n                let tuple;\n                if (transformType === STACK) {\n                    tuple = d.data || [];\n                    let y;\n                    let y0;\n                    let x;\n                    let x0;\n                    if (d[1] >= d[0]) {\n                        y = x0 = d[1];\n                        x = y0 = d[0];\n                    } else {\n                        y = x0 = d[0];\n                        x = y0 = d[1];\n                    }\n\n                    pointObj = xFieldType === FieldType.MEASURE ? {\n                        x,\n                        x0,\n                        y: tuple[yFieldIndex],\n                        y0: tuple[yFieldIndex]\n                    } : {\n                        x: tuple[xFieldIndex],\n                        x0: tuple[xFieldIndex],\n                        y,\n                        y0\n                    };\n                    pointObj.source = tuple;\n                    pointObj.rowId = tuple[fieldsLen];\n                    [COLOR, SHAPE, SIZE, TEXT].forEach((enc) => {\n                        pointObj[enc] = tuple[encodingFieldInf[`${enc}FieldIndex`]];\n                    });\n                } else {\n                    pointObj = {\n                        x: d[xFieldIndex],\n                        y: d[yFieldIndex],\n                        x0: d[x0FieldIndex],\n                        y0: d[y0FieldIndex]\n                    };\n                    pointObj.source = d;\n                    pointObj.rowId = d[fieldsLen];\n                    [COLOR, SHAPE, SIZE, TEXT].forEach((enc) => {\n                        pointObj[enc] = d[encodingFieldInf[`${enc}FieldIndex`]];\n                    });\n                }\n                const source = pointObj.source;\n                pointObj.dataObj = fieldsArr.reduce((acc, name) => {\n                    acc[name] = source[fieldsConfig[name].index];\n                    return acc;\n                }, {});\n                return pointObj;\n            });\n        }).filter(d => d.length);\n    }\n};\n/*\n * This method resolves the x, y, x0 and y0 values from the transformed data.\n * It also checks the type of transformed data for example, if it is a stacked data\n * then it fetches the y and y0 values from the stacked data.\n * @param {Array.<Array>} transformedData transformed data\n * @param {Object} fieldsConfig field definitions\n * @param {string} transformType type of transformed data - stack, group or identity.\n * @return {Array.<Object>} Normalized data\n*/\nexport const getNormalizedData = (transformedData, context) => {\n    const transformType = context.transformType();\n    const transformedDataArr = transformType === IDENTITY ? [transformedData] : transformedData;\n    const encodingFieldInf = context.encodingFieldsInf();\n    const fieldsConfig = context.data().getFieldsConfig();\n    return dataNormalizers[context.coord()](transformedDataArr, encodingFieldInf, fieldsConfig, transformType);\n};\n\nexport const domainCalculator = {\n    [POLAR]: (data, layerInst) => {\n        const config = layerInst.config();\n        const { sort } = config;\n        let angleValues = data[0];\n        const radius0Field = getObjProp(config.encoding.radius0, 'field');\n        if (sort) {\n            angleValues = angleValues.sort((a, b) => (sort === ASCENDING ? a.radius - b.radius : b.radius - a.radius));\n        }\n        const radiusDomain = getDomainFromData(data, [ENCODING.RADIUS, radius0Field ?\n            ENCODING.RADIUS0 : ENCODING.RADIUS]);\n        return {\n            radius: radiusDomain,\n            angle: angleValues.map(d => d.angle),\n            angle0: angleValues.map(d => d.angle0)\n        };\n    },\n    [CARTESIAN]: (data, layerInst) => {\n        const transformType = layerInst.transformType();\n        const encodingFieldInf = layerInst.encodingFieldsInf();\n        const {\n            xFieldSubType,\n            yFieldSubType,\n            xField,\n            yField,\n            x0Field,\n            y0Field\n        } = encodingFieldInf;\n        const domains = {};\n        const yEnc = ENCODING.Y;\n        const xEnc = ENCODING.X;\n        if (xField) {\n            domains.x = getDomainFromData(data, x0Field || transformType === STACK ? [xEnc, ENCODING.X0] : [xEnc, xEnc],\n                xFieldSubType);\n        }\n        if (yField) {\n            domains.y = getDomainFromData(data, y0Field || transformType === STACK ? [ENCODING.Y0, ENCODING.Y] :\n                [yEnc, yEnc], yFieldSubType);\n        }\n\n        return domains;\n    }\n};\n\nconst defFn = (d) => {\n    const { x, y } = d.update;\n    return {\n        x,\n        y\n    };\n};\n\nexport const attachDataToVoronoi = (voronoi, points, accessor = defFn) => {\n    voronoi.data([].concat(...points).filter(d => d.rowId !== undefined).map((d) => {\n        const { x, y } = accessor(d);\n        return {\n            x,\n            y,\n            data: d\n        };\n    }));\n};\n\n/**\n *\n *\n * @param {*} target\n * @param {*} styles\n * @param {*} remove\n */\nexport const updateStyle = (target, styles, remove) => {\n    for (const key in styles) {\n        if ({}.hasOwnProperty.call(styles, key)) {\n            target.style(key, remove ? null : styles[key]);\n        }\n    }\n};\n\n/**\n *\n *\n * @param {*} mount\n * @param {*} context\n */\nexport const animateGroup = (mount, context) => {\n    let groupTransition;\n    let update;\n    const { transition, groupAnimateStyle } = context;\n    const { duration, effect, disabled } = transition;\n    if (groupAnimateStyle) {\n        setStyles(mount.node(), groupAnimateStyle.enter);\n        update = groupAnimateStyle.update;\n        if (!disabled) {\n            groupTransition = mount.transition()\n                .ease(easeFns[effect])\n                .duration(duration)\n                .on('end', function () {\n                    updateStyle(selectElement(this), update, true);\n                });\n        } else {\n            groupTransition = mount;\n        }\n        updateStyle(groupTransition, update);\n    }\n};\n\nexport const positionPoints = (context, points) => {\n    const positioner = context.encodingTransform();\n    if (positioner) {\n        return positioner(points, context, { smartLabel: context._dependencies.smartLabel });\n    }\n    return points;\n};\n\n/**\n  * Gets the width of each group. It gets the width from axis if it is available for\n  * example when the scale is nominal else it calculates the width from the\n  * range of the axis and number of data points.\n  *\n  * @param {SimpleAxis} axis instance of axis\n  * @param {number} minDiff Minimum difference between data points\n  * @return {number} width of each bar\n  * @private\n*/\nexport const getGroupSpan = (axis, minDiff) => {\n    let groupSpan;\n    const width = axis.getUnitWidth();\n    const scale = axis.scale();\n    const range = scale.range();\n    const domain = scale.domain();\n    !width ? groupSpan = (Math.abs(range[1] - range[0]) / Math.abs(domain[1] - domain[0])) * minDiff :\n        (groupSpan = width);\n\n    return groupSpan;\n};\n\nexport const getPlotMeasurement = (context, dimensionalValues) => {\n    const fieldInfo = context.encodingFieldsInf();\n    const axes = context.axes();\n    const transformType = context.transformType();\n    const config = context.config();\n    const bandScale = context._bandScale;\n\n    return ['x', 'y'].map((type) => {\n        let span = 0;\n        let groupSpan = 0;\n        let padding = 0;\n        let offsetValues = [];\n        if (fieldInfo[`${type}FieldType`] === FieldType.DIMENSION) {\n            let actualGroupWidth;\n            const isTemporal = fieldInfo[`${type}FieldSubType`] === DimensionSubtype.TEMPORAL;\n            const timeDiff = isTemporal ? context.dataProps().timeDiffs[type] : 0;\n            const axis = axes[type];\n            const pad = config[`pad${type.toUpperCase()}`];\n            const innerPadding = config.innerPadding;\n            const keys = dimensionalValues;\n            const scale = axis.scale();\n            groupSpan = getGroupSpan(axis, timeDiff);\n            const isAxisBandScale = axis.constructor.type() === BAND;\n            const axisPadding = axis.config().padding;\n            // If it is a grouped bar then the width of each bar in a grouping is retrieved from\n            // a band scale. The band scale will have range equal to width of one group of bars and\n            // the domain is set to series keys.\n            if (transformType === 'group') {\n                const groupPadding = isAxisBandScale ? 0 : axisPadding * groupSpan / 2;\n                bandScale.range([groupPadding, groupSpan - groupPadding]).domain(keys).paddingInner(innerPadding);\n                span = bandScale.bandwidth();\n                actualGroupWidth = groupSpan - (isAxisBandScale ? 0 : axisPadding * groupSpan);\n                offsetValues = keys.map(key => bandScale(key) - (isAxisBandScale ? 0 : (groupSpan / 2)));\n            } else if (pad !== undefined) {\n                let offset;\n                if (isAxisBandScale) {\n                    const step = scale.step();\n                    offset = scale.padding() * step;\n                    span = scale.bandwidth() + offset;\n                } else {\n                    span = groupSpan;\n                }\n                offsetValues = keys.map(() => (isAxisBandScale ? -(offset / 2) : -(span / 2)));\n            } else {\n                padding = isAxisBandScale ? 0 : axisPadding * groupSpan;\n                span = groupSpan - padding;\n                actualGroupWidth = span;\n                offsetValues = keys.map(() => (isAxisBandScale ? 0 : -(span / 2)));\n            }\n\n            groupSpan = actualGroupWidth;\n            padding = isAxisBandScale ? axisPadding * axis.scale().step() : axisPadding * groupSpan;\n        }\n\n        return {\n            span,\n            offsetValues,\n            groupSpan,\n            padding\n        };\n    });\n};\n\nexport const renderLayer = (context) => {\n    const mount = context.mount();\n    if (mount) {\n        context.render(mount);\n        context.dependencies().throwback.commit(CommonProps.ON_LAYER_DRAW, true, context.metaInf().parentNamespace);\n    }\n};\n\nconst transformResolverPredicates = (encodingFieldInf, context, groupByField) => {\n    const fieldsConfig = context.data().getFieldsConfig();\n    const { xField, yField, xFieldType, yFieldType } = encodingFieldInf;\n    const dimensionField = ['xField', 'yField'].find(type =>\n        encodingFieldInf[`${type}Type`] === FieldType.DIMENSION);\n\n    return [\n        !xField,\n        !yField,\n        !groupByField,\n        getObjProp(fieldsConfig[groupByField], 'def', 'type') === FieldType.MEASURE,\n        xFieldType === FieldType.DIMENSION && yFieldType === FieldType.DIMENSION,\n        dimensionField && encodingFieldInf[dimensionField] === groupByField\n    ];\n};\n\nexport const resolveInvalidTransformType = (context) => {\n    const encodingFieldInf = context.encodingFieldsInf();\n    const groupByField = context.config().transform.groupBy;\n\n    if (transformResolverPredicates(encodingFieldInf, context, groupByField).some(value => value)) {\n        return IDENTITY;\n    }\n    return null;\n};\n\nexport const getValidTransform = context => resolveInvalidTransformType(context) || context.config().transform.type;\n\nexport const getValidTransformForAggFn = (context) => {\n    const resolvedInvalidTransformType = resolveInvalidTransformType(context);\n    if (resolvedInvalidTransformType) {\n        return resolvedInvalidTransformType;\n    }\n\n    const {\n        xField,\n        yField,\n        xFieldType,\n        yFieldType\n    } = context.encodingFieldsInf();\n    const groupByField = context.config().transform.groupBy;\n    const isCustomTransformTypeProvided = !!getObjProp(context._customConfig, 'transform', 'type');\n    let transformType = context.config().transform.type;\n\n    if (!isCustomTransformTypeProvided && groupByField && xFieldType !== yFieldType) {\n        const measureField = xFieldType === FieldType.MEASURE ? xField : yField;\n        const { [measureField]: aggFn } = retrieveNearestGroupByReducers(context.data(), measureField);\n        transformType = aggFn === AGG_FN_SUM ? STACK : GROUP;\n    }\n\n    return transformType;\n};\n\nexport const getMarkId = (source, schema) => source.filter((val, i) => schema[i] &&\n    schema[i].type === FieldType.DIMENSION).join();\n\nexport const resolveEncodingValues = (data, i, dataArr, layerInst) => {\n    const transformedValues = {};\n    const values = data.values;\n    const encoding = layerInst.config().encoding;\n    for (const key in values) {\n        const value = getObjProp(encoding[key], 'value');\n        if (value instanceof Function) {\n            transformedValues[key] = value(values, i, dataArr, layerInst);\n        } else {\n            transformedValues[key] = values[key];\n        }\n    }\n    return transformedValues;\n};\n\nexport const getColorMetaInf = (initialStyle, conf = {}) => ({\n    originalStyle: Object.assign({}, {\n        styles: initialStyle\n    }, conf),\n    currentState: new Map()\n});\n\nconst getCoordValue = (radius, trig, angle, offset) => radius * Math[trig](angle) + offset;\n\nconst coordValueGetter = (radius, angle, xOffset, yOffset) => ({\n    x: getCoordValue(radius, 'cos', angle, xOffset),\n    y: getCoordValue(radius, 'sin', angle, yOffset)\n});\n\nexport const toCartesianCoordinates = (points, measurement, rangePlot = false) => {\n    const xOffset = measurement.width / 2;\n    const yOffset = measurement.height / 2;\n    for (let i = 0, len = points.length; i < len; i++) {\n        const point = points[i];\n        const { angle, radius, radius0, angle0 } = point.update;\n        point.update = coordValueGetter(radius, angle, xOffset, yOffset);\n        if (rangePlot) {\n            const update = point.update = coordValueGetter(radius0, angle0, xOffset, yOffset);\n            const { x: x0, y: y0 } = coordValueGetter(radius, angle, xOffset, yOffset);\n            update.x0 = x0;\n            update.y0 = y0;\n        }\n    }\n    return points;\n};\n\nexport const sortData = (data, axes) => {\n    const { x: xAxis, y: yAxis } = axes;\n    const axisArr = [xAxis, yAxis];\n    for (let i = 0, len = axisArr.length; i < len; i++) {\n        const axis = axisArr[i];\n        if (axis.constructor.type() === BAND) {\n            const key = i ? 'y' : 'x';\n            const dom = axis.domain();\n            const indices = dom.reduce((acc, v, idx) => {\n                acc[v] = idx;\n                return acc;\n            }, {});\n            data.sort((a, b) => indices[a[key]] - indices[b[key]]);\n            break;\n        }\n    }\n    return data;\n};\n\nexport const getBoundBoxes = points => points.map((point) => {\n    const { x, y } = point.update;\n    const data = point.data;\n    return {\n        minX: x,\n        maxX: x,\n        minY: y,\n        maxY: y,\n        data\n    };\n});\n\nexport const getDataFromEvent = (context, event, data) => {\n    const dataPoint = data || selectElement(event.target).data()[0];\n    if (isSimpleObject(dataPoint) && getObjProp(dataPoint, 'meta', 'layerId') === context.id()) {\n        const values = dataPoint && dataPoint.source;\n        let identifiers = null;\n        if (values) {\n            identifiers = context.getIdentifiersFromData(values, dataPoint.rowId);\n        }\n        return {\n            dimensions: [dataPoint],\n            id: identifiers,\n            layerId: context.id()\n        };\n    }\n    return null;\n};\n","import * as PROPS from '../enums/props';\n\nexport const localOptions = {\n    [PROPS.DATA]: {\n        value: null\n    }\n};\n","import { STATE_NAMESPACES } from 'muze-utils';\nimport * as PROPS from '../enums/props';\n\nexport const listenerMap = [\n    {\n        props: [`${STATE_NAMESPACES.LAYER_LOCAL_NAMESPACE}.${PROPS.DATA}`],\n        type: 'registerImmediateListener',\n        listener: (context, [prevData, data]) => {\n            context.dataDidSet([prevData, data]);\n        },\n        namespace: context => context.metaInf().namespace\n    }\n];\n","import { partition } from 'muze-utils';\n\nconst getLastItemInMap = map => Array.from(map)[map.size - 1];\n\nconst getPreviousStyle = (meta, interactionType) => {\n    const { originalStyle, currentState } = meta;\n    let stylesForCurrentLevel = Object.assign({}, originalStyle);\n\n    if (currentState.size > 0) {\n        interactionType = getLastItemInMap(currentState)[0];\n        stylesForCurrentLevel = currentState.get(interactionType) || {};\n        // const elemFill = elem.style('fill');\n        // const newStyle = Object.assign({}, stylesForCurrentLevel, { fill: elemFill });\n    }\n    return stylesForCurrentLevel;\n};\n\nconst strokeProps = {\n    'stroke-width': 1,\n    stroke: 1,\n    'stroke-opacity': 1\n};\n\nconst parseStyle = (value, { datum, datumStyle }, apply) => {\n    if (typeof value === 'function') {\n        if (isNaN(datumStyle)) {\n            // const colorType = detectColor(datumStyle);\n            const rgbaValues = datumStyle.replace(/[^\\d,.]/g, '').split(',').map(s => Number(s));\n            value = value(rgbaValues, datum, apply);\n        } else {\n            const numValue = parseFloat(datumStyle, 10);\n            value = value(numValue, datum, apply);\n        }\n        return value;\n    }\n    return value;\n};\n\nexport const applyStylesOnInteraction = (context, elem, interactionType, conf, options) => {\n    const { mountPoint, apply, reset } = options;\n\n    const d = elem.data()[0];\n    let datum;\n\n    if (Array.isArray(d)) {\n        datum = d[0];\n    } else {\n        datum = Array.isArray(d.data) ? d.data[0] : d;\n    }\n    const { currentState, originalStyle } = datum.meta;\n\n    let applicableStyles = {};\n\n    const { style: styles, strokePosition } = conf;\n    let applicableStrokePos = strokePosition;\n\n    if (reset) {\n        currentState.clear();\n    }\n\n    let applyStyle = true;\n\n    if (apply) {\n        const sanitizedStyles = {\n            styles: {},\n            strokePosition\n        };\n        for (const type in styles) {\n            const parsedStyleVal = parseStyle(styles[type], {\n                datum,\n                datumStyle: elem.style(type)\n            }, apply);\n\n            sanitizedStyles.styles[type] = parsedStyleVal;\n        }\n        currentState.set(interactionType, sanitizedStyles);\n        applicableStyles = sanitizedStyles.styles;\n    } else if (!currentState.has(interactionType) && !reset) {\n        applyStyle = false;\n    } else {\n        currentState.delete(interactionType);\n        const currentStyle = getPreviousStyle(datum.meta, interactionType);\n        applicableStyles = Object.assign({}, originalStyle.styles, currentStyle.styles);\n        applicableStrokePos = currentStyle.strokePosition || originalStyle.strokePosition;\n    }\n\n    const styleKeys = Object.keys(applicableStyles);\n    const [strokeStyles, otherStyles] = partition(styleKeys, v => v in strokeProps);\n\n    applyStyle && context.applyStyles({\n        strokeStyles,\n        otherStyles,\n        styleObj: applicableStyles,\n        elem,\n        datum,\n        applicableStrokePos,\n        mountPoint\n    });\n};\n","import {\n    getUniqueId,\n    mergeRecursive,\n    FieldType,\n    selectElement,\n    ReservedFields,\n    DataModel,\n    clone,\n    generateGetterSetters,\n    STATE_NAMESPACES,\n    transactor,\n    defaultValue,\n    getObjProp,\n    InvalidAwareTypes\n} from 'muze-utils';\nimport * as PROPS from '../enums/props';\nimport { props } from './props';\nimport {\n    transformData,\n    getNormalizedData,\n    applyInteractionStyle,\n    getValidTransform,\n    domainCalculator,\n    renderLayer,\n    encodingFieldInfRetriever\n} from '../helpers';\nimport { localOptions } from './local-options';\nimport { listenerMap } from './listener-map';\nimport { BASE_LAYER, AREA_LAYER } from '../enums/constants';\nimport { applyStylesOnInteraction } from './helper';\n\nconst layerNs = [STATE_NAMESPACES.LAYER_GLOBAL_NAMESPACE, STATE_NAMESPACES.LAYER_LOCAL_NAMESPACE];\nconst groupNs = STATE_NAMESPACES.GROUP_GLOBAL_NAMESPACE;\n\nexport const BaseLayerMixin = superclass => class extends superclass {\n    /**\n     * Creates a layer using a configuration and data.\n     *\n     * @public\n     * @constructor\n     * @param {DataModel} data Instance of DataModel to be used. This DataModel instance serves as the data for a\n     * layer.\n     * @param {Object} axes Axes instances to be used for rendering the layer. Axes are used for mapping data from\n     *      value to px.\n     * @param {SimpleAxis} axes.x X axis of the layer. Based on the type of variable it gets instance of BandAxis,\n     *      TimeAxis, ContinuousAxis\n     * @param {SimpleAxis} axes.y X axis of the layer. Based on the type of variable it gets instance of BandAxis,\n     *      TimeAxis, ContinuousAxis\n     * @param {ColorAxis} axes.color Axis for coloring a layer using color interpolators\n     * @param {ShapeAxis} axes.shape Axis for providing a shape\n     * @param {SizeAxis} axes.size Axis for determining size of a mark using size interpolator\n     * @param {LayerConfig} config Configuration of the layer\n     * @param {Object} dependencies Dependencies of the layer\n     * @param {SmartLabel} dependencies.smartLabel Smartlabel singleton instance\n     */\n    constructor () {\n        super();\n\n        generateGetterSetters(this, this.constructor.getterSetters());\n        this.axes({});\n        this.alias(this.constructor.formalName() + getUniqueId());\n        this._points = [];\n        this._cachedData = [];\n        this._id = getUniqueId();\n        this._measurement = {};\n        this._animationDonePromises = [];\n        this._graphicElems = {};\n        this._customConfig = null;\n    }\n\n    static getState () {\n        return [\n            {\n                domain: null\n            },\n            Object.keys(this.localOptions()).reduce((acc, v) => {\n                acc[v] = localOptions[v].value;\n                return acc;\n            }, {})\n        ];\n    }\n\n    static getListeners () {\n        return {\n            store: [...listenerMap, {\n                type: 'registerChangeListener',\n                props: this.getRenderProps(),\n                listener: (context) => {\n                    renderLayer(context);\n                },\n                subNamespace: (context) => {\n                    const { unitRowIndex, unitColIndex, namespace } = context.metaInf();\n                    return {\n                        [`${layerNs[1]}.${PROPS.DATA}`]: namespace,\n                        [`${groupNs}.domain.x`]: `${unitColIndex}0`,\n                        [`${groupNs}.domain.y`]: `${unitRowIndex}0`,\n                        [`${groupNs}.domain.radius`]: `${unitRowIndex}-${unitColIndex}`\n                    };\n                }\n            }],\n            throwback: []\n        };\n    }\n\n    static getQualifiedStateProps () {\n        const layerState = this.getState();\n        return layerState.map((state, i) => Object.keys(state).map(prop => `${layerNs[i]}.${prop}`));\n    }\n\n    store (...params) {\n        if (params.length) {\n            const store = this._store = params[0];\n            const { namespace } = this.metaInf();\n            store.addSubNamespace(namespace, BASE_LAYER, this);\n\n            transactor(this, this.constructor.localOptions(), store, {\n                subNamespace: namespace,\n                namespace: `${STATE_NAMESPACES.LAYER_LOCAL_NAMESPACE}`\n            });\n            return this;\n        }\n        return this._store;\n    }\n\n    domain (...dom) {\n        const prop = `${STATE_NAMESPACES.LAYER_GLOBAL_NAMESPACE}.${PROPS.DOMAIN}`;\n        const store = this.store();\n        if (dom.length) {\n            const { parentNamespace, namespace } = this.metaInf();\n            const domain = defaultValue(store.get(prop, parentNamespace), {});\n            domain[namespace] = dom[0];\n            this.store().commit(prop, domain, parentNamespace);\n            return this;\n        }\n        return this.store().get(prop, this.metaInf().namespace);\n    }\n\n    /**\n     * Creates a layer instance\n     * @return {BaseLayer} Instance of a layer\n     */\n    static create (...params) {\n        return new this(...params);\n    }\n\n    /**\n     * Default configuration of the layer. This configuration gets merged to the user passed configuration using a\n     * plolicy. Base layer only returns part of configuraion, any layer overridding base layer should return its own\n     * configuration.\n     *\n     * @public\n     * @static\n     *\n     * @return {Object} Default configuration\n     */\n    static defaultConfig () {\n        return {\n            transform: {\n                type: 'identity'\n            }\n        };\n    }\n\n    static getterSetters () {\n        return props;\n    }\n\n    static localOptions () {\n        return localOptions;\n    }\n    /**\n     * Policy defines how user config gets merged to default config. The default policy here does a deep copy\n     * operation.\n     * Any policy which does more than deep copying should define the policy as a static member.\n     *\n     * @static\n     * @public\n     *\n     * @param {LayerConfig} conf Configuration with which the user config will be merged\n     * @param {LayerConfig} userConf Configuration given by the user\n     *\n     * @return {LayerConfig} Merged layer configuration\n     */\n    static defaultPolicy (conf, userConf) {\n        return mergeRecursive(conf, userConf);\n    }\n\n    /**\n     * Provides a alias for a layer. Like it's possible to have same layer (like bar) multiple times, but among\n     * multiple layers of same type if one layer has to be referred, alias is used. If no alias is given then\n     * `formalName` is set as the alias name.\n     *\n     *\n     * If used as setter\n     * @param  {string} alias Name of the alias\n     * @return {BaseLayer} Instance of current base layer\n     *\n     * If used as getter\n     * @return {string} Alias of the current layer\n     *\n     * @public\n     */\n    alias (...params) {\n        if (params.length) {\n            this._alias = params[0];\n            return this;\n        }\n        return this._alias || this.constructor.formalName();\n    }\n\n    enableCaching () {\n        this._cacheEnabled = true;\n        return this;\n    }\n\n    clearCaching () {\n        this._cacheEnabled = false;\n        return this.data(this._cachedData[0]);\n    }\n\n    /**\n     * Serialize the schema. Merge config is used for serialization.\n     *\n     * @public\n     *\n     * @return {LayerConfig} Serialized schema\n     */\n    serialize () {\n        return this.config();\n    }\n\n    /**\n     * Returns the unique identifier of this layer. Id is auto generated during the creation proceess of a schema.\n     *\n     * @public\n     *\n     * @return {string} id of the layer\n     */\n    id () {\n        return this._id;\n    }\n\n    /**\n     * Returns the transformed data based on given transform type.\n     * It first gets the transform method from transform factory based on type of transform. It then calls the\n     * transform method with the data and passes the configuration parameters of transform such as\n     * groupBy, value field, etc.\n     *\n     * @param {DataModel} dataModel Instance of DataModel\n     * @param {Object} config Configuration for transforming data\n     * @return {Array.<Array>} Transformed data.\n     */\n    getTransformedData (dataModel, config, transformType, encodingFieldsInf) {\n        return transformData(dataModel, config, transformType, encodingFieldsInf);\n    }\n\n    /**\n     * Calculates the domain from the data.\n     * It checks the type of field and calculates the domain based on that. For example, if it\n     * is a quantitative or temporal field, then it calculates the min and max from the data or\n     * if it is a categorical field then it gets all the values from the data of that field.\n     * @param {Array} data DataArray\n     * @param {Object} fieldsConfig Configuration of fields\n     * @return {Array} Domain values array.\n     */\n    calculateDomainFromData (data) {\n        let domains = {};\n        const isEmpty = this.data().isEmpty();\n\n        if (!isEmpty) {\n            domains = domainCalculator[this.coord()](data, this);\n        }\n        return domains;\n    }\n\n    static shouldDrawAnchors () {\n        return false;\n    }\n\n    /**\n     * Returns the domain for the axis.\n     *\n     * @param {string} encodingType type of encoding x, y, etc.\n     * @return {Object} Axis domains\n     */\n    getDataDomain (encodingType) {\n        const { parentNamespace, namespace } = this.metaInf();\n        const domains = getObjProp(this.store()\n            .get(`${STATE_NAMESPACES.LAYER_GLOBAL_NAMESPACE}.${PROPS.DOMAIN}`, parentNamespace), namespace);\n        return encodingType !== undefined ? domains[encodingType] || [] : domains;\n    }\n\n    getUidsFromPayload ({ model, uids }, targetData) {\n        let uidsArr = uids;\n        let dm = model;\n\n        if (targetData) {\n            const targetFields = targetData[0];\n            const targetVals = targetData.slice(1, targetData.length);\n            const payloadMap = targetVals.reduce((acc, v) => {\n                acc[v] = v;\n                return acc;\n            }, {});\n            const measures = Object.keys(this.data().getFieldspace().getMeasure());\n\n            dm = model.select((fields) => {\n                const row = `${targetFields.map((field) => {\n                    let val;\n                    if (field === ReservedFields.MEASURE_NAMES) {\n                        val = measures;\n                    } else if (field === ReservedFields.ROW_ID) {\n                        val = fields[ReservedFields.ROW_ID];\n                    } else {\n                        const currentField = fields[field];\n                        const isFieldInvalid = currentField instanceof InvalidAwareTypes;\n\n                        val = isFieldInvalid ? currentField.value() : (currentField || {}).internalValue;\n                    }\n                    return val;\n                })}`;\n                return row in payloadMap;\n            }, {\n                saveChild: false\n            });\n\n            const dmUids = dm.getUids();\n            uidsArr = uids.filter(d => dmUids.find(id => `${id}` === `${d[0]}`));\n        }\n\n        return {\n            model: dm,\n            uids: uidsArr,\n            length: uidsArr.length\n        };\n    }\n\n    /**\n     * Normalizes the transformed data and returns it.\n     *\n     * @param {string} encodingType type of encoding x, y, etc.\n     * @return {Object} Axis domains\n     */\n    getNormalizedData (transformedData) {\n        return getNormalizedData(transformedData, this);\n    }\n\n    /**\n     * Gets the nearest point closest to the given x and y coordinate. If no nearest point is found, then it returns\n     * null.\n     *\n     * @public\n     *\n     * @param {number} x X Coordinate.\n     * @param {number} y Y Coordinate.\n     *\n     * @return {Object} Information of the nearest point.\n     * ```\n     *      {\n     *          // id property contains the field names and their corresponding values in a 2d array. This is the\n     *          data // associated with the nearest point.\n     *          id: // Example data: [['Origin'], ['USA']],\n     *          dimensions: // Physical dimensions of the point.\n     *          layerId: // Id of the layer instance.\n     *      }\n     * ```\n     */\n    getNearestPoint () {\n        return null;\n    }\n\n    applyInteractionStyle (interactionType, selectionSet, options) {\n        const interactionConfig = this.config().interaction || {};\n        const { apply, styles, reset } = options;\n\n        let interactionStyles = interactionConfig[interactionType];\n        interactionStyles = styles || interactionStyles;\n        if (interactionStyles) {\n            applyInteractionStyle(this, selectionSet, interactionStyles, {\n                apply,\n                interactionType,\n                reset\n            });\n        }\n    }\n\n    resolveTransformType () {\n        this._transformType = getValidTransform(this);\n    }\n\n    transformType () {\n        return this._transformType;\n    }\n\n    /**\n     * Renders the layer\n     * @return {BaseLayer} Instance of the layer.\n     */\n    render () {\n        return this;\n    }\n\n    elemType () {\n        return 'g';\n    }\n\n    /**\n     * Disposes the entire layer.\n     *\n     * @return {BaseLayer} Instance of layer.\n     */\n    remove () {\n        const { namespace, parentNamespace } = this.metaInf();\n        const store = this.store();\n        store.removeSubNamespace(namespace, BASE_LAYER);\n        const layersDomain = store.get(`${STATE_NAMESPACES.LAYER_GLOBAL_NAMESPACE}.domain`);\n        const unitDom = layersDomain[parentNamespace];\n        unitDom && (delete unitDom[namespace]);\n        selectElement(this.mount()).remove();\n        return this;\n    }\n\n    /**\n     * Stores point in an object with key as the categorical value or temporal value\n     *\n     * @param {string} key categorical value or temporal value\n     * @param {Object} data Information of the data point\n     * @return {BarLayer} Instance of bar layer\n     */\n    cachePoint (key, data) {\n        if (key === null) {\n            return this;\n        }\n        const pointMap = this._pointMap;\n        !pointMap[key] && (pointMap[key] = []);\n        pointMap[key].push(data);\n        return this;\n    }\n\n    getInteractionStyles () {\n        return applyStylesOnInteraction;\n    }\n\n    addOverlayPath () {\n        return null;\n    }\n\n    removeOverlayPath () {\n        return null;\n    }\n\n    applyLayerStyle (elem, interactionType, style, options) {\n        const interactionFn = this.getInteractionStyles();\n        return interactionFn(this, elem, interactionType, style, options);\n    }\n\n    getIdentifiersFromData (data, rowId) {\n        const schema = this.data().getSchema();\n        const fieldsConfig = this.data().getFieldsConfig();\n        const identifiers = [[], []];\n\n        const allMeasures = schema.every(field => field.type === FieldType.MEASURE);\n        schema.forEach((d, i) => {\n            const name = d.name;\n            const { type } = fieldsConfig[name].def;\n            if (type === FieldType.DIMENSION) {\n                identifiers[0].push(name);\n                identifiers[1].push(data[i]);\n            }\n        });\n\n        const measures = schema.filter(d => d.type === FieldType.MEASURE).map(d => d.name);\n        if (allMeasures) {\n            identifiers[0].push(...[ReservedFields.ROW_ID]);\n            identifiers[1].push(...[rowId]);\n        }\n        if (measures.length) {\n            identifiers[0].push(ReservedFields.MEASURE_NAMES);\n            identifiers[1].push(measures.join());\n        }\n        return identifiers;\n    }\n\n    hasPlotSpan () {\n        return false;\n    }\n\n    getPlotSpan () {\n        return {\n            x: 0,\n            y: 0\n        };\n    }\n\n    getPlotPadding () {\n        return {\n            x: 0,\n            y: 0\n        };\n    }\n\n    /**\n     * Returns the information of the marks corresponding to the supplied identifiers.\n     * Identifiers are a set of field names and their corresponding values in an array.\n     * It can also be an instance of datamodel.\n     *\n     * For example,\n     * ```\n     *  const identifiers = [\n     *      ['Origin', 'Cylinders'],\n     *      ['USA', '8']\n     *  ];\n     *  const points = barLayer.getPointsFromIdentifiers(identifiers);\n     * ```\n     * @public\n     * @param {Array|DataModel} identifiers Identifiers of the marks.\n     * @param {Object} config Optional configuration which describes how to get the information.\n     * @param {boolean} config.getAllAttrs If true, then returns all the information of the points, else returns only\n     * the positions of the points.\n     * @param {boolean} config.getBBox If true, then returns the bounding box of all the marks.\n     *\n     * @return {Array} Array of points contains\n     */\n    getPointsFromIdentifiers (identifiers, config = {}) {\n        const getAllAttrs = config.getAllAttrs;\n        const getBBox = config.getBBox;\n        if (!this.data()) {\n            return [];\n        }\n        let fieldNames;\n        let values;\n        if (identifiers instanceof DataModel) {\n            const dataObj = identifiers.getData();\n            fieldNames = dataObj.schema.map(d => d.name);\n            values = dataObj.data;\n        } else {\n            fieldNames = identifiers[0];\n            values = identifiers.slice(1, identifiers.length);\n        }\n\n        const points = this._points;\n        const fieldsConfig = this.data().getFieldsConfig();\n\n        const filteredPoints = [].concat(...points).filter((point) => {\n            const { source, rowId } = point;\n\n            return fieldNames.every((field, idx) => {\n                if (field in fieldsConfig && fieldsConfig[field].def.type === FieldType.DIMENSION) {\n                    return values.findIndex(d => d[idx] === source[fieldsConfig[field].index]) !== -1;\n                } else if (field === ReservedFields.ROW_ID) {\n                    return values.findIndex(d => d[idx] === rowId) !== -1;\n                } return true;\n            });\n        });\n        return getAllAttrs ? filteredPoints : filteredPoints.map((d) => {\n            const obj = clone(d);\n            if (getBBox) {\n                const update = obj.update || obj;\n                if (obj.size !== undefined) {\n                    const sizeVal = Math.sqrt(obj.size / Math.PI) * 2;\n                    update.width = sizeVal;\n                    update.height = sizeVal;\n                    update.x -= sizeVal / 2;\n                    update.y -= sizeVal / 2;\n                } else {\n                    if (update.width === undefined) {\n                        update.width = 2;\n                    }\n                    if (update.height === undefined) {\n                        update.height = 2;\n                    }\n                }\n            }\n\n            return obj.update || obj;\n        }).sort((a, b) => a.y - b.y);\n    }\n\n    getTransformedDataFromIdentifiers (identifiers, idx = 0) {\n        const { data: identifierData, schema: identifierSchema } = identifiers.getData();\n        const normalizedData = this._normalizedData;\n        const fieldsConfig = this.data().getFieldsConfig();\n        const {\n            yField,\n            xField,\n            yFieldType,\n            xFieldType\n        } = this.encodingFieldsInf();\n        let measureIndex;\n        let enc;\n        if (xFieldType === FieldType.MEASURE) {\n            measureIndex = fieldsConfig[xField].index;\n            enc = 'x';\n        } else if (yFieldType === FieldType.MEASURE) {\n            const layerName = this.constructor.formalName();\n            measureIndex = fieldsConfig[yField].index;\n            enc = 'y';\n            if (layerName === AREA_LAYER) {\n                enc = (idx % 2 === 0) ? 'y' : 'y0';\n            }\n        }\n\n        const transformedData = [];\n        normalizedData.forEach((dataArr) => {\n            dataArr.forEach((dataObj) => {\n                const tupleArr = dataObj.source;\n                const exist = identifierSchema.every((obj, i) =>\n                    identifierData.findIndex(d => tupleArr[fieldsConfig[obj.name].index] === d[i]) !== -1);\n                if (exist) {\n                    const transformedVal = dataObj[enc] || 0;\n                    const row = dataObj.source;\n                    const tuple = {};\n                    for (const key in fieldsConfig) {\n                        const index = fieldsConfig[key].index;\n                        tuple[key] = row[index];\n                        if (index === measureIndex) {\n                            tuple[key] = transformedVal;\n                        }\n                    }\n                    transformedData.push(tuple);\n                }\n            });\n        });\n\n        return [transformedData, this.data().getSchema()];\n    }\n\n    /**\n     * Returns the dom elements associated with the supplied set of row ids.\n     * Each element in the layer is mapped with a row of the datamodel. When given an array of row ids,\n     * it returns all the elements which is mapped with those row ids.\n     *\n     * @public\n     * @param {Array} set Array of row ids\n     *\n     * @return {Selection} D3 Selection of dom elements.\n     */\n    getPlotElementsFromSet (set) {\n        const graphicElems = this._graphicElems;\n        const elems = [];\n        for (let i = 0, len = set.length; i < len; i++) {\n            const elem = graphicElems[set[i]];\n            if (elem) {\n                elems.push(elem);\n            }\n        }\n        return elems;\n    }\n\n    /**\n     * Notifies when all animations/transitions of the layer are completed.\n     *\n     * @public\n     * @return {Promise} Returns a promise to notify the animation completion.\n     */\n    animationDone () {\n        return Promise.all(this._animationDonePromises);\n    }\n\n    registerAnimationDoneHook () {\n        let resolveFn;\n        const promise = new Promise((resolve) => {\n            resolveFn = resolve;\n        });\n        this._animationDonePromises.push(promise);\n\n        return () => {\n            resolveFn();\n        };\n    }\n\n    /**\n     * Called when the layer datamodel is set.\n     *\n     * @param {Array} arr Old and new datamodel instance.\n     * @param {DataModel} arr[0] Previous datamodel instance.\n     * @param {DataModel} arr[1] Current datamodel instance.\n     *\n     * @return {BaseLayer} Instance of layer.\n     */\n    dataDidSet ([, data]) {\n        const config = this.config();\n\n        if (data && config) {\n            if (this._cacheEnabled) {\n                this._cachedData.push(data);\n            } else {\n                this._cachedData = [data];\n            }\n            const encodingValue = config.encoding;\n            if (encodingValue) {\n                const fieldsConfig = data.getFieldsConfig();\n                const encodingFieldsInf = this.retrieveEncodingFields(encodingValue, this.coord(), data);\n                this.encodingFieldsInf(encodingFieldsInf);\n                this.resolveTransformType();\n                this._transformedData = this.getTransformedData(data, config,\n                    this.transformType(), encodingFieldsInf);\n                this._normalizedData = this.getNormalizedData(this._transformedData, fieldsConfig);\n                if (config.calculateDomain !== false) {\n                    const domain = this.calculateDomainFromData(this._normalizedData,\n                        this.encodingFieldsInf(), this.data().getFieldsConfig());\n                    this.domain(domain);\n                }\n            }\n        }\n        return this;\n    }\n\n    retrieveEncodingFields (encoding, coord, data) {\n        const fieldsConfig = data.getFieldsConfig();\n\n        return encodingFieldInfRetriever[coord](encoding, fieldsConfig);\n    }\n\n    static getRenderProps () {\n        return [`${layerNs[1]}.${PROPS.DATA}`, ...['x', 'y', 'radius'].map(type =>\n            `${groupNs}.domain.${type}`)];\n    }\n\n    applyStyles ({ strokeStyles, otherStyles, styleObj, elem, mountPoint, applicableStrokePos, datum }) {\n        strokeStyles.forEach((type) => {\n            this.addOverlayPath(\n                elem.node(),\n                datum,\n                { type, value: styleObj[type] },\n                applicableStrokePos,\n                mountPoint\n            );\n        });\n\n        this.applyElementStyles(elem, otherStyles, styleObj);\n    }\n\n    applyElementStyles (elem, styles, styleObj) {\n        styles.forEach((type) => {\n            elem.style(type, styleObj[type]);\n        });\n    }\n\n    getBoundBoxes () {\n        return null;\n    }\n};\n","import {\n    mix\n} from 'muze-utils';\nimport { SimpleLayer } from '../simple-layer';\nimport { BaseLayerMixin } from './base-mixin';\nimport { BASE_LAYER } from '../enums/constants';\n\n/**\n * An abstract class which gives definition of common layer functionality like\n * - transforming data for various modes. Supported modes: identity, group and stack.\n * - calculating data domain\n * - linking dependent layers\n * - merging policy of configuration\n * - interaction sideffect helpers\n * - retrieving dom elements from data using id\n * - retrieving the physical dimensions of marks\n * - disposing layer\n *\n * Every layer has to extend base layer and give concrete definition.\n * This layer does not have any default visual. A new layer has to define the logic of `render` for rendering the\n * visuals\n *\n * @public\n * @class\n * @module BaseLayer\n */\nexport default class BaseLayer extends mix(SimpleLayer).with(BaseLayerMixin) {\n    /**\n     * Determines a name for a layer. This name of the layer is used in the input data to refer to this layer.\n     * ```\n     *  .layers([\n     *      mark: 'bar',\n     *      encoding: { ... }\n     *  ])\n     * ```\n     *\n     * @static\n     * @public\n     *\n     * @return {string} name of layer\n     */\n    static formalName () {\n        return BASE_LAYER;\n    }\n}\n","import {\n    selectElement,\n    makeElement,\n    pathInterpolators,\n    Symbols,\n    setStyles\n} from 'muze-utils';\nimport { updateStyle } from '../../helpers';\n\nconst line = Symbols.line;\n\nconst filterFn = (d) => {\n    const { update } = d;\n    return update.y !== null && update.x !== null;\n};\n\nconst containsNull = (elem) => {\n    const { x, y } = elem ? elem.update : {};\n    if (x === null || y === null) {\n        return true;\n    }\n    return false;\n};\n\nconst settIndexPrevOrNext = (arr, index, indexesObj) => {\n    const prevContainsNull = containsNull(arr[index - 1], index - 1);\n    const nextContainsNull = containsNull(arr[index + 1], index + 1);\n\n    !prevContainsNull && indexesObj.prevOfNull.push(index - 1);\n    !nextContainsNull && indexesObj.nextOfNull.push(index + 1);\n};\n\nconst getborderIndexes = (arr) => {\n    const indexes = {\n        prevOfNull: [],\n        nextOfNull: []\n    };\n    arr.forEach((value, index) => {\n        const { update } = value;\n        if (update.y === null || update.x === null) {\n            settIndexPrevOrNext(arr, index, indexes);\n        }\n    });\n    return indexes;\n};\n\nconst makeStartEndPair = (arr, borderIndexes) => {\n    const pairArray = [];\n    const { prevOfNull, nextOfNull } = borderIndexes;\n    const length = prevOfNull.length;\n    if (!length) {\n        return pairArray;\n    }\n\n    for (let i = 0; i < length; i++) {\n        const pair = [];\n        const prevValue = arr[prevOfNull[i]];\n        const nextValue = arr[nextOfNull[i]];\n        if (prevValue) {\n            pair.push(prevValue);\n        }\n        if (nextValue) {\n            pair.push(nextValue);\n        }\n        pairArray.push(pair);\n    }\n    return pairArray;\n};\n\nconst sanitizeNullConfig = (arr) => {\n    const borderIndexes = getborderIndexes(arr);\n    return makeStartEndPair(arr, borderIndexes);\n};\n\nconst getElementsForLine = (params) => {\n    const { mount, data, className, layer, strokeStyle, linepath, transition, updateFns } = params;\n    let element = makeElement(mount, 'path', data.length ? [data] : [], className, updateFns);\n    element.attr('class', (d, i) => d[i].className);\n    setStyles(element, strokeStyle);\n    if (!transition.disabled) {\n        element = element.transition()\n        .duration(transition.duration)\n        .on('end', layer.registerAnimationDoneHook());\n    }\n    element.attr('d', linepath(data))\n                    .style('fill-opacity', 0);\n    return element;\n};\n\n/**\n * Draws a line from the points\n * Generates a svg path string\n * @param {Object} params Contains container, points and interpolate attribute.\n */\nexport const drawLine = (context) => {\n    const { layer, container, points, interpolate, connectNullData, className, style, transition } = context;\n    const containerSelection = selectElement(container);\n    const strokeStyle = layer.config().nullDataLineStyle;\n    const nullDataLineClass = layer.config().nullDataLineClass;\n    const mount = containerSelection.attr('class', className);\n    const curveInterpolatorFn = pathInterpolators[interpolate];\n    const linepath = line()\n        .curve(curveInterpolatorFn)\n        .x(d => d.update.x)\n        .y(d => d.update.y)\n        .defined(filterFn);\n\n    const graphicElems = layer._graphicElems;\n    const updateFns = {\n        update: (group, d) => {\n            d.forEach((dd) => {\n                graphicElems[dd.rowId] = containerSelection;\n            });\n        }\n    };\n\n    updateStyle(mount, style);\n\n    const elementWithNullData = getElementsForLine({\n        mount,\n        data: points,\n        strokeStyle: undefined,\n        layer,\n        linepath,\n        transition,\n        updateFns\n    });\n    const sanitizedPoints = sanitizeNullConfig(points);\n\n    sanitizedPoints.map((d) => {\n        if (connectNullData && d.length > 1) {\n            getElementsForLine({\n                mount,\n                data: d,\n                strokeStyle,\n                className: `.${className}-${nullDataLineClass}`,\n                layer,\n                linepath,\n                transition,\n                updateFns\n            });\n        }\n        return null;\n    });\n    return elementWithNullData;\n};\n","import { transformColor } from 'muze-utils';\nimport { CLASSPREFIX } from '../../enums/constants';\n\nexport const defaultConfig = {\n    classPrefix: CLASSPREFIX,\n    defClassName: 'layer-line',\n    className: '',\n    interpolate: 'linear',\n    transform: {\n        type: 'group'\n    },\n    interaction: {\n        fade: {\n            style: {\n                stroke: (rgbaValues, data, apply) => transformColor(rgbaValues, {\n                    a: -0.5\n                }, data, apply).color\n            }\n        },\n        focus: {\n            style: {\n                stroke: (rgbaValues, data, apply) => transformColor(rgbaValues, {\n                    a: -0.5\n                }, data, apply).color\n            }\n        },\n        brushStroke: {\n            style: {\n                stroke: (rgbaValues, data, apply) => transformColor(rgbaValues, {\n                    a: -0.5\n                }, data, apply).color\n            }\n        }\n    },\n    crossline: true,\n    nearestPointThreshold: 20,\n    encoding: {\n        color: {},\n        x: {},\n        y: {},\n        strokeOpacity: {\n            value: 1\n        },\n        fillOpacity: {\n            value: 0\n        },\n        strokeWidth: {\n            value: '2px'\n        }\n    },\n    transition: {\n        effect: 'cubic',\n        duration: 1000\n    },\n    connectNullData: false,\n    nullDataLineStyle: {},\n    nullDataLineClass: 'null'\n};\n","import {\n    Voronoi,\n    getQualifiedClassName,\n    selectElement,\n    makeElement,\n    FieldType,\n    InvalidAwareTypes,\n    getObjProp\n} from 'muze-utils';\nimport { drawLine } from './renderer';\nimport { defaultConfig } from './default-config';\nimport { ENCODING } from '../../enums/constants';\nimport {\n    attachDataToVoronoi,\n    animateGroup,\n    positionPoints,\n    getIndividualClassName,\n    getColorMetaInf,\n    resolveEncodingValues,\n    sortData,\n    getBoundBoxes\n} from '../../helpers';\nimport './styles.scss';\n\n/**\n * This layer is used to render straight or smoothed line paths. The mark type of this layer is ```line```.\n *\n * @public\n *\n * @class\n * @module LineLayer\n * @extends BaseLayer\n */\nexport const LineLayerMixin = superclass => class extends superclass {\n    /**\n     * Creates an instance of LineLayer.\n     *\n     * @param {*} args\n     * @memberof LineLayer\n     */\n    constructor (...args) {\n        super(...args);\n        this._voronoi = new Voronoi();\n    }\n\n    static formalName () {\n        return 'line';\n    }\n\n    elemType () {\n        return 'path';\n    }\n\n    /**\n     * Default configuration of line layer\n     * @return {Object} Default configuration of layer\n     */\n    static defaultConfig () {\n        return defaultConfig;\n    }\n\n    static defaultPolicy (conf, userConf) {\n        const config = super.defaultPolicy(conf, userConf);\n        const encoding = config.encoding;\n        const transform = config.transform;\n        const colorField = encoding.color && encoding.color.field;\n\n        if (colorField && !transform.groupBy) {\n            transform.groupBy = colorField;\n        }\n        return config;\n    }\n\n    /**\n     * Returns the draw method for line\n     * @return {Function} Draw method of line layer\n     */\n    getDrawFn () {\n        return drawLine;\n    }\n\n    static shouldDrawAnchors () {\n        return true;\n    }\n\n    /**\n     * Generates the x and y positions for each point\n     * @param {Array} data Data Array\n     * @param {Object} encoding Visual Encodings of the layer\n     * @param {Object} axes Contains the axis\n     * @param {number} seriesIndex index of series\n     * @return {Array} Array of points\n     */\n    translatePoints (data) {\n        let points = [];\n        const axes = this.axes();\n        const encoding = this.config().encoding;\n        const xAxis = axes.x;\n        const yAxis = axes.y;\n        const colorAxis = axes.color;\n        const { xFieldType, yFieldType } = this.encodingFieldsInf();\n        const isXDim = xFieldType === FieldType.DIMENSION;\n        const isYDim = yFieldType === FieldType.DIMENSION;\n        const key = isXDim ? ENCODING.X : (isYDim ? ENCODING.Y : null);\n        sortData(data, axes);\n        points = data.map((d, i) => {\n            const xPx = xAxis.getScaleValue(d.x) + xAxis.getUnitWidth() / 2;\n            const yPx = yAxis.getScaleValue(d.y) + yAxis.getUnitWidth() / 2;\n            const color = colorAxis.getColor(d.color);\n\n            const resolvedEncodings = resolveEncodingValues({\n                values: {\n                    x: xPx,\n                    y: yPx,\n                    color\n                },\n                data: d\n            }, i, data, this);\n\n            const style = {\n                stroke: resolvedEncodings.color,\n                'fill-opacity': encoding.fillOpacity.value,\n                'stroke-width': encoding.strokeWidth.value\n            };\n\n            const point = {\n                enter: {},\n                update: {\n                    x: d.x instanceof InvalidAwareTypes ? null : resolvedEncodings.x,\n                    y: d.y instanceof InvalidAwareTypes ? null : resolvedEncodings.y\n                },\n                style,\n                rowId: d.rowId,\n                source: d.source,\n                data: d.dataObj,\n                meta: getColorMetaInf(style)\n            };\n            point.className = getIndividualClassName(d, i, data, this);\n            this.cachePoint(d[key], point);\n            return point;\n        });\n        points = positionPoints(this, points);\n\n        points = points.filter((point) => {\n            const { update } = point;\n            return !isNaN(update.x) && !isNaN(update.y);\n        });\n        return points;\n    }\n\n    getTranslatedData (normalizedData, colorValFn, colorFieldIndex, axes) {\n        return normalizedData.map((data, i) => {\n            let color;\n            const colorVal = data.find(d => d.source[colorFieldIndex] !== null &&\n                    d.source[colorFieldIndex] !== undefined);\n\n            if (colorValFn) {\n                color = colorValFn(data, i, normalizedData);\n            } else {\n                color = axes.color.getColor(colorVal && colorVal.source[colorFieldIndex]);\n            }\n\n            return {\n                data: this.translatePoints(data),\n                style: this.getPathStyle(color)\n            };\n        });\n    }\n\n    /**\n     * Renders the line plot\n     * @param {SVGElement} container svg element\n     * @return {LineLayer} instance of line layer\n     */\n    render (container) {\n        const config = this.config();\n        const {\n            encoding,\n            interpolate,\n            className,\n            defClassName,\n            transition\n        } = config;\n        const normalizedData = this._normalizedData;\n        const transformedData = this._transformedData;\n        const fieldsConfig = this.data().getFieldsConfig();\n        const axes = this.axes();\n        const keys = transformedData.map(d => d.key);\n        const qualifiedClassName = getQualifiedClassName(defClassName, this.id(), config.classPrefix);\n        const containerSelection = selectElement(container);\n        const colorField = encoding.color.field;\n        const colorFieldIndex = fieldsConfig[colorField] && fieldsConfig[colorField].index;\n\n        this._points = [];\n        this._pointMap = {};\n        containerSelection.attr('class', `${qualifiedClassName.join(' ')} ${className}`);\n\n        const colorValFn = encoding.color.value;\n        const translatedPoints = this.getTranslatedData(normalizedData, colorValFn, colorFieldIndex, axes);\n\n        makeElement(container, 'g', translatedPoints, null, {\n            enter: (group) => {\n                animateGroup(group, {\n                    transition,\n                    groupAnimateStyle: {\n                        enter: {\n                            'stroke-opacity': 0,\n                            'fill-opacity': this.getPathStyle()['fill-opacity']\n                        },\n                        update: {\n                            'stroke-opacity': encoding.strokeOpacity.value\n                        }\n                    }\n                });\n            },\n            update: (group, dataArr, i) => {\n                const points = dataArr.data;\n                const seriesClassName = `${qualifiedClassName[0]}-${keys[i] || i}`.toLowerCase();\n                const style = dataArr.style;\n\n                this._points.push(points);\n                this.getDrawFn()({\n                    layer: this,\n                    container: group.node(),\n                    interpolate,\n                    points,\n                    className: seriesClassName,\n                    transition,\n                    style: style || {},\n                    connectNullData: config.connectNullData\n                });\n            }\n        }, d => d.data[0].source[colorFieldIndex] || d.data[0].rowId);\n\n        attachDataToVoronoi(this._voronoi, this._points);\n        return this;\n    }\n\n    /**\n     * Get the css styles need to be applied on the line path\n     * @param {string} color Color value\n     * @return {Object} Path styles\n     */\n    getPathStyle (color) {\n        return {\n            stroke: color,\n            'fill-opacity': '0'\n        };\n    }\n\n    /**\n     * Gets the nearest point closest to the given position\n     * @param {number} x x position\n     * @param {number} y y position\n     * @return {Object} Nearest point information\n     */\n    getNearestPoint (x, y, config) {\n        let searchRadius = config.searchRadius;\n        const data = this.data();\n\n        if (!data || (data && data.isEmpty())) {\n            return null;\n        }\n\n        searchRadius = searchRadius !== undefined ? searchRadius : this.config().nearestPointThreshold;\n        const point = this._voronoi.find(x, y, searchRadius);\n        const dimensions = getObjProp(point, 'data', 'data', 'update');\n\n        if (point) {\n            const { source, rowId } = point.data.data;\n            const identifiers = this.getIdentifiersFromData(source, rowId);\n            return {\n                id: identifiers,\n                dimensions: [{\n                    x: dimensions.x,\n                    y: dimensions.y,\n                    width: 2,\n                    height: 2\n                }],\n                layerId: this.id()\n            };\n        }\n        return null;\n    }\n\n    applyStyles ({ strokeStyles, otherStyles, styleObj, elem }) {\n        [...otherStyles, ...strokeStyles].forEach((type) => {\n            elem.style(type, styleObj[type]);\n        });\n    }\n\n    getBoundBoxes () {\n        return getBoundBoxes(this._points.flat());\n    }\n};\n","import { CLASSPREFIX, STACK } from '../../enums/constants';\n\nexport const defaultConfig = {\n    classPrefix: CLASSPREFIX,\n    defClassName: 'layer-area',\n    className: '',\n    interpolate: 'linear',\n    transform: {\n        type: STACK\n    },\n    interaction: {\n        fade: {\n            style: {\n                'fill-opacity': 0.7\n            }\n        },\n        focus: {\n            style: {\n                'fill-opacity': 0.7\n            }\n        },\n        brushStroke: {\n            style: {\n                'fill-opacity': 0.7\n            }\n        }\n    },\n    crossline: true,\n    nearestPointThreshold: 10,\n    encoding: {\n        color: {},\n        x: {},\n        y: {},\n        y0: {},\n        strokeOpacity: {\n            value: 1\n        },\n        fillOpacity: {\n            value: 0.3\n        }\n    },\n    transition: {\n        effect: 'cubic',\n        duration: 1000\n    },\n    connectNullData: false\n};\n","import {\n    easeFns,\n    selectElement,\n    pathInterpolators,\n    Symbols\n} from 'muze-utils';\n\nconst area = Symbols.area;\n\n/**\n * Draws a line from the points\n * Generates a svg path string\n * @param {Object} params Contains container, points and interpolate attribute.\n */\nconst /* istanbul ignore next */ drawArea = (params) => {\n    const { layer, container, style, points, transition, className, interpolate, connectNullData } = params;\n    const graphicElems = layer._graphicElems;\n    const { effect: easeEffect, duration } = transition;\n    const mount = selectElement(container);\n    const curveInterpolatorFn = pathInterpolators[interpolate];\n    const selection = mount.selectAll('path').data(points.length ? [points] : []);\n    const [enterAreaPath, updateAreaPath] = ['enter', 'update'].map(e => area().curve(curveInterpolatorFn)\n                    .x(d => d[e].x)\n                    .y1(d => d[e].y)\n                    .y0(d => d[e].y0)\n                    .defined(d => d[e].y !== null));\n\n    mount.attr('class', className);\n\n    let filteredPoints = points;\n    if (connectNullData) {\n        filteredPoints = filteredPoints.filter(d => d.update.y !== null);\n    }\n    const selectionEnter = selection\n        .enter()\n        .append('path')\n        .attr('d', enterAreaPath(filteredPoints))\n        .each((d) => {\n            d.forEach((dd) => {\n                if (dd.rowId !== null) {\n                    graphicElems[dd.rowId] = mount.select('path');\n                }\n            });\n        });\n\n    selection.merge(selectionEnter).transition().ease(easeFns[easeEffect])\n                    .duration(duration)\n                    .on('end', layer.registerAnimationDoneHook())\n                    .attr('d', updateAreaPath(filteredPoints))\n                    .each(function () {\n                        const element = selectElement(this);\n                        Object.keys(style).forEach(key => element.style(key, style[key]));\n                    });\n};\n\nexport default drawArea;\n","import { FieldType, InvalidAwareTypes, getObjProp } from 'muze-utils';\nimport { defaultConfig } from './default-config';\nimport drawArea from './renderer';\nimport './styles.scss';\nimport { STACK, ENCODING } from '../../enums/constants';\nimport {\n    positionPoints,\n    getIndividualClassName,\n    getValidTransformForAggFn,\n    getColorMetaInf,\n    resolveEncodingValues,\n    sortData\n} from '../../helpers';\n\n/**\n * Area layer renders a closed path. The mark type of this layer is ```area```. This layer can be used\n * to create stacked or multi-series areas and vertical range area plots by using the encoding properties.\n *\n * To create this layer using layer configuration from canvas,\n * ```\n *      canvas.layers([{\n *          mark: 'area',\n *          transform: {\n *              type: 'stack' // Produces a stacked area.\n *          }\n *      }]);\n * ```\n *\n * @public\n *\n * @class\n * @module AreaLayer\n * @extends LineLayer\n */\nexport const AreaLayerMixin = superclass => class extends superclass {\n\n    /** Default configuration of area layer\n     *\n     * @return {Object} Default configuration of layer\n    */\n    static defaultConfig () {\n        return defaultConfig;\n    }\n\n    /**\n     * Calculates the domain from data. It calls its parent class's method which is line layer\n     * to get the domain and overwrites the domain according to its need.\n     * @return {Array} Domain values\n     */\n    calculateDomainFromData (data, encodingFieldsInf, fieldsConfig) {\n        const domains = super.calculateDomainFromData(data, fieldsConfig);\n        [ENCODING.X, ENCODING.Y].forEach((type) => {\n            const { [`${type}FieldType`]: fieldType } = encodingFieldsInf;\n            if (fieldType === FieldType.MEASURE && getObjProp(domains[type], 'length')) {\n                domains[type][0] = Math.min(domains[type][0], 0);\n                domains[type][1] = Math.max(0, domains[type][1]);\n            }\n        });\n        return domains;\n    }\n\n    /**\n     * Returns the drawing method of this layer\n     * @return {Function} Draw method\n     */\n    getDrawFn () {\n        return drawArea;\n    }\n\n    getNearestPoint (x, y, config) {\n        let searchRadius = config.searchRadius;\n        const data = this.data();\n\n        if (!data || (data && data.isEmpty())) {\n            return null;\n        }\n\n        searchRadius = searchRadius !== undefined ? searchRadius : this.config().nearestPointThreshold;\n        let point = this._voronoi.find(x, y, searchRadius);\n        let index;\n        let nearestPoint = null;\n\n        if (!point && config.dimValue && this._pointMap) {\n            const pointArr = this._pointMap[config.dimValue[1][0]] || [];\n\n            for (let i = 0, len = pointArr.length; i < len; i++) {\n                const { y: pointY, y0: pointY0 } = pointArr[i].update;\n                if (pointY < y && y < pointY0) {\n                    index = i;\n                    nearestPoint = pointArr[i];\n                    break;\n                }\n            }\n\n            // Index is a number(0 or more)\n            if (index !== undefined) {\n                point = {\n                    index,\n                    data: {\n                        x,\n                        y,\n                        data: nearestPoint\n                    }\n                };\n            }\n        }\n\n        const dimensions = getObjProp(point, 'data', 'data', 'update');\n\n        if (point) {\n            const { source, rowId } = point.data.data;\n            const identifiers = this.getIdentifiersFromData(source, rowId);\n            return {\n                id: identifiers,\n                dimensions: [{\n                    x: dimensions.x,\n                    y0: dimensions.y0,\n                    y: dimensions.y,\n                    width: 2,\n                    height: 2\n                }],\n                layerId: this.id()\n            };\n        }\n        return null;\n    }\n\n    /**\n     * Generates the x and y positions for each point\n     * @param {Array} data Data Array\n     * @param {Object} encoding Visual Encodings of the layer\n     * @param {Object} axes Contains the axis\n     * @return {Array} Array of points\n     */\n    translatePoints (data) {\n        let points = [];\n        const transformType = this.transformType();\n        const axes = this.axes();\n        const colorAxis = axes.color;\n        const config = this.config();\n        const encoding = config.encoding;\n        const fieldsConfig = this.data().getFieldsConfig();\n        const { xField, yField, y0Field } = this.encodingFieldsInf();\n        const { x: xAxis, y: yAxis } = axes;\n        const classNameFn = config.individualClassName;\n        const isXDim = fieldsConfig[xField] && fieldsConfig[xField].def.type === FieldType.DIMENSION;\n        const isYDim = fieldsConfig[yField] && fieldsConfig[yField].def.type === FieldType.DIMENSION;\n        const key = isXDim ? 'x' : (isYDim ? 'y' : null);\n        const minYVal = yAxis.domain()[0];\n        const basePos = minYVal < 0 ? yAxis.getScaleValue(0) : yAxis.getScaleValue(minYVal);\n        sortData(data, axes);\n        points = data.map((d, i) => {\n            let color;\n            const xPx = xAxis.getScaleValue(d.x) + xAxis.getUnitWidth() / 2;\n            const yPx = yAxis.getScaleValue(d.y);\n            const y0Px = (y0Field || transformType === STACK) ? yAxis.getScaleValue(d.y0) : basePos;\n            color = colorAxis.getColor(d.color);\n            const invalidY = d.y instanceof InvalidAwareTypes;\n            const invalidY0 = d.y0 instanceof InvalidAwareTypes;\n            const resolvedValues = resolveEncodingValues({\n                values: {\n                    x: xPx,\n                    y: yPx,\n                    y0: y0Px,\n                    color\n                },\n                data: d\n            }, i, data, this);\n            color = resolvedValues.color;\n            const style = {\n                fill: color,\n                'fill-opacity': encoding.fillOpacity.value\n            };\n\n            const point = {\n                enter: {\n                    x: xPx,\n                    y: invalidY ? null : basePos,\n                    y0: invalidY0 ? null : basePos\n                },\n                update: {\n                    x: xPx,\n                    y: invalidY ? null : resolvedValues.y,\n                    y0: invalidY0 ? null : resolvedValues.y0\n                },\n                source: d.source,\n                rowId: d.rowId,\n                data: d.dataObj,\n                className: classNameFn ? classNameFn(d, i, data, this) : '',\n                style,\n                meta: getColorMetaInf(style)\n            };\n            point.className = getIndividualClassName(d, i, data, this);\n            this.cachePoint(d[key], point);\n            return point;\n        });\n        points = positionPoints(this, points);\n        points = points.filter((point) => {\n            const update = point.update;\n            return !isNaN(update.x);\n        });\n        return points;\n    }\n\n    resolveTransformType () {\n        this._transformType = getValidTransformForAggFn(this);\n    }\n\n    /**\n     * Get the css styles need to be applied on the line path\n     * @param {string} color Color value\n     * @return {Object} Path styles\n     */\n    getPathStyle (color) {\n        return {\n            fill: color,\n            'fill-opacity': 0.30\n        };\n    }\n};\n","import { mix } from 'muze-utils';\nimport { AREA_LAYER } from '../../enums/constants';\nimport { BaseLayer, BaseLayerMixin } from '../../base-layer';\nimport { LineLayerMixin } from '../line/line-mixin';\nimport { AreaLayerMixin } from './area-mixin';\n\n/**\n * Area layer renders a closed path. The mark type of this layer is ```area```. This layer can be used\n * to create stacked or multi-series areas and vertical range area plots by using the encoding properties.\n *\n * To create this layer using layer configuration from canvas,\n * ```\n *      canvas.layers([{\n *          mark: 'area',\n *          transform: {\n *              type: 'stack' // Produces a stacked area.\n *          }\n *      }]);\n * ```\n *\n * @public\n *\n * @class\n * @module AreaLayer\n * @extends LineLayer\n */\nexport default class AreaLayer extends mix(BaseLayer).with(BaseLayerMixin, LineLayerMixin, AreaLayerMixin) {\n    static formalName () {\n        return AREA_LAYER;\n    }\n}\n\n","import { transformColor } from 'muze-utils';\nimport { CLASSPREFIX } from '../../enums/constants';\n\nexport const defaultConfig = {\n    classPrefix: CLASSPREFIX,\n    defClassName: 'layer-arc',\n    padding: { top: 1, bottom: 1, left: 1, right: 1 },\n    className: '',\n    interaction: {\n        highlight: {\n            style: {\n                fill: (rgbaValues, data, apply) => transformColor(rgbaValues, {\n                    a: -0.1\n                }, data, apply).color\n            }\n        },\n        fade: {\n            style: {\n                fill: (rgbaValues, data, apply) => transformColor(rgbaValues, {\n                    a: -0.3\n                }, data, apply).color\n            }\n        },\n        focus: {\n            style: {\n                fill: (rgbaValues, data, apply) => transformColor(rgbaValues, {\n                    a: -0.5\n                }, data, apply).color\n            }\n        }\n    },\n    height: 100,\n    width: 100,\n    sort: '',\n    colors: ['#F44336', 'blue', 'green', 'yellow', 'orange', 'purple'],\n    transform: {\n        type: 'identity'\n    },\n    encoding: {\n        'stroke-width': {\n            value: '2px'\n        },\n        'stroke-linejoin': {\n            value: 'round'\n        },\n        angle: {\n            value: '1'\n        },\n        radius: {\n            value: '1'\n        },\n        opacity: {\n            value: '1'\n        },\n        color: {\n            value: '1'\n        },\n        shape: {\n            value: '1'\n        },\n        size: {\n            value: '1'\n        }\n    },\n    transition: {\n        effect: 'cubic',\n        duration: 500\n    },\n    states: {\n        highlight: {\n            className: `${CLASSPREFIX}-layer-arc-highlight`\n        },\n        fadeout: {\n            className: `${CLASSPREFIX}-layer-arc-fadeout`\n        },\n        selected: {\n            className: `${CLASSPREFIX}-layer-arc-selected`\n        }\n    }\n};\n\n","import {\n    makeElement,\n    selectElement,\n    getQualifiedClassName,\n    isSimpleObject,\n    Symbols,\n    FieldType,\n    ReservedFields\n} from 'muze-utils';\nimport { defaultConfig } from './default-config';\nimport { getIndividualClassName, resolveEncodingValues, getColorMetaInf } from '../../helpers';\nimport { tweenPie, tweenExitPie, getPreviousPoint } from './arc-helper';\nimport './styles.scss';\n\nconst arc = Symbols.arc;\n\nexport const ArcLayerMixin = superclass => class extends superclass {\n    constructor (data, axes, config, dependencies) {\n        super(data, axes, config, dependencies);\n        this._prevPieData = {};\n    }\n\n    /**\n    * returns the default configuration of the layer\n    *\n    * @static\n    * @return {Object} Default configuration for arc layer\n    * @memberof ArcLayer\n    */\n    static defaultConfig () {\n        return defaultConfig;\n    }\n\n    static formalName () {\n        return 'arc';\n    }\n\n    elemType () {\n        return 'path';\n    }\n\n    getNearestPoint (x, y, config = {}) {\n        return this.getDataFromEvent(config.event);\n    }\n\n    getDataFromEvent (event) {\n        const dataPoint = selectElement(event.target).data()[0];\n        if (isSimpleObject(dataPoint)) {\n            const { source, rowId } = dataPoint;\n            return {\n                id: this.getIdentifiersFromData(source, rowId),\n                layerId: this.id()\n            };\n        }\n        return null;\n    }\n\n    translatePoints (data) {\n        const { angle, color: colorAxis, radius: radiusAxis } = this.axes();\n        const pieIndex = {};\n        const prevData = this._points[0] || [];\n        const points = [];\n        const angleV = {};\n\n        this._prevPieData = {};\n        prevData.forEach((e, index) => {\n            this._prevPieData[e.rowId] = [e, index];\n            pieIndex[e.index] = e;\n        });\n        data.forEach((d, i) => {\n            const angles = angle.getScaleValue(d.angle);\n            if (angles) {\n                !angleV[d.angle] && (angleV[d.angle] = 0);\n                const { startAngle, endAngle } = angles[angleV[d.angle]++];\n                const uid = d.rowId;\n                const resolvedEncodings = resolveEncodingValues({\n                    values: {\n                        radius: radiusAxis.getOuterRadius(d.radius),\n                        radius0: radiusAxis.getInnerRadius(d.radius0),\n                        color: colorAxis.getColor(d.color),\n                        angle0: startAngle,\n                        angle: endAngle,\n                        startAngle,\n                        endAngle,\n                        startAngle0: startAngle,\n                        endAngle0: endAngle\n                    },\n                    data: d\n                }, i, data, this);\n                const color = resolvedEncodings.color;\n                points.push({\n                    source: d.source,\n                    index: i,\n                    enter: {},\n                    update: {\n                        angle0: resolvedEncodings.angle0,\n                        angle: resolvedEncodings.angle,\n                        radius0: resolvedEncodings.radius0,\n                        radius: resolvedEncodings.radius\n                    },\n                    color,\n                    meta: getColorMetaInf({\n                        fill: color\n                    }),\n                    rowId: uid,\n                    _previousInfo: this._prevPieData[uid] ? this._prevPieData[uid][0] :\n                        getPreviousPoint(pieIndex, i, this)\n                });\n            }\n        });\n        return points;\n    }\n\n    render (container) {\n        const measurement = this.measurement();\n        const {\n            classPrefix,\n            defClassName,\n            cornerRadius,\n            padAngle,\n            padRadius,\n            transition\n        } = this.config();\n        const qualClassName = getQualifiedClassName(defClassName, this.id(), classPrefix);\n        // This returns a function that generates the arc path based on the datum provided\n        const path = this._arcFn = arc()\n                .cornerRadius(cornerRadius)\n                .startAngle(d => d.update.angle0 + Math.PI / 2)\n                .endAngle(d => d.update.angle + Math.PI / 2)\n                .padAngle(padAngle)\n                .padRadius(padRadius)\n                .outerRadius(d => d.update.radius)\n                .innerRadius(d => d.update.radius0);\n\n        this._points = this._normalizedData.map(arr => this.translatePoints(arr));\n        const graphicElems = this._graphicElems = {};\n        // Creating the group that holds all the arcs\n        const g = makeElement(selectElement(container), 'g', this._points, `${qualClassName[0]}-group`)\n                .classed(`${qualClassName[1]}-group`, true)\n                .attr('transform', `translate(${measurement.width / 2},\n                    ${measurement.height / 2})`);\n        const tween = (elem) => {\n            makeElement(elem, 'path', d => [d], `${qualClassName[0]}-path`)\n                .style('fill', d => d.color)\n                .each(function (d) {\n                    graphicElems[d.rowId] = selectElement(this);\n                })\n                .transition()\n                .duration(transition.duration)\n                .on('end', this.registerAnimationDoneHook())\n                .attrTween('d', (...params) => tweenPie(path, params))\n                .attr('class', (d, i) => {\n                    const individualClass = getIndividualClassName(d, i, this._points, this);\n                    return `${qualClassName[0]}-path ${qualClassName[1]}-path-${d.index}\n                        ${individualClass}`;\n                });\n        };\n        const consecutiveExits = [];\n        let exitCounter = 0;\n        const tweenExit = (elem, d) => {\n            let exitArr = consecutiveExits[exitCounter];\n            const oldExitCounter = exitCounter;\n            if (!exitArr) {\n                exitArr = [{ elem, datum: d }];\n            } else if (exitArr[exitArr.length - 1].datum.index === d.index - 1) {\n                exitArr.push({ elem, datum: d });\n            } else {\n                exitCounter++;\n            }\n            consecutiveExits[oldExitCounter] = exitArr;\n        };\n        // Creating groups for all the arcs present individually\n        makeElement(g, 'g', d => d, `${qualClassName[0]}`,\n            {\n                update: tween,\n                exit: tweenExit\n            })\n                        .attr('class', (d, i) => `${qualClassName[0]} ${qualClassName[1]}-${i}`);\n        tweenExitPie(consecutiveExits, transition, path);\n        return this;\n    }\n\n    getPointsFromIdentifiers (identifiers) {\n        if (!this.data()) {\n            return [];\n        }\n        const fieldNames = identifiers[0];\n        const values = identifiers.slice(1, identifiers.length);\n        const pieSlices = selectElement(this.mount()).selectAll('path').data();\n        const fieldsConfig = this.data().getFieldsConfig();\n\n        const filteredPies = pieSlices.filter((tData) => {\n            const { source, rowId } = tData;\n            return fieldNames.every((field, idx) => {\n                if (field in fieldsConfig && fieldsConfig[field].def.type === FieldType.DIMENSION) {\n                    return values.findIndex(d => d[idx] === source[fieldsConfig[field].index]) !== -1;\n                } else if (field === ReservedFields.ROW_ID) {\n                    return values.findIndex(d => d[idx] === rowId) !== -1;\n                } return true;\n            });\n        });\n\n        const pieSliceInf = filteredPies[0];\n        if (pieSliceInf) {\n            const measurement = this.measurement();\n            const centroid = this._arcFn.centroid(pieSliceInf);\n            return [{\n                x: centroid[0] + measurement.width / 2,\n                y: centroid[1] + measurement.height / 2,\n                width: 2,\n                height: 2\n            }];\n        }\n        return [];\n    }\n};\n\n","import { getObjProp, interpolator, FieldType, selectElement } from 'muze-utils';\nimport { ANGLE, RADIUS, SIZE, COLOR } from '../../enums/constants';\n\nexport const getPreviousPoint = (prevData, currIndex, context) => {\n    const prevArc = prevData[currIndex - 1];\n    const nextArc = prevData[currIndex];\n    const [startAngle, endAngle] = context.axes().angle.range();\n    if (prevArc && nextArc) {\n        return {\n            update: {\n                angle0: getObjProp(prevArc, 'update', 'angle'),\n                angle: getObjProp(nextArc, 'update', 'angle0')\n            }\n        };\n    } else if (!nextArc) {\n        return {\n            update: {\n                angle0: (endAngle - 90) * Math.PI * 2 / 360,\n                angle: (endAngle - 90) * Math.PI * 2 / 360\n            }\n        };\n    }\n    return {\n        update: {\n            angle0: (startAngle - 90) * Math.PI * 2 / 360,\n            angle: (startAngle - 90) * Math.PI * 2 / 360\n        }\n    };\n};\n\nexport const tweenPie = (path, b) => {\n    const datum = b[0];\n    return function (t) {\n        return path(interpolator()(datum._previousInfo, datum)(t));\n    };\n};\n\nexport const tweenExitPie = (consecutiveExits, transition, path) => {\n    if (consecutiveExits.length > 0) {\n        consecutiveExits.forEach((consecutiveExitArr) => {\n            const startAngle = consecutiveExitArr[0].datum.update.angle0;\n            const endAngle = consecutiveExitArr[consecutiveExitArr.length - 1].datum.update.angle;\n            const mid = (Math.PI * 2 * startAngle) / ((Math.PI * 2) + startAngle - endAngle);\n\n            consecutiveExitArr.forEach((e) => {\n                const { elem, datum } = e;\n\n                elem.each(function () {\n                    const gElem = selectElement(this);\n                    gElem.selectAll('path')\n                                    .transition()\n                                    .duration(transition.duration)\n                                    .attrTween('d', () => function (t) {\n                                        return path(interpolator()(datum, {\n                                            update: {\n                                                angle0: mid,\n                                                angle: mid,\n                                                radius: datum.radius,\n                                                radius0: datum.radius0\n                                            }\n                                        })(t));\n                                    })\n                                    .remove();\n                    gElem.remove();\n                });\n            });\n        });\n    }\n};\n\nexport const getFieldIndices = (encoding, fieldsConfig) => {\n    const [angleField, radiusField, colorField, sizeField] = [ANGLE, RADIUS, COLOR, SIZE]\n            .map(e => encoding[e].field);\n    const [angleIndex, sizeIndex, radiusIndex] = [angleField, sizeField, radiusField]\n        .map((e) => {\n            const conf = fieldsConfig[e];\n            if (conf && conf.def.type === FieldType.MEASURE) {\n                return conf.index;\n            }\n            return null;\n        });\n    const colorIndex = getObjProp(fieldsConfig, colorField, 'index');\n    return {\n        angleIndex,\n        sizeIndex,\n        radiusIndex,\n        colorIndex\n    };\n};\n","import {\n    mix\n} from 'muze-utils';\nimport { BaseLayerMixin, BaseLayer } from '../../base-layer';\nimport { ArcLayerMixin } from './arc-mixin';\n\n/**\n * Arc Layer creates a plot with polar coordinates.\n *\n * @public\n *\n * @class\n * @module ArcLayer\n * @extends BaseLayer\n */\nexport default class ArcLayer extends mix(BaseLayer).with(BaseLayerMixin, ArcLayerMixin) {\n    static formalName () {\n        return 'arc';\n    }\n}\n","import {\n    mix\n} from 'muze-utils';\nimport { BaseLayer, BaseLayerMixin } from '../../base-layer';\nimport { LineLayerMixin } from './line-mixin';\nimport { LINE_LAYER } from '../../enums/constants';\n\n/**\n * This layer is used to render straight or smoothed line paths. The mark type of this layer is ```line```.\n *\n * @public\n *\n * @class\n * @module LineLayer\n * @extends BaseLayer\n */\nexport default class LineLayer extends mix(BaseLayer).with(BaseLayerMixin, LineLayerMixin) {\n    static formalName () {\n        return LINE_LAYER;\n    }\n}\n","import {\n    setAttrs,\n    setStyles,\n    selectElement,\n    makeElement,\n    getSmartComputedStyle\n} from 'muze-utils';\n\n/**\n * Draws svg text in the specified container.\n * @param {SVGElement} container Container where labels will be appended.\n * @param {Array.<Object>} data Data of the elements.\n * @return {Selection} d3 selection of the elements.\n */\nconst drawText = (container, data, config, layerInst) => {\n    const selection = selectElement(container).selectAll('g').data(data);\n    const { smartLabel } = layerInst._dependencies;\n    const graphicElems = layerInst._graphicElems;\n\n    const selectionMerge = selection.enter().append('g')\n        .each(function (dataObj) {\n            setAttrs(this, dataObj.enter);\n        })\n        .merge(selection);\n    const style = getSmartComputedStyle(selectElement(container), config.className);\n    const fontSize = parseInt(style.fontSize, 10);\n\n    smartLabel.setStyle(style);\n    selectionMerge.each(function (dataObj) {\n        const element = selectElement(this);\n        graphicElems[dataObj.rowId] = element;\n        const { update, text, color, textanchor, style: textStyle } = dataObj;\n        const background = dataObj.background;\n        let backgroundVal;\n        if (backgroundVal = background.value) {\n            const backgroundPadding = background.padding;\n            let diff;\n            const { width, height } = smartLabel.getOriSize(dataObj.text);\n            const backgroundEl = makeElement(element, 'rect', [1]);\n\n            if (textanchor === 'end') {\n                diff = width;\n            } else if (textanchor === 'start') {\n                diff = 0;\n            } else {\n                diff = width / 2;\n            }\n\n            setAttrs(backgroundEl.node(), {\n                x: update.x - diff - backgroundPadding / 2,\n                y: update.y - fontSize - backgroundPadding / 2,\n                width: width + backgroundPadding,\n                height: height + backgroundPadding\n            });\n            background && setStyles(backgroundEl, {\n                background: backgroundVal\n            });\n        }\n        const textEl = makeElement(element, 'text', d => [d]).text(text);\n        const textNode = textEl.node();\n        textStyle && setStyles(textNode, textStyle);\n        color && setStyles(textNode, {\n            fill: color\n        });\n        dataObj.className && textEl.classed(dataObj.className, true);\n        setAttrs(textNode, update);\n        textEl.attr('text-anchor', textanchor);\n        textEl.attr('alignment-baseline', dataObj['alignment-baseline']);\n        textEl.attr('transform', `rotate(${dataObj.rotation} ${update.x} ${update.y})`);\n    });\n    selection.exit().remove();\n    return selection;\n};\n\nexport default drawText;\n","import { transformColor } from 'muze-utils';\nimport { CLASSPREFIX } from '../../enums/constants';\n\nexport const defaultConfig = {\n    defClassName: 'layer-text',\n    classPrefix: CLASSPREFIX,\n    className: '',\n    transform: {\n        type: 'identity'\n    },\n    interaction: {\n        highlight: {\n            style: {\n                fill: (rgbaValues, data, apply) => transformColor(rgbaValues, {\n                    l: -15\n                }, data, apply).color\n            }\n        },\n        fade: {\n            style: {\n                fill: (rgbaValues, data, apply) => transformColor(rgbaValues, {\n                    l: +15\n                }, data, apply).color\n            }\n        },\n        focus: {\n            style: {\n                fill: (rgbaValues, data, apply) => transformColor(rgbaValues, {\n                    l: +15\n                }, data, apply).color\n            }\n        }\n    },\n    crossline: false,\n    transition: {\n        effect: 'cubic',\n        duration: 1000\n    },\n    encoding: {\n        color: {},\n        size: {},\n        radius: {},\n        angle: {},\n        text: {\n            value: '',\n            formatter: (val, i, data, context) => {\n                const valueParser = context.valueParser();\n                return valueParser(val);\n            },\n            background: {\n                padding: 10\n            }\n        },\n        rotation: {\n            value: 0\n        },\n        'alignment-baseline': {\n            value: 'middle'\n        }\n    },\n    states: {\n        highlight: {\n            className: `${CLASSPREFIX}-layer-text-highlight`\n        },\n        fadeout: {\n            className: `${CLASSPREFIX}-layer-text-fadeout`\n        },\n        selected: {\n            className: `${CLASSPREFIX}-layer-text-selected`\n        }\n    }\n};\n","import {\n    getQualifiedClassName,\n    selectElement,\n    setStyles,\n    createElements\n} from 'muze-utils';\nimport drawText from './renderer';\nimport { defaultConfig } from './default-config';\nimport {\n    positionPoints,\n    getIndividualClassName,\n    resolveEncodingValues,\n    getColorMetaInf,\n    toCartesianCoordinates,\n    getDataFromEvent\n} from '../../helpers';\nimport { TEXT_ANCHOR_MIDDLE, ENCODING } from '../../enums/constants';\n\nimport './styles.scss';\n\nconst defaultEncoding = defaultConfig.encoding;\nconst alignmentBaseLine = defaultEncoding['alignment-baseline'].value;\nconst defRotation = defaultEncoding.rotation.value;\n\nconst pointTranslators = {\n    polar: (data, config, layerInst) => {\n        let points = [];\n        const axes = layerInst.axes();\n        const encoding = layerInst.config().encoding;\n        const textEncoding = encoding.text;\n        const { radius: radiusAxis, color: colorAxis, angle: angleAxis } = axes;\n        const { formatter: textFormatter } = textEncoding;\n        const backgroundEncoding = encoding.text.background;\n        const backgroundPadding = backgroundEncoding.padding;\n        const backgroundValue = backgroundEncoding.value;\n        const angleV = {};\n        for (let i = 0, len = data.length; i < len; i++) {\n            const d = data[i];\n            const source = d.source;\n            const text = d.text;\n\n            const color = colorAxis.getColor(d.color);\n            const radius = radiusAxis.getOuterRadius(d.radius);\n            const angles = angleAxis.getScaleValue(d.angle);\n            !angleV[d.angle] && (angleV[d.angle] = 0);\n            const { startAngle, endAngle } = angles[angleV[d.angle]++];\n\n            const angle = (startAngle + endAngle) / 2;\n            const resolvedVal = resolveEncodingValues({\n                values: {\n                    angle,\n                    radius,\n                    color,\n                    text,\n                    startAngle,\n                    endAngle,\n                    rotation: defRotation,\n                    'alignment-baseline': alignmentBaseLine\n                },\n                data: d\n            }, i, data, layerInst);\n            const point = {\n                enter: {},\n                update: {\n                    angle: resolvedVal.angle,\n                    radius: resolvedVal.radius\n                },\n                text: textFormatter ? textFormatter(text, i, data, layerInst) : resolvedVal.text,\n                color: resolvedVal.color,\n                rotation: resolvedVal.rotation,\n                background: {\n                    value: backgroundValue instanceof Function ? backgroundValue(d, i, data, layerInst) : null,\n                    padding: backgroundPadding\n                },\n                'alignment-baseline': resolvedVal['alignment-baseline'],\n                meta: { ...{ layerId: layerInst.id() },\n                    ...getColorMetaInf({\n                        fill: resolvedVal.color\n                    }) },\n                style: {},\n                source,\n                rowId: d.rowId\n            };\n\n            point.className = getIndividualClassName(d, i, data, layerInst);\n            points.push(point);\n        }\n\n        points = toCartesianCoordinates(positionPoints(layerInst, points), layerInst.measurement());\n\n        points = points.filter((d) => {\n            const update = d.update;\n            return !isNaN(update.x) && !isNaN(update.y);\n        });\n        return points;\n    },\n    cartesian: (data, config, layerInst) => {\n        let points = [];\n        const axes = layerInst.axes();\n        const colorAxis = axes.color;\n        const encoding = layerInst.config().encoding;\n        const textEncoding = encoding.text;\n        const { field: textField, value, formatter: textFormatter } = textEncoding;\n        const fieldsConfig = layerInst.data().getFieldsConfig();\n\n        const backgroundEncoding = encoding.text.background;\n        const backgroundPadding = backgroundEncoding.padding;\n        const backgroundValue = backgroundEncoding.value;\n        const textFieldIndex = textField ? fieldsConfig[textField] && fieldsConfig[textField].index : -1;\n        const xEnc = ENCODING.X;\n        const yEnc = ENCODING.Y;\n        for (let i = 0, len = data.length; i < len; i++) {\n            const d = data[i];\n            const row = d.source;\n            const textValue = textField ? row[textFieldIndex] : value;\n\n            const [xPx, yPx] = [xEnc, yEnc].map(type => (axes[type] ? axes[type].getScaleValue(d[type]) +\n                    axes[type].getUnitWidth() / 2 : 0));\n\n            const color = colorAxis.getColor(d.color, colorAxis);\n            const resolvedEncodings = resolveEncodingValues({\n                values: {\n                    x: xPx,\n                    y: yPx,\n                    text: textValue,\n                    color,\n                    rotation: defRotation,\n                    'alignment-baseline': alignmentBaseLine\n                },\n                data: d\n            }, i, data, layerInst);\n            const point = {\n                enter: {},\n                update: {\n                    x: resolvedEncodings.x,\n                    y: resolvedEncodings.y\n                },\n                text: textFormatter(resolvedEncodings.text, i, data, layerInst),\n                color: resolvedEncodings.color,\n                background: {\n                    value: backgroundValue instanceof Function ? backgroundValue(d, i, data, layerInst) : null,\n                    padding: backgroundPadding\n                },\n                'alignment-baseline': resolvedEncodings['alignment-baseline'],\n                rotation: resolvedEncodings.rotation,\n                meta: { ...{ layerId: layerInst.id() },\n                    ...getColorMetaInf({\n                        fill: resolvedEncodings.color\n                    }) },\n                style: {},\n                source: d.source,\n                rowId: d.rowId\n            };\n\n            point.className = getIndividualClassName(d, i, data, layerInst);\n            points.push(point);\n        }\n\n        points = positionPoints(layerInst, points);\n        points = points.filter((d) => {\n            const update = d.update;\n            return !isNaN(update.x) && !isNaN(update.y);\n        });\n        return points;\n    }\n};\n\n/**\n * This layer is used to create labels for each data point. It has an encoding property ```text```\n * which determines from which field's data the value of the label will be taken. The text encoding\n * property is necessary for the layer to render the text.The mark type of this layer is ```text```.\n *\n * @public\n *\n * @class\n * @module TextLayer\n * @extends BaseLayer\n */\nexport const TextLayerMixin = superclass => class extends superclass {\n    /**\n    * Returns the default configuration of the text layer\n    * @return {Object} Default configuration of the text layer\n    */\n    static defaultConfig () {\n        return defaultConfig;\n    }\n\n    static formalName () {\n        return 'text';\n    }\n\n    elemType () {\n        return 'text';\n    }\n\n    getPointTranslator (val) {\n        return pointTranslators[val];\n    }\n\n    /**\n    * Generates an array of objects containing x, y, width and height of the points from the data\n    * @param  {Array.<Array>} data Data Array\n    * @param  {Object} encoding  Config\n    * @param  {Object} axes     Axes object\n    * @return {Array.<Object>}  Array of points\n    */\n    translatePoints (data, config = {}) {\n        return pointTranslators[this.coord()](data, config, this);\n    }\n\n    /**\n    * Renders the plot in the given container\n    * @param  {SVGElement} container SVGElement which will hold the plot\n    * @return {textLayer} Instance of text layer\n    */\n    render (container) {\n        const config = this.config();\n        const normalizedData = this._normalizedData;\n        const className = config.className;\n        const qualifiedClassName = getQualifiedClassName(config.defClassName, this.id(), config.classPrefix);\n        const containerSelection = selectElement(container);\n\n        containerSelection.classed(`${qualifiedClassName.join(' ')} ${className}`, true);\n        this._graphicElems = {};\n\n        createElements({\n            data: normalizedData,\n            append: 'g',\n            selector: 'g',\n            container,\n            each: (dataArr, group) => {\n                const node = group.node();\n                const points = this.translatePoints(dataArr, {}, this);\n                setStyles(node, {\n                    'text-anchor': TEXT_ANCHOR_MIDDLE\n                });\n                drawText(node, points, {\n                    className: qualifiedClassName[0]\n                }, this);\n            }\n        });\n        return this;\n    }\n\n    getNearestPoint (x, y, { event }) {\n        if (!this.data()) {\n            return null;\n        }\n        return this.getDataFromEvent(event);\n    }\n\n    getDataFromEvent (event) {\n        return getDataFromEvent(this, event);\n    }\n};\n\n","import {\n    mix\n} from 'muze-utils';\nimport { BaseLayer, BaseLayerMixin } from '../../base-layer';\nimport { TextLayerMixin } from './text-mixin';\n\n/**\n * This layer is used to create labels for each data point. It has an encoding property ```text```\n * which determines from which field's data the value of the label will be taken. The text encoding\n * property is necessary for the layer to render the text.The mark type of this layer is ```text```.\n *\n * @public\n *\n * @class\n * @module TextLayer\n * @extends BaseLayer\n */\nexport default class TextLayer extends mix(BaseLayer).with(BaseLayerMixin, TextLayerMixin) {\n    static formalName () {\n        return 'text';\n    }\n}\n","/* global Element, document  */\nimport {\n    makeElement,\n    selectElement,\n    easeFns,\n    objectIterator,\n    getSymbol,\n    setStyles\n} from 'muze-utils';\n\n/**\n *\n *\n * @param {*} str\n *\n */\nconst checkPath = (str) => {\n    if (/^[mzlhvcsqta]\\s*[-+.0-9][^mlhvzcsqta]+/i.test(str) && /[\\dz]$/i.test(str) && str.length > 4) {\n        return true;\n    }\n    return false;\n};\n\n/**\n *\n *\n * @param {*} d\n * @param {*} elem\n */\nconst createShape = function (d, groupElement) {\n    const { shape, size, update, style } = d;\n\n    if (shape instanceof Promise) {\n        shape.then((res) => {\n            d.shape = res;\n            createShape(d, groupElement);\n        });\n    } else if (shape instanceof Element) {\n        let newShape = shape.cloneNode(true);\n\n        if (newShape.nodeName.toLowerCase() === 'img') {\n            const src = newShape.src || newShape.href;\n            newShape = document.createElementNS('http://www.w3.org/2000/svg', 'image');\n            newShape.setAttribute('href', src);\n        }\n        const shapeElement = selectElement(newShape);\n        if (newShape.nodeName === 'path' || newShape.nodeName === 'image') {\n            shapeElement.attr('transform', `scale(${size / 100})`);\n        } else {\n            shapeElement.attr('height', size);\n            shapeElement.attr('width', size);\n        }\n        shapeElement.attr('x', -size / 2);\n        shapeElement.attr('y', -size / 2);\n        makeElement(groupElement, () => newShape, [1]);\n    } else if (typeof shape === 'string') {\n        let pathStr;\n        if (checkPath(shape)) {\n            pathStr = shape;\n        } else {\n            pathStr = getSymbol(shape).size(size)(update);\n        }\n        const pathEl = makeElement(groupElement, 'path', data => [data]).attr('d', pathStr);\n        setStyles(pathEl, style);\n    } else {\n        d.shape = 'circle';\n        createShape(d, groupElement);\n    }\n};\n\n/**\n * Draws symbols using d3 symbol api\n * @param {Object} params Contains the svg container, points and other symbol related attributes.\n */\n/* istanbul ignore next */ const drawSymbols = (params) => {\n    const { layer, container, points, transition, className } = params;\n    const { duration, effect, disabled } = transition;\n    const mount = selectElement(container);\n    const graphicElems = layer._graphicElems;\n    mount.attr('class', className);\n    return makeElement(mount, 'g', points, null, {\n        enter: (group, d) => {\n            const { enter } = d;\n            group.attr('transform', `translate(${enter.x},${enter.y})`);\n        },\n        update: (group, d) => {\n            createShape(d, group);\n            graphicElems[d.rowId] = group;\n            const { update, style } = d;\n            objectIterator(style, key => group.style(key, style[key]));\n            group.attr('class', className);\n            group.classed(d.className, true);\n            if (!disabled) {\n                group = group.transition()\n                    .duration(transition.duration)\n                    .on('end', layer.registerAnimationDoneHook());\n            }\n            group.attr('transform', `translate(${update.x},${update.y})`);\n        },\n        exit: (exitGroup) => {\n            if (!disabled) {\n                exitGroup.transition().ease(easeFns[effect])\n                .duration(duration)\n                .on('end', () => exitGroup.remove())\n                .style('fill-opacity', 0)\n                .style('stroke-opacity', 0);\n            } else {\n                exitGroup.remove();\n            }\n        }\n    }, params.keyFn);\n};\n\nexport default drawSymbols;\n","import { transformColor } from 'muze-utils';\nimport { CLASSPREFIX } from '../../enums/constants';\n\nexport const defaultConfig = {\n    defClassName: 'layer-point',\n    className: '',\n    classPrefix: CLASSPREFIX,\n    defColorStyle: 'stroke',\n    interaction: {\n        highlight: {\n            className: 'highlight-class',\n            style: {\n                stroke: 'black',\n                'stroke-width': '1px'\n                // fill: 'red'\n            },\n            strokePosition: 'center'\n        },\n        focusStroke: {\n            className: 'focus-stroke-class',\n            style: {\n                stroke: 'black',\n                'stroke-width': '1px'\n            },\n            strokePosition: 'outside'\n        },\n        commonDoubleStroke: {\n            style: {\n                stroke: 'black',\n                'stroke-width': '2px'\n            },\n            strokePosition: 'outside'\n        },\n        brushStroke: {\n            className: 'brush-stroke-class',\n            style: {\n                stroke: 'black',\n                'stroke-width': '1px'\n                // fill: 'blue'\n            },\n            strokePosition: 'outside'\n        },\n        doubleStroke: {\n            style: {\n                stroke: 'black',\n                'stroke-width': '2px'\n            },\n            strokePosition: 'outside'\n        },\n        fade: {\n            style: {\n                fill: (rgbaValues, data, apply) => transformColor(rgbaValues, {\n                    a: -0.5\n                }, data, apply).color\n            }\n        },\n        focus: {\n            style: {\n                fill: (rgbaValues, data, apply) => transformColor(rgbaValues, {\n                    a: -0.5\n                }, data, apply).color\n            }\n        }\n    },\n    innerPadding: 0.1,\n    nearestPointThreshold: 5,\n    transform: {\n        type: 'identity'\n    },\n    transition: {\n        effect: 'cubic',\n        duration: 1000\n    },\n    encoding: {\n        size: {\n            value: 30\n        },\n        color: {},\n        stroke: {\n            value: '#000'\n        },\n        'stroke-width': {\n            value: 0\n        },\n        fill: {},\n        shape: {\n            value: 'circle'\n        },\n        x: {},\n        y: {},\n        'stroke-opacity': {\n            value: 1\n        },\n        'fill-opacity': {\n            value: 0.5\n        },\n        strokePosition: {\n            value: 'center'\n        },\n        interaction: {\n            anchors: 'highlight',\n            'persistent-anchors': 'focusStroke',\n            'brush-anchors': 'brushStroke'\n        }\n    },\n    shapes: ['circle', 'cross', 'diamond', 'square', 'star', 'wye', 'triangle'],\n    sizes: [20, 30, 40, 50, 60, 70]\n};\n","import { FieldType, COORD_TYPES } from 'muze-utils';\nimport { ENCODING } from '../../enums/constants';\nimport {\n    getIndividualClassName,\n    resolveEncodingValues,\n    getColorMetaInf,\n    positionPoints\n} from '../../helpers';\n\nexport const prepareDrawingInf = ({ data, datum, i, layerInst, xPx, yPx }) => {\n    const axes = layerInst.axes();\n    const { shape: shapeAxis, color: colorAxis, size: sizeAxis } = axes;\n    let shape = shapeAxis.getShape(datum.shape);\n    let size = sizeAxis.getSize(datum.size);\n    let color = colorAxis.getColor(datum.color);\n    const layerEncoding = layerInst.config().encoding;\n    const stroke = layerEncoding.stroke.value;\n    const strokeWidth = layerEncoding['stroke-width'].value;\n\n    const resolvedEncodings = resolveEncodingValues({\n        values: {\n            x: xPx,\n            y: yPx,\n            color,\n            stroke,\n            'stroke-width': strokeWidth,\n            size,\n            shape,\n            data: datum\n        },\n        data: datum\n    }, i, data, layerInst);\n    const { rowId, source } = datum;\n    ({ shape, size, color } = resolvedEncodings);\n    const style = {\n        fill: color,\n        stroke: resolvedEncodings.stroke,\n        'stroke-width': resolvedEncodings['stroke-width']\n    };\n    const { x, y } = resolvedEncodings;\n    const pos = { x, y };\n    return {\n        enter: pos,\n        update: pos,\n        shape,\n        source,\n        rowId,\n        style,\n        data: datum.dataObj,\n        meta: Object.assign({\n            layerId: layerInst.id()\n        }, getColorMetaInf(style, {\n            strokePosition: layerEncoding.strokePosition.value\n        })),\n        size\n    };\n};\n\nexport const pointTranslators = {\n    [COORD_TYPES.CARTESIAN]: (data, config, layerInst) => {\n        let points = [];\n        const encoding = layerInst.config().encoding;\n        const axes = layerInst.axes();\n        const { x, y } = encoding;\n        const xField = x.field;\n        const yField = y.field;\n        const fieldsConfig = layerInst.data().getFieldsConfig();\n        const isXDim = fieldsConfig[xField] && fieldsConfig[xField].def.type === FieldType.DIMENSION;\n        const isYDim = fieldsConfig[yField] && fieldsConfig[yField].def.type === FieldType.DIMENSION;\n        const key = isXDim ? ENCODING.X : (isYDim ? ENCODING.Y : null);\n        const measurement = layerInst.measurement();\n        const { x: offsetX, y: offsetY } = config.offset;\n\n        for (let i = 0, len = data.length; i < len; i++) {\n            const d = data[i];\n\n            let [xPx, yPx] = [ENCODING.X, ENCODING.Y].map((type) => {\n                const value = d[type] === null ? undefined : d[type];\n                const measure = type === ENCODING.X ? measurement.width : measurement.height;\n                return !encoding[type].field ? measure / 2 : axes[type].getScaleValue(value);\n            });\n\n            xPx += offsetX;\n            yPx += offsetY;\n            if (!isNaN(xPx) && !isNaN(yPx)) {\n                const point = prepareDrawingInf({\n                    data,\n                    datum: d,\n                    i,\n                    layerInst,\n                    xPx,\n                    yPx\n                });\n                point.className = getIndividualClassName(d, i, data, layerInst);\n                points.push(point);\n                layerInst.cachePoint(d[key], point);\n            }\n        }\n        points = positionPoints(layerInst, points);\n        return points;\n    }\n};\n\nexport const getStrokeWidthByPosition = (position, radius) => {\n    const strokeWidthWithOffsetMap = {\n        center: -radius,\n        inside: -(radius * Math.PI),\n        outside: +(radius * Math.PI)\n    };\n    return strokeWidthWithOffsetMap[position];\n};\n","import {\n    Voronoi,\n    Scales,\n    makeElement,\n    getQualifiedClassName,\n    selectElement,\n    appendElement,\n    getSymbol,\n    pointWithinCircle\n} from 'muze-utils';\nimport drawSymbols from './renderer';\nimport { defaultConfig } from './default-config';\nimport {\n    attachDataToVoronoi,\n    getPlotMeasurement,\n    getMarkId,\n    getBoundBoxes\n} from '../../helpers';\nimport './styles.scss';\nimport { pointTranslators, getStrokeWidthByPosition } from './helper';\n\nexport const PointLayerMixin = superclass => class extends superclass {\n    /**\n     * Creates an instance of PointLayer.\n     * @param {*} args\n     * @memberof PointLayer\n     */\n    constructor (...args) {\n        super(...args);\n        this._voronoi = new Voronoi();\n        this._bandScale = Scales.band();\n        this._overlayPath = {};\n        this.formattedUids = [];\n    }\n\n    elemType () {\n        return 'g';\n    }\n\n    /**\n     * Returns the default configuration of the point layer\n     * @return {Object} Default configuration of the point layer\n     */\n    static defaultConfig () {\n        return defaultConfig;\n    }\n\n    static defaultPolicy (conf, userConf) {\n        const config = super.defaultPolicy(conf, userConf);\n        const encoding = config.encoding;\n        const transform = config.transform;\n        const colorField = encoding.color && encoding.color.field;\n\n        if (colorField) {\n            transform.groupBy = colorField;\n        }\n        return config;\n    }\n\n    static drawFn () {\n        return drawSymbols;\n    }\n\n    /**\n     * Generates an array of objects containing x, y, width and height of the points from the data\n     * @param  {Array.<Array>} data Data Array\n     * @param  {Object} encoding  Config\n     * @param  {Object} axes     Axes object\n     * @return {Array.<Object>}  Array of points\n     */\n    translatePoints (data, config = {}) {\n        return pointTranslators[this.coord()](data, config, this);\n    }\n\n    /**\n     * Renders the plot in the given container.\n     *\n     * @param  {SVGElement} container SVGElement which will hold the plot\n     * @return {BarLayer} Instance of bar layer\n     */\n    render (container) {\n        let maxSize = 0;\n        let seriesClassName;\n        const config = this.config();\n        const keys = this._transformedData.map(d => d.key);\n        const { transition, className, defClassName, classPrefix } = config;\n        const normalizedData = this._normalizedData;\n        const containerSelection = selectElement(container);\n        const qualifiedClassName = getQualifiedClassName(defClassName, this.id(), classPrefix);\n        this._points = [];\n        this._pointMap = {};\n\n        containerSelection.classed(qualifiedClassName.join(' '), true).classed(className, true);\n\n        this._points = this.generateDataPoints(normalizedData, keys);\n        this._graphicElems = {};\n\n        const schema = this.data().getSchema();\n        makeElement(container, 'g', this._points, null, {\n            update: (group, points) => {\n                maxSize = Math.max(maxSize, ...points.map(d => d.size || 0));\n                seriesClassName = `${qualifiedClassName[0]}`;\n                this.constructor.drawFn()({\n                    layer: this,\n                    container: group.node(),\n                    points,\n                    interpolate: config.interpolate,\n                    className: seriesClassName,\n                    transition,\n                    keyFn: v => getMarkId(v.source, schema)\n                });\n            }\n        }, data => data[0].rowId);\n        this._maxSize = Math.sqrt(maxSize / Math.PI) * 2;\n        this.attachDataToVoronoi(this._points);\n        return this;\n    }\n\n    attachDataToVoronoi (points) {\n        attachDataToVoronoi(this._voronoi, points);\n    }\n\n    generateDataPoints (normalizedData, keys) {\n        const [widthMetrics, heightMetrics] = getPlotMeasurement(this, keys);\n        const offsetXValues = widthMetrics.offsetValues || [];\n        const offsetYValues = heightMetrics.offsetValues || [];\n        return normalizedData.map((dataArr, i) => {\n            const measurementConf = this.getMeasurementConfig(offsetXValues[i], offsetYValues[i], widthMetrics.span,\n                    heightMetrics.span);\n            return this.translatePoints(dataArr, measurementConf);\n        }).filter(d => d.length);\n    }\n\n    getMeasurementConfig (offsetX, offsetY, widthSpan, heightSpan) {\n        return {\n            offset: {\n                x: (offsetX || 0) + widthSpan / 2,\n                y: (offsetY || 0) + heightSpan / 2\n            },\n            span: {\n                x: widthSpan,\n                y: heightSpan\n            }\n        };\n    }\n\n    /**\n     * Gets the nearest point from a position.\n     * @param {number} x x position\n     * @param {number} y y position\n     * @return {Object} Point details\n     */\n    getNearestPoint (x, y) {\n        const nearestPointThreshold = this.config().nearestPointThreshold;\n        const distanceLimit = Math.max(this._maxSize, nearestPointThreshold);\n\n        if (!this.data()) {\n            return null;\n        }\n\n        const point = this._voronoi.find(x, y, distanceLimit);\n        const dimensions = point && point.data.data.update;\n        const radius = point ? Math.sqrt(point.data.data.size / Math.PI) : 0;\n\n        if (point) {\n            const insideShape = pointWithinCircle({\n                x: dimensions.x,\n                y: dimensions.y,\n                r: radius + nearestPointThreshold\n            }, { x, y });\n            if (insideShape) {\n                const { source, rowId } = point.data.data;\n                const identifiers = this.getIdentifiersFromData(source, rowId);\n                return {\n                    id: identifiers,\n                    dimensions: [{\n                        x: dimensions.x,\n                        y: dimensions.y,\n                        width: radius,\n                        height: radius\n                    }],\n                    layerId: this.id()\n                };\n            }\n        }\n        return null;\n    }\n\n    addOverlayPath (refElement, data, style, strokePosition) {\n        const container = refElement.parentElement;\n        let pathElement;\n\n        if (this._overlayPath[data.rowId]) {\n            pathElement = this._overlayPath[data.rowId];\n        } else {\n            pathElement = makeElement(container, 'path', [data.update], null, {}, d => `${d.x} ${data.rowId}`);\n            pathElement.style('fill', 'none');\n            pathElement.style('fill-opacity', 0);\n            pathElement.attr('id', data.rowId);\n            this._overlayPath[data.rowId] = pathElement;\n        }\n\n        if (style.type === 'stroke-width') {\n            const position = strokePosition;\n            // get radius as per stroke position\n            let radius = Math.sqrt(data.size / Math.PI);\n            radius = getStrokeWidthByPosition(position, radius);\n\n            const size = data.size + radius;\n            if (typeof data.shape === 'string') {\n                const path = getSymbol(data.shape).size(size);\n                pathElement.attr('d', path);\n            }\n        }\n\n        let styleVal = style.value;\n        if (typeof styleVal === 'function') {\n            const currentStyle = pathElement.style(style.type);\n            styleVal = styleVal(currentStyle);\n        }\n        pathElement.style(style.type, styleVal);\n        appendElement(refElement, pathElement.node());\n    }\n\n    removeOverlayPath (data, style) {\n        const currentPath = this._overlayPath[data.rowId];\n        if (currentPath) {\n            currentPath.node().removeAttribute('style');\n            Object.keys(style).forEach(s => currentPath.style(s, style[s]));\n            currentPath.style('fill-opacity', 0);\n        }\n    }\n\n    getBoundBoxes () {\n        return getBoundBoxes(this._points.flat());\n    }\n\n    applyElementStyles (elem, styles, styleObj) {\n        styles.forEach((type) => {\n            elem.select('path').style(type, styleObj[type]);\n        });\n    }\n};\n","import {\n    mix\n} from 'muze-utils';\nimport { BaseLayer } from '../../base-layer';\nimport { POINT_LAYER } from '../../enums/constants';\nimport { PointLayerMixin } from './point-mixin';\n\n/**\n * This layer is used to create various symbols for each data point. This is commonly used in\n * scatterplot visualizations. The mark type of this layer is ```point```.\n *\n * @public\n *\n * @class\n * @module PointLayer\n * @extends BaseLayer\n */\nexport default class PointLayer extends mix(BaseLayer).with(PointLayerMixin) {\n    static formalName () {\n        return POINT_LAYER;\n    }\n}\n","import { makeElement, easeFns } from 'muze-utils';\n\n/**\n *\n *\n * @param {*} elem\n * @param {*} datum\n * @param {*} index\n * @param {*} context\n */\nconst transitionBars = (layer, elem, datum, index, context) => {\n    const { transition } = context;\n    const { duration, disabled, effect } = transition;\n    const selection = elem;\n\n    const selTransition = disabled ? selection :\n        selection.transition()\n        .duration(duration)\n        .ease(easeFns[effect])\n        .on('end', layer.registerAnimationDoneHook());\n    const update = datum.update || datum;\n    const updateStyle = datum.style || {};\n    datum.className && selection.classed(datum.className, true);\n    Object.entries(update).forEach(attr => (!isNaN(attr[1]) && selTransition.attr(attr[0], attr[1])));\n    Object.entries(updateStyle).forEach(styleObj => selection.style(styleObj[0], styleObj[1]));\n};\n\n/**\n *\n *\n * @param {*} elem\n * @param {*} d\n */\nconst barEnterFn = (elem, d) => {\n    const selection = elem;\n    const enter = d.enter || {};\n    Object.entries(enter).forEach(attr => (!isNaN(attr[1]) && selection.attr(attr[0], attr[1])));\n};\n\n/**\n * Draws rectangles by using d3 selection\n * @param  {Object} params Contains container element and points\n * @return {Selection} Bar Selection\n */\n/* istanbul ignore next */ export const drawRects = (params) => {\n    const { layer, points, container, keyFn, className } = params;\n    const graphicElems = layer._graphicElems;\n    const updateFns = {\n        enter (elem, d) {\n            barEnterFn(elem, d);\n        },\n        update (elem, d, i) {\n            graphicElems[d.rowId] = elem;\n            transitionBars(layer, elem, d, i, params);\n        }\n    };\n\n    return makeElement(container, 'g', points, null, {\n        update: (group, d) => {\n            makeElement(group.node(), 'rect', data => [data], null, updateFns, keyFn);\n            group.attr('class', `${className}-${d.rowId}`);\n            group.classed(d.className, true);\n        }\n    }, keyFn);\n};\n","import { transformColor } from 'muze-utils';\nimport { CLASSPREFIX } from '../../enums/constants';\n\nexport const defaultConfig = {\n    classPrefix: CLASSPREFIX,\n    defClassName: 'layer-bar',\n    className: '',\n    interaction: {\n        highlight: {\n            style: {\n                stroke: 'black',\n                'stroke-width': '1px'\n            },\n            strokePosition: 'center'\n        },\n        focusStroke: {\n            className: 'focus-stroke-class',\n            style: {\n                stroke: 'black',\n                'stroke-width': '1px'\n            },\n            strokePosition: 'outside'\n        },\n        brushStroke: {\n            className: 'brush-stroke-class',\n            style: {\n                stroke: 'black',\n                'stroke-width': '1px'\n            },\n            strokePosition: 'outside'\n        },\n        doubleStroke: {\n            style: {\n                stroke: 'black',\n                'stroke-width': '2px'\n            },\n            strokePosition: 'outside'\n        },\n        commonDoubleStroke: {\n            style: {\n                stroke: 'black',\n                'stroke-width': '2px'\n            },\n            strokePosition: 'outside'\n        },\n        fade: {\n            style: {\n                fill: (rgbaValues, data, apply) => transformColor(rgbaValues, {\n                    a: -0.3\n                }, data, apply).color\n            }\n        },\n        focus: {\n            style: {\n                fill: (rgbaValues, data, apply) => transformColor(rgbaValues, {\n                    a: -0.5\n                }, data, apply).color\n            }\n        }\n    },\n    transform: {\n        type: 'stack'\n    },\n    transition: {\n        effect: 'cubic',\n        duration: 1000\n    },\n    innerPadding: 0.1,\n    encoding: {\n        color: {},\n        x: {},\n        y: {},\n        x0: {},\n        y0: {},\n        stroke: {\n            value: '#000'\n        },\n        strokeWidth: {\n            value: '0px'\n        },\n        strokePosition: {\n            value: 'center'\n        }\n    }\n};\n","import { MeasureSubtype, DimensionSubtype } from 'muze-utils';\nimport { STACK } from '../../enums/constants';\nimport {\n    positionPoints,\n    getIndividualClassName,\n    getColorMetaInf,\n    resolveEncodingValues\n} from '../../helpers';\n\nconst positionRetriever = {\n    x: (xPx, isNegativeVal, barBasePos) => (isNegativeVal ? [xPx, barBasePos] : [barBasePos, xPx]),\n    y: (yPx, isNegativeVal, barBasePos) => (isNegativeVal ? [barBasePos, yPx] : [yPx, barBasePos])\n};\n\n/**\n *\n *\n * @param {*} type\n * @param {*} fieldInfo\n * @param {*} config\n * @param {*} data\n *\n */\nconst resolveDimByField = (type, axesInfo, config, data) => {\n    const spaceType = type === 'x' ? 'width' : 'height';\n    const [fieldType, axis] = [config[`${type}FieldType`], axesInfo[`${type}Axis`]];\n    const {\n        transformType,\n        sizeEncoding,\n        sizeConfig,\n        measurement\n    } = config;\n\n    const sizeValue = sizeEncoding.value;\n    let enter = 0;\n    let pos;\n    let space = 0;\n    let enterSpace = 0;\n    if (fieldType !== undefined) {\n        if (config[`${type}0Field`]) {\n            const minVal = data[type];\n            const maxVal = data[`${type}0`];\n            let min;\n            let max;\n            if (minVal === null || maxVal === null) {\n                return {\n                    enterSpace: undefined,\n                    enter: undefined,\n                    pos: undefined,\n                    space: undefined\n                };\n            } else if (fieldType === MeasureSubtype.CONTINUOUS || fieldType === DimensionSubtype.TEMPORAL) {\n                min = Math.min(minVal, maxVal);\n                max = Math.max(minVal, maxVal);\n            } else {\n                min = minVal;\n                max = maxVal;\n            }\n            const scales = type === 'x' ? [min, max] : [max, min];\n            pos = axis.getScaleValue(scales[0]) + axis.getUnitWidth() / 2;\n            space = Math.abs(axis.getScaleValue(scales[1]) - pos) + axis.getUnitWidth() / 2;\n\n            enter = pos;\n            enterSpace = 0;\n        } else if (fieldType === DimensionSubtype.CATEGORICAL || fieldType === DimensionSubtype.TEMPORAL) {\n            pos = axis.getScaleValue(data[type]) +\n                (sizeConfig[type === 'x' ? 'barWidthOffset' : 'barHeightOffset'] || 0);\n\n            space = sizeConfig[type === 'x' ? 'barWidth' : 'barHeight'];\n            if (sizeValue !== undefined) {\n                const diffPx = sizeValue * space;\n                space -= diffPx;\n                pos += diffPx / 2;\n            }\n            enter = pos;\n            enterSpace = space;\n        } else {\n            const minDomVal = axis.domain()[0];\n            const barBasePos = minDomVal < 0 ? axis.getScaleValue(0) : axis.getScaleValue(minDomVal);\n            pos = axis.getScaleValue(data[type]);\n            let endPos = axis.getScaleValue(data[`${type}0`]);\n\n            enterSpace = 0;\n            const isNegativeVal = data[type] < 0;\n            if (transformType !== STACK) {\n                [pos, endPos] = positionRetriever[type](pos, isNegativeVal, barBasePos);\n            }\n            space = Math.abs(pos - endPos);\n            enter = barBasePos;\n        }\n    } else {\n        pos = 0;\n        space = measurement[spaceType];\n    }\n\n    return {\n        enterSpace,\n        enter,\n        pos,\n        space\n    };\n};\n\n/**\n *\n *\n * @param {*} data\n * @param {*} config\n * @param {*} axes\n *\n */\nconst resolveDimensions = (data, config, axes) => {\n    const axesInfo = {\n        xAxis: axes.x,\n        yAxis: axes.y\n    };\n    const {\n        enterSpace: enterWidth,\n        enter: enterX,\n        pos: xPos,\n        space: width\n    } = resolveDimByField('x', axesInfo, config, data);\n\n    const {\n        enterSpace: enterHeight,\n        enter: enterY,\n        pos: yPos,\n        space: height\n    } = resolveDimByField('y', axesInfo, config, data);\n    return {\n        enter: {\n            x: enterX,\n            y: enterY,\n            width: enterWidth,\n            height: enterHeight\n        },\n        update: {\n            x: xPos,\n            y: yPos,\n            width,\n            height\n        }\n    };\n};\n\nexport const strokeWidthPositionMap = ({ width, position }) => {\n    const offset = width / 2;\n    const strokeWidthWithOffsetMap = {\n        center: {\n            M: { x: 0, y: 0 },\n            L1: { x: 0, y: 0 },\n            L2: { x: 0, y: 0 },\n            L3: { x: 0, y: 0 }\n        },\n        inside: {\n            M: { x: +offset, y: +offset },\n            L1: { x: -offset, y: +offset },\n            L2: { x: -offset, y: -offset },\n            L3: { x: +offset, y: -offset }\n        },\n        outside: {\n            M: { x: -offset, y: -offset },\n            L1: { x: +offset, y: -offset },\n            L2: { x: +offset, y: +offset },\n            L3: { x: -offset, y: +offset }\n        }\n    };\n    return strokeWidthWithOffsetMap[position];\n};\n\n/**\n * Generates an array of objects containing x, y, width and height of the bars from the data\n * @param  {Array.<Array>} data Data Array\n * @param  {Object} encoding  Config\n * @param  {Object} axes     Axes object\n * @param {Object} conf config object for point generation\n * @return {Array.<Object>}  Array of points\n */\nexport const getTranslatedPoints = (context, data, sizeConfig) => {\n    let points = [];\n    const encoding = context.config().encoding;\n    const axes = context.axes();\n    const colorAxis = axes.color;\n    const sizeEncoding = encoding.size || {};\n    const {\n            x0Field,\n            y0Field,\n            xFieldSubType,\n            yFieldSubType\n        } = context.encodingFieldsInf();\n    const measurement = context.measurement();\n    const isXDim = xFieldSubType === DimensionSubtype.CATEGORICAL || xFieldSubType === DimensionSubtype.TEMPORAL;\n    const isYDim = yFieldSubType === DimensionSubtype.CATEGORICAL || yFieldSubType === DimensionSubtype.TEMPORAL;\n    const key = isXDim ? 'x' : (isYDim ? 'y' : null);\n    const transformType = context.transformType();\n\n    for (let i = 0, len = data.length; i < len; i++) {\n        const d = data[i];\n        const dimensions = resolveDimensions(d, {\n            xFieldType: xFieldSubType,\n            yFieldType: yFieldSubType,\n            x0Field,\n            y0Field,\n            transformType,\n            measurement,\n            sizeConfig,\n            sizeEncoding\n        }, axes);\n\n        let color = colorAxis.getColor(d.color);\n\n        const update = dimensions.update;\n        const resolvedEncodings = resolveEncodingValues({\n            values: {\n                x: update.x,\n                y: update.y,\n                width: update.width,\n                height: update.height,\n                color\n            },\n            data: d\n        }, i, data, context);\n        // const layerEncoding = layerInst.config().encoding;\n\n        color = resolvedEncodings.color;\n        const { x, y, width, height } = resolvedEncodings;\n        const style = {\n            fill: color,\n            stroke: encoding.stroke.value,\n            'stroke-width': encoding.strokeWidth.value\n        };\n        const conf = {\n            strokePosition: encoding.strokePosition.value\n        };\n\n        if (!isNaN(x) && !isNaN(y) && d.rowId !== undefined) {\n            let point = null;\n            point = {\n                enter: dimensions.enter,\n                update: {\n                    x,\n                    y,\n                    width,\n                    height\n                },\n                source: d.source,\n                rowId: d.rowId,\n                data: d.dataObj,\n                style,\n                meta: Object.assign({\n                    layerId: context.id()\n                }, getColorMetaInf(style, conf))\n            };\n            point.className = getIndividualClassName(d, i, data, context);\n            points.push(point);\n            // Store each point in a hashmap with key as the dimensional or temporal field value\n            context.cachePoint(d[key], point);\n        }\n    }\n\n    points = positionPoints(context, points);\n    return points;\n};\n","import {\n    getQualifiedClassName,\n    selectElement,\n    createElements,\n    clipElement,\n    FieldType,\n    Scales,\n    getObjProp,\n    makeElement,\n    appendElement,\n    RTree\n} from 'muze-utils';\nimport { BaseLayer } from '../../base-layer';\nimport { drawRects } from './renderer';\nimport { defaultConfig } from './default-config';\nimport { getPlotMeasurement, getValidTransformForAggFn, getDataFromEvent } from '../../helpers';\nimport './styles.scss';\nimport { getTranslatedPoints, strokeWidthPositionMap } from './bar-helper';\n\nconst { MEASURE } = FieldType;\n\nexport const BarLayerMixin = superclass => class extends superclass {\n    /**\n     * Creates an instance of bar layer\n     */\n    constructor (...params) {\n        super(...params);\n        this._bandScale = Scales.band();\n        this._plotPadding = {\n            x: 0,\n            y: 0\n        };\n        this._plotSpan = {\n            x: 0,\n            y: 0\n        };\n        this._pointMap = {};\n        this._overlayPath = {};\n        this._rtree = new RTree();\n    }\n\n    elemType () {\n        return 'rect';\n    }\n\n    /**\n     * Returns the default configuration of the bar layer\n     * @return {Object} Default configuration of the bar layer\n     */\n    static defaultConfig () {\n        return defaultConfig;\n    }\n\n    static defaultPolicy (conf, userConf) {\n        const config = BaseLayer.defaultPolicy(conf, userConf);\n        const encoding = config.encoding;\n        const colorField = encoding.color.field;\n        const transform = config.transform;\n\n        if (colorField) {\n            transform.groupBy = colorField;\n        }\n        return config;\n    }\n\n    calculateDomainFromData (data, encodingFieldInf, fieldsConfig) {\n        const domain = super.calculateDomainFromData(data, encodingFieldInf, fieldsConfig);\n        ['x', 'y'].forEach((d) => {\n            if (encodingFieldInf[`${d}FieldType`] === MEASURE && getObjProp(domain[d], 'length')) {\n                if (encodingFieldInf[`${d}0Field`]) {\n                    domain[d] = domain[d].sort((a, b) => a - b);\n                } else {\n                    domain[d][0] = Math.min(domain[d][0], 0);\n                    domain[d][1] = Math.max(0, domain[d][1]);\n                }\n            }\n        });\n        return domain;\n    }\n\n    /**\n     * Generates an array of objects containing x, y, width and height of the bars from the data\n     * @param  {Array.<Array>} data Data Array\n     * @param  {Object} encoding  Config\n     * @param  {Object} axes     Axes object\n     * @param {Object} conf config object for point generation\n     * @return {Array.<Object>}  Array of points\n     */\n    translatePoints (data, sizeConfig) {\n        return getTranslatedPoints(this, data, sizeConfig);\n    }\n\n    /**\n     * Renders the plot in the given container\n     * @param  {SVGGroup} container SVGGroup where plot will be rendered.\n     * @return {BarLayer} Instance of bar layer.\n     */\n    render (container) {\n        const config = this.config();\n        const transition = config.transition;\n        const normalizedDataArr = this._normalizedData;\n        const transformedData = this._transformedData;\n        const keys = transformedData.map(d => d.key);\n        const fieldsConfig = this.data().getFieldsConfig();\n        const axes = this.axes();\n        const height = axes.y && axes.y.scale().range()[0];\n        const width = axes.x && axes.x.scale().range()[1];\n        const defClassName = config.defClassName;\n        const qualifiedClassName = getQualifiedClassName(defClassName, this.id(), config.classPrefix);\n        const className = config.className;\n        const containerSelection = selectElement(container);\n        const dimensions = Object.values(fieldsConfig).filter(e => e.def.type === FieldType.DIMENSION)\n            .map(e => e.index);\n        containerSelection.classed(qualifiedClassName.join(' '), true);\n        containerSelection.classed(className, true);\n        clipElement(container, {\n            x: 0,\n            y: 0,\n            width,\n            height\n        }, `id-${this.id()}`);\n\n        this._points = this.generateDataPoints(normalizedDataArr, keys);\n        this._graphicElems = {};\n        const paths = Object.keys(this._overlayPath);\n        paths.forEach(path => this._overlayPath[path].remove());\n        this._overlayPath = {};\n\n        const barContainer = makeElement(containerSelection, 'g', [1], 'muze-layer-bars', {}, null);\n        makeElement(containerSelection, 'g', [1], 'muze-overlay-paths', {}, null);\n        createElements({\n            data: this._points,\n            container: barContainer.node(),\n            selector: 'g',\n            append: 'g',\n            each: (points, group, i) => {\n                const seriesClassName = `${qualifiedClassName[0]}-${keys[i] || i}`.toLowerCase();\n                group.style('display', 'block');\n                drawRects({\n                    layer: this,\n                    container: group.node(),\n                    points,\n                    className: seriesClassName,\n                    transition,\n                    style: {},\n                    keyFn: d => dimensions.map(key => d.source[key]).join('-')\n                });\n            }\n        });\n        const elements = this.getBoundBoxes().flat().filter(d => d !== null);\n        this._rtree = new RTree();\n        this._rtree.load(elements);\n        return this;\n    }\n\n    generateDataPoints (normalizedData, keys) {\n        const [barWidthMetrics, barHeightMetrics] = getPlotMeasurement(this, keys);\n        const barWidthOffsets = barWidthMetrics.offsetValues || [];\n        const barHeightOffsets = barHeightMetrics.offsetValues || [];\n        this._plotSpan = {\n            x: barWidthMetrics.groupSpan || 0,\n            y: barHeightMetrics.groupSpan || 0\n        };\n        this._plotPadding = {\n            x: barWidthMetrics.padding || 0,\n            y: barHeightMetrics.padding || 0\n        };\n\n        this._pointMap = {};\n        return normalizedData.map((data, i) => this.translatePoints(data,\n            {\n                barWidth: barWidthMetrics.span,\n                barWidthOffset: barWidthOffsets[i] || 0,\n                barHeight: barHeightMetrics.span,\n                barHeightOffset: barHeightOffsets[i] || 0\n            }));\n    }\n\n    getPlotPadding () {\n        return this._plotPadding;\n    }\n\n    resolveTransformType () {\n        this._transformType = getValidTransformForAggFn(this);\n    }\n\n    /**\n     * Gets the nearest point of the position passed.\n     * @param {number} x x position\n     * @param {number} y y position\n     * @return {Object} Nearest point.\n     */\n    getNearestPoint (x, y) {\n        if (!this.data()) {\n            return null;\n        }\n        const data = this._rtree.search({\n            minX: Math.max(x - 1, 0),\n            minY: Math.max(y - 1, 0),\n            maxX: x + 1,\n            maxY: y + 1\n        });\n\n        if (data.length) {\n            return this.getDataFromEvent(null, data[0].point);\n        }\n        return null;\n    }\n\n    getDataFromEvent (event, data) {\n        return getDataFromEvent(this, event, data);\n    }\n\n    getPlotSpan () {\n        return this._plotSpan;\n    }\n\n    hasPlotSpan () {\n        return true;\n    }\n\n    addOverlayPath (refElement, data, style, strokePosition, mountPoint) {\n        let pathElement;\n\n        if (this._overlayPath[data.rowId]) {\n            pathElement = this._overlayPath[data.rowId];\n        } else {\n            const pathGroup = makeElement(mountPoint, 'g', [1], null, {}, d => `${d.x} ${data.rowId}`);\n            pathElement = makeElement(pathGroup, 'path', [data], null, {}, d => `${d.update.x} ${data.rowId}`);\n\n            pathElement.style('fill', 'none');\n            pathElement.style('fill-opacity', 0);\n            pathElement.attr('id', data.rowId);\n            this._overlayPath[data.rowId] = pathElement;\n        }\n\n        if (style.type === 'stroke-width') {\n            const { L1, L2, L3, M } = strokeWidthPositionMap({\n                width: parseInt(style.value, 10),\n                position: strokePosition\n            });\n\n            pathElement.attr('d', d => `M ${d.update.x + M.x} ${d.update.y + M.y}\n            L ${d.update.x + d.update.width + L1.x} ${d.update.y + L1.y}\n            L ${d.update.x + d.update.width + L2.x} ${d.update.y + d.update.height + L2.y}\n            L${d.update.x + L3.x} ${d.update.y + d.update.height + L3.y} Z`);\n        }\n\n        let styleVal = style.value;\n        if (typeof styleVal === 'function') {\n            const currentStyle = pathElement.style(style.type);\n            styleVal = styleVal(currentStyle);\n        }\n        pathElement.style(style.type, styleVal);\n        appendElement(mountPoint, pathElement.node());\n    }\n\n    removeOverlayPath (data, style) {\n        const currentPath = this._overlayPath[data.rowId];\n        if (currentPath) {\n            currentPath.node().removeAttribute('style');\n            Object.keys(style).forEach(s => currentPath.style(s, style[s]));\n            currentPath.style('fill-opacity', 0);\n\n            // Apply the path shape get the correct path position\n            currentPath.attr('d', d => `M ${d.update.x} ${d.update.y}\n            L ${d.update.x + d.update.width} ${d.update.y}\n            L ${d.update.x + d.update.width} ${d.update.y + d.update.height}\n            L${d.update.x} ${d.update.y + d.update.height} Z`);\n        }\n    }\n\n    getBoundBoxes () {\n        const points = this._points.flat();\n\n        return points.map((point) => {\n            const { x, y, width, height } = point.update;\n            const data = point.data;\n            return {\n                minX: x,\n                maxX: x + width,\n                minY: y,\n                maxY: y + height,\n                data,\n                point\n            };\n        });\n    }\n};\n\n","import { mix } from 'muze-utils';\nimport { BaseLayer } from '../../base-layer';\nimport { BAR_LAYER } from '../../enums/constants';\nimport { BarLayerMixin } from './bar-mixin';\nimport { BaseLayerMixin } from '../../base-layer/base-mixin';\nimport './styles.scss';\n\n/**\n * Bar layer creates rectangle marks. The mark type of this layer is ```bar```. This layer can be used\n * to create stacked or grouped bars, range bars, heatmap plots and also reference bands by using\n * the encoding properties.\n *\n * @public\n *\n * @class\n * @module BarLayer\n * @extends BaseLayer\n */\nexport default class BarLayer extends mix(BaseLayer).with(BaseLayerMixin, BarLayerMixin) {\n    static formalName () {\n        return BAR_LAYER;\n    }\n}\n","import { transformColor } from 'muze-utils';\nimport { CLASSPREFIX } from '../../enums/constants';\n\nexport const defaultConfig = {\n    defClassName: 'layer-tick',\n    className: '',\n    classPrefix: CLASSPREFIX,\n    nearestPointThreshold: 10,\n    interaction: {\n        fade: {\n            style: {\n                stroke: (rgbaValues, data, apply) => transformColor(rgbaValues, {\n                    l: +15\n                }, data, apply).color\n            }\n        },\n        focus: {\n            style: {\n                stroke: (rgbaValues, data, apply) => transformColor(rgbaValues, {\n                    l: +15\n                }, data, apply).color\n            }\n        }\n    },\n    innerPadding: 0.1,\n    transform: {\n        type: 'identity'\n    },\n    transition: {\n        effect: 'cubic',\n        duration: 1000\n    },\n    interpolate: 'linear',\n    encoding: {\n        color: { },\n        x: {},\n        y: {},\n        x0: {},\n        y0: {},\n        radius: {},\n        radius0: {},\n        angle: {},\n        angle0: {},\n        strokeOpacity: {\n            value: 0.5\n        },\n        fillOpacity: {\n            value: 0.5\n        }\n    },\n    states: {\n        highlight: {\n            className: `${CLASSPREFIX}-layer-tick-highlight`\n        },\n        fadeout: {\n            className: `${CLASSPREFIX}-layer-tick-fadeout`\n        },\n        selected: {\n            className: `${CLASSPREFIX}-layer-tick-selected`\n        }\n    }\n};\n\n","import {\n    selectElement,\n    Symbols,\n    pathInterpolators,\n    makeElement\n} from 'muze-utils';\n\nconst line = Symbols.line;\n\n/**\n * Draws ticks by using d3 selection\n * @param  {Object} params Contains container element and points\n * @return {Selection} Ticks Selection\n */\nexport default /* istanbul ignore next */ (params) => {\n    const { points, container, keyFn, className, interpolate, layer, transition } = params;\n    const { disabled } = transition;\n\n    const mount = selectElement(container);\n    const graphicElems = layer._graphicElems;\n    mount.attr('class', className);\n\n    return makeElement(mount, 'g', points, null, {\n        enter: (group, d) => {\n            const enter = d.enter || {};\n            Object.entries(enter).forEach(attr => (!isNaN(attr[1]) && group.attr(attr[0], attr[1])));\n        },\n        update: (group, d) => {\n            const pathElem = makeElement(group, 'path', [1]);\n            graphicElems[d.rowId] = group;\n            const { update, style } = d;\n            group.attr('class', className);\n            group.classed(d.className, true);\n\n            const x0 = update.x0 !== undefined ? update.x0 : update.x;\n            const y0 = update.y0 !== undefined ? update.y0 : update.y;\n            const curveInterpolatorFn = pathInterpolators[interpolate];\n            const linepath = line()\n            .curve(curveInterpolatorFn)\n            .x(e => e[0])\n            .y(e => e[1]);\n\n            d.className && group.classed(d.className, true);\n            pathElem.attr('d', linepath([[update.x, update.y], [x0, y0]]));\n            if (!disabled) {\n                group = group.transition()\n                    .duration(transition.duration)\n                    .on('end', layer.registerAnimationDoneHook());\n            }\n            Object.entries(style).forEach(styleObj => group.style(styleObj[0], styleObj[1]));\n        },\n        exit: (exitGroup) => {\n            exitGroup.remove();\n        }\n    }, keyFn);\n};\n","import { FieldType, makeElement, appendElement } from 'muze-utils';\nimport { defaultConfig } from './default-config';\nimport { ENCODING } from '../../enums/constants';\nimport drawTicks from './renderer';\nimport './styles.scss';\nimport { positionPoints, getIndividualClassName,\n    getColorMetaInf, resolveEncodingValues, toCartesianCoordinates, attachDataToVoronoi } from '../../helpers';\nimport { strokeWidthPositionMap } from './helper';\n\nconst pointTranslators = {\n    polar: (data, config = {}, layerInst) => {\n        const axes = layerInst.axes();\n        let points = [];\n        const { radius: radiusAxis, angle: angleAxis, angle0: angle0Axis } = axes;\n        const measurement = layerInst.measurement();\n\n        const colorAxis = axes.color;\n        const angleV = {};\n        const angle0V = {};\n        for (let i = 0, len = data.length; i < len; i++) {\n            const d = data[i];\n            const color = colorAxis.getColor(d.color);\n            const angles = angleAxis.getScaleValue(d.angle);\n            !angleV[d.angle] && (angleV[d.angle] = 0);\n            const { startAngle, endAngle } = angles[angleV[d.angle]++];\n            const angles0 = angle0Axis.getScaleValue(d.angle0);\n            !angle0V[d.angle0] && (angle0V[d.angle0] = 0);\n            const { startAngle: startAngle0, endAngle: endAngle0 } = angles0[angle0V[d.angle0]++];\n            const radius = radiusAxis.getOuterRadius(d.radius);\n            const angle = (startAngle + endAngle) / 2;\n            const angle0 = (startAngle0 + endAngle0) / 2;\n            const resolvedVal = resolveEncodingValues({\n                values: {\n                    radius,\n                    radius0: radiusAxis.getInnerRadius(d.radius0),\n                    color,\n                    angle,\n                    angle0,\n                    startAngle,\n                    endAngle,\n                    startAngle0,\n                    endAngle0\n                },\n                data: d\n            }, i, data, layerInst);\n            const style = {\n                stroke: resolvedVal.color\n            };\n\n            const point = {\n                enter: {},\n                update: {\n                    radius: resolvedVal.radius,\n                    radius0: resolvedVal.radius0,\n                    angle: resolvedVal.angle,\n                    angle0: resolvedVal.angle0\n                },\n                style,\n                source: d.source,\n                rowId: d.rowId,\n                data: d,\n                meta: { ...{ layerId: layerInst.id() }, ...getColorMetaInf(style) }\n            };\n            point.className = getIndividualClassName(d, i, data, layerInst);\n            points.push(point);\n        }\n        points = toCartesianCoordinates(positionPoints(layerInst, points), measurement, true);\n        return points;\n    },\n    cartesian: (data, config = {}, layerInst) => {\n        const axes = layerInst.axes();\n        let points = [];\n        const { x: xAxis, y: yAxis } = axes;\n        const {\n                xField,\n                yField,\n                x0Field,\n                y0Field,\n                xFieldType,\n                yFieldType\n            } = layerInst.encodingFieldsInf();\n        const isXDim = xFieldType === FieldType.DIMENSION;\n        const isYDim = yFieldType === FieldType.DIMENSION;\n        const key = isXDim ? ENCODING.X : (isYDim ? ENCODING.Y : null);\n        const measurement = layerInst.measurement();\n        const colorAxis = axes.color;\n        const { x: offsetX, y: offsetY } = config.offset;\n        const { x: xSpan, y: ySpan } = config.span;\n        for (let i = 0, len = data.length; i < len; i++) {\n            let xPx;\n            let x0Px;\n            let y0Px;\n            let yPx;\n            const d = data[i];\n            const row = d.source;\n            if (xField) {\n                xPx = xAxis.getScaleValue(d.x) + offsetX;\n                x0Px = xPx + xSpan;\n            }\n\n            if (yField) {\n                yPx = yAxis.getScaleValue(d.y) + offsetY;\n                y0Px = yPx !== null ? yPx + ySpan : null;\n            }\n\n            if (!xField) {\n                xPx = 0;\n                x0Px = measurement.width;\n                if (!isNaN(yPx)) {\n                    yPx += ySpan / 2;\n                    y0Px = yPx;\n                }\n            }\n\n            if (!yField) {\n                yPx = 0;\n                y0Px = measurement.height;\n                x0Px = xPx += xSpan / 2;\n            }\n\n            if (x0Field) {\n                x0Px = xAxis.getScaleValue(d.x0) + xSpan;\n                yPx += ySpan / 2;\n                y0Px -= ySpan / 2;\n            }\n\n            if (y0Field) {\n                y0Px = yAxis.getScaleValue(d.y0) + ySpan;\n                xPx += xSpan / 2;\n                x0Px -= xSpan / 2;\n            }\n            const color = colorAxis.getColor(d.color);\n            const resolvedEncodings = resolveEncodingValues({\n                values: {\n                    x: xPx,\n                    y: yPx,\n                    x0: x0Px,\n                    y0: y0Px,\n                    color\n                },\n                data: d\n            }, i, data, layerInst);\n            const style = {\n                stroke: resolvedEncodings.color\n            };\n\n            if (!isNaN(xPx) && !isNaN(yPx)) {\n                const point = {\n                    enter: {},\n                    update: {\n                        x: resolvedEncodings.x,\n                        y: resolvedEncodings.y,\n                        x0: resolvedEncodings.x0,\n                        y0: resolvedEncodings.y0\n                    },\n                    style,\n                    source: row,\n                    rowId: d.rowId,\n                    data: d.dataObj,\n                    meta: { ...{ layerId: layerInst.id() }, ...getColorMetaInf(style) }\n                };\n                point.className = getIndividualClassName(d, i, data, layerInst);\n                points.push(point);\n                layerInst.cachePoint(d[key], point);\n            }\n        }\n        points = positionPoints(layerInst, points);\n        return points;\n    }\n};\n\n/**\n * This layer is used to create small lines. The orientation of the line is determined by the positional\n * encoding properties x0 and y0. The mark type of the layer is ```tick```.\n *\n * @public\n *\n * @class\n * @module TickLayer\n * @extends BaseLayer\n */\nexport const TickLayerMixin = superclass => class extends superclass {\n    static defaultConfig () {\n        return defaultConfig;\n    }\n\n    static formalName () {\n        return 'tick';\n    }\n\n    static drawFn () {\n        return drawTicks;\n    }\n\n    elemType () {\n        return 'path';\n    }\n\n    /**\n    * Generates an array of objects containing x, y, width and height of the points from the data\n    * @param  {Array.<Array>} data Data Array\n    * @param  {Object} encoding  Config\n    * @param  {Object} axes     Axes object\n    * @return {Array.<Object>}  Array of points\n    */\n    translatePoints (data, config) {\n        return pointTranslators[this.coord()](data, config, this);\n    }\n\n    attachDataToVoronoi (points) {\n        attachDataToVoronoi(this._voronoi, points, (d) => {\n            const { x, x0, y, y0 } = d.update;\n\n            return {\n                x: x + (x0 - x) / 2,\n                y: y + (y0 - y) / 2\n            };\n        });\n    }\n\n    getMeasurementConfig (offsetX, offsetY, widthSpan, heightSpan) {\n        return {\n            offset: {\n                x: (offsetX || 0),\n                y: (offsetY || 0)\n            },\n            span: {\n                x: widthSpan,\n                y: heightSpan\n            }\n        };\n    }\n\n    addOverlayPath (refElement, data, style, strokePosition) {\n        let pathElement;\n\n        if (this._overlayPath[data.rowId]) {\n            pathElement = this._overlayPath[data.rowId];\n        } else {\n            pathElement = makeElement(refElement, 'path', [data.update], null, {}, d => `${d.x} ${data.rowId}`);\n            pathElement.style('fill', 'none');\n            pathElement.style('fill-opacity', 0);\n            pathElement.attr('id', data.rowId);\n            this._overlayPath[data.rowId] = pathElement;\n        }\n\n        let offsetM = { x: 0, y: 0 };\n        let offsetL = { x: 0, y: 0 };\n\n        if (style.type === 'stroke-width') {\n            const { L, M } = strokeWidthPositionMap({\n                width: parseInt(style.value, 10),\n                position: strokePosition\n            });\n            offsetM = M;\n            offsetL = L;\n        }\n\n        pathElement.attr('d', (d) => {\n            if (d.update) {\n                return `M ${d.update.x + offsetM.x} ${d.update.y + offsetM.y}\n                    L ${d.update.x0 + offsetL.x} ${d.update.y0 + offsetL.y}`;\n            }\n            return `M ${d.x + offsetM.x} ${d.y + offsetM.y}\n                L ${d.x0 + offsetL.x} ${d.y0 + offsetL.y}`;\n        });\n\n        let styleVal = style.value;\n        if (typeof styleVal === 'function') {\n            const currentStyle = pathElement.style(style.type);\n            styleVal = styleVal(currentStyle);\n        }\n        pathElement.style(style.type, styleVal);\n        appendElement(refElement, pathElement.node());\n    }\n\n    removeOverlayPath (data, style) {\n        const currentPath = this._overlayPath[data.rowId];\n        if (currentPath) {\n            currentPath.node().removeAttribute('style');\n            Object.keys(style).forEach(s => currentPath.style(s, style[s]));\n            currentPath.style('fill-opacity', 0);\n        }\n    }\n};\n","export const strokeWidthPositionMap = ({ width, position = 'center' }) => {\n    const offset = width ? width / 2 : 1;\n    const strokeWidthWithOffsetMap = {\n        center: {\n            M: { x: 0, y: 0 },\n            L: { x: 0, y: 0 }\n        },\n        inside: {\n            M: { x: +offset, y: +offset },\n            L: { x: -offset, y: +offset }\n        },\n        outside: {\n            M: { x: -offset, y: -offset },\n            L: { x: +offset, y: -offset }\n        }\n    };\n    return strokeWidthWithOffsetMap[position];\n};\n","import { mix } from 'muze-utils';\nimport { PointLayerMixin } from '../point';\nimport { BaseLayerMixin, BaseLayer } from '../../base-layer';\nimport { TickLayerMixin } from './tick-mixin';\n\n/**\n * This layer is used to create small lines. The orientation of the line is determined by the positional\n * encoding properties x0 and y0. The mark type of the layer is ```tick```.\n *\n * @public\n *\n * @class\n * @module TickLayer\n * @extends BaseLayer\n */\nexport default class TickLayer extends mix(BaseLayer).with(BaseLayerMixin, PointLayerMixin, TickLayerMixin) {\n    static formalName () {\n        return 'tick';\n    }\n}\n","export const AREA_LAYER = 'area';\nexport const ARC_LAYER = 'arc';\nexport const LINE_LAYER = 'line';\nexport const TEXT_LAYER = 'text';\nexport const POINT_LAYER = 'point';\nexport const BAR_LAYER = 'bar';\nexport const TICK_LAYER = 'tick';\nexport const SIMPLE_LAYER = 'simple';\nexport const BASE_LAYER = 'base';\n","import { isSimpleObject, mergeRecursive, getObjProp } from 'muze-utils';\n\nconst parseLayerDefinition = (sink, definition, layerDef, layerType) => {\n    for (const key in definition) {\n        if (Object.hasOwnProperty.call(definition, key)) {\n            let strs;\n            let propValue;\n            const def = definition[key];\n            if (isSimpleObject(def)) {\n                sink[key] = {};\n                parseLayerDefinition(sink[key], def, layerDef, layerType);\n            } else if (typeof def === 'string' && (strs = def.split('.')) && strs[0] === layerType) {\n                propValue = getObjProp(layerDef, ...strs.slice(1, strs.length));\n                if (propValue !== undefined) {\n                    sink[key] = propValue;\n                }\n            } else {\n                sink[key] = def;\n            }\n        }\n    }\n};\n\nconst sanitizeEncoding = (encoding) => {\n    // Create object for each encoding value if encoding value is a string\n    for (const key in encoding) {\n        if (typeof encoding[key] === 'string') {\n            encoding[key] = {\n                field: encoding[key]\n            };\n        }\n    }\n};\n\n/**\n * Layer Factory creates layers based on the layer type. All types of layers needs to register in\n * the layer factory. For getting a layer instance, getLayer method needs to invoked with the\n * layerType and other arguments. It also registers the definition of composite layers.\n *\n * @public\n *\n * @module LayerFactory\n */\nconst layerFactory = (() => {\n    const compositeLayers = {};\n    const factoryObj = {\n        setLayerRegistry: (reg) => {\n            factoryObj._layerRegistry = reg;\n        },\n        getSerializedConf: (mark, layerDef) => {\n            let serializedDefs;\n            const defs = compositeLayers[mark];\n            const newConf = mergeRecursive({}, layerDef);\n\n                // If it is a composite layer then resolve all the definitions of each unit layer\n            if (defs) {\n                serializedDefs = defs.map((unitLayerDef) => {\n                    const sDef = {};\n                    parseLayerDefinition(sDef, unitLayerDef, newConf, mark);\n                    sanitizeEncoding(sDef.encoding);\n                    return sDef;\n                });\n            } else {\n                const encoding = newConf.encoding;\n                // Create object for each encoding value if encoding value is a string\n                sanitizeEncoding(encoding);\n                serializedDefs = newConf;\n            }\n\n            return serializedDefs;\n        },\n        getLayerInstance: (layerDef, ...params) => {\n            const layerRegistry = factoryObj._layerRegistry;\n            layerDef = !(layerDef instanceof Array) ? [layerDef] : layerDef;\n            const instances = layerDef.map((layerObj) => {\n                const layerConstructor = layerRegistry[layerObj.mark];\n                return layerConstructor.create(...params);\n            });\n            return instances.length === 1 ? instances[0] : instances;\n        },\n        getLayerClass: mark => factoryObj._layerRegistry[mark],\n        /**\n         * Registers a new composite layer definition in the layer factory.\n         *\n         * @public\n         *\n         * @param {string} layerType Mark type of the new composite layer.\n         * @param {Array} layerDefs Layer definitions of the composite layer.\n         */\n        composeLayers: (layerType, layerDefs) => {\n            compositeLayers[layerType] = layerDefs;\n        },\n        sanitizeLayerConfig: (layerDef) => {\n            const newConf = mergeRecursive({}, layerDef);\n            sanitizeEncoding(newConf.encoding);\n            return newConf;\n        }\n    };\n    return factoryObj;\n})();\n\nexport default layerFactory;\n","import layerFactory from './layer-factory';\n\nexport default layerFactory;\n","import { AreaLayer } from './layers/area';\nimport { ArcLayer } from './layers/arc';\nimport { LineLayer } from './layers/line';\nimport { TextLayer } from './layers/text';\nimport { PointLayer } from './layers/point';\nimport { BarLayer } from './layers/bar';\nimport { BaseLayer } from './base-layer';\nimport * as LAYER_TYPES from './enums/layer-types';\nimport { TickLayer } from './layers/tick';\n\nexport const DEFAULT_LAYERS = {\n    [LAYER_TYPES.AREA_LAYER]: AreaLayer,\n    [LAYER_TYPES.ARC_LAYER]: ArcLayer,\n    [LAYER_TYPES.LINE_LAYER]: LineLayer,\n    [LAYER_TYPES.TEXT_LAYER]: TextLayer,\n    [LAYER_TYPES.POINT_LAYER]: PointLayer,\n    [LAYER_TYPES.TICK_LAYER]: TickLayer,\n    [LAYER_TYPES.BAR_LAYER]: BarLayer,\n    [LAYER_TYPES.BASE_LAYER]: BaseLayer\n};\n","import { DEFAULT_LAYERS } from './defaults';\n\nexport default (layers = DEFAULT_LAYERS) => {\n    const reg = Object.assign({}, layers);\n    const regObj = {\n        register: (def) => {\n            const key = def.formalName();\n\n            reg[key] = def;\n            return regObj;\n        },\n        get: () => reg\n    };\n    return regObj;\n};\n","import { AreaLayer, AreaLayerMixin } from './layers/area';\nimport { ArcLayer, ArcLayerMixin } from './layers/arc';\nimport { LineLayer, LineLayerMixin } from './layers/line';\nimport { TextLayer, TextLayerMixin } from './layers/text';\nimport { PointLayer, PointLayerMixin } from './layers/point';\nimport { BarLayer, BarLayerMixin } from './layers/bar';\nimport { TickLayer, TickLayerMixin } from './layers/tick';\nimport { SimpleLayer } from './simple-layer';\nimport { BaseLayer, BaseLayerMixin } from './base-layer';\nimport * as LAYER_TYPES from './enums/layer-types';\nimport layerFactory from './layer-factory';\nimport layerRegistry from './layer-registry';\nimport { ENCODING } from './enums/constants';\nimport * as pointLayerHelpers from './layers/point/helper';\nimport * as commonHelpers from './helpers';\nimport * as enums from './enums';\n\nconst helpers = Object.assign(commonHelpers, {\n    pointLayerHelpers\n});\n\nconst layerMixins = {\n    BarLayerMixin,\n    BaseLayerMixin,\n    LineLayerMixin,\n    AreaLayerMixin,\n    PointLayerMixin,\n    TextLayerMixin,\n    TickLayerMixin,\n    ArcLayerMixin\n};\n\nexport {\n    BaseLayer,\n    BarLayer,\n    LineLayer,\n    AreaLayer,\n    PointLayer,\n    ArcLayer,\n    TextLayer,\n    TickLayer,\n    layerFactory,\n    SimpleLayer,\n    layerRegistry,\n    LAYER_TYPES,\n    ENCODING,\n    helpers,\n    enums,\n    layerMixins\n};\n","import {\n    FieldType,\n    getDependencyOrder,\n    getObjProp,\n    defaultValue,\n    objectIterator,\n    unionDomain,\n    makeElement,\n    DimensionSubtype,\n    toArray,\n    MeasureSubtype,\n    getNearestValue,\n    RTree\n} from 'muze-utils';\nimport { layerFactory, ENCODING } from '@chartshq/visual-layer';\n\nexport const getDimensionMeasureMap = (layers, fieldsConfig) => {\n    const retinalEncodingsAndMeasures = {};\n\n    layers.forEach((layer) => {\n        const {\n            colorField,\n            sizeField,\n            shapeField,\n            xField,\n            yField\n        } = layer.encodingFieldsInf();\n        const measures = [xField, yField].filter(field => fieldsConfig[field] && fieldsConfig[field].def.type ===\n            FieldType.MEASURE);\n        [colorField, sizeField, shapeField].forEach((field) => {\n            if (getObjProp(fieldsConfig, field, 'def', 'type') === FieldType.DIMENSION && measures.length) {\n                !retinalEncodingsAndMeasures[field] && (retinalEncodingsAndMeasures[field] = []);\n                retinalEncodingsAndMeasures[field].push(...measures);\n            }\n        });\n    });\n\n    for (const key in retinalEncodingsAndMeasures) {\n        if ({}.hasOwnProperty.call(retinalEncodingsAndMeasures, key)) {\n            retinalEncodingsAndMeasures[key] = [...new Set(retinalEncodingsAndMeasures[key])];\n        }\n    }\n    return retinalEncodingsAndMeasures;\n};\n\nexport const transformDataModels = (transform, dataModel) => {\n    const dataModels = {};\n    for (const key in transform) {\n        if ({}.hasOwnProperty.call(transform, key)) {\n            const transformVal = transform[key];\n            dataModels[key] = transformVal(dataModel);\n        }\n    }\n\n    return dataModels;\n};\n\nexport const getLayerFromDef = (context, definition, existingLayer, namespaces) => {\n    let instances = existingLayer;\n    const dependencies = context._dependencies;\n    const metaInf = context.metaInf();\n    if (!existingLayer) {\n        instances = layerFactory.getLayerInstance(definition);\n        toArray(instances).forEach((inst, i) => {\n            inst.metaInf({\n                unitRowIndex: metaInf.rowIndex,\n                unitColIndex: metaInf.colIndex,\n                namespace: namespaces[i],\n                parentNamespace: metaInf.namespace\n            })\n                .dependencies(dependencies)\n                .store(context.store());\n        });\n    }\n    const layers = {};\n    const instanceArr = toArray(instances);\n    definition = toArray(definition);\n    definition.reduce((acc, def, idx) => {\n        const instance = instanceArr[idx];\n        instance.coord(context.coord());\n        instance.config(def);\n        instance.valueParser(context.valueParser());\n        instance.dataProps({\n            timeDiffs: context._timeDiffs\n        });\n        if (def.name) {\n            instance.alias(def.name);\n        }\n        layers[instance.alias()] = instance;\n        return acc;\n    }, {});\n    return layers;\n};\n\nexport const resolveEncodingTransform = (layerInst, store) => {\n    const encodingTransform = layerInst.config().encodingTransform || {};\n    const resolvable = encodingTransform.resolvable;\n    let depArr = [];\n    if (resolvable) {\n        const resolved = resolvable(store);\n        depArr = resolved.depArr;\n        layerInst.encodingTransform(resolved.fn);\n    } else if (encodingTransform instanceof Function) {\n        layerInst.encodingTransform(encodingTransform);\n    }\n    return depArr;\n};\n\nexport const sanitizeLayerDef = (layerDefs) => {\n    const sanitizedDefs = [];\n    layerDefs.forEach((layerDef, i) => {\n        const def = layerDef.def;\n        const mark = layerDef.mark;\n        if (!def) {\n            const sConf = layerFactory.getSerializedConf(layerDef.mark, layerDef);\n            if (!sConf.name) {\n                sConf.name = `${mark}-${i}`;\n            }\n            sanitizedDefs.push({\n                mark: layerDef.mark,\n                def: sConf\n            });\n        } else {\n            if (!def.name) {\n                def.name = `${mark}-${i}`;\n            }\n            sanitizedDefs.push(layerDef);\n        }\n    });\n    return sanitizedDefs;\n};\n\nexport const attachDataToLayers = (layers, dm, transformedDataModels) => {\n    layers.forEach((layer) => {\n        const dataSource = layer.config().source;\n        const dataModel = dataSource instanceof Function ? dataSource(dm) :\n            (transformedDataModels[dataSource] || dm);\n        layer.data(dataModel);\n    });\n};\n\nexport const attachAxisToLayers = (axes, layers, layerAxisIndex) => {\n    layers.forEach((layer) => {\n        const layerId = layer.id();\n        const axesObj = {};\n\n        objectIterator(axes, (key) => {\n            const axisInf = layerAxisIndex[layerId];\n            if (axisInf) {\n                const axisArr = axes[key] || [];\n                const axisIndex = axisInf[key] >= 0 ? axisInf[key] : axisArr.length - 1;\n                axes[key] && (axesObj[key] = defaultValue(axes[key][axisIndex]));\n            }\n        });\n        Object.keys(axesObj).length && layer.axes(axesObj);\n    });\n};\n\nconst { X, Y, RADIUS, ANGLE, ANGLE0, RADIUS0 } = ENCODING;\n\nexport const getLayerAxisIndex = (layers, fields) => {\n    const layerAxisIndex = {};\n    layers.forEach((layer) => {\n        const { axis, encoding } = layer.config();\n        const id = layer.id();\n        [X, Y, ANGLE, ANGLE0, RADIUS].forEach((type) => {\n            let index;\n            const specificField = getObjProp(encoding, type, 'field');\n            const encodingField = type === RADIUS ? defaultValue(specificField, getObjProp(encoding, RADIUS0, 'field'))\n                : getObjProp(encoding, type, 'field');\n            const field = defaultValue(getObjProp(axis, type), encodingField);\n            if (fields[type] && fields[type].length) {\n                index = fields[type].findIndex(fieldInst => fieldInst.getMembers().indexOf(field) !== -1);\n            } else {\n                index = 0;\n            }\n            !layerAxisIndex[id] && (layerAxisIndex[id] = {});\n            layerAxisIndex[id][type] = index;\n        });\n    });\n    return layerAxisIndex;\n};\n\nconst getValidDomain = (domain, domain1, encodingType, fieldType) => {\n    if (encodingType === ANGLE || encodingType === ANGLE0) {\n        return domain.concat(domain1.filter(d => domain.indexOf(d) === -1));\n    }\n    return unionDomain([domain, domain1], fieldType);\n};\n\nexport const unionDomainFromLayers = (layers, axisFields, layerAxisIndex, fieldsConfig) => {\n    let domains = {};\n    layers = layers.filter(layer => layer.getDataDomain() !== null);\n    layers.forEach((layer) => {\n        let domainValues = {};\n        const config = layer.config();\n        // const encoding = config.encoding;\n        const layerDomain = layer.getDataDomain();\n        const layerId = layer.id();\n\n        if (layerDomain !== null && config.calculateDomain !== false) {\n            domainValues = Object.entries(layerDomain);\n            domains = domainValues.reduce((fieldDomain, domain) => {\n                const encodingType = domain[0];\n                const axisIndex = layerAxisIndex[layerId][encodingType];\n                const field = getObjProp(axisFields, encodingType, axisIndex);\n                !fieldDomain[encodingType] && (fieldDomain[encodingType] = {});\n                const encodingDomain = fieldDomain[encodingType];\n                if (field) {\n                    const fieldStr = `${field}`;\n                    encodingDomain[fieldStr] = encodingDomain[fieldStr] || [];\n                    encodingDomain[fieldStr] = getValidDomain(encodingDomain[fieldStr],\n                        domain[1], encodingType, fieldsConfig[field.getMembers()[0]].def.subtype);\n                }\n                return fieldDomain;\n            }, domains);\n        }\n    });\n    return domains;\n};\n\nexport const renderLayers = (context, container, layers, measurement) => {\n    context._lifeCycleManager.notify({ client: layers, action: 'beforedraw', formalName: 'layer' });\n    const config = context.config();\n    const classPrefix = config.classPrefix;\n    const orderedLayers = layers.sort((a, b) => a.config().order - b.config().order);\n    const layerParentGroup = makeElement(container, 'g', [1], `${classPrefix}-layer-group`);\n    const layerDepOrder = getDependencyOrder(context._layerDepOrder);\n    const groups = {};\n    makeElement(layerParentGroup, 'g', orderedLayers, null, {\n        update: (group, layer) => {\n            groups[layer.alias()] = {\n                group,\n                layer\n            };\n        }\n    });\n\n    const layerSeq = layerDepOrder.map(name => groups[name]).filter(d => d !== undefined);\n    layerSeq.forEach((o) => {\n        const layer = o.layer;\n        const group = o.group;\n        layer.measurement(measurement);\n        layer.dataProps({\n            timeDiffs: context._timeDiffs\n        });\n        layer.config().render !== false && layer.mount(group.node());\n    });\n    return this;\n};\n\nexport const getNearestDimensionalValue = (context, position) => {\n    const fields = context.fields();\n    if (!fields.x.length || !fields.y.length) {\n        return null;\n    }\n    const data = context.data();\n    const axes = context.axes();\n    const fieldsConfig = data.getFieldsConfig();\n    const xField = getObjProp(fields, 'x', 0).getMembers()[0];\n    const yField = getObjProp(fields, 'y', 0).getMembers()[0];\n    const xFieldType = fieldsConfig[xField].def.subtype;\n    const yFieldType = fieldsConfig[yField].def.subtype;\n\n    const entryVal = [['x', xFieldType, xField], ['y', yFieldType, yField]].find(entry =>\n        entry[1] === DimensionSubtype.CATEGORICAL || entry[1] === DimensionSubtype.TEMPORAL);\n\n    if (!entryVal || (xFieldType !== MeasureSubtype.CONTINUOUS && yFieldType !== MeasureSubtype.CONTINUOUS)) {\n        return null;\n    }\n    const field = entryVal[2];\n    const index = fieldsConfig[field].index;\n    let key = axes[entryVal[0]][0].invert(position[entryVal[0]]);\n    if (entryVal[1] === DimensionSubtype.TEMPORAL) {\n        const filterData = [...new Set(data.getData().data.map(d => d[index]))];\n        key = getNearestValue(filterData, key);\n    }\n\n    return key !== undefined ? [[field], [key]] : null;\n};\n\nexport const getLayersBy = (layers, searchBy, value) => layers.filter((layer) => {\n    const name = searchBy === 'type' ? layer.constructor.formalName() : layer.alias();\n    return name === value;\n});\n\nexport const removeLayersBy = (layers, searchBy, value) => {\n    layers.filter((inst) => {\n        const name = searchBy === 'type' ? inst.config().mark : inst.alias();\n        if (name === value) {\n            inst.remove();\n            return false;\n        }\n        return true;\n    });\n};\n\nexport const createSideEffectGroup = (container, className) => makeElement(container, 'g', [1], className).node();\n\nexport const createRenderPromise = (unit) => {\n    const renderedPromise = unit._renderedPromise;\n    renderedPromise.then(() => {\n        unit._renderedPromise = new Promise((resolve) => {\n            unit._renderedResolve = resolve;\n        });\n        createRenderPromise(unit);\n    });\n};\n\nexport const getRadiusRange = (width, height, config = {}) => {\n    const {\n        innerRadius,\n        outerRadius\n    } = config;\n\n    return [innerRadius || 0, outerRadius || Math.min(height,\n        width) / 2];\n};\n\nexport const setAxisRange = (context) => {\n    const axes = context.axes();\n    const { radius: radiusAxes } = axes;\n    if (radiusAxes) {\n        radiusAxes.forEach((axis) => {\n            axis.range(getRadiusRange(context.width(), context.height()));\n        });\n    }\n};\n\nexport const createRTree = (context) => {\n    const elements = [].concat(...context.layers().filter(layer => layer.config().interactive !== false)\n        .map((layer) => {\n            const points = layer.getBoundBoxes();\n            return points;\n        })).flat().filter(d => d !== null);\n\n    const rtree = new RTree();\n    rtree.load(elements);\n    return rtree;\n};\n","export const CONFIG = 'config';\nexport const DATA = 'data';\nexport const AXES = 'axes';\nexport const LAYERDEFS = 'layerDef';\nexport const WIDTH = 'width';\nexport const HEIGHT = 'height';\nexport const MOUNT = 'mount';\nexport const TRANSFORM = 'transform';\nexport const TRANSFORMEDDATA = 'transformedData';\nexport const DATADOMAIN = 'dataDomain';\nexport const FIELDS = 'fields';\nexport const LAYERAXISINDEX = 'layerAxisIndex';\nexport const LAYERS = 'layers';\nexport const DOMAIN = 'domain';\n\n","export const CLASSPREFIX = 'muze';\nexport const IDFIELD = '__id__';\nexport const GRID_LINE_PARENT_GROUP_CLASS = 'grid-lines';\nexport const GRID_BAND_PARENT_GROUP_CLASS = 'grid-bands';\nexport const GRID_PARENT_GROUP = 'grid-parent-group';\nexport const BAND = 'band';\nexport const TICK = 'tick';\nexport const GRID_BAND = 'gridBands';\nexport const GRID_LINE = 'gridLines';\nexport const CONSOLIDATED = 'consolidated';\nexport const FRAGMENTED = 'fragmented';\nexport const FACET_BY_FIELDS = 'facetByFields';\nexport const RETINAL_FIELDS = 'retinalFields';\nexport const PARENT_ALIAS = 'parentAlias';\nexport const LAYERS = 'layers';\nexport const CACHED_DATA = 'cachedData';\nexport const STORE = 'store';\n","export const DRAG = 'drag';\nexport const HOVER = 'hover';\nexport const SELECTIONDRAG = 'selectiondrag';\nexport const CLICK = 'click';\nexport const LONGTOUCH = 'longtouch';\nexport const TOUCHDRAG = 'touchdrag';\nexport const ALL_ACTIONS = '*';\n","const SELECTION_NEW_ENTRY = 1;\nconst SELECTION_NEW_EXIT = -1;\nconst SELECTION_NULL = 0;\nconst SELECTION_OLD_ENTRY = 2;\nconst SELECTION_OLD_EXIT = -2;\n\nexport {\n    SELECTION_NEW_ENTRY,\n    SELECTION_NEW_EXIT,\n    SELECTION_NULL,\n    SELECTION_OLD_ENTRY,\n    SELECTION_OLD_EXIT\n};\n","import SelectionSet from './selection-set';\n\nexport default SelectionSet;\n","import { ReservedFields } from 'muze-utils';\nimport {\n    SELECTION_NEW_ENTRY, SELECTION_NEW_EXIT, SELECTION_NULL, SELECTION_OLD_ENTRY, SELECTION_OLD_EXIT\n} from '../enums/selection';\n/* eslint-disable guard-for-in */\n\n/**\n * This component is used to keep track of the row tuples of the data which gets added and removed. This keeps\n * information of which rows are in previous and new entry set and previous and new exit set. This is initialized by\n * {@link Firebolt}.\n *\n * @public\n *\n * @class SelectionSet\n */\nclass SelectionSet {\n    /**\n     * Creates an instance of selection set\n     *\n     * @param {Array.<string>} completeSet Set of unique ids.\n     */\n    constructor ({ keys, fields }, _volatile) {\n        this.completeSet = keys;\n        this._set = {};\n        this._uidMap = {};\n        this._measureNames = {};\n        this._dimVals = {};\n\n        for (const key in keys) {\n            this._set[key] = SELECTION_NULL;\n            this._uidMap[key] = keys[key].uid;\n            this._measureNames[key] = keys[key].measureNames;\n            this._dimVals[key] = keys[key].dims;\n        }\n        this._fields = fields;\n        this._fieldIndices = fields.reduce((acc, v, i) => {\n            acc[v] = i;\n            return acc;\n        }, {});\n        this._volatile = _volatile;\n        this._completeSetCount = Object.keys(keys).length;\n        this._resetted = true;\n    }\n\n    /**\n     * Adds a set of ids to the selection set. This also moves the other rows to exit set.\n     *\n     * @public\n     * @param {Array.<number|string>} ids Array of unique ids.\n     *\n     * @return {SelectionSet} Instance of selection set.\n     */\n    add (ids) {\n        this._resetted = false;\n\n        const set = this._set;\n        // from exitset to entryset\n        ids.forEach((i) => {\n            if (i in set) {\n                set[i] = SELECTION_NEW_ENTRY;\n            }\n        });\n\n        for (const key in set) {\n            if (set[key] !== SELECTION_NEW_ENTRY && set[key] !== SELECTION_OLD_ENTRY) {\n                set[key] = set[key] < 0 ? SELECTION_OLD_EXIT : SELECTION_NEW_EXIT;\n            }\n        }\n        return this;\n    }\n\n    /**\n     * Adds an array of ids to the old entry set.\n     *\n     * @param {Array.<number|string>} ids Array of unique ids\n     *\n     * @return {SelectionSet} Instance of selection set.\n     */\n    update (ids) {\n        const set = this._set;\n        // from exitset to entryset\n        ids.forEach((i) => {\n            if (i in set) {\n                set[i] = SELECTION_OLD_ENTRY;\n            }\n        });\n\n        return this;\n    }\n\n    /**\n     * Moves all ids which in new entry set  to old entry set.\n     *\n     * @public\n     * @param {Array.<number|string>} ids Array of unique ids\n     *\n     * @return {SelectionSet} Instance of selection set.\n     */\n    updateEntry () {\n        const set = this._set;\n\n        // from exitset to entryset\n        for (const key in set) {\n            set[key] = set[key] === SELECTION_NEW_ENTRY ? SELECTION_OLD_ENTRY : set[key];\n        }\n        return this;\n    }\n\n    /**\n     * Moves an array of ids which are in new exit set to old exit set.\n     *\n     * @public\n     *\n     * @param {Array.<number|string>} ids Array of unique ids.\n     *\n     * @return {SelectionSet} Instance of selection set.\n     */\n    updateExit () {\n        const set = this._set;\n        // from exitset to entryset\n        for (const key in set) {\n            set[key] = set[key] === SELECTION_NEW_EXIT ? SELECTION_OLD_EXIT : set[key];\n        }\n        return this;\n    }\n\n    /**\n     * Removes an array of ids from the selection set. It also moves the remaining row ids to entry set.\n     *\n     * @public\n     * @param {Array.<string>} ids Array of unique ids\n     *\n     * @return {SelectionSet}  Instance of selection set\n     */\n    remove (ids) {\n        this._resetted = false;\n\n        const set = this._set;\n        ids.forEach((i) => {\n            i in set && (set[i] = SELECTION_NEW_EXIT);\n        });\n\n        for (const key in set) {\n            if (set[key] !== SELECTION_NEW_EXIT && set[key] !== SELECTION_OLD_EXIT) {\n                set[key] = set[key] === 0 ? SELECTION_NEW_ENTRY : SELECTION_OLD_ENTRY;\n            }\n        }\n\n        return this;\n    }\n\n    getSets (config = {}) {\n        const set = this._set;\n        const uidMap = this._uidMap;\n        const retObj = {\n            entrySet: [[], []],\n            exitSet: [[], []],\n            mergedEnter: [],\n            mergedExit: [],\n            completeSet: []\n        };\n        const dimVals = this._dimVals;\n        const { keepDims, fields = [], keys = false } = config;\n        const measureNames = this._measureNames;\n\n        for (const key in set) {\n            const measureNamesArr = measureNames[key] || [];\n            let val;\n            if (keepDims) {\n                val = fields.map((field) => {\n                    if (field === ReservedFields.MEASURE_NAMES) {\n                        return measureNamesArr;\n                    } else if (field === ReservedFields.ROW_ID) {\n                        return uidMap[key];\n                    }\n                    return dimVals[key][this._fieldIndices[field]];\n                });\n            } else if (keys) {\n                val = key;\n            } else {\n                val = measureNamesArr.length ? [uidMap[key], measureNamesArr] : [uidMap[key]];\n            }\n\n            if (set[key] > 0) {\n                [SELECTION_OLD_ENTRY, SELECTION_NEW_ENTRY].forEach((v, i) => {\n                    if (set[key] === v) {\n                        retObj.entrySet[i].push(val);\n                    }\n                });\n                if (set[key] === SELECTION_OLD_ENTRY || set[key] === SELECTION_NEW_ENTRY) {\n                    retObj.mergedEnter.push(val);\n                }\n            } else if (set[key] < 0) {\n                [SELECTION_OLD_EXIT, SELECTION_NEW_EXIT].forEach((v, i) => {\n                    if (set[key] === v) {\n                        retObj.exitSet[i].push(val);\n                    }\n                });\n                if (set[key] === SELECTION_OLD_EXIT || set[key] === SELECTION_NEW_EXIT) {\n                    retObj.mergedExit.push(val);\n                }\n            }\n            retObj.completeSet.push(val);\n        }\n\n        return retObj;\n    }\n\n    /**\n     * Resets an array of ids in the selection set to initial state. It sets the value of every unique id value to\n     * null in the selection set which means they are neither in entry set nor in exit set. If no ids are passed,\n     * then it resets all the ids to null.\n     *\n     * @public\n     *\n     * @param {Array} ids Array of unique ids.\n     * @return {SelectionSet} Instance of selection set.\n     */\n    reset (ids) {\n        const set = this._set;\n        if (ids) {\n            ids.forEach((i) => {\n                i in set && (set[i] = SELECTION_NULL);\n            });\n        } else {\n            for (const key in set) {\n                set[key] = SELECTION_NULL;\n            }\n        }\n        this._resetted = true;\n        return this;\n    }\n\n    /**\n     * Gets the set of ids which are added in the selection set.\n     *\n     * @public\n     *\n     * @return {Array.<string>} Array of unique ids\n     */\n    getEntrySet () {\n        const set = this._set;\n        const addSet = [];\n\n        for (const key in set) {\n            set[key] === SELECTION_NEW_ENTRY && addSet.push(key);\n        }\n\n        return addSet;\n    }\n\n    /**\n     * Returns a set of unique ids which are already present in entry set.\n     *\n     * @public\n     * @param {Array} addSet Array of unique ids which are added\n     *\n     * @return {Array} Array of unique ids which are already in old entry set or new entry set\n     */\n    getExistingEntrySet (addSet) {\n        const set = this._set;\n        return addSet.filter(d => set[d] === SELECTION_NEW_ENTRY || set[d] === SELECTION_OLD_ENTRY);\n    }\n\n    /**\n     * Returns a set of unique ids which are already present in exit set.\n     *\n     * @public\n     * @param {Array} addSet Array of unique ids which are added\n     *\n     * @return {Array} Array of unique ids which are already in old exit set or new exit set\n     */\n    getExistingExitSet (removeSet) {\n        const set = this._set;\n        return removeSet.filter(d => set[d] === SELECTION_NEW_EXIT || set[d] === SELECTION_OLD_EXIT);\n    }\n\n    /**\n     * Gets the array of ids which are in the exit set.\n     *\n     * @public\n     * @return {Array.<string>} Array of unique ids\n     */\n    getExitSet () {\n        const set = this._set;\n        const removeSet = [];\n\n        for (const key in set) {\n            set[key] === SELECTION_NEW_EXIT && removeSet.push(key);\n        }\n        return removeSet;\n    }\n\n    /**\n     * Gets all the ids which are either in exit or entry set.\n     *\n     * @public\n     * @return {Array} Array of unique ids\n     */\n    getCompleteSet () {\n        const set = this._set;\n        const completeSet = [];\n\n        for (const key in set) {\n            completeSet.push(key);\n        }\n\n        return completeSet;\n    }\n\n    getCompleteSetCount () {\n        return this._completeSetCount;\n    }\n\n    resetted () {\n        return this._resetted;\n    }\n}\n\nexport default SelectionSet;\n","export const initializeSideEffects = (context, sideEffects) => {\n    const sideEffectsMap = context._sideEffects;\n    sideEffects = sideEffects instanceof Array ? sideEffects : Object.values(sideEffects);\n    sideEffects.forEach((SideEffect) => {\n        const formalName = SideEffect.formalName();\n        const target = SideEffect.target();\n        if (target === context.target() || target === 'all') {\n            const sideEffectInstance = sideEffectsMap[formalName];\n            sideEffectsMap[formalName] = sideEffectInstance || new SideEffect(context);\n        }\n    });\n    return sideEffectsMap;\n};\n\nexport const setSideEffectConfig = (sideEffects, config) => {\n    for (const key in sideEffects) {\n        const sideEffect = sideEffects[key];\n        const formalName = sideEffect.constructor.formalName();\n        const sideEffectConf = config[formalName];\n\n        sideEffectConf && sideEffect.config(sideEffectConf);\n    }\n};\n\nexport const initializeBehaviouralActions = (context, actions) => {\n    const dispatchableBehaviours = {};\n\n    actions = actions instanceof Array ? actions : Object.values(actions);\n    actions.forEach((Action) => {\n        dispatchableBehaviours[Action.formalName()] = new Action(context);\n    });\n    return dispatchableBehaviours;\n};\n\nexport const initializePhysicalActions = (context, actions) => {\n    const physicalActions = {};\n\n    for (const name in actions) {\n        if (!({}).hasOwnProperty.call(name, actions)) {\n            physicalActions[name] = actions[name](context);\n        }\n    }\n    return physicalActions;\n};\n\nexport const changeSideEffectAvailability = (context, fn, toEnable) => {\n    const sideEffects = context.sideEffects();\n    for (const key in sideEffects) {\n        if ({}.hasOwnProperty.call(sideEffects, key)) {\n            let change = true;\n            if (fn && fn(key) === false) {\n                change = false;\n            }\n            if (change) {\n                toEnable ? sideEffects[key].enable() : sideEffects[key].disable();\n            }\n        }\n    }\n};\n\nexport const getMergedSet = set => [...new Set([...set[0], ...set[1]])];\n\nexport const getSourceFields = (propagationInf, criteria = {}) => {\n    const sourceIdentifiers = propagationInf.sourceIdentifiers;\n    let sourceFields;\n    if (sourceIdentifiers) {\n        sourceFields = sourceIdentifiers.fields.map(d => d.name);\n    } else if (criteria instanceof Array) {\n        sourceFields = criteria[0];\n    } else {\n        sourceFields = Object.keys(criteria || {});\n    }\n    return sourceFields;\n};\n\nexport const getSideEffects = (behaviour, behaviourEffectMap) => {\n    const sideEffects = [];\n    for (const key in behaviourEffectMap) {\n        const behaviours = key.split(',');\n        const found = behaviours.some(d => d === behaviour);\n        if (found) {\n            sideEffects.push({\n                effects: behaviourEffectMap[key],\n                behaviours\n            });\n        }\n    }\n    return sideEffects;\n};\n\n","import {\n    mergeRecursive,\n    hasTouch,\n    selectElement,\n    isSimpleObject,\n    getDataModelFromRange,\n    ReservedFields,\n    FieldType,\n    defaultValue\n} from 'muze-utils';\nimport { ALL_ACTIONS } from './enums/actions';\nimport SelectionSet from './selection-set';\nimport {\n    initializeBehaviouralActions,\n    initializeSideEffects,\n    changeSideEffectAvailability,\n    initializePhysicalActions,\n    getSideEffects,\n    setSideEffectConfig\n} from './helper';\n\nexport const getUidsFromCriteria = (data, { dm, dimensionsMap, dimsMapGetter, addMeasures = true }) => {\n    const fieldsConfig = Object.assign({}, dm.getFieldsConfig(), {\n        [ReservedFields.ROW_ID]: {\n            index: Object.keys(dm.getFieldsConfig()).length,\n            def: {\n                name: ReservedFields.ROW_ID,\n                type: FieldType.DIMENSION\n            }\n        }\n    });\n\n    if (data === null) {\n        return null;\n    }\n\n    const criteriaFields = data[0];\n    const fields = criteriaFields.length ? criteriaFields.map((d, i) => ({\n        name: d,\n        index: i\n    })) : [];\n\n    const fieldIndexMap = fields.reduce((acc, v, i) => {\n        acc[v.name] = i;\n        return acc;\n    }, {});\n\n    const uids = [];\n    const measureNameField = criteriaFields.find(field => field === ReservedFields.MEASURE_NAMES);\n    const propDims = fields.filter(d => d.name in fieldsConfig).map(d => d.name);\n\n    const dimsMap = dimsMapGetter(propDims, fieldsConfig);\n    for (let i = 1, len = data.length; i < len; i++) {\n        const row = data[i];\n        const dimKey = propDims.map(field => row[fieldIndexMap[field]]);\n        const origRow = dimsMap[dimKey];\n        if (origRow) {\n            origRow.forEach((rowVal) => {\n                const rowId = rowVal[rowVal.length - 1];\n                if (!measureNameField) {\n                    const measuresArr = dimensionsMap[rowId].length ? dimensionsMap[rowId] : [[]];\n                    measuresArr.forEach((measures) => {\n                        uids.push([rowId, ...(addMeasures ? measures : [])]);\n                    });\n                } else {\n                    let measuresArr = row[fieldIndexMap[measureNameField]];\n\n                    if (!measuresArr.length) {\n                        measuresArr = dimensionsMap[rowId].length ? dimensionsMap[rowId] : [];\n                        if (measuresArr.length) {\n                            measuresArr.forEach((measures) => {\n                                uids.push([rowId, measures]);\n                            });\n                        } else {\n                            uids.push([rowId]);\n                        }\n                    } else {\n                        uids.push(measuresArr.length ? [rowId, measuresArr] : [rowId]);\n                    }\n                }\n            });\n        }\n    }\n\n    return uids;\n};\n\nconst cloneObj = (behaviourEffectMap) => {\n    const keys = Object.keys(behaviourEffectMap);\n\n    return keys.reduce((acc, key) => {\n        const value = behaviourEffectMap[key];\n        const cloned = value.map((d) => {\n            let clonedVal = d;\n            if (isSimpleObject(d)) {\n                clonedVal = mergeRecursive({}, d);\n            }\n            return clonedVal;\n        });\n        acc[key] = cloned;\n        return acc;\n    }, {});\n};\n\nconst getKeysFromCriteria = (criteria, firebolt) => {\n    if (criteria) {\n        const data = firebolt.data();\n        const { dimensionsMap } = firebolt._metaData;\n\n        let values = [];\n        if (isSimpleObject(criteria)) {\n            const dm = getDataModelFromRange(data, criteria);\n            dm.getData({ withUid: true }).data.forEach((row) => {\n                const id = row[row.length - 1];\n                const measures = criteria[ReservedFields.MEASURE_NAMES] || dimensionsMap[id] || [];\n                if (measures.length) {\n                    measures.forEach((measureArr) => {\n                        values.push(`${[id, ...measureArr]}`);\n                    });\n                } else {\n                    values.push([id]);\n                }\n            });\n        } else {\n            const dimsMapGetter = firebolt._dimsMapGetter;\n            values = getUidsFromCriteria(criteria, {\n                dm: firebolt.data(),\n                dimensionsMap,\n                dimsMapGetter\n            });\n        }\n        return values;\n    }\n    return null;\n};\n\n/**\n * This class is responsible for dispatching behavioural actions and side effects. It also keeps the information of\n * registered physical actions, behavioural actions and side effects. Also, it keeps the map of physical and behavioural\n * actions and behavioural actions and side effects. Whenever any behavioural action is dispatched, it also propagates\n * the rows which got affected to the other datamodels. This class is initialized by {@link VisualUnit} and legend to\n * manage it's interaction.\n *\n * @public\n * @class Firebolt\n * @module Firebolt\n */\nexport default class Firebolt {\n    constructor (context, actions, sideEffects, behaviourEffectMap) {\n        this.context = context;\n        this._sideEffectDefinitions = {};\n        this._sideEffects = {};\n        this._propagationInf = {};\n        this._sourceSelectionSet = {};\n        this._actions = {\n            behavioural: {},\n            physical: {}\n        };\n        this._selectionSet = {};\n        this._volatileSelectionSet = {};\n        this._propagationFields = {};\n        this._sideEffectPolicies = {};\n        this._propagationBehaviourMap = {};\n        this._behaviourPolicies = {};\n        this._actionBehaviourMap = {};\n        this._config = {};\n        this._behaviourEffectMap = {};\n        this._entryExitSet = {};\n        this._actionHistory = {};\n        this._queuedSideEffects = {};\n        this._handlers = {};\n        this._payloadGenerators = {};\n        this._payloads = {};\n\n        this.mapSideEffects(cloneObj(behaviourEffectMap));\n        this.registerBehaviouralActions(actions.behavioural);\n        this.registerSideEffects(sideEffects);\n        this.registerPhysicalBehaviouralMap(actions.physicalBehaviouralMap);\n        this.registerPhysicalActions(actions.physical);\n    }\n\n    config (...config) {\n        if (config.length) {\n            this._config = mergeRecursive(this._config, config[0]);\n            setSideEffectConfig(this.sideEffects(), this._config);\n            return this;\n        }\n        return this._config;\n    }\n\n    mapSideEffects (behEffectMap) {\n        const behaviourEffectMap = this._behaviourEffectMap;\n        for (const key in behEffectMap) {\n            if ({}.hasOwnProperty.call(behEffectMap, key)) {\n                const sideEffects = behEffectMap[key] || [];\n                let preventDefaultActions = false;\n                let effectNames;\n                if (isSimpleObject(sideEffects)) {\n                    effectNames = sideEffects.effects;\n                    preventDefaultActions = sideEffects.preventDefaultActions;\n                } else {\n                    effectNames = sideEffects;\n                }\n                effectNames = effectNames.map((effect) => {\n                    if (!isSimpleObject(effect)) {\n                        return {\n                            name: effect\n                        };\n                    }\n                    return effect;\n                });\n                !behaviourEffectMap[key] && (behaviourEffectMap[key] = []);\n                this._behaviourEffectMap[key] = [...new Set(preventDefaultActions ? effectNames :\n                    [...behaviourEffectMap[key], ...effectNames])];\n            }\n        }\n        return this;\n    }\n\n    registerBehaviouralActions (actions) {\n        const behaviours = initializeBehaviouralActions(this, actions);\n        this.prepareSelectionSets(behaviours);\n        Object.assign(this._actions.behavioural, behaviours);\n        return this;\n    }\n\n    prepareSelectionSets () {\n        return this;\n    }\n\n    registerSideEffects (sideEffects) {\n        for (const key in sideEffects) {\n            this._sideEffectDefinitions[sideEffects[key].formalName()] = sideEffects[key];\n        }\n        this.initializeSideEffects();\n        return this;\n    }\n\n    applySideEffects (sideEffects, selectionSet, payload) {\n        const sideEffectStore = this.sideEffects();\n        const actionHistory = this._actionHistory;\n        const queuedSideEffects = this._queuedSideEffects;\n        sideEffects.forEach((sideEffect) => {\n            const effects = sideEffect.effects;\n            const behaviours = sideEffect.behaviours;\n            effects.forEach((effect) => {\n                let options = {};\n                let name;\n                if (typeof effect === 'object') {\n                    name = effect.name;\n                    options = effect.options || {};\n                } else {\n                    name = effect;\n                }\n                const sideEffectInstance = sideEffectStore[name];\n                if (sideEffectInstance && sideEffectInstance.isEnabled()) {\n                    if (!sideEffectInstance.constructor.mutates() &&\n                        Object.values(actionHistory).some(d => d.isMutableAction)) {\n                        queuedSideEffects[`${name}-${behaviours.join()}`] = {\n                            name,\n                            params: [selectionSet, payload, options]\n                        };\n                    } else {\n                        this.dispatchSideEffect(name, selectionSet, payload, options);\n                    }\n                }\n            });\n        });\n        return this;\n    }\n\n    dispatchSideEffect (name, selectionSet, payload, options = {}) {\n        const sideEffectStore = this.sideEffects();\n        const sideEffect = sideEffectStore[name];\n        const { setTransform } = options;\n        selectionSet = setTransform ? setTransform(selectionSet, payload, sideEffect) : selectionSet;\n        sideEffect.apply(selectionSet, payload, options);\n    }\n\n    registerPropagationBehaviourMap (map) {\n        this._propagationBehaviourMap = Object.assign(this._propagationBehaviourMap, map || {});\n        return this;\n    }\n\n    shouldApplyHighlightEffect () {\n        return true;\n    }\n\n    dispatchBehaviour (behaviour, payload, propagationInfo = {}) {\n        // payload = this.sanitizePayload(payload);\n        const propagate = propagationInfo.propagate !== undefined ? propagationInfo.propagate : true;\n        const behaviouralActions = this._actions.behavioural;\n        const action = behaviouralActions[behaviour];\n        const behaviourEffectMap = this._behaviourEffectMap;\n        const sideEffects = getSideEffects(behaviour, behaviourEffectMap);\n        this._propagationInf = propagationInfo;\n        this._payloads[behaviour] = payload;\n\n        if (action) {\n            action.dispatch(payload);\n            this._entryExitSet[behaviour] = action.entryExitSet();\n            const shouldApplySideEffects = this.shouldApplySideEffects(propagationInfo);\n            const shouldApplyHighlightEffect = this.shouldApplyHighlightEffect(behaviour);\n\n            if (shouldApplyHighlightEffect) {\n                if (propagate) {\n                    this.propagate(behaviour, payload, action.propagationIdentifiers(), { sideEffects });\n                }\n\n                if (shouldApplySideEffects) {\n                    const applicableSideEffects = this.getApplicableSideEffects(sideEffects, payload, propagationInfo);\n                    this.applySideEffects(applicableSideEffects, this.getEntryExitSet(behaviour), payload);\n                }\n            }\n        }\n        return this;\n    }\n\n    getPropagationSelectionSet (selectionSet) {\n        return selectionSet.find(d => !d.sourceSelectionSet);\n    }\n\n    shouldApplySideEffects () {\n        return true;\n    }\n\n    changeBehaviourStateOnPropagation (behaviour, value, key = 'default') {\n        const behaviourConditions = this._behaviourPolicies[behaviour] || (this._behaviourPolicies[behaviour] = {});\n        if (value instanceof Function) {\n            behaviourConditions[key] = value;\n        } else {\n            behaviourConditions[key] = () => value;\n        }\n        return this;\n    }\n\n    changeSideEffectStateOnPropagation (sideEffect, value, key = 'default') {\n        const sideEffectConditions = this._sideEffectPolicies[sideEffect] ||\n            (this._sideEffectPolicies[sideEffect] = {});\n        if (value instanceof Function) {\n            sideEffectConditions[key] = value;\n        } else {\n            sideEffectConditions[key] = () => value;\n        }\n    }\n\n    removeSideEffectPolicy (sideEffect, key) {\n        delete this._sideEffectPolicies[sideEffect][key];\n        return this;\n    }\n\n    removeBehaviourPolicy (behaviour, key) {\n        delete this._behaviourPolicies[behaviour][key];\n        return this;\n    }\n\n    propagate () {\n        return this;\n    }\n\n    sideEffects (...sideEffects) {\n        if (sideEffects.length) {\n            this._sideEffects = sideEffects[0];\n            return this;\n        }\n        return this._sideEffects;\n    }\n\n    enableSideEffects (fn) {\n        changeSideEffectAvailability(this, fn, true);\n        return this;\n    }\n\n    disableSideEffects (fn) {\n        changeSideEffectAvailability(this, fn, false);\n        return this;\n    }\n\n    dissociateBehaviour (behaviour, physicalAction) {\n        const actionBehaviourMap = this._actionBehaviourMap;\n        for (const key in actionBehaviourMap) {\n            if (key === physicalAction) {\n                const behaviourMap = actionBehaviourMap[key];\n                behaviourMap.behaviours = behaviourMap.behaviours.filter(d => d !== behaviour);\n                this.mapActionsAndBehaviour(key);\n            }\n        }\n\n        return this;\n    }\n\n    dissociateSideEffect (sideEffect, behaviour) {\n        const behaviourEffectMap = this._behaviourEffectMap;\n        behaviourEffectMap[behaviour] = behaviourEffectMap[behaviour].filter(d => (d.name || d) !== sideEffect);\n        return this;\n    }\n\n    getApplicableSideEffects (sideEffects) {\n        return sideEffects;\n    }\n\n    attachPropagationListener (dataModel, handler = this.onDataModelPropagation()) {\n        dataModel.unsubscribe('propagation');\n        dataModel.on('propagation', handler);\n        return this;\n    }\n\n    onDataModelPropagation () {\n        return (propValue) => {\n            const payload = propValue.payload;\n            const action = payload.action;\n\n            this.dispatchBehaviour(action, payload, {\n                propagate: false\n            });\n        };\n    }\n\n    createSelectionSet (uniqueIds, behaviouralActions) {\n        const behaviours = behaviouralActions || this._actions.behavioural;\n        const selectionSet = this._selectionSet;\n        const volatileSelectionSet = this._volatileSelectionSet;\n\n        for (const key in behaviours) {\n            if ({}.hasOwnProperty.call(behaviours, key)) {\n                selectionSet[key] = new SelectionSet(uniqueIds);\n                volatileSelectionSet[key] = new SelectionSet(uniqueIds, true);\n                this._entryExitSet[key] = null;\n            }\n        }\n\n        this._volatileSelectionSet = volatileSelectionSet;\n        this.selectionSet(selectionSet);\n        return this;\n    }\n\n    selectionSet (...selectionSet) {\n        if (selectionSet.length) {\n            this._selectionSet = selectionSet[0];\n            return this;\n        }\n        return this._selectionSet;\n    }\n\n    initializeSideEffects () {\n        const sideEffectDefinitions = this._sideEffectDefinitions;\n        this.sideEffects(initializeSideEffects(this, sideEffectDefinitions));\n        return this;\n    }\n\n    target () {\n        return 'all';\n    }\n\n    registerPhysicalActions (actions, context = this) {\n        const initedActions = initializePhysicalActions(context, actions);\n        Object.assign(this._actions.physical, initedActions);\n        return this;\n    }\n\n    /**\n     * Allows to propagate the datamodel with only the supplied fields. When propagation is done, then the fields\n     * which are supplied for the specified behavioural action is propagated.\n     *\n     * @public\n     *\n     * @param {string} action Name of behavioural action. If '*' is specified, then for all behavioural actions it is\n     * applied.\n     * @param {Array} fields Array of field names which will be propagated.\n     * @param {boolean} append If true, then it is appended to the existing propagation data model fields else only\n     * those fields are projected from propagation data model and propagated.\n     *\n     * @return {Firebolt} Instance of firebolt\n     */\n    propagateWith (action, fields, append = false) {\n        const behaviouralActions = this._actions.behavioural;\n        if (action === ALL_ACTIONS) {\n            for (const key in behaviouralActions) {\n                this._propagationFields[key] = {\n                    fields,\n                    append\n                };\n            }\n        } else {\n            this._propagationFields[action] = {\n                fields,\n                append\n            };\n        }\n        return this;\n    }\n\n    /**\n     * Map actions and behaviours\n     * @return {Firebolt} Firebolt instance\n     */\n    mapActionsAndBehaviour (phyAction) {\n        const initedPhysicalActions = this._actions.physical;\n        const map = this._actionBehaviourMap;\n\n        for (const action in map) {\n            if (!({}).hasOwnProperty.call(action, map) && action === (phyAction || action)) {\n                let target;\n                const mapObj = map[action];\n                target = mapObj.target;\n                const touch = mapObj.touch;\n                if (!target) {\n                    target = this.context.getDefaultTargetContainer();\n                }\n                const bind = hasTouch() ? touch === true || touch === undefined : !touch;\n                bind && this.bindActionWithBehaviour(initedPhysicalActions[action],\n                    target, mapObj.behaviours);\n            }\n        }\n        this.registerPhysicalActionHandlers();\n        return this;\n    }\n\n    registerPhysicalBehaviouralMap (map) {\n        this._actionBehaviourMap = mergeRecursive(this._actionBehaviourMap, map);\n        return this;\n    }\n\n    /**\n     * Binds a target element with an action.\n     *\n     * @param {Function} action Action method\n     * @param {string} target Class name of element\n     * @param {Array} behaviourList Array of behaviours\n     * @return {FireBolt} Instance of firebolt\n     */\n    bindActionWithBehaviour (action, targets, behaviourList) {\n        if (typeof (targets) === 'string') {\n            targets = [targets];\n        }\n        targets.forEach((target) => {\n            const mount = this.context.mount();\n            const nodes = target.node instanceof Function ? target : selectElement(mount).selectAll(target);\n            if (!nodes.empty()) {\n                if (nodes instanceof Array) {\n                    nodes.forEach((node) => {\n                        action(selectElement(node), behaviourList);\n                    });\n                } else {\n                    action(nodes, behaviourList);\n                }\n            }\n        });\n        return this;\n    }\n\n    getPropagationInf () {\n        return this._propagationInf;\n    }\n\n    getAddSetFromCriteria (criteria, propagationInf = {}) {\n        return {\n            model: propagationInf.data ? propagationInf.data : null,\n            uids: criteria ? getKeysFromCriteria(criteria, this) : null\n        };\n    }\n\n    getSelectionSet (action) {\n        return this.selectionSet()[action];\n    }\n\n    getFullData () {\n        return this.context.data();\n    }\n\n    resetted () {\n        return this._resetted;\n    }\n\n    /**\n     * Returns the entry and exit set information of the specified behavioural action.\n     *\n     * @public\n     *\n     * @param {string} behaviour Name of behavioural action.\n     *\n     * @return {Object} Entry exit set information.\n     */\n    getEntryExitSet (behaviour) {\n        return this._entryExitSet[behaviour];\n    }\n\n    data () {\n        return this.context.data();\n    }\n\n    currentData () {\n        return this.data();\n    }\n\n    triggerPhysicalAction (event, payload) {\n        const handlers = this._handlers[event] || [];\n        const genericHandlers = this._handlers['*'];\n\n        const allHandlers = [...Object.values(handlers), ...Object.values(genericHandlers)];\n        allHandlers.forEach((fn) => {\n            fn(event, payload);\n        });\n\n        return this;\n    }\n\n    onPhysicalAction (event, fn, namespace) {\n        !this._handlers[event] && (this._handlers[event] = {});\n        this._handlers[event][namespace] = fn;\n\n        return this;\n    }\n\n    registerPhysicalActionHandlers () {\n        this.onPhysicalAction('*', (event, payload) => {\n            const { behaviours } = this._actionBehaviourMap[event];\n            behaviours.forEach(beh => this.dispatchBehaviour(beh, payload));\n        });\n    }\n\n    id () {\n        return this.context.id();\n    }\n\n    getRangeFromIdentifiers (...params) {\n        return this.context.getRangeFromIdentifiers(...params);\n    }\n\n    sanitizePayload (payload) {\n        return payload;\n    }\n\n    payloadGenerators (...params) {\n        if (params.length) {\n            Object.assign(this._payloadGenerators, params[0]);\n        }\n        return this._payloadGenerators;\n    }\n\n    getPayloadGeneratorFor (action) {\n        const defaultFn = this._payloadGenerators.__default;\n        const fn = this._payloadGenerators[action];\n\n        return defaultValue(fn, defaultFn);\n    }\n\n    getPayload (action) {\n        return this._payloads[action];\n    }\n\n    actions () {\n        return this._actions;\n    }\n}\n","import { retrieveNearestGroupByReducers } from 'muze-utils';\n\nexport class EntryExitSet {\n    constructor ({ uids, data, filteredModel }) {\n        this._uids = uids;\n        this._data = data;\n        this._filteredModel = filteredModel;\n        this._model = null;\n    }\n\n    get uids () {\n        return this._uids;\n    }\n\n    get model () {\n        if (!this._model) {\n            this._model = this._filteredModel(this._data);\n        }\n        return this._model;\n    }\n\n    get length () {\n        return this._uids.length;\n    }\n\n    get aggFns () {\n        return retrieveNearestGroupByReducers(this._model);\n    }\n}\n","import {\n    isSimpleObject,\n    DimensionSubtype,\n    partition,\n    ReservedFields\n} from 'muze-utils';\nimport { getSourceFields } from '../../helper';\nimport { EntryExitSet } from '../../entry-exit-set';\n\n/**\n * This is the base class has all the common functionalities needed for all behavioural actions. Any other behavioural\n * action needs to extend this class.\n *\n * @public\n * @class GenericBehaviour\n * @module GenericBehaviour\n */\nexport default class GenericBehaviour {\n    constructor (firebolt) {\n        this.firebolt = firebolt;\n        this._enabled = true;\n    }\n\n    /**\n     * Returns entry and exit set information. This method is called by firebolt when ```dispatchBehaviour``` is called\n     * dynamically or when any physical action is triggered on the chart.\n     *\n     * @param {Object} payload Payload information.\n     * @param {Object|Array} payload.criteria Identifiers of data interacted with.\n     *\n     * @return {Array} Entry and exit set information.\n     */\n    dispatch (payload) {\n        const criteria = payload.criteria;\n        const firebolt = this.firebolt;\n        const formalName = this.constructor.formalName();\n        const selectionSet = firebolt.getSelectionSet(formalName);\n        const propInf = this.firebolt.getPropagationInf();\n        const {\n            model: filteredDataModel,\n            uids\n        } = this.getAddSetFromCriteria(criteria, this.firebolt.getPropagationInf());\n        this._payload = payload;\n\n        this.setSelectionSet(uids, selectionSet, {\n            filteredDataModel,\n            payload\n        });\n        if (!propInf.sourceId) {\n            this.propagationIdentifiers(selectionSet, payload);\n        }\n        this.entryExitSet(selectionSet, filteredDataModel, payload);\n    }\n\n    getAddSetFromCriteria (...params) {\n        return this.firebolt.getAddSetFromCriteria(...params);\n    }\n\n    /**\n     * Updates the selection set by adding uids to the instance of {@link SelectionSet} or removing them.\n     * {@link SelectionSet} keeps the information of which rows are in the entry set and exit set.\n     *\n     * @public\n     * @param {Array} addSet Array of row ids which got affected during interaction.\n     * @param {SelectionSet} selectionSet Instance of selection set.\n     *\n     * @return {GenericBehaviour} Instance of behaviour.\n     */\n    setSelectionSet () {\n        return this;\n    }\n\n    entryExitSet (...params) {\n        if (params.length) {\n            const [selectionSet, filteredDataModel, payload] = params;\n            const {\n                entrySet,\n                exitSet,\n                mergedEnter,\n                mergedExit,\n                completeSet\n            } = selectionSet.getSets();\n            const propagationInf = this.firebolt.getPropagationInf();\n\n            this._entryExitSet = {\n                entrySet: [this.getSetInfo('oldEntry', entrySet[0], filteredDataModel),\n                    this.getSetInfo('newEntry', entrySet[1], filteredDataModel)],\n                exitSet: [this.getSetInfo('oldEntry', exitSet[0], filteredDataModel),\n                    this.getSetInfo('newExit', exitSet[1], filteredDataModel)],\n                mergedEnter: this.getSetInfo('mergedEnter', mergedEnter, filteredDataModel),\n                mergedExit: this.getSetInfo('mergedExit', mergedExit, filteredDataModel),\n                completeSet: this.getSetInfo('complete', completeSet, filteredDataModel),\n                fields: getSourceFields(propagationInf, payload.criteria)\n            };\n\n            return this;\n        }\n        return this._entryExitSet;\n    }\n\n    getSetInfo (type, set, filteredDataModel) {\n        const { sourceId } = this.firebolt.getPropagationInf();\n        const data = this.firebolt.data();\n\n        return new EntryExitSet({\n            uids: set,\n            filteredModel: (fullData) => {\n                let model = null;\n                if (type === 'complete') {\n                    return fullData;\n                } else if (type === 'mergedEnter' && sourceId) {\n                    model = filteredDataModel;\n                } else {\n                    const uidMap = set.reduce((acc, v) => {\n                        acc[v[0]] = 1;\n                        return acc;\n                    }, {});\n                    model = fullData.select(fields => fields[ReservedFields.ROW_ID] in uidMap, {\n                        saveChild: false\n                    });\n                }\n                return model;\n            },\n            data\n        });\n    }\n\n    propagationIdentifiers (...params) {\n        if (params.length) {\n            let propData = null;\n            const [selectionSet, payload] = params;\n            const fieldsConfig = this.firebolt.data().getFieldsConfig();\n            const { criteria } = payload;\n            const propagationFields = this._propagationFields;\n\n            if (selectionSet.resetted() || criteria === null) {\n                propData = null;\n            } else if (isSimpleObject(criteria)) {\n                const fields = Object.keys(criteria);\n                const [, otherFields] =\n                    partition(fields, (d => (fieldsConfig[d] ? fieldsConfig[d].def.subtype ===\n                        DimensionSubtype.CATEGORICAL : d === ReservedFields.MEASURE_NAMES)));\n                const allFields = fields.filter(d => d === ReservedFields.ROW_ID ||\n                    fieldsConfig[d] && fieldsConfig[d].def.subtype === DimensionSubtype.CATEGORICAL);\n                const { mergedEnter } = selectionSet.getSets({ keepDims: true, fields: allFields });\n                propData = {\n                    fields: fields.map(d => (fieldsConfig[d] ? fieldsConfig[d].def : {\n                        name: d\n                    })),\n                    range: this.firebolt.getRangeFromIdentifiers({\n                        criteria,\n                        entrySet: selectionSet.getSets().mergedEnter,\n                        fields: otherFields\n                    }),\n                    identifiers: [[...allFields, ReservedFields.MEASURE_NAMES], ...mergedEnter]\n                };\n            } else {\n                const fields = propagationFields ? [...propagationFields, ReservedFields.MEASURE_NAMES] :\n                    criteria[0];\n                const { mergedEnter } = selectionSet.getSets({ keepDims: true, fields });\n\n                propData = {\n                    fields: fields.map(d => (fieldsConfig[d] ? fieldsConfig[d].def : {\n                        name: d\n                    })),\n                    identifiers: [fields, ...mergedEnter]\n                };\n            }\n            this._propagationIdentifiers = propData;\n            return this;\n        }\n        return this._propagationIdentifiers;\n    }\n\n    static mutates () {\n        return false;\n    }\n\n    enable () {\n        this._enabled = true;\n    }\n\n    disable () {\n        this._enabled = false;\n    }\n\n    isEnabled () {\n        return this._enabled;\n    }\n\n    propagateWith (...params) {\n        this._propagationFields = params[0];\n\n        return this;\n    }\n}\n\n","import GenericBehaviour from './generic';\nimport { getMergedSet } from '../../helper';\nimport * as SELECTION from '../../enums/selection';\n\nexport default class VolatileBehaviour extends GenericBehaviour {\n    setSelectionSet (addSet, selectionSet) {\n        if (addSet === null) {\n            selectionSet.reset();\n        } else if (addSet.length) {\n                // new add set\n            const existingAddSet = addSet.filter(d => selectionSet._set[d] === SELECTION.SELECTION_NEW_ENTRY\n                    || selectionSet._set[d] === SELECTION.SELECTION_OLD_ENTRY);\n            selectionSet.updateExit();\n            const { entrySet } = selectionSet.getSets({ keys: true });\n            selectionSet.reset(getMergedSet(entrySet));\n            selectionSet.add(addSet);\n            selectionSet.update(existingAddSet);\n        } else {\n            selectionSet.remove(selectionSet.getCompleteSet());\n        }\n    }\n}\n","export const BRUSH = 'brush';\nexport const HIGHLIGHT = 'highlight';\nexport const TOOLTIP = 'tooltip';\nexport const FILTER = 'filter';\nexport const SELECT = 'select';\n","import VolatileBehaviour from './volatile';\nimport { HIGHLIGHT } from '../../enums/behaviours';\n\nexport default class HighlightBehaviour extends VolatileBehaviour {\n    static formalName () {\n        return HIGHLIGHT;\n    }\n}\n","import VolatileBehaviour from './volatile';\nimport * as BEHAVIOURNAMES from '../../enums/behaviours';\n\n/**\n * This is the behaviour for brushing a region on the chart. It accepts a payload\n * which contains the x and y range of the data and other configuration. It will then\n * create a selection box from the range and select the points which fall within the range.\n */\nexport default class BrushBehaviour extends VolatileBehaviour {\n    static formalName () {\n        return BEHAVIOURNAMES.BRUSH;\n    }\n}\n","import VolatileBehaviour from './volatile';\nimport { FILTER } from '../../enums/behaviours';\n\nexport default class FilterBehaviour extends VolatileBehaviour {\n    static formalName () {\n        return FILTER;\n    }\n\n    static mutates () {\n        return true;\n    }\n}\n","import GenericBehaviour from './generic';\nimport { getMergedSet } from '../../helper';\nimport * as SELECTION from '../../enums/selection';\n\nexport default class PersistentBehaviour extends GenericBehaviour {\n    setSelectionSet (addSet, selectionSet) {\n        if (addSet === null) {\n            selectionSet.reset();\n        } else {\n            const propagationInf = this.firebolt.getPropagationInf();\n            // new add set\n            const existingAddSet = addSet.filter(d => selectionSet._set[d] === SELECTION.SELECTION_NEW_ENTRY\n                || selectionSet._set[d] === SELECTION.SELECTION_OLD_ENTRY);\n            if (propagationInf.sourceId) {\n                selectionSet.updateExit();\n                const { entrySet } = selectionSet.getSets({ keys: true });\n                selectionSet.reset(getMergedSet(entrySet));\n                selectionSet.add(addSet);\n                selectionSet.update(existingAddSet);\n            } else {\n                selectionSet.updateEntry();\n                selectionSet.add(addSet);\n            }\n        }\n\n        return this;\n    }\n}\n","import PersistentBehaviour from './persistent';\nimport { SELECT } from '../../enums/behaviours';\nimport { SELECTION } from '../..';\nimport { getMergedSet } from '../../helper';\n\nexport default class SelectBehaviour extends PersistentBehaviour {\n    static formalName () {\n        return SELECT;\n    }\n\n    setSelectionSet (addSet, selectionSet) {\n        if (addSet === null) {\n            selectionSet.reset();\n        } else if (addSet.length) {\n            const propagationInf = this.firebolt.getPropagationInf();\n            // new add set\n            const existingAddSet = addSet.filter(d => selectionSet._set[d] === SELECTION.SELECTION_NEW_ENTRY\n                || selectionSet._set[d] === SELECTION.SELECTION_OLD_ENTRY);\n            if (propagationInf.sourceId) {\n                selectionSet.updateExit();\n                const { entrySet } = selectionSet.getSets();\n                selectionSet.reset(getMergedSet(entrySet));\n                selectionSet.add(addSet);\n                selectionSet.update(existingAddSet);\n            } else {\n                // existing add set\n                if (existingAddSet.length) {\n                    selectionSet.updateExit();\n                    selectionSet.remove(existingAddSet);\n                } else {\n                    selectionSet.updateEntry();\n                    selectionSet.add(addSet);\n                }\n                const { exitSet } = selectionSet.getSets({ keys: true });\n                const mergedExitSet = getMergedSet(exitSet);\n                const completeSetCount = selectionSet.getCompleteSet().length;\n                if (mergedExitSet.length === completeSetCount) {\n                    selectionSet.reset();\n                }\n            }\n        } else {\n            selectionSet.remove(selectionSet.getCompleteSet());\n        }\n\n        return this;\n    }\n}\n\n","import { COORD_TYPES } from 'muze-utils';\n\nconst dragCriteriaRetriever = {\n    [COORD_TYPES.CARTESIAN]: (firebolt, sourceInfo, { startPos, endPos }) => {\n        if (startPos.x === endPos.x && startPos.y === endPos.y) {\n            return {\n                criteria: null\n            };\n        }\n        const ranges = firebolt.context.getRangeFromPositions({\n            startPos,\n            endPos\n        });\n        const dimensions = {};\n        dimensions.x = [startPos.x, endPos.x];\n        dimensions.y = [startPos.y, endPos.y];\n\n        return {\n            criteria: ranges,\n            dimensions\n        };\n    },\n    [COORD_TYPES.POLAR]: () => ({\n        criteria: null\n    })\n};\n\n/**\n * Gets the drag action configuration\n * @param {VisualUnit} instance instance of visual unit\n * @param {Object} config x y positions\n * @return {Object} Payload of behaviour\n*/\n/* istanbul ignore next */ const getDragActionConfig = (firebolt, config) => {\n    const context = firebolt.context;\n    const sourceInfo = context.getSourceInfo();\n    const coordType = context.coord();\n    return dragCriteriaRetriever[coordType](firebolt, sourceInfo, config);\n};\n\nexport default getDragActionConfig;\n","import {\n    getEvent,\n    getD3Drag\n} from 'muze-utils';\nimport getDragActionConfig from './drag-action-config';\n\n/**\n * Adds dragging action to the target element.\n * @param {VisualUnit} instance Instance of visual unit.\n * @param {SVGElement} targetEl Element on which brushing action is needed.\n * @param {Array} behaviours Array of behaviours\n */\nexport const attachDragEvent = (targetEl, action, firebolt, touch) => {\n    let startPos = {};\n    let endPos = {};\n    let drawingInf;\n\n    const d3Drag = getD3Drag();\n    let touchStart;\n    targetEl.call(d3Drag().on('start', () => {\n        const event = getEvent();\n        startPos = {\n            x: event.x,\n            y: event.y\n        };\n        drawingInf = firebolt.context.getDrawingContext();\n        touchStart = new Date().getTime();\n    }).on('drag', () => {\n        const event = getEvent();\n        endPos = {\n            x: event.x,\n            y: event.y\n        };\n\n        if (touch && Math.abs(startPos.x - endPos.x) <= 5) {\n            return;\n        }\n        endPos.x = Math.max(0, Math.min(endPos.x, drawingInf.width));\n        endPos.y = Math.max(0, Math.min(endPos.y, drawingInf.height));\n        const newStartPos = Object.assign({}, startPos);\n        const newEndPos = Object.assign({}, endPos);\n        if (startPos.x > endPos.x) {\n            newStartPos.x = endPos.x;\n            newEndPos.x = startPos.x;\n        }\n\n        if (startPos.y > endPos.y) {\n            const y = startPos.y;\n            newStartPos.y = endPos.y;\n            newEndPos.y = y;\n        }\n        const payload = getDragActionConfig(firebolt, {\n            startPos: newStartPos,\n            endPos: newEndPos\n        });\n        payload.dragging = true;\n        payload.dragDiff = Math.abs(startPos.x - endPos.x) + Math.abs(startPos.y - endPos.y);\n        firebolt.triggerPhysicalAction(action, payload);\n    }).on('end', () => {\n        const event = getEvent();\n        endPos = {\n            x: event.x,\n            y: event.y\n        };\n        const duration = new Date().getTime() - touchStart;\n\n        if (touch && duration > 100 && Math.abs(startPos.x - endPos.x) <= 5) {\n            return;\n        }\n        endPos.x = Math.max(0, Math.min(endPos.x, drawingInf.width));\n        endPos.y = Math.max(0, Math.min(endPos.y, drawingInf.height));\n        if (startPos.x > endPos.x) {\n            const x = startPos.x;\n            startPos.x = endPos.x;\n            endPos.x = x;\n        }\n\n        if (startPos.y > endPos.y) {\n            const y = startPos.y;\n            startPos.y = endPos.y;\n            endPos.y = y;\n        }\n\n        const payload = getDragActionConfig(firebolt, {\n            startPos,\n            endPos\n        });\n        payload.dragEnd = true;\n        payload.hideSelBox = true;\n        firebolt.triggerPhysicalAction(action, payload);\n    }));\n};\n\n","import { getClientPoint, getEvent } from 'muze-utils';\nimport * as ACTION_NAMES from '../../enums/actions';\n\n/**\n * Adds mouse interactions to target element.\n * @param {Firebolt} instance instance of firebolt.\n * @param {SVGElement} targetEl Element on which the event listeners will be attached.\n * @param {Array} behaviours Array of behaviours\n */\n/* istanbul ignore next */ const hover = firebolt => (targetEl) => {\n    const dispatchBehaviour = function (args) {\n        const event = getEvent();\n        const context = firebolt.context;\n        const tooltipConf = context.config().interaction.tooltip;\n        const mode = tooltipConf.mode;\n        const pos = getClientPoint(context.getDrawingContext().svgContainer, event);\n        const nearestPoint = context.getNearestPoint(pos.x, pos.y, {\n            getAllPoints: true,\n            data: args,\n            event\n        });\n        const payload = {\n            criteria: nearestPoint ? nearestPoint.id : null,\n            getAllPoints: false,\n            showInPosition: nearestPoint.showInPosition,\n            target: nearestPoint.target,\n            position: pos,\n            mode\n        };\n        // console.log('payload', payload.criteria);\n        firebolt.triggerPhysicalAction(ACTION_NAMES.HOVER, payload);\n        event.stopPropagation();\n    };\n\n    targetEl.on('mouseover', dispatchBehaviour)\n                    .on('mousemove', dispatchBehaviour)\n                    .on('mouseout', () => {\n                        firebolt.triggerPhysicalAction(ACTION_NAMES.HOVER, {\n                            criteria: null\n                        });\n                    });\n};\n\nexport default hover;\n","import { getClientPoint } from 'muze-utils';\n\nexport const generatePayloadFromEvent = function (args, event, firebolt) {\n    const context = firebolt.context;\n    const pos = getClientPoint(context.getDrawingContext().svgContainer, event.touches ? event.touches[0] : event);\n    const nearestPoint = context.getNearestPoint(pos.x, pos.y, {\n        data: args,\n        event\n    });\n    return {\n        criteria: nearestPoint ? nearestPoint.id : null,\n        showInPosition: nearestPoint.showInPosition,\n        target: nearestPoint.target,\n        position: pos\n    };\n};\n","import {\n    getEvent,\n    getD3Drag\n } from 'muze-utils';\n\nimport getDragActionConfig from './helpers/drag-action-config';\nimport { ACTIONS } from '../..';\n\nexport const selectionBoxDrag = firebolt => (targetEl) => {\n    let subject;\n    let drawingInf;\n    const context = firebolt.context;\n    const onDrag = (payload) => {\n        firebolt.triggerPhysicalAction(ACTIONS.SELECTIONDRAG, payload);\n    };\n    const d3Drag = getD3Drag();\n\n    targetEl.call(d3Drag().on('start', () => {\n        const event = getEvent();\n        drawingInf = context.getDrawingContext();\n        subject = event.subject;\n    }).on('drag', () => {\n        const event = getEvent();\n        subject.x += event.dx;\n        subject.y += event.dy;\n        const width = drawingInf.width;\n        const height = drawingInf.height;\n        const x = Math.min(width - subject.width, Math.max(subject.x, 0));\n        const y = Math.min(height - subject.height, Math.max(subject.y, 0));\n        const y2 = y + subject.height;\n        const x2 = x + subject.width;\n\n        if (x >= 0 && x2 <= width && y >= 0 && y2 <= height) {\n            const payload = getDragActionConfig(firebolt, {\n                startPos: {\n                    x,\n                    y\n                },\n                endPos: {\n                    x: x2,\n                    y: y2\n                }\n            });\n            onDrag(payload);\n        }\n    }).on('end', () => {\n        const width = drawingInf.width;\n        const height = drawingInf.height;\n        const x = Math.min(width - subject.width, Math.max(subject.x, 0));\n        const y = Math.min(height - subject.height, Math.max(subject.y, 0));\n        const y2 = y + subject.height;\n        const x2 = x + subject.width;\n\n        if (x >= 0 && x2 <= width && y >= 0 && y2 <= height) {\n            const payload = getDragActionConfig(firebolt, {\n                startPos: {\n                    x,\n                    y\n                },\n                endPos: {\n                    x: x2,\n                    y: y2\n                }\n            });\n            payload.dragEnd = true;\n            onDrag(payload);\n        }\n    }));\n};\n","import { getEvent } from 'muze-utils';\nimport { generatePayloadFromEvent } from './helpers';\nimport * as ACTION_NAMES from '../../enums/actions';\n\n/**\n * Adds mouse interactions to target element.\n * @param {VisualUnit} instance instance of visual unit.\n * @param {SVGElement} targetEl Element on which the event listeners will be attached.\n * @param {Array} behaviours Array of behaviours\n */\n/* istanbul ignore next */ const click = firebolt => (targetEl) => {\n    const dispatchBehaviour = function (args) {\n        const event = getEvent();\n        const payload = generatePayloadFromEvent(args, event, firebolt);\n        firebolt.triggerPhysicalAction(ACTION_NAMES.CLICK, payload);\n        event.stopPropagation();\n    };\n\n    targetEl.on('click', dispatchBehaviour);\n};\nexport default click;\n","import drag from './drag';\nimport hover from './hover';\nimport { longtouch } from './longtouch';\nimport { touchdrag } from './touch-drag';\nimport { selectionBoxDrag } from './selection-box-drag';\nimport * as ACTION_NAMES from '../../enums/actions';\nimport click from './click';\n\nexport const physicalActions = {\n    [ACTION_NAMES.DRAG]: drag,\n    [ACTION_NAMES.HOVER]: hover,\n    [ACTION_NAMES.CLICK]: click,\n    [ACTION_NAMES.LONGTOUCH]: longtouch,\n    [ACTION_NAMES.TOUCHDRAG]: touchdrag,\n    [ACTION_NAMES.SELECTIONDRAG]: selectionBoxDrag\n};\n\n","import { attachDragEvent } from './helpers/drag-event';\nimport * as ACTION_NAMES from '../../enums/actions';\n\n/**\n * Adds dragging action to the target element.\n * @param {VisualUnit} instance Instance of visual unit.\n * @param {SVGElement} targetEl Element on which brushing action is needed.\n * @param {Array} behaviours Array of behaviours\n */\n/* istanbul ignore next */ const drag = firebolt => (targetEl) => {\n    attachDragEvent(targetEl, ACTION_NAMES.DRAG, firebolt);\n};\n\nexport default drag;\n","/* global setTimeout */\nimport { getEvent } from 'muze-utils';\nimport * as ACTION_NAMES from '../../enums/actions';\nimport { generatePayloadFromEvent } from './helpers';\n\n/**\n * Adds mouse interactions to target element.\n * @param {VisualUnit} instance instance of visual unit.\n * @param {SVGElement} targetEl Element on which the event listeners will be attached.\n * @param {Array} behaviours Array of behaviours\n */\nexport const longtouch = firebolt => (targetEl) => {\n    let event;\n    let touchEnd;\n    const dispatchBehaviour = function (args) {\n        const payload = generatePayloadFromEvent(args, event, firebolt);\n        firebolt.triggerPhysicalAction(ACTION_NAMES.LONGTOUCH, payload);\n        event.stopPropagation();\n    };\n\n    touchEnd = false;\n    event = getEvent();\n    targetEl.on('touchstart', (args) => {\n        event = getEvent();\n        touchEnd = false;\n        setTimeout(() => {\n            if (!touchEnd) {\n                dispatchBehaviour(args);\n            } else {\n                firebolt.triggerPhysicalAction(ACTION_NAMES.LONGTOUCH, {\n                    criteria: null\n                });\n            }\n        }, 100);\n    }).on('touchend', () => {\n        touchEnd = true;\n    });\n};\n","import { attachDragEvent } from './helpers/drag-event';\n\n/**\n * Adds dragging action to the target element.\n * @param {VisualUnit} instance Instance of visual unit.\n * @param {SVGElement} targetEl Element on which brushing action is needed.\n * @param {Array} behaviours Array of behaviours\n */\nexport const touchdrag = firebolt => (targetEl, behaviours) => {\n    attachDragEvent(targetEl, behaviours, firebolt, true);\n};\n\n","const ANCHORS = 'anchors';\nconst TOOLTIP = 'tooltip';\nconst BRUSH_ANCHORS = 'brush-anchors';\nconst PERSISTENT_ANCHORS = 'persistent-anchors';\nconst FILTER = 'filter';\nconst HIGHLIGHTER = 'highlighter';\nconst CROSSLINE = 'crossline';\nconst FRAGMENTED_TOOLTIP = 'fragmented-tooltip';\nconst AXIS_LABEL_HIGHLIGHTER = 'axis-label-highlighter';\n\nexport {\n    ANCHORS,\n    BRUSH_ANCHORS,\n    PERSISTENT_ANCHORS,\n    FILTER,\n    HIGHLIGHTER,\n    CROSSLINE,\n    TOOLTIP,\n    FRAGMENTED_TOOLTIP,\n    AXIS_LABEL_HIGHLIGHTER\n};\n","export const PROPS = {\n    valueParser: {\n        defaultValue: val => val\n    }\n};\n","import GenericSideEffect from './generic-sideeffect';\n\nexport default GenericSideEffect;\n","import { mergeRecursive, getUniqueId, generateGetterSetters } from 'muze-utils';\nimport { PROPS } from './props';\n\n/**\n * This is the base class of all side effects. It contains all common methods like setting configuration, disabling,\n * enabling side effect, etc. Every new side effect has to inherit this class or {@link SpawnableSideEffect} or\n * {@link SurrogateSideEffect} class. All side effects are initialized by firebolt. The instance of firebolt is\n * passed on initialization. The firebolt instance contains ```context``` which is the instance of visual unit with\n * which the firebolt is attached.\n *\n * @public\n * @class\n * @module GenericSideEffect\n */\nexport default class GenericSideEffect {\n    constructor (firebolt) {\n        this.firebolt = firebolt;\n        this._enabled = true;\n        this._strategy = 'default';\n        this._config = {};\n        this._id = getUniqueId();\n        this._strategies = {};\n        generateGetterSetters(this, PROPS);\n        this.config(this.constructor.defaultConfig());\n        this.sourceInfo(() => this.firebolt.context.getSourceInfo());\n        this.layers(() => this.firebolt.context.layers());\n        this.plotPointsFromIdentifiers((...args) => this.firebolt.context.getPlotPointsFromIdentifiers(...args));\n    }\n\n    /**\n     * Returns the default configuration of the side effect.\n     *\n     * @public\n     * @return {Object} Default configuration of side effect.\n     */\n    static defaultConfig () {\n        return {};\n    }\n\n    /**\n     * Returns the formal name of a side effect. This method must be implemented by all side effects which changes\n     * or adds any element in the visualization.\n     *\n     * @return {string} Formal name of side effect.\n     */\n    static formalName () {\n        return 'generic';\n    }\n\n    static target () {\n        return 'all';\n    }\n\n    /**\n     * Returns true if the side effects mutates the data of chart.\n     *\n     * @public\n     *\n     * @return {boolean} If the side effect mutates the data of chart.\n     */\n    static mutates () {\n        return false;\n    }\n\n    /**\n     * Sets or gets the configuration of side effect.\n     *\n     * When setter,\n     * @param {Object} config Configuration of side effect.\n     * @return {GenericSideEffect} Side effect instance.\n     *\n     * When getter,\n     * @return {Object} Side effect configuration.\n     */\n    config (...params) {\n        if (params.length) {\n            this._config = mergeRecursive(this._config, params[0]);\n            return this;\n        }\n        return this._config;\n    }\n\n    disable () {\n        this._enabled = false;\n        return this;\n    }\n\n    enable () {\n        this._enabled = true;\n        return this;\n    }\n\n    isEnabled () {\n        return this._enabled;\n    }\n\n    /**\n     * Applies the interaction effect on the chart. This is where the implemntation of the side effect is defined.\n     *\n     * @param {Object} selectionSet Contains the entry and exit set of data which got affected during interaction.\n     * @param {Object} selectionSet.mergedEnter Combined previous entry and new entry set.\n     * @param {DataModel} selectionSet.mergedEnter.model Instance of data model containing all rows which got\n     * affected during interaction.\n     * @param {Array} selectionSet.mergedEnter.uids Ids of all rows which were affected during interaction.\n     * @param {Object} selectionSet.mergedExit Combined previous exit and new exit set.\n     * @param {DataModel} selectionSet.mergedExit.model Instance of data model containing rows which were not affected\n     * during interaction.\n     * @param {Array} selectionSet.mergedExit.uids Ids of all rows which were not affected during interaction.\n     * @param {Object} selectionSet.entrySet Entry set information.\n     * @param {Array} selectionSet.entrySet[0].uids All row ids which got affected during previous interaction.\n     * @param {Array} selectionSet.entrySet[1].uids All row ids which got affected during current interaction.\n     * @param {Array} selectionSet.exitSet[0].uids All row ids which were not affected during previous interaction.\n     * @param {Array} selectionSet.exitSet[1].uids All row ids which were not affected during current interaction.\n     * @param {Object} payload Payload information of the behavioural action on trigger of which this side effect\n     * is applied.\n     * @param {Object} options Optional information for side effect like strategy, etc.\n     */\n    apply () {\n        return this;\n    }\n\n    /**\n     * Adds a new strategy method for this side effect. The strategy method is implemented by side effect class.\n     *\n     * @param {string} name Name of the strategy.\n     * @param {Function} fn Strategy method.\n     *\n     * @return {GenericSideEffect} Instance of side effect.\n     */\n    setStrategy (name, fn) {\n        if (fn) {\n            this._strategies[name] = fn;\n        }\n        return this;\n    }\n\n    sourceInfo (...sourceInfo) {\n        if (sourceInfo.length) {\n            this._sourceInfo = sourceInfo[0];\n            return this;\n        }\n        return this._sourceInfo();\n    }\n\n    layers (...layers) {\n        if (layers.length) {\n            this._layers = layers[0];\n            return this;\n        }\n        return this._layers();\n    }\n\n    plotPointsFromIdentifiers (...params) {\n        if (params.length && params[0] instanceof Function) {\n            this._plotPointsFromIdentifiers = params[0];\n            return this;\n        }\n        return this._plotPointsFromIdentifiers(...params);\n    }\n}\n","import GenericSideEffect from './generic';\n\n/**\n * This class is inherited by all side effects which changes the look of any existing elements in the visualization.\n * For example, if a side effect wants to change the color of bar plots, then it is a surrogate side effect.\n *\n * To use this,\n * ```\n *      const SurrogateSideEffect = muze.SideEffects.standards.SurrogateSideEffect;\n *\n *      class BarColorChanger extends SurrogateSideEffect {\n *          static formalName () {\n *              return 'colorChanger';\n *          }\n *\n *          // Implement the logic of applying the style here.\n *          apply () {\n *          }\n *      }\n * ```\n * @public\n *\n * @module SurrogateSideEffect\n * @class\n * @extends GenericSideEffect\n */\nexport default class SurrogateSideEffect extends GenericSideEffect {\n    /**\n     * Applies or removes interaction styles from plot elements. An array of row ids needs to be passed\n     * which identifies the plot elements and applies styles to them.\n     *\n     * To apply the interaction style,\n     * ```\n     *      const entryRowIds = entrySet[0].uids;\n     *      const interactionStyle = [{\n     *          type: 'fill',\n     *          intensity: [0, 0, 15, 0] // hsla configuration\n     *      }];\n     *\n     *      this.applyInteractionStyle(entryRowIds, interactionStyle, 'brighten', true);\n     * ```\n     * @public\n     * @param {Array} set Array of row ids.\n     * @param {Array} config Style configuration.\n     * @param {Object} config[0] fill or stroke configuration.\n     * @param {string} config[0].type Type of style - fill or stroke.\n     * @param {Array} config[0].intensity hsla configuration.\n     * @param {string} interactionType Type of interaction. This is needed for storing the styles for\n     * each type of interaction in the plot elements.\n     * @param {boolean} apply Whether to apply or remove the interaction style.\n     *\n     * @return {SurrogateSideEffect} Instance of surrogate side effect.\n     */\n    applyInteractionStyle (set, config = {}, layers) {\n        const { interactionType, apply, reset = false } = config;\n        const allLayers = layers || this.firebolt.context.layers();\n        allLayers.forEach((layer) => {\n            const { interactive } = layer.config();\n            if (interactive !== false) {\n                const layerFields = layer.data().getFieldsConfig();\n                const filteredUids = set.uids.filter(([, measures = []]) => measures.every(m => m in layerFields))\n                    .map(d => d[0]);\n                const options = { apply, reset, styles: null };\n                layer.applyInteractionStyle(interactionType, filteredUids, options);\n            }\n        });\n        return this;\n    }\n}\n","import { makeElement } from 'muze-utils';\n\nimport GenericSideEffect from './generic';\n\n/**\n * Any side effect which will add any new element to the chart like drawing a rectangular box or any annotation over\n * the chart needs to inherit this class. This class has methods which returns the container where the dom elements\n * needs to be created.\n *\n * To use this,\n * ```\n *      const SpawnableSideEffect = muze.SideEffects.standards.SpawnableSideEffect;\n *\n *      class SelectionBox extends SpawnableSideEffect {\n *          static formalName () {\n *              return 'selectionBox';\n *          }\n *\n *          // Implement the logic of applying the style here.\n *          apply () {\n *          }\n *      }\n * ```\n * @public\n * @class\n * @extends GenericSideEffect\n * @module SpawnableSideEffect\n */\nexport default class SpawnableSideEffect extends GenericSideEffect {\n    /**\n     * Creates a html or svg element in the container.\n     *\n     * @public\n     * @param {SVGElement|HTMLElement} container Container where the dom element will be rendered.\n     * @param {string} elemType Type of dom element.\n     * @param {Array} data Array of objects with which the dom elements will be binded.\n     * @param {string} className class name of the element.\n     *\n     * @return {Selection} D3 Selection of the element.\n     */\n    createElement (container, elemType, data, className, callbacks) {\n        return makeElement(container, elemType, data, className, callbacks);\n    }\n\n    /**\n     * Returns the drawing information for side effect like svg container, dimensions of the visual unit.\n     *\n     * @public\n     * @return {Object} Drawing information for side effect.\n     * ```\n     *      sideEffectGroup: // svg container where the side effect needs to be appended.\n     *      svgContainer: // svg container of the {@link VisualUnit}.\n     *      htmlContainer: // html div container of the {@link VisualUnit}.\n     *      width: // Width of the {@link VisualUnit}\n     *      height: // Height of the {@link VisualUnit}\n     * ```\n     */\n    drawingContext (...drawingContext) {\n        if (drawingContext.length) {\n            this._drawingContext = drawingContext[0];\n            return this;\n        }\n        return this._drawingContext();\n    }\n\n    show () {\n        return this;\n    }\n\n    hide () {\n        return this;\n    }\n}\n","import { selectElement } from 'muze-utils';\n\nexport const getBoxDimensionsFromPayload = (payload, axes, axisFields) => {\n    let x1;\n    let x2;\n    let y1;\n    let y2;\n    let xRange;\n    let yRange;\n    const criteria = payload.criteria;\n    const dimensions = payload.dimensions || {};\n    const { x: xDim, y: yDim } = dimensions;\n\n    if (!criteria) return null;\n\n    if (axes.x && axes.y) {\n        const xAxis = axes.x[0];\n        const yAxis = axes.y[0];\n        const xLinear = xAxis.constructor.type() === 'linear';\n        const yLinear = yAxis.constructor.type() === 'linear';\n        const xField = `${axisFields.x[0]}`;\n        const yField = `${axisFields.y[0]}`;\n        const xCriteria = criteria[xField];\n        const yCriteria = criteria[yField];\n\n        if (xCriteria && xCriteria[0] instanceof Array) {\n            xRange = xCriteria[0];\n            yRange = xCriteria[1];\n        } else {\n            xRange = xCriteria || [];\n            yRange = yCriteria || [];\n        }\n\n        if (xRange && xRange.length) {\n            const domain = xAxis.domain();\n            const bandScale = xAxis.constructor.type() === 'band';\n            let x1Val = xRange[0];\n            let x2Val = xRange[xRange.length - 1];\n\n            if (bandScale) {\n                let x1DomainIndex = domain.indexOf(xRange[0]);\n                let x2DomainIndex = domain.indexOf(xRange[xRange.length - 1]);\n                [x1DomainIndex, x2DomainIndex] = [x1DomainIndex, x2DomainIndex].sort((a, b) => a - b);\n                x1Val = domain[x1DomainIndex];\n                x2Val = domain[x2DomainIndex];\n            }\n\n            x1 = xAxis.getScaleValue(x1Val);\n            x2 = xAxis.getScaleValue(x2Val);\n            x2 += bandScale ? xAxis.getUnitWidth() : 0;\n        }\n\n        if (yRange && yRange.length) {\n            const domain = yAxis.domain();\n            const bandScale = yAxis.constructor.type() === 'band';\n            let y1Val = yRange[0];\n            let y2Val = yRange[yRange.length - 1];\n\n            if (bandScale) {\n                let y1DomainIndex = domain.indexOf(yRange[0]);\n                let y2DomainIndex = domain.indexOf(yRange[yRange.length - 1]);\n                [y1DomainIndex, y2DomainIndex] = [y1DomainIndex, y2DomainIndex].sort(((a, b) => b - a));\n                y1Val = domain[y1DomainIndex];\n                y2Val = domain[y2DomainIndex];\n            }\n\n            y1 = yAxis.getScaleValue(y1Val);\n            y2 = yAxis.getScaleValue(y2Val);\n            y2 += yAxis.constructor.type() === 'band' ? yAxis.getUnitWidth() : 0;\n        }\n\n        if ((yLinear && xLinear) || !payload.dragEnd) {\n            if (xDim) {\n                [x1, x2] = xDim;\n            }\n            if (yDim) {\n                [y1, y2] = yDim;\n            }\n        }\n    }\n\n    return {\n        dimension: {\n            x1,\n            x2,\n            y1,\n            y2\n        },\n        direction: 'both'\n    };\n};\n\nexport const changeVisibility = (context, sideEffectGroup, visible) => {\n    const config = context.config();\n    const className = config.defClassName;\n    const classPrefix = config.classPrefix;\n    selectElement(sideEffectGroup).selectAll(`.${classPrefix}-${className}`)\n                    .style('display', visible ? 'block' : 'none');\n};\n","import {\n    getQualifiedClassName,\n    selectElement,\n    makeElement,\n    isValidValue\n} from 'muze-utils';\nimport { SELECTIONDRAG } from '../../enums/actions';\nimport { CLASSPREFIX } from '../../enums/constants';\nimport './styles.scss';\nimport SpawnableSideEffect from '../spawnable';\nimport { selectionBoxDrag } from '../../actions/physical/selection-box-drag';\nimport { getBoxDimensionsFromPayload, changeVisibility } from './helper';\nimport { BEHAVIOURS } from '../..';\n\n/**\n * This class is used to create a selection box which is used by visual unit for brushing and\n * selection in the canvas.\n * @class SelectionBox\n */\nclass SelectionBox extends SpawnableSideEffect {\n    /**\n     * It returns the default configuration needed by selectionbox.\n     * @return {Object} Default configuration of the selection box.\n     */\n    static defaultConfig () {\n        return {\n            defClassName: 'selection-box-group',\n            className: '',\n            classPrefix: CLASSPREFIX,\n            box: {\n                defClassName: 'selection-box',\n                className: ''\n            },\n            transition: {\n                duration: 200\n            },\n            persistent: false\n        };\n    }\n\n    static formalName () {\n        return 'selectionBox';\n    }\n\n    /**\n     * Draws the selectionbox with the specified dimensions.\n     * @param {Object} dimension Dimensions of the selection box.\n     * @param {number} dimension.x1 Starting x position\n     * @param {number} dimension.x2 Ending x position\n     * @param {number} dimension.y1 Starting y position\n     * @param {number} dimension.y2 Ending y position\n     * @param {Object} conf Configuration needed to draw the selection box\n     * @param {number} unitWidth Width of the visual unit.\n     * @param {number} unitHeight Height of the visual unit.\n     */\n    apply (selectionSet, payload) {\n        let x = 0;\n        let y = 0;\n        let width;\n        let height;\n        const config = this._config;\n        const boxConf = config.box;\n        const firebolt = this.firebolt;\n        const drawingInf = this.drawingContext();\n        const mountPoint = drawingInf.sideEffectGroup;\n        const unitWidth = drawingInf.width;\n        const unitHeight = drawingInf.height;\n        const classPrefix = config.classPrefix;\n        const selectionGroupClassName = config.defClassName;\n\n        width = unitWidth;\n        height = unitHeight;\n\n        // Hide selection-box on dragEnd or when criteria is empty\n        if (!payload.criteria || (payload.hideSelBox && !config.persistent)) {\n            this.hide(drawingInf);\n            return this;\n        }\n\n        const sourceInf = this.sourceInfo();\n        const { dimension, direction } =\n            getBoxDimensionsFromPayload(payload, sourceInf.axes, sourceInf.fields);\n        const transition = payload.dragEnd && config.transition;\n\n        if (direction === 'both') {\n            x = Math.min(dimension.x1, dimension.x2);\n            y = Math.min(dimension.y1, dimension.y2);\n            width = Math.abs(dimension.x2 - dimension.x1);\n            height = Math.abs(dimension.y2 - dimension.y1);\n        }\n\n        this.show(drawingInf);\n        // Create the data array for drawing the rectangle\n        const points = [\n            {\n                x,\n                y,\n                width,\n                height\n            }\n        ];\n        // Create the container group for selection box.\n        const selectionGroup = makeElement(selectElement(mountPoint), 'g', [1],\n            `.${classPrefix}-${selectionGroupClassName}`);\n        const sideEffect = this;\n        const selection = selectionGroup.selectAll('rect').data(points);\n        const selectionBox = selection.enter().append('rect')\n                        .each(function () {\n                            // Add selectiondrag entry in firebolt._actionBehaviourMap\n                            firebolt.registerPhysicalBehaviouralMap({\n                                [SELECTIONDRAG]: {\n                                    target: [selectElement(this)],\n                                    behaviours: [BEHAVIOURS.BRUSH]\n                                }\n                            });\n                            selectionBoxDrag(firebolt)(selectElement(this), ['brush'], sideEffect);\n                        })\n                        .merge(selection)\n                        .each(function (attrs) {\n                            let element = selectElement(this);\n                            transition && (element = element.transition().duration(transition.duration));\n                            for (const key in attrs) {\n                                if ({}.hasOwnProperty.call(attrs, key)) {\n                                    isValidValue(attrs[key]) && element.attr(key, attrs[key]);\n                                }\n                            }\n                        });\n        // Get the qualified class name for selection box rectangle\n        const boxClassName = getQualifiedClassName(boxConf.defClassName, this._id, classPrefix);\n        selectionBox.classed(boxClassName.join(' '), true);\n        selectionBox.classed(boxConf.className, true);\n\n        return this;\n    }\n\n    hide (drawingInf) {\n        changeVisibility(this, drawingInf.sideEffectGroup, false);\n    }\n\n    show (drawingInf) {\n        changeVisibility(this, drawingInf.sideEffectGroup, true);\n    }\n}\n\nexport default SelectionBox;\n","export const CLASSPREFIX = 'muze';\nexport const CONSOLIDATED = 'consolidated';\nexport const FRAGMENTED = 'fragmented';\nexport const NULL = 'null';\nexport const UNDEFINED = 'undefined';\n","import { CLASSPREFIX } from './constants';\n\nexport const defaultConfig = {\n    classPrefix: CLASSPREFIX,\n    defClassName: 'tooltip-box',\n    parentClassName: 'tooltip-parent-container',\n    connectorClassName: 'tooltip-connectors',\n    className: '',\n    row: {\n        margin: 0\n    },\n    spacing: 5,\n    content: {\n        spacing: 5,\n        iconContainerSize: 10,\n        iconScale: 1,\n        iconShape: 'circle',\n        iconColor: '#ff0000',\n        rowMargin: '4px 0 4px 0',\n        margin: 10,\n        separator: ':',\n        className: 'tooltip-content-container',\n        parentClassName: 'tooltip-content-parent-container'\n    },\n    arrow: {\n        size: 10,\n        disabled: false,\n        defClassName: 'tooltip-arrow',\n        className: '',\n        color: 'rgba(195,195,195,0.85)'\n    }\n};\n","export const CLASSPREFIX = 'muze';\nexport const ARROW_RIGHT = 'right';\nexport const ARROW_TOP = 'top';\nexport const ARROW_BOTTOM = 'bottom';\nexport const ARROW_LEFT = 'left';\nexport const TOOLTIP_LEFT = 'left';\nexport const TOOLTIP_RIGHT = 'right';\nexport const TOOLTIP_BOTTOM = 'bottom';\nexport const TOOLTIP_TOP = 'top';\nexport const INITIAL_STYLE = {\n    position: 'absolute',\n    width: 0,\n    height: 0\n};\nexport const TABLE_FORMAT = 'table';\n","import {\n    selectElement,\n    mergeRecursive,\n    makeElement,\n    setAttrs,\n    setStyles,\n    getSymbol,\n    isSimpleObject\n} from 'muze-utils';\nimport { TABLE_FORMAT } from './constants';\nimport { defaultConfig } from './default-config';\n\n/**\n * This class is used to manage the content of tooltip.\n */\nexport default class Content {\n    /**\n     * Creates an instance of content.\n     */\n    constructor () {\n        this._model = null;\n        this._formatter = null;\n        this._config = this.constructor.defaultConfig();\n    }\n   /**\n     * Returns the default configuration of tooltip\n     * @return {Object} Configuration of tooltip.\n     */\n    static defaultConfig () {\n        const config = defaultConfig.content;\n        config.classPrefix = defaultConfig.classPrefix;\n        return config;\n    }\n\n    config (...c) {\n        if (c.length > 0) {\n            this._config = mergeRecursive(this._config, c[0]);\n            return this;\n        }\n        return this._config;\n    }\n\n    /**\n     * Update model. The format contains presentation strategy which determines how to show the content.\n     * If no strategy is mentioned then default is to show key value pair\n    */\n    update (item) {\n        this._model = item.model;\n        this._formatter = item.formatter;\n        return this;\n    }\n\n    context (ctx) {\n        this._context = ctx;\n        return this;\n    }\n\n    render (mount) {\n        let data;\n        const config = this._config;\n        const iconContainerSize = config.iconContainerSize;\n        const formatter = this._formatter;\n        const rowMargin = config.rowMargin;\n        const model = this._model;\n        const { classPrefix } = config;\n\n        this._mount = mount;\n        if (model instanceof Array) {\n            data = model;\n        } else {\n            data = formatter(this._model, this.config(), this._context);\n        }\n\n        if (data instanceof Function) {\n            const mountHtmlTooltip = makeElement(mount, 'div', [1], `${classPrefix}-tooltip-html-container`);\n            mountHtmlTooltip.html(data());\n        } else {\n            let content = data;\n            let displayFormat = 'default';\n\n            if (isSimpleObject(data)) {\n                content = data.content;\n                displayFormat = data.displayFormat;\n            }\n\n            const body = makeElement(mount, 'div', [displayFormat], `${classPrefix}-tooltip-content`, {},\n                d => d);\n\n            if (displayFormat === TABLE_FORMAT) {\n                const table = makeElement(body, 'table', [1], `${classPrefix}-tooltip-table`);\n                const tbody = makeElement(table, 'tbody', [1], `${classPrefix}-tooltip-table-tbody`);\n                const rows = makeElement(tbody, 'tr', content, `${classPrefix}-tooltip-table-row`);\n                rows.each(function (d, i) {\n                    selectElement(this).classed(`${classPrefix}-tooltip-table-row-${i}`, true);\n                });\n                const cells = makeElement(rows, 'td', d => d, `${classPrefix}-tooltip-table-cell`);\n                cells.each(function (d) {\n                    selectElement(this).html(d);\n                });\n            } else {\n                const rows = makeElement(body, 'div', content, '', {\n                    update: (elem, elemData) => elem.attr('class', elemData.className)\n                });\n                const cells = makeElement(rows, 'span', d => d.data, `${classPrefix}-tooltip-content`);\n                cells.attr('class', `${classPrefix}-tooltip-content`);\n                setStyles(rows, {\n                    margin: rowMargin\n                });\n                setStyles(cells, {\n                    display: 'inline-block' // 'margin-right': `${config.spacing}px`\n                });\n\n                cells.each(function (d) {\n                    const el = selectElement(this);\n                    el.html('');\n                    if (d instanceof Object) {\n                        if (d.type === 'icon') {\n                            const svg = makeElement(el, 'svg', [1]);\n                            const path = makeElement(svg, 'path', [1]);\n                            const shape = d.shape instanceof Function ? d.shape : getSymbol(d.shape);\n\n                            setAttrs(svg, {\n                                x: 0,\n                                y: 0,\n                                width: iconContainerSize,\n                                height: iconContainerSize\n                            });\n                            setAttrs(path, {\n                                d: shape.size(d.size)(),\n                                transform: `translate(${iconContainerSize / 2}, ${iconContainerSize / 2})`\n                            });\n                            setStyles(path, {\n                                fill: d.color\n                            });\n                            setStyles(svg, {\n                                width: `${iconContainerSize}px`,\n                                height: `${iconContainerSize}px`\n                            });\n                        } else {\n                            el.html(d.value);\n                            d.className && el.classed(d.className, true);\n                            setStyles(el, d.style);\n                        }\n                    } else {\n                        el.html(d);\n                    }\n                });\n            }\n        }\n        return this;\n    }\n\n    clear () {\n        this._model = null;\n        return this;\n    }\n}\n","import {\n    mergeRecursive,\n    getQualifiedClassName,\n    getUniqueId,\n    selectElement,\n    makeElement,\n    getMaxPoint\n} from 'muze-utils';\nimport { ARROW_BOTTOM, ARROW_LEFT, ARROW_RIGHT, TOOLTIP_LEFT, TOOLTIP_RIGHT, TOOLTIP_BOTTOM,\n    TOOLTIP_TOP } from './constants';\nimport { defaultConfig } from './default-config';\nimport { reorderContainers } from './helper';\nimport './styles.scss';\nimport Content from './content';\n\n/**\n * This component is responsible for creating a tooltip element. It appends the tooltip\n * in the body element.\n * @class Tooltip\n */\nexport default class Tooltip {\n    /**\n     * Initializes the tooltip with the container element and configuration\n     * @param {HTMLElement} container container where the tooltip will be mounted.\n     * @param {string} className Class name of the tooltip.\n     */\n    constructor (htmlContainer, svgContainer) {\n        let connectorContainer = svgContainer;\n        this._id = getUniqueId();\n        this._config = {};\n        this.config({});\n        const tooltipConf = this._config;\n        const classPrefix = tooltipConf.classPrefix;\n        const contentClass = tooltipConf.content.parentClassName;\n        const container = makeElement(htmlContainer, 'div', [1], `${classPrefix}-tooltip-container`);\n        this._container = container;\n        this._tooltipContainer = container.append('div').style('position', 'absolute');\n        this._contentContainer = this._tooltipContainer.append('div').attr('class',\n            `${classPrefix}-${tooltipConf.defClassName} ${classPrefix}-${contentClass}\n            ${tooltipConf.className}`);\n\n        if (!svgContainer) {\n            connectorContainer = htmlContainer.append('svg').style('pointer-events', 'none');\n        }\n\n        this._contents = {};\n        this._tooltipConnectorContainer = selectElement(connectorContainer)\n            .append('g')\n            .attr('class', `${tooltipConf.classPrefix}-${tooltipConf.connectorClassName}`);\n        const id = this._id;\n        const defClassName = tooltipConf.parentClassName;\n        const qualifiedClassName = getQualifiedClassName(defClassName, id, tooltipConf.classPrefix);\n\n        this.addClass(qualifiedClassName.join(' '));\n        this.hide();\n    }\n\n    /**\n     * Sets the configuration of tooltip.\n     * @param {Object} config Configuration of tooltip\n     * @return {Tooltip} Instance of tooltip\n     */\n    config (...config) {\n        if (config.length > 0) {\n            const defConf = mergeRecursive({}, this.constructor.defaultConfig());\n            this._config = mergeRecursive(defConf, config[0]);\n            return this;\n        }\n        return this._config;\n    }\n\n    /**\n     * Returns the default configuration of tooltip\n     * @return {Object} Configuration of tooltip.\n     */\n    static defaultConfig () {\n        return defaultConfig;\n    }\n    /**\n     * Sets the class name of tooltip\n     * @param {string} className tooltip class name\n     * @return {Tooltip} Instance of tooltip.\n     */\n    addClass (className) {\n        this._tooltipContainer.classed(className, true);\n        return this;\n    }\n\n    context (...ctx) {\n        if (ctx.length) {\n            this._context = ctx[0];\n            return this;\n        }\n        return this._context;\n    }\n\n    content (name, data, contentConfig = {}) {\n        const config = this.config();\n        const { classPrefix } = config;\n        const contentClass = config.content.className;\n        const formatter = config.formatter;\n        const className = `${classPrefix}-${contentClass}-${name}`;\n        const specificClass = `${classPrefix}-${contentConfig.className}`;\n        const content = this._contents[name] = this._contents[name] || new Content();\n        const container = makeElement(this._contentContainer, 'div', [contentConfig.order], className);\n        container.attr('class', `${classPrefix}-${contentClass} ${className} ${specificClass}`);\n        reorderContainers(this._contentContainer, `.${classPrefix}-${contentClass}`);\n        const contentConf = config.content;\n        contentConfig.classPrefix = this._config.classPrefix;\n        content.config(contentConf);\n\n        if (data === null) {\n            content.clear();\n            container.remove();\n            delete this._contents[name];\n        } else {\n            content.update({\n                model: data,\n                formatter: contentConfig.formatter || formatter\n            });\n            content.context(this._context);\n            content.render(container);\n        }\n\n        if (!Object.keys(this._contents).length) {\n            this.hide();\n        }\n        return this;\n    }\n\n    getContents () {\n        return Object.values(this._contents);\n    }\n\n    /**\n     * Positions the tooltip at the given x and y position.\n     * @param {number} x x position\n     * @param {number} y y position\n     * @return {Tooltip} Instance of tooltip.\n     */\n    position (x, y) {\n        if (!Object.keys(this._contents).length) {\n            this.hide();\n            return this;\n        }\n        this.show();\n        const target = this._target;\n\n        if (target) {\n            const node = this._tooltipContainer.node();\n            const tooltipPos = this._orientation;\n            const outsidePlot = tooltipPos === TOOLTIP_LEFT || tooltipPos === TOOLTIP_RIGHT ?\n                (y + node.offsetHeight) < target.y || y > (target.y + target.height) :\n                (x + node.offsetWidth) < target.x || x > (target.x + target.width);\n\n            if (outsidePlot) {\n                let path;\n                this._tooltipConnectorContainer.style('display', 'block');\n                const connector = this._tooltipConnectorContainer.selectAll('path').data([1]);\n                const enter = connector.enter().append('path');\n                if (tooltipPos === ARROW_LEFT) {\n                    path = `M ${x} ${y + node.offsetHeight / 2} L ${target.x + target.width}`\n                        + ` ${target.y + target.height / 2}`;\n                } else if (tooltipPos === ARROW_RIGHT) {\n                    path = `M ${x + node.offsetWidth} ${y + node.offsetHeight / 2}`\n                            + ` L ${target.x} ${target.y + target.height / 2}`;\n                } else if (tooltipPos === ARROW_BOTTOM) {\n                    path = `M ${x + node.offsetWidth / 2} ${y + node.offsetHeight}`\n                        + ` L ${target.x + target.width / 2} ${target.y}`;\n                }\n                enter.merge(connector).attr('d', path).style('display', 'block');\n            } else {\n                this._tooltipConnectorContainer.style('display', 'none');\n            }\n        }\n\n        const offset = this._offset || {\n            x: 0,\n            y: 0\n        };\n        this._tooltipContainer.style('left', `${offset.x + x}px`).style('top',\n            `${offset.y + y}px`);\n\n        return this;\n    }\n\n    /**\n     * Positions the tooltip relative to a rectangular box. It takes care of tooltip overflowing the\n     * boundaries.\n     * @param {Object} dim Dimensions of the plot.\n     */\n    positionRelativeTo (dim, tooltipConf = {}) {\n        let obj;\n        const orientation = tooltipConf.orientation;\n        this.show();\n        if (!dim) {\n            this.hide();\n            return this;\n        }\n\n        const extent = this._extent;\n        const contentContainer = this._contentContainer.node();\n        this._tooltipContainer.style('top', '0px')\n                        .style('left', '0px')\n                        .style('width', '2000px')\n                        .style('height', '2000px');\n\n        const offsetWidth = contentContainer.offsetWidth + 4;\n        const offsetHeight = contentContainer.offsetHeight + 4;\n        const config = this._config;\n        const offset = this._offset;\n        const spacing = config.spacing;\n        const draw = tooltipConf.draw !== undefined ? tooltipConf.draw : true;\n        const topSpace = dim.y;\n        // When there is no space in right\n        const dimX = dim.x + dim.width + offset.x;\n        const rightSpace = extent.width - dimX;\n        const leftSpace = dim.x + offset.x - extent.x;\n        const bottomSpace = extent.height - (dim.y + dim.height + offset.y);\n        const arrowSize = spacing;\n        const tooltipHeight = offsetHeight + arrowSize;\n        const tooltipWidth = offsetWidth + arrowSize;\n\n        const spaces = [{\n            position: 'top',\n            value: topSpace - tooltipHeight\n        }, {\n            position: 'right',\n            value: rightSpace - tooltipWidth\n        }, {\n            position: 'left',\n            value: leftSpace - tooltipWidth\n        }, {\n            position: 'bottom',\n            value: bottomSpace - tooltipHeight\n        }];\n\n        const positionHorizontal = (positionVal) => {\n            let position;\n            let x = dim.x + dim.width;\n            let y = dim.y;\n\n            if (positionVal === 'right') {\n                position = TOOLTIP_LEFT;\n                x += arrowSize;\n            } else if (positionVal === 'left') {\n                x = dim.x - offsetWidth;\n                position = TOOLTIP_RIGHT;\n                x -= arrowSize;\n            }\n\n            if (dim.height < offsetHeight) {\n                y = Math.max(0, dim.y + dim.height / 2 - offsetHeight / 2);\n            }\n\n            return {\n                position,\n                x,\n                y\n            };\n        };\n\n        const positionVertical = (positionVal) => {\n            let position;\n            let y;\n            // Position tooltip at the center of plot\n            let x = dim.x - offsetWidth / 2 + dim.width / 2;\n\n            // Overflows to the right\n            if ((extent.width - (dim.x + offset.x)) < offsetWidth) {\n                x = extent.width - offsetWidth - offset.x;\n            } else if ((x + offset.x) < extent.x) { // Overflows to the left\n                x = extent.x;\n            }\n\n            if (positionVal === 'top') {\n                y = dim.y - offsetHeight - arrowSize;\n                position = TOOLTIP_BOTTOM;\n            } else {\n                y = dim.y + dim.height + arrowSize;\n                position = TOOLTIP_TOP;\n            }\n\n            return {\n                position,\n                x,\n                y\n            };\n        };\n\n        this._target = dim;\n\n        const hMax = getMaxPoint(spaces.filter(d => d.position === 'left' || d.position === 'right'),\n            'value');\n        const vMax = getMaxPoint(spaces.filter(d => d.position === 'top' || d.position === 'bottom'),\n                'value');\n        if (!orientation) {\n            if (hMax.value > 0) {\n                const position = hMax.position;\n                obj = positionHorizontal(position);\n            } else {\n                const position = vMax.position;\n                obj = positionVertical(position);\n            }\n        } else if (orientation === 'horizontal') {\n            const position = hMax.position;\n            obj = positionHorizontal(position);\n        } else {\n            const position = vMax.position;\n            obj = positionVertical(position);\n        }\n\n        this._position = {\n            x: obj.x,\n            y: obj.y\n        };\n\n        this._tooltipContainer.style('height', `${offsetHeight}px`)\n            .style('width', `${offsetWidth}px`);\n        this._orientation = obj.position;\n        draw && this.position(obj.x, obj.y);\n        return this;\n    }\n\n    /**\n     * Hides the tooltip element.\n     * @return {Tooltip} Instance of tooltip.\n     */\n    hide () {\n        this._tooltipContainer.style('display', 'none');\n        this._tooltipConnectorContainer.style('display', 'none');\n        return this;\n    }\n\n    /**\n     * Shows the tooltip element.\n     * @return {Tooltip} Instance of tooltip.\n     */\n    show () {\n        this._tooltipContainer.style('display', 'block');\n        return this;\n    }\n\n    extent (extent) {\n        this._extent = extent;\n        return this;\n    }\n\n    offset (offset) {\n        this._offset = offset;\n        return this;\n    }\n\n    remove () {\n        this._tooltipContainer.remove();\n        this._tooltipConnectorContainer.remove();\n        return this;\n    }\n}\n","export const reorderContainers = (parentContainer, className) => {\n    parentContainer.selectAll(className).sort((a, b) => a - b);\n};\n","export const SELECTION_SUMMARY = 'selectionSummary';\nexport const HIGHLIGHT_SUMMARY = 'highlightSummary';\n","import {\n    FieldType,\n    GROUP_BY_FUNCTIONS,\n    formatTemporal,\n    DimensionSubtype,\n    MeasureSubtype,\n    DataModel,\n    defaultValue,\n    retrieveFieldDisplayName,\n    nestCollection,\n    getObjProp,\n    intersect,\n    ReservedFields\n} from 'muze-utils';\nimport { TABLE_FORMAT } from '@chartshq/muze-tooltip';\nimport { SELECTION_SUMMARY, HIGHLIGHT_SUMMARY } from '../../enums/tooltip-strategies';\nimport { BAR } from '../../../../visual-group/src/enums/constants';\nimport { NULL, UNDEFINED } from '../../enums/constants';\n\nconst { SUM, COUNT } = GROUP_BY_FUNCTIONS;\nconst { InvalidAwareTypes } = DataModel;\nconst FIRST_VALUE_MARGIN = '10px';\nconst STACK = 'stack';\nconst SINGLE_DATA_MARGIN = 10;\nconst defNumberFormat = value => `${value % value.toFixed(0) === 0 ? value : value.toFixed(2)}`;\n\nconst formatters = (formatter, interval, valueParser) => ({\n    [DimensionSubtype.TEMPORAL]: value => (value instanceof InvalidAwareTypes ? valueParser(value) :\n        formatTemporal(Number(value), interval)),\n    [MeasureSubtype.CONTINUOUS]: value => (value instanceof InvalidAwareTypes ? valueParser(value) :\n        formatter(defNumberFormat(value))),\n    [DimensionSubtype.CATEGORICAL]: value => valueParser(value)\n});\n\nconst getTabularData = (dataObj, fieldInf) => {\n    const rows = [];\n    const { data, schema } = dataObj;\n    rows.push(schema.map(d => fieldInf[d.name].displayName));\n\n    data.forEach((d) => {\n        const row = [];\n        schema.forEach((fieldObj, i) => {\n            const value = fieldInf[fieldObj.name].fn(d[i]);\n            row.push(value);\n        });\n        rows.push(row);\n    });\n    return rows;\n};\n\nconst isSingleValue = (dataLen, stackedSum) => dataLen === 1 && !stackedSum;\n\nconst getStackedKeyValue = (params) => {\n    const { field, value, classPrefix } = params;\n    return ({\n        className: `${classPrefix}-tooltip-stacked-row`,\n        data: [{\n            value: field,\n            className: `${classPrefix}-tooltip-stacked-row-key`\n        }, {\n            value: `${value}`,\n            className: `${classPrefix}-tooltip-stacked-row-value`\n        }]\n    });\n};\n\nconst getKeyValue = (params) => {\n    const { field, value, classPrefix, margin, isSelected, removeKey, stackedSum, isStackedBar } = params;\n    let { stackedValue } = params;\n\n    if (!removeKey) {\n        const keyObj = {\n            value: field,\n            className: `${classPrefix}-tooltip-key`\n        };\n        const valueObj = {\n            value,\n            className: `${classPrefix}-tooltip-value`\n        };\n\n        if (stackedValue === NULL || stackedValue === UNDEFINED) {\n            stackedValue = 0;\n        }\n\n        const stackedValueObj = {\n            value: stackedSum ? `(${(stackedValue * 100 / stackedSum).toFixed(2)} %)` : undefined,\n            className: `${classPrefix}-tooltip-stacked-percentage`\n        };\n\n        if (margin !== undefined) {\n            keyObj.style = {\n                'margin-left': `${margin}px`\n            };\n            valueObj.style = {\n                'margin-left': `${margin}px`\n            };\n            stackedValueObj.style = {\n                'margin-left': `${margin}px`\n            };\n        }\n\n        return ({\n            className: isSelected ? `${classPrefix}-tooltip-row ${classPrefix}-tooltip-selected-row`\n                : `${classPrefix}-tooltip-row`,\n            data: stackedSum && isStackedBar ? [keyObj, stackedValueObj, valueObj] : [keyObj, valueObj]\n        });\n    }\n    return ({\n        data: [{\n            className: '',\n            value,\n            style: {\n                'margin-left': FIRST_VALUE_MARGIN\n            }\n        }],\n        className: `${classPrefix}-tooltip-first`\n    });\n};\n\nexport const getStackedSum = (values, index) => values.reduce((a, b) => {\n    if (b[index] instanceof InvalidAwareTypes) {\n        return a + 0;\n    }\n    return a + b[index];\n}, 0);\n\nexport const isStackedChart = layers => layers.some(d => d.transformType() === STACK);\nexport const isStackedBarChart = layers => layers.some(d => d.transformType() === STACK && d.config().mark === BAR);\n\nconst generateRetinalFieldsValues = (valueArr, retinalFields, content, context) => {\n    const {\n        fieldsConfig,\n        dimensionMeasureMap,\n        axes,\n        config,\n        fieldInf,\n        dataLen,\n        target,\n        stackedSum,\n        isStackedBar\n    } = context;\n    const { classPrefix, margin, separator } = config;\n    const colorAxis = axes.color[0];\n    const shapeAxis = axes.shape[0];\n    const sizeAxis = axes.size[0];\n    const REF_VALUES_INDEX = 1;\n    const REF_KEYS_INDEX = 0;\n\n    for (const retField in retinalFields) {\n        const retIndex = fieldsConfig[retField].index;\n        const retinalFieldValue = valueArr[retIndex];\n        const measuresArr = dimensionMeasureMap[retField];\n        const icon = {\n            type: 'icon',\n            color: colorAxis.getColor(retinalFieldValue),\n            size: sizeAxis.config().value,\n            shape: shapeAxis.getShape(retinalFieldValue)\n        };\n        const { displayName, fn } = fieldInf[retField];\n        const formattedRetinalValue = fn(retinalFieldValue);\n\n        if (isSingleValue(dataLen, stackedSum)) {\n            content.push(getKeyValue({\n                field: displayName,\n                value: formattedRetinalValue,\n                classPrefix,\n                margin: SINGLE_DATA_MARGIN\n            }));\n        } else {\n            const hasMultipleMeasures = measuresArr.length > 1;\n            hasMultipleMeasures && (content.push({ data: [icon, formattedRetinalValue] }));\n            const selectedContext = target && target[REF_VALUES_INDEX][target[REF_KEYS_INDEX].indexOf(retField)];\n            const isSelected = selectedContext === retinalFieldValue;\n\n            measuresArr.forEach((measure) => {\n                const measureIndex = fieldsConfig[measure].index;\n                const { displayName: dName, fn: formatterFn } = fieldInf[measure];\n                const currentMeasureValue = valueArr[measureIndex];\n                const value = formatterFn(currentMeasureValue);\n                const keyValue = getKeyValue({\n                    field: hasMultipleMeasures ? `${dName}${separator}` : formattedRetinalValue,\n                    value,\n                    classPrefix,\n                    margin: hasMultipleMeasures ? margin : undefined,\n                    isSelected,\n                    stackedSum,\n                    stackedValue: currentMeasureValue instanceof InvalidAwareTypes\n                    ? currentMeasureValue.value()\n                    : currentMeasureValue.toFixed(2),\n                    isStackedBar\n                });\n\n                if (!hasMultipleMeasures) {\n                    keyValue.data = [icon, ...keyValue.data];\n                }\n                content.push(keyValue);\n            });\n        }\n    }\n};\n\nconst getFieldInf = (schema, dataModel, context) => {\n    const { valueParser, timeDiffs } = context;\n    const fieldsObj = dataModel.getFieldspace().fieldsObj();\n    const defFormatter = formatters(null, null, valueParser)[DimensionSubtype.CATEGORICAL];\n\n    return schema.reduce((inf, field) => {\n        const { subtype, name, type } = field;\n        const interval = subtype === DimensionSubtype.TEMPORAL ? timeDiffs[name] : 0;\n        const nf = type === FieldType.MEASURE ? fieldsObj[name].numberFormat() : val => val;\n        inf[name] = {\n            fn: defaultValue(formatters(nf, interval, valueParser)[subtype], defFormatter),\n            displayName: `${retrieveFieldDisplayName(dataModel, name)}`\n        };\n        return inf;\n    }, {});\n};\n\nexport const buildTooltipData = (dataModel, config = {}, context) => {\n    let nestedDataObj;\n    let fieldValues = [];\n    const { data, schema } = dataModel.getData();\n    const fieldspace = dataModel.getFieldspace();\n    const fieldsConfig = dataModel.getFieldsConfig();\n    const { color, shape, size } = context.retinalFields;\n    const detailFields = context.detailFields || [];\n    const { showStackSum = true } = context.config || {};\n    const { selectedMeasures = [] } = context.payload;\n    const dimensions = schema.filter(d => d.type === FieldType.DIMENSION);\n    const measures = schema.filter(d => d.type === FieldType.MEASURE);\n    const containsDetailField = !!intersect(schema, detailFields).length;\n    const dataLen = data.length;\n    const {\n        dimensionMeasureMap,\n        axes\n    } = context;\n    const fieldInf = getFieldInf(schema, dataModel, context);\n\n    let displayFormat;\n    if (dataLen > 1 && containsDetailField) {\n        fieldValues = getTabularData({\n            data,\n            schema,\n            fieldspace\n        }, fieldInf);\n        displayFormat = TABLE_FORMAT;\n    } else {\n        const retinalFields = [color.field, shape.field, size.field].reduce((acc, field) => {\n            field && fieldsConfig[field].def.type === FieldType.DIMENSION && (acc[field] = 1);\n            return acc;\n        }, {});\n        const filteredDimensions = dimensions.filter(field => !retinalFields[field.name]);\n        const indices = filteredDimensions.map(dim => fieldsConfig[dim.name].index);\n        const allMeasures = [...new Set(...Object.values(dimensionMeasureMap))];\n        const isStacked = isStackedChart(context.layers);\n        const isStackedBar = isStackedBarChart(context.layers);\n        const filteredMeasures = !isSingleValue(dataLen, isStacked)\n            ? measures.filter(d => allMeasures.indexOf(d.name) === -1)\n            : measures;\n\n        nestedDataObj = nestCollection({\n            data,\n            keys: indices\n        });\n\n        nestedDataObj = !('key' in nestedDataObj[0]) ? [{\n            values: nestedDataObj\n        }] : nestedDataObj;\n\n        const generateTooltipContent = (nestedData, index = 0, content = []) => {\n            const { classPrefix, separator } = config;\n            for (let i = 0, len = nestedData.length; i < len; i++) {\n                const { values, key } = nestedData[i];\n                const field = getObjProp(schema, indices[index], 'name');\n                const margin = dataLen === 1 || Object.keys(retinalFields).length === 0\n                ? SINGLE_DATA_MARGIN : undefined;\n                if (field) {\n                    const { displayName, fn } = fieldInf[field];\n                    const formattedValue = fn(key);\n                    const removeKey = !isSingleValue(dataLen, isStacked);\n                    content.push(getKeyValue({\n                        field: `${displayName}${separator}`,\n                        value: formattedValue,\n                        classPrefix,\n                        margin,\n                        isSelected: undefined,\n                        removeKey\n                    }));\n                }\n\n                if (values[0] && values[0].key) {\n                    generateTooltipContent(values, index + 1, content);\n                } else {\n                    let stackedSum = 0;\n                    if (isStacked && showStackSum) {\n                        stackedSum = getStackedSum(\n                            values,\n                            fieldsConfig[measures[0].name].index\n                        );\n                        const nf = measures[0].numberFormat;\n                        content.push(getStackedKeyValue({\n                            field: `${'Total'}${separator}`,\n                            value: nf ? nf(stackedSum.toFixed(2)) : stackedSum.toFixed(2),\n                            classPrefix\n                        }));\n                    }\n                    for (let j = 0, len2 = values.length; j < len2; j++) {\n                        const valueArr = values[j];\n                        generateRetinalFieldsValues(valueArr, retinalFields, content, {\n                            fieldInf,\n                            axes,\n                            config,\n                            fieldsConfig,\n                            dimensionMeasureMap,\n                            dataLen,\n                            target: context.payload.target,\n                            stackedSum,\n                            isStackedBar\n                        });\n                        filteredMeasures.forEach((measure) => {\n                            const { name } = measure;\n                            const { displayName, fn } = fieldInf[name];\n                            content.push(getKeyValue({\n                                field: `${displayName}${separator}`,\n                                isSelected: selectedMeasures.indexOf(name) !== -1,\n                                value: fn(valueArr[fieldsConfig[name].index]),\n                                classPrefix,\n                                margin: SINGLE_DATA_MARGIN\n                            }));\n                        });\n                    }\n                }\n            }\n        };\n        generateTooltipContent(nestedDataObj, 0, fieldValues);\n    }\n\n    return {\n        content: fieldValues,\n        displayFormat\n    };\n};\n\n/**\n * Calculate aggregated values of measures from entry set and datamodel.\n *\n * @param {DataModel} dm DataModel instance\n * @param {EntrySet} entrySet Entry set\n */\nconst getAggregatedValues = (dm, entrySet) => {\n    // const fields = entrySet.fields;\n    const aggFns = entrySet.aggFns;\n    // Create a map of all the dimensions and the measures\n    const dimsMap = entrySet.uids.reduce((acc, v) => {\n        const dims = v[0];\n\n        !acc[dims] && (acc[dims] = []);\n        acc[dims].push(v[1]);\n        return acc;\n    }, {});\n    const aggMeasures = Object.keys(dm.getFieldspace().getMeasure());\n    const aggregatedValues = {};\n    aggMeasures.forEach((measure) => {\n        // Filter all the rows which has this measure and dimensions and apply aggregation.\n        const groupedDm = dm.select((dmFields) => {\n            const id = dmFields[ReservedFields.ROW_ID];\n            const measures = dimsMap[id];\n            if (measures) {\n                return measures.find(arr => arr.indexOf(measure) !== -1);\n            }\n            return false;\n        }, {\n            saveChild: false\n        }).groupBy([''], {\n            [measure]: aggFns[measure] === COUNT ? SUM : aggFns[measure]\n        }, {\n            saveChild: false\n        });\n        const fieldsConfig = groupedDm.getFieldsConfig();\n        if (!groupedDm.isEmpty()) {\n            aggregatedValues[measure] = groupedDm.getData().data[0][fieldsConfig[measure].index];\n        }\n    });\n    return aggregatedValues;\n};\n\nexport const strategies = {\n    [SELECTION_SUMMARY]: (dm, config, context) => {\n        const { selectionSet } = context;\n        const { classPrefix } = config;\n        const tooltipConf = context.config;\n        const { showMultipleMeasures } = tooltipConf;\n        const aggFns = selectionSet.mergedEnter.aggFns;\n        const entryUids = selectionSet.mergedEnter.uids;\n        const fieldsConf = dm.getFieldsConfig();\n        const aggregatedValues = getAggregatedValues(dm, selectionSet.mergedEnter);\n        const values = [{\n            className: `${classPrefix}-tooltip-row`,\n            data: [{\n                value: `${entryUids.length}`,\n                style: {\n                    'font-weight': 'bold'\n                }\n            }, 'Items Selected']\n        }];\n        let measures = Object.keys(aggregatedValues);\n        if (!showMultipleMeasures) {\n            measures = measures.slice(0, 1);\n        }\n        // Prepare the tooltip content\n        measures.forEach((measure) => {\n            const { numberFormat = defNumberFormat } = fieldsConf[measure].def;\n            const value = aggregatedValues[measure];\n            const rowValues = value instanceof InvalidAwareTypes ? [] : [`(${aggFns[measure].toUpperCase()})`,\n                `${retrieveFieldDisplayName(dm, measure)}:`,\n                {\n                    value: numberFormat(value),\n                    style: {\n                        'font-weight': 'bold'\n                    },\n                    className: `${classPrefix}-tooltip-value`\n                }];\n            if (showMultipleMeasures) {\n                values.push({\n                    className: `${classPrefix}-tooltip-row`,\n                    data: rowValues\n                });\n            } else {\n                values[0].data.push(...rowValues);\n            }\n        });\n\n        return values;\n    },\n    [HIGHLIGHT_SUMMARY]: (data, config, context) => buildTooltipData(data, config, context)\n};\n","import { intersect } from 'muze-utils';\n\nexport const spaceOutBoxes = (boxes, extent, showVertically) => {\n    let y;\n    let height;\n    let x;\n    let width;\n    let i;\n    const pad = 5;\n    const len = boxes.length;\n    const spaceOutIfOverlap = (firstBox, secondBox, opposite) => {\n        x = firstBox.x;\n        width = firstBox.width;\n        y = firstBox.y;\n        height = firstBox.height;\n        const bottom = y + height;\n        const right = x + width;\n\n        if (showVertically) {\n            if (opposite ? y < (secondBox.y + secondBox.height) : bottom > secondBox.y) {\n                secondBox.y = opposite ? firstBox.y - secondBox.height - pad :\n                        bottom + pad;\n            }\n        } else if (opposite ? x < (secondBox.x + secondBox.width) : right > secondBox.x) {\n            secondBox.x = opposite ? firstBox.x - secondBox.width - pad :\n                    right + pad;\n        }\n    };\n\n    boxes.sort((a, b) => (showVertically ? a.y - b.y : a.x - b.x));\n    i = 0;\n\n    for (i = 0; i < len - 1; i++) {\n        spaceOutIfOverlap(boxes[i], boxes[i + 1]);\n    }\n\n    if ((boxes[i].y + boxes[i].height) > extent.height ||\n            (boxes[i].x + boxes[i].width) > extent.width) {\n        if (showVertically) {\n            boxes[i].y -= (boxes[i].height + boxes[i].y) - extent.height;\n        } else {\n            boxes[i].x -= (boxes[i].width + boxes[i].x) - extent.width;\n        }\n        for (i = len - 1; i > 0; i--) {\n            spaceOutIfOverlap(boxes[i], boxes[i - 1], true);\n        }\n    }\n    return boxes;\n};\n\nexport const shouldApplySideEffect = (dm, sideEffect) => {\n    const propagationInf = sideEffect.firebolt.getPropagationInf();\n    if (propagationInf.sourceIdentifiers && dm) {\n        const { fields } = propagationInf.sourceIdentifiers;\n        const sourceDims = fields.filter(field => field.type === 'dimension').map(d => d.name);\n        const dims = Object.keys(dm.getFieldspace().getDimension());\n        return intersect(sourceDims, dims).length;\n    }\n    return true;\n};\n","import { Tooltip as TooltipRenderer } from '@chartshq/muze-tooltip';\nimport { mergeRecursive, defaultValue } from 'muze-utils';\nimport { strategies } from './strategies';\nimport { TOOLTIP } from '../../enums/side-effects';\nimport SpawnableSideEffect from '../spawnable';\n\nimport './styles.scss';\nimport { HIGHLIGHT_SUMMARY } from '../../enums/tooltip-strategies';\nimport { shouldApplySideEffect } from '../helper';\n\nconst configResolvers = {\n    [HIGHLIGHT_SUMMARY]: (specificConf, config) => defaultValue(specificConf, config),\n    default: specificConf => defaultValue(specificConf, {})\n};\n\nconst sanitizeConfig = (config, context) => {\n    const strategyObj = context._strategies;\n    const sanitizedConf = Object.assign({}, config);\n    for (const key in strategyObj) {\n        sanitizedConf[key] = defaultValue(configResolvers[key], configResolvers.default)(config[key], config);\n    }\n    return sanitizedConf;\n};\n\nexport default class Tooltip extends SpawnableSideEffect {\n    constructor (...params) {\n        super(...params);\n        this._tooltips = {};\n        this._strategies = mergeRecursive({}, strategies);\n        this._strategy = HIGHLIGHT_SUMMARY;\n    }\n\n    static defaultConfig () {\n        return {\n            padding: 5,\n            offset: {\n                x: 0,\n                y: 0\n            },\n            highlightSummary: {\n                order: 1,\n                dataTransform: (dm, fields) => (fields ? dm.project(fields, { saveChild: false }) : dm)\n            },\n            selectionSummary: {\n                order: 0,\n                dataTransform: dm => dm\n            }\n        };\n    }\n\n    static formalName () {\n        return TOOLTIP;\n    }\n\n    config (...params) {\n        if (params.length) {\n            const config = this._config = mergeRecursive(this._config, sanitizeConfig(params[0], this));\n            const strategyObj = this._strategies;\n            for (const key in strategyObj) {\n                const formatter = config[key].formatter;\n                this.setStrategy(key, formatter);\n            }\n            return this;\n        }\n        return this._config;\n    }\n\n    apply (selectionSet, payload, options = {}) {\n        const dataModel = selectionSet && selectionSet.mergedEnter.model;\n        if (!shouldApplySideEffect(dataModel, this)) {\n            return this;\n        }\n        if ((payload.criteria === null || (dataModel && dataModel.isEmpty())) || selectionSet === null) {\n            this.hide(options, null);\n            return this;\n        }\n\n        const strategy = defaultValue(options.strategy, this._strategy);\n\n        this.createTooltip(dataModel, Object.assign({}, {\n            payload,\n            selectionSet,\n            strategy,\n            options\n        }), null, 0);\n\n        return this;\n    }\n\n    static target () {\n        return 'all';\n    }\n\n    hide (options) {\n        const tooltips = this._tooltips;\n        const { orientation } = this.config();\n\n        for (const key in tooltips) {\n            if ({}.hasOwnProperty.call(tooltips, key)) {\n                const tooltip = tooltips[key];\n                const strategy = options.strategy || this._strategy;\n                tooltip.content(strategy, null);\n                if (!Object.keys(tooltip._contents).length) {\n                    tooltip.hide();\n                } else {\n                    tooltip.positionRelativeTo(tooltip._target, {\n                        orientation\n                    });\n                }\n            }\n        }\n    }\n\n    getPlotPointsFromIdentifiers (payload) {\n        const target = payload.target;\n        // if (target) {\n        //     targetFields = target[0] || [];\n        //     const sourceFields = payload.sourceFields;\n        //     const indices = [];\n        //     for (let i = 0, len = targetFields.length; i < len; i++) {\n        //         if (sourceFields.indexOf(targetFields[i]) !== -1) {\n        //             indices.push(i);\n        //         }\n        //     }\n        //     target = target.map(d => d.filter((v, i) => indices.indexOf(i) !== -1));\n        // }\n\n        return super.plotPointsFromIdentifiers(target || payload.criteria, {\n            getBBox: true\n        });\n    }\n\n    createTooltip (dataModel, props = {}, plotDim, key) {\n        const drawingInf = this.drawingContext();\n        const sourceInf = this.sourceInfo();\n        const config = this.config();\n        const {\n            strategy,\n            payload,\n            selectionSet\n        } = props;\n        plotDim = defaultValue(plotDim, this.getPlotPointsFromIdentifiers(payload));\n        plotDim = plotDim && plotDim[0];\n        const pad = config.padding;\n        const { showInPosition, position: tooltipPos } = payload;\n        const { fields: projectFields, dataTransform } = config[strategy];\n\n        const strategyFn = this._strategies[strategy];\n        const dt = dataTransform(dataModel, projectFields, this);\n        const { parentContainer: layoutContainer, parentContainerDimensions } = drawingInf;\n        const layoutBoundBox = layoutContainer.getBoundingClientRect();\n        const unitBoundBox = drawingInf.htmlContainer.getBoundingClientRect();\n\n        const offsetLeft = unitBoundBox.left - layoutBoundBox.left;\n        const offsetTop = unitBoundBox.top - layoutBoundBox.top;\n        const tooltipInst = this._tooltips[key] = this._tooltips[key] || new TooltipRenderer(layoutContainer,\n            drawingInf.svgContainer);\n\n        Object.assign(sourceInf, {\n            payload,\n            firebolt: this.firebolt,\n            detailFields: [],\n            timeDiffs: sourceInf.timeDiffs,\n            valueParser: this.valueParser(),\n            selectionSet,\n            config: config[strategy]\n        });\n\n        tooltipInst.context(sourceInf);\n        tooltipInst.content(strategy, dt, {\n            formatter: strategyFn,\n            order: config[strategy].order,\n            className: config[strategy].className\n        })\n                        .config(this.config())\n                        .extent({\n                            x: 0,\n                            y: 0,\n                            width: parentContainerDimensions.width,\n                            height: parentContainerDimensions.height\n                        })\n                        .offset({\n                            x: offsetLeft + (config.offset.x || 0),\n                            y: offsetTop + (config.offset.y || 0)\n                        });\n\n        if (showInPosition) {\n            tooltipInst.position(tooltipPos.x + pad, tooltipPos.y + pad);\n        } else if (plotDim) {\n            tooltipInst.positionRelativeTo({\n                x: plotDim.x,\n                y: plotDim.y,\n                width: plotDim.width || 0,\n                height: plotDim.height || 0\n            }, {\n                orientation: config.orientation\n            }\n            );\n        } else {\n            tooltipInst.hide();\n        }\n    }\n}\n","import { FieldType, ReservedFields } from 'muze-utils';\nimport { spaceOutBoxes } from '../helper';\nimport { FRAGMENTED_TOOLTIP } from '../../enums/side-effects';\nimport Tooltip from '../tooltip';\n\nexport default class FragmentedTooltip extends Tooltip {\n    static formalName () {\n        return FRAGMENTED_TOOLTIP;\n    }\n\n    createTooltip (dataModel, props) {\n        let totalHeight = 0;\n        let totalWidth = 0;\n        const config = this.config();\n        const { strategy } = props;\n        const context = this.firebolt.context;\n        const drawingInf = this.drawingContext();\n\n        const tooltips = this._tooltips;\n        const boundBox = {\n            width: drawingInf.width,\n            height: drawingInf.height\n        };\n        const pad = config.padding;\n        const dataModels = [];\n        const sourceInf = context.getSourceInfo();\n        const fields = sourceInf.fields;\n        const xFieldDim = fields.x[0] ? fields.x[0].type() === FieldType.DIMENSION : false;\n        const showVertically = !!xFieldDim;\n        const boxes = [];\n        const uids = dataModel.getUids();\n\n        dataModels.push(...uids.map(uid => dataModel.select(fieldsArr =>\n            fieldsArr[ReservedFields.ROW_ID].value === uid, {\n                saveChild: false\n            })));\n\n        const enter = {};\n        for (let i = 0, len = dataModels.length; i < len; i++) {\n            const dm = dataModels[i];\n            const dimensions = dm.getData().schema.filter(d => d.type === FieldType.DIMENSION).map(d => d.name);\n            const plotDim = context.getPlotPointsFromIdentifiers(dm.project(dimensions), { getBBox: true });\n\n            super.createTooltip(dm, props, plotDim, i);\n            const tooltipInst = this._tooltips[i];\n            enter[i] = this._tooltips[i];\n\n            const position = tooltipInst._position;\n            const tooltipBoundBox = tooltipInst._tooltipContainer.node().getBoundingClientRect();\n\n            totalHeight += tooltipBoundBox.height + pad;\n            totalWidth += tooltipBoundBox.width + pad;\n\n            if (showVertically ? totalHeight > drawingInf.height : totalWidth > drawingInf.width) {\n                break;\n            }\n\n            position && boxes.push({\n                x: position.x,\n                y: position.y,\n                width: tooltipBoundBox.width,\n                height: tooltipBoundBox.height,\n                tooltip: tooltipInst\n            });\n        }\n\n        for (const key in tooltips) {\n            if (!enter[key]) {\n                const tooltip = tooltips[key];\n                tooltip.content(strategy, null);\n                if (!tooltip.getContents().length) {\n                    tooltip.remove();\n                    delete tooltips[key];\n                }\n            }\n        }\n\n        boxes.length && spaceOutBoxes(boxes, boundBox, showVertically);\n        boxes.forEach(box => box.tooltip.position(box.x, box.y, {\n            repositionArrow: true\n        }));\n\n        return this;\n    }\n\n    hide (options) {\n        const tooltips = this._tooltips;\n        for (const key in tooltips) {\n            if ({}.hasOwnProperty.call(tooltips, key)) {\n                const strategy = options.strategy || this._strategy;\n                tooltips[key].content(strategy, null);\n                tooltips[key].hide();\n            }\n        }\n    }\n}\n","import { selectElement, FieldType } from 'muze-utils';\n\nimport './styles.scss';\nimport { CLASSPREFIX } from '../../enums/constants';\nimport { CROSSLINE } from '../../enums/side-effects';\nimport SpawnableSideEffect from '../spawnable';\n\nexport default class Crossline extends SpawnableSideEffect {\n    static defaultConfig () {\n        return {\n            className: `${CLASSPREFIX}-crossline-group`,\n            bandClass: `${CLASSPREFIX}-crossband`,\n            lineClass: `${CLASSPREFIX}-crossline`\n        };\n    }\n\n    static formalName () {\n        return CROSSLINE;\n    }\n\n    apply (selectionSet, payload) {\n        let height;\n        let bandWidth;\n        let px;\n        let width;\n        const {\n            className,\n            bandClass,\n            lineClass\n        } = this.config();\n        const dataModel = selectionSet.mergedEnter.model;\n        const drawingInf = this.drawingContext();\n        const isEmptyDataModel = dataModel && dataModel.isEmpty();\n        if (payload.criteria && isEmptyDataModel) {\n            this.hide();\n            return this;\n        }\n        if (payload.criteria === null || !dataModel) {\n            this.hide();\n            return this;\n        }\n\n        const dataObj = dataModel.getData();\n        const sourceInf = this.firebolt.context.getSourceInfo();\n        const axes = sourceInf.axes;\n        const axisFields = sourceInf.fields;\n        const fields = selectionSet.fields;\n        const data = dataObj.data;\n        const fieldsConfig = dataModel.getFieldsConfig();\n        const svgContainer = drawingInf.sideEffectGroup;\n\n        const elemData = [];\n        fields.forEach((field) => {\n            const fieldIndex = fieldsConfig[field] && fieldsConfig[field].index;\n            const dataArr = data.map(d => d[fieldIndex]);\n            const axisIndex = [['x', 0], ['x', 1], ['y', 0], ['y', 1]].find((arr) => {\n                const fieldInst = axisFields[arr[0]][arr[1]];\n                return fieldInst && fieldInst.type() === FieldType.DIMENSION &&\n                    fieldInst.getMembers().indexOf(field) !== -1;\n            });\n            if (axisIndex !== undefined && data.length) {\n                const type = axisIndex[0];\n                const axis = axes[type][axisIndex[1]];\n                const value = dataArr[0];\n                bandWidth = axis.getUnitWidth() || 0;\n                px = axis.getScaleValue(value) + bandWidth / 2 + drawingInf.xOffset;\n\n                let layers = this.firebolt.context.layers();\n                layers = layers.filter(layer => !!layer.config().crossline);\n\n                if (layers.length) {\n                    const plotWidth = Math.max(...layers.map(layer => layer.getPlotSpan()[type]));\n                    const pad = Math.max(...layers.map(layer => layer.getPlotPadding()[type]));\n                    height = drawingInf.height;\n                    width = drawingInf.width;\n                    const startPx = px - plotWidth / 2 - pad / 2;\n                    const endPx = px + plotWidth / 2 + pad / 2;\n                    const dataPoint = {};\n                    if (type === 'y') {\n                        dataPoint.d = `M 0 ${startPx} L 0 ${endPx} L ${width} ${endPx} L ${width} ${startPx} Z`;\n                    } else {\n                        dataPoint.d = `M ${startPx} 0 L ${endPx} 0 L ${endPx} ${height} L ${startPx} ${height} Z`;\n                    }\n                    dataPoint.className = plotWidth ? bandClass : lineClass;\n                    !isNaN(px) && elemData.push(dataPoint);\n                }\n            }\n        });\n        if (elemData.length) {\n            const parentGroup = this.createElement(svgContainer, 'g', [1], className);\n            const elem = this.createElement(parentGroup, 'path', elemData);\n            elem.attr('d', d => d.d).style('pointer-events', 'none')\n                            .attr('class', d => d.className);\n        }\n        return this;\n    }\n\n    hide () {\n        const className = this.config().className;\n        const drawingInf = this.drawingContext();\n        selectElement(drawingInf.sideEffectGroup).selectAll(`.${className}`).remove();\n    }\n\n    static target () {\n        return 'visual-unit';\n    }\n}\n","import { intersect, difference } from 'muze-utils';\nimport { BEHAVIOURS } from '../..';\n\nconst fadeFn = (set, context) => {\n    const {\n        mergedEnter,\n        mergedExit,\n        completeSet\n    } = set;\n\n    if (!mergedEnter.length && !mergedExit.length) {\n        context.applyInteractionStyle(completeSet, { interactionType: 'fade', apply: false });\n    } else {\n        const layers = context.firebolt.context.layers();\n\n        layers.forEach((layer) => {\n            const layerName = layer.constructor.formalName();\n\n            // Apply style only on the hovered layer\n            if (layerName === 'area') {\n                context.applyInteractionStyle(mergedEnter, { interactionType: 'fade', apply: true }, [layer]);\n                context.applyInteractionStyle(mergedExit, { interactionType: 'fade', apply: false }, [layer]);\n            } else {\n                context.applyInteractionStyle(mergedExit, { interactionType: 'fade', apply: true }, [layer]);\n                context.applyInteractionStyle(mergedEnter, { interactionType: 'fade', apply: false }, [layer]);\n            }\n        });\n    }\n};\n\nconst fadeOnBrushFn = (set, context, payload) => {\n    const {\n        mergedEnter,\n        mergedExit,\n        completeSet\n    } = set;\n\n    const { dragEnd } = payload;\n    let interactionType = 'brushStroke';\n\n    if (!mergedEnter.length && !mergedExit.length) {\n        context.applyInteractionStyle(completeSet, { interactionType, apply: false });\n        context.applyInteractionStyle(completeSet, { interactionType: 'doubleStroke', apply: false });\n    } else {\n        if (dragEnd) {\n            interactionType = 'doubleStroke';\n            // onDrag style\n            context.applyInteractionStyle(completeSet, { interactionType: 'brushStroke', apply: false });\n        }\n        const layers = context.firebolt.context.layers();\n\n        layers.forEach((layer) => {\n            const layerName = layer.constructor.formalName();\n\n            // Apply style only on the hovered layer\n            if (layerName === 'area') {\n                if (dragEnd) {\n                    context.applyInteractionStyle(mergedExit, { interactionType: 'fade', apply: false }, [layer]);\n                    mergedEnter.length &&\n                        context.applyInteractionStyle(mergedEnter, { interactionType: 'focus', apply: true }, [layer]);\n                }\n            } else {\n                // dragEnd style\n                context.applyInteractionStyle(mergedExit, { interactionType, apply: false }, [layer]);\n                if (!payload.dragEnd) {\n                    context.applyInteractionStyle(mergedExit, { interactionType: 'focus', apply: false }, [layer]);\n                } else {\n                    context.applyInteractionStyle(mergedExit, { interactionType: 'focus', apply: true }, [layer]);\n                }\n\n                interactionType !== 'doubleStroke' &&\n                    context.applyInteractionStyle(mergedExit, { interactionType: 'doubleStroke', apply: false });\n                context.applyInteractionStyle(mergedEnter, { interactionType, apply: true }, [layer]);\n            }\n        });\n    }\n};\n\nexport const strategies = {\n    fade: fadeFn,\n    fadeOnBrush: fadeOnBrushFn,\n    focus: (set, context) => {\n        const {\n            mergedEnter,\n            mergedExit,\n            completeSet\n        } = set;\n        const { firebolt } = context;\n\n        if (!mergedEnter.length && !mergedExit.length) {\n            context.applyInteractionStyle(completeSet, { interactionType: 'focus', apply: false });\n            context.applyInteractionStyle(completeSet, { interactionType: 'focusStroke', apply: false });\n            context.applyInteractionStyle(completeSet, { interactionType: 'commonDoubleStroke', apply: false });\n        } else {\n            context.applyInteractionStyle(mergedExit, { interactionType: 'focusStroke', apply: false });\n            context.applyInteractionStyle(mergedEnter, { interactionType: 'focusStroke', apply: true });\n\n            const payload = firebolt.getPayload(BEHAVIOURS.HIGHLIGHT) || {};\n            const entryExitSet = firebolt.getEntryExitSet(BEHAVIOURS.HIGHLIGHT);\n            const layers = firebolt.context.layers();\n\n            layers.forEach((layer) => {\n                const layerName = layer.constructor.formalName();\n\n                if (layerName === 'area') {\n                    context.applyInteractionStyle(mergedExit, { interactionType: 'focus', apply: false }, [layer]);\n                    context.applyInteractionStyle(mergedEnter, { interactionType: 'focus', apply: true }, [layer]);\n                } else {\n                    context.applyInteractionStyle(mergedExit, { interactionType: 'focus', apply: true }, [layer]);\n                    context.applyInteractionStyle(mergedEnter, { interactionType: 'focus', apply: false }, [layer]);\n                }\n\n                if (payload.target !== null && entryExitSet) {\n                    // get uids of only the currently highlighted point\n                    const actualPoint = layer.getUidsFromPayload(entryExitSet.mergedEnter, payload.target);\n\n                    const commonSet = intersect(mergedEnter.uids, actualPoint.uids,\n                        [v => v[0], v => v[0]]);\n\n                    if (commonSet.length) {\n                        context.applyInteractionStyle({ uids: commonSet },\n                                { interactionType: 'commonDoubleStroke', apply: true },\n                                [layer]\n                            );\n                    } else {\n                        context.applyInteractionStyle({ uids: mergedExit.uids },\n                            { interactionType: 'commonDoubleStroke', apply: false },\n                            [layer]\n                        );\n                    }\n                }\n            });\n        }\n    },\n    highlight: (selectionSet, context, payload) => {\n        if (!selectionSet.mergedEnter.length && !selectionSet.mergedExit.length) {\n            // Remove focusStroke on selected but currently non-highlighted set\n            context.applyInteractionStyle(selectionSet.completeSet, { interactionType: 'highlight', apply: false });\n            context.applyInteractionStyle(selectionSet.completeSet,\n                { interactionType: 'commonDoubleStroke', apply: false }\n            );\n        } else {\n            const layers = context.firebolt.context.layers();\n\n            layers.forEach((layer) => {\n                if (payload.target !== null) {\n                    // get uids of only the currently highlighted point\n                    const currentHighlightedSet = layer.getUidsFromPayload(selectionSet.mergedEnter, payload.target);\n\n                    // Apply highlight on the currently hovered point\n                    context.applyInteractionStyle(currentHighlightedSet,\n                        { interactionType: 'highlight', apply: true },\n                        [layer]\n                    );\n\n                    context.applyInteractionStyle(selectionSet.mergedExit,\n                        { interactionType: 'highlight', apply: false },\n                        [layer]\n                    );\n\n                    const selectEntrySet = context.firebolt.getEntryExitSet('select');\n                    if (selectEntrySet) {\n                        const commonSet = intersect(selectEntrySet.mergedEnter.uids, currentHighlightedSet.uids,\n                            [v => v[0], v => v[0]]);\n                        const diffSet = difference(selectEntrySet.mergedEnter.uids, currentHighlightedSet.uids,\n                            [v => v[0], v => v[0]]);\n\n                        if (commonSet.length) {\n                            context.applyInteractionStyle({ uids: commonSet },\n                                { interactionType: 'commonDoubleStroke', apply: true },\n                                [layer]\n                            );\n                        }\n                        context.applyInteractionStyle({ uids: diffSet },\n                            { interactionType: 'commonDoubleStroke', apply: false },\n                            [layer]\n                        );\n                    }\n                }\n            });\n        }\n    },\n    pseudoFocus: (set, context) => {\n        const {\n            mergedEnter\n        } = set;\n\n        context.applyInteractionStyle(mergedEnter, { interactionType: 'focus', apply: false });\n    }\n};\n","import SurrogateSideEffect from '../surrogate';\nimport { strategies } from './strategy';\nimport { HIGHLIGHTER } from '../../enums/side-effects';\n\nexport default class PlotHighlighter extends SurrogateSideEffect {\n    constructor (...params) {\n        super(...params);\n        this._strategy = 'highlight';\n        this._strategies = strategies;\n    }\n\n    static formalName () {\n        return HIGHLIGHTER;\n    }\n\n    static target () {\n        return 'visual-unit';\n    }\n\n    getExcludeSetIds (excludeSet = []) {\n        // Get excludeSetIds if excludeSet is a function\n        if (excludeSet instanceof Function) {\n            return excludeSet(this.firebolt.getEntryExitSet);\n        }\n        // Get excludeSetIds if excludeSet is not a function\n        return excludeSet.reduce((acc, behaviour) => {\n            const selectedPoints = this.firebolt.getEntryExitSet(behaviour) || {};\n            const selectedPointsIds = (selectedPoints.mergedEnter || {}).uids;\n            if (selectedPointsIds) acc.push(...selectedPointsIds);\n            return acc;\n        }, []);\n    }\n\n    apply (selectionSet, payload, options = {}) {\n        const currentStrategy = this._strategies[options.strategy || this._strategy];\n\n        currentStrategy(selectionSet, this, payload);\n\n        return this;\n    }\n}\n","import SurrogateSideEffect from '../surrogate';\n\nexport default class FilterEffect extends SurrogateSideEffect {\n    static formalName () {\n        return 'filter';\n    }\n\n    static target () {\n        return 'all';\n    }\n\n    static mutates () {\n        return true;\n    }\n\n    apply (selectionSet, payload) {\n        const firebolt = this.firebolt;\n        const entryModel = selectionSet.mergedEnter.model;\n\n        if (payload.criteria === null) {\n            firebolt.resetData();\n        } else {\n            firebolt.data(entryModel);\n        }\n        return this;\n    }\n}\n","import { DataModel, getObjProp, mergeRecursive, ReservedFields, dmMultipleSelection } from 'muze-utils';\nimport { CLASSPREFIX } from '../../enums/constants';\nimport { ANCHORS } from '../../enums/side-effects';\nimport SpawnableSideEffect from '../spawnable';\nimport './styles.scss';\n\nconst addLayer = (layerRegistry, context, sideEffect) => {\n    context.addLayer((layerDefs) => {\n        const layers = [];\n\n        if (layerDefs) {\n            layerDefs.forEach((layerDef) => {\n                const mark = layerDef.mark;\n                const layerCls = layerRegistry[mark];\n\n                if (layerCls && layerCls.shouldDrawAnchors()) {\n                    const depLayerEncoding = layerDef.def.encoding;\n                    const encoding = {\n                        x: getObjProp(depLayerEncoding, 'x', 'field'),\n                        y: getObjProp(depLayerEncoding, 'y', 'field'),\n                        color: {\n                            field: getObjProp(depLayerEncoding, 'color', 'field'),\n                            value: getObjProp(depLayerEncoding, 'color', 'value')\n                        },\n                        size: {\n                            field: getObjProp(depLayerEncoding, 'size', 'field'),\n                            value: () => sideEffect.defaultSizeValue()\n                        }\n                    };\n                    const commonName = sideEffect.constructor.formalName();\n                    const layerOwner = layerDef.def.name;\n                    const name = `${layerOwner}-${commonName}`;\n                    const defaultClassName = `${sideEffect.constructor.defaultConfig().className}`;\n\n                    layers.push({\n                        name: `${name}-upper`,\n                        mark: 'point',\n                        groupId: `${commonName}-upper`,\n                        className: `${defaultClassName}-upper`,\n                        encoding,\n                        transform: {\n                            type: 'identity'\n                        },\n                        calculateDomain: false,\n                        transition: sideEffect.getTransitionConfig(),\n                        source: dm => dm.select(() => false, {\n                            saveChild: false\n                        }),\n                        interactive: false,\n                        owner: layerDef.def.name\n                    });\n\n                    if (mark === 'area') {\n                        layers.push({\n                            name: `${name}-lower`,\n                            mark: 'point',\n                            groupId: `${commonName}-lower`,\n                            className: `${defaultClassName}-lower`,\n                            encoding,\n                            transform: {\n                                type: 'identity'\n                            },\n                            calculateDomain: false,\n                            transition: sideEffect.getTransitionConfig(),\n                            source: dm => dm.select(() => false, {\n                                saveChild: false\n                            }),\n                            interactive: false,\n                            owner: layerDef.def.name\n                        });\n                    }\n                }\n            });\n        }\n        return layers;\n    });\n};\n\nexport default class AnchorEffect extends SpawnableSideEffect {\n    constructor (...params) {\n        super(...params);\n        this._layersMap = {};\n        this.addAnchorLayers();\n    }\n\n    static target () {\n        return 'visual-unit';\n    }\n\n    static defaultConfig () {\n        return {\n            className: `${CLASSPREFIX}-anchors-group`\n        };\n    }\n\n    static formalName () {\n        return ANCHORS;\n    }\n\n    addAnchorLayers () {\n        const context = this.firebolt.context;\n        const layerRegistry = context.registry().layerRegistry;\n\n        addLayer(layerRegistry, context, this);\n        return this;\n    }\n\n    getTransitionConfig () {\n        return {\n            disabled: true\n        };\n    }\n\n    /**\n     * Returns the default area value of the anchor point.\n     * @return { number } Default area value of anchor.\n     */\n    defaultSizeValue () {\n        return 70;\n    }\n\n    // Default offset by which anchor size is changed\n    getAnchorSizeOnInteraction ({ dragEnd }) {\n        if (dragEnd) {\n            return 40;\n        }\n        return 0;\n    }\n\n    apply (selectionSet, payload) {\n        const dataModel = selectionSet.mergedEnter.model;\n        const formalName = this.constructor.formalName();\n        const context = this.firebolt.context;\n        const upperAnchors = context.layers().filter(layer => layer.config().groupId === `${formalName}-upper`);\n        const lowerAnchors = context.layers().filter(layer => layer.config().groupId === `${formalName}-lower`);\n\n        const { target, action } = payload;\n        let targetObj = null;\n        if (target) {\n            targetObj = target[1].reduce((acc, v, i) => {\n                const field = target[0][i];\n                if (field !== ReservedFields.MEASURE_NAMES) {\n                    acc[field] = v;\n                }\n                return acc;\n            }, {});\n        }\n\n        [...upperAnchors, ...lowerAnchors].forEach((layer, index) => {\n            const layerConfig = layer.config();\n            const linkedLayer = context.getLayerByName(layerConfig.owner);\n            const linkedLayerName = linkedLayer.constructor.formalName();\n            const groupId = layerConfig.groupId;\n            const isUpperAnchor = groupId === `${formalName}-upper`;\n            let transformedData = [];\n            let schema = [];\n\n            [transformedData, schema] = linkedLayer.getTransformedDataFromIdentifiers(dataModel, index);\n\n            // Render both upper and lower anchors for area plot if hovered over an anchor\n            if (linkedLayerName === 'area' && target && action === 'highlight') {\n                const filterFn = dmMultipleSelection(target, dataModel);\n                const dmFromPayload = dataModel.select(filterFn, {});\n\n                if (!isUpperAnchor) {\n                    [transformedData, schema] = linkedLayer.getTransformedDataFromIdentifiers(dmFromPayload, index);\n                }\n            }\n\n            const transformedDataModel = new DataModel(transformedData, schema);\n            const anchorSizeConfig = {\n                encoding: {\n                    size: {\n                        value: () => this.defaultSizeValue() + this.getAnchorSizeOnInteraction(payload)\n                    },\n                    'stroke-width': {\n                        value: this.getAnchorStroke(payload, targetObj)\n                    }\n                }\n            };\n            const newConfig = mergeRecursive(layerConfig, anchorSizeConfig);\n\n            layer\n                .data(transformedDataModel)\n                .config(newConfig);\n\n            return this;\n        });\n    }\n\n    getAnchorStroke (payload, targetObj) {\n        return (d) => {\n            const dataObj = d.data.dataObj;\n            const matchingData = targetObj ? Object.keys(targetObj).every((key) => {\n                const val = dataObj[key];\n                return val === targetObj[key];\n            }) : false;\n            return matchingData ? '1px' : '0px';\n        };\n    }\n}\n","import AnchorEffect from './anchors';\nimport { CLASSPREFIX } from '../enums/constants';\nimport { PERSISTENT_ANCHORS } from '../enums/side-effects';\n\nexport default class PersistentAnchors extends AnchorEffect {\n    static formalName () {\n        return PERSISTENT_ANCHORS;\n    }\n\n    static defaultConfig () {\n        return {\n            className: `${CLASSPREFIX}-persistent-anchors`\n        };\n    }\n\n    getTransitionConfig () {\n        return {\n            disabled: true\n        };\n    }\n\n    setAnchorLayerStyle (layers) {\n        const anchorLayers = layers.filter(l => l.config().groupId === PERSISTENT_ANCHORS);\n        anchorLayers.forEach((anchor) => {\n            // Execute focusStroke interaction of anchor point layer\n            const ids = anchor.data().getUids();\n            const layerName = this.constructor.formalName();\n            const defaultInteractionLayerEncoding = anchor.config().encoding.interaction;\n            anchor.applyInteractionStyle(defaultInteractionLayerEncoding[layerName], ids, { apply: true });\n        });\n    }\n\n    // offset value by which anchor size is changed\n    // Applied only on select interaction\n    getAnchorSizeonInteraction () {\n        return 50;\n    }\n\n    getAnchorStroke () {\n        return '2px';\n    }\n}\n","import AnchorEffect from './anchors';\nimport { CLASSPREFIX } from '../enums/constants';\nimport { BRUSH_ANCHORS } from '../enums/side-effects';\n\nexport default class BrushAnchors extends AnchorEffect {\n    static formalName () {\n        return BRUSH_ANCHORS;\n    }\n\n    static defaultConfig () {\n        return {\n            className: `${CLASSPREFIX}-brush-anchors`\n        };\n    }\n\n    getTransitionConfig () {\n        return {\n            disabled: true\n        };\n    }\n\n    setAnchorLayerStyle (layers) {\n        const anchorLayers = layers.filter(l => l.config().groupId === BRUSH_ANCHORS);\n        anchorLayers.forEach((anchor) => {\n            // Execute focusStroke interaction of anchor point layer\n            const ids = anchor.data().getUids();\n            const layerName = this.constructor.formalName();\n            const defaultInteractionLayerEncoding = anchor.config().encoding.interaction;\n            anchor.applyInteractionStyle(defaultInteractionLayerEncoding[layerName], ids, { apply: true });\n        });\n    }\n\n    getAnchorStroke (payload) {\n        return payload.dragEnd ? '2px' : '1px';\n    }\n}\n","import SurrogateSideEffect from '../surrogate';\nimport { AXIS_LABEL_HIGHLIGHTER } from '../../enums/side-effects';\nimport './styles.scss';\nimport { shouldApplySideEffect } from '../helper';\n\nexport default class AxisLabelHighLighter extends SurrogateSideEffect {\n    static formalName () {\n        return AXIS_LABEL_HIGHLIGHTER;\n    }\n\n    static target () {\n        return 'visual-unit';\n    }\n\n    apply (selectionSet) {\n        const context = this.firebolt.context;\n        const dataModel = selectionSet && selectionSet.mergedEnter.model;\n        if (!shouldApplySideEffect(dataModel, this)) {\n            return this;\n        }\n        const selectedData = dataModel && dataModel.getData().data;\n        const selectedDataValues = selectedData && selectedData.length ? selectedData[0] : [];\n        const { x = [], y = [] } = context.axes();\n        [...x, ...y].forEach((axis) => {\n            const fieldMeta = dataModel ? dataModel.getFieldsConfig()[axis.config().field] : undefined;\n            const selData = selectedDataValues[fieldMeta && fieldMeta.index !== undefined\n                                                    ? fieldMeta.index : undefined];\n            const { selectionSet: selectedElements, rejectionSet } = axis.getTicksBasedOnData(selData);\n            selectedElements && selectedElements.selectAll('text').classed('muze-axis-ticks-highlight', true);\n            rejectionSet.selectAll('text').classed('muze-axis-ticks-highlight', false);\n        });\n\n        return this;\n    }\n}\n","import { intersect, getObjProp } from 'muze-utils';\nimport * as BEHAVIOURS from './enums/behaviours';\nimport * as SIDE_EFFECTS from './enums/side-effects';\n\nconst nullDataTooltipMap = {\n    area: true,\n    arc: false,\n    line: true,\n    text: false,\n    point: false,\n    bar: false,\n    tick: false\n};\n\nconst applySideEffectOnEmptyTarget = (sideEffect, { target }) => {\n    const layers = sideEffect.layers();\n    const showTooltipOnEmptyTarget = layers.some((l) => {\n        const layerName = l.constructor.formalName();\n        return nullDataTooltipMap[layerName];\n    });\n    return showTooltipOnEmptyTarget || target;\n};\n\nexport const behaviourEffectMap = {\n    [BEHAVIOURS.BRUSH]: ['selectionBox', {\n        name: 'highlighter',\n        options: {\n            strategy: 'fadeOnBrush'\n        }\n    }, 'brush-anchors'],\n    [BEHAVIOURS.HIGHLIGHT]: [{\n        name: 'highlighter',\n        options: {\n            strategy: 'highlight'\n        }\n    }, 'crossline', {\n        name: 'tooltip',\n        options: {\n            setTransform: (selectionSet, payload, sideEffect) => {\n                if (sideEffect.firebolt._actions.behavioural.brush.active) {\n                    return null;\n                }\n                if (applySideEffectOnEmptyTarget(sideEffect, payload)) {\n                    return selectionSet;\n                }\n                return null;\n            }\n        }\n    }, 'anchors', {\n        name: 'tooltip',\n        options: {\n            strategy: 'selectionSummary',\n            setTransform: (selectionSet, payload, sideEffect) => {\n                if (sideEffect.firebolt._actions.behavioural.brush.active === true ||\n                        !applySideEffectOnEmptyTarget(sideEffect, payload)) {\n                    return null;\n                }\n                const selectEntrySet = sideEffect.firebolt.getEntryExitSet(BEHAVIOURS.SELECT);\n                const brushEntrySet = sideEffect.firebolt.getEntryExitSet(BEHAVIOURS.BRUSH);\n                if (selectEntrySet || brushEntrySet) {\n                    let uids = [];\n                    let returnEntrySet = null;\n                    if (getObjProp(selectEntrySet, 'mergedEnter', 'uids', 'length')) {\n                        uids = selectEntrySet.mergedEnter.uids;\n                        returnEntrySet = selectEntrySet;\n                    } else if (getObjProp(brushEntrySet, 'mergedEnter', 'uids', 'length')) {\n                        uids = brushEntrySet.mergedEnter.uids;\n                        returnEntrySet = brushEntrySet;\n                    }\n\n                    const { uids: highlightUids } = selectionSet.mergedEnter;\n\n                    if (intersect(uids, highlightUids, [id => id[0], id => id[0]]).length) {\n                        return returnEntrySet;\n                    }\n                }\n\n                return null;\n            }\n        }\n    }, {\n        name: SIDE_EFFECTS.AXIS_LABEL_HIGHLIGHTER,\n        options: {\n            setTransform: (selectionSet, payload, sideEffect) => {\n                if (sideEffect.firebolt._actions.behavioural.brush.active) {\n                    return null;\n                }\n                if (applySideEffectOnEmptyTarget(sideEffect, payload)) {\n                    return selectionSet;\n                }\n                return null;\n            }\n        }\n    }],\n    [BEHAVIOURS.FILTER]: ['filter'],\n    [BEHAVIOURS.SELECT]: [{\n        name: 'highlighter',\n        options: {\n            strategy: 'focus'\n        }\n    }, 'persistent-anchors', {\n        name: 'tooltip',\n        options: {\n            strategy: 'selectionSummary'\n        }\n    }],\n    pseudoSelect: [{\n        name: 'highlighter',\n        options: {\n            strategy: 'pseudoFocus'\n        }\n    }]\n};\n","import { componentRegistry } from 'muze-utils';\nimport * as behaviours from './actions/behavioural';\nimport { physicalActions } from './actions/physical';\nimport * as sideEffects from './side-effects';\n\nconst convertToObj = (comps) => {\n    const obj = {};\n\n    for (const key in comps) {\n        const val = comps[key];\n\n        obj[val.formalName()] = val;\n    }\n    return obj;\n};\n\nexport const registry = {\n    behaviours: componentRegistry(convertToObj(behaviours)),\n    physicalActions: componentRegistry(physicalActions),\n    sideEffects: componentRegistry(convertToObj(sideEffects))\n};\n","import { ReservedFields, difference, isSimpleObject, getIndexMap } from 'muze-utils';\n\nconst getIdentifierMeasureMap = (identifiers, fields, facetsMap) => {\n    const identifierIdxMap = getIndexMap(identifiers[0]);\n    const identifierValues = identifiers.slice(1, identifiers.length);\n\n    return identifierValues.reduce((acc, row) => {\n        let facetPresent = true;\n\n        for (const field in facetsMap) {\n            const facetVal = row[identifierIdxMap[field]];\n            facetPresent = facetPresent && facetVal === facetsMap[field];\n        }\n\n        if (facetPresent) {\n            const key = fields.map((field) => {\n                const fieldIndex = identifierIdxMap[field];\n\n                return row[fieldIndex];\n            });\n            const measureNamesIdx = identifierIdxMap[ReservedFields.MEASURE_NAMES];\n\n            if (measureNamesIdx !== undefined) {\n                const measureArr = row[measureNamesIdx];\n                !acc[key] && (acc[key] = []);\n\n                if (measureArr && measureArr.length) {\n                    acc[key].push([measureArr]);\n                }\n            }\n        }\n\n        return acc;\n    }, {});\n};\n\nconst getRangeFromData = (instance, selectionDataModel, propConfig) => {\n    const dataObj = selectionDataModel.getData();\n    const { includeMeasures = true, sourceIdentifiers } = propConfig;\n    const schema = dataObj.schema;\n    const fieldMap = instance.data().getFieldsConfig();\n    const selectionDataFields = selectionDataModel.getFieldspace().fieldsObj();\n    let criteria = null;\n    if (sourceIdentifiers !== null) {\n        criteria = schema.reduce((ranges, obj) => {\n            const field = obj.name;\n            const fieldObj = fieldMap[field];\n\n            if (!fieldObj) {\n                return ranges;\n            }\n\n            ranges[field] = selectionDataFields[field].domain();\n            return ranges;\n        }, {});\n        const measureNamesIdx = sourceIdentifiers.identifiers[0]\n            .findIndex(field => field === ReservedFields.MEASURE_NAMES);\n        if (measureNamesIdx !== undefined && includeMeasures) {\n            const measureNames = sourceIdentifiers.identifiers.slice(1, sourceIdentifiers.identifiers.length)\n                .map(d => d[measureNamesIdx]);\n            criteria[ReservedFields.MEASURE_NAMES] = measureNames.map(d => [d]);\n        }\n    }\n    return criteria;\n};\n\nexport const payloadGenerator = {\n    brush: (instance, selectionDataModel, propConfig, facetByFields) => {\n        const propPayload = propConfig.payload;\n        let payload;\n        if (isSimpleObject(propPayload.criteria)) {\n            const criteria = getRangeFromData(instance, selectionDataModel, propConfig);\n            payload = Object.assign({}, propPayload);\n            payload.criteria = criteria;\n        } else {\n            payload = payloadGenerator.__default(instance, selectionDataModel, propConfig, facetByFields);\n        }\n\n        return payload;\n    },\n\n    __default: (instance, propagationDataModel, propConfig, facetByFields = {}) => {\n        let propagationDataDims = [];\n        let criteria = null;\n\n        const { payload: propPayload, sourceIdentifiers, excludeSelectedMeasures } = propConfig;\n        const { data } = propagationDataModel.getData({ withUid: true });\n        const payload = Object.assign({}, propPayload);\n        const fieldsConfig = Object.assign({}, propagationDataModel.getFieldsConfig(), {\n            [ReservedFields.ROW_ID]: {\n                index: Object.keys(propagationDataModel.getFieldsConfig()).length\n            }\n        });\n\n        propagationDataDims = Object.keys(propagationDataModel.getFieldspace().getDimension());\n        !propagationDataDims.length && (propagationDataDims = [ReservedFields.ROW_ID]);\n\n        if (sourceIdentifiers) {\n            const identifierMap = getIdentifierMeasureMap(sourceIdentifiers.identifiers, propagationDataDims,\n                facetByFields);\n            const dataArr = [];\n\n            for (let i = 0, len = data.length; i < len; i++) {\n                const row = data[i];\n                const dims = [];\n\n                propagationDataDims.forEach((field) => {\n                    const idx = fieldsConfig[field].index;\n                    dims.push(row[idx]);\n                });\n                const uid = row[row.length - 1];\n                const dimKey = `${dims}`;\n\n                if (dimKey in identifierMap) {\n                    const measures = identifierMap[dimKey];\n                    const allMeasures = instance._metaData.dimensionsMap[uid];\n\n                    if (excludeSelectedMeasures) {\n                        const diffMeasures = difference(allMeasures, measures);\n                        diffMeasures.forEach((measureArr) => {\n                            dataArr.push([...dims, measureArr]);\n                        });\n                    } else if (measures && measures.length) {\n                        measures.forEach((measureArr) => {\n                            dataArr.push([...dims, measureArr]);\n                        });\n                    } else {\n                        dataArr.push([...dims, []]);\n                    }\n                } else {\n                    dataArr.push([...dims, []]);\n                }\n            }\n\n            criteria = [[...propagationDataDims, ReservedFields.MEASURE_NAMES], ...dataArr];\n        }\n\n        payload.criteria = criteria;\n        payload.sourceFields = sourceIdentifiers ? sourceIdentifiers.fields.map(d => d.name) : [];\n        return payload;\n    },\n    pseudoSelect: (instance, selectionDataModel, propConfig) =>\n        payloadGenerator.__default(instance, selectionDataModel, Object.assign({}, {\n            excludeSelectedMeasures: true\n        }, propConfig))\n};\n\nexport const getPayloadGenerator = (action, criteria) => {\n    if (criteria instanceof Array || !payloadGenerator[action]) {\n        return payloadGenerator.__default;\n    }\n\n    return payloadGenerator[action];\n};\n","import { SpawnableSideEffect } from '@chartshq/muze-firebolt';\nimport { FieldType, defaultValue } from 'muze-utils';\n\nexport const initSideEffects = (sideEffects, firebolt) => {\n    for (const key in sideEffects) {\n        if ({}.hasOwnProperty.call(sideEffects, key)) {\n            sideEffects[key] instanceof SpawnableSideEffect && sideEffects[key].drawingContext(() => {\n                const context = firebolt.context;\n                return context.getDrawingContext();\n            });\n            sideEffects[key].valueParser(firebolt.context.valueParser());\n        }\n    }\n};\n\nexport const clearActionHistory = (context) => {\n    const actionHistory = context._actionHistory;\n    for (const key in actionHistory) {\n        if (actionHistory[key].isMutableAction) {\n            delete context._actionHistory[key];\n        }\n    }\n};\n\nexport const dispatchQueuedSideEffects = (context) => {\n    const queuedSideEffects = context._queuedSideEffects;\n    Object.entries(queuedSideEffects).forEach((entry) => {\n        const sideEffect = entry[1];\n        context.dispatchSideEffect(sideEffect.name, ...sideEffect.params);\n    });\n    context._queuedSideEffects = {};\n};\n\nexport const isSideEffectEnabled = (firebolt, { se, propagationInf }) => {\n    const sideEffectPolicies = firebolt._sideEffectPolicies;\n    const sideEffectCheckers = Object.values(sideEffectPolicies[se.name || se] || {});\n    const { sourceIdentifiers, data: propagationData } = propagationInf;\n    return sideEffectCheckers.length ? sideEffectCheckers.every(checker =>\n        checker(propagationInf.propPayload, firebolt, {\n            sourceIdentifiers,\n            propagationData\n        })) : true;\n};\n\nconst getUniqueKeys = (data, { layers, uids, keys = {}, dimensionsMap = {}, dimensions }) => {\n    data.forEach((row, i) => {\n        const key = [uids[i]];\n        const dims = dimensions.map(d => row[d.index]);\n        layers.forEach((layer) => {\n            const measureNames = Object.keys(layer.data().getFieldspace().getMeasure());\n            const mKey = `${[key, ...measureNames]}`;\n            keys[mKey] = defaultValue(keys[mKey], {});\n            keys[mKey] = {\n                dims,\n                measureNames,\n                uid: uids[i]\n            };\n            dimensionsMap[key] = defaultValue(dimensionsMap[key], []);\n            measureNames.length && dimensionsMap[key].push(measureNames);\n        });\n    });\n\n    return {\n        keys,\n        dimensionsMap\n    };\n};\n\nexport const prepareSelectionSetMap = ({ data, uids, dimensions }, layers, maps = {}) => {\n    const obj = getUniqueKeys(data, {\n        layers,\n        uids,\n        keys: maps.keys,\n        dimensions,\n        dimensionsMap: maps.dimensionsMap\n    });\n\n    return {\n        keys: obj.keys,\n        dimensionsMap: obj.dimensionsMap\n    };\n};\n\nexport const prepareSelectionSetData = (dataModel, unit) => {\n    const { data, uids } = dataModel.getData();\n    const fieldsConfig = dataModel.getFieldsConfig();\n    const dimensions = Object.values(fieldsConfig).filter(d => d.def.type === FieldType.DIMENSION);\n    const layers = unit.layers();\n    const { keys, dimensionsMap } = prepareSelectionSetMap({ data, uids, dimensions }, layers);\n\n    return {\n        keys,\n        dimensions,\n        dimensionsMap\n    };\n};\n\nexport const dispatchSecondaryActions = (firebolt, { action, propagationData, config, propagationInf }) => {\n    const context = firebolt.context;\n\n    const secondaryActions = firebolt._connectedBehaviours[action] || [];\n\n    secondaryActions.forEach((secAction) => {\n        const payloadGeneratorFn = firebolt.getPayloadGeneratorFor(secAction);\n        const generatedPayload = payloadGeneratorFn(firebolt, propagationData, config,\n                        context.facetByFields());\n        firebolt.dispatchBehaviour(secAction, generatedPayload, propagationInf);\n    });\n};\n\nexport const createMapByDimensions = (context, dm) => {\n    let cacheMap = context._cacheMap = {};\n    return (propDims, fieldsConfig) => {\n        cacheMap = context._cacheMap;\n        if (!cacheMap[propDims]) {\n            cacheMap[propDims] = dm.getData({ withUid: true }).data.reduce((acc, row) => {\n                const key = propDims.map(d => row[fieldsConfig[d].index]);\n                acc[key] || (acc[key] = []);\n                acc[key].push(row);\n                return acc;\n            }, {});\n        }\n        return cacheMap[propDims];\n    };\n};\n","import { FieldType, intersect } from 'muze-utils';\nimport { Firebolt, SIDE_EFFECTS } from '@chartshq/muze-firebolt';\nimport { payloadGenerator } from './payload-generator';\nimport {\n    isSideEffectEnabled,\n    dispatchSecondaryActions,\n    createMapByDimensions\n} from './helper';\n\nconst sideEffectPolicy = (propPayload, firebolt, propagationInf) => {\n    const { sourceIdentifiers, propagationData } = propagationInf;\n    const fields = sourceIdentifiers.fields;\n    const sourceIdentifierFields = fields.filter(field =>\n        field.type !== FieldType.MEASURE).map(field => field.name);\n    const propFields = Object.keys(propagationData.getFieldsConfig());\n    const hasCommonCanvas = propPayload.sourceCanvas === firebolt.sourceCanvas();\n    return intersect(sourceIdentifierFields, propFields).length || hasCommonCanvas;\n};\n\n/**\n * This class manages the interactions of visual unit. It associates physical actions with\n * behavioural actions. It also propagates the behavioural actions to other datamodels.\n */\nexport default class UnitFireBolt extends Firebolt {\n    constructor (...params) {\n        super(...params);\n        const {\n            TOOLTIP,\n            HIGHLIGHTER,\n            ANCHORS,\n            BRUSH_ANCHORS,\n            PERSISTENT_ANCHORS\n        } = SIDE_EFFECTS;\n        this._handlers = {};\n        this._propagationIdentifiers = {};\n        this._connectedBehaviours = {};\n        this.payloadGenerators(payloadGenerator);\n        this.sideEffects().tooltip.disable();\n        const disabledSideEffects = [TOOLTIP, HIGHLIGHTER, ANCHORS, BRUSH_ANCHORS, PERSISTENT_ANCHORS];\n        disabledSideEffects.forEach((sideEffect) => {\n            this.changeSideEffectStateOnPropagation(sideEffect, sideEffectPolicy, 'sourceTargetPolicy');\n        });\n    }\n\n    getApplicableSideEffects (sideEffects, payload, propagationInf) {\n        const context = this.context;\n        const unitId = context.id();\n        const aliasName = context.parentAlias();\n        const propagationSourceCanvas = propagationInf.propPayload && propagationInf.propPayload.sourceCanvas;\n        const sourceUnitId = propagationInf.propPayload && propagationInf.propPayload.sourceUnit;\n        const sideEffectInstances = this.sideEffects();\n        const actionOnSource = sourceUnitId ? sourceUnitId === unitId : true;\n\n        const applicableSideEffects = payload.sideEffects ? [{\n            effects: payload.sideEffects,\n            behaviours: [payload.action]\n        }] : sideEffects;\n        applicableSideEffects.forEach((d) => {\n            let mappedEffects = d.effects;\n            mappedEffects = mappedEffects.filter((se) => {\n                const mutates = sideEffectInstances[se.name || se].constructor.mutates();\n                if (mutates && propagationInf.isMutableAction === false) {\n                    return false;\n                }\n                if (!actionOnSource && payload.criteria !== null) {\n                    return isSideEffectEnabled(this, { se, propagationInf });\n                }\n                if (propagationSourceCanvas === aliasName || actionOnSource) {\n                    return se.applyOnSource !== false;\n                }\n\n                return true;\n            });\n            d.effects = mappedEffects;\n        });\n        return applicableSideEffects;\n    }\n\n    shouldApplySideEffects (propInf) {\n        return propInf.propagate === false && propInf.applySideEffect !== false;\n    }\n\n    data (...params) {\n        if (params.length) {\n            const model = params[0];\n            this.context.enableCaching().data(model);\n            return this;\n        }\n        return this.context.data();\n    }\n\n    resetData () {\n        this.context.clearCaching().resetData();\n        return this;\n    }\n\n    onDataModelPropagation () {\n        return (data, config) => {\n            let isMutableAction = false;\n            const context = this.context;\n            if (!context.mount()) {\n                return;\n            }\n            const propagationData = data;\n\n            const {\n                enabled: enabledFn,\n                sourceIdentifiers,\n                action,\n                payload: propPayload\n            } = config;\n\n            const payloadFn = this.getPayloadGeneratorFor(action);\n            const payload = payloadFn(this, propagationData, config, context.facetFieldsMap());\n            const behaviourPolicies = this._behaviourPolicies;\n            const filterFns = Object.values(behaviourPolicies[action] || behaviourPolicies['*'] || {});\n            let enabled = filterFns.every(fn => fn(propPayload || {}, this, {\n                sourceIdentifiers,\n                propagationData\n            }));\n\n            if (enabledFn) {\n                enabled = enabledFn(config, this) && enabled !== false;\n            }\n\n            if (enabled) {\n                const effects = this._behaviourEffectMap[action];\n                const sideEffectInstances = this.sideEffects();\n                isMutableAction = config.groupId ?\n                    effects.some(d => sideEffectInstances[d.name || d].constructor.mutates()) : config.isMutableAction;\n\n                const propagationInf = {\n                    propagate: false,\n                    data: propagationData,\n                    propPayload,\n                    sourceIdentifiers,\n                    sourceId: config.propagationSourceId,\n                    isMutableAction: config.isMutableAction\n                };\n\n                this._actionHistory[action] = {\n                    payload,\n                    propagationInf,\n                    isMutableAction\n                };\n\n                this.dispatchBehaviour(action, payload, propagationInf);\n\n                dispatchSecondaryActions(this, {\n                    action,\n                    propagationInf,\n                    propagationData,\n                    config\n                });\n            }\n        };\n    }\n\n    target () {\n        return 'visual-unit';\n    }\n\n    createSelectionSet (...params) {\n        super.createSelectionSet(...params);\n\n        this._dimsMapGetter = createMapByDimensions(this, this.data());\n\n        return this;\n    }\n\n    remove () {\n        this.context.cachedData()[0].unsubscribe('propagation');\n        return this;\n    }\n\n    propagationIdentifiers (action, identifiers) {\n        if (identifiers) {\n            this._propagationIdentifiers = identifiers;\n        }\n        return this._propagationIdentifiers[action];\n    }\n\n    registerPhysicalActionHandlers () {\n        return this;\n    }\n\n    id () {\n        return this.context.id();\n    }\n\n    getPropagationSource () {\n        return this.context.cachedData()[0];\n    }\n\n    sourceCanvas () {\n        return this.context.parentAlias();\n    }\n}\n\n","import { BEHAVIOURS, ACTIONS } from '@chartshq/muze-firebolt';\n\nexport const actionBehaviourMap = {\n    [ACTIONS.DRAG]: {\n        behaviours: [BEHAVIOURS.BRUSH],\n        touch: false\n    },\n    [ACTIONS.HOVER]: {\n        behaviours: [BEHAVIOURS.HIGHLIGHT]\n    },\n    [ACTIONS.LONGTOUCH]: {\n        behaviours: [BEHAVIOURS.SELECT],\n        touch: true\n    },\n    [ACTIONS.TOUCHDRAG]: {\n        behaviours: [BEHAVIOURS.BRUSH],\n        touch: true\n    },\n    [ACTIONS.CLICK]: {\n        behaviours: [BEHAVIOURS.SELECT],\n        touch: false\n    }\n};\n","import { VolatileBehaviour } from '@chartshq/muze-firebolt';\nimport { BRUSH } from '../../enums/behaviours';\n/**\n * This is the behaviour for brushing a region on the chart. It accepts a payload\n * which contains the x and y range of the data and other configuration. It will then\n * create a selection box from the range and select the points which fall within the range.\n */\nexport default class UnitBrushBehaviour extends VolatileBehaviour {\n    static formalName () {\n        return BRUSH;\n    }\n\n    dispatch (...params) {\n        this.active = params[0].dragging;\n        this.start = params[0].dragStart;\n        return super.dispatch(...params);\n    }\n}\n","export const BRUSH = 'brush';\nexport const HIGHLIGHT = 'highlight';\nexport const TOOLTIP = 'tooltip';\nexport const FILTER = 'filter';\nexport const PSEUDO_SELECT = 'pseudoSelect';\n\n","import { getObjProp, defaultValue, makeElement, DimensionSubtype, DataModel, createSelection } from 'muze-utils';\nimport { ScaleType } from '@chartshq/muze-axis';\nimport { layerFactory, LAYER_TYPES } from '@chartshq/visual-layer';\nimport {\n    GRID_BAND,\n    GRID_LINE,\n    GRID_BAND_PARENT_GROUP_CLASS,\n    GRID_LINE_PARENT_GROUP_CLASS,\n    GRID_PARENT_GROUP\n} from '../enums/constants';\n\nconst { BAR_LAYER, TICK_LAYER } = LAYER_TYPES;\n\nconst LINEAR = ScaleType.LINEAR;\n\nconst getLayerDefinition = (context, axes, type, orientation) => {\n    let encoding;\n    const config = context.config();\n    const { classPrefix, gridLines, gridBands } = config;\n    const gridLineColor = gridLines.color;\n    const zeroLineColor = gridLines.zeroLineColor;\n    const defClassName = type === GRID_BAND ? gridBands.defClassName : gridLines.defClassName;\n    const gridBandColor = gridBands[orientation].color;\n    const axis = axes[orientation][0];\n    const isLinearScale = axis.constructor.type() === LINEAR;\n\n    if (type === GRID_BAND && isLinearScale) {\n        encoding = {\n            [orientation]: `${orientation}value`,\n            [`${orientation}0`]: `${orientation}value0`\n        };\n    } else {\n        encoding = {\n            [orientation]: isLinearScale ? `${orientation}value` : `${orientation}dim`\n        };\n    }\n    encoding.color = {\n        value: (data, i) => {\n            const isNegativeDomain = isLinearScale && axis.domain()[0] < 0;\n            if (type === GRID_BAND) {\n                return gridBandColor[i % 2];\n            }\n            return isNegativeDomain && data[orientation] === 0 ? zeroLineColor : gridLineColor;\n        }\n    };\n    const { color, shape, size } = context.axes();\n    return {\n        definition: {\n            defClassName: `${defClassName}-${orientation}`,\n            className: config.className,\n            name: orientation,\n            calculateDomain: false,\n            individualClassName: (data, i) => {\n                let className;\n                const isNegativeDomain = isLinearScale && axis.domain()[0] < 0;\n                if (isNegativeDomain && data.y === 0 && type !== GRID_BAND) {\n                    className = `${classPrefix}-axis-zero-line`;\n                } else {\n                    className = `${classPrefix}-grid-${type}-${orientation}-${i % 2}`;\n                }\n                return className;\n            },\n            [`pad${orientation.toUpperCase()}`]: type === GRID_BAND ? 0 : undefined,\n            encoding\n        },\n        axes: {\n            [orientation]: axis,\n            color: color[0],\n            shape: shape[0],\n            size: size[0]\n        },\n        interactive: false\n    };\n};\n\nconst getDefaultVisibilty = (show, axis) => {\n    if (axis.constructor.type() === LINEAR) {\n        return show;\n    }\n    return false;\n};\n\nexport const getGridLayerDefinitions = (context, config, type) => ['x', 'y'].map((axisType) => {\n    const axes = context.axes();\n    if (!axes[axisType]) {\n        return null;\n    }\n    const show = defaultValue(config[axisType] && config[axisType].show,\n        getDefaultVisibilty(config.show, axes[axisType][0]));\n\n    return show ? getLayerDefinition(context, axes, type, axisType) : null;\n}).filter(d => d !== null);\n\nconst dimensionSubTypes = Object.values(DimensionSubtype).reduce((acc, v) => {\n    acc[v] = 1;\n    return acc;\n}, {});\n\nconst getValidSubtype = subtype => (!dimensionSubTypes[subtype] ? DimensionSubtype.CATEGORICAL : subtype);\n\nexport const getGridLayerData = (axes, fields, fieldsConfig) => {\n    const gridData = {};\n\n    ['x', 'y'].forEach((type) => {\n        let ticks = axes[type][0].getTickValues();\n        const subtype = getObjProp(fieldsConfig, getObjProp(fields, type, 0).getMembers()[0], 'def', 'subtype');\n        const jsonData = [];\n        const schema = [\n            {\n                name: 'yvalue',\n                type: 'measure'\n            }, {\n                name: 'xvalue',\n                type: 'measure'\n            },\n            {\n                name: 'yvalue0',\n                type: 'measure'\n            }, {\n                name: 'xvalue0',\n                type: 'measure'\n            }, {\n                name: 'xdim',\n                type: 'dimension',\n                subtype: getValidSubtype(subtype)\n            }, {\n                name: 'ydim',\n                type: 'dimension',\n                subtype: getValidSubtype(subtype)\n            }\n        ];\n        const len = Math.max(ticks.length);\n        ticks = subtype === DimensionSubtype.TEMPORAL ? ticks.map(d => d.getTime()) : ticks;\n        for (let i = 0; i < len; i += 1) {\n            jsonData.push({\n                [`${type}value`]: ticks[i],\n                [`${type}value0`]: ticks[i + 1],\n                [`${type}dim`]: ticks[i],\n                [`${type}dim`]: ticks[i]\n            });\n        }\n        gridData[type] = new DataModel(jsonData, schema);\n    });\n    return gridData;\n};\n\nexport const createGridLineLayer = (context) => {\n    const vuConf = context.config();\n    const metaInf = context.metaInf();\n    const store = context.store();\n    const timeDiffs = context._timeDiffs;\n    [GRID_BAND, GRID_LINE].forEach((type) => {\n        let mark;\n        let config;\n        if (type === GRID_BAND) {\n            mark = BAR_LAYER;\n            config = vuConf.gridBands;\n        } else {\n            mark = TICK_LAYER;\n            config = vuConf.gridLines;\n        }\n        const definitions = getGridLayerDefinitions(context, config, type);\n\n        const sel = `_${type}Selection`;\n        context[sel] = createSelection(context[sel], (atomicDef) => {\n            const inst = layerFactory.getLayerInstance({ mark });\n            inst.dependencies(context._dependencies);\n            const name = atomicDef.definition.name;\n            inst.metaInf({\n                unitRowIndex: metaInf.rowIndex,\n                unitColIndex: metaInf.colIndex,\n                namespace: `${metaInf.namespace}${type}${name}`,\n                parentNamespace: metaInf.namespace\n            })\n                .store(store);\n            return inst;\n        }, definitions, atomicDef => atomicDef.definition.name);\n\n        context[sel].each((layer, atomicDef) => {\n            const definition = atomicDef.definition;\n            const sConf = layerFactory.getSerializedConf(mark, definition);\n            const axesObj = atomicDef.axes;\n            layer.config(sConf)\n                .dataProps({\n                    timeDiffs\n                })\n                .axes(axesObj);\n        });\n        context[`_${type}`] = context[sel].getObjects();\n    });\n};\n\nexport const attachDataToGridLineLayers = (context) => {\n    const axes = context.axes();\n    const gridLines = context._gridLines;\n    const gridBands = context._gridBands;\n    if (gridLines.length || gridBands.length) {\n        const gridLayerData = getGridLayerData(axes, context.fields(), context.data().getFieldsConfig());\n        [].concat(...gridBands, ...gridLines).forEach((inst) => {\n            inst.data(inst.axes().x ? gridLayerData.x : gridLayerData.y);\n        });\n    }\n};\n\nexport const renderGridLineLayers = (context, container) => {\n    const config = context.config();\n    const classPrefix = config.classPrefix;\n    const gridLines = context._gridLines;\n    const gridBands = context._gridBands;\n    const measurement = {\n        width: context.width(),\n        height: context.height()\n    };\n    const gridLineParentGroup = makeElement(container, 'g', [1], `${classPrefix}-${GRID_PARENT_GROUP}`);\n\n    [[gridLines, `${classPrefix}-${GRID_LINE_PARENT_GROUP_CLASS}`],\n            [gridBands, `${classPrefix}-${GRID_BAND_PARENT_GROUP_CLASS}`]].forEach((entry) => {\n                const [instances, parentGroupClass] = entry;\n                const mountPoint = makeElement(gridLineParentGroup, 'g', [1], `.${parentGroupClass}`);\n                const className = `${parentGroupClass}-group`;\n                makeElement(mountPoint, 'g', instances, `.${className}`, {\n                    update: (group, instance) => {\n                        instance.dataProps({ timeDiffs: context._timeDiffs })\n                            .measurement(measurement)\n                            .mount(group.node());\n                    }\n                });\n            });\n};\n","import {\n    STATE_NAMESPACES,\n    temporalFields,\n    getObjProp,\n    defaultValue,\n    isSimpleObject\n} from 'muze-utils';\nimport { FRAGMENTED } from '@chartshq/muze-firebolt/src/enums/constants';\nimport { TOOLTIP, FRAGMENTED_TOOLTIP } from '@chartshq/muze-firebolt/src/enums/side-effects';\nimport * as PROPS from './enums/reactive-props';\nimport {\n    transformDataModels,\n    getDimensionMeasureMap,\n    attachDataToLayers,\n    attachAxisToLayers\n} from './helper';\n\nimport { createGridLineLayer } from './helper/grid-lines';\nimport { prepareSelectionSetData } from './firebolt/helper';\n\nconst removeExitLayers = (layerDefs, context) => {\n    const layersMap = context._layersMap;\n    const markSet = {};\n    layerDefs.forEach((layerDef, i) => {\n        const id = defaultValue(layerDef.name, `${layerDef.mark}-${i}`);\n        markSet[id] = true;\n    });\n\n    for (const key in layersMap) {\n        if (!(key in markSet)) {\n            layersMap[key].forEach(layer => layer.remove());\n            delete layersMap[key];\n        }\n    }\n};\n\nexport const listenerMap = [\n    {\n        type: 'registerImmediateListener',\n        props: [PROPS.LAYERDEFS],\n        listener: (context, [, layerDefs]) => {\n            const fieldsVal = context.fields();\n\n            if (layerDefs && fieldsVal) {\n                removeExitLayers(layerDefs, context);\n                const queuedLayerDefs = context._queuedLayerDefs;\n                let layerDefArr = layerDefs;\n                queuedLayerDefs.forEach((defFn) => {\n                    layerDefArr = [...layerDefArr, ...defFn(layerDefs)];\n                });\n                context.addLayer(layerDefArr);\n\n                const adjustRange = context.layers().some(inst => inst.hasPlotSpan());\n                ['x', 'y'].forEach((type) => {\n                    const axisArr = defaultValue(getObjProp(context.axes(), type), []);\n                    axisArr.forEach((axis) => {\n                        axis.config({\n                            adjustRange\n                        });\n                    });\n                });\n                context._lifeCycleManager.notify({\n                    client: context.layers(),\n                    action: 'initialized',\n                    formalName: 'layer'\n                });\n            }\n        }\n    },\n    {\n        type: 'registerImmediateListener',\n        props: [PROPS.DATA],\n        listener: (context, [, dataModel]) => {\n            if (dataModel) {\n                const axesObj = context.axes();\n                const timeDiffs = {};\n                const timeDiffsByField = {};\n\n                Object.entries(temporalFields(dataModel)).forEach(([fieldName, fieldObj]) => {\n                    timeDiffsByField[fieldName] = fieldObj.minimumConsecutiveDifference();\n                });\n\n                Object.entries(context.fields()).forEach(([type, [field]]) => {\n                    if (field) {\n                        const timeDiff = timeDiffsByField[`${field}`];\n                        if (timeDiff) {\n                            timeDiffs[type] = timeDiff;\n                            axesObj[type].forEach(axis => axis.minDiff(timeDiff));\n                        }\n                    }\n                });\n\n                context._timeDiffsByField = timeDiffsByField;\n                context._timeDiffs = timeDiffs;\n                const firebolt = context.firebolt();\n                const originalData = context.cachedData()[0];\n                const { keys, dimensionsMap, dimensions } = prepareSelectionSetData(context.data(), context);\n                firebolt._metaData = {\n                    dimensionsMap,\n                    dimensions\n\n                };\n                firebolt.createSelectionSet({ keys, fields: dimensions.map(d => d.def.name) });\n                firebolt.attachPropagationListener(originalData);\n            }\n        }\n    },\n    {\n        type: 'registerImmediateListener',\n        props: [PROPS.CONFIG],\n        listener: (context, [, config]) => {\n            if (config) {\n                const firebolt = context.firebolt();\n                const { interaction } = config;\n                firebolt.config(interaction);\n                const { mode } = interaction.tooltip;\n                if (mode === FRAGMENTED) {\n                    const map = firebolt._behaviourEffectMap;\n                    for (const key in map) {\n                        const sideEffects = map[key];\n\n                        map[key] = sideEffects.map((val) => {\n                            let name = val;\n                            if (isSimpleObject(val)) {\n                                name = val.name;\n                            }\n                            if (name === TOOLTIP) {\n                                return FRAGMENTED_TOOLTIP;\n                            }\n                            return val;\n                        });\n                    }\n                }\n                createGridLineLayer(context);\n            }\n        }\n    },\n    {\n        type: 'registerImmediateListener',\n        props: [PROPS.DATA, PROPS.TRANSFORM],\n        listener: (context, [, dataModel], [, transform]) => {\n            if (dataModel) {\n                const dataModels = transformDataModels(transform, dataModel);\n                const metaInf = context.metaInf();\n                context.store().commit(`${STATE_NAMESPACES.UNIT_LOCAL_NAMESPACE}.${PROPS.TRANSFORMEDDATA}`,\n                    dataModels, metaInf.namespace);\n            }\n        }\n    },\n    {\n        type: 'registerImmediateListener',\n        props: [PROPS.TRANSFORMEDDATA, PROPS.LAYERS],\n        listener: (context, [, transformedData], [, layers]) => {\n            const layerAxisIndexVal = context._layerAxisIndex;\n            const axesVal = context.axes();\n            const dataModel = context.data();\n            if (transformedData && layers && axesVal && layerAxisIndexVal) {\n                context._lifeCycleManager.notify({ client: layers, action: 'beforeupdate', formalName: 'layer' });\n                attachDataToLayers(layers, dataModel, transformedData);\n                context._dimensionMeasureMap = getDimensionMeasureMap(layers,\n                    dataModel.getFieldsConfig(), context.retinalFields());\n                attachAxisToLayers(axesVal, layers, layerAxisIndexVal);\n                context._lifeCycleManager.notify({ client: layers, action: 'updated', formalName: 'layer' });\n            }\n        }\n    }\n];\n","import { mergeRecursive } from 'muze-utils';\nimport { FACET_BY_FIELDS, RETINAL_FIELDS, PARENT_ALIAS, CACHED_DATA } from './enums/constants';\n\nexport const PROPS = {\n    [FACET_BY_FIELDS]: {\n        onset: (context, facets) => {\n            const facetKeys = facets[0].reduce((acc, v, i) => {\n                acc[`${v}`] = facets[1][i];\n                return acc;\n            }, {});\n            context.facetFieldsMap(facetKeys);\n        }\n    },\n    facetFieldsMap: {},\n    [RETINAL_FIELDS]: {},\n    [PARENT_ALIAS]: {},\n    [CACHED_DATA]: {},\n    detailFields: {},\n    axes: {\n        defaultValue: {\n            x: [],\n            y: []\n        }\n    },\n    fields: {\n        defaultValue: {\n            x: [],\n            y: []\n        },\n        sanitization: (context, value) => mergeRecursive({\n            x: [],\n            y: []\n        }, value)\n    },\n    metaInf: {},\n    registry: {},\n    parentContainerInf: {},\n    valueParser: {\n        defaultValue: val => val\n    },\n    coord: {}\n};\n","import { CLASSPREFIX, CONSOLIDATED } from './enums/constants';\n\n/**\n * Returns the default configuration of the visual unit\n * @return {Object} Default configuration of visual unit\n */\nexport const defaultConfig = {\n    classPrefix: CLASSPREFIX,\n    defClassName: 'visual-unit',\n    className: '',\n    trackerClassName: 'visual-unit-tracker',\n    minOuterRadius: 10,\n    gridLines: {\n        defClassName: 'axis-grid-lines',\n        className: '',\n        show: true,\n        color: '#efefef',\n        zeroLineColor: '#b6b6b6'\n    },\n    gridBands: {\n        defClassName: 'axis-grid-bands',\n        className: '',\n        show: false,\n        y: {\n            color: ['#fff', '#fbfbfb']\n        },\n        x: {\n            color: ['#fff', '#f9f9f9']\n        }\n    },\n    arcLayerClassName: 'layer-arc',\n    interaction: {\n        tooltip: {\n            mode: CONSOLIDATED\n        }\n    },\n    sideEffectClassName: 'side-effect-container'\n};\n","import { mergeRecursive, DataModel } from 'muze-utils';\nimport { defaultConfig } from './default-config';\nimport { CONFIG, LAYERDEFS, TRANSFORM, DATA, LAYERS, TRANSFORMEDDATA } from './enums/reactive-props';\nimport { sanitizeLayerDef } from './helper';\n\nexport default {\n    [CONFIG]: {\n        value: null,\n        meta: {\n            sanitization: (config, oldConfig) => (\n                mergeRecursive(oldConfig || mergeRecursive({}, defaultConfig), config)\n            )\n        }\n    },\n    [LAYERDEFS]: {\n        value: null,\n        meta: {\n            preset: layerDef => sanitizeLayerDef(layerDef)\n        }\n    },\n    [TRANSFORM]: {\n        value: null\n    },\n    [LAYERS]: {\n        value: null\n    },\n    [DATA]: {\n        value: null,\n        meta: {\n            typeCheck: d => d instanceof DataModel,\n            preset: (data, context) => {\n                if (context._cache) {\n                    const cachedData = context.cachedData();\n                    context.cachedData([...cachedData, data]);\n                } else {\n                    const oldData = context.cachedData()[0];\n                    oldData && oldData.unsubscribe('propagation');\n                    context.cachedData([data]);\n                }\n            }\n        }\n    },\n    [TRANSFORMEDDATA]: {\n        value: null\n    },\n    width: {\n        value: null\n    },\n    height: {\n        value: null\n    }\n};\n","import { VolatileBehaviour } from '@chartshq/muze-firebolt';\nimport { PSEUDO_SELECT } from '../../enums/behaviours';\n\nexport default class PseudoSelectBehaviour extends VolatileBehaviour {\n    static formalName () {\n        return PSEUDO_SELECT;\n    }\n}\n\n","import { layerFactory } from '@chartshq/visual-layer';\nimport {\n    setAttrs,\n    getUniqueId,\n    getQualifiedClassName,\n    selectElement,\n    transactor,\n    makeElement,\n    generateGetterSetters,\n    getDataModelFromIdentifiers,\n    isSimpleObject,\n    transposeArray,\n    CommonProps,\n    toArray,\n    STATE_NAMESPACES,\n    FieldType,\n    ReservedFields\n} from 'muze-utils';\nimport { behaviourEffectMap } from '@chartshq/muze-firebolt';\nimport { actionBehaviourMap } from './firebolt/action-behaviour-map';\nimport UnitBrushBehaviour from './firebolt/behaviours/brush';\nimport {\n    renderLayers,\n    getNearestDimensionalValue,\n    removeLayersBy,\n    getLayersBy,\n    getLayerFromDef,\n    getLayerAxisIndex,\n    sanitizeLayerDef,\n    createSideEffectGroup,\n    resolveEncodingTransform,\n    createRenderPromise,\n    setAxisRange,\n    unionDomainFromLayers,\n    createRTree\n} from './helper';\nimport { renderGridLineLayers, attachDataToGridLineLayers } from './helper/grid-lines';\nimport { listenerMap } from './listener-map';\nimport { PROPS } from './props';\nimport UnitFireBolt from './firebolt';\nimport { initSideEffects, dispatchQueuedSideEffects, clearActionHistory } from './firebolt/helper';\nimport './styles.scss';\nimport localOptions from './local-options';\nimport { WIDTH, HEIGHT } from './enums/reactive-props';\nimport { REACTIVE_PROPS } from './enums';\nimport { PSEUDO_SELECT } from './enums/behaviours';\nimport PseudoSelectBehaviour from './firebolt/behaviours/pseudo-select';\n\nconst FORMAL_NAME = 'VisualUnit';\nconst unitNs = [STATE_NAMESPACES.UNIT_GLOBAL_NAMESPACE, STATE_NAMESPACES.UNIT_LOCAL_NAMESPACE];\nconst groupNs = STATE_NAMESPACES.GROUP_GLOBAL_NAMESPACE;\n\n/**\n * Visual Unit is hierarchical component created by {@link VisualGroup}. This component accepts layer definitions\n * and creates concrete layer instances from them, binds data and attaches axis to them. It also retreives the domain\n * from the layers and unions them and sets them on corresponding axis instances. This also creates the parent svg\n * groups for all the layers and delegates the rendering to all the layers.\n *\n * @public\n * @module VisualUnit\n * @class\n */\nexport default class VisualUnit {\n\n    /**\n     * Creates instance of visualization unit.\n     *\n     * @param {Object} registry  Component registry\n     * @param {Object} dependencies  Dependencies required by visual unit.\n     */\n    constructor (registry, dependencies) {\n        this._id = getUniqueId();\n        this._dependencies = dependencies;\n        this._renderedResolve = null;\n        this._renderedPromise = new Promise((resolve) => {\n            this._renderedResolve = resolve;\n        });\n        createRenderPromise(this);\n        this._lifeCycleManager = dependencies.lifeCycleManager;\n        this._layersMap = {};\n        this._gridLinesSelection = null;\n        this._gridBandsSelection = null;\n        this._gridLines = [];\n        this._gridBands = [];\n        this._layerAxisIndex = {};\n        this._queuedLayerDefs = [];\n        layerFactory.setLayerRegistry(registry.layerRegistry);\n        generateGetterSetters(this, this.constructor.getterSetters());\n        this.registry(registry);\n        this.cachedData([]);\n    }\n\n    static formalName () {\n        return FORMAL_NAME;\n    }\n\n    static getState () {\n        return [\n            {\n                domain: null\n            },\n            Object.keys((this.localOptions())).reduce((acc, v) => {\n                acc[v] = localOptions[v].value;\n                return acc;\n            }, {})\n        ];\n    }\n\n    static getterSetters () {\n        return PROPS;\n    }\n\n    static localOptions () {\n        return localOptions;\n    }\n\n    static getQualifiedStateProps () {\n        const unitState = VisualUnit.getState();\n        return unitState.map((state, i) => Object.keys(state).map(prop => `${unitNs[i]}.${prop}`));\n    }\n\n    static getListeners () {\n        return {\n            store: [...listenerMap.map((d) => {\n                const o = Object.assign({}, d);\n                const localNs = unitNs[1];\n                o.props = o.props.map(prop => `${localNs}.${prop}`);\n                return o;\n            }), {\n                type: 'registerImmediateListener',\n                props: [`${STATE_NAMESPACES.LAYER_GLOBAL_NAMESPACE}.domain`],\n                listener: (context) => {\n                    const domain = context.calculateDomainFromData();\n                    context.dataDomain(domain);\n                }\n            }, {\n                type: 'registerImmediateListener',\n                props: [`${unitNs[1]}.${WIDTH}`,\n                    `${unitNs[1]}.${HEIGHT}`,\n                    ...['x', 'y'].map(type => `${groupNs}.domain.${type}`)],\n                listener: (context, [, width], [, height]) => {\n                    if (width && height) {\n                        attachDataToGridLineLayers(context);\n                    }\n                },\n                subNamespace: (context) => {\n                    const { rowIndex, colIndex, namespace } = context.metaInf();\n                    return {\n                        [`${unitNs[1]}.${WIDTH}`]: namespace,\n                        [`${unitNs[1]}.${HEIGHT}`]: namespace,\n                        [`${groupNs}.domain.x`]: `${colIndex}0`,\n                        [`${groupNs}.domain.y`]: `${rowIndex}0`\n                    };\n                }\n            }],\n            throwback: [\n                {\n                    type: 'registerChangeListener',\n                    props: [CommonProps.ON_LAYER_DRAW],\n                    listener: (context, [, drawn]) => {\n                        if (drawn) {\n                            context._rtree = createRTree(context);\n\n                            const firebolt = context.firebolt();\n                            dispatchQueuedSideEffects(firebolt);\n                            clearActionHistory(firebolt);\n                        }\n                        context._renderedResolve();\n                        context._lifeCycleManager.notify({\n                            client: context.layers(),\n                            action: 'drawn',\n                            formalName: 'layer'\n                        });\n                    }\n                }\n            ]\n        };\n    }\n\n    store (...params) {\n        if (params.length) {\n            const store = this._store = params[0];\n            const { throwback } = this._dependencies;\n            const { namespace } = this.metaInf();\n\n            store.addSubNamespace(namespace, FORMAL_NAME, this);\n            throwback.addSubNamespace(namespace, FORMAL_NAME, this);\n            transactor(this, this.constructor.localOptions(), store, {\n                subNamespace: namespace,\n                namespace: `${STATE_NAMESPACES.UNIT_LOCAL_NAMESPACE}`\n            });\n            this.createFireboltInstance();\n\n            return this;\n        }\n        return this._store;\n    }\n\n    createFireboltInstance () {\n        const { interactions } = this.registry();\n        const { fireboltDeps } = this._dependencies;\n        const Cls = this.getFireboltCls();\n\n        this.firebolt(new Cls(this, {\n            physical: Object.assign({}, interactions.physicalActions.get(), fireboltDeps.physicalActions),\n            behavioural: Object.assign({}, interactions.behaviours.get(), {\n                [UnitBrushBehaviour.formalName()]: UnitBrushBehaviour,\n                [PSEUDO_SELECT]: PseudoSelectBehaviour\n            }, fireboltDeps.behaviouralActions),\n            physicalBehaviouralMap: this.getActionBehaviourMap()\n        }, Object.assign({}, interactions.sideEffects.get(), fireboltDeps.sideEffects), this.getBehaviourEffectMap()));\n\n        return this;\n    }\n\n    getFireboltCls () {\n        return UnitFireBolt;\n    }\n\n    getBehaviourEffectMap () {\n        return behaviourEffectMap;\n    }\n\n    getActionBehaviourMap () {\n        return actionBehaviourMap;\n    }\n\n    /**\n     * Static helper for creates a unit instance\n     *\n     * @param {Object} [id] optional unique identifier for a unit; , id is calculated internally\n     * @param {DataModel} data instance of datamodel\n     * @param {Array.<Layer>} layers layer configuration\n     * @param {Object} config configurtion for the visual unit\n     * @return {VisualUnit} Instance of a unit\n     */\n    static create (...params) {\n        return new this(...params);\n    }\n\n    /**\n     * Returns the instance of firebolt associated with this visual unit. Firebolt dispatches the behavioural actions\n     * when any physical action happens on the elements of visual unit.\n     *\n     * @public\n     *\n     * @return {Firebolt} Instance of firebolt.\n     */\n    firebolt (...firebolt) {\n        if (firebolt.length) {\n            this._firebolt = firebolt[0];\n            return this;\n        }\n        return this._firebolt;\n    }\n\n    /**\n     * Returns the unique id of this visual unit.\n     *\n     * @public\n     * @return {string} Unique identifier.\n     */\n    id () {\n        return this._id;\n    }\n\n    lockModel () {\n        this.store().lockModel();\n        return this;\n    }\n\n    unlockModel () {\n        this.store().unlockModel();\n        return this;\n    }\n\n    timeDiffsByField (...params) {\n        if (params.length) {\n            return this;\n        }\n        return this._timeDiffsByField;\n    }\n\n    /**\n     * Renders the visual unit. It creates the layout and renders the axes and layers.\n     *\n     * @return {VisualUnit} Instance of visual unit.\n     */\n    render (container) {\n        this.createRootContainers(container);\n\n        setAxisRange(this);\n        this.renderLayers();\n        const node = this._rootSvg.node();\n        const { sideEffectClassName, classPrefix } = this.config();\n        this._sideEffectGroup = createSideEffectGroup(node, `${classPrefix}-${sideEffectClassName}`);\n        const firebolt = this.firebolt();\n        initSideEffects(firebolt.sideEffects(), firebolt);\n        return this;\n    }\n\n    createRootContainers (container) {\n        const config = this.config();\n        const { className, defClassName } = config;\n        const qualifiedClassName = getQualifiedClassName(defClassName, this.id(), config.classPrefix);\n        const width = this.width();\n        const height = this.height();\n        const containerSelection = selectElement(container).style('position', 'relative');\n        this._rootSvg = makeElement(containerSelection, 'svg', [null], className)\n                        .style('width', `${width}px`).style('height', `${height}px`);\n\n        const node = this._rootSvg.node();\n\n        setAttrs(node, {\n            width,\n            height,\n            class: qualifiedClassName.join(' ')\n        });\n        return this;\n    }\n\n    renderLayers () {\n        const width = this.width();\n        const height = this.height();\n        const node = this._rootSvg.node();\n\n        renderGridLineLayers(this, node);\n        renderLayers(this, node, this.layers(), {\n            width,\n            height\n        });\n        return this;\n    }\n\n    done () {\n        return this._renderedPromise;\n    }\n\n    /**\n     * Caches all the datamodels in an array from the next `data()` call on visual unit until `clearCaching()` or\n     * `resetData()` is called on it.\n     *\n     * @public\n     * @return {VisualUnit} Instance of visual unit.\n     */\n\n    enableCaching () {\n        this._cache = true;\n        return this;\n    }\n\n    /**\n     * Clears all the previous cached data.\n     *\n     * @public\n     * @segment VisualUnit\n     * @return {VisualUnit} Instance of visual unit.\n     */\n    clearCaching () {\n        this._cache = false;\n        this.cachedData([this.cachedData()[0]]);\n        return this;\n    }\n\n    /**\n     * Returns the drawing information from visual unit.Drawing context contains the dimensions of unit and the svg\n     * container of the visual unit.\n     *\n     * @public\n     *\n     * @return {Object} Drawing information.\n     *      ```\n     *          {\n     *              htmlContainer: // Html container of svg container of the visual unit\n     *              svgContainer: // Root svg container\n     *              width: // Width of the visual unit\n     *              height: // Height of the visual unit\n     *              sideEffectGroup: // Svg group for drawing side effect elements.\n     *              parentContainer: // Parent html container of the visual unit.\n     *              xOffset: // x offset space from the starting x position of the container,\n     *              yOffset: // y offset space from the starting y position of the container\n     *          }\n     *      ```\n     */\n    getDrawingContext () {\n        const rootSvg = this._rootSvg && this._rootSvg.node();\n        const width = this.width();\n        const height = this.height();\n        const { el, dimensions } = this.parentContainerInf();\n        return {\n            htmlContainer: this.mount(),\n            svgContainer: rootSvg,\n            width,\n            height,\n            sideEffectGroup: this._sideEffectGroup,\n            parentContainer: el,\n            parentContainerDimensions: dimensions,\n            xOffset: 0,\n            yOffset: 0\n        };\n    }\n\n    /**\n     * Returns the serialized configuration of visual unit.\n     *\n     * @return {Object} serialized configuration\n     */\n    serialize () {\n        return {\n            layers: this.layers().map(layer => layer.serialize()),\n            config: this.config(),\n            axes: this.axes().map(axis => axis.serialize())\n        };\n    }\n\n    mount (...mount) {\n        if (mount.length) {\n            this._mount = mount[0];\n            this.render(mount[0]);\n            return this;\n        }\n        return this._mount;\n    }\n\n    /**\n     * Adds a new layer to the visual unit. It takes a layer definition and creates layer instances from them. It does\n     * not render the layers. It returns the layer instances in an array. If the layer definition is a composite layer,\n     * then multiple layer instances will be returned in the array.\n     *\n     * To add a layer in the unit,\n     * ```\n     *      unit.addLayer({\n     *          name: 'bullet',\n     *          mark: 'bar',\n     *          encoding: {\n     *              x: 'Year',\n     *              y: 'Acceleration',\n     *              color: 'Origin'\n     *          }\n     *      });\n     * ```\n     * @public\n     * @param {Object} layerDef Definition of new layer.\n     *\n     * @return {Array} Array of layer instances.\n     */\n    addLayer (layerDefinition) {\n        if (layerDefinition instanceof Function) {\n            this._queuedLayerDefs.push(layerDefinition);\n            return this;\n        }\n        const layerDefinitions = sanitizeLayerDef(toArray(layerDefinition));\n\n        const layersMap = this._layersMap;\n        const markSet = {};\n        const store = {\n            layers: {},\n            components: {\n                unit: this\n            }\n        };\n        let layerIndex = 0;\n        const metaInf = this.metaInf();\n        const layers = layerDefinitions.sort((a, b) => a.order - b.order).reduce((layersArr, layerDef) => {\n            const definition = layerDef.def;\n            const markId = definition.name;\n            const defArr = toArray(definition);\n            const namespaces = [];\n            defArr.forEach((def) => {\n                def.order = layerDef.order + layerIndex;\n                const namespace = `${metaInf.namespace}-${def.mark}-${getUniqueId()}`;\n                namespaces.push(namespace);\n            });\n            layerIndex += defArr.length;\n            const instances = getLayerFromDef(this, definition, layersMap[markId], namespaces);\n            store.layers = Object.assign(store.layers, instances);\n            const instanceValues = Object.values(instances);\n            layersArr = layersArr.concat(...instanceValues);\n            layersMap[markId] = instanceValues;\n            markSet[markId] = markId;\n            return layersArr;\n        }, []);\n\n        store.unit = this;\n        const layerdeps = {};\n        const layersArr = [].concat(...Object.values(this._layersMap));\n        layersArr.forEach((layer) => {\n            const alias = layer.alias();\n            store.layers[alias] = layer;\n            layerdeps[alias] = [];\n        });\n        layers.forEach((layer) => {\n            const depArr = resolveEncodingTransform(layer, store);\n            layerdeps[layer.alias()] = depArr;\n        });\n\n        this._layerDepOrder = layerdeps;\n        this._layerAxisIndex = Object.assign(this._layerAxisIndex, getLayerAxisIndex(layers, this.fields()));\n        this.layers(layersArr);\n        return layers;\n    }\n\n    remove () {\n        const formalName = this.constructor.formalName();\n        const { lifeCycleManager, throwback } = this._dependencies;\n        const { namespace } = this.metaInf();\n        lifeCycleManager.notify({ client: this, action: 'beforeremove', formalName: 'unit' });\n        const layers = this.layers();\n        this.store().removeSubNamespace(namespace, formalName);\n        throwback.removeSubNamespace(namespace, FORMAL_NAME);\n        selectElement(this.mount()).remove();\n        this.firebolt().remove();\n        // Remove layers\n        lifeCycleManager.notify({ client: layers, action: 'beforeremove', formalName: 'layer' });\n        [...layers, ...this._gridLines, ...this._gridBands].forEach(layer => layer.remove());\n        lifeCycleManager.notify({ client: layers, action: 'removed', formalName: 'layer' });\n        lifeCycleManager.notify({ client: this, action: 'removed', formalName: 'unit' });\n        return this;\n    }\n\n    /**\n     *\n     *\n     * @param {*} identifiers\n     *\n     * @memberof VisualUnit\n     */\n    getDataModelFromIdentifiers (identifiers, mode, parentModel, hasBarLayer) {\n        if (!identifiers) return null;\n        const dataModel = parentModel || this.data();\n        return getDataModelFromIdentifiers(dataModel, identifiers, mode, hasBarLayer);\n    }\n\n    /**\n     * Resets the data of visual unit to original data model. It also clears the cached data.\n     *\n     * @public\n     * @segment VisualUnit\n     * @return {VisualUnit} Instance of visual unit.\n     */\n    resetData () {\n        this.data(this.cachedData()[0]);\n        return this;\n    }\n\n    getSourceInfo () {\n        return {\n            dimensionMeasureMap: this._dimensionMeasureMap,\n            fields: this.fields(),\n            data: this.data(),\n            axes: this.axes(),\n            retinalFields: this.retinalFields(),\n            layers: this.layers(),\n            timeDiffs: this.timeDiffsByField()\n        };\n    }\n\n    dataDomain (...params) {\n        const { namespace } = this.metaInf();\n        const store = this.store();\n        const prop = `${STATE_NAMESPACES.UNIT_GLOBAL_NAMESPACE}.${REACTIVE_PROPS.DOMAIN}`;\n        if (params.length) {\n            const domain = params[0];\n            store.commit(prop, domain, namespace);\n        }\n        return store.get(prop, namespace);\n    }\n\n    getDefaultTargetContainer () {\n        const { classPrefix, defClassName } = this.config();\n        return [`.${classPrefix}-${defClassName}`];\n    }\n\n    /**\n     * Returns an array of layer instances which matches the supplied mark type.\n     *\n     * @public\n     *\n     * @param {string} type Mark type of layer.\n     *\n     * @return {Array} Array of layer instances.\n     */\n    getLayersByType (type) {\n        const layers = getLayersBy(this.layers(), 'type', type);\n        return layers;\n    }\n\n    /**\n     * Returns the layer instance which matches the supplied layer name. If no layer is found, then it returns\n     * undefined.\n     *\n     * @public\n     * @param {string} name Name of layer.\n     *\n     * @return {VisualUnit} Layer instance.\n     */\n    getLayerByName (name) {\n        const layers = getLayersBy(this.layers(), 'name', name);\n        return layers[0];\n    }\n\n    /**\n     * Returns the point located nearest to the supplied x and y position. It returns the unique identifiers of the\n     * point. This function also accepts an additional configuration `getAllPoints` inside `config` object in the third\n     * argument which if set to true, then it returns the identifiers of all the points which falls on the nearest\n     * x value or y value if any one of the field is a dimension. Additionally, a target property is also returned\n     * which contains the identifier of the nearest point. If no nearest point is found, then it returns identifier\n     * as null.\n     *\n     * @public\n     *\n     * @param {number} x X Position of the point from where nearest point is to be found.\n     * @param {number} y Y Position of the point from where nearest point is to be found.\n     * @param {Object} config Additional configuration options.\n     * @param {boolean} config.getAllPoints If true, then returns all the points nearest to the x value or y value if\n     * it is dimension.\n     * @param {Object} config.data Data associated with the nearest point.\n     * @return {Object} Nearest point information\n     * ```\n     *      {\n     *          id: [['Origin'], ['USA'], ['Japan']], // Identifiers of all the points closest to the x value.\n     *          target: [['Origin'], ['Japan']] // Identifier of the nearest point.\n     *      }\n     * ```\n     */\n    getNearestPoint (x, y, config) {\n        let pointObj = {\n            id: null\n        };\n        const dimValue = getNearestDimensionalValue(this, {\n            x,\n            y\n        });\n\n        if (dimValue !== null && config.getAllPoints) {\n            dimValue[0].push(ReservedFields.MEASURE_NAMES);\n            pointObj.id = dimValue;\n            const layers = this.layers();\n            const pointInf = this.getMarkInfFromLayers(x, y, { ...config, dimValue });\n            layers.forEach((layer) => {\n                const measures = layer.data().getSchema()\n                    .filter(d => d.type === FieldType.MEASURE).map(d => d.name);\n                for (let i = 1, len = dimValue.length; i < len; i++) {\n                    dimValue[i].push(measures.join());\n                }\n            });\n            pointObj.target = pointInf && pointInf.id ? pointInf.id : null;\n            return pointObj;\n        }\n\n        const markInf = this.getMarkInfFromLayers(x, y, { ...config, dimValue }) || { id: null };\n        pointObj = Object.assign({}, markInf);\n\n        pointObj.target = markInf.id;\n        return pointObj;\n    }\n\n    getMarkInfFromLayers (x, y, args) {\n        const layers = this.layers();\n        const len = layers.length;\n        let point = null;\n        // Iterate through the layers array and fetch the nearest point from each layer. If a valid\n        // nearest point is found from any layer, then return that point.\n        for (let i = 0; i < len; i++) {\n            const layer = layers[i];\n            const config = layer.config();\n            if (config.interactive !== false) {\n                point = layer.getNearestPoint(x, y, args);\n            }\n            if (point) {\n                return point;\n            }\n        }\n        return point;\n    }\n\n    /**\n     * Get the information of all the marks such as x, y position and size from supplied identifiers. It\n     * returns an array of points whose data matches the given identifiers.\n     *\n     * @public\n     *\n     * @param {Array|Object} identifiers Field names and their corresponding values.\n     * ```\n     * identifiers can be given in an array of array,\n     *      ['Origin', 'Name'], // Names of the fields supplied in first array\n     *      ['USA', 'ford'], // Data values of each field supplied in rest of the arrays.\n     *      ['Japan', 'ford']\n     * or in an object,\n     *      {\n     *          Origin: ['USA']\n     *      }\n     * ```\n     * @param {Object} config Optional configurations which decides which information of the mark will\n     * be retrieved.\n     * @param {boolean} [config.getAllAttrs = false] If true, then returns all the information of each mark.\n     * @param {boolean} [config.getBBox = false] If true, then returns the bounding box of each mark.\n     *\n     * @return {Array} Array of objects containing the information of each point.\n     * ```\n     * By default, the method returns the array of points in this structure,\n     *      [\n     *          {\n     *              x: 20,\n     *              y: 100,\n     *              width: 200,\n     *              height: 100\n     *          }\n     *      ]\n     * If 'config.getAllAttrs' is true, then it returns all the information of each mark,\n     *      [\n     *      // Positions of mark on initial state of transition.\n     *          enter: {\n     *              x: 0,\n     *              y: 0\n     *          },\n     *          // Final positions of the mark\n     *          update: {\n     *              x: 20,\n     *              y: 10\n     *          },\n     *          style: // css styles of each mark\n     *          source: [200, 'USA'] // Row information of each mark\n     *          id: 20 // Row id of each mark\n     *      ]\n     * ```\n     */\n    getPlotPointsFromIdentifiers (identifiers, config = {}) {\n        let points = [];\n        let parsedIdentifiers = identifiers;\n        if (identifiers === null) {\n            return [];\n        }\n        const layers = this.layers();\n        const len = layers.length;\n        if (isSimpleObject(identifiers)) {\n            parsedIdentifiers = [Object.keys(identifiers)];\n            parsedIdentifiers = [...parsedIdentifiers, ...transposeArray(Object.values(identifiers))];\n        }\n        for (let i = 0; i < len; i++) {\n            const layer = layers[i];\n            if (layer.config().interactive !== false) {\n                points = [...points, ...layer.getPointsFromIdentifiers(parsedIdentifiers, config)];\n            }\n        }\n        return points;\n    }\n\n    /**\n     * Removes the layer instance which matches the supplied layer name.\n     *\n     * @public\n     * @param {string} name Name of layer\n     *\n     * @return {VisualUnit} Instance of visual unit.\n     */\n    removeLayerByName (name) {\n        removeLayersBy('name', name);\n        return this;\n    }\n\n    /**\n     * Removes all the layer instances which matches the supplied mark type.\n     *\n     * @public\n     * @param {string} type Mark type of layer.\n     *\n     * @return {VisualUnit} Instance of visual unit.\n     */\n    removeLayersByType (type) {\n        removeLayersBy('type', type);\n        return this;\n    }\n\n    calculateDomainFromData () {\n        const domain = unionDomainFromLayers(this.layers(), this.fields(), this._layerAxisIndex,\n            this.data().getFieldsConfig());\n        return domain;\n    }\n\n    getRangeFromIdentifiers ({ criteria, fields }) {\n        return fields.reduce((acc, v) => {\n            acc[v] = criteria[v];\n            return acc;\n        }, {});\n    }\n\n    getRangeFromPositions ({ startPos, endPos }) {\n        const { x, y } = this.fields();\n        const axes = this.axes();\n        const xField = x[0];\n        const yField = y[0];\n        const xFieldType = x[0].type();\n        const yFieldType = y[0].type();\n        const dimensions = Object.keys(this.data().getFieldspace().getDimension());\n\n        if (xFieldType === FieldType.MEASURE && yFieldType === FieldType.MEASURE) {\n            const dom = {\n                x: axes.x[0].invertExtent(startPos.x, endPos.x).sort((a, b) => a - b),\n                y: axes.y[0].invertExtent(startPos.y, endPos.y).sort((a, b) => a - b)\n            };\n            const range = {};\n            if (`${xField}` === `${yField}`) {\n                const xdom = dom.x;\n                const ydom = dom.y;\n                const min = xdom[0] > ydom[0] ? ydom : xdom;\n                const max = min === ydom ? xdom : ydom;\n                if (min[1] < max[0]) {\n                    range[xField] = [];\n                } else {\n                    range[xField] = [max[0], min[1] < max[1] ? min[1] : max[1]];\n                }\n            } else {\n                range[xField] = dom.x;\n                range[yField] = dom.y;\n            }\n            return range;\n        } else if (xFieldType === FieldType.DIMENSION || yFieldType === FieldType.DIMENSION) {\n            const points = this._rtree.search({\n                minX: startPos.x,\n                minY: startPos.y,\n                maxX: endPos.x,\n                maxY: endPos.y\n            });\n\n            const criteria = [[]];\n            dimensions.forEach((field) => {\n                criteria[0].push(`${field}`);\n            });\n\n            points.forEach((point) => {\n                const data = point.data;\n                const vals = [];\n                dimensions.forEach((field) => {\n                    vals.push(data[field]);\n                });\n                criteria.push(vals);\n            });\n            return criteria;\n        }\n        return null;\n    }\n}\n","import { ERROR_MSG } from 'muze-utils';\n\n/**\n *\n *\n * @export\n * @class Variable\n */\nexport default class Variable {\n\n    /**\n     *\n     *\n     * @memberof Variable\n     */\n    type () {\n        throw new Error(ERROR_MSG.INTERFACE_IMPL);\n    }\n\n    /**\n     *\n     *\n     * @memberof Variable\n     */\n    toString () {\n        throw new Error(ERROR_MSG.INTERFACE_IMPL);\n    }\n\n}\n","import Variable from './variable';\n\n/**\n * This is a wrapper on top of multiple variables which are of same type but they are shown in the same axis.This is\n * required in case of range plots or ohlc plots where one plot is mapped to multiple measure fields. At that time,\n * we need to create a composed variable from multiple variables. This class just wraps them into one variable instance\n * and provides methods to get the type and other common functionalities which can be performed on a simple variable\n * instance.\n *\n * @public\n * @class ComposeVars\n */\nclass ComposedVars extends Variable {\n\n    /**\n     * Creates an instance of ComposeVars.\n     *\n     * @param {Array} vars Array of SimpleVars.\n     */\n    constructor (...vars) {\n        super();\n        this.vars(vars);\n    }\n\n    vars (...params) {\n        if (params.length) {\n            this._vars = params[0];\n            return this;\n        }\n        return this._vars;\n    }\n\n    data (...dm) {\n        if (dm.length) {\n            this.vars().forEach(d => d.data(dm[0]));\n            this._data = dm[0];\n            return this;\n        }\n        return this._data;\n    }\n\n    /**\n     * Get all the field names from composed variable instance.\n     *\n     * @public\n     * @return {Array} Array of field names.\n     */\n    getMembers () {\n        const vars = this.vars();\n        return vars.map(member => member.getMembers()[0]);\n    }\n\n    /**\n     * Type of field associated with this composed variable.\n     *\n     * @return {string} Type of variable (Measure/Dimension).\n     */\n    type () {\n        return this.vars()[0].type();\n    }\n\n    toString () {\n        return this.vars().map(d => d.toString()).join(',');\n    }\n\n    /**\n     * Returns the number formatter function of the variable.\n     *\n     * @return {Function} Number formatter function of the variable.\n     */\n    numberFormat () {\n        return this.vars()[0].numberFormat();\n    }\n\n    format (values) {\n        return this.vars()[0].format(values);\n    }\n\n    getSchemaDef () {\n        return this.data().getFieldsConfig()[this.vars()[0]].def;\n    }\n\n    /**\n     * Returns the subtype of the fields associated with this variable instance.\n     *\n     * @public\n     * @return {string} Subtype of the variable.\n     */\n    subtype () {\n        return this.vars()[0].subtype();\n    }\n\n    /**\n     * Returns the consecutive minimum difference of the field values.\n     *\n     * @public\n     * @return {number} Minimum consecutive difference.\n     */\n    getMinDiff () {\n        return this.vars()[0].getMinDiff();\n    }\n\n    /**\n     * Returns the display name of the fields.\n     *\n     * @return {string} returns the display name.\n     */\n    displayName () {\n        return this.vars().map(d => d.displayName()).join(',');\n    }\n}\n\nexport default ComposedVars;\n","import { DateTimeFormatter, retrieveFieldDisplayName, DimensionSubtype } from 'muze-utils';\nimport Variable from './variable';\n\n/**\n * This is a wrapper on top of fields passed in rows or columns in canvas. This is used to get the type of field or\n * get min difference from the field values.\n *\n * @public\n * @class SimpleVariable\n */\nexport default class SimpleVariable extends Variable {\n\n    /**\n     * Creates an instance of simple variable instance.\n     *\n     * @param {string} name Field name.\n     */\n    constructor (name) {\n        super();\n        this.oneVar(name);\n    }\n\n    /**\n     * Gets the field name associated with this variable instance.\n     *\n     * @public\n     * @return {string} Name of the field.\n     */\n    oneVar (...oneV) {\n        if (oneV.length) {\n            this._oneVar = oneV[0];\n            return this;\n        }\n        return this._oneVar;\n    }\n\n    data (...dm) {\n        if (dm.length) {\n            this._data = dm[0];\n            return this;\n        }\n        return this._data;\n    }\n\n    toString () {\n        return this.oneVar();\n    }\n\n    /**\n     * Gets the number formatter function of this variable.\n     *\n     * @public\n     * @return {Function} Number formatter function.\n     */\n    numberFormat () {\n        if (this.type() === 'measure') {\n            const formatter = this.data().getFieldspace().getMeasure()[this.oneVar()];\n            return formatter.numberFormat();\n        } return val => val;\n    }\n\n    format (values) {\n        if (values && this.subtype() === 'temporal') {\n            const formatter = this.data().getFieldspace().getDimension()[this.oneVar()].schema().format;\n            const dtFormat = new DateTimeFormatter(formatter);\n            values = values.map(e => dtFormat.getNativeDate(e));\n        }\n        return values;\n    }\n\n    /**\n     * Returns a formatter function which transforms the input value to its original form.\n     *\n     * @public\n     * @return {Function} Returns raw formatter function.\n     */\n    rawFormat () {\n        if (this.subtype() === DimensionSubtype.TEMPORAL) {\n            const dateFormat = this.data().getFieldspace().getDimension()[this.oneVar()].schema().format;\n            return val => DateTimeFormatter.formatAs(val, dateFormat);\n        }\n        return val => val;\n    }\n\n    /**\n     * Return the field names associated with this variable instance.\n     *\n     * @public\n     * @return {Array} Array of fields.\n     */\n    getMembers () {\n        return [this.oneVar()];\n    }\n\n    /**\n     * Returns the type of the variable. Whether it is measure or dimension.\n     *\n     * @public\n     * @return {string} Type of variable.\n     */\n    type () {\n        const fieldDef = this.data().getFieldsConfig()[this.oneVar()].def;\n        return fieldDef.type;\n    }\n\n    /**\n     * Returns the subtype of the variable. Subtype can be categorical or temporal. If no subtype is found, then it\n     * returns the type of the variable.\n     *\n     * @public\n     * @return {string} Subtype of variable.\n     */\n    subtype () {\n        const fieldDef = this.data().getFieldsConfig()[this.oneVar()].def;\n        return fieldDef.subtype || fieldDef.type;\n    }\n\n    /**\n     * Returns the minimum consecutive difference between the data values of this variable.\n     *\n     * @return {number} Minimum consecutive difference.\n     */\n    getMinDiff () {\n        const fieldSpace = this.data().getFieldspace();\n        return fieldSpace.fieldsObj()[this.oneVar()].minimumConsecutiveDifference();\n    }\n\n    /**\n     * Returns true if two variable instances are same.If both variable has the same field names, they are equal.\n     *\n     * @return {Boolean} Whether two variable instances are same.\n     */\n    equals (varInst) {\n        return this.oneVar() === varInst.oneVar();\n    }\n\n    /**\n     * Returns the display name of the field.\n     *\n     * @return {string} returns the display name.\n     */\n    displayName () {\n        return retrieveFieldDisplayName(this.data(), this.oneVar());\n    }\n\n    /**\n     * Returns the schema defination of the field.\n     *\n     * @return {Object} schema def\n     */\n    getSchemaDef () {\n        return this.data().getFieldsConfig()[this.oneVar()].def;\n    }\n}\n","import { ComposedVars, SimpleVariable } from '../variable';\nimport { DIMENSION, COLUMNS, ROWS, TEMPORAL } from '../enums/constants';\n\n/**\n * Gets the list of fields in a sorted order by measurement and dimension\n *\n * @param {Array} fieldList List of fields in the view\n * @param {Object} fieldMap Mapping of fields in the datamodel\n * @return {Array} fields sorted by measurement and dimensions\n */\nconst orderFields = (fieldArray, type) => {\n    const dimensionArr = [[], []];\n    const measureArr = [[], []];\n    const temporalArr = [[], []];\n    const categoricalArr = [[], []];\n\n    fieldArray.forEach((fieldList, index) => {\n        fieldList.forEach((field) => {\n            if (field.type() === DIMENSION) {\n                dimensionArr[index].push(field);\n                field.subtype() === TEMPORAL ? temporalArr[index].push(field) : categoricalArr[index].push(field);\n            } else {\n                measureArr[index].push(field);\n            }\n        });\n    });\n\n    const numOfMeasures = measureArr[0].length + (measureArr[1] ? measureArr[1].length : 0);\n\n    // Single array of fields\n    if (!fieldArray[1]) {\n        // Push measures to bottom\n        measureArr[1] = type === COLUMNS ? measureArr[0] : [];\n        // Push measures to left\n        measureArr[0] = type !== COLUMNS ? measureArr[0] : [];\n        // Bottom and right dimensions empty\n        dimensionArr[1] = [];\n        // Left and top filled with dimensions\n        dimensionArr[0] = dimensionArr[0];\n        if (numOfMeasures === 0) {\n            const allDimensions = [...dimensionArr[0], ...dimensionArr[1]];\n            if (type === COLUMNS) {\n                dimensionArr[1] = allDimensions[allDimensions.length - 1] ? [allDimensions[allDimensions.length - 1]]\n                        : [];\n                allDimensions.splice(-1, 1);\n            } else {\n                dimensionArr[1] = [];\n            }\n            dimensionArr[0] = [...allDimensions];\n        }\n    }\n\n    if (dimensionArr[0].length && dimensionArr[1].length && numOfMeasures > 0) {\n        dimensionArr[0] = [...dimensionArr[0], ...dimensionArr[1]];\n        dimensionArr[1] = [];\n    }\n    return {\n        fields: dimensionArr.map((list, i) => (i === 1 ?\n            measureArr[i].concat(dimensionArr[i]) : dimensionArr[i].concat(measureArr[i]))),\n        dimensions: [...dimensionArr[0], ...dimensionArr[1]],\n        measures: [...measureArr[0], ...measureArr[1]],\n        temporal: [...temporalArr[0], ...temporalArr[1]],\n        categorical: [...categoricalArr[0], ...categoricalArr[1]]\n    };\n};\n\n/**\n * Gets the list of normalized fields\n *\n * @param {Array} fields List of fields in the view\n * @param {Object} fieldMap Mapping of fields in the datamodel\n * @return {Array} fields normalized by measurement and dimensions\n */\nconst normalizeFields = (config, type) => {\n    const fieldsArr = [];\n    const fields = config[type];\n\n    if (!(fields[0] instanceof Array)) {\n        fieldsArr[0] = fields;\n    } else {\n        fieldsArr[0] = fields[0] || [];\n        fieldsArr[1] = fields[1] || [];\n    }\n    return fieldsArr;\n};\n\n/**\n *\n *\n * @param {*} fields\n * @param {*} datamodel\n *\n */\nconst convertToVar = (datamodel, fields) => {\n    const vars = [];\n\n    fields && fields.forEach((field) => {\n        if (field instanceof ComposedVars) {\n            vars.push(field);\n            field.data(datamodel);\n        } else {\n            vars.push(new SimpleVariable(field).data(datamodel));\n        }\n    });\n    return vars;\n};\n\n/**\n *\n *\n * @param {*} rows\n * @param {*} columns\n * @param {*} datamodel\n *\n */\nexport const transformFields = (datamodel, config) => {\n    const [rowsInfo, columnsInfo] = [ROWS, COLUMNS].map((fields) => {\n        const normalizedFields = normalizeFields(config, fields);\n        const norFields = [convertToVar(datamodel, normalizedFields[0])];\n\n        if (normalizedFields[1]) {\n            norFields[1] = convertToVar(datamodel, normalizedFields[1]);\n        }\n        return orderFields(norFields, fields);\n    });\n    const {\n        fields: rows,\n        dimensions: rowDimensions,\n        measures: rowMeasures,\n        temporal: rowTemporalFields,\n        categorical: rowCategoricalFields\n    } = rowsInfo;\n    const {\n        fields: columns,\n        dimensions: columnDimensions,\n        measures: columnMeasures,\n        temporal: columnTemporalFields,\n        categorical: columnCategoricalFields\n    } = columnsInfo;\n    return {\n        rows,\n        rowDimensions,\n        rowMeasures,\n        rowTemporalFields,\n        rowCategoricalFields,\n        columns,\n        columnTemporalFields,\n        columnCategoricalFields,\n        columnDimensions,\n        columnMeasures\n    };\n};\n","/**\n * This file exports variables that are used as defaults for the crosstab group.\n */\nexport const DATA_UPDATE_COUNTER = 0;\n\nexport const DEFAULT_LAYER_TYPE = 'cartesian';\n\nexport const BORDER_WIDTH = {\n    default: 2,\n    facet: 1\n};\n","import {\n    DARK,\n    NONE,\n    LEFT,\n    RIGHT,\n    NORMAL,\n    TOP,\n    DARKER,\n    BOTTOM\n} from '../enums/constants';\n\nconst handleBlankCell = (data) => {\n    data.config().externalClassname.push(`${NONE}-${LEFT}`);\n    data.config().externalClassname.push(`${NONE}-${RIGHT}`);\n};\n\nexport const sanitiseHeaderMatrix = (matrices, header) => {\n    if (header) {\n        for (let i = 0; i < matrices.length; i++) {\n            if (i !== 0) {\n                matrices[i].config({\n                    externalClassname: [`${DARK}`]\n                });\n            } else {\n                matrices[i].config({\n                    externalClassname: [`${NONE}-${LEFT}`, `${DARK}`]\n                });\n            }\n        }\n    } else {\n        for (let i = 0; i < matrices.length; i++) {\n            for (let j = 0; j < matrices[0].length; j++) {\n                matrices[i][j].config({\n                    externalClassname: [`${DARK}`]\n                });\n            }\n        }\n    }\n};\n\nexport const sanitiseGeomMatrix = (matrices, arr = {}) => {\n    for (let i = 0; i < matrices.length; i++) {\n        for (let j = 0; j < matrices[0].length; j++) {\n            matrices[i][j].config({\n                externalClassname: [`${NORMAL}`]\n            });\n\n            if (i === 0) {\n                matrices[i][j].config().externalClassname.push(`${DARKER}-${TOP}`);\n            } else if (i === matrices.length - 1) {\n                matrices[i][j].config().externalClassname.push(`${DARKER}-${BOTTOM}`);\n            }\n\n            if (j === matrices[i].length - 1) {\n                matrices[i][j].config().externalClassname.push(`${DARK}-${RIGHT}`);\n            }\n\n            if (arr[i]) {\n                matrices[i - 1][j].config().externalClassname.push(`${DARK}-${BOTTOM}`);\n            }\n        }\n    }\n};\n\nexport const sanitiseFacetValues = (matrices, type, blankCell) => {\n    const normal = type === `${RIGHT}` ? `${DARK}` : `${NORMAL}`;\n    const length = matrices.length;\n    let latestSource = matrices[0][0].source();\n    const lastSource = matrices[matrices.length - 1][0].source();\n    const arr = {};\n\n    // initialise the classname\n    for (let i = 0; i < matrices.length; i++) {\n        for (let j = 0; j < matrices[0].length; j++) {\n            matrices[i][j].config({\n                externalClassname: [normal]\n            });\n        }\n\n        // seperate wrt the corner most facet\n        if (matrices[i][0].source() !== latestSource) {\n            arr[i] = i;\n            latestSource = matrices[i][0].source();\n        }\n    }\n\n    // add custom classname\n    for (let i = 0; i < matrices.length; i++) {\n        for (let j = 0; j < matrices[0].length; j++) {\n            if (j === 0) {\n                matrices[i][0].config().externalClassname.push(`${NONE}-${type}`);\n                if (matrices[i][j].source() === lastSource) {\n                    matrices[i][j].config().externalClassname.push(`${DARKER}-${BOTTOM}`);\n                } else {\n                    matrices[i][0].config().externalClassname.push(`${DARK}-${BOTTOM}`);\n                }\n                if (matrices[i][j] instanceof blankCell) {\n                    matrices[i][j].config().externalClassname.push(`${NONE}-${TOP}`);\n                    matrices[i][j].config().externalClassname.push(`${NONE}-${BOTTOM}`);\n                }\n            } else if (j !== matrices[i].length - 1) {\n                matrices[i][j].config().externalClassname.push(`${DARK}-${type}`);\n            }\n\n            if (i === 0) {\n                matrices[0][j].config().externalClassname.push(`${DARKER}-${TOP}`);\n            } else if (i === length - 1) {\n                matrices[i][j].config().externalClassname.push(`${DARKER}-${BOTTOM}`);\n            }\n\n            if (arr[i]) {\n                matrices[i - 1][j].config().externalClassname.push(`${DARK}-${BOTTOM}`);\n            }\n\n            if (matrices[i][j] instanceof blankCell) {\n                handleBlankCell(matrices[i][j], blankCell);\n            }\n        }\n    }\n    return arr;\n};\n\nexport const sanitiseBorderMatrix = (matrices, blankCell) => {\n    const { leftMatrix, rightMatrix, topMatrix, bottomMatrix } = matrices;\n    let bottomBorderObj = {};\n    if (rightMatrix.length) {\n        bottomBorderObj = sanitiseFacetValues(rightMatrix, `${RIGHT}`, blankCell);\n    }\n    if (leftMatrix.length) {\n        bottomBorderObj = sanitiseFacetValues(leftMatrix, `${LEFT}`, blankCell);\n    }\n    topMatrix.length && sanitiseHeaderMatrix(topMatrix);\n    bottomMatrix.length && sanitiseHeaderMatrix(bottomMatrix);\n    return bottomBorderObj;\n};\n","import { Store, COORD_TYPES, getObjProp, DataModel } from 'muze-utils';\nimport { VisualUnit } from '@chartshq/visual-unit';\nimport { BaseLayer } from '@chartshq/visual-layer';\nimport { DATA_UPDATE_COUNTER } from '../enums/defaults';\nimport { Variable } from '../variable';\nimport { PolarEncoder, CartesianEncoder } from '../encoder';\nimport { sanitiseHeaderMatrix } from './cell-border-applier';\nimport {\n    DIMENSION,\n    MEASURE,\n    ORDINAL,\n    LINEAR,\n    ROW,\n    COLUMN,\n    COL,\n    LEFT,\n    RIGHT,\n    TOP,\n    BOTTOM,\n    COLOR,\n    SIZE,\n    TEMPORAL,\n    SHAPE,\n    INTERACTION,\n    GRID_LINES,\n    GRID_BANDS,\n    HEADER,\n    FACET,\n    X,\n    Y,\n    ARC,\n    RADIUS,\n    ANGLE\n} from '../enums/constants';\n\nconst POLAR = COORD_TYPES.POLAR;\n\n/**\n * Creates an instance of a store which contains the arguments to make the class reactive\n *\n * @return {Object} instance of store\n * @memberof VisualGroup\n */\nexport const initStore = () => new Store({\n    [DATA_UPDATE_COUNTER]: DATA_UPDATE_COUNTER\n});\n\n/**\n *\n *\n * @param {*} arr\n */\nexport const isDistributionEqual = arr => [...arr[0], ...arr[1]].reduce((isEqual, row) => {\n    const rowType = row.type();\n\n    if (rowType === MEASURE || rowType === TEMPORAL) {\n        isEqual = true;\n    }\n    return isEqual;\n}, false);\n\n/**\n *\n *\n */\nexport const initializeCacheMaps = () => ({\n    cellMap: new Map(),\n    xAxesMap: new Map(),\n    yAxesMap: new Map(),\n    entryCellMap: new Map(),\n    exitCellMap: new Map()\n});\n\n/**\n *\n *\n * @param {*} axisName\n * @param {*} id\n */\nexport const getAxisKey = (axisName, ...params) => `${axisName}-axis-${params.join('-')}`;\n\n/**\n *\n *\n * @param {*} rowId\n * @param {*} columnId\n */\nexport const getCellKey = (rowId, columnId) => `cell-${rowId}-${columnId}`;\n\n/**\n *\n *\n * @param {*} config\n *\n */\nexport const extractUnitConfig = (config) => {\n    const unitConfig = {};\n    const attrNames = [INTERACTION, GRID_LINES, GRID_BANDS];\n\n    attrNames.forEach((attr) => {\n        if (config[attr] !== undefined) {\n            unitConfig[attr] = config[attr];\n        }\n    });\n    return unitConfig;\n};\n\nexport const hasOneField = (fields) => {\n    let hasField = false;\n    const keys = Object.keys(fields);\n    hasField = keys.some(d => fields[d].length > 0);\n    return hasField;\n};\n\n/**\n *\n *\n * @param {*} headers\n * @param {*} index\n * @param {*} rowLength\n *\n * @memberof MatrixResolver\n */\nexport const getHeaderText = (headers, index, rowLength) => {\n    let header = '';\n\n    if (index === rowLength - 1 && headers.length > rowLength) {\n        for (let i = index; i < headers.length - 1; i++) {\n            header += `${headers[i].toString()} / `;\n        }\n        header += headers[headers.length - 1].toString();\n        return header;\n    } else if (headers[index]) {\n        return headers[index].toString();\n    }\n    return '';\n};\n\n/**\n *\n *\n * @param {*} fields\n * @param {*} fieldHeaders\n * @param {*} TextCell\n * @param {*} labelManager\n *\n */\nexport const headerCreator = (fields, fieldHeaders, TextCell, { classPrefix, labelManager, sanitizeCheck }) => {\n    const headers = fields.length > 0 ? fields[0].map((cell, i) => new TextCell({\n        type: HEADER,\n        className: `${classPrefix}-grid-headers`\n    }, {\n        labelManager\n    }).source(getHeaderText(fieldHeaders, i, fields[0].length))\n                    .config({ show: cell.config().show })) : [];\n    sanitizeCheck && sanitiseHeaderMatrix(headers, true);\n    return headers;\n};\n\n/**\n * @param {*} facetConfig\n *\n */\nexport const sanitizeCheck = (facetConfig = {}) => {\n    const { isBorderPresent } = facetConfig;\n    const updateBorderMap = ['color', 'showRowBorders', 'showColBorders', 'showValueBorders'];\n    return (!isBorderPresent || updateBorderMap.every(d => !isBorderPresent[d]));\n};\n\n/**\n *\n *\n * @param {*} variable\n * @param {*} allFields\n *\n */\nexport const findInGroup = (variable, allFields) => {\n    let channel = null;\n\n    [COLOR, SIZE, SHAPE].forEach((e) => {\n        if (this.store.get(e) && variable === this.store.get(e)[0]) {\n            channel = e;\n        }\n    });\n\n    if (channel) {\n        return { channel };\n    }\n    [ROW, COL].forEach((facetType) => {\n        allFields[`${facetType}Facets`].forEach((e) => {\n            if (e.toString() === variable) {\n                channel = { channel: FACET, type: facetType === COL ? COLUMN : ROW };\n            }\n        });\n    });\n\n    if (channel) {\n        return channel;\n    }\n\n    [ROW, COL].forEach((projType) => {\n        allFields[`${projType}Projections`].forEach((e) => {\n            e.forEach((m) => {\n                if (m.toString() === variable) {\n                    channel = projType === COL ? X : Y;\n                }\n            });\n        });\n    });\n\n    if (channel) {\n        return { channel };\n    }\n    return null;\n};\n\n/**\n *\n *\n * @param {*} datamodel\n * @param {*} field\n */\nexport const getAxisType = (fieldsConfig, field) => {\n    let fieldType = ORDINAL;\n\n    if (field && fieldsConfig[field].def.type !== DIMENSION) {\n        fieldType = LINEAR;\n    }\n    return fieldType;\n};\n\n/**\n *\n *\n * @param {*} datamodel\n * @param {*} fieldName\n *\n */\nexport const retriveDomainFromData = (datamodel, fieldName) => {\n    const field = datamodel.getFieldspace().fields.find(d => d.name() === fieldName.toString());\n    return field.domain();\n};\n\n/**\n *\n *\n * @memberof MatrixResolver\n */\nexport const mutateAxesFromMap = (cacheMaps, axes) => {\n    let xAxes = null;\n    let yAxes = null;\n    const {\n        xAxesMap,\n        yAxesMap\n    } = cacheMaps;\n    const {\n        x: xAxisSet,\n        y: yAxisSet\n    } = axes;\n\n    xAxisSet && xAxisSet.forEach((axisId) => {\n        const xAxis = xAxesMap.get(axisId);\n        xAxes = xAxes || [];\n        xAxes.push(xAxis);\n    });\n\n    yAxisSet && yAxisSet.forEach((axisId) => {\n        const yAxis = yAxesMap.get(axisId);\n        yAxes = yAxes || [];\n        yAxes.push(yAxis);\n    });\n\n    return {\n        xAxes, yAxes\n    };\n};\n\nconst hasPolarEncodings = layerConf => layerConf.mark === ARC || [RADIUS, ANGLE].some(field =>\n        getObjProp(layerConf.encoding, field));\n\n/**\n *\n *\n * @param {*} layers\n *\n */\nexport const getEncoder = (layers) => {\n    let encoder = new CartesianEncoder();\n\n    if (layers.length) {\n        // Figuring out the kind of layers the group will have\n        encoder = layers.some(layerConf => hasPolarEncodings(layerConf)) ? new PolarEncoder() : encoder;\n    }\n    return encoder;\n};\n\n/**\n *\n *\n * @param {*} type\n * @param {*} fields\n * @param {*} userAxisFromConfig\n *\n */\nexport const getHeaderAxisFrom = (type, fields, userAxisFromConfig) => {\n    let axisFrom = userAxisFromConfig[type];\n    let headerFrom = '';\n    const options = type === ROW ? [LEFT, RIGHT] : [BOTTOM, TOP];\n    const [firstField, secondField] = fields;\n    const firstFieldType = i => (firstField.length ? firstField[i].type() : null);\n    const secondFieldType = i => (secondField.length ? secondField[i].type() : null);\n\n    if (firstFieldType(firstField.length - 1) === DIMENSION && secondFieldType(0) === DIMENSION) {\n        headerFrom = axisFrom ? options[1 - options.indexOf(axisFrom)] : options[1];\n\n        if (type === COLUMN && (firstField[firstField.length - 1].toString() === secondField[0].toString())) {\n            axisFrom = TOP;\n        } else {\n            axisFrom = axisFrom || options[0];\n        }\n    } else if (secondFieldType(secondField.length - 1) === DIMENSION) {\n        headerFrom = type === ROW ? RIGHT : BOTTOM;\n        axisFrom = type === ROW ? RIGHT : BOTTOM;\n    } else {\n        headerFrom = type === ROW ? LEFT : TOP;\n        axisFrom = type === ROW ? LEFT : TOP;\n    }\n    if (firstFieldType(firstField.length - 1) === MEASURE && secondFieldType(0) === MEASURE) {\n        axisFrom = type === ROW ? LEFT : TOP;\n    } else if (secondFieldType(0) === MEASURE) {\n        axisFrom = type === ROW ? RIGHT : BOTTOM;\n    } else if (firstFieldType(firstField.length - 1) === MEASURE) {\n        axisFrom = type === ROW ? LEFT : TOP;\n    }\n    return [headerFrom, axisFrom];\n};\n\n/**\n *\n *\n * @param {*} type\n * @param {*} fields\n * @param {*} layers\n *\n * @memberof MatrixResolver\n */\nexport const setFacetsAndProjections = (context, fieldInfo, encoder) => {\n    const {\n        fields,\n        type\n    } = fieldInfo;\n    const { facets, projections } = encoder.simpleEncoder.getFacetsAndProjections(fields, type);\n\n    context.facets({ [`${type}Facets`]: facets });\n    context.projections({ [`${type}Projections`]: projections });\n\n    return { facets, projections, fields };\n};\n\nconst getRowBorders = (left, right) => {\n    const borders = {\n        top: false,\n        bottom: false,\n        left: false,\n        right: false\n    };\n    if (left.length > 1 || right.length > 1) {\n        borders.top = true;\n        borders.bottom = true;\n        borders.left = true;\n        borders.right = true;\n    }\n    return borders;\n};\n\nconst getColumnsBorders = (top, bottom) => {\n    const borders = {\n        top: false,\n        bottom: false,\n        left: false,\n        right: false\n    };\n    if (top.length || bottom.length) {\n        if ((top[0] && top[0].length > 1) || (bottom[0] && bottom[0].length > 1)) {\n            borders.top = true;\n            borders.bottom = true;\n            borders.left = true;\n            borders.right = true;\n        }\n    }\n    return borders;\n};\n\nconst getValueBorders = (rows, columns) => {\n    const borders = { top: true, left: true, bottom: true, right: true };\n    const borderTypeRow = [LEFT, RIGHT];\n    const borderTypeCol = [TOP, BOTTOM];\n    rows.forEach((e, i) => {\n        if (e[0] && e[0].length) {\n            borders[borderTypeRow[i]] = true;\n        } else {\n            borders[borderTypeRow[i]] = false;\n        }\n    });\n    columns.forEach((e, i) => {\n        if (e.length) {\n            borders[borderTypeCol[i]] = true;\n        } else {\n            borders[borderTypeCol[i]] = false;\n        }\n    });\n\n    return borders;\n};\n\nexport const getBorders = (matrices, encoder) => {\n    let showRowBorders = { top: false, bottom: false, left: false, right: false };\n    let showColBorders = { top: false, bottom: false, left: false, right: false };\n    let showValueBorders = { top: false, bottom: false, left: false, right: false };\n    const {\n        rows,\n        columns,\n        values: valueMatrix\n    } = matrices;\n    const [leftRows, rightRows] = rows;\n    const [topColumns, bottomColumns] = columns;\n    const {\n        rowDimensions,\n        columnDimensions,\n        rowTemporalFields,\n        columnTemporalFields,\n        columnMeasures,\n        rowMeasures\n    } = encoder.fieldInfo();\n    const allDimensionLength = rowDimensions.length + columnDimensions.length;\n    const allMeasuresLength = rowMeasures.length + columnMeasures.length;\n    const allTemporalFieldsLength = rowTemporalFields.length + columnTemporalFields.length;\n\n    if (encoder.constructor.type() === POLAR) {\n        if (!allDimensionLength) {\n            return { showRowBorders, showColBorders, showValueBorders };\n        }\n    } else if (!allMeasuresLength && !allTemporalFieldsLength && allDimensionLength <= 2) {\n        return { showRowBorders, showColBorders, showValueBorders };\n    }\n\n    showRowBorders = getRowBorders(leftRows, rightRows);\n    showColBorders = getColumnsBorders(topColumns, bottomColumns);\n    showValueBorders = getValueBorders([leftRows, rightRows], [topColumns, bottomColumns]);\n\n    if (valueMatrix.length > 1) {\n        showValueBorders.top = true;\n        showValueBorders.bottom = true;\n    }\n    if (valueMatrix.length && valueMatrix[0].length > 1) {\n        showValueBorders.left = true;\n        showValueBorders.right = true;\n    }\n    return { showRowBorders, showColBorders, showValueBorders };\n};\n\nexport const getFieldsFromSuppliedLayers = (suppliedLayerConfig) => {\n    const encodingArr = suppliedLayerConfig.map(conf => (conf.encoding || {}));\n    const fields = [].concat(...encodingArr.map(enc => Object.values(enc).map(d => (typeof d === 'object' ?\n        d.field : d))));\n    return [...new Set(fields.filter(d => d))];\n};\n\nexport const extractFields = (facetsAndProjections, layerFields) => {\n    const fields = Object.values(facetsAndProjections).map((arr) => {\n        const flattenArray = [].concat(...arr);\n        return [].concat(...flattenArray.map((field) => {\n            if (field instanceof Variable) {\n                return field.getMembers();\n            }\n            return field;\n        }));\n    });\n    return [].concat(...fields, ...layerFields);\n};\n\n/**\n * This method sorts the facets fields inplace if field is of categorical type\n * @param {Object} facets Array of facets\n * @param {Array} keys Array of the facet field values\n * @param {Object} config configuration object\n * @return {Array} Returns sorted facets\n */\nexport const sortFacetFields = (facets, keys, config) => {\n    /**\n     * Check if the facet sorted by the user is plotted\n     * If an incorrect field is sorted, return the keys as is\n     */\n    const schema = [];\n    const facetNames = [];\n    const sortInfo = [];\n    const sortConfig = config.sort;\n\n    facets.forEach((facet) => {\n        const name = `${facet}`;\n        facetNames.push(name);\n\n        const facetSortConfig = sortConfig[name];\n\n        if (facetSortConfig) {\n            sortInfo.push([name, facetSortConfig]);\n        } else {\n            sortInfo.push([name, null]);\n        }\n        schema.push(facet.getSchemaDef());\n    });\n\n    return new DataModel([facetNames, ...keys], schema).getData({ sort: sortInfo }).data;\n};\n\nexport const removeExitCells = (resolver) => {\n    const exitCells = resolver.cacheMaps().exitCellMap;\n    const store = resolver.store();\n    const qualifiedStateProps = [].concat(...VisualUnit.getQualifiedStateProps(),\n        ...BaseLayer.getQualifiedStateProps());\n    store.lockCommits(qualifiedStateProps);\n    exitCells.forEach((placeholder) => {\n        placeholder.remove();\n    });\n    store.unlockCommits(qualifiedStateProps);\n};\n","export const PROPS = {\n    layers: {},\n    data: {},\n    globalConfig: {}\n};\n","import { ERROR_MSG, mergeRecursive, generateGetterSetters } from 'muze-utils';\nimport { transformFields } from './field-sanitizer';\nimport { getHeaderAxisFrom, getFieldsFromSuppliedLayers, hasOneField } from '../group-helper/group-utils';\nimport { ROW, COLUMN } from '../enums/constants';\nimport { PROPS } from './props';\n\n/**\n *\n *\n * @export\n * @class VisualEncoder\n */\nexport default class VisualEncoder {\n\n    constructor () {\n        generateGetterSetters(this, PROPS);\n    }\n\n    /**\n     *\n     *\n     * @memberof VisualEncoder\n     */\n    createAxis () {\n        throw new Error(ERROR_MSG.INTERFACE_IMPL);\n    }\n\n    /**\n     *\n     *\n     * @memberof VisualEncoder\n     */\n    setCommonDomain () {\n        throw new Error(ERROR_MSG.INTERFACE_IMPL);\n    }\n\n    /**\n     *\n     *\n     * @memberof VisualEncoder\n     */\n    getLayerConfig () {\n        throw new Error(ERROR_MSG.INTERFACE_IMPL);\n    }\n\n    fieldInfo (...info) {\n        if (info.length) {\n            this._fieldInfo = mergeRecursive(this._fieldInfo || {}, info[0]);\n            return this;\n        }\n        return this._fieldInfo;\n    }\n\n    /**\n     *\n     *\n     * @param {*} datamodel\n     * @param {*} config\n     *\n     * @memberof VisualEncoder\n     */\n    fieldSanitizer (datamodel, config) {\n        this.fieldInfo(transformFields(datamodel, config));\n        return this.fieldInfo();\n    }\n\n    /**\n     *\n     *\n     * @param {*} params\n     *\n     * @memberof VisualEncoder\n     */\n    axisFrom (...params) {\n        if (params.length) {\n            this._axisFrom = params[0];\n            return this;\n        }\n        return this._axisFrom;\n    }\n\n    /**\n     *\n     *\n     * @param {*} params\n     *\n     * @memberof VisualEncoder\n     */\n    headerFrom (...params) {\n        if (params.length) {\n            this._headerFrom = params[0];\n            return this;\n        }\n        return this.__headerFrom;\n    }\n\n    /**\n     *\n     *\n     * @param {*} axisFrom\n     *\n     * @memberof CartesianEncoder\n     */\n    setAxisAndHeaders (axisFrom = {}, fields) {\n        const [rowHeader, rowAxis] = getHeaderAxisFrom(ROW, fields.rows, axisFrom);\n        const [colHeader, colAxis] = getHeaderAxisFrom(COLUMN, fields.columns, axisFrom);\n\n        this.axisFrom({\n            row: rowAxis,\n            column: colAxis\n        });\n        this.headerFrom({\n            row: rowHeader,\n            column: colHeader\n        });\n        return this;\n    }\n\n    getProjectionFields (layers) {\n        return getFieldsFromSuppliedLayers(layers);\n    }\n\n    hasMandatoryFields (fields) {\n        return hasOneField(fields);\n    }\n}\n","import { ContinousAxis, BandAxis, TimeAxis, ColorAxis, SizeAxis, ShapeAxis } from '@chartshq/muze-axis';\n\nexport const scaleMaps = {\n    linear: ContinousAxis,\n    band: BandAxis,\n    temporal: TimeAxis,\n    size: SizeAxis,\n    color: ColorAxis,\n    shape: ShapeAxis\n};\n","import { DataModel, mergeRecursive } from 'muze-utils';\nimport { sortFacetFields } from './group-utils';\nimport { BORDER_WIDTH } from '../enums/defaults';\nimport { FACET } from '../enums/constants';\n\n/**\n* Gets name of fields form the variables\n*\n* @param {*} fields1\n* @param {*} [fields2=[]]\n*\n*/\nconst getFieldNames = fieldVar => fieldVar.reduce((acc, d) => {\n    acc = [...acc, ...d.getMembers()];\n    return acc;\n}, []);\n\n/**\n*\n*\n* @param {*} fieldInfo\n* @returns\n*/\nconst prepareProjectionInfo = (fieldInfo) => {\n    const {\n        colProjections,\n        rowProjections\n    } = fieldInfo;\n    const uniqueFields = [];\n    let indices = [];\n    let projections = [];\n\n    rowProjections.forEach((rowProj, rIndex) => {\n        const newRIndex = rIndex;\n        colProjections.forEach((colProj, cIndex) => {\n            const newCIndex = cIndex;\n            const newRowProj = getFieldNames(rowProj);\n            const newColProj = getFieldNames(colProj);\n\n            uniqueFields.push([...newRowProj, ...newColProj]);\n            indices.push({ rowIndex: newRIndex, colIndex: newCIndex });\n            projections.push({ rowFields: rowProj, columnFields: colProj });\n        });\n    });\n    indices = indices.length ? indices : [{ rowIndex: 0, colIndex: 0 }];\n    projections = projections.length ? projections : [{ rowFields: [], columnFields: [] }];\n    return { uniqueFields, indices, projections };\n};\n\n/**\n*\n*\n* @param {*} fieldInfo\n* @returns\n*/\nconst prepareFacetInfo = (fieldInfo) => {\n    const {\n        rowFacets,\n        colFacets\n    } = fieldInfo;\n\n    const rowFacetNames = getFieldNames(rowFacets);\n    const colFacetNames = getFieldNames(colFacets);\n    const allFacets = [...rowFacetNames, ...colFacetNames];\n\n    return { rowFacetNames, colFacetNames, allFacets, rowFacets, colFacets };\n};\n\n/**\n*\n*\n* @param {*} context\n* @param {*} facetNames\n* @param {*} hashMap\n* @param {*} keys\n* @param {*} index\n* @returns\n*/\nconst prepareHashMaps = (context, facetNames, hashMap, keys, index) => {\n    const rowKey = [];\n    facetNames.forEach((name) => {\n        const key = context._derivation[context._derivation.length - 1].meta.keys[name];\n\n        rowKey.push(key);\n    });\n\n    const joinedRowKey = rowKey.join(',');\n\n    if (hashMap[joinedRowKey] === undefined) {\n        hashMap[joinedRowKey] = index++;\n        keys.push(rowKey);\n    }\n    return rowKey;\n};\n\nconst createJoinedKeys = keys => keys.map(e => ({\n    keyArr: e,\n    joinedKey: e.join(',')\n}));\n\nconst setDefaultConfigForFacet = (facetInfo, projectionInfo, config) => {\n    let conf = {};\n\n    if (config && (facetInfo.allFacets.length || projectionInfo.indices.length > 1)) {\n        const { facetsUserConfig = {}, border } = config;\n        const { isBorderPresent = {}, isGridLinePresent = {} } = facetsUserConfig;\n        const gridLinesShowLength = Object.keys(isGridLinePresent).length;\n        const {\n            width: borderWidth,\n            color: borderColor,\n            style: borderStyle,\n            showValueBorders,\n            showRowBorders,\n            showColBorders\n        } = border;\n        let gridLines = {};\n        let borderConf = {};\n\n        if (Object.keys(isBorderPresent).length === 0 || !(isBorderPresent.width)) {\n            borderConf = {\n                width: BORDER_WIDTH[FACET]\n            };\n        } else {\n            Object.assign(borderConf,\n                borderWidth ? { width: borderWidth } : null,\n                borderColor ? { color: borderColor } : null,\n                showValueBorders ? { showValueBorders } : null,\n                showRowBorders ? { showRowBorders } : null,\n                showColBorders ? { showColBorders } : null,\n                borderStyle ? { style: borderStyle } : null);\n        }\n        if (gridLinesShowLength <= 0) {\n            gridLines = {\n                x: {\n                    show: false\n                }\n            };\n        }\n        conf = {\n            border: borderConf,\n            gridLines\n        };\n    }\n    return conf;\n};\n\n/**\n*\n*\n* @param {*} splitModels\n* @param {*} facetInfo\n* @returns\n*/\nconst getSplitModelHashMap = (splitModels, facetInfo, config) => {\n    const {\n        rowFacetNames,\n        colFacetNames,\n        rowFacets,\n        colFacets\n    } = facetInfo;\n\n    const rowKeyHashMap = {};\n    const colKeyHashMap = {};\n\n    const rowKeys = [];\n    const colKeys = [];\n    const rowIndex = 0;\n\n    const splitModelsHashMap = {};\n\n    splitModels.forEach((splitContext) => {\n        const rowKey = prepareHashMaps(splitContext, rowFacetNames, rowKeyHashMap, rowKeys, rowIndex);\n        const colKey = prepareHashMaps(splitContext, colFacetNames, colKeyHashMap, colKeys, 1);\n\n        splitModelsHashMap[`${rowKey}-${colKey}`] = splitContext;\n    });\n\n    return {\n        splitModelsHashMap,\n        rowKeys: createJoinedKeys(sortFacetFields(rowFacets, rowKeys, config)),\n        colKeys: createJoinedKeys(sortFacetFields(colFacets, colKeys, config))\n    };\n};\n\n/**\n * Formats row or columns keys with the provided formatter.\n *\n * @param {Array} keys - The collection of row or column keys.\n * @param {Array} formatterList - The list of corresponding formatter.\n */\nconst formatKeys = (keys, formatterList) => {\n    const formattedKeys = [];\n    keys.forEach((rKeys, rIdx) => {\n        formattedKeys[rIdx] = [];\n        rKeys.forEach((key, idx) => {\n            formattedKeys[rIdx][idx] = formatterList[idx](key);\n        });\n    });\n    return formattedKeys;\n};\n\n/**\n*\n*\n* @param {Object} context\n* @param {Object} fieldInfo\n* @returns\n*/\nconst splitByColumn = (context, optionalProjections) => {\n    const {\n        matrix,\n        dataModel,\n        rowIndex,\n        colIndex,\n        facetInfo,\n        projectionInfo,\n        geomCellCreator\n    } = context;\n    const {\n        indices,\n        uniqueFields,\n        projections\n    } = projectionInfo;\n\n    const commonFields = optionalProjections;\n\n    dataModel.splitByColumn(uniqueFields, commonFields).forEach((model, i) => {\n        let { rowIndex: row, colIndex: col } = indices[i];\n        row += rowIndex;\n        col += colIndex;\n\n        matrix[row] = matrix[row] || [];\n\n        const projectionIndexObject = {\n            indices: {\n                rowIndex: row,\n                columnIndex: col\n            },\n            projections: projections[i]\n        };\n\n        matrix[row][col] = geomCellCreator(model, projectionIndexObject, facetInfo);\n    });\n    const lastIndex = indices[indices.length - 1];\n\n    return {\n        rowIndex: lastIndex.rowIndex + rowIndex,\n        colIndex: lastIndex.colIndex + colIndex\n    };\n};\n\nconst createColumnDataModels = (colContext, fieldInfo, sourceDM) => {\n    let context = {};\n    const {\n        rowFacets,\n        colFacets\n    } = fieldInfo;\n    const {\n        rowKeyArr,\n        rowKey,\n        colKeyObj,\n        newRowIndex,\n        splitModelsHashMap,\n        currentColumnIndex\n    } = colContext;\n\n    const { keyArr: colKeyArr, joinedKey: colKey } = colKeyObj;\n    const hashMapKey = splitModelsHashMap[`${rowKey}-${colKey}`];\n\n    if (hashMapKey) {\n        context = { dataModel: hashMapKey };\n    } else {\n        const emptyDm = new DataModel([], sourceDM.getData().schema);\n        context = { dataModel: emptyDm };\n    }\n\n    context = {\n        ...context,\n        ...colContext,\n        facetInfo: {\n            rowFacets: [rowFacets, rowKeyArr],\n            colFacets: [colFacets, colKeyArr]\n        },\n        rowIndex: newRowIndex,\n        colIndex: currentColumnIndex\n    };\n    const dataModels = splitByColumn(context, fieldInfo.optionalProjections);\n\n    return {\n        columnIndex: dataModels.colIndex + 1,\n        rowIndex: dataModels.rowIndex\n    };\n};\n\nconst createRowDataModels = (rowContext, fieldInfo, sourceDM) => {\n    let currentColumnIndex = 0;\n    let rowIndexForCurrentKey = 0;\n    const {\n        colKeys,\n        rowKeyObj,\n        currentRowIndex\n    } = rowContext;\n    const newRowIndex = currentRowIndex;\n    const { keyArr: rowKeyArr, joinedKey: rowKey } = rowKeyObj;\n    const colContext = {\n        ...rowContext,\n        rowKeyArr,\n        rowKey,\n        newRowIndex\n    };\n    rowIndexForCurrentKey = currentRowIndex;\n    if (colKeys.length) {\n        colKeys.forEach((colKeyObj) => {\n            colContext.colKeyObj = colKeyObj;\n            colContext.currentColumnIndex = currentColumnIndex;\n            const { columnIndex, rowIndex } = createColumnDataModels(colContext, fieldInfo, sourceDM);\n\n            currentColumnIndex = columnIndex;\n            rowIndexForCurrentKey = rowIndex;\n        });\n    } else {\n        colContext.colKeyObj = { keyArr: [], joinedKey: '' };\n        colContext.currentColumnIndex = currentColumnIndex;\n\n        const { columnIndex, rowIndex } = createColumnDataModels(colContext, fieldInfo, sourceDM);\n\n        currentColumnIndex = columnIndex;\n        rowIndexForCurrentKey = rowIndex;\n    }\n    return {\n        rowIndex: ++rowIndexForCurrentKey\n    };\n};\n\n/**\n* Gets Matrixes for corresponding datamodel, facets and projections\n*\n* @param {Object} dataModel input datamodel\n* @param {Object} fieldInfo Information about the fields\n* @param {Function} geomCellCreator Callback executed after datamodels are prepared after sel/proj\n* @return {Object} set of matrices with the corresponding row and column keys\n*/\nexport const getMatrixModel = (dataModel, fieldInfo, geomCellCreator, globalConfig) => {\n    let currentRowIndex = 0;\n    const matrix = [];\n    const {\n        rowFacets,\n        colFacets\n    } = fieldInfo;\n\n    const projectionInfo = prepareProjectionInfo(fieldInfo);\n    const facetInfo = prepareFacetInfo(fieldInfo);\n    const allSplitModels = dataModel.splitByRow(facetInfo.allFacets);\n\n    const {\n        splitModelsHashMap,\n        rowKeys,\n        colKeys\n    } = getSplitModelHashMap(allSplitModels, facetInfo, globalConfig);\n\n    const defaultConfig = setDefaultConfigForFacet(facetInfo, projectionInfo, globalConfig);\n    globalConfig = mergeRecursive(globalConfig, defaultConfig);\n\n    const generalContext = {\n        matrix,\n        geomCellCreator,\n        projectionInfo,\n        splitModelsHashMap,\n        colKeys\n    };\n    if (rowKeys.length) {\n        rowKeys.forEach((rowKeyObj) => {\n            const rowContext = {\n                ...generalContext,\n                rowKeyObj,\n                currentRowIndex\n            };\n            const { rowIndex } = createRowDataModels(rowContext, fieldInfo, dataModel);\n\n            currentRowIndex = rowIndex;\n        });\n    } else if (colKeys.length) {\n        let currentColumnIndex = 0;\n        const newRowIndex = currentRowIndex;\n\n        colKeys.forEach((colKeyObj) => {\n            const colContext = {\n                ...generalContext,\n                rowKeyArr: [],\n                rowKey: '',\n                colKeyObj,\n                newRowIndex,\n                currentColumnIndex\n            };\n            const { columnIndex, rowIndex } = createColumnDataModels(colContext, fieldInfo, dataModel);\n            currentRowIndex = rowIndex;\n            currentColumnIndex = columnIndex;\n        });\n    } else {\n        let currentColumnIndex = 0;\n        const newRowIndex = currentRowIndex;\n        const colContext = {\n            ...generalContext,\n            rowKeyArr: [],\n            rowKey: '',\n            colKeyObj: { keyArr: [], joinedKey: '' },\n            newRowIndex,\n            currentColumnIndex\n        };\n        const { columnIndex, rowIndex } = createColumnDataModels(colContext, fieldInfo, dataModel);\n        currentRowIndex = rowIndex;\n        currentColumnIndex = columnIndex;\n    }\n\n    const formattedColKeys = formatKeys(colKeys.map(e => e.keyArr),\n        colFacets.map(facetField => facetField.rawFormat()));\n    const formattedRowKeys = formatKeys(rowKeys.map(e => e.keyArr),\n        rowFacets.map(facetField => facetField.rawFormat()));\n\n     // Getting column keys\n    const transposedColKeys = formattedColKeys.length > 0 ? formattedColKeys[0].map((col, i) =>\n     formattedColKeys.map(row => row[i])) : formattedColKeys;\n\n    return { matrix, rowKeys: formattedRowKeys, columnKeys: transposedColKeys };\n};\n","import { AxisOrientation } from '@chartshq/muze-axis';\nimport {\n    getObjProp,\n    FieldType,\n    retrieveNearestGroupByReducers,\n    mergeRecursive,\n    createSelection,\n    DataModel\n} from 'muze-utils';\nimport { getMatrixModel } from './matrix-model';\nimport {\n    getCellKey,\n    isDistributionEqual,\n    mutateAxesFromMap,\n    getFieldsFromSuppliedLayers,\n    extractFields,\n    removeExitCells,\n    sanitizeCheck\n} from './group-utils';\nimport { ROW, ROWS, COLUMNS, COL, LEFT, RIGHT, TOP,\n    BOTTOM, PRIMARY, SECONDARY, X, Y, TEMPORAL } from '../enums/constants';\nimport { SimpleVariable } from '../variable';\nimport { sanitiseBorderMatrix, sanitiseGeomMatrix } from './cell-border-applier';\n\n/**\n * Updates row and column cells with the geom cell corresponding to the facet keys\n *\n * @param {*} resolver\n * @param {*} facets\n */\nconst updateCells = (resolver, facets, geomCell) => {\n    [ROW, COL].forEach((field) => {\n        const cells = resolver[`${field}Cells`]();\n        const facetKey = facets[`${field}Facets`][1].join();\n\n        !cells[facetKey] && (cells[facetKey] = []);\n        cells[facetKey].push(geomCell);\n        resolver[`${field}Cells`](cells);\n    });\n};\n\n/**\n *\n *\n * @param {*} context\n * @param {*} datamodel\n * @param {*} fieldInfo\n * @param {*} facets\n *\n */\nexport const createValueCells = (context, datamodel, fieldInfo, facets) => {\n    const {\n        projections,\n        indices\n    } = fieldInfo;\n    const {\n        rowFields,\n        columnFields\n    } = projections;\n    const {\n         rowIndex,\n         columnIndex\n    } = indices;\n    const {\n        suppliedLayers,\n        cell: GeomCell,\n        resolver,\n        config,\n        encoder,\n        detailFields\n    } = context;\n    const axes = resolver.axes();\n    const cacheMaps = resolver.cacheMaps();\n    const matrixLayers = resolver.matrixLayers();\n    const labelManager = resolver.dependencies().smartlabel;\n    const horizontalAxis = resolver.horizontalAxis();\n    const verticalAxis = resolver.verticalAxis();\n    const datamodelTransform = resolver.datamodelTransform();\n    const sortedFields = config.sort;\n    const {\n        entryCellMap,\n        exitCellMap\n    } = cacheMaps;\n    const layerConfigArr = encoder.getLayerConfig({ columnFields, rowFields }, suppliedLayers || [],\n        context.retinalConfig);\n    const axesCreators = { config, labelManager, axes, cacheMaps };\n\n    fieldInfo.normalizedColumns = verticalAxis.fields;\n    fieldInfo.normalizedRows = horizontalAxis.fields;\n\n    const allFacets = [\n        [...facets.rowFacets[0], ...facets.colFacets[0]],\n        [...facets.rowFacets[1], ...facets.colFacets[1]]\n    ];\n    const facetFields = allFacets.slice();\n    facetFields[0] = facetFields[0].map(facetField => facetField.oneVar());\n\n    matrixLayers[rowIndex] = matrixLayers[rowIndex] ? matrixLayers[rowIndex] : [];\n    matrixLayers[rowIndex][columnIndex] = layerConfigArr;\n\n    // return from map if already there otherwise create and put in map\n    const geomCellKey = getCellKey(rowIndex, columnIndex);\n    const fields = {\n        y: rowFields,\n        x: columnFields\n    };\n\n    const geomCell = !exitCellMap.has(geomCellKey) ? new GeomCell() : exitCellMap.get(geomCellKey);\n\n    // Sort datamodel if user has sorted a field\n    const sortConfig = Object.keys(sortedFields).map(field => [field, sortedFields[field]]);\n    if (sortConfig.length) {\n        datamodel = datamodel.sort(sortConfig, { saveChild: true });\n    }\n\n    geomCell.data(datamodel)\n                    .fields(fields)\n                    .transform(datamodelTransform)\n                    .detailFields(detailFields)\n                    .facetByFields(allFacets);\n\n    encoder.createAxis(axesCreators, fieldInfo, Object.assign({}, context, { geomCell, facetFields }));\n    entryCellMap.set(geomCellKey, geomCell);\n    exitCellMap.delete(geomCellKey);\n\n    updateCells(resolver, facets, geomCell);\n\n    return entryCellMap.get(geomCellKey);\n};\n\nconst extractAxisIndex = id => getObjProp(id.match(/^[0-9]*?(?=-)/g), 0);\n\n/**\n * Creates axis cells based on the set of axes\n *\n * @param {Selection} selection Contains a selection of the axis units\n * @param {Array} axes Actual axis units\n * @param {number} axisIndex 0-> primary axis, 1-> secondary axis(when dual axis is made)\n * @param {Object} cells Contains a collection of the cells\n * @return {Object} return either set of axis/blank cells depending on the config\n */\nconst createAxisCells = (selection, axes, axisIndex, cells) =>\n    createSelection(selection, axis => axis, axes, (item, i) => i + item.reduce((e, n) => {\n        const id = n.id + axisIndex;\n        return `${e}-${id}`;\n    }, '')).map((currObj, axis) => {\n        if (axis && axis[axisIndex]) {\n            const axisInst = axis[axisIndex];\n            const { orientation, show } = axisInst.config();\n\n            return new cells.AxisCell().source(axisInst).config({\n                isOffset: orientation === AxisOrientation.LEFT || orientation === AxisOrientation.TOP,\n                show\n            });\n        }\n        return new cells.BlankCell().config({ show: false });\n    }).sort((a, b) => extractAxisIndex(a[0]) - extractAxisIndex(b[0]));\n\n/**\n *\n *\n * @param {*} context\n * @param {*} selectionObj\n * @param {*} cells\n * @retur\n */\nconst axisPlaceholderGn = (context, selObj, cells) => {\n    const {\n        matrices\n    } = context;\n    const {\n        axesMatrix\n    } = matrices;\n\n    return (type, axisFrom) => {\n        const axes = axesMatrix[`${type}`];\n\n        if (axes && axes.length) {\n            if (type === X || type === Y) {\n                const fieldNames = type === Y ? ROWS : COLUMNS;\n\n                [PRIMARY, SECONDARY].forEach((fieldType, index) => {\n                    const selObjProp = `${fieldNames}${fieldType}`;\n                    let axisIndex = index;\n                    let axesForDraw = axes;\n                    if (axisFrom === RIGHT || axisFrom === BOTTOM) {\n                        axisIndex = 1 - axisIndex;\n                    }\n                    if (!getObjProp(axes, 0, axisIndex)) {\n                        axesForDraw = [];\n                    }\n                    selObj[selObjProp] = createAxisCells(selObj[selObjProp], axesForDraw, axisIndex, cells);\n                });\n            } else {\n                selObj.rowsPrimary = createAxisCells(selObj.rowPrime, axes.map(() => []), 0, cells);\n                selObj.rowsSecondary = createAxisCells(selObj.rowSec, axes.map(() => []), 0, cells);\n                selObj.columnsPrimary = createAxisCells(selObj.colPrime, axes[0], 0, cells);\n                selObj.columnsSecondary = createAxisCells(selObj.colSec, axes[0], 0, cells);\n            }\n        }\n        return selObj;\n    };\n};\n\n/**\n * Creates header cells based on the set of headers\n *\n * @param {Object} selection Contains a selection of the header units\n * @param {string} headers Contains a list of the headers\n * @param {Object} cells Contains a collection of the cells\n * @param {Object} labelManager smart label instance\n * @return {Object} return either set of header cells depending on the config\n */\nconst createTextCells = (selection, headers, cells, labelManager) => createSelection(selection,\n        (label) => {\n            const textCell = new cells.TextCell({}, { labelManager });\n            textCell.source(label);\n            return textCell;\n        }, headers, (key, i) => key + i);\n\nconst extractFacetIndex = id => id.split('-').pop();\n\n/**\n *\n *\n * @param {*} context\n * @param {*} selectionObj\n * @param {*} cells\n * @param {*} labelManager\n *\n */\nconst headerPlaceholderGn = (context, selectionObj, cells, labelManager) => {\n    const {\n        axis,\n        keys,\n        type,\n        facet\n    } = context;\n    const counter = axis.length / keys.length;\n    const selectionKeys = keys.length ? axis.map((d, i) => keys[Math.floor(i / counter)]) : [];\n\n    const selObjUpdater = createSelection(selectionObj[`${type}Headers`], keySet => keySet, selectionKeys,\n    (keySet, i) => `${keySet.join(',')}-${i}`)\n        .sort((a, b) => extractFacetIndex(a[0]) - extractFacetIndex(b[0]));\n\n    return selObjUpdater.map((keySet, data) => {\n        let textCells = createTextCells(null, data, cells, labelManager);\n        textCells = textCells.map((cell, k) => cell.source(k).config(facet));\n        return textCells;\n    });\n};\n\n/**\n * Creates a set of placeholders as a part of selection object\n *\n * @param {Array} normalizedOptions contains normalized rows and columns\n * @param {Array} matrices contains axis and value matrices\n * @param {aArrayny} projections contains set of row and column projections\n * @param {Object} cells Contains a collection of the cells\n * @param {Object} labelManager smart label instance\n * @return {Object} Creates a set of placeholders as a part of selections\n */\nconst generatePlaceholders = (context, cells, labelManager) => {\n    let selectionObj;\n    const {\n        matrices,\n        fields,\n        facetsAndProjections,\n        selection,\n        facet,\n        encoders,\n        resolver\n    } = context;\n    const {\n        rows,\n        columns\n    } = fields;\n    const {\n        valuesMatrix\n    } = matrices;\n    const {\n        rowProjections,\n        colProjections\n    } = facetsAndProjections;\n    const {\n        rowKeys,\n        columnKeys\n    } = valuesMatrix;\n    const takeAxisFrom = encoders.simpleEncoder._axisFrom;\n    const takeHeaderFrom = encoders.simpleEncoder._headerFrom;\n\n    selectionObj = selection || {};\n\n    ['pie', X, Y].forEach((axis) => {\n        const axisFrom = axis === X ? takeAxisFrom.column : takeAxisFrom.row;\n        selectionObj = axisPlaceholderGn(context, selectionObj, cells)(axis, axisFrom);\n    });\n\n    const {\n        rowsPrimary,\n        rowsSecondary,\n        columnsPrimary,\n        columnsSecondary\n    } = selectionObj;\n\n    const rowAxis = rowsPrimary && rowsPrimary.getObjects().length ? rowsPrimary.getObjects() :\n        (rowsSecondary && rowsSecondary.getObjects().length ? rowsSecondary.getObjects() : []);\n    const colAxis = columnsPrimary && columnsPrimary.getObjects().length ? columnsPrimary.getObjects() :\n        (columnsSecondary && columnsSecondary.getObjects().length ? columnsSecondary.getObjects() : []);\n\n    const headerConfig = [\n        { type: LEFT, section: rows[0], axis: rowAxis, headerFrom: takeHeaderFrom.row },\n        { type: RIGHT, section: rows[1], axis: rowAxis, headerFrom: takeHeaderFrom.row },\n        { type: TOP, section: columns[0], axis: colAxis, headerFrom: takeHeaderFrom.column },\n        { type: BOTTOM, section: columns[1], axis: colAxis, headerFrom: takeHeaderFrom.column }\n    ];\n\n    headerConfig.forEach((config, index) => {\n        let keys;\n        let length;\n        const {\n            type,\n            section,\n            axis,\n            headerFrom\n        } = config;\n\n        if (index < 2) {\n            keys = rowKeys;\n            length = rowProjections.length > 0 ? rowProjections.length : 1;\n        } else {\n            keys = columnKeys;\n            length = colProjections.length > 0 ? colProjections.length : 1;\n        }\n        keys = keys.map(arr => arr.map(val => resolver.valueParser()(val)));\n        if (section.length && headerFrom === type && axis && keys.length) {\n            const hContext = { axis, length, type };\n            let headers = [];\n            if (index < 2) {\n                hContext.keys = keys;\n                hContext.facet = facet.rows;\n                headers = headerPlaceholderGn(hContext, selectionObj, cells, labelManager);\n            } else {\n                hContext.facet = facet.columns;\n                hContext.keys = keys[0].map((key, i) => keys.map(e => e[i]));\n\n                headers = headerPlaceholderGn(hContext, selectionObj, cells, labelManager);\n            }\n            selectionObj[`${type}Headers`] = headers;\n        } else {\n            selectionObj[`${type}Headers`] = null;\n        }\n    });\n    return selectionObj;\n};\n\n/**\n * Generates matrices\n *\n * @param {Object} config Configuration to generate matrices\n * @param {Array} matrices Matrices containing the set of visual units and axes units\n * @param {Object} cells Contains a collection of the cells\n * @param {Object} labelManager smart label instance\n * @return {Object} contains a collection of matrices\n */\nexport const generateMatrices = (context, matrices, cells, labelManager) => {\n    const {\n        unitHeight,\n        unitWidth,\n        facetsAndProjections,\n        normalizedRows,\n        normalizedColumns,\n        selection,\n        axisFrom,\n        facet,\n        encoders,\n        resolver\n     } = context;\n    const placeholderContext = {\n        fields: {\n            rows: normalizedRows,\n            columns: normalizedColumns\n        },\n        matrices,\n        facetsAndProjections,\n        selection,\n        axisFrom,\n        facet,\n        encoders,\n        resolver\n    };\n    // Generate placeholders for all matrices\n    const selectionObj = generatePlaceholders(placeholderContext, cells, labelManager);\n    const {\n        columnsPrimary,\n        columnsSecondary,\n        rowsPrimary,\n        rowsSecondary,\n        leftHeaders,\n        topHeaders,\n        bottomHeaders,\n        rightHeaders\n    } = selectionObj;\n    const [rowPrime, rowSec, colPrime, colSec] = [rowsPrimary, rowsSecondary, columnsPrimary, columnsSecondary]\n        .map(d => (d ? d.getObjects() : []));\n    const [leftFacets, rightFacets] = [leftHeaders, rightHeaders]\n        .map(e => (e ? e.getObjects()\n                        .map(f => f.getObjects()) : []));\n    let rowPriority = rowSec.length ? 1 : -1;\n    rowPrime.length && rowPriority++;\n    let colPriority = colSec.length ? 1 : -1;\n    colPrime.length && colPriority++;\n\n    // Compute left matrix using left headers and the axes on the rows\n    let leftMatrix = leftFacets.length ? leftFacets.map((d, i) => {\n        rowPrime[i] = rowPrime[i] ? [rowPrime[i]] : [];\n        return [...d, ...rowPrime[i]];\n    }) : (rowPrime ? rowPrime.map(d => [d]) : []);\n\n    // Compute right matrix using right headers and the axes on the rows\n    const rightMatrix = rowSec.length ? rowSec.map((d, i) => [d, ...(rightFacets[i] || [])]) : (rightFacets.length ?\n        rightFacets.map(d => [...d]) : []);\n\n    const topMatrix = [];\n    if (topHeaders) {\n        const headers = topHeaders.getObjects();\n        headers.forEach((e) => {\n            const innerHeaders = e.getObjects();\n            innerHeaders.forEach((x, i) => {\n                topMatrix[i] = topMatrix[i] || [];\n                topMatrix[i].push(x);\n            });\n        });\n    }\n    // Compute top matrix using the top headers and axes on the columns\n    if (colPrime.length) {\n        topMatrix.push(colPrime);\n    }\n\n    // Bottom and right matrices are prepared using the user config.\n    let bottomMatrix = [];\n    if (colSec.length) {\n        bottomMatrix.push(colSec);\n    }\n    const currentBottomLength = bottomMatrix.length;\n    if (bottomHeaders) {\n        const headers = bottomHeaders.getObjects();\n        headers.forEach((e) => {\n            const innerHeaders = e.getObjects();\n            innerHeaders.forEach((x, i) => {\n                bottomMatrix[i + currentBottomLength] = bottomMatrix[i + currentBottomLength] || [];\n                bottomMatrix[i + currentBottomLength].push(x);\n            });\n        });\n    }\n\n    if (!leftMatrix.length && !rightMatrix.length) {\n        const cell = new cells.BlankCell();\n        cell.setAvailableSpace(unitWidth, unitHeight);\n        leftMatrix = [[cell]];\n    }\n\n    if (!topMatrix.length && (!bottomMatrix.length || !bottomMatrix[0].length)) {\n        const cell = new cells.BlankCell();\n        cell.setAvailableSpace(unitWidth, unitHeight);\n        bottomMatrix = [[cell]];\n    }\n\n    return {\n        rows: [leftMatrix, rightMatrix],\n        columns: [topMatrix, bottomMatrix],\n        selectionObj,\n        colPriority,\n        rowPriority\n    };\n};\n\nconst getAxisFields = (projections, fieldHolder = []) =>\n                            projections.reduce((acc, item) =>\n                                [...acc, ...item.reduce((ac, field) =>\n                                   (field instanceof SimpleVariable ? [...ac, field.oneVar()] : ac), [])], fieldHolder);\n\nconst sortDmTemporalFields = (resolver, datamodel) => {\n    let axisFields = [];\n    const projections = resolver.projections();\n    axisFields = getAxisFields(projections.rowProjections, getAxisFields(projections.colProjections));\n\n    const fieldConfig = datamodel.getFieldsConfig();\n    const temporalFields = axisFields.reduce((acc, field) =>\n        ((fieldConfig[field].def.subtype === TEMPORAL) ? [...acc, [field]] : acc), []);\n    return temporalFields.length ? datamodel.sort(temporalFields, { saveChild: true }) : datamodel;\n};\n\nconst transformDataModel = (dataModel, config, resolver) => {\n    let groupedModel;\n\n    const fieldsConfig = dataModel.getFieldsConfig();\n    const resolvedData = resolver.data();\n    const { groupBy, suppliedLayers, facetsAndProjections } = config;\n\n    if (resolvedData instanceof DataModel) {\n        resolvedData.dispose();\n    }\n\n    const fields = getFieldsFromSuppliedLayers(suppliedLayers).filter(field =>\n        getObjProp(fieldsConfig, field, 'def', 'type') === FieldType.DIMENSION);\n    const allFields = extractFields(facetsAndProjections, fields);\n\n    groupedModel = dataModel.project(allFields);\n    resolver.data(groupedModel);\n    if (!groupBy.disabled) {\n        const newFieldsConfig = groupedModel.getFieldsConfig();\n        const dimensions = allFields.filter(field =>\n            getObjProp(newFieldsConfig, field, 'def', 'type') === FieldType.DIMENSION);\n        const aggregationFns = groupBy.measures;\n        const measureNames = Object.keys(groupedModel.getFieldspace().getMeasure());\n        const nearestAggFns = retrieveNearestGroupByReducers(groupedModel, ...measureNames);\n        const resolvedAggFns = mergeRecursive(nearestAggFns, aggregationFns);\n\n        groupedModel = groupedModel.groupBy(dimensions.length ? dimensions : [''], resolvedAggFns);\n    }\n    // sort temporal fields if any in the given rows and columns\n    groupedModel = sortDmTemporalFields(resolver, groupedModel);\n    resolver.transformedData(groupedModel);\n    return groupedModel;\n};\n\n/**\n * Computes matrices for a group\n *\n * @param {Object} datamodel on which the matrices are to be computed\n * @param {Object} config configuration of the matrices\n * @param {Object} layerRegistry contains the registered layers\n * @return {Object} conputed matrices\n * @memberof MatrixResolver\n */\nexport const computeMatrices = (resolverConfig) => {\n    let placeholderInfo = {};\n    const {\n        datamodel,\n        encoders,\n        resolver,\n        globalConfig,\n        selection,\n        transform,\n        componentRegistry,\n        groupBy,\n        labelManager,\n        fieldMap,\n        layerConfig,\n        registry,\n        normalizedRows,\n        normalizedColumns,\n        otherEncodings,\n        facetsAndProjections,\n        simpleEncoder,\n        config\n    } = resolverConfig;\n\n    const { rowFacets, colFacets } = facetsAndProjections;\n    const isFacet = rowFacets.length > 0 || colFacets.length > 0;\n\n    if (isFacet) {\n        globalConfig.isFacet = true;\n    }\n    const matrixGnContext = {\n        // Configuration to be passed to generate the  different matrices.\n        // A common config is used for both value matrices and other matrices\n        normalizedColumns,\n        normalizedRows,\n        facetsAndProjections,\n        layers: layerConfig,\n        fieldMap,\n        otherEncodings,\n        encoders,\n        facet: globalConfig.facet || {},\n        axisFrom: globalConfig.axisFrom || {},\n        selection,\n        resolver\n    };\n    const cells = {\n        GeomCell: resolver.getCellDef(registry.cells.GeomCell),\n        AxisCell: resolver.getCellDef(registry.cells.AxisCell),\n        BlankCell: resolver.getCellDef(registry.cells.BlankCell),\n        TextCell: resolver.getCellDef(registry.cells.TextCell)\n    };\n    const isRowSizeEqual = isDistributionEqual(normalizedRows);\n    const isColumnSizeEqual = isDistributionEqual(normalizedColumns);\n\n    resolver.colCells({});\n    resolver.rowCells({});\n    resolver.datamodelTransform(transform || {});\n\n    // Cell creation begins here\n    resolver.resetSimpleAxes();\n\n    const {\n        entryCellMap\n    } = resolver.cacheMaps();\n    const newCacheMap = {\n        exitCellMap: entryCellMap,\n        entryCellMap: new Map()\n    };\n\n    resolver.cacheMaps(newCacheMap);\n    const valueCellContext = {\n        config: globalConfig,\n        suppliedLayers: simpleEncoder.serializeLayerConfig(resolver.layerConfig()),\n        resolver,\n        cell: cells.GeomCell,\n        encoder: simpleEncoder,\n        newCacheMap,\n        detailFields: config.detail,\n        retinalConfig: {\n            color: config.color,\n            size: config.size,\n            shape: config.shape\n        }\n    };\n\n    const groupedModel = transformDataModel(datamodel, {\n        facetsAndProjections,\n        suppliedLayers: valueCellContext.suppliedLayers,\n        groupBy\n    }, resolver);\n    simpleEncoder.data(groupedModel);\n    // return a callback function to create the cells from the matrix\n    const cellCreator = resolver.valueCellsCreator(valueCellContext);\n    // Creates value matrices from the datamodel and configs\n    const valueMatrixInfo = getMatrixModel(groupedModel, facetsAndProjections, cellCreator, globalConfig);\n\n    removeExitCells(resolver);\n    resolver.cacheMaps().exitCellMap.clear();\n    resolver.valueMatrix(valueMatrixInfo.matrix);\n\n    const { xAxes, yAxes } = mutateAxesFromMap(resolver.cacheMaps(), resolver.axes());\n\n    resolver.axes({\n        x: xAxes,\n        y: yAxes\n    });\n\n    resolver.createUnits(componentRegistry, config);\n\n    const matrices = {\n        valuesMatrix: valueMatrixInfo,\n        axesMatrix: resolver.axes()\n    };\n    // Create all matrices\n    const {\n        rows,\n        columns,\n        selectionObj,\n        rowPriority,\n        colPriority\n    } = generateMatrices(matrixGnContext, matrices, cells, labelManager);\n\n    resolver.rowMatrix(rows);\n    resolver.columnMatrix(columns);\n\n    if (isFacet) {\n        const sanitizeCheckBorder = sanitizeCheck(globalConfig.facetsUserConfig);\n        const arr = sanitizeCheckBorder && sanitiseBorderMatrix({\n            leftMatrix: rows[0],\n            rightMatrix: rows[1],\n            topMatrix: columns[0],\n            bottomMatrix: columns[1]\n        }, registry.cells.BlankCell);\n        valueMatrixInfo.matrix = sanitizeCheckBorder && sanitiseGeomMatrix(valueMatrixInfo.matrix, arr);\n    }\n\n    placeholderInfo = {\n        rows: resolver.rowMatrix(),\n        columns: resolver.columnMatrix(),\n        values: resolver.valueMatrix(),\n        isColumnSizeEqual,\n        isRowSizeEqual,\n        priority: {\n            row: rowPriority,\n            col: colPriority\n        },\n        selection: selectionObj,\n        dataModels: {\n            groupedModel,\n            parentModel: datamodel\n        }\n    };\n    return placeholderInfo;\n};\n","export const RESOLVER_PROPS = {\n    dependencies: {},\n    units: {},\n    datamodelTransform: {},\n    layerConfig: {},\n    matrixLayers: {},\n    colCells: {},\n    rowCells: {},\n    rowMatrix: {},\n    columnMatrix: {},\n    valueMatrix: {},\n    encoder: {},\n    valueParser: {},\n    data: {},\n    transformedData: {},\n    store: {}\n};\n","import { generateGetterSetters, STATE_NAMESPACES, getUniqueId } from 'muze-utils';\nimport {\n     initializeCacheMaps,\n     headerCreator,\n     extractUnitConfig,\n     setFacetsAndProjections,\n     sanitizeCheck\n} from './group-utils';\nimport {\n     ROW, COL, LEFT, RIGHT, COLOR, SIZE, SHAPE, DETAIL, CELL, X_AXES, Y_AXES, ENTRY_CELLS, EXIT_CELLS, INITIALIZED,\n     AXIS, UNIT, BEFORE_UPDATE, UPDATED, VALUE_MATRIX, FACET_HEADERS\n} from '../enums/constants';\nimport { createValueCells, computeMatrices } from './cell-creator';\nimport { RESOLVER_PROPS } from './resolver-props';\n\n/**\n * Resolves the matrices from configuration provided\n *\n * @export\n * @class MatrixResolver\n */\nexport default class MatrixResolver {\n\n    /**\n     * Creates an instance of MatrixResolver.\n     * @param {Object} dependencies needed to run the resolver\n     * @memberof MatrixResolver\n     */\n    constructor (dependencies) {\n        this._registry = {};\n        this._layerConfig = [];\n        this._matrixLayers = [];\n        this._dependencies = dependencies;\n        this._rowMatrix = [];\n        this._columnMatrix = [];\n        this._valueMatrix = [];\n        this._facets = { rowFacets: [], colFacets: [] };\n        this._projections = { rowProjections: [], colProjections: [] };\n        this._datamodelTransform = {};\n        this._units = [];\n        this._cacheMaps = {};\n        this._fireboltDeps = {};\n        this._axes = {\n            x: {},\n            y: {},\n            color: [],\n            size: [],\n            shape: [],\n            radius: [],\n            angle: [],\n            angle0: []\n        };\n        this._placeholderInfo = {};\n        generateGetterSetters(this, this.constructor.getterSetters());\n\n        this.cacheMaps(initializeCacheMaps());\n    }\n\n    static getterSetters () {\n        return RESOLVER_PROPS;\n    }\n    /**\n     * Set:  Registers placeholders, Get: return {Object} those placeholders\n     *\n     * @param {Object} placeholders cells that will construct the group\n     * @return {Object} Either current instance or the set of placeholders\n     * @memberof MatrixResolver\n     */\n    registry (...placeholders) {\n        if (placeholders.length) {\n            Object.entries(placeholders[0]).forEach((val) => {\n                this._registry[val[0]] = val[1];\n            });\n            return this;\n        }\n        return this._registry;\n    }\n\n    /**\n     * Used to set the layer config from outside or get current layer info\n     *\n     * @param {Object} type configuration of layer provided externally\n     * @return {Object} either the layer or current instance\n     * @memberof MatrixResolver\n     */\n    cacheMaps (...maps) {\n        if (maps.length) {\n            [CELL, X_AXES, Y_AXES, ENTRY_CELLS, EXIT_CELLS].forEach((e) => {\n                this._cacheMaps[`${e}Map`] = maps[0][`${e}Map`] || this._cacheMaps[`${e}Map`];\n            });\n            return this;\n        }\n        return this._cacheMaps;\n    }\n\n    /**\n     * Used to set the layer config from outside or get current layer info\n     *\n     * @param {Object} type configuration of layer provided externally\n     * @return {Object} either the layer or current instance\n     * @memberof MatrixResolver\n     */\n    axes (...axes) {\n        if (axes.length) {\n            this._axes = Object.assign({}, this._axes, axes[0]);\n            return this;\n        }\n        return this._axes;\n    }\n\n    facets (...facets) {\n        if (facets.length) {\n            Object.entries(facets[0]).forEach((e) => {\n                this._facets[e[0]] = e[1];\n            });\n            return this;\n        }\n        return this._facets;\n    }\n\n    projections (...projections) {\n        if (projections.length) {\n            Object.entries(projections[0]).forEach((e) => {\n                this._projections[e[0]] = e[1];\n            });\n            return this;\n        }\n        return this._projections;\n    }\n\n    optionalProjections (config, layerConfig, schema) {\n        const otherEncodings = {};\n        const optionalProjections = [];\n        const otherEncodingTypes = [SIZE, COLOR, SHAPE];\n\n        otherEncodingTypes.forEach((type) => {\n            if (config[type] && config[type].field) {\n                const enc = config[type];\n                otherEncodings[type] = enc.field;\n                optionalProjections.push(enc.field);\n            }\n        });\n\n        if (config[DETAIL]) {\n            optionalProjections.push(...config.detail);\n        }\n\n        const encoder = this.encoder();\n        optionalProjections.push(...encoder.getProjectionFields(layerConfig, schema));\n        this.projections({ optionalProjections });\n        return otherEncodings;\n    }\n\n    /**\n     * return the normalized set of rows and facets and projections\n     *\n     * @param {Object} rows parameters needed to set horizontal axis consisiting of rows\n     * @return {Object} facets, projections and normalized rows\n     * @memberof MatrixResolver\n     */\n    horizontalAxis (rows, encoder) {\n        if (rows) {\n            this._horizontalAxis = setFacetsAndProjections(this, { type: ROW, fields: rows }, encoder);\n            return this;\n        }\n        return this._horizontalAxis;\n    }\n\n    /**\n     * return the normalized set of columns and facets and projections\n     *\n     * @param {Object} columns parameters needed to set vertical axis consisiting of columns\n     * @return {Object} facets, projections and normalized columns\n     * @memberof MatrixResolver\n     */\n    verticalAxis (columns, encoder) {\n        if (columns) {\n            this._verticalAxis = setFacetsAndProjections(this, { type: COL, fields: columns }, encoder);\n            return this;\n        }\n        return this._verticalAxis;\n    }\n\n    /**\n     * Gets the class definition of a particular cell type(if the particular type has been extended, that particular\n     * definition is returned)\n     *\n     * @param {Object} cell cell whose class definition is to be retrieved\n     * @return {Object} cell definition\n     * @memberof MatrixResolver\n     */\n    getCellDef (cell) {\n        const registry = this.registry().cells;\n\n        Object.values(registry).forEach((e) => {\n            if (e.prototype instanceof cell) {\n                cell = e;\n            }\n        });\n        return cell;\n    }\n\n    /**\n     * return a visual cell creator along with its axis information to be injected to the datamodel creation\n     * function\n     *\n     * @param {Object} GeomCell Type of cell to be created\n     * @return {Object} Created cell\n     * @memberof MatrixResolver\n     */\n    valueCellsCreator (context) {\n        // reset matrix layers\n        this.matrixLayers([]);\n\n        return (datamodel, fieldInfo, facets) => createValueCells(context, datamodel, fieldInfo, facets);\n    }\n\n    /**\n     * Callback to be applied on each cell of a matrix of a particular type\n     *\n     * @param {string} matrixType type of matrix on which callback is to be applied\n     * @param {Function} callback function to be applied to each cell\n     * @memberof MatrixResolver\n     */\n    forEach (matrixType, callback) {\n        this[matrixType]().forEach((row, rIndex) => {\n            row.forEach((col, cIndex) => {\n                callback(rIndex, cIndex, col);\n            });\n        });\n    }\n\n    getAllFields () {\n        const retObj = this.projections();\n\n        Object.entries(this.facets()).forEach((e) => {\n            retObj[e[0]] = e[1];\n        });\n        return retObj;\n    }\n\n    resetSimpleAxes () {\n        return this.axes({\n            x: new Set(),\n            y: new Set(),\n            radius: [],\n            angle: [],\n            angle0: [],\n            pie: []\n        });\n    }\n\n    setFireboltDependencies (prop, deps) {\n        Object.assign(this._fireboltDeps, {\n            [prop]: deps\n        });\n        return this;\n    }\n\n    /**\n     *\n     *\n     * @param {*} componentRegistry\n     * @param {*} config\n     * @memberof MatrixResolver\n     */\n    createUnits (componentRegistry, config) {\n        const {\n            globalConfig,\n            alias,\n            coord\n        } = config;\n        const {\n            layerRegistry,\n            interactions\n        } = componentRegistry;\n        const {\n            smartlabel: smartLabel,\n            lifeCycleManager,\n            throwback\n        } = this.dependencies();\n        const fireboltDeps = this._fireboltDeps;\n\n        // Provide the source for the matrix\n        const units = [[]];\n        // Setting unit configuration\n        const unitConfig = extractUnitConfig(globalConfig || {});\n        const store = this.store();\n        store.lockModel();\n        const { VisualUnit } = this.registry();\n\n        this.forEach(VALUE_MATRIX, (i, j, el) => {\n            let unit = el.source();\n            if (!unit) {\n                const namespace = `unit${i}-${j}-${getUniqueId()}`;\n\n                unit = VisualUnit.create({\n                    layerRegistry,\n                    interactions\n                }, {\n                    smartLabel,\n                    lifeCycleManager,\n                    throwback,\n                    fireboltDeps\n                });\n                unit.metaInf({\n                    rowIndex: i,\n                    colIndex: j,\n                    namespace\n                });\n                unit.store(store);\n                unit.coord(coord);\n                el.source(unit);\n            }\n            !units[i] && (units[i] = []);\n            units[i][j] = unit;\n            unit.parentAlias(alias)\n                .valueParser(this.valueParser())\n                .coord(coord);\n            el.config(unitConfig);\n        });\n        store.unlockModel();\n        lifeCycleManager.notify({ client: units, action: INITIALIZED, formalName: UNIT });\n        return this.units(units);\n    }\n\n    /**\n     *\n     *\n     * @param {*} config\n     * @memberof MatrixResolver\n     */\n    setRetinalAxisDomain (config, datamodel, encoders) {\n        const {\n            color,\n            shape,\n            size,\n            globalConfig\n        } = config;\n        const groupBy = globalConfig.autoGroupBy;\n        const {\n            rowFacets,\n            colFacets\n        } = this.getAllFields();\n        const encoding = {\n            color,\n            shape,\n            size\n        };\n        const facetFields = [...rowFacets.map(e => e.toString()), ...colFacets.map(e => e.toString())];\n        const retContext = {\n            domains: encoders.simpleEncoder.getRetinalFieldsDomain(datamodel, encoding, facetFields, groupBy),\n            axes: this.getRetinalAxes(),\n            encoding\n        };\n        encoders.retinalEncoder.setCommonDomain(retContext);\n        return this;\n    }\n\n    resetFacetsAndProjections () {\n        this._facets = {};\n        this._projections = {};\n        return this;\n    }\n\n    getRetinalAxes () {\n        const {\n            color,\n            shape,\n            size\n        } = this.axes();\n\n        return {\n            color: [...color],\n            shape: [...shape],\n            size: [...size]\n        };\n    }\n\n    getSimpleAxes (type) {\n        return this.axes()[`${type}`];\n    }\n\n    createRetinalAxes (fieldsConfig, config, encoders) {\n        const retinalAxes = encoders.retinalEncoder.createAxis({\n            fieldsConfig,\n            config,\n            axes: this.axes()\n        });\n\n        this.axes(retinalAxes);\n\n        this.updateVisualUnit(config);\n\n        return this;\n    }\n\n    createHeaders (placeholders, fieldNames, config) {\n        let bottomLeft = [];\n        let bottomRight = [];\n        const {\n            rows,\n            columns\n        } = placeholders;\n        const {\n            smartlabel: labelManager,\n            lifeCycleManager\n        } = this.dependencies();\n        const {\n            showHeaders,\n            classPrefix\n        } = config;\n        const { TextCell, BlankCell } = this.registry().cells;\n        const [leftRows, rightRows] = rows;\n        const [topCols, bottomCols] = columns;\n        const rowHeaders = fieldNames.rows;\n        const blankCellCreator = cell => new BlankCell().config({ show: cell.config().show });\n\n        const sanitizeCheckBorder = sanitizeCheck(config.facetsUserConfig);\n        // Headers and footers are created based on the rows. Thereafter, using the column information\n        // they are tabularized into the current structure\n        const headers = {\n            left: headerCreator(leftRows, rowHeaders[0], showHeaders ? TextCell : BlankCell,\n                { classPrefix, labelManager, sanitizeCheckBorder }),\n            right: headerCreator(rightRows, rowHeaders[1], showHeaders ? TextCell : BlankCell,\n                { classPrefix, labelManager, sanitizeCheckBorder })\n        };\n        const footers = {\n            left: leftRows.length > 0 ? leftRows[0].map(blankCellCreator) : [],\n            right: rightRows.length > 0 ? rightRows[0].map(blankCellCreator) : []\n        };\n        const [topLeft, topRight] = [LEFT, RIGHT].map(type => topCols.map((col, i) => {\n            if (i === topCols.length - 1) {\n                return headers[type];\n            }\n            return footers[type];\n        }));\n\n        // Creating only bottom matrices if there is no information on the top\n        if (topCols.length === 0) {\n            [bottomLeft, bottomRight] = [LEFT, RIGHT].map(type => bottomCols.map((col, i) => {\n                if (i === 0) {\n                    return headers[type];\n                }\n                return footers[type];\n            }));\n        } else {\n            bottomLeft = bottomCols.map(() => (leftRows.length > 0 ? leftRows[0].map(blankCellCreator) : []));\n            bottomRight = bottomCols.map(() => (rightRows.length > 0 ? rightRows[0].map(blankCellCreator) : []));\n        }\n\n        lifeCycleManager.notify({\n            client: [topLeft, topRight, bottomLeft, bottomRight],\n            action: INITIALIZED,\n            formalName: FACET_HEADERS\n        });\n\n        return { topLeft, topRight, bottomLeft, bottomRight };\n    }\n\n    updateVisualUnit (retinalConfig) {\n        const retinalAxes = this.getRetinalAxes();\n\n        const { lifeCycleManager } = this.dependencies();\n        lifeCycleManager.notify({ client: this.axes(), action: INITIALIZED, formalName: AXIS });\n        lifeCycleManager.notify({ client: this.units(), action: BEFORE_UPDATE, formalName: UNIT });\n\n        const units = [];\n        const matrixLayers = this.matrixLayers();\n\n        const props = [`${STATE_NAMESPACES.LAYER_GLOBAL_NAMESPACE}.domain`,\n            `${STATE_NAMESPACES.UNIT_GLOBAL_NAMESPACE}.domain`];\n        const store = this.store();\n        store.lockCommits(props);\n        store.lockModel();\n\n        this.forEach(VALUE_MATRIX, (i, j, el) => {\n            el.axes(Object.assign(el.axes(), retinalAxes));\n            el.source() && el.source().retinalFields(retinalConfig);\n            el.layerDef(matrixLayers[i][j]);\n            el.updateModel();\n\n            units.push(el.source());\n        });\n\n        store.unlockModel()\n            .unlockCommits([props[0]])\n            .unlockCommits([props[1]]);\n        lifeCycleManager.notify({ client: units, action: UPDATED, formalName: UNIT });\n        return this;\n    }\n\n    getMatrices (resolverConfig) {\n        this._placeholderInfo = computeMatrices(resolverConfig);\n\n        return this._placeholderInfo;\n    }\n\n    clear () {\n        const cacheMaps = this._cacheMaps;\n\n        for (const key in cacheMaps) {\n            cacheMaps[key].clear();\n        }\n    }\n\n}\n","import { MeasureSubtype, DimensionSubtype, FieldType } from 'muze-utils';\n\nimport { ScaleType } from '@chartshq/muze-axis';\n\n/**\n * Map of DataModel types to associated field types.\n */\nexport const dataTypeScaleMap = {\n    [FieldType.DIMENSION]: ScaleType.BAND,\n    [DimensionSubtype.CATEGORICAL]: ScaleType.BAND,\n    [DimensionSubtype.TEMPORAL]: ScaleType.TIME,\n    [FieldType.MEASURE]: ScaleType.LINEAR,\n    [MeasureSubtype.CONTINUOUS]: ScaleType.LINEAR,\n    [DimensionSubtype.BINNED]: ScaleType.BAND\n};\n","import { mergeRecursive, getObjProp } from 'muze-utils';\nimport { AxisOrientation } from '@chartshq/muze-axis';\nimport { ENCODING } from '@chartshq/visual-layer';\nimport { scaleMaps } from '../enums/scale-maps';\nimport { getAxisType, getAxisKey } from '../group-helper';\nimport { dataTypeScaleMap } from '../data-type-scale-map';\nimport { CATEGORICAL, TEMPORAL, BAR, LINE, POINT, BOTH, Y, COLOR, SHAPE, SIZE, ANGLE0 } from '../enums/constants';\n\n/**\n *\n *\n * @param {*} axisInfo\n * @param {*} field\n * @param {*} axesCreators\n *\n */\nconst getAxisConfig = (axisInfo, field, axesCreators, indices, facetFields) => {\n    let axisOrientation;\n    const { index, axisIndex, axisType } = axisInfo;\n    const { config, position } = axesCreators;\n    const { rowIndex, columnIndex } = indices;\n    const rawUserAxisConfig = config.axes ? (config.axes[axisType] || {}) : {};\n\n    // Change config object to a function if not already one\n    const userAxisConfigFn = typeof rawUserAxisConfig !== 'function' ?\n    () => rawUserAxisConfig : rawUserAxisConfig;\n    const userAxisConfig = userAxisConfigFn(rowIndex, columnIndex, {\n        axisFields: field.getMembers(),\n        facetFields\n    });\n\n    // If current config does not specifes config for an axis, retain old config\n    if (!userAxisConfig) {\n        return {};\n    }\n\n    const {\n        LEFT,\n        RIGHT,\n        TOP,\n        BOTTOM\n    } = AxisOrientation;\n    const allOrientations = axisType === Y ? [LEFT, RIGHT] : [TOP, BOTTOM];\n\n    if (position === BOTH) {\n        axisOrientation = allOrientations[axisIndex];\n    } else {\n        axisOrientation = position;\n    }\n    const axisConfig = {\n        id: `${axisType}-${index}-${axisIndex}`,\n        name: field.displayName(),\n        field: field.toString(),\n        numberFormat: field.numberFormat(),\n        orientation: axisOrientation,\n        showAxisName: true,\n        show: true,\n        type: dataTypeScaleMap[field.subtype()]\n    };\n    userAxisConfig.tickValues = field.format(userAxisConfig.tickValues);\n    userAxisConfig.domain = field.format(userAxisConfig.domain);\n\n    return mergeRecursive(axisConfig, userAxisConfig);\n};\n\n/**\n *\n *\n * @param {*} axisInfo\n * @param {*} field\n * @param {*} axesCreators\n *\n */\nconst createSimpleAxis = (axisConfig, field, axesCreators) => {\n    const { labelManager } = axesCreators;\n    const Cls = scaleMaps[dataTypeScaleMap[field.subtype()]];\n    const simpleAxis = new Cls(axisConfig, { labelManager });\n    return simpleAxis;\n};\n\nexport const getAdjustedDomain = (max, min) => {\n    const y1ratio = max[0] / (max[0] - min[0]);\n    const y2ratio = max[1] / (max[1] - min[1]);\n\n    // adjust min/max values for positive negative values zero line etc\n    let allSameSign = false;\n\n    // if all numbers are positive set floor to zero\n    if (min[0] > 0 && min[1] > 0 && min[1] > 0 && max[1] > 0) {\n        allSameSign = true;\n        min[0] = 0;\n        min[1] = 0;\n    }\n\n    // if all numbers are negative set ceiling to zero\n    if (min[0] < 0 && min[1] < 0 && min[1] < 0 && max[1] < 0) {\n        allSameSign = true;\n        max[0] = 0;\n        max[1] = 0;\n    }\n\n    // align zero line if necessary\n    if (!allSameSign && y1ratio !== y2ratio) {\n        if (y1ratio < y2ratio) {\n                    // adjust min[1]\n            min[1] = min[0] / max[0] * max[1];\n        } else {\n                    // adjust min[0]\n            min[0] = min[1] / max[1] * max[0];\n        }\n    }\n    return [\n        [min[0], max[0]],\n        [min[1], max[1]]\n    ];\n};\n\n/**\n *\n *\n * @param {*} axisType\n * @param {*} fieldInfo\n * @param {*} axesCreators\n * @param {*} groupAxes\n *\n */\nexport const generateAxisFromMap = (axisType, fieldInfo, axesCreators, axesInfo, indices, facetFields) => {\n    let axisKey;\n    const { groupAxes, valueParser } = axesInfo;\n    const currentAxes = [];\n    const { fields, index } = fieldInfo;\n    const { cacheMaps } = axesCreators;\n    const map = cacheMaps[`${axisType}AxesMap`];\n\n    const commonAxisKey = getAxisKey(axisType, index);\n    fields.forEach((field, axisIndex) => {\n        axisKey = getAxisKey(axisType, index, axisIndex, dataTypeScaleMap[field.subtype()]);\n        const axisConfig = getAxisConfig({ index, axisIndex, axisType }, field, axesCreators, indices, facetFields);\n\n        let axis;\n        if (!map.has(axisKey)) {\n            axis = createSimpleAxis(axisConfig, field, axesCreators);\n        } else {\n            axis = map.get(axisKey);\n            axis._rotationLock = false;\n            axis.config(axisConfig);\n        }\n        axis.valueParser(valueParser);\n        currentAxes.push(axis);\n        map.set(axisKey, axis);\n    });\n\n    if (currentAxes.length) {\n        map.set(commonAxisKey, currentAxes);\n        groupAxes.add(commonAxisKey);\n    }\n\n    return currentAxes;\n};\n\nexport const sanitizeIndividualLayerConfig = (encodingConfigs, def) => {\n    [COLOR, SHAPE, SIZE].forEach((axis) => {\n        if (encodingConfigs[axis] && encodingConfigs[axis].field) {\n            def.forEach((conf) => {\n                conf.encoding = conf.encoding || {};\n                !conf.encoding[axis] && (conf.encoding[axis] = {});\n                conf.encoding[axis].field = encodingConfigs[axis].field;\n            });\n        }\n    });\n};\n\n/**\n *\n *\n * @memberof MatrixResolver\n */\nexport const mutateAxesFromMap = (cacheMaps, axes) => {\n    const {\n        xAxesMap,\n        yAxesMap\n    } = cacheMaps;\n    const {\n        x: xAxisSet,\n        y: yAxisSet\n    } = axes;\n    const xAxes = [];\n    const yAxes = [];\n\n    xAxisSet.forEach((axisId) => {\n        const xAxis = xAxesMap.get(axisId);\n        xAxes.push(xAxis);\n    });\n    yAxisSet.forEach((axisId) => {\n        const yAxis = yAxesMap.get(axisId);\n        yAxes.push(yAxis);\n    });\n    return {\n        xAxes, yAxes\n    };\n};\n\n/**\n * return a default mark based on predefined set of rules of type and subtype of the fields\n *\n * @param {string} colFieldType dimension/measure - temporal/ordinal/nominal\n * @param {string} rowFieldType dimension/measure - temporal/ordinal/nominal\n * @return {Object} return mark type\n */\nexport const getDefaultMark = (colFieldType, rowFieldType) => {\n    let mark;\n\n    if (colFieldType === CATEGORICAL || rowFieldType === CATEGORICAL) {\n        mark = BAR;\n    } else if (colFieldType === TEMPORAL || rowFieldType === TEMPORAL) {\n        mark = LINE;\n    } else {\n        mark = POINT;\n    }\n\n    return mark;\n};\n\n/**\n *\n *\n * @param {*} axesCreators\n * @param {*} [fieldInfo=[]]\n *\n */\nexport const createRetinalAxis = (axesCreators, fieldProps = {}) => {\n    const { axisType, fieldsConfig } = axesCreators;\n    const field = fieldProps.field;\n    const axis = [];\n    const Cls = scaleMaps[axisType];\n\n    fieldProps.type = fieldProps.type ? fieldProps.type : getAxisType(fieldsConfig, field || null);\n    axis.push(new Cls(fieldProps));\n    return axis;\n};\n\n/**\n *\n *\n * @param {*} arr\n * @param {*} val\n *\n */\nexport const getIndex = (arr, val) => {\n    let i = 0;\n    let arrIndex = -1;\n\n    while (arrIndex === -1 && i < arr.length) {\n        if (arr[i].toString() === val.toString()) {\n            arrIndex = i;\n        }\n        i++;\n    }\n    return arrIndex;\n};\n\n/**\n *\n *\n * @param {*} colFields\n * @param {*} rowFields\n * @param {*} userLayerConfig\n *\n * @memberof CartesianEncoder\n */\nexport const getLayerConfFromFields = (colFields, rowFields, userLayerConfig) => userLayerConfig.filter((conf) => {\n    const userConf = conf instanceof Array ? conf : [conf];\n    const encodingArr = [].concat(...userConf.map(d => d.encoding).filter(d => d !== undefined));\n\n    if (!encodingArr.length) {\n        return true;\n    }\n\n    const xFields = [].concat(...encodingArr.map(d => [d.x && d.x.field, d.x0 && d.x0.field]))\n                .filter(d => d !== undefined && d !== null);\n    const yFields = [].concat(...encodingArr.map(d => [d.y && d.y.field, d.y0 && d.y0.field]))\n                .filter(d => d !== undefined && d !== null);\n\n    if (!xFields.length && !yFields.length) {\n        return true;\n    }\n\n    const colFieldExist = xFields.length ? xFields.every(d => colFields.indexOf(d) !== -1) : false;\n    const rowFieldExist = yFields.length ? yFields.every(d => rowFields.indexOf(d) !== -1) : false;\n    if (xFields.length && yFields.length) {\n        return colFieldExist && rowFieldExist;\n    }\n    return colFieldExist || rowFieldExist;\n});\n\nexport const resolveAxisConfig = (context, fieldInf, axisInfo) => {\n    const { rowIndex, columnIndex, axesObj } = axisInfo;\n    const { config, facetFields, resolver } = context;\n    const resolverAxes = resolver.axes();\n    const { RADIUS, ANGLE } = ENCODING;\n    [RADIUS, ANGLE, ANGLE0].forEach((enc) => {\n        const axesArr = resolverAxes[enc];\n        if (!axesArr[rowIndex]) {\n            axesArr[rowIndex] = [];\n        }\n        axesArr[rowIndex][columnIndex] = axesObj[enc];\n        const axisConfig = getObjProp(config.axes, enc) || {};\n\n        axesObj[enc].forEach((axis, i) => {\n            let userConfig = axisConfig;\n            if (axisConfig instanceof Function) {\n                userConfig = axisConfig(rowIndex, columnIndex, {\n                    axisFields: [fieldInf[enc][i]],\n                    facetFields\n                });\n            }\n            axis.config(userConfig);\n        });\n    });\n};\n\nexport const getSortingConfig = (context, currentFieldName, axesConfig) => {\n    const config = context.config();\n    const dataModel = context.data();\n\n    let lastSortConfig = null;\n    if (Object.keys(config.sort).length !== 0) {\n        return config.sort[currentFieldName];\n    }\n\n    const operations = [...dataModel.getAncestorDerivations(), ...dataModel.getDerivations()];\n\n    while (lastSortConfig = operations.pop()) {\n        if (lastSortConfig.op === 'sort') break;\n    }\n    if (lastSortConfig &&\n        lastSortConfig.criteria.length &&\n        lastSortConfig.criteria[0][0] === currentFieldName) {\n        return lastSortConfig.criteria[0][1];\n    }\n    return axesConfig().defaultSort;\n};\n","import { layerFactory } from '@chartshq/visual-layer';\nimport {\n    mergeRecursive,\n    STATE_NAMESPACES,\n    unionDomain,\n    COORD_TYPES,\n    toArray,\n    sortCategoricalField\n} from 'muze-utils';\nimport { ScaleType } from '@chartshq/muze-axis';\nimport {\n    generateAxisFromMap,\n    getDefaultMark,\n    getIndex,\n    getLayerConfFromFields,\n    getAdjustedDomain,\n    sanitizeIndividualLayerConfig,\n    getSortingConfig\n} from './encoder-helper';\nimport { retriveDomainFromData } from '../group-helper';\n\nimport { ROW, COLUMN, COL, LEFT, TOP, MEASURE, BOTH, X, Y, TEMPORAL } from '../enums/constants';\nimport VisualEncoder from './visual-encoder';\n\nconst CARTESIAN = COORD_TYPES.CARTESIAN;\n\n/**\n *\n *\n * @export\n * @class CartesianEncoder\n * @extends {VisualEncoder}\n */\nexport default class CartesianEncoder extends VisualEncoder {\n\n    /**\n     *\n     *\n     *\n     * @memberof CartesianEncoder\n     */\n    static type () {\n        return CARTESIAN;\n    }\n\n    /**\n     *\n     *\n     * @param {*} axesCreators\n     * @param {*} fieldInfo\n     *\n     * @memberof CartesianEncoder\n     */\n    createAxis (axesCreators, fieldInfo, context) {\n        const geomCellAxes = {};\n        const {\n            axes\n        } = axesCreators;\n        const {\n            projections,\n            indices\n        } = fieldInfo;\n        const {\n            rowFields,\n            columnFields\n        } = projections;\n        const {\n             rowIndex,\n             columnIndex\n        } = indices;\n        const axisFields = [{\n            fields: rowFields,\n            index: rowIndex\n        }, {\n            fields: columnFields,\n            index: columnIndex\n        }];\n        const { resolver, facetFields, geomCell } = context;\n        const xAxes = axes.x || [];\n        const yAxes = axes.y || [];\n\n        [rowFields, columnFields].forEach((fields, i) => {\n            const type = i === 0 ? ROW : COLUMN;\n            const axis = i === 0 ? Y : X;\n\n            if (fields.length > 1) {\n                axesCreators.position = BOTH;\n            } else {\n                axesCreators.position = this.axisFrom()[type];\n            }\n            geomCellAxes[axis] = generateAxisFromMap(axis, axisFields[i], axesCreators, {\n                groupAxes: axis === X ? xAxes : yAxes,\n                valueParser: resolver.valueParser()\n            }, indices, facetFields);\n        });\n        geomCell.axes(geomCellAxes);\n        return geomCellAxes;\n    }\n\n    unionUnitDomains (context) {\n        const store = context.store();\n        const resolver = context.resolver();\n        const units = resolver.units();\n        const domains = {\n            0: {},\n            1: {}\n        };\n        const fieldsObj = {\n            0: {},\n            1: {}\n        };\n\n        for (let rIdx = 0, len = units.length; rIdx < len; rIdx++) {\n            const unitsArr = units[rIdx];\n            for (let cIdx = 0, len2 = unitsArr.length; cIdx < len2; cIdx++) {\n                const unit = unitsArr[cIdx];\n                const axisFields = unit.fields();\n                const encodingDomains = unit.dataDomain();\n                ['x', 'y'].forEach((axisType, axisTypeIndex) => {\n                    const fieldArr = axisFields[axisType];\n                    fieldArr.forEach((field, axisIndex) => {\n                        const key = !axisTypeIndex ? `0${cIdx}${axisIndex}` : `${rIdx}0${axisIndex}`;\n                        const dom = encodingDomains[axisType];\n                        const typeOfField = field.subtype();\n                        fieldsObj[axisTypeIndex][key] = field;\n\n                        if (dom && Object.keys(dom).length !== 0) {\n                            domains[axisTypeIndex][key] = unionDomain([(domains[axisTypeIndex] &&\n                                domains[axisTypeIndex][key]) || [], dom[`${field}`]], typeOfField);\n                        }\n                    });\n                });\n            }\n        }\n\n        const { x: xAxes, y: yAxes } = resolver.axes();\n        store.lockModel();\n        [xAxes, yAxes].forEach((axesArr, axisType) => {\n            axesArr.forEach((axes, idx) => {\n                let key;\n                let domain = [];\n                let adjustedDomain = [];\n                const min = [];\n                const max = [];\n                const typeOfAxis = axes[0].constructor.type();\n\n                if (axes.length > 1 && typeOfAxis === ScaleType.LINEAR && axes[0].config().alignZeroLine) {\n                    axes.forEach((axis, i) => {\n                        key = !axisType ? `0${idx}${i}` : `${idx}0${i}`;\n                        domain = domains[axisType][key];\n                        min[i] = domain[0];\n                        max[i] = domain[1];\n                    });\n                    adjustedDomain = getAdjustedDomain(max, min);\n                } else if (typeOfAxis === ScaleType.BAND) {\n                    /* Sort categorical fields to ensure consistency across all rows\n                    only if sorted by user */\n                    key = !axisType ? `0${idx}0` : `${idx}00`;\n                    const currentFieldName = fieldsObj[axisType][key].oneVar();\n                    const sortingOrder = getSortingConfig(context, currentFieldName, axes[0].config);\n                    if (sortingOrder && domains[axisType][key] instanceof Array) {\n                        domains[axisType][key].sort((a, b) => sortCategoricalField(sortingOrder, a, b));\n                    }\n                }\n\n                axes.forEach((axis, index) => {\n                    key = !axisType ? `0${idx}${index}` : `${idx}0${index}`;\n                    domain = adjustedDomain[index] || domains[axisType][key];\n\n                    domain && axis.domain(domain);\n                    const type = !axisType ? 'x' : 'y';\n                    store.commit(`${STATE_NAMESPACES.GROUP_GLOBAL_NAMESPACE}.domain.${type}`, domain, `${idx}${index}`);\n                });\n            });\n        });\n        store.unlockModel();\n    }\n\n    /**\n     *\n     *\n     * @param {*} fields\n     *\n     * @memberof CartesianEncoder\n     */\n    getFacetsAndProjections (fields, type) {\n        let facets = [];\n        let projections = [];\n        let counter = 0;\n        const primaryFacets = [];\n        const secondaryFacets = [];\n        const primaryFields = fields[0];\n        const secondaryFields = fields[1];\n        const primaryLen = primaryFields.length;\n        const secondaryLen = secondaryFields.length;\n        const axisFrom = this.axisFrom();\n\n        for (let i = 0; i < primaryLen; i++) {\n            let projArr = [primaryFields[i]];\n            const primaryField = primaryFields[i];\n\n            if (primaryField.type() === MEASURE) {\n                const secondaryField = secondaryFields[counter];\n                if (secondaryField && secondaryField.type() === MEASURE) {\n                    counter++;\n                    projArr = [primaryField, secondaryField];\n                }\n                projections.push(projArr);\n            } else {\n                facets.push(primaryField);\n                primaryFacets.push(primaryField);\n            }\n        }\n        if (secondaryLen > counter) {\n            for (let i = counter; i < secondaryLen; i++) {\n                const secondaryField = secondaryFields[i];\n                const projArr = [secondaryField];\n                if (secondaryField.type() === MEASURE) {\n                    projections.push(projArr);\n                } else {\n                    facets.push(secondaryField);\n                    secondaryFacets.push(secondaryField);\n                }\n            }\n        }\n        if ((primaryFacets.length || secondaryFacets.length) && !projections.length) {\n            type = type === COL ? COLUMN : type;\n            if ((axisFrom[type] === LEFT || axisFrom[type] === TOP) && primaryFacets.length) {\n                const axisFromIndex = primaryFacets.length - 1;\n                const facet = primaryFacets[axisFromIndex];\n                projections = [[facet]];\n                const existIndex = getIndex(secondaryFacets, facet);\n                if (existIndex > -1) {\n                    projections = [[facet, facet]];\n                    secondaryFacets.splice(existIndex, 1);\n                }\n                primaryFacets.splice(axisFromIndex, 1);\n            } else {\n                const axisFromIndex = 0;\n                const facet = secondaryFacets[axisFromIndex];\n                projections = [[facet]];\n                const existIndex = getIndex(primaryFacets, facet);\n                if (existIndex > -1) {\n                    projections = [[facet, facet]];\n                    primaryFacets.splice(existIndex, 1);\n                }\n                secondaryFacets.splice(axisFromIndex, 1);\n            }\n        }\n\n        facets = [...primaryFacets, ...secondaryFacets];\n        facets = facets.filter((el, index, self) => index === self.findIndex(t => (t.toString() === el.toString())));\n        return {\n            facets,\n            projections\n        };\n    }\n\n    /**\n     *\n     *\n     * @param {*} datamodel\n     * @param {*} config\n     *\n     * @memberof CartesianEncoder\n     */\n    fieldSanitizer (datamodel, config) {\n        return super.fieldSanitizer(datamodel, config);\n    }\n\n    /**\n     *\n     *\n     * @param {*} datamodel\n     *\n     * @memberof CartesianEncoder\n     */\n    getRetinalFieldsDomain (dataModels, encoding) {\n        const groupedModel = dataModels.groupedModel;\n        const domains = {};\n        for (const key in encoding) {\n            if ({}.hasOwnProperty.call(encoding, key)) {\n                const encodingObj = encoding[key];\n                const field = encodingObj.field;\n                if (!encodingObj.domain && field) {\n                    let domain = retriveDomainFromData(groupedModel, field);\n                    const fieldInstance = groupedModel.getFieldspace().fieldsObj()[field];\n                    const isTemporalField = fieldInstance.schema().subtype === TEMPORAL;\n\n                    if (isTemporalField) {\n                        domain = fieldInstance.data();\n                    }\n\n                    domains[field] = domain;\n                }\n            }\n        }\n        return domains;\n    }\n\n    /**\n     *\n     *\n     * @param {*} layerArray\n     * @memberof CartesianEncoder\n     */\n    serializeLayerConfig (layerArray) {\n        const serializedLayers = [];\n        // let currentLayerIndex = 0;\n        layerArray.length && layerArray.forEach((layer, i) => {\n            const def = layerFactory.sanitizeLayerConfig(layer);\n            def.order = i;\n            serializedLayers.push(def);\n        });\n        return serializedLayers;\n    }\n\n    sanitizeLayerConfig (encodingConfigs, userLayerConfig) {\n        const layerConfig = [];\n        userLayerConfig.forEach((config) => {\n            const def = toArray(config.def);\n            sanitizeIndividualLayerConfig(encodingConfigs, def);\n            layerConfig.push(config);\n        });\n        return layerConfig;\n    }\n\n    /**\n     *\n     *\n     * @param {*} fields\n     * @param {*} userLayerConfig\n     *\n     * @memberof CartesianEncoder\n     */\n    getLayerConfig (fields, userLayerConfig, retinalConfig) {\n        const layerConfig = [];\n        const {\n            columnFields,\n            rowFields\n        } = fields;\n\n        // let currentLayerIndex = 0;\n        columnFields.forEach((colField) => {\n            const colFieldName = colField.toString();\n            rowFields.forEach((rowField) => {\n                let configs = [];\n                const rowFieldName = rowField.toString();\n                const encoding = {\n                    x: {\n                        field: colFieldName\n                    },\n                    y: {\n                        field: rowFieldName\n                    }\n                };\n                const rowFieldType = rowField.subtype();\n                const colFieldType = colField.subtype();\n                const mark = getDefaultMark(colFieldType, rowFieldType);\n\n                const defConfigs = [{\n                    mark,\n                    def: {\n                        mark,\n                        encoding\n                    }\n                }];\n\n                const layerConfigs = getLayerConfFromFields(colField.getMembers(),\n                    rowField.getMembers(), userLayerConfig || []);\n                if (layerConfigs.length) {\n                    configs = layerConfigs.map((layerConf) => {\n                        const mergedLayerConf = mergeRecursive(mergeRecursive({}, defConfigs[0].def), layerConf);\n                        const serializedLayerConfig = layerFactory.getSerializedConf(mergedLayerConf.mark,\n                            mergedLayerConf);\n                        return {\n                            mark: mergedLayerConf.mark,\n                            order: mergedLayerConf.order,\n                            def: serializedLayerConfig\n                        };\n                    });\n                } else {\n                    configs = defConfigs;\n                }\n\n                layerConfig.push(...configs);\n            });\n        });\n        return this.sanitizeLayerConfig(retinalConfig, layerConfig);\n    }\n\n    hasMandatoryFields (fields) {\n        const { colProjections, rowProjections } = fields;\n        const colFields = super.hasMandatoryFields({ colProjections });\n        const rowFields = super.hasMandatoryFields({ rowProjections });\n        return colFields && rowFields;\n    }\n}\n","import { AngleAxis, RadiusAxis } from '@chartshq/muze-axis';\nimport { layerFactory, ENCODING } from '@chartshq/visual-layer';\nimport {\n    mergeRecursive,\n    STATE_NAMESPACES,\n    GROUP_BY_FUNCTIONS,\n    COORD_TYPES,\n    toArray,\n    getObjProp,\n    defaultValue\n} from 'muze-utils';\nimport VisualEncoder from './visual-encoder';\nimport { SIZE, MEASURE, ARC, COLOR } from '../enums/constants';\nimport { sanitizeIndividualLayerConfig, resolveAxisConfig } from './encoder-helper';\nimport { SimpleVariable } from '../variable';\n\nconst POLAR = COORD_TYPES.POLAR;\nconst { RADIUS, ANGLE, ANGLE0 } = ENCODING;\n\nconst axesCls = {\n    [RADIUS]: RadiusAxis,\n    [ANGLE]: AngleAxis,\n    [ANGLE0]: AngleAxis\n};\n\nconst getSizeMultiplier = (sizeVal, sizeAxis) => {\n    const sizeAxisDomain = sizeAxis.domain();\n    const sizeMultiplier = sizeAxis.getSize(sizeVal) / (sizeAxisDomain ? sizeAxis.range()[1] : sizeAxis.config().value);\n    return sizeMultiplier;\n};\n\nconst setRadiusFactor = (context) => {\n    const data = context.data();\n    const sizeField = context.retinalFields().size.field;\n    const { radius, size } = context.axes();\n\n    if (sizeField && radius && radius.length) {\n        const sizeFieldIndex = data.getFieldsConfig()[sizeField].index;\n        const sizeVal = data.getData().data.reduce((acc, val) => acc + val[sizeFieldIndex], 1);\n        const sizeMultiplier = getSizeMultiplier(sizeVal, size[0]);\n        radius.forEach(axis => axis.setRadiusFactor(sizeMultiplier));\n    }\n};\n\n/**\n *\n *\n * @export\n * @class PolarEncoder\n * @extends {VisualEncoder}\n */\nexport default class PolarEncoder extends VisualEncoder {\n\n    /**\n     *\n     *\n     * @param {*} axesCreators\n     * @param {*} fieldInfo\n     *\n     * @memberof PolarEncoder\n     */\n    createAxis (axesCreators, fieldInfo, context) {\n        const {\n            axes\n        } = axesCreators;\n        const geomCellAxes = axes;\n        const {\n            indices\n        } = fieldInfo;\n        const {\n            rowIndex,\n            columnIndex\n        } = indices;\n        // Dummy axes for polar, to create blank cells\n        const pieAxes = geomCellAxes.pie || [];\n\n        pieAxes[rowIndex] = pieAxes[rowIndex] || [];\n        pieAxes[rowIndex][columnIndex] = [];\n\n        const axesObj = {};\n        const { geomCell, resolver } = context;\n        const layers = resolver.matrixLayers();\n        const resolverAxes = resolver.axes();\n        const cellLayers = layers[rowIndex][columnIndex];\n        const fields = {\n            radius: {},\n            angle: {},\n            angle0: {}\n        };\n\n        cellLayers.forEach((layerConf) => {\n            const def = layerConf.def;\n            [ANGLE, ANGLE0, RADIUS].forEach((enc) => {\n                const field = getObjProp(def.encoding, enc, 'field');\n                field && (fields[enc][field] = 0);\n            });\n        });\n        const fieldInf = {};\n        const varInstances = {};\n\n        for (const encType in fields) {\n            fieldInf[encType] = Object.keys(fields[encType]);\n            axesObj[encType] = [];\n            varInstances[encType] = [];\n            fieldInf[encType].forEach((field, i) => {\n                varInstances[encType][i] = new SimpleVariable(field);\n                axesObj[encType][i] = new axesCls[encType]();\n            });\n            axesObj[encType][axesObj[encType].length] = new axesCls[encType]();\n        }\n        resolveAxisConfig(context, fieldInf, {\n            axesObj,\n            rowIndex,\n            columnIndex\n        });\n        geomCell.axes(axesObj)\n            .fields(Object.assign({}, varInstances, geomCell.fields()));\n        resolverAxes.pie = pieAxes;\n        return geomCellAxes;\n    }\n\n    /**\n     *\n     *\n     * @param {*} fields\n     *\n     * @memberof CartesianEncoder\n     */\n    getFacetsAndProjections (fields) {\n        let counter = 0;\n        const facets = [];\n        const projections = [];\n        const primaryFields = fields[0];\n        const secondaryFields = fields[1];\n        const primaryLen = primaryFields.length;\n        const secondaryLen = secondaryFields.length;\n\n        for (let i = 0; i < primaryLen; i++) {\n            const primaryField = primaryFields[i];\n            if (primaryField.type() === MEASURE) {\n                const secondaryField = secondaryFields[counter++];\n                const projArr = secondaryField ? [primaryField, secondaryField] : [primaryField];\n                projections.push(projArr);\n            } else {\n                facets.push(primaryField);\n            }\n        }\n        if (secondaryLen > counter) {\n            for (let i = counter; i < secondaryLen; i++) {\n                const secondaryField = secondaryFields[i];\n                const projArr = [secondaryField];\n                if (secondaryField.type() === MEASURE) {\n                    projections.push(projArr);\n                } else {\n                    facets.push(secondaryField);\n                }\n            }\n        }\n        return {\n            facets,\n            projections\n        };\n    }\n\n    unionUnitDomains (context) {\n        const store = context.store();\n        store.lockModel();\n        const domainProps = {\n            radius: [],\n            angle: [],\n            angle0: []\n        };\n        const axes = context.resolver().axes();\n        context.matrixInstance().value.each((cell, rIdx, cIdx) => {\n            const unit = cell.valueOf();\n            const unitDomains = unit.dataDomain();\n            const fields = unit.fields();\n            setRadiusFactor(unit);\n            [RADIUS, ANGLE, ANGLE0].forEach((encType) => {\n                const encodingFields = fields[encType];\n                const domains = unitDomains[encType] || {};\n                encodingFields.forEach((field, i) => {\n                    !domainProps[encType][rIdx] && (domainProps[encType][rIdx] = []);\n                    !domainProps[encType][rIdx][cIdx] && (domainProps[encType][rIdx][cIdx] = []);\n                    domainProps[encType][rIdx][cIdx][i] = domains[`${field}`] || [];\n                });\n            });\n        });\n\n        for (const key in domainProps) {\n            const specificAxes = axes[key];\n            specificAxes.forEach((axesArr, rIdx) => {\n                axesArr.forEach((axisArr, cIdx) => {\n                    axisArr.forEach((axis, i) => {\n                        axis.domain(defaultValue(getObjProp(domainProps[key], rIdx, cIdx, i), []));\n\n                        store.commit(`${STATE_NAMESPACES.GROUP_GLOBAL_NAMESPACE}.domain.${key}`, domainProps[key],\n                            `${rIdx}-${cIdx}`);\n                    });\n                });\n            });\n        }\n        store.unlockModel();\n    }\n\n    /**\n     *\n     *\n     *\n     * @memberof PolarEncoder\n     */\n    setCommonDomain () {\n        // No domain to be set\n        return this;\n    }\n\n    /**\n     *\n     *\n     *\n     * @memberof PolarEncoder\n     */\n    static type () {\n        return POLAR;\n    }\n\n    layers (...layers) {\n        if (layers.length) {\n            this._layers = layers[0];\n            return this;\n        }\n        return this._layers;\n    }\n\n    /**\n     *\n     *\n     * @param {*} datamodel\n     * @param {*} config\n     * @memberof PolarEncoder\n     */\n    fieldSanitizer (datamodel, config) {\n        let sanitizedRows = [[], []];\n        let sanitizedColumns = [[], []];\n        const fields = super.fieldSanitizer(datamodel, config);\n        const {\n            layers\n        } = config;\n        const {\n            rows,\n            columns\n        } = fields;\n        const layer = layers[0];\n        const encoding = layer.encoding;\n        const radius = encoding && encoding.radius ? encoding.radius.field : null;\n        const angle = encoding && encoding.angle ? encoding.angle.field : null;\n        const sanitizedFields = [sanitizedRows, sanitizedColumns];\n\n        [rows, columns].forEach((fieldType, typeIndex) => {\n            fieldType.forEach((fieldSet, i) => fieldSet.forEach((field) => {\n                if (field.toString() !== radius && field.toString() !== angle && field.type() !== MEASURE) {\n                    sanitizedFields[typeIndex][i].push(field);\n                }\n            }));\n        });\n        sanitizedColumns = [...new Set(sanitizedColumns)];\n        sanitizedRows = [...new Set(sanitizedRows)];\n        this.fieldInfo({ rows: sanitizedRows, columns: sanitizedColumns });\n        return this.fieldInfo();\n    }\n\n    getRetinalFieldsDomain (dataModels, encoding, facetFields, groupBy) {\n        let sizeField;\n        let colorField;\n        const fields = [];\n        const layers = this.layers();\n        const dataModel = dataModels.groupedModel;\n        const fieldsConfig = dataModel.getFieldsConfig();\n        const domains = {};\n        if (layers && layers[0]) {\n            const layer = layers[0];\n            const layerEncoding = layer.def.encoding || {};\n\n            [RADIUS, ANGLE, SIZE, COLOR].forEach((encType) => {\n                const field = layerEncoding[encType] ? layerEncoding[encType].field : '';\n                const measureField = fieldsConfig[field] && fieldsConfig[field].def.type === MEASURE;\n                if (encType === SIZE && measureField) {\n                    sizeField = field;\n                }\n                if (encType === COLOR) {\n                    colorField = field;\n                }\n                fieldsConfig[field] && !measureField && fields.push(field);\n            });\n        }\n\n        if (sizeField) {\n            domains[sizeField] = dataModel.groupBy(facetFields, {\n                [sizeField]: GROUP_BY_FUNCTIONS.SUM\n            }).getFieldspace().fieldsObj()[sizeField].domain();\n        }\n\n        if (colorField) {\n            const dm = dataModel.groupBy([...facetFields, ...fields], groupBy.measures);\n            domains[colorField] = dm.getFieldspace().fieldsObj()[colorField].domain();\n        }\n        return domains;\n    }\n\n    /**\n     *\n     *\n     * @param {*} fields\n     * @param {*} userLayerConfig\n     *\n     * @memberof PolarEncoder\n     */\n    getLayerConfig (fields, userLayerConfig, retinalConfig) {\n        let layerConfig = [];\n        const {\n                columnFields,\n                rowFields\n            } = fields;\n        const allFields = [...columnFields, ...rowFields];\n\n        allFields.forEach(() => {\n            const encoding = {};\n            let config = {\n                mark: ARC,\n                def: {\n                    encoding\n                }\n            };\n            if (userLayerConfig && userLayerConfig.length > 0) {\n                config = mergeRecursive(config, userLayerConfig[0]);\n            }\n            layerConfig.push(config);\n        });\n        if (layerConfig.length === 0) {\n            layerConfig = userLayerConfig;\n        }\n        const sanitizedConfig = this.sanitizeLayerConfig(retinalConfig, layerConfig);\n        this.layers(sanitizedConfig);\n        return sanitizedConfig;\n    }\n\n    /**\n     *\n     *\n     * @param {*} layerArray\n     *\n     * @memberof PolarEncoder\n     */\n    serializeLayerConfig (layerArray) {\n        const serializedLayers = [];\n\n        layerArray.length && layerArray.forEach((layer) => {\n            const def = layerFactory.getSerializedConf(layer.mark, layer);\n            serializedLayers.push({\n                mark: layer.mark,\n                def\n            });\n        });\n        return serializedLayers;\n    }\n\n    sanitizeLayerConfig (encodingConfigs, userLayerConfig) {\n        const layerConfig = [];\n\n        userLayerConfig.forEach((config) => {\n            const def = toArray(config.def);\n            sanitizeIndividualLayerConfig(encodingConfigs, def);\n            def.forEach((conf) => {\n                const encoding = conf.encoding || (conf.encoding = {});\n                !encoding.angle && (encoding.angle = {});\n                const angleField = getObjProp(encoding.angle, 'field');\n                const angle0Field = getObjProp(encoding.angle0, 'field');\n\n                if (!angleField) {\n                    Object.assign(encoding.angle, {\n                        field: encodingConfigs.color && encodingConfigs.color.field\n                    });\n                }\n                if (!angle0Field) {\n                    !encoding.angle0 && (encoding.angle0 = {});\n                    Object.assign(encoding.angle0, {\n                        field: encoding.angle.field\n                    });\n                }\n            });\n\n            layerConfig.push(config);\n        });\n        return layerConfig;\n    }\n\n    hasMandatoryFields (fields) {\n        const { optionalProjections } = fields;\n        return super.hasMandatoryFields({ optionalProjections });\n    }\n}\n","import { createRetinalAxis } from './encoder-helper';\nimport { COLOR, SHAPE, SIZE } from '../enums/constants';\nimport VisualEncoder from './visual-encoder';\n\n/**\n *\n *\n * @export\n * @class RetinalEncoder\n * @extends {VisualEncoder}\n */\nexport default class RetinalEncoder extends VisualEncoder {\n\n    /**\n     *\n     *\n     * @param {*} axesCreators\n     *\n     * @memberof RetinalEncoder\n     */\n    createAxis (axesCreators) {\n        const { fieldsConfig, config } = axesCreators;\n        const newAxes = {};\n\n        [COLOR, SHAPE, SIZE].forEach((axisType) => {\n            newAxes[`${axisType}`] = createRetinalAxis({ axisType, fieldsConfig }, config[axisType]);\n        });\n        return newAxes;\n    }\n\n    /**\n     *\n     *\n     * @static\n     *\n     * @memberof RetinalEncoder\n     */\n    static type () {\n        return 'retinal';\n    }\n\n    /**\n     *\n     *\n     * @param {*} context\n     *\n     * @memberof RetinalEncoder\n     */\n    setCommonDomain (context) {\n        const { domains, axes, encoding } = context;\n\n        Object.entries(encoding).forEach((enc) => {\n            if (enc[1] && enc[1].field) {\n                const encType = enc[0];\n                const field = enc[1].field;\n\n                if (field) {\n                    axes[encType].forEach((axis) => {\n                        const domain = domains[field];\n                        !enc[1].domain && axis.updateDomain(domain);\n                    });\n                }\n            }\n        });\n\n        return axes;\n    }\n}\n","import { ROWS, COLUMNS, COLOR, SHAPE, SIZE, DETAIL, LAYERS, TRANSFORM, CONFIG } from '../enums/constants';\n\n/**\n * This is the local options semantics based on which setters getters are created and reactivity is initiated.\n * This local object is only valid for Artboard.\n * Artboard merges global and local object both to the model\n *\n * Format\n *  PROPERTRY_NAME: {\n *      value: // default value of the property,\n *      meta: {\n *          typeCheck: // The setter value will be checked using this. If the value is function then the setter value\n *                     // is passed as args.\n *          typeExpected: // The output of typecheck action will be tested against this. Truthy value will set the\n *                       // value to the setter\n *          sanitizaiton: // Need for sanitization before type is checked\n *      }\n *  }\n *\n * @module\n */\n\nexport default {\n    [CONFIG]: {},\n    [ROWS]: {},\n    [COLUMNS]: {},\n    [COLOR]: {},\n    [SHAPE]: {},\n    [SIZE]: {},\n    [DETAIL]: {},\n    [LAYERS]: {},\n    [TRANSFORM]: {}\n};\n","import { ERROR_MSG } from 'muze-utils';\n\n/**\n * Interfaces for VisualGroup. Any new VisualGroup has to implement this class.\n * @class  SimpleGroup\n */\nclass SimpleGroup {\n\n    /**\n     * This method is used to set or get the DataModel instance.\n     *\n     * @param {DataModel | undefined} dataModel Instance of datamodel.\n\n     * @memberof  SimpleGroup\n     */\n    data () {\n        throw new Error(ERROR_MSG.INTERFACE_IMPL);\n    }\n\n    /**\n     * This method is used to set or get the group specific configuration\n     * properties\n     *\n     * @param {Object | undefined} configObj The input configuration.\n     *                                or instance of visual group.\n     * @memberof  SimpleGroup\n     */\n    config () {\n        throw new Error(ERROR_MSG.INTERFACE_IMPL);\n    }\n\n    /**\n     * This method is used to return a serialized representation of the\n     * instance's properties.\n     *\n     * @memberof  SimpleGroup\n     */\n    serialize () {\n        throw new Error(ERROR_MSG.INTERFACE_IMPL);\n    }\n\n    /**\n     * This method is used to get or set the measurement object which houses\n     * layout properties like width and height.\n     *\n     * @param {Object  | undefined} mObj The measurement properties.\n     * @memberof  SimpleGroup\n     */\n    measurement () {\n        throw new Error(ERROR_MSG.INTERFACE_IMPL);\n    }\n}\n\nexport default SimpleGroup;\n","/**\n * This is a wrapper class over the matrix of cells which gets created in visual group. Visual Group creates left,\n * right, bottom and top and center matrices and wraps them using this class.\n *\n * @public\n * @class ValueMatrix\n */\nclass ValueMatrix {\n\n    /**\n     * Creates an instance of ValueMatrix.\n     *\n     * @param {Array} matrixArr Matrix array.\n     */\n    constructor (matrixArr) {\n        const instancesById = {};\n\n        this.matrix(matrixArr || []);\n        this.filter(() => true);\n\n        this.each((el, rIdx, cIdx) => {\n            const cellValue = el.valueOf();\n            if (cellValue && cellValue.id) {\n                const id = cellValue.id();\n                instancesById[id] = {\n                    instance: cellValue,\n                    rowIndex: rIdx,\n                    colIndex: cIdx\n                };\n            }\n        });\n\n        this.instancesById(instancesById);\n    }\n\n    instancesById (...id) {\n        if (id.length) {\n            this._instancesById = id[0];\n            return this;\n        }\n        return this._instancesById;\n    }\n\n    /**\n     * Returns the array of matrices contained in this instance.\n     *\n     * @public\n     * @return {Array} Array of matrices.\n     */\n    matrix (...matrix) {\n        if (matrix.length) {\n            this._matrix = matrix[0];\n            return this;\n        }\n        return this._matrix;\n    }\n\n    /**\n     * Sets a filter criteria. This filter criteria gets applied when each function is called.\n     *\n     * @public\n     * @param {Function} fn Filter function.\n     *\n     * @return {ValueMatrix} Instance of value matrix.\n     */\n    filter (...fn) {\n        if (fn.length) {\n            this._filterFn = fn[0];\n            return this;\n        }\n        return this._filterFn;\n    }\n\n    /**\n     * Returns the total width occupied by all the cells of the matrix.\n     *\n     * @return {Number} Width of the matrix.\n     */\n    width () {\n        let rowWidth = 0;\n\n        this.matrix().forEach((row) => {\n            let currentRowWidth = 0;\n            row.forEach((cell) => {\n                currentRowWidth += cell.getLogicalSpace().width;\n            });\n            rowWidth = Math.max(rowWidth, currentRowWidth);\n        });\n        return rowWidth;\n    }\n\n    /**\n     * Returns the total width occupied by all the cells of the matrix.\n     *\n     * @return {Number} Width of the matrix.\n     */\n    height () {\n        let rowHeight = 0;\n\n        this.matrix().forEach((row) => {\n            let currentRowHeight = 0;\n            row.forEach((cell) => {\n                currentRowHeight = Math.max(currentRowHeight, cell.getLogicalSpace().height);\n            });\n            rowHeight += currentRowHeight;\n        });\n        return rowHeight;\n    }\n\n    /**\n     * Iterates through the two dimensional matrix array and calls the given callback function with the cell instance,\n     * row index, column index and the matrix array.\n     *\n     * @param {Function} fn Callback function which will get called for every cell.\n     * @return {ValueMatrix} Instance of the value matrix.\n     */\n    each (fn) {\n        const matrix = this.matrix();\n        const filterFn = this.filter();\n\n        matrix.forEach((row, rIndex) => {\n            row.forEach((col, cIndex) => {\n                if (filterFn(col)) {\n                    fn(col, rIndex, cIndex, matrix);\n                }\n            });\n        });\n        return this;\n    }\n\n    findPlaceHolderById (id) {\n        return this.instancesById()[id];\n    }\n\n    clear () {\n        this.each(cell => cell.remove());\n        this.matrix([]);\n    }\n\n    data () {\n\n    }\n}\n\nexport default ValueMatrix;\n","import { VisualUnit } from '@chartshq/visual-unit';\nimport { STATE_NAMESPACES, CommonProps, InvalidAwareTypes } from 'muze-utils';\nimport { BaseLayer } from '@chartshq/visual-layer';\nimport { getBorders } from '../group-helper';\nimport { RetinalEncoder } from '../encoder';\nimport { registerDomainChangeListener, unsubscribeChangeListeners } from './change-listener';\nimport ValueMatrix from './value-matrix';\nimport { ROWS, COLUMNS, DATA } from '../enums/constants';\n\nexport const createUnitState = (context) => {\n    const [globalState, localState] = VisualUnit.getState();\n    const store = context.store();\n    store.append(STATE_NAMESPACES.UNIT_GLOBAL_NAMESPACE, globalState)\n        .append(STATE_NAMESPACES.UNIT_LOCAL_NAMESPACE, localState);\n};\n\nexport const initializeGlobalState = (context) => {\n    const globalState = context.constructor.getState()[0];\n    const store = context.store();\n    store.append(STATE_NAMESPACES.GROUP_GLOBAL_NAMESPACE, globalState);\n};\n\nexport const createLayerState = (context) => {\n    const [globalState, localState] = BaseLayer.getState();\n    context.store().append(STATE_NAMESPACES.LAYER_GLOBAL_NAMESPACE, globalState)\n        .append(STATE_NAMESPACES.LAYER_LOCAL_NAMESPACE, localState);\n};\n\nconst sanitizeRetinalConfig = (retinalConf) => {\n    const conf = {};\n    for (const key in retinalConf) {\n        const confValue = retinalConf[key];\n        if (typeof confValue === 'string' || !confValue) {\n            conf[key] = {\n                field: retinalConf[key]\n            };\n        } else {\n            conf[key] = confValue;\n        }\n    }\n    return conf;\n};\n\nexport const setMatrixInstances = (context, placeholder) => {\n    let {\n        values,\n        rows,\n        columns\n    } = placeholder;\n    values = values || [];\n    rows = rows || [];\n    columns = columns || [];\n    context._composition.matrices = {\n        value: new ValueMatrix(values),\n        left: new ValueMatrix(rows[0]),\n        right: new ValueMatrix(rows[1]),\n        top: new ValueMatrix(columns[0]),\n        bottom: new ValueMatrix(columns[1])\n    };\n\n    context._dependencies.throwback.commit(CommonProps.MATRIX_CREATED, true);\n    return context;\n};\n\nconst hasValue = (val) => {\n    let hasOneValue = false;\n    for (let i = 0; i < val.length && !hasOneValue; i++) {\n        for (let j = 0; j < val[i].length; j++) {\n            if (!(val[i][j] instanceof InvalidAwareTypes)) {\n                hasOneValue = true;\n                break;\n            }\n        }\n    }\n    return hasOneValue;\n};\n\nexport const updateChecker = (context, props) => props.every((option) => {\n    const val = context[option]();\n    switch (option) {\n    case ROWS:\n    case COLUMNS:\n        return val !== null;\n    case DATA:\n        return val && !val.isEmpty() && hasValue(val.getData().data);\n\n    default:\n        return true;\n    }\n});\n\nexport const initializeFields = (context) => {\n    const rows = context.rows();\n    const columns = context.columns();\n    const color = context.color();\n    const datamodel = context.data();\n    const size = context.size();\n    const detail = context.detail();\n    const layers = context.layers();\n    const transform = context.transform();\n    const config = context.config();\n    const shape = context.shape();\n    // Get the resolver for the matrices\n    const resolver = context.resolver();\n\n    resolver.store(context.store());\n    resolver.valueParser(context.valueParser());\n\n    // Prepare configuration for matrix preparation\n    let matrixConfig = {\n        selection: context.selection(),\n        alias: context.alias(),\n        globalConfig: config || {},\n        rows,\n        columns,\n        detail,\n        layers,\n        transform\n    };\n\n    unsubscribeChangeListeners(context);\n\n    const retinalConfig = sanitizeRetinalConfig({\n        color,\n        shape,\n        size\n    });\n\n    matrixConfig = Object.assign(matrixConfig, retinalConfig);\n    // Create the encoders for the group\n    const encoders = {};\n    encoders.retinalEncoder = new RetinalEncoder();\n    encoders.simpleEncoder = context.createEncoderInstance();\n    matrixConfig.coord = encoders.simpleEncoder.constructor.type();\n    resolver.encoder(encoders.simpleEncoder);\n\n    // Set the group type\n    context.groupType(encoders.simpleEncoder.constructor.type());\n\n    // Get sanitized fields as instances of the Vars Class\n    const fields = encoders.simpleEncoder.fieldSanitizer(datamodel, matrixConfig);\n    encoders.simpleEncoder.setAxisAndHeaders(config ? config.axisFrom : {}, fields);\n    // Setting layers for the code\n    layers && resolver.layerConfig(layers);\n    // Set the row and column axes\n    resolver.horizontalAxis(fields.rows, encoders).verticalAxis(fields.columns, encoders);\n\n    return {\n        rows,\n        columns,\n        color,\n        datamodel,\n        size,\n        detail,\n        layers,\n        transform,\n        config,\n        shape,\n        resolver,\n        matrixConfig,\n        retinalConfig,\n        encoders,\n        fields\n    };\n};\n\nexport const createMatrices = (context, sanitizedConfig) => {\n    const { groupConfig, resolverConfig } = sanitizedConfig;\n    const {\n        config,\n        resolver,\n        matrixConfig,\n        encoders,\n        retinalConfig,\n        fields\n    } = groupConfig;\n\n    const placeholderInfo = resolver.getMatrices(resolverConfig);\n\n    context._originalGroupedData = context._groupedDataModel = placeholderInfo.dataModels.groupedModel;\n        // Set the selection object\n    context.selection(placeholderInfo.selection);\n\n        // Create retinal axes\n    resolver.createRetinalAxes(placeholderInfo.dataModels.parentModel.getFieldsConfig(), retinalConfig,\n                encoders);\n\n        // Domains are evaluated for each of the axes for commonality\n    resolver.setRetinalAxisDomain(matrixConfig, placeholderInfo.dataModels, encoders);\n\n        // Create matrix instances\n    setMatrixInstances(context, placeholderInfo);\n\n        // Prepare corner matrices\n    context.cornerMatrices(resolver.createHeaders(placeholderInfo, fields, config));\n\n        // Set placeholder information\n    context.placeholderInfo(placeholderInfo);\n\n    context._composition.axes = resolver.axes();\n    context.metaData({\n        border: getBorders(placeholderInfo, encoders.simpleEncoder)\n    });\n\n    resolver.encoder().unionUnitDomains(context);\n\n    registerDomainChangeListener(context);\n    return context;\n};\n\nexport const initializeResolverFields = (context, config) => {\n    const {\n        datamodel,\n        encoders,\n        resolver,\n        componentRegistry\n    } = context;\n    const {\n            globalConfig,\n            selection,\n            transform\n        } = config;\n    const groupBy = globalConfig.autoGroupBy;\n    const { smartlabel: labelManager } = resolver.dependencies();\n    const fieldMap = datamodel.getFieldsConfig();\n    const layerConfig = resolver.layerConfig();\n    const registry = resolver.registry();\n    const { fields: normalizedRows } = resolver.horizontalAxis();\n    const { fields: normalizedColumns } = resolver.verticalAxis();\n    const otherEncodings = resolver.optionalProjections(config, layerConfig, datamodel.getSchema());\n    const facetsAndProjections = resolver.getAllFields();\n    const { simpleEncoder } = encoders;\n    const shouldRender = simpleEncoder.hasMandatoryFields(facetsAndProjections);\n    return {\n        datamodel,\n        encoders,\n        resolver,\n        globalConfig,\n        selection,\n        transform,\n        componentRegistry,\n        groupBy,\n        labelManager,\n        fieldMap,\n        layerConfig,\n        registry,\n        normalizedRows,\n        normalizedColumns,\n        otherEncodings,\n        facetsAndProjections,\n        simpleEncoder,\n        shouldRender,\n        config\n    };\n};\n","import { STATE_NAMESPACES } from 'muze-utils';\n\nexport const setupChangeListeners = (context) => {\n    const store = context.store();\n    const stores = {\n        throwback: context._dependencies.throwback,\n        store\n    };\n\n    ['x', 'y'].forEach((axisType) => {\n        store.registerChangeListener([`${STATE_NAMESPACES.GROUP_GLOBAL_NAMESPACE}.domain.${axisType}`], () => {\n            const groupAxes = context.resolver().axes();\n            groupAxes[axisType].forEach(axes => axes.forEach((axis) => {\n                axis.render();\n            }));\n        });\n    });\n    const { VisualUnit, layerRegistry } = context.registry();\n    const { base: BaseLayer } = layerRegistry;\n    [VisualUnit, BaseLayer].forEach((comp) => {\n        const formalName = comp.formalName();\n        ['store', 'throwback'].forEach((type) => {\n            const listeners = comp.getListeners()[type];\n            const storeInst = stores[type];\n            listeners.forEach((listenerInf) => {\n                storeInst[listenerInf.type](listenerInf.props, listenerInf.listener, false, {\n                    namespace: formalName,\n                    subNamespace: listenerInf.subNamespace\n                });\n            });\n        });\n    });\n};\n\nexport const registerDomainChangeListener = (context) => {\n    const store = context.store();\n    store.registerChangeListener([`${STATE_NAMESPACES.UNIT_GLOBAL_NAMESPACE}.domain`], () => {\n        context.resolver().encoder().unionUnitDomains(context);\n    }, false, {\n        key: 'unionDomain'\n    });\n};\n\nexport const unsubscribeChangeListeners = (context) => {\n    context.store().unsubscribe({\n        key: 'unionDomain'\n    });\n};\n","import { ROWS, COLUMNS, COLOR, SHAPE, SIZE, DETAIL, LAYERS, TRANSFORM, CONFIG } from '../enums/constants';\n\nexport const PROPS = {\n    alias: {},\n    data: {\n        preset: (context) => {\n            context._prevData = null;\n        }\n    },\n    cornerMatrices: {\n        defaultValue: {\n            topLeft: [],\n            topRight: [],\n            bottomLeft: [],\n            bottomRight: []\n        }\n    },\n    groupType: {},\n\n    metaData: {\n        defaultValue: {\n            border: {}\n        }\n    },\n    placeholderInfo: {\n        defaultValue: {}\n    },\n    resolver: {},\n    valueParser: {\n        defaultValue: val => val\n    },\n    registry: {\n        sanitization: (context, value) => {\n            if (context.resolver) {\n                context.resolver().registry({\n                    cells: value.cellRegistry,\n                    VisualUnit: value.VisualUnit\n                });\n            }\n            return value;\n        }\n    },\n    selection: {},\n    [CONFIG]: {},\n    [ROWS]: {},\n    [COLUMNS]: {},\n    [COLOR]: {},\n    [SHAPE]: {},\n    [SIZE]: {},\n    [DETAIL]: {},\n    [LAYERS]: {},\n    [TRANSFORM]: {}\n};\n","import { generateGetterSetters } from 'muze-utils';\nimport localOptions from './local-options';\nimport { SimpleGroup } from '../simple-group';\nimport {\n    MatrixResolver,\n    findInGroup,\n    getEncoder\n} from '../group-helper';\nimport {\n    createUnitState,\n    initializeGlobalState,\n    setMatrixInstances,\n    createMatrices,\n    createLayerState,\n    initializeResolverFields,\n    initializeFields,\n    updateChecker\n} from './helper';\nimport { setupChangeListeners } from './change-listener';\nimport { PROPS } from './props';\nimport {\n    CONFIG,\n    MOUNT,\n    RETINAL,\n    Y,\n    ROWS,\n    COLUMNS,\n    DATA\n} from '../enums/constants';\n\n/**\n * VisualGroup is instantiated by canvas for creating {@link VisualUnit} and axes instances.It creates the\n * the matrix of visual units and axes. It also creates the layout instance which manages the allocation\n * of space of matrices.\n *\n * To get instance of visual group,\n * ```\n *      const visualGroup = canvas.composition().visualGroup;\n * ```\n * @public\n *\n * @class VisualGroup\n */\nclass VisualGroup extends SimpleGroup {\n\n    /**\n     * Creates an instance of VisualGroup. Requires dependencies and other registry options for placeholders\n     * and layers that create individual units.\n     *\n     * @param {Object} registry Key value pair of compostions for the group\n     * @param {Object} dependencies Dependencies needed to run the group\n     * @memberof VisualGroup\n     */\n    constructor (registry, dependencies) {\n        super();\n\n        const {\n            components,\n            componentSubRegistry,\n            interactions\n        } = registry;\n\n        this._dependencies = dependencies;\n        // Generate getter/setter methods for all properties of the class\n        // One can get each property by calling the method and can set it\n        // by passing paramaters for the same. Thus, one can chain setter\n        // getter methods.\n        generateGetterSetters(this, this.constructor.getterSetters());\n        generateGetterSetters(this, this.constructor.localOptions());\n        // Populate the store with default values\n        // initialize group compositions\n        this._composition = {};\n        // store reference to data\n        this._data = [];\n        this._prevData = null;\n        this._groupedDataModel = [];\n        // store reference to mountpoint\n        this._mount = null;\n        // selection object that takes care of updating of components\n        this._selection = {};\n        // Create instance of matrix resolver\n        this.createMatrixResolver();\n        // matrix instance store each of the matrices\n        setMatrixInstances(this, {});\n         // Getting indiviual registered items\n        this.registry({\n            layerRegistry: componentSubRegistry.layers.get(),\n            cellRegistry: componentSubRegistry.cells.get(),\n            VisualUnit: components.VisualUnit,\n            interactions\n        });\n    }\n\n    static getState () {\n        return [{\n            domain: {\n                x: null,\n                y: null,\n                radius: null,\n                angle: null,\n                angle0: null\n            }\n        }, {}];\n    }\n\n    store (...params) {\n        if (params.length) {\n            this._store = params[0];\n            initializeGlobalState(this);\n            createUnitState(this);\n            createLayerState(this);\n            // Register listeners\n            setupChangeListeners(this);\n            return this;\n        }\n        return this._store;\n    }\n\n    static formalName () {\n        return 'VisualGroup';\n    }\n\n    static localOptions () {\n        return localOptions;\n    }\n    static getterSetters () {\n        return PROPS;\n    }\n\n    /**\n     * Return the instances of matrices created by the visual group.\n     *\n     * @return {Object} Instance of matrices.\n     */\n    matrixInstance (...matrices) {\n        if (matrices.length) {\n            return this;\n        }\n        return this.composition().matrices;\n    }\n\n    /**\n     * Returns the composition of visual group.\n     *\n     * @public\n     *\n     * @return {Object} Composition of visual group. It contains instance of matrices {@link ValueMatrix}\n     * and instances of axis.\n     * ```\n     *          {\n     *              matrices: {\n     *                  value: // Instance of center value matrix.\n     *                  left: // Instance of left value matrix\n     *                  right: // Instance of right value matrix\n     *                  bottom: // Instance of bottom value matrix\n     *                  top: // Instance of top value matrix.\n     *              },\n     *              axes: {\n     *                  x: // Array of x axis.\n     *                  y: // Array of y axis\n     *                  color: // Array of color axis\n     *                  shape: // Array of shape axis\n     *                  size: // Array of size axis.\n     *              }\n     *          }\n     * ```\n     */\n    composition (...params) {\n        if (params.length) {\n            return this;\n        }\n        return this._composition;\n    }\n\n    /**\n     * Locks the model to prevent change listeners to be triggered until unlocked\n     *\n     * @return {Object} Instance of class VisualGroup\n     * @memberof VisualGroup\n     */\n    lockModel () {\n        this.store().model.lock();\n        return this;\n    }\n\n    /**\n     * Unlocks the model so that all change listeners can be triggered\n     *\n     * @return {Object} Instance of class VisualGroup\n     */\n    unlockModel () {\n        this.store().model.unlock();\n        return this;\n    }\n\n    /**\n     * Returns the channel name of the variable. Channels are rows, columns, color, shape and size.\n     *\n     * @public\n     * @param {string} variable Name of the variable.\n     *\n     * @return {string} Name of the channel.\n     */\n    where (variable) {\n        return findInGroup(variable, this.resolver().getAllFields());\n    }\n\n    /**\n     * Gets the axis instances of the visual group based on the given axis type.\n     *\n     * @public\n     * @param {string} type Type of axis. X,Y or retinal axes.\n     *\n     * @return {Array} Array of axis instances.\n     */\n    getAxes (type) {\n        if (type === RETINAL) {\n            return this.resolver().getRetinalAxes();\n        }\n        return this.resolver().getSimpleAxes(type);\n    }\n\n    /**\n     * Returns the instances of cells based on the given type. Type can be given as `row' or `col`.\n     *\n     * @public\n     * @return {Array} Two dimensional array of cells.\n     */\n    getCells (type) {\n        return this.resolver()[`${type}Cells`]();\n    }\n\n    getFieldsFromChannel (channel) {\n        const {\n            rowProjections,\n            colProjections\n        } = this.resolver().getAllFields();\n        return channel === Y ? rowProjections : colProjections;\n    }\n\n    getCellsByFacetKey (facetKey) {\n        const resolver = this.resolver();\n        const cells = resolver.rowCells()[facetKey] || resolver.colCells()[facetKey] || [];\n        return cells;\n    }\n\n    getAxesByFacetKey (axisType, facetKey) {\n        const resolver = this.resolver();\n        const cells = resolver.rowCells()[facetKey] || resolver.colCells()[facetKey];\n        const axes = cells[0].valueOf().axes()[axisType] || [];\n\n        return axes;\n    }\n\n    /**\n     * This method is used to return a serialized representation of the instance's properties.\n     *\n     * @return {Object} Object with config proprties.\n     * @memberof VisualGroup\n     */\n    serialize () {\n        const store = this.store();\n\n        return {\n            [CONFIG]: store.get(CONFIG),\n            [MOUNT]: store.get(MOUNT)\n        };\n    }\n\n    /**\n     * Returns the grouped datamodel prepared by visual group. If there is no group by performed, then it returns the\n     * original data model passed to visual group.\n     *\n     * @return {DataModel} Grouped data model.\n     */\n    getGroupByData () {\n        return this._groupedDataModel;\n    }\n\n    createMatrices (sanitizedConfig) {\n        createMatrices(this, sanitizedConfig);\n    }\n\n    getMandatoryFields () {\n        const updateProps = updateChecker(this, [ROWS, COLUMNS, DATA]);\n        let sanitizedValue = {\n            groupConfig: {},\n            resolverConfig: {},\n            shouldRender: false\n        };\n        if (updateProps) {\n            const localFields = initializeFields(this);\n            const {\n                datamodel,\n                encoders,\n                resolver,\n                matrixConfig\n            } = localFields;\n            const context = {\n                datamodel,\n                componentRegistry: this.registry(),\n                encoders,\n                resolver\n            };\n            const resolverFields = initializeResolverFields(context, matrixConfig);\n            sanitizedValue = {\n                groupConfig: localFields,\n                resolverConfig: resolverFields,\n                shouldRender: resolverFields.shouldRender\n            };\n        }\n        return sanitizedValue;\n    }\n\n    remove () {\n        this.matrixInstance().value.clear();\n        this.resolver().clear();\n        const info = this.placeholderInfo();\n        info.rows = null;\n        info.columns = null;\n        info.values = null;\n    }\n\n    createEncoderInstance () {\n        const layers = this.layers();\n\n        return getEncoder(layers);\n    }\n\n    createMatrixResolver () {\n        this.resolver(new MatrixResolver(this._dependencies));\n\n        return this;\n    }\n\n    groupedData (...params) {\n        if (params.length) {\n            this._groupedDataModel = params[0];\n            return this;\n        }\n        return this.getGroupByData();\n    }\n\n    resetData () {\n        const oriData = this._originalGroupedData;\n        if (oriData) {\n            this._groupedDataModel = oriData;\n        }\n\n        return this;\n    }\n}\n\nexport default VisualGroup;\n","import { PersistentBehaviour, SELECTION } from '@chartshq/muze-firebolt';\n\nexport default class SelectBehaviour extends PersistentBehaviour {\n    static formalName () {\n        return 'select';\n    }\n\n    setSelectionSet (addSet, selectionSet) {\n        if (addSet === null) {\n            selectionSet.reset();\n        } else if (addSet.length) {\n            const propagationInf = this.firebolt._propagationInf;\n            // new add set\n            const existingRemoveSet = addSet.filter(d => selectionSet._set[d] === SELECTION.SELECTION_OLD_EXIT\n                || selectionSet._set[d] === SELECTION.SELECTION_NEW_EXIT);\n\n            if (propagationInf.sourceId) {\n                selectionSet.reset();\n                selectionSet.add(addSet);\n            } else {\n                // existing add set\n                if (existingRemoveSet.length) {\n                    selectionSet.updateEntry();\n                    selectionSet.add(existingRemoveSet);\n                } else {\n                    selectionSet.updateExit();\n                    selectionSet.remove(addSet);\n                }\n                const { exitSet } = selectionSet.getSets({ keys: true });\n                const mergedExitSet = [...new Set(exitSet[1]), ...new Set(exitSet[0])];\n                const completeSetCount = selectionSet.getCompleteSet().length;\n                if (exitSet[1].length !== completeSetCount && mergedExitSet.length === completeSetCount) {\n                    selectionSet.reset();\n                }\n            }\n        } else {\n            selectionSet.remove(selectionSet.getCompleteSet());\n        }\n        return this;\n    }\n}\n","import { BEHAVIOURS, ACTIONS } from '@chartshq/muze-firebolt';\n\nconst CLASSPREFIX = 'muze';\n\nexport const actionBehaviourMap = {\n    [ACTIONS.DRAG]: {\n        target: `.${CLASSPREFIX}-gradient-rect`,\n        behaviours: [BEHAVIOURS.BRUSH]\n    },\n    [ACTIONS.HOVER]: {\n        target: [`.${CLASSPREFIX}-legend-columns`],\n        behaviours: [BEHAVIOURS.HIGHLIGHT]\n    },\n    [ACTIONS.CLICK]: {\n        target: [`.${CLASSPREFIX}-legend-columns`],\n        behaviours: [BEHAVIOURS.SELECT]\n    }\n};\n\nexport const propagationBehaviourMap = {\n    [BEHAVIOURS.SELECT]: BEHAVIOURS.FILTER,\n    [BEHAVIOURS.BRUSH]: BEHAVIOURS.HIGHLIGHT\n};\n","import * as BEHAVIOURS from '../enums/behaviours';\nimport * as sideEffects from '../enums/side-effects';\n\nexport const behaviourEffectMap = {\n    [BEHAVIOURS.BRUSH]: [sideEffects.SELECTIONBOX, {\n        name: sideEffects.Highlighter,\n        options: {\n            strategy: 'fade'\n        }\n    }],\n    [BEHAVIOURS.SELECT]: [{\n        name: sideEffects.Highlighter,\n        options: {\n            strategy: 'fade'\n        }\n    }]\n};\n\nexport const propagationSideEffects = {\n    [BEHAVIOURS.BRUSH]: [{\n        name: sideEffects.Highlighter,\n        options: {\n            strategy: 'fade'\n        }\n    }],\n    [BEHAVIOURS.HIGHLIGHT]: [{\n        name: sideEffects.Highlighter,\n        options: {\n            strategy: 'fade'\n        }\n    }],\n    [BEHAVIOURS.SELECT]: ['filter']\n};\n\n","export const BRUSH = 'brush';\nexport const HIGHLIGHT = 'highlight';\nexport const TOOLTIP = 'tooltip';\nexport const FILTER = 'filter';\nexport const SELECT = 'select';\n\n","export const SELECTIONBOX = 'selectionBox';\nexport const Highlighter = 'highlighter';\nexport const Marker = 'marker';\n\n","import { propagationBehaviourMap } from './action-behaviour-map';\nimport { propagationSideEffects } from './behaviour-effect-map';\n\nexport const propagate = (firebolt, action, identifiers) => {\n    const context = firebolt.context;\n    const data = context.metaData();\n\n    const propPayload = {};\n    propPayload.action = propagationBehaviourMap[action] || action;\n    // @TODO: Change fade propagationSideEffect for area layer\n    propPayload.sideEffects = propagationSideEffects[action];\n    propPayload.sourceCanvas = context.canvasAlias();\n    const isMutableAction = firebolt._actions.behavioural[propPayload.action].constructor.mutates();\n\n    const propConfig = {\n        sourceId: firebolt.id(),\n        payload: propPayload,\n        criteria: propPayload.criteria === null ? null : identifiers,\n        isMutableAction,\n        action: propPayload.action\n    };\n\n    data.propagate(identifiers, propConfig, true);\n};\n\nexport const payloadGenerator = {\n    __default: (selectionDataModel, propConfig) => {\n        const propPayload = propConfig.payload;\n        const sourceIdentifiers = propConfig.sourceIdentifiers;\n        const dataObj = selectionDataModel.getData();\n        let schema = dataObj.schema;\n        const payload = Object.assign({}, propPayload);\n        schema = dataObj.schema;\n        const data = dataObj.data;\n        const sourceFields = schema.map(d => d.name);\n        payload.criteria = !sourceIdentifiers && selectionDataModel.isEmpty() ? null :\n                [sourceFields, ...data];\n        payload.sourceFields = sourceIdentifiers ? sourceIdentifiers.fields.map(d => d.name) : [];\n        return payload;\n    },\n    brush: (dm, propConfig) => {\n        const { criteria } = propConfig;\n        return {\n            criteria: criteria ? criteria.range : criteria\n        };\n    }\n};\n\n","export const CLASSPREFIX = 'muze';\nexport const IDFIELD = '__id__';\nexport const CONFIG = 'config';\nexport const DATAMODEL = 'dataModel';\nexport const AXES = 'axes';\nexport const LAYERDEFS = 'layerDef';\nexport const WIDTH = 'width';\nexport const MAXWIDTH = 'max-width';\nexport const HEIGHT = 'height';\nexport const MOUNTPOINT = 'mountPoint';\nexport const GRIDLINEPARENTGROUPCLASS = 'grid-lines';\nexport const TRANSFORM = 'transform';\nexport const CONSOLIDATED = 'consolidated';\nexport const FRAGMENTED = 'fragmented';\nexport const DEFAULTCOLOR = '#F44336';\nexport const DEFAULTSIZE = 50;\nexport const VERTICAL_BUFFER = 10;\nexport const HORIZONTAL_BUFFER = 2;\nexport const DEFAULTICONSIZE = { // approximately the (size needed) * Math.PI value\n    circle: 64,\n    square: 45.8,\n    default: 42.8\n};\nexport const DEFAULTSHAPE = 'circle';\nexport const STEP = 'step';\nexport const GRADIENT = 'gradient';\nexport const ORDINAL = 'ordinal';\nexport const SCALE_FUNCTIONS = {\n    size: 'getSize',\n    shape: 'getShape',\n    color: 'getColor'\n};\nexport const TOP = 'top';\nexport const LEFT = 'left';\nexport const RIGHT = 'right';\nexport const BOTTOM = 'bottom';\nexport const HORIZONTAL = 'horizontal';\nexport const VERTICAL = 'vertical';\nexport const CENTER = 'center';\nexport const VALUE = 'value';\nexport const PATH = 'path';\nexport const SHAPE = 'shape';\nexport const ICON = 'icon';\nexport const RECT = 'rect';\nexport const START = 'start';\nexport const UPPER = 'upper';\nexport const LOWER = 'lower';\nexport const END = 'end';\nexport const SIZE = 'size';\nexport const DISCRETE = 'discrete';\nexport const MEASURE = 'measure';\nexport const DEFAULT = 'default';\n\nexport const POSITION_ALIGNMENT_MAP = {\n    [LEFT]: VERTICAL,\n    [RIGHT]: VERTICAL,\n    [TOP]: HORIZONTAL,\n    [BOTTOM]: HORIZONTAL\n};\n\nexport const OPPOSITE_POSITION = {\n    [LEFT]: RIGHT,\n    [RIGHT]: LEFT\n};\n\n","import { Firebolt } from '@chartshq/muze-firebolt';\nimport { propagate, payloadGenerator } from './helper';\nimport { STEP, GRADIENT } from '../enums/constants';\nimport { HIGHLIGHT, SELECT } from '../enums/behaviours';\n/**\n * This class manages the interactions of legend.\n * @export\n * @class LegendFireBolt\n * @extends {Firebolt}\n */\nexport class LegendFireBolt extends Firebolt {\n    constructor (...params) {\n        super(...params);\n        this.initializeSideEffects();\n    }\n\n    getPropagationSelectionSet (selectionSet) {\n        return selectionSet[0];\n    }\n\n    propagate (behaviourName, payload, selectionSet) {\n        propagate(this, behaviourName, selectionSet, {\n            payload\n        });\n    }\n\n    getAddSetFromCriteria (criteria) {\n        let values;\n        let uniqueIds;\n        const type = this.context.constructor.type();\n\n        if (criteria === null) {\n            uniqueIds = null;\n        } else if (type === STEP) {\n            values = Object.values(criteria);\n            uniqueIds = this.context.data().filter(d => values.indexOf(d.range) !== -1).map(d => d.id);\n        } else if (type === GRADIENT) {\n            uniqueIds = [];\n        } else {\n            values = criteria;\n            if (values instanceof Array) {\n                values = values.slice(1, criteria.length);\n                uniqueIds = [...new Set([].concat(...values))];\n            } else {\n                values = Object.values(criteria);\n                uniqueIds = this.context.data().filter(d => values.indexOf(d.range) !== -1).map(d => d.id);\n            }\n        }\n        return {\n            uids: uniqueIds,\n            model: null\n        };\n    }\n\n    getFullData () {\n        return null;\n    }\n\n    onDataModelPropagation () {\n        return (data, config) => {\n            const context = this.context;\n            if (!context.mount()) {\n                return;\n            }\n            const payloadFn = payloadGenerator[config.action] || payloadGenerator.__default;\n            const payload = payloadFn(data, config);\n            const { propagationSourceId } = config;\n            const propagationInf = {\n                propagate: false,\n                data,\n                sourceId: propagationSourceId\n            };\n            const isActionSourceSame = config.sourceId === this.id();\n            if (!isActionSourceSame && config.action === HIGHLIGHT) {\n                // @todo make it configurable\n                this.dispatchBehaviour(HIGHLIGHT, payload, propagationInf);\n            }\n        };\n    }\n\n    data () {\n        return this.context.metaData();\n    }\n\n    id () {\n        return `legend-${this.context._id}`;\n    }\n\n    sourceCanvas () {\n        return this.context.canvasAlias();\n    }\n\n    shouldApplySideEffects () {\n        return true;\n    }\n\n    /**\n     * Finds out if a deselected legend item is hovered\n     * @param {string} behaviour type of interaction\n     * @return {bool} true if highlight should work on the legend item, false otherwise\n     */\n    shouldApplyHighlightEffect (behaviour) {\n        const highlightedSet = this.getEntryExitSet(HIGHLIGHT);\n        const selectionSet = this.getEntryExitSet(SELECT);\n\n        if (highlightedSet && selectionSet) {\n            const currentHighlightedSet = highlightedSet.mergedEnter.uids;\n            const deselectedLegendItemsSet = selectionSet.mergedExit.uids;\n\n            // Find out if the currently highlighted item is also the deselected item\n            if (behaviour === HIGHLIGHT) {\n                const disabledLegendItems = [].concat(...currentHighlightedSet).filter(\n                    id => [].concat(...deselectedLegendItemsSet).includes(id)\n                );\n                if (disabledLegendItems.length) {\n                    return false;\n                }\n            }\n        }\n        return true;\n    }\n}\n","import {\n    getEvent,\n    getD3Drag\n } from 'muze-utils';\n\n/**\n * Adds dragging action to the target element.\n * @param {firebolt} firebolt firebolt\n * @param {SVGElement} targetEl Element on which brushing action is needed.\n * @param {Array} behaviours Array of behaviours\n */\n/* istanbul ignore next */ const drag = firebolt => (targetEl, behaviours) => {\n    let startPos = {};\n    let endPos = {};\n    let payload;\n    const d3Drag = getD3Drag();\n    const context = firebolt.context;\n    const boundingBox = context.measurement().gradientDimensions;\n    const axisType = context.config().align === 'horizontal' ? 'x' : 'y';\n    const axisScale = context.axis().source().scale();\n    const rangeShifter = axisScale.range()[axisType === 'x' ? 0 : 1];\n\n    targetEl.call(d3Drag().on('start', () => {\n        const event = getEvent();\n        startPos = {\n            x: event.x,\n            y: event.y\n        };\n    }).on('drag', () => {\n        const event = getEvent();\n\n        endPos = {\n            x: event.x,\n            y: event.y\n        };\n        endPos.x = Math.max(0, Math.min(endPos.x, boundingBox.width));\n        endPos.y = Math.max(0, Math.min(endPos.y, boundingBox.height));\n\n        payload = {\n            criteria: {\n                [context.fieldName()]: [axisScale.invert(startPos[axisType] + rangeShifter * 2),\n                    axisScale.invert(endPos[axisType] + rangeShifter * 2)].sort((a, b) => a - b)\n            }\n        };\n        behaviours.forEach(behaviour => firebolt.dispatchBehaviour(behaviour, payload));\n    }).on('end', () => {\n        const event = getEvent();\n\n        endPos = {\n            x: event.x,\n            y: event.y\n        };\n        endPos.x = Math.max(0, Math.min(endPos.x, boundingBox.width));\n        endPos.y = Math.max(0, Math.min(endPos.y, boundingBox.height));\n        if (startPos[axisType] === endPos[axisType]) {\n            payload = {\n                criteria: null\n            };\n        } else {\n            payload = {\n                criteria: {\n                    [context.fieldName()]: [axisScale.invert(startPos[axisType] + rangeShifter * 2),\n                        axisScale.invert(endPos[axisType] + rangeShifter * 2)].sort((a, b) => a - b)\n                }\n            };\n        }\n        behaviours.forEach(behaviour => firebolt.dispatchBehaviour(behaviour, payload));\n    }));\n};\n\nexport default drag;\n","import { getEvent } from 'muze-utils';\n\n/**\n * Adds mouse interactions to target element.\n * @param {Firebolt} Firebolt instance of firebolt.\n * @param {SVGElement} targetEl Element on which the event listeners will be attached.\n * @param {Array} behaviours Array of behaviours\n */\n/* istanbul ignore next */ const hover = firebolt => (targetEl) => {\n    const dispatchBehaviour = function (args) {\n        const event = getEvent();\n        const payload = {\n            criteria: firebolt.context.getCriteriaFromData(args)\n        };\n        firebolt.triggerPhysicalAction('hover', payload);\n        event.stopPropagation();\n    };\n\n    targetEl.on('mouseover', dispatchBehaviour)\n                    .on('mousemove', dispatchBehaviour)\n                    .on('mouseout', () => {\n                        const event = getEvent();\n                        firebolt.triggerPhysicalAction('hover', {\n                            criteria: null\n                        });\n                        event.stopPropagation();\n                    });\n};\n\nexport default hover;\n","/**\n * Adds mouse interactions to target element.\n * @param {VisualUnit} instance instance of visual unit.\n * @param {SVGElement} targetEl Element on which the event listeners will be attached.\n * @param {Array} behaviours Array of behaviours\n */\nconst click = firebolt => (targetEl, behaviours) => {\n    const dispatchBehaviour = function (args) {\n        const payload = {\n            criteria: firebolt.context.getCriteriaFromData(args)\n        };\n        behaviours.forEach(behaviour => firebolt.dispatchBehaviour(behaviour, payload));\n    };\n\n    targetEl.on('click', dispatchBehaviour);\n};\n\nexport default click;\n","import drag from './drag';\nimport hover from './hover';\nimport click from './click';\nimport * as ACTIONNAMES from '../../enums/actions';\n\nexport const physicalActions = {\n    [ACTIONNAMES.DRAG]: drag,\n    [ACTIONNAMES.HOVER]: hover,\n    [ACTIONNAMES.CLICK]: click\n};\n\n","export const DRAG = 'drag';\nexport const HOVER = 'hover';\nexport const SELECTIONDRAG = 'selectiondrag';\nexport const CLICK = 'click';\n","import {\n    getMousePos,\n    getEvent,\n    getD3Drag\n } from 'muze-utils';\nimport { HEIGHT, WIDTH, HORIZONTAL } from '../../enums/constants';\n\nconst getSelectionCriteria = (subject, axis, measures) => {\n    let criteria = [];\n    const {\n        axisScale,\n        axisType\n    } = axis;\n    const {\n        startPos,\n        endPos,\n        selectionBoxMeasure,\n        drawingInfMeasure,\n        offset\n    } = measures;\n    const subjectStartPoint = subject[axisType];\n\n    if (startPos[axisType] === endPos[axisType]) {\n        criteria = [];\n    } else if (subjectStartPoint + selectionBoxMeasure >= drawingInfMeasure + offset) {\n        criteria = [axisScale.invert(drawingInfMeasure + offset - selectionBoxMeasure),\n            axisScale.invert(drawingInfMeasure + offset)];\n    } else if (subjectStartPoint - offset < offset) {\n        criteria = [axisScale.invert(offset * 2), axisScale.invert(selectionBoxMeasure + offset * 2)];\n    } else {\n        criteria = [axisScale.invert(subjectStartPoint), axisScale.invert(subjectStartPoint + selectionBoxMeasure)];\n    }\n    axisType === 'x' ? criteria : criteria.reverse();\n    return criteria;\n};\n\nexport const selectionBoxDrag = firebolt => (targetEl, behaviours) => {\n    let startPos = {};\n    let payload;\n    const endPos = {};\n    const d3Drag = getD3Drag();\n    const context = firebolt.context;\n    const axisScale = context.axis().source().scale();\n    const axisType = context.config().align === HORIZONTAL ? 'x' : 'y';\n    const drawingInfMeasure = context.measurement().gradientDimensions[axisType === 'x' ?\n        WIDTH : HEIGHT];\n    const offset = axisScale.range()[axisType === 'x' ? 0 : 1];\n    const measures = {\n        drawingInfMeasure,\n        offset\n    };\n    let subject = {};\n\n    targetEl.call(d3Drag().on('start', function () {\n        const event = getEvent();\n        startPos = getMousePos(this, event.sourceEvent);\n        subject = event.subject;\n    }).on('drag', () => {\n        const event = getEvent();\n        const selectionBoxMeasure = subject[axisType === 'x' ? WIDTH : HEIGHT];\n\n        subject.x += event.dx;\n        subject.y += event.dy;\n\n        measures.selectionBoxMeasure = selectionBoxMeasure;\n        measures.startPos = startPos;\n        measures.endPos = endPos;\n        const criteria = getSelectionCriteria(subject, { axisScale, axisType }, measures);\n\n        payload = {\n            criteria: {\n                [context.fieldName()]: criteria\n            },\n            fadeOut: true\n        };\n        firebolt.dispatchBehaviour(behaviours[0], payload);\n    }).on('end', () => {\n        const event = getEvent();\n        const selectionBoxMeasure = subject[axisType === 'x' ? WIDTH : HEIGHT];\n        measures.selectionBoxMeasure = selectionBoxMeasure;\n        measures.startPos = startPos;\n        measures.endPos = endPos;\n        const criteria = getSelectionCriteria(event, { axisScale, axisType }, measures);\n        payload = {\n            criteria: {\n                [context.fieldName()]: criteria\n            },\n            fadeOut: true,\n            config: {\n                transition: {\n                    duration: 200\n                }\n            }\n        };\n        firebolt.dispatchBehaviour(behaviours[0], payload);\n    }));\n};\n\n","import { getSymbol, mergeRecursive } from 'muze-utils';\nimport {\n    CENTER,\n    LEFT,\n    RIGHT\n} from '../enums/constants';\n\nexport const ALIGN = {\n    HORIZONTAL: 'horizontal',\n    VERTICAL: 'vertical'\n};\n\nexport const DEFAULT_MEASUREMENT = {\n    height: 30,\n    width: 30,\n    maxWidth: Infinity,\n    maxHeight: Infinity,\n    padding: 2,\n    margin: 2,\n    marginHorizontal: 3,\n    paddingRight: 4,\n    border: 1\n};\n\nexport const LEGEND_TITLE = {\n    text: '',\n    orientation: (pos) => {\n        if (pos === LEFT || pos === RIGHT) {\n            return LEFT;\n        } return CENTER;\n    }\n};\n\nexport const DEFAULT_CONFIG = {\n    buffer: {\n        [ALIGN.HORIZONTAL]: 10,\n        [ALIGN.VERTICAL]: 10\n    },\n    classPrefix: 'muze',\n    borderStyle: 'solid',\n    borderColor: 'rgba(0,0,0,0)',\n    formatter: {\n        bounds: {\n            lower: 'less than',\n            upper: 'more than'\n        }\n    },\n    marker: {\n        text: {\n            formatter: data => data\n        }\n    },\n    item: {\n        text: {\n            orientation: 'right',\n            width: 10,\n            formatter: (val, i, data, context) => context.valueParser()(val)\n        },\n        icon: {\n            className: 'legend-icon',\n            height: 20,\n            width: 20,\n            color: 'rgba(192,192,192,0.6)',\n            type: 'square'\n        }\n    }\n    // stops: 5\n};\n\nconst tempConfig = mergeRecursive({}, DEFAULT_CONFIG);\n\nconst ITEM_FORMATTER = {\n    item: {\n        text: {\n            formatter: val => `${val[0]} - ${val[1]}`\n        }\n    }\n};\n\nexport const STEP_DEFAULT_CONFIG = mergeRecursive(tempConfig, ITEM_FORMATTER);\n\n/**\n * Creates a map of pre defined icons\n *\n * @param {string} icon Accepts a icon name like 'square', 'cross', 'diamond' etc\n * @return {Object} icon object which can be used to draw the icons\n */\nexport const ICON_MAP = (icon) => {\n    if (icon && typeof (icon) === 'string') {\n        return getSymbol(icon);\n    } return icon;\n};\n\nexport const LEGEND_MARKER_PROPS = {\n    size: 8,\n    BUFFER: 4,\n    ROTATE_HORIZONTAL: 180,\n    ROTATE_VERTICAL: 90,\n    shape: 'triangle'\n};\n","import { makeElement } from 'muze-utils';\nimport { SpawnableSideEffect } from '@chartshq/muze-firebolt';\nimport { CLASSPREFIX, HEIGHT, WIDTH, HORIZONTAL, RECT } from '../../../enums/constants';\nimport { SELECTIONBOX } from '../../../enums/side-effects';\nimport { selectionBoxDrag } from '../../physical/selection-box-drag';\nimport { LEGEND_MARKER_PROPS } from '../../../legend/defaults';\nimport './styles.scss';\n\n/**\n * This class is used to create a selection box which is used by visual unit for brushing and\n * selection in the canvas.\n * @class SelectionBox\n */\n/* istanbul ignore next */ class SelectionBox extends SpawnableSideEffect {\n    constructor (...params) {\n        super(...params);\n        this._graphicElems = {\n            rect: null\n        };\n    }\n\n    static formalName () {\n        return SELECTIONBOX;\n    }\n\n    /**\n     * It returns the default configuration needed by selectionbox.\n     * @return {Object} Default configuration of the selection box.\n     */\n    static defaultConfig () {\n        return {\n            className: 'legend-selection-box',\n            classPrefix: CLASSPREFIX\n        };\n    }\n\n    /**\n     * Draws the selectionbox with the specified dimensions.\n     */\n    /* istanbul ignore next */ apply (selectionSet, payload) {\n        let x;\n        let y;\n        let width;\n        let height;\n        const firebolt = this.firebolt;\n        const context = firebolt.context;\n        const config = this.config();\n        const axis = context.axis().source();\n        const className = `${config.classPrefix}-${config.className}`;\n        const { criteria } = payload;\n        const { rect } = this._graphicElems;\n\n        if (criteria === null) {\n            rect && rect.remove();\n            return this;\n        }\n\n        const domain = criteria[firebolt.context.fieldName()];\n        const axisScale = axis.scale();\n        const range = domain ? [axis.getScaleValue(domain[0]), axis.getScaleValue(domain[1])] : [];\n\n        const axisType = context.config().align === HORIZONTAL ? 'x' : 'y';\n\n        const gradientDimension = firebolt.context.measurement().gradientDimensions[axisType === 'x' ?\n            HEIGHT : WIDTH];\n\n        const rangeShifter = axisScale.range()[axisType === 'x' ? 0 : 1];\n        const legendGradContainer = context.getDrawingContext().svgContainer;\n        const legendSelGroup = makeElement(legendGradContainer, 'g', [1],\n            `${config.classPrefix}-selection-box-group`);\n\n        const { size, BUFFER } = LEGEND_MARKER_PROPS;\n        if (firebolt.context.config().align === HORIZONTAL) {\n            x = range[0] - rangeShifter || 0;\n            y = size + BUFFER;\n            width = range[1] - range[0] || 0;\n            height = gradientDimension;\n        } else {\n            x = size + BUFFER;\n            y = range[1] - rangeShifter || 0;\n            height = range[0] - range[1] || 0;\n            width = gradientDimension;\n        }\n        const enterFn = function (el) {\n            selectionBoxDrag(firebolt)(el, ['brush']);\n        };\n\n        const selBox = makeElement(legendSelGroup, RECT, [{ domain, x, y, width, height }], className,\n            { enter: enterFn });\n        selBox.attr('y', y)\n                        .attr('x', x)\n                        .attr(WIDTH, width)\n                        .attr(HEIGHT, height);\n        this._graphicElems.rect = selBox;\n        return this;\n    }\n}\n\nexport default SelectionBox;\n\n","import { selectElement } from 'muze-utils';\n\nexport const strategies = (firebolt) => {\n    const context = firebolt.context;\n    const classed = (set, className, change) => {\n        const classPrefix = context.config().classPrefix;\n        const uids = set.uids.map(d => d[0]);\n        selectElement(context.mount())\n                        .selectAll(`.${classPrefix}-legend-columns`)\n                        .filter(d => uids.indexOf(d.id) !== -1)\n                        .selectAll('div')\n                        .classed(className, change);\n    };\n\n    return {\n        fade: (set, config = {}) => {\n            const classPrefix = context.config().classPrefix;\n            if (!set.mergedEnter.length && !set.mergedExit.length) {\n                classed(set.completeSet, config.className || `${classPrefix}-legend-fadeout`, false);\n            } else {\n                classed(set.mergedExit, config.className || `${classPrefix}-legend-brighten`, false);\n                classed(set.mergedExit, config.className || `${classPrefix}-legend-fadeout`, true);\n                classed(set.mergedEnter, config.className || `${classPrefix}-legend-fadeout`, false);\n            }\n        },\n        brighten: (set, config = {}) => {\n            const classPrefix = context.config().classPrefix;\n            if (!set.mergedEnter.length && !set.mergedExit.length) {\n                classed(set.completeSet, config.className || `${classPrefix}-legend-brighten`, false);\n            } else {\n                classed(set.mergedEnter, config.className || `${classPrefix}-legend-brighten`, true);\n                classed(set.mergedExit, config.className || `${classPrefix}-legend-brighten`, false);\n            }\n        }\n    };\n};\n","import { GenericSideEffect } from '@chartshq/muze-firebolt';\nimport { strategies } from './strategies';\nimport { Highlighter } from '../../../enums/side-effects';\n\nexport default class LegendHighlighter extends GenericSideEffect {\n    constructor (...params) {\n        super(...params);\n        this._strategies = strategies(this.firebolt);\n        this._strategy = 'brighten';\n    }\n\n    static formalName () {\n        return Highlighter;\n    }\n\n    apply (selectionSet, payload, options = {}) {\n        const strategy = this._strategies[options.strategy || this._strategy];\n\n        strategy(selectionSet, this);\n    }\n}\n","import { GenericSideEffect } from '@chartshq/muze-firebolt';\nimport { makeElement, getSymbol } from 'muze-utils';\nimport { Marker } from '../../../enums/side-effects';\nimport { CLASSPREFIX, HORIZONTAL } from '../../../enums/constants';\nimport { LEGEND_MARKER_PROPS } from '../../../legend/defaults';\nimport './styles.scss';\n\nconst SYMBOL_PADDING = (Math.sqrt(3) * 3);\nconst AXIS_STROKE = 1;\nconst MARKER_BUFFER = 10;\n\nconst createTextCell = (className, labelManagerRef, cells) => {\n    const { TextCell } = cells;\n    const cell = new TextCell(\n        {\n            type: 'text',\n            className: `${className}-text`\n        }, {\n            labelManager: labelManagerRef()\n        }).config({ maxLines: 1 });\n    cell._minTickDiff = { height: 0, width: 0 };\n\n    return cell;\n};\n\nconst getRelativePosition = (canvas, legendContainer) => ({\n    top: legendContainer.getBoundingClientRect().top - canvas.getBoundingClientRect().top,\n    left: legendContainer.getBoundingClientRect().left - canvas.getBoundingClientRect().left\n});\nexport default class LegendMarker extends GenericSideEffect {\n    constructor (...params) {\n        super(...params);\n        this._graphicElements = {\n            markerElement: null,\n            legendmarkerTextContainer: null,\n            legendmarkerText: null\n        };\n    }\n\n    static formalName () {\n        return Marker;\n    }\n\n      /**\n     * It returns the default configuration needed by legend-marker.\n     * @return {Object} Default configuration of the legend-marker.\n     */\n    static defaultConfig () {\n        return {\n            className: 'legend-marker',\n            classPrefix: CLASSPREFIX,\n            size: LEGEND_MARKER_PROPS.size,\n            shape: LEGEND_MARKER_PROPS.shape\n        };\n    }\n\n    apply (selectionSet, payload) {\n        const className = `${this.config().classPrefix}-${this.config().className}`;\n        if (payload.criteria && payload.criteria.length === 2) {\n            const physicalAction = function () {\n            // Register physical action on marker gere\n            };\n            const firebolt = this.firebolt;\n            const labelManager = firebolt.context.labelManager;\n            const context = firebolt.context;\n            const legendConfig = firebolt.context.config();\n            const legendScale = firebolt.context.scale();\n            const { formatter: pointerTextFormatter } = legendConfig.marker.text;\n            const config = this.config();\n            const axis = context.axis().source();\n            const dm = context.metaData();\n            const domain = legendScale.domain();\n\n            const range = payload.criteria[0] ? axis.getScaleValue(payload.criteria[1]) : 0;\n\n            const legendGradContainer = context.getDrawingContext().svgContainer;\n\n            const isFractional = payload.criteria[1][0] % 1 !== 0;\n\n            const lableConfig = {\n                top: 0,\n                left: 0,\n                labelText: isFractional ? payload.criteria[1][0].toFixed(2) : payload.criteria[1][0]\n            };\n\n            const { top, left } = getRelativePosition(context._canvasMount, legendGradContainer.node());\n            const { oriTextHeight, oriTextWidth } = labelManager().getSmartText(lableConfig.labelText);\n            let x;\n            let y;\n            let rotateAngle;\n\n            const { size, shape } = config;\n            if (context.config().align === HORIZONTAL) {\n                x = range - (Math.sqrt(size / SYMBOL_PADDING)) + AXIS_STROKE;\n                y = 5;\n                rotateAngle = LEGEND_MARKER_PROPS.ROTATE_HORIZONTAL;\n                lableConfig.top = top + y - 3 * MARKER_BUFFER;\n                lableConfig.left = x + left - (oriTextWidth / 2) - (MARKER_BUFFER / 2);\n            } else {\n                y = range + Math.sqrt(size / (2 * SYMBOL_PADDING)) - AXIS_STROKE;\n                x = 5;\n                rotateAngle = LEGEND_MARKER_PROPS.ROTATE_VERTICAL;\n                lableConfig.top = top + y - (3 * MARKER_BUFFER - 2) + (oriTextHeight / 2);\n                lableConfig.left = x + left - oriTextWidth - MARKER_BUFFER;\n            }\n\n            const legendmarkerGroup = makeElement(legendGradContainer,\n                                                'g',\n                                                [1],\n                                                `${config.classPrefix}-${config.className}-group`);\n\n            if (!this._graphicElements.markerElement) {\n                this._graphicElements.markerElement = makeElement(legendmarkerGroup,\n                                    'path', [{ value: null }], className, { enter: physicalAction });\n            }\n\n            if (!this._graphicElements.legendmarkerTextContainer) {\n                this._graphicElements.legendmarkerTextContainer = makeElement(\n                                                    context._canvasMount,\n                                                    'div',\n                                                    [1],\n                                                    `${className}-text-container`);\n                this._graphicElements.legendmarkerText = makeElement(\n                                                    this._graphicElements.legendmarkerTextContainer,\n                                                    'div',\n                                                    [1],\n                                                    `${className}-text`);\n            }\n            const textElement = createTextCell(className, labelManager, context._cells);\n            this._graphicElements.markerElement\n                    .data([{ value: payload.criteria }])\n                    .attr('transform', `translate(${x},${y}) rotate(${rotateAngle})`)\n                    .attr('d', getSymbol(shape).size(size * size)())\n                    .classed(`${className}-show`, true)\n                    .classed(`${className}-hide`, false);\n\n            // pointer label formatter\n            textElement.source(pointerTextFormatter(lableConfig.labelText, domain, dm));\n\n            textElement.render(this._graphicElements.legendmarkerText.node());\n            this._graphicElements.legendmarkerText\n                        .attr('style', `top: ${lableConfig.top}px; left:${lableConfig.left}px`)\n                                     .classed(`${className}-show`, true)\n                                     .classed(`${className}-hide`, false);\n        } else if (this._graphicElements.markerElement && this._graphicElements.legendmarkerText) {\n            this._graphicElements.markerElement\n                .data([{ value: null }])\n                .classed(`${className}-show`, false)\n                .classed(`${className}-hide`, true);\n            this._graphicElements.legendmarkerText\n                .classed(`${className}-show`, false)\n                .classed(`${className}-hide`, true);\n        }\n    }\n\n}\n","import { mergeRecursive } from 'muze-utils';\n\nexport const PROPS = {\n    config: {\n        sanitization: (context, value) => mergeRecursive(context._config || {}, value)\n    },\n    data: {},\n    fieldName: {},\n    legendContainer: {},\n    measurement: {\n        sanitization: (context, value) => {\n            const measurement = mergeRecursive(context._measurement, value);\n            ['padding', 'border', 'margin'].forEach((space) => {\n                measurement[space] = Math.min(measurement[space] > 0 ? measurement[space] : 0,\n                     measurement.maxWidth * 0.1, measurement.maxHeight * 0.1);\n            });\n            return measurement;\n        }\n    },\n    logicalSpace: {},\n    metaData: {\n        onset: (context, value) => context.firebolt().attachPropagationListener(value)\n    },\n    range: {\n        sanitization: (context, value) => {\n            context.scale().range(value);\n            context.resetLogicalSpace();\n            context.store().commit('range', value);\n            return value;\n        }\n    },\n    scale: {},\n    smartTicks: {},\n    store: {},\n    title: {\n        sanitization: (context, value) => mergeRecursive(context._title || {}, value)\n    },\n    labelManager: {},\n    minTickDistance: {},\n    valueParser: {\n        defaultValue: val => val\n    }\n};\n","import { makeElement, FieldType, getReadableTicks } from 'muze-utils';\n\nimport {\n    SCALE_FUNCTIONS,\n    WIDTH,\n    HEIGHT,\n    LEFT,\n    RIGHT,\n    TOP,\n    BOTTOM,\n    MAXWIDTH,\n    CENTER,\n    HORIZONTAL,\n    POSITION_ALIGNMENT_MAP\n} from '../enums/constants';\n\n/**\n *\n *\n * @param {*} scale\n *\n */\nexport const getScaleInfo = (scale) => {\n    const scaleType = scale.constructor.type();\n    const domain = scale.uniqueValues();\n    const steps = scale.config().stops || 1;\n    const scaleFn = SCALE_FUNCTIONS[scaleType];\n\n    return { scaleType, domain, steps, scaleFn };\n};\n\n/**\n * Function to recompute the stops in array in case to left and right alignment of legend.\n *\n * @param  {string} param - parameter to measure\n * @param  {Object} requiredMeasure - required measure parameters\n * @param  {Object} availableMeasure - available meassure parameters\n * @param  {Array} domainForLegend - array\n * @param  {Object} smartLabelCalc - smartLabel Manager\n * @return {Array} - Array\n */\nconst getcomputedArray = (computationhelper, requiredMeasure, availableMeasure, domainForLegend) => {\n    // declaring Current and Next Tick Value variable\n    let currentTickValue;\n    let nextTickValue;\n    const upperBound = domainForLegend[domainForLegend.length - 1];\n    const param = computationhelper.measureParam;\n    const smartLabelCalc = computationhelper.smartLabelCalc;\n\n    // calculating pixel required per Tick Values\n    const pixelPerTick = (availableMeasure[param] / upperBound);\n\n    // checking if available max width is smaller than required width for legend.\n    if (availableMeasure[param] >= requiredMeasure[param]) {\n        return domainForLegend;\n    }\n\n    currentTickValue = (smartLabelCalc.getOriSize((domainForLegend[0]))[param]);\n    for (let i = 1; i < domainForLegend.length - 1; i++) {\n        nextTickValue = Math.floor((currentTickValue / pixelPerTick) + domainForLegend[i - 1]);\n        if (domainForLegend[i] < nextTickValue) {\n            domainForLegend.splice(i, 1);\n            i -= 1;\n        }\n        currentTickValue = (smartLabelCalc.getOriSize((domainForLegend[i]))[param]);\n    }\n    return domainForLegend;\n};\n\n/**\n * function to recompute the Stops Array provided to prevent the Overlapping of values\n * @param  {Array} domainForLegend - Stops Array\n * @param  {Object} scaleParams - Scale Parameters\n * @return {Array} - modified Stops Array\n */\nexport const getInterpolatedArrayData = (domainForLegend, scaleParams) => {\n    // defining param for height/width selector\n    let measureParam;\n\n    // declaring variable for required Width\n    let requiredWidth;\n\n    // declaring variable for required height\n    let requiredHeight;\n\n    // declaring the variable for upperbound\n    let upperBound = domainForLegend[domainForLegend.length - 1];\n\n    // Initializing Minimum Tick Difference Variable and checking if it's less than 1 or not\n    let minTickDiff = Math.ceil(domainForLegend[1] - domainForLegend[0]);\n\n    // calculating max tick difference\n    const maxTickDiff = Math.ceil(upperBound - domainForLegend[0]);\n\n    // gradient Alignment\n    const { alignment } = scaleParams;\n\n    // getting SmartLabel Manager to calculate tick Params\n    const smartLabelCalc = scaleParams.smartLabel;\n\n    // scale Measurements (i.e MaxWidth and MaxHeight available)\n    const availableSpace = scaleParams.measures;\n\n    // getting minimum Tick size (i.e height and width)\n    const minimumTickSize = scaleParams.minTickDistance;\n\n    // getting domain upperbound dimensions\n    const { height: tickDimHeight, width: tickDimWidth } = smartLabelCalc.getOriSize((upperBound));\n\n    /* Checking if UpperBound of Domain is Floating or Not.\n    In case of floating constricting it to 2 decimals after point. */\n    if (!Number.isInteger(upperBound)) {\n        upperBound = ((upperBound).toFixed(2));\n    }\n\n    // Calculating minimum tick difference\n    minTickDiff = minTickDiff < 1 ? 1 : minTickDiff;\n\n    // required width to render legend\n    requiredWidth = (Math.abs(maxTickDiff) / Math.abs(minTickDiff)) * (tickDimWidth + (minimumTickSize.width));\n\n    requiredWidth -= Math.abs(maxTickDiff);\n\n    // require height to render legend\n    requiredHeight = (Math.abs(maxTickDiff) / Math.abs(minTickDiff)) * tickDimHeight;\n\n    requiredHeight -= Math.abs(maxTickDiff);\n\n    // checking the alignment of legend\n    if (alignment === TOP || alignment === BOTTOM) {\n        measureParam = WIDTH;\n    } else {\n        measureParam = HEIGHT;\n    }\n\n    // calculating computed array\n    domainForLegend = getcomputedArray({\n        smartLabelCalc,\n        measureParam\n    }, {\n        height: requiredHeight,\n        width: requiredWidth\n    }, {\n        height: availableSpace.maxHeight,\n        width: availableSpace.maxWidth\n    }, domainForLegend);\n\n    return domainForLegend;\n};\n\n/**\n * function to recalculate steps on providing more number of stops than canvas can accomodate.\n * @param  {Array} domain - Array\n * @param  {Array} steps - Array\n * @param  {Object} scaleParams - Scale Parameters\n * @return {Array} - recalculated Step Array\n */\nexport const getInterpolatedData = (domain, steps, scaleParams) => {\n    // declaring recomputeSteps Variable\n    let recomputeSteps = 0;\n\n    const getTickMeasure = scaleParams.smartLabel;\n    const { maxWidth, maxHeight } = scaleParams.measures;\n    const { alignment } = scaleParams;\n    // getting tick measure(i.e height and width)\n    const tickValue = getTickMeasure.getOriSize(domain[1].toFixed(2));\n\n    // To round the floating values to Integer and checking if value is 1.\n    steps = Math.round(steps);\n    steps = steps < 1 ? (steps + 1) : steps;\n\n    // checking alignment of the Axis\n    if (alignment === TOP || alignment === BOTTOM) {\n        recomputeSteps = Math.floor(maxWidth / (tickValue.width));\n    } else {\n        recomputeSteps = Math.floor(maxHeight / (tickValue.height));\n    }\n    steps = Math.min(steps, recomputeSteps);\n\n    return getReadableTicks(domain, steps);\n};\n\n/**\n *\n *\n * @param {*} container\n * @param {*} text\n * @param {*} measurement\n * @param {*} classPrefix\n */\nexport const titleCreator = (container, title, measurement, config) => {\n    const { orientation } = config.item.text;\n    let textAlign = LEFT;\n    const { alignment, maxWidth, width, height, border, padding } = measurement;\n\n    if (orientation === TOP || orientation === BOTTOM || alignment === HORIZONTAL) {\n        textAlign = CENTER;\n    }\n    const titleWidth = Math.min(maxWidth, width);\n\n    const titleContainer = makeElement(container, 'table', [1], `${config.classPrefix}-legend-title`)\n            .style(WIDTH, `${titleWidth}px`)\n            .style(HEIGHT, `${height}px`)\n            .style('border-bottom', `${border}px ${config.borderStyle} ${config.borderColor}`)\n            .style('text-align', title.orientation instanceof Function ?\n            title.orientation(config.position) : title.orientation);\n    return makeElement(titleContainer, 'td', [1], `${config.classPrefix}-legend-title-text`)\n                    .style(WIDTH, `${titleWidth}px`)\n                    .style(MAXWIDTH, `${maxWidth}px`)\n                    .style(HEIGHT, '100%')\n                    .style('line-height', 1)\n                    .style('padding', `${padding}px`)\n                    .text(title.text)\n                    .style('text-align', textAlign)\n                    .style('overflow-x', 'scroll')\n                    .node();\n};\n\n/**\n *\n *\n * @param {*} data\n * @param {*} prop\n * @param {*} labelManager\n *\n */\nexport const getMaxMeasures = (data, prop, labelManager) => {\n    let maxHeight = -Infinity;\n    let maxWidth = -Infinity;\n\n    data.forEach((item) => {\n        const value = prop ? item[prop] : item;\n        const space = labelManager.getOriSize(value);\n        maxHeight = Math.max(space.height + 2, maxHeight);\n        maxWidth = Math.max(space.width + 2, maxWidth);\n    });\n\n    return { height: maxHeight, width: maxWidth };\n};\n\n/**\n *\n *\n * @param {*} data\n * @param {*} prop\n * @param {*} labelManager\n *\n */\nexport const getItemMeasures = (context, prop, formatter) => {\n    const space = [];\n    const data = context.data();\n    const labelManager = context._labelManager;\n\n    data.forEach((item, index) => {\n        const value = prop ? item[prop] : item;\n        const formattedData = formatter(value, index, context.metaData(), context);\n        const { height, width } = labelManager.getOriSize(formattedData);\n        space[index] = { height, width };\n    });\n    return space;\n};\n\n/**\n *\n *\n * @param {*} textOrientation\n * @param {*} effPadding\n * @param {*} titleSpace\n *\n * @memberof Legend\n */\nexport const computeItemSpaces = (config, measures, data) => {\n    let totalHeight = 0;\n    let totalWidth = 0;\n    let maxItemSpaces = {\n        width: 0, height: 0\n    };\n    const {\n        effPadding,\n        titleWidth,\n        labelSpaces,\n        titleHeight,\n        maxWidth\n    } = measures;\n    const {\n        item,\n        align\n    } = config;\n    const {\n        icon,\n        text\n    } = item;\n    const textOrientation = text.orientation;\n    const itemSpaces = [];\n    const iconSpaces = [];\n    let maxIconWidth = 0;\n    labelSpaces.forEach((labelSpace, i) => {\n        const itemSpace = { width: 0, height: 0 };\n        const iconSpace = { width: 0, height: 0 };\n        const datum = data[i] || {};\n            // Compute each legend item height/width\n        if (textOrientation === LEFT || textOrientation === RIGHT) {\n            // Get label, icon and item widths\n            labelSpace.width += effPadding;\n            iconSpace.width = (datum.size ? 2 * Math.sqrt(datum.size / Math.PI) : icon.width) + effPadding;\n            maxIconWidth = Math.max(iconSpace.width, maxIconWidth);\n            itemSpace.width = labelSpace.width + maxIconWidth;\n\n            // Get label, icon and item heights\n            labelSpace.height = Math.max(labelSpace.height, icon.height) + effPadding;\n            iconSpace.height = labelSpace.height;\n            itemSpace.height = labelSpace.height;\n        } else {\n            // Get label, icon and item widths\n            labelSpace.width = Math.max(labelSpace.width, datum.size ? 2 * Math.sqrt(datum.size / Math.PI)\n            : icon.width) + effPadding;\n            iconSpace.width = labelSpace.width;\n            itemSpace.width = labelSpace.width;\n            maxIconWidth = Math.max(iconSpace.width, maxIconWidth);\n\n            // Get label, icon and item heights\n            labelSpace.height += effPadding;\n            iconSpace.height = icon.height + effPadding;\n            itemSpace.height = labelSpace.height + iconSpace.height;\n        }\n        // Compute height and width of legend for each alignment\n        if (align === 'horizontal') {\n            totalHeight = Math.max(totalHeight, itemSpace.height);\n        } else {\n            totalHeight += itemSpace.height;\n            totalWidth = Math.max(totalWidth, itemSpace.width, titleWidth);\n        }\n        maxItemSpaces = {\n            width: Math.max(itemSpace.width, maxItemSpaces.width),\n            height: Math.max(itemSpace.height, maxItemSpaces.height)\n        };\n        itemSpaces.push(itemSpace);\n        iconSpaces.push(iconSpace);\n    });\n\n    itemSpaces.forEach((itemSpace, i) => {\n        if (align === 'horizontal') {\n            itemSpace.height = totalHeight;\n            // iconSpaces[i].width = maxIconWidth;\n            if (textOrientation === LEFT || textOrientation === RIGHT) {\n                labelSpaces[i].height = totalHeight;\n                iconSpaces[i].height = totalHeight;\n                itemSpaces[i].width = labelSpaces[i].width + iconSpaces[i].width + 2 * effPadding;\n            } else {\n                labelSpaces[i].width = iconSpaces[i].width;\n                itemSpaces[i].width = iconSpaces[i].width;\n                labelSpaces[i].width = iconSpaces[i].width;\n            }\n            totalWidth += itemSpaces[i].width;\n        } else {\n            itemSpace.width = Math.max(totalWidth, maxWidth);\n            if (textOrientation === TOP || textOrientation === BOTTOM) {\n                labelSpaces[i].width = totalWidth;\n                iconSpaces[i].width = totalWidth;\n                maxIconWidth = totalWidth;\n            } else {\n                const labelWidth = labelSpaces[i].width;\n                const newLabelWidth = (maxItemSpaces.width - maxIconWidth);\n                iconSpaces[i].width = maxIconWidth;\n                itemSpaces[i].width = labelWidth + maxIconWidth;\n                labelSpaces[i].width = Math.max(labelWidth, newLabelWidth);\n                totalWidth = Math.max(totalWidth, itemSpace.width);\n            }\n        }\n    });\n    totalWidth = Math.ceil(Math.max(totalWidth, titleWidth)) + effPadding;\n    totalHeight += titleHeight + effPadding;\n    totalHeight = Math.ceil(totalHeight);\n    return { totalHeight, totalWidth, itemSpaces, iconSpaces, maxItemSpaces, maxIconWidth };\n};\n\n/**\n *\n *\n * @param {*} type\n * @param {*} scaleInfo\n * @param {*} domainInfo\n *\n */\nexport const getDomainBounds = (type, scaleInfo, domainInfo) => {\n    const {\n        scaleFn,\n        scaleType,\n        scale\n    } = scaleInfo;\n    const {\n        domain,\n        domainBounds,\n        domainLeg,\n        steps\n    } = domainInfo;\n    const ele = domain[type === 'lower' ? 0 : domain.length - 1];\n    const step = steps[type === 'lower' ? 0 : steps.length - 1];\n\n    return {\n        [scaleType]: scaleType === 'size' ? scale[scaleFn](ele) * scale.getScaleFactor() : scale[scaleFn](ele),\n        value: domainBounds[type],\n        id: type === 'lower' ? 0 : domainLeg.length + 2,\n        range: [ele, step]\n    };\n};\n\nexport const prepareSelectionSetData = (data, fieldName, dm) => {\n    const fieldType = dm.getFieldsConfig()[fieldName].def.type;\n    if (fieldType === FieldType.DIMENSION) {\n        return {\n            keys: data.reduce((acc, d) => {\n                acc[d.rawVal] = {\n                    uid: d.id,\n                    dims: [d.rawVal]\n                };\n                return acc;\n            }, {}),\n            fields: [fieldName]\n        };\n    }\n    return {\n        keys: data.reduce((acc, d) => {\n            acc[d.id] = {\n                uid: d.id,\n                dims: [d.id]\n            };\n            return acc;\n        }, {}),\n        fields: [fieldName]\n    };\n};\n\nexport const calculateTitleWidth = (measures, titleWidth, config) => {\n    const { maxItemSpaces, margin, itemSpaces } = measures;\n    const { position, buffer } = config;\n    const alignment = POSITION_ALIGNMENT_MAP[position];\n    let width = 0;\n\n    if (alignment === HORIZONTAL) {\n        const localBuffer = buffer[alignment];\n        width = itemSpaces.reduce((acc, cur) => acc + cur.width + localBuffer, 0);\n    } else if (maxItemSpaces.width < titleWidth) {\n        width = titleWidth + 2 * margin;\n    } else {\n        width = maxItemSpaces.width;\n    }\n    return width;\n};\n","import {\n    makeElement,\n    selectElement,\n    getUniqueId,\n    getSmartComputedStyle,\n    generateGetterSetters,\n    mergeRecursive\n} from 'muze-utils';\nimport * as legendBehaviours from '../firebolt/behavioural';\n\nimport { LegendFireBolt } from '../firebolt/legend-firebolt';\nimport { actionBehaviourMap } from '../firebolt/action-behaviour-map';\nimport { physicalActions } from '../firebolt/physical';\nimport * as sideEffects from '../firebolt/side-effects';\nimport { behaviourEffectMap } from '../firebolt/behaviour-effect-map';\nimport { VALUE, PATH, RIGHT, LEFT, TOP, BOTTOM, POSITION_ALIGNMENT_MAP } from '../enums/constants';\nimport { PROPS } from './props';\nimport { DEFAULT_MEASUREMENT, DEFAULT_CONFIG, LEGEND_TITLE } from './defaults';\nimport {\n    getItemMeasures,\n    titleCreator,\n    computeItemSpaces,\n    prepareSelectionSetData,\n    calculateTitleWidth\n} from './legend-helper';\n\n/**\n * Creates a Legend from the axes of a canvas\n *\n * @param {Object} dependencies : legend data\n * @class SimpleLegend\n */\nexport default class SimpleLegend {\n\n    /**\n     * Creates an instance of Legend.\n     * @param {Object} dependencies Set of dependencies required by the legend\n     * @memberof Legend\n     */\n    constructor (dependencies) {\n        const { interactions } = dependencies.registry;\n        this._data = [];\n        this._metaData = [];\n        this._mount = null;\n        this._fieldName = null;\n        this._title = Object.assign({}, LEGEND_TITLE);\n        this._metaData = null;\n        this._labelManager = dependencies.labelManager;\n        this._cells = dependencies.cells;\n        this._id = getUniqueId();\n        this._measurement = Object.assign({}, this.constructor.defaultMeasurement());\n        this._config = mergeRecursive({}, this.constructor.defaultConfig());\n\n        const dist = dependencies.labelManager.getOriSize('w');\n        this._minTickDistance = { width: dist.width * 3 / 4, height: dist.height / 2 };\n\n        generateGetterSetters(this, PROPS);\n        this._computedStyle = getSmartComputedStyle(selectElement('body'),\n            `${this.config().classPrefix}-legend-item-info`);\n\n        this._firebolt = new LegendFireBolt(this, {\n            behavioural: Object.assign({}, interactions.behaviours.get(), legendBehaviours),\n            physical: physicalActions,\n            physicalBehaviouralMap: actionBehaviourMap\n        }, sideEffects, behaviourEffectMap);\n    }\n\n    id () {\n        return this._id;\n    }\n    /**\n     * Initializes an instance of the class\n     *\n     * @static\n     * @param {Object} dependencies Set of dependencies required by the legend\n     * @return {Instance} returns a new instance of Legend\n     * @memberof Legend\n     */\n    static create (dependencies) {\n        return new SimpleLegend(dependencies);\n    }\n\n    /**\n     *\n     *\n     * @static\n     *\n     * @memberof SimpleLegend\n     */\n    static defaultConfig () {\n        return DEFAULT_CONFIG;\n    }\n\n    /**\n     *\n     *\n     * @static\n     *\n     * @memberof SimpleLegend\n     */\n    static defaultMeasurement () {\n        return DEFAULT_MEASUREMENT;\n    }\n\n    /**\n     *\n     *\n     * @readonly\n     * @memberof SimpleLegend\n     */\n    firebolt (...params) {\n        if (params.length) {\n            return this;\n        }\n        return this._firebolt;\n    }\n\n    /**\n     *\n     *\n     *\n     * @memberof Legend\n     */\n    elemType () {\n        return PATH;\n    }\n\n    canvasAlias (...alias) {\n        if (alias.length) {\n            this._canvasAlias = alias[0];\n            return this;\n        }\n        return this._canvasAlias;\n    }\n\n    /**\n     *\n     *\n     *\n     * @memberof Legend\n     */\n    mount (...params) {\n        if (params.length) {\n            this._mount = params[0];\n            this.render();\n            return this;\n        }\n        return this._mount;\n    }\n\n    /**\n     *\n     *\n     * @param {*} effPadding\n     * @param {*} align\n     *\n     * @memberof Legend\n     */\n    getLabelSpaces () {\n        const {\n            item,\n            classPrefix\n        } = this.config();\n        this._labelManager.setStyle(getSmartComputedStyle(selectElement('body'),\n            `${classPrefix}-legend-item-info`));\n        return getItemMeasures(this, VALUE, item.text.formatter);\n    }\n\n    /**\n     * Sets the height and width of a legend based on provided max\n     * height and width and based on its contents\n     *\n     * @return {Instance} Current instance\n     * @memberof Legend\n     */\n    setLegendMeasures () {\n        const {\n            width,\n            height,\n            maxWidth,\n            maxHeight,\n            padding,\n            margin,\n            border\n        } = this.measurement();\n        const {\n            align\n        } = this.config();\n\n        // Effective padding, margin and padding\n        const effPadding = padding * 2;\n        const effBorder = border * 2;\n        const effMargin = margin * 2;\n\n        this.data(this.dataFromScale());\n        // Get space occupied by title\n        const titleSpace = this.getTitleSpace();\n        const titleHeight = titleSpace.height > 0 ? titleSpace.height + effPadding : 0;\n        const titleWidth = titleSpace.width + effPadding;\n\n        // Get space occupied by labels\n        const labelSpaces = this.getLabelSpaces(effPadding, align);\n        const {\n            totalHeight, totalWidth, itemSpaces, iconSpaces, maxItemSpaces, maxIconWidth\n        } = computeItemSpaces(this.config(),\n        { effPadding, titleWidth, labelSpaces, titleHeight, maxWidth, maxHeight }, this.data());\n\n        this.measurement({\n            width: Math.max(totalWidth, width) + effMargin + effBorder,\n            height: Math.max(totalHeight, height) + effMargin + effBorder,\n            labelSpaces,\n            iconSpaces,\n            itemSpaces,\n            maxItemSpaces,\n            maxIconWidth,\n            titleSpaces: {\n                width: Math.min(maxWidth, this.measurement().width) - effMargin - effBorder,\n                height: titleHeight\n            }\n        });\n        return this;\n    }\n\n    /**\n     * Returns the space occupied by the legend title\n     *\n     * @return {Object} Space occupied by title\n     * @memberof Legend\n     */\n    getTitleSpace () {\n        this._labelManager.setStyle(getSmartComputedStyle(selectElement('body'),\n                                                `${this.config().classPrefix}-legend-title`));\n        return this._labelManager.getOriSize(this.title().text ? this.title().text : '');\n    }\n\n    /**\n     * Creates the title for the legend\n     *\n     * @param {DOM} container Container made for the title\n     * @return {Selection} Title and it's node\n     * @memberof Legend\n     */\n    renderTitle (container) {\n        const { titleSpaces, border, padding, maxWidth } = this.measurement();\n\n        const width = calculateTitleWidth(\n            this.measurement(),\n            this._labelManager.getOriSize(this._title.text).width,\n            this.config()\n        );\n        const { borderStyle, borderColor } = this.config();\n        return titleCreator(container, this.title(), {\n            height: titleSpaces.height,\n            width,\n            maxWidth,\n            border,\n            padding,\n            borderStyle,\n            borderColor,\n            alignment: POSITION_ALIGNMENT_MAP[this.config().position]\n        }, this.config());\n    }\n\n    /**\n     * Render the legend with its title\n     *\n     * @param {DOM} mountPoint Point where the legend and title are to be appended\n     * @return {Instance} Current instance of legend\n     * @memberof Legend\n     */\n    render () {\n        const firebolt = this.firebolt();\n        const {\n            classPrefix,\n            borderStyle,\n            borderColor,\n            position\n        } = this.config();\n        const {\n            border,\n            marginHorizontal,\n            maxHeight,\n            height,\n            width,\n            maxWidth\n        } = this.measurement();\n        let {\n            margin\n        } = this.measurement();\n        const legendContainer = makeElement(selectElement(this.mount()), 'div', [1], `${classPrefix}-legend-box`);\n        let marginPosition;\n        switch (position) {\n        case TOP:\n            marginPosition = `margin-${BOTTOM}`;\n            margin = marginHorizontal;\n            break;\n        case LEFT:\n            marginPosition = `margin-${RIGHT}`;\n            break;\n        case BOTTOM:\n            marginPosition = `margin-${TOP}`;\n            margin = marginHorizontal;\n            break;\n        default:\n            marginPosition = `margin-${LEFT}`;\n        }\n        legendContainer.classed(`${classPrefix}-legend-box-${this._id}`, true);\n        legendContainer.style('float', 'left');\n\n        const widthBox = calculateTitleWidth(\n            this.measurement(),\n            this._labelManager.getOriSize(this._title.text).width,\n            this.config()\n        );\n\n        const titleWidth = Math.min(maxWidth, widthBox);\n        width < titleWidth ? selectElement(this.mount()).style('width', `${titleWidth}px`) : null;\n        // set height and width\n        legendContainer.style('width', `${titleWidth}px`)\n                        .style('height', `${Math.min(maxHeight, height)}px`)\n                        .style(`${marginPosition}`, `${margin}px`)\n                        .style('border', `${border}px ${borderStyle} ${borderColor}`);\n        this.legendContainer(legendContainer.node());\n\n        // create title\n        this.renderTitle(legendContainer);\n        firebolt.createSelectionSet(prepareSelectionSetData(this.data(), this.fieldName(), this.metaData()));\n        return legendContainer;\n    }\n\n    /**\n     *\n     *\n     * @param {*} data\n     *\n     * @memberof SimpleLegend\n     */\n    getCriteriaFromData (data) {\n        const fieldName = this.fieldName();\n        const type = this.metaData().getData().schema[0].type;\n        if (type === 'measure') {\n            return {\n                [fieldName]: data.range\n            };\n        }\n        return [[fieldName], [data.rawVal]];\n    }\n\n    getRangeFromIdentifiers ({ fields, entrySet }) {\n        const data = this.data();\n        const idRangeMap = data.reduce((acc, v) => {\n            acc[v.id] = v;\n            return acc;\n        }, {});\n\n        return fields.reduce((acc, v) => {\n            acc[v] = entrySet.reduce((ranges, id) => {\n                if (id in idRangeMap) {\n                    ranges.push(idRangeMap[id].range);\n                }\n                return ranges;\n            }, []);\n            return acc;\n        }, {});\n    }\n\n    setParentInfo (info) {\n        this._canvasMount = info.canvasRoot;\n    }\n}\n","import {\n    LEFT,\n    RIGHT,\n    START,\n    END,\n    TOP,\n    BOTTOM,\n    HORIZONTAL,\n    VERTICAL,\n    CENTER,\n    SHAPE,\n    VALUE\n} from '../enums/constants';\n\nconst legendOrientation = {\n    [HORIZONTAL]: {\n        datasets: data => ({\n            row: [1],\n            column: data\n        }),\n        itemContainerMeasures: (measurement, config) => {\n            const {\n                itemSpaces,\n                width\n            } = measurement;\n            const {\n                buffer\n            } = config;\n            return {\n                row: {\n                    width: `${width + itemSpaces.length * buffer[HORIZONTAL] || 1}px`,\n                    padding: `${0}px`\n                },\n                column: {\n                    width: (d, i) => `${itemSpaces[i].width + buffer[HORIZONTAL]}px`,\n                    padding: `${0}px`\n                }\n            };\n        },\n        getStepSpacesInfo: (measurement) => {\n            const { maxItemSpaces, height } = measurement;\n            return {\n                iconHeight: height,\n                iconWidth: maxItemSpaces.width,\n                stepPadding: {\n                    horizontal: true,\n                    vertical: false\n                }\n            };\n        }\n    },\n    [VERTICAL]: {\n        datasets: data => ({\n            row: data,\n            column: d => [d]\n        }),\n        itemContainerMeasures: (measurement, config) => {\n            const {\n                width\n            } = measurement;\n            const { padding } = config;\n\n            return {\n                row: {\n                    width: `${width}px`,\n                    padding: `${padding}px`\n                },\n                column: {\n                    width: `${width}px`,\n                    padding: `${0}px`\n                }\n            };\n        },\n        getStepSpacesInfo: (measurement) => {\n            const { maxItemSpaces, width } = measurement;\n            return {\n                iconHeight: maxItemSpaces.height,\n                iconWidth: width,\n                stepPadding: {\n                    horizontal: false,\n                    vertical: true\n                }\n            };\n        }\n    }\n};\n\nexport const positionConfig = {\n    [LEFT]: legendOrientation[VERTICAL],\n    [RIGHT]: legendOrientation[VERTICAL],\n    [TOP]: legendOrientation[HORIZONTAL],\n    [BOTTOM]: legendOrientation[HORIZONTAL]\n};\n\nexport const alignmentMap = {\n    [LEFT]: END,\n    [RIGHT]: START,\n    [TOP]: CENTER,\n    [BOTTOM]: CENTER\n};\n\n// Reverses data for step legend\nexport const stepData = data => ({\n    [LEFT]: data.reverse(),\n    [RIGHT]: data.reverse(),\n    [TOP]: data,\n    [BOTTOM]: data\n});\n\n// Changes the item layout based on the position of the text\nexport const itemStack = {\n    [LEFT]: [VALUE, SHAPE],\n    [RIGHT]: [SHAPE, VALUE],\n    [TOP]: [VALUE, SHAPE],\n    [BOTTOM]: [SHAPE, VALUE]\n};\n","import { makeElement, selectElement, applyStyle } from 'muze-utils';\nimport { ICON_MAP } from './defaults';\nimport { positionConfig, alignmentMap, itemStack } from './position-config';\nimport {\n    WIDTH,\n    HEIGHT,\n    CENTER,\n    VALUE,\n    RECT,\n    LEFT,\n    DEFAULTICONSIZE,\n    VERTICAL_BUFFER,\n    HORIZONTAL_BUFFER,\n    HORIZONTAL,\n    VERTICAL,\n    DEFAULT,\n    TOP,\n    BOTTOM,\n    OPPOSITE_POSITION\n} from '../enums/constants';\n\n/**\n *\n *\n * @param {*} container\n * @param {*} data\n * @param {*} legendInstance\n * @param {*} align\n *\n */\nexport const getItemContainers = (container, data, legendInstance) => {\n    const measurement = legendInstance.measurement();\n    const config = legendInstance.config();\n    const {\n        itemSpaces\n    } = measurement;\n    const {\n        classPrefix,\n        position\n    } = config;\n    const positionObj = positionConfig[position];\n    const datasets = positionObj.datasets(data);\n    const measures = positionObj.itemContainerMeasures(measurement, config);\n\n    const rows = makeElement(container, 'div', datasets.row, `${classPrefix}-legend-row`);\n    rows.style(HEIGHT, (d, i) => `${itemSpaces[i].height}px`);\n    rows.style(WIDTH, measures.row.width);\n    rows.style('padding', measures.row.padding);\n\n    const columns = makeElement(rows, 'div', datasets.column, `${classPrefix}-legend-columns`);\n    columns.style(WIDTH, measures.column.width);\n    columns.style('padding', measures.column.padding);\n\n    return columns;\n};\n\n/**\n *\n *\n * @param {*} container\n * @param {*} classPrefix\n * @param {*} data\n *\n * @memberof DiscreteLegend\n */\nexport const createLegendSkeleton = (context, container, classPrefix, data) => {\n    let gradWidth = 0;\n    let gradHeight = 0;\n    let maxGradHeight = 0;\n    let maxGradWidth = 0;\n    const measurement = context.measurement();\n    const {\n            margin,\n            border,\n            titleSpaces,\n            width,\n            height,\n            maxWidth,\n            maxHeight\n        } = measurement;\n\n    gradHeight = height - (titleSpaces.height + 2 * margin + 2 * border);\n    gradWidth = width - (margin * 2 + border * 2);\n\n    maxGradHeight = maxHeight - (titleSpaces.height + margin * 2 + border * 2);\n    maxGradWidth = maxWidth - (margin * 2 + border * 2);\n\n    let legendBody = makeElement(container, 'div', [1], `${classPrefix}-legend-body`);\n\n    legendBody.style(WIDTH, `${gradWidth}px`);\n\n    legendBody.style(HEIGHT, `${gradHeight}px`);\n\n    legendBody.select(`.${classPrefix}-legend-overflow`).remove();\n        // Create a div with scroll when overflow\n    if (maxGradWidth && maxGradWidth < gradWidth) {\n        legendBody = legendBody.style(WIDTH, `${maxGradWidth}px`).style('overflow-x', 'scroll');\n    }\n        // Create a div with scroll when overflow\n    if (maxGradHeight && maxGradHeight < gradHeight) {\n        legendBody.style(HEIGHT, `${maxGradHeight}px`).style('overflow-y', 'scroll');\n    }\n\n    legendBody = makeElement(legendBody, 'div', [1], `${classPrefix}-legend-overflow`);\n\n    const legendItem = getItemContainers(legendBody, data, context);\n    return { legendItem };\n};\n\n/**\n * Creates legend item based on alignment and text orientation\n *\n * @param {Selection} container Point where items are to be mounted\n * @return {Instance} Current instance\n * @memberof Legend\n */\nexport const createItemSkeleton = (context, container) => {\n    const {\n        classPrefix,\n        item\n    } = context.config();\n    const textOrientation = item.text.orientation;\n    const stack = itemStack[textOrientation];\n    const itemSkeleton = makeElement(container, 'div', (d, i) => stack.map(e => [e, d[e], d.color, d.size,\n        d.value, context.fieldName(), i]), `${classPrefix}-legend-item-info`);\n\n    const alignClass = alignmentMap[textOrientation];\n\n    itemSkeleton.classed(alignClass, true);\n    return { itemSkeleton };\n};\n\n/**\n *\n *\n * @param {*} measureType\n * @param {*} stepColorCheck\n */\nexport const applyItemStyle = (item, measureType, stepColorCheck, context) => {\n    const {\n        padding,\n        labelSpaces,\n        iconSpaces,\n        maxIconWidth\n    } = context.measurement();\n\n    const { align } = context.config().align;\n\n    const diff = stepColorCheck ? -padding * 2 : 0;\n\n    if (item[0] === VALUE) {\n        return `${labelSpaces[item[6]][measureType]}px`;\n    }\n\n    if (measureType === 'width' && !stepColorCheck && align === VERTICAL) {\n        return `${maxIconWidth}px`;\n    } else if (align === HORIZONTAL) {\n        return `${maxIconWidth}px`;\n    }\n    return `${iconSpaces[item[6]][measureType] - diff}px`;\n};\n\n/**\n *\n *\n * @param {*} str\n *\n */\nconst checkPath = (str) => {\n    if (/^[mzlhvcsqta]\\s*[-+.0-9][^mlhvzcsqta]+/i.test(str) && /[\\dz]$/i.test(str) && str.length > 4) {\n        return true;\n    }\n    return false;\n};\n\n/**\n *\n *\n * @param {*} d\n * @param {*} elem\n */\nconst createShape = function (d, elem, defaultIcon) {\n    const groupElement = elem;\n    // const { shape, size, update } = d;\n    const shape = d[1] || defaultIcon;\n    const defaultIconSize = DEFAULTICONSIZE[shape] || DEFAULTICONSIZE[DEFAULT];\n    const size = d[3] || defaultIconSize * Math.PI;\n\n    if (shape instanceof Promise) {\n        shape.then((res) => {\n            d.shape = res;\n            return createShape(d, elem);\n        });\n    } else if (shape instanceof Element) {\n        let newShape = shape.cloneNode(true);\n\n        if (newShape.nodeName.toLowerCase() === 'img') {\n            const src = newShape.src || newShape.href;\n            newShape = document.createElementNS('http://www.w3.org/2000/svg', 'image');\n            newShape.setAttribute('href', src);\n        }\n        const shapeElement = selectElement(newShape);\n        shapeElement.attr('transform', `scale(${size / 100})`);\n        return selectElement(groupElement.node().appendChild(newShape));\n    } else if (typeof shape === 'string') {\n        let pathStr;\n        if (checkPath(shape)) {\n            pathStr = shape;\n        } else {\n            pathStr = ICON_MAP(shape).size(size)();\n        }\n        return makeElement(groupElement, 'path', data => [data]).attr('d', pathStr);\n    }\n    d[1] = 'circle';\n    return createShape(d, elem, 'circle');\n};\n\n/**\n * Returns the icon of the legend item\n *\n * @param {Object} datum Data property attached to the item\n * @param {number} width width of the item\n * @param {number} height height of the item\n * @return {Object|string} returns the path string or the string name of the icon\n * @memberof Legend\n */\nexport const getLegendIcon = (datum, width, height, defaultIcon) => {\n    const icon = ICON_MAP(datum[1]);\n\n    if (icon) {\n        return icon.size(datum[3] || Math.min(width, height) * Math.PI);\n    }\n    return ICON_MAP(datum[3] ? 'circle' : defaultIcon).size(datum[3] || Math.min(width, height) * Math.PI);\n};\n\n/**\n *\n *\n */\nexport const renderIcon = (icon, container, datum, context) => {\n    const {\n        classPrefix,\n        iconHeight,\n        padding,\n        color,\n        iconWidth,\n        align\n    } = context;\n\n    let { maxIconWidth } = context;\n\n    if (align === HORIZONTAL) {\n        maxIconWidth = iconWidth + 2 * padding;\n    }\n    const svg = makeElement(container, 'svg', f => [f], `${classPrefix}-legend-icon-svg`)\n    .attr(WIDTH, maxIconWidth)\n    .attr(HEIGHT, iconHeight)\n    .style(WIDTH, `${Math.ceil(maxIconWidth)}px`)\n    .style(HEIGHT, `${iconHeight}px`);\n\n    const transalate = maxIconWidth / 2 - padding;\n\n    if (icon !== RECT) {\n        const group = makeElement(svg, 'g', [datum[1]], `${classPrefix}-legend-icon`);\n        createShape(datum, group, icon)\n                        .attr('transform', `translate(${transalate} ${iconHeight / 2})`)\n                        .attr('fill', datum[2] || color)\n                        .attr('stroke', datum[2] || color);\n    } else {\n        makeElement(svg, RECT, [datum[1]], `${classPrefix}-legend-icon`)\n                        .attr('x', 0)\n                        .attr('y', 0)\n                        .attr(WIDTH, maxIconWidth)\n                        .attr(HEIGHT, iconHeight)\n                        .attr('fill', datum[2] || color);\n    }\n};\n\n/**\n * Renders the items in the legend i.e, icon and text\n *\n * @param {DOM} container Point where item is to be mounted\n * @memberof Legend\n */\nexport const renderDiscreteItem = (context, container) => {\n    const labelManager = context._labelManager;\n    const {\n           item,\n           classPrefix,\n           shape,\n           align\n    } = context.config();\n    const {\n        maxIconWidth,\n        padding,\n        margin,\n        border\n    } = context.measurement();\n    const {\n            width: iconWidth,\n            height: iconHeight,\n            color,\n            className\n        } = item.icon;\n\n    const textOrientation = item.text.orientation;\n    const formatter = item.text.formatter;\n\n    labelManager.useEllipsesOnOverflow(true);\n    applyStyle(container, {\n        width: d => applyItemStyle(d, WIDTH, false, context),\n        height: d => applyItemStyle(d, HEIGHT, false, context),\n        'text-align': CENTER,\n        padding: `${padding}px`\n    });\n\n    const marginHorizontalBuffer = HORIZONTAL_BUFFER;\n\n    const bufferCondition = textOrientation === TOP || textOrientation === BOTTOM\n    || !padding || !margin || !border;\n\n    const marginVerticalBuffer = bufferCondition ? 0 : VERTICAL_BUFFER;\n\n    labelManager.setStyle(context._computedStyle);\n    const dataArr = context.metaData();\n    const position = OPPOSITE_POSITION[textOrientation] || LEFT;\n    container.each(function (d, i) {\n        if (d[0] === VALUE) {\n            selectElement(this).text(formatter(d[1], i, dataArr, context))\n            .style(`padding-${position}`, '0px')\n            .style(`margin-${position}`, `${align === HORIZONTAL ? marginHorizontalBuffer : marginVerticalBuffer}px`);\n        } else {\n            // const icon = getLegendIcon(d, iconWidth, iconHeight, type);\n            selectElement(this).classed(`${classPrefix}-${className}`, true);\n            selectElement(this).classed(`${classPrefix}-${className}-${i}`, true);\n            renderIcon(shape, selectElement(this), d, {\n                classPrefix,\n                // iconWidth,\n                iconWidth: 2 * Math.sqrt(d[3] / Math.PI) || iconWidth,\n                iconHeight,\n                maxIconWidth,\n                padding,\n                color,\n                align\n            });\n        }\n    });\n};\n\n/**\n* Renders the items in the legend i.e, icon and text\n*\n* @param {DOM} container Point where item is to be mounted\n* @memberof Legend\n*/\nexport const renderStepItem = (context, container) => {\n    const labelManager = context._labelManager;\n    const {\n      item,\n      position,\n      classPrefix\n   } = context.config();\n    const {\n      maxItemSpaces,\n      maxIconWidth,\n      padding\n   } = context.measurement();\n    const {\n       width,\n       height,\n       color\n   } = item.icon;\n    const {\n        formatter\n   } = item.text;\n\n    labelManager.useEllipsesOnOverflow(true);\n    const { iconHeight, iconWidth, stepPadding } = positionConfig[position].getStepSpacesInfo({\n        maxItemSpaces, height, width\n    });\n\n    applyStyle(container, {\n        width: d => applyItemStyle(d, WIDTH, stepPadding.horizontal, context),\n        height: d => applyItemStyle(d, HEIGHT, stepPadding.vertical, context),\n        'text-align': 'center',\n        padding: `${padding}px`\n    });\n\n    labelManager.setStyle(context._computedStyle);\n    const dataArr = context.metaData();\n    const data = context.data();\n    container.each(function (d, i) {\n        if (d[0] === VALUE) {\n            const formattedData = formatter([data[d[6]].range[0], data[d[6]].range[1]], i, dataArr, context);\n            selectElement(this).text(formattedData);\n        } else {\n            renderIcon(RECT, selectElement(this), d, {\n                classPrefix,\n                iconWidth,\n                iconHeight,\n                maxIconWidth,\n                color\n            });\n        }\n    });\n};\n","import {\n    FieldType,\n    DimensionSubtype,\n    formatTemporal,\n    getReadableTicks,\n    InvalidAwareTypes\n} from 'muze-utils';\nimport SimpleLegend from './simple-legend';\nimport { DISCRETE, LEFT, SIZE } from '../enums/constants';\nimport { getScaleInfo } from './legend-helper';\nimport { createLegendSkeleton, createItemSkeleton, renderDiscreteItem } from './renderer';\nimport '../styles.scss';\n\n/**\n * Creates a Legend from the axes of a canvas\n *\n * @param {Object} dependencies : legend data\n * @class Legend\n */\nexport default class DiscreteLegend extends SimpleLegend {\n\n    /**\n     * Initializes an instance of the class\n     *\n     * @static\n     * @param {Object} dependencies Set of dependencies required by the legend\n     * @return {Instance} returns a new instance of Legend\n     * @memberof Legend\n     */\n    static create (dependencies) {\n        return new DiscreteLegend(dependencies);\n    }\n\n    /**\n     *\n     *\n     * @static\n     *\n     * @memberof DiscreteLegend\n     */\n    static type () {\n        return DISCRETE;\n    }\n\n    /**\n     *\n     *\n     * @param {*} scale\n     *\n     * @memberof DiscreteLegend\n     */\n    dataFromScale () {\n        const scale = this.scale();\n        const { scaleType, domain, scaleFn, steps } = getScaleInfo(scale);\n        const field = this.metaData().getFieldspace().fields[0];\n        const { type, subtype } = field.schema();\n        let domainForLegend = [];\n        if (scaleType === SIZE && type === FieldType.MEASURE) {\n            domainForLegend = steps instanceof Array ? steps : getReadableTicks(domain, domain.length);\n        } else if (subtype === DimensionSubtype.TEMPORAL) {\n            domainForLegend = [...new Set(field.data())];\n        } else {\n            domainForLegend = [...new Set(domain)];\n        }\n\n        const len = domainForLegend.length;\n        domainForLegend = domainForLegend.map((ele, i) => {\n            let value = 0;\n            let range = 0;\n            const rawVal = domainForLegend[i];\n            if (type === FieldType.MEASURE) {\n                value = (+domainForLegend[i]).toFixed(0);\n                const nextVal = domainForLegend[i + 1] ? +domainForLegend[i + 1] : +value;\n                range = [value, i === len - 1 ? nextVal.toFixed(0) : nextVal.toFixed(0) - 1];\n            } else {\n                let domainVal = rawVal;\n                if (subtype === DimensionSubtype.TEMPORAL) {\n                    domainVal = formatTemporal(domainForLegend[i], field.minimumConsecutiveDifference());\n                }\n                value = domainVal;\n                range = [domainVal];\n            }\n            return {\n                [scaleType]: scale[scaleFn](ele),\n                value,\n                id: i,\n                range,\n                rawVal\n            };\n        }).filter(d => d.value !== null);\n\n        domainForLegend = scaleType === SIZE ? domainForLegend.sort((a, b) => a[scaleType] - b[scaleType])\n            : domainForLegend.sort((a, b) => {\n                const domainValue =\n                                !(a.value instanceof InvalidAwareTypes || a.value instanceof InvalidAwareTypes)\n                                ? a.value.localeCompare(b.value)\n                                : 1;\n                return domainValue;\n            });\n        return domainForLegend;\n    }\n\n    /**\n     * Render the legend with its title\n     *\n     * @param {DOM} mountPoint Point where the legend and title are to be appended\n     * @return {Instance} Current instance of legend\n     * @memberof Legend\n     */\n    render () {\n        const firebolt = this.firebolt();\n        const data = this.data();\n\n        const { classPrefix } = this.config();\n        const legendContainer = super.render(this.mount());\n        // create Legend\n        const { legendItem } = createLegendSkeleton(this, legendContainer, classPrefix, data);\n        const { itemSkeleton } = createItemSkeleton(this, legendItem);\n        renderDiscreteItem(this, itemSkeleton);\n\n        legendContainer.selectAll('div')\n        .filter((datum, i, allSelections) => !allSelections[i].classList.contains(`${classPrefix}-legend-body`))\n        .style('float', LEFT);\n\n        firebolt.mapActionsAndBehaviour();\n        return legendContainer;\n    }\n}\n","import { makeElement, applyStyle } from 'muze-utils';\nimport { ContinousAxis } from '@chartshq/muze-axis';\nimport { BOTTOM, RIGHT } from '../enums/constants';\nimport { ALIGN, LEGEND_MARKER_PROPS } from './defaults';\nimport '../styles.scss';\n\n/**\n *\n *\n * @param {*} data\n *\n */\nexport const getGradientDomain = (data) => {\n    if (typeof data[0].value === 'number') {\n        return data.reduce((accumulator, currentValue) =>\n            [Math.min(currentValue.value, accumulator[0]), Math.max(currentValue.value, accumulator[1])],\n                [Number.MAX_VALUE, Number.MIN_VALUE]);\n    }\n    return data.map(e => e.value);\n};\n/**\n *\n *\n * @param {*} container\n * @param {*} data\n * @param {*} domain\n *\n */\nexport const makeLinearGradient = (container, data, domain, id) => {\n    const defs = makeElement(container, 'defs', [1]);\n    const linearGradient = makeElement(defs, 'linearGradient', [1])\n                .attr('id', `linear-gradient-${id}`)\n                .attr('x1', '0%')\n                .attr('y2', '0%');\n\n    makeElement(linearGradient, 'stop', data, 'stop-gradient')\n                    .attr('offset', d => `${(d.value - domain[0]) * 100 / (domain[1] - domain[0]) || 1}%`)\n                    .attr('stop-color', d => d.color);\n    return linearGradient;\n};\n\n/**\n * Creates an axis cell with a linear axis for computing space and\n * creating gradient legend\n *\n * @return {AxisCell} Instance of Axis Cell for the gradient axis\n * @memberof Legend\n */\nexport const createAxis = (context) => {\n    const data = context.data();\n    const { align } = context.config();\n    const AxisCell = context._cells.AxisCell;\n    const newAxis = new ContinousAxis({\n        id: `legend-${context._id}`,\n        orientation: align === ALIGN.VERTICAL ? RIGHT : BOTTOM,\n        style: context._computedStyle,\n        nice: false,\n        showAxisName: false,\n        tickValues: data.map(d => d.value),\n        fixedBaseline: false,\n        labels: {\n            rotation: null\n        }\n    }, { labelManager: context._labelManager });\n\n    newAxis.domain(getGradientDomain(data));\n    newAxis.range([1, 1]);\n    return new AxisCell().source(newAxis).config({\n        margin: { left: 0, bottom: 0, top: 0, right: 0 }\n    });\n};\n\n/**\n *\n *\n * @param {*} container\n * @param {*} data\n * @param {*} classPrefix\n *\n * @memberof GradientLegend\n */\nconst createLegendSkeleton = (container, classPrefix, data, id) => {\n    const domain = getGradientDomain(data);\n    const legendContainer = makeElement(container, 'div', [1], `${classPrefix}-legend-body`);\n    const legendGradSvg = makeElement(legendContainer, 'svg', [1], `${classPrefix}-gradient`);\n    const legendGradCont = makeElement(legendGradSvg, 'g', [1], `${classPrefix}-gradient-group`);\n    const linearGradient = makeLinearGradient(legendGradSvg, data, domain, id);\n    const legendRect = makeElement(legendGradCont, 'rect', [1], `${classPrefix}-gradient-rect`);\n\n    return {\n        legendContainer,\n        legendGradCont,\n        legendGradSvg,\n        linearGradient,\n        legendRect\n    };\n};\n\n/**\n * Renders the axis for the gradient\n *\n * @param {Selection} container Point where axis is to be mounted\n * @param {number} height Height for axis\n * @param {number} width Width for axis\n * @memberof Legend\n */\nexport const renderAxis = (context, container, height, width) => {\n    const axis = context.axis();\n\n    axis.source().config({\n        tickFormat: (val, i) => context.config().item.text.formatter(val, i, context.metaData(), context)\n    });\n    axis.setAvailableSpace(width, height);\n    axis.render(container.node());\n    axis.source().render();\n};\n\n/**\n * Renders gradient legends\n *\n * @param {Selection} container Point where the legend is to be appended\n * @memberof GradientLegend\n */\nexport const renderGradient = (context, container) => {\n    let gradHeight = 0;\n    let gradWidth = 0;\n    const {\n        align,\n        classPrefix,\n        item\n    } = context.config();\n    const data = context.data();\n    // Create the skeleton for the legend\n    const {\n        legendContainer,\n        legendGradSvg,\n        legendGradCont,\n        linearGradient,\n        legendRect\n    } = createLegendSkeleton(container, classPrefix, data, context._id);\n    const labelDim = context.axis().source().getAxisDimensions().tickDimensions;\n    const {\n        padding,\n        margin,\n        border,\n        titleSpaces,\n        maxItemSpaces,\n        maxHeight,\n        maxWidth,\n        height,\n        width\n    } = context.measurement();\n    const gradientDimensions = {};\n\n    gradHeight = Math.floor(Math.min(height, maxHeight) - (titleSpaces.height + 2 * margin + 2 * border));\n    gradWidth = Math.floor(Math.min(width, maxWidth) - (margin * 2 + border * 2));\n\n    const { size: markerSize, BUFFER } = LEGEND_MARKER_PROPS;\n    const markerWithBuffer = markerSize + BUFFER;\n\n    if (align === ALIGN.HORIZONTAL) {\n        gradientDimensions.height = item.icon.height;\n        gradientDimensions.width = gradWidth - 2 * padding - labelDim.width / 2;\n        linearGradient.attr('x2', '100%').attr('y1', '0%');\n        legendGradCont.attr('transform', `translate( ${labelDim.width / 2} ${markerWithBuffer})`);\n        renderAxis(context, legendContainer, gradHeight - item.icon.height - padding, gradWidth - 2 * padding - 1);\n\n        applyStyle(legendContainer, {\n            height: `${maxItemSpaces.height + border + padding}px`,\n            width: `${Math.min(width, maxWidth)}px`,\n            padding: `${padding}px`\n        });\n\n        legendRect.attr('height', gradientDimensions.height);\n        legendRect.attr('width', gradientDimensions.width - labelDim.width / 2);\n    } else {\n        gradientDimensions.height = gradHeight - 2 * padding - labelDim.height / 2;\n        gradientDimensions.width = item.icon.width;\n        linearGradient.attr('x2', '0%').attr('y1', '100%');\n        legendGradCont.attr('transform', `translate(${markerWithBuffer} ${labelDim.height / 2})`);\n        renderAxis(\n            context,\n            legendContainer,\n            gradHeight - 2 * padding - 1,\n            gradWidth - (gradientDimensions.width + markerWithBuffer) - padding * 2\n        );\n\n        applyStyle(legendContainer, {\n            height: `${Math.min(height, maxHeight)}px`,\n            width: `${maxWidth}px`,\n            padding: `${padding}px`\n        });\n        legendRect.attr('height', gradientDimensions.height - labelDim.height / 2);\n        legendRect.attr('width', gradientDimensions.width);\n    }\n\n    // Apply Styles to the legend plot area\n    applyStyle(legendGradSvg, {\n        height: `${gradientDimensions.height + markerWithBuffer}px`,\n        width: `${gradientDimensions.width + markerWithBuffer}px`\n    });\n\n    // Apply styles to the legend rect\n    applyStyle(legendRect, {\n        fill: `url(#linear-gradient-${context._id})`\n    });\n    legendGradSvg.attr('height', gradientDimensions.height + markerWithBuffer);\n    legendGradSvg.attr('width', gradientDimensions.width + markerWithBuffer);\n\n    context.measurement({\n        gradientDimensions\n    });\n    context._legendGradientSvg = legendGradSvg;\n    return context;\n};\n","import SimpleLegend from './simple-legend';\nimport { getScaleInfo, getInterpolatedData, getInterpolatedArrayData } from './legend-helper';\nimport { GRADIENT, LEFT, SIZE } from '../enums/constants';\nimport { HIGHLIGHT } from '../enums/behaviours';\nimport { Marker } from '../enums/side-effects';\nimport { renderGradient, createAxis } from './gradient-helper';\nimport '../styles.scss';\n\n/**\n * Creates a Legend from the axes of a canvas\n *\n * @param {Object} dependencies : legend data\n * @class Legend\n */\nexport default class GradientLegend extends SimpleLegend {\n\n    /**\n     * Initializes an instance of the class\n     *\n     * @static\n     * @param {Object} dependencies Set of dependencies required by the legend\n     * @return {Instance} returns a new instance of Legend\n     * @memberof Legend\n     */\n    static create (dependencies) {\n        return new GradientLegend(dependencies);\n    }\n\n    /**\n     *\n     *\n     * @static\n     *\n     * @memberof GradientLegend\n     */\n    static type () {\n        return GRADIENT;\n    }\n\n    /**\n     *\n     *\n     * @param {*} axis\n     *\n     * @memberof GradientLegend\n     */\n    axis (...axis) {\n        if (axis.length) {\n            this._axis = axis[0];\n            return this;\n        }\n        return this._axis;\n    }\n\n    /**\n     *\n     *\n     * @param {*} scale\n     *\n     * @memberof GradientLegend\n     */\n    dataFromScale () {\n        let domainForLegend = [];\n        const scale = this.scale();\n        const { scaleType, domain, steps, scaleFn } = getScaleInfo(scale);\n\n        // defining scaleParams\n        const scaleParams = {\n            smartLabel: this.labelManager(),\n            measures: this.measurement(),\n            alignment: this.config().position,\n            minTickDistance: this.minTickDistance()\n        };\n\n        if (steps instanceof Array) {\n            if (domain[0] < steps[0]) {\n                domainForLegend[0] = domain[0];\n            }\n            domainForLegend = [...domainForLegend, ...steps];\n            if (domain[domain.length - 1] > steps[steps.length - 1]) {\n                domainForLegend.push(domain[1]);\n            }\n            // Sorting the domain Array\n            domainForLegend = [...new Set(domainForLegend)].sort((a, b) => a - b);\n\n            domainForLegend = getInterpolatedArrayData(domainForLegend, scaleParams);\n        } else {\n            domainForLegend = getInterpolatedData(domain, steps - 1, scaleParams);\n        }\n        domainForLegend = [...new Set(domainForLegend)].sort((a, b) => a - b);\n\n        return domainForLegend.map((ele, i) => {\n            const value = domainForLegend[i];\n            return {\n                [scaleType]: scaleType === SIZE ? scale[scaleFn](ele) * scale.getScaleFactor()\n                    : scale[scaleFn](ele),\n                value: +value.toFixed(1),\n                id: i\n            };\n        }).filter(d => d.value !== null);\n    }\n\n    /**\n     *\n     *\n     * @param {*} effPadding\n     * @param {*} align\n     *\n     * @memberof Legend\n     */\n    getLabelSpaces (effPadding) {\n        this.config({\n            item: {\n                text: {\n                    orientation: this.config().position\n                }\n            }\n        });\n        const axis = createAxis(this);\n        const axisSpace = axis.getLogicalSpace();\n        const space = { width: axisSpace.width - effPadding, height: axisSpace.height - effPadding };\n        const axisDomainLength = axis.source().domain().length;\n        const labelSpaces = new Array(axisDomainLength).fill(space);\n\n        this.axis(axis);\n        return labelSpaces;\n    }\n\n    /**\n     *\n     *\n     *\n     * @memberof GradientLegend\n     */\n    getDrawingContext () {\n        return {\n            svgContainer: this._legendGradientSvg\n        };\n    }\n\n    /**\n     * Render the legend with its title\n     *\n     * @param {DOM} mountPoint Point where the legend and title are to be appended\n     * @return {Instance} Current instance of legend\n     * @memberof Legend\n     */\n    render () {\n        const firebolt = this.firebolt();\n        const legendContainer = super.render(this.mount());\n        // create Legend\n        renderGradient(this, legendContainer);\n        legendContainer.selectAll('div').style('float', LEFT);\n        firebolt.mapActionsAndBehaviour();\n        firebolt.mapSideEffects({\n            [HIGHLIGHT]: [Marker]\n        });\n        return legendContainer;\n    }\n\n    /**\n     *\n     *\n     * @param {*} data\n     *\n     * @memberof SimpleLegend\n     */\n    getCriteriaFromData (data) {\n        return [[this.fieldName()], [data.value]];\n    }\n\n    getRangeFromIdentifiers ({ fields, criteria }) {\n        return fields.reduce((range, v) => {\n            range[v] = criteria[v];\n            return range;\n        }, {});\n    }\n}\n","import SimpleLegend from './simple-legend';\nimport {\n    getScaleInfo,\n    getInterpolatedData,\n    getItemMeasures\n} from './legend-helper';\nimport {\n    createLegendSkeleton,\n    createItemSkeleton,\n    renderStepItem\n} from './renderer';\nimport { STEP, RECT, LEFT, SIZE, HORIZONTAL } from '../enums/constants';\nimport { stepData } from './position-config';\nimport '../styles.scss';\nimport { STEP_DEFAULT_CONFIG, DEFAULT_MEASUREMENT } from './defaults';\n\n/**\n * Creates a Legend from the axes of a canvas\n *\n * @param {Object} dependencies : legend data\n * @class Legend\n */\nexport default class StepLegend extends SimpleLegend {\n\n    /**\n     * Initializes an instance of the class\n     *\n     * @static\n     * @param {Object} dependencies Set of dependencies required by the legend\n     * @return {Instance} returns a new instance of Legend\n     * @memberof Legend\n     */\n    static create (dependencies) {\n        return new StepLegend(dependencies);\n    }\n\n    /**\n     *\n     *\n     * @static\n     *\n     * @memberof StepLegend\n     */\n    static type () {\n        return STEP;\n    }\n\n    /**\n     *\n     *\n     * @static\n     *\n     * @memberof StepLegend\n     */\n    static defaultConfig () {\n        STEP_DEFAULT_CONFIG.buffer[HORIZONTAL] = 0;\n        return STEP_DEFAULT_CONFIG;\n    }\n\n    /**\n     *\n     *\n     * @param {*} scale\n     *\n     * @memberof StepLegend\n     */\n    dataFromScale () {\n        let domainLeg = [];\n        const scale = this.scale();\n        const { scaleType, domain, steps, scaleFn } = getScaleInfo(scale);\n        const isFraction = ele => ele % 1 !== 0;\n\n        // defining scaleParams\n        const scaleParams = {\n            smartLabel: this.labelManager(),\n            measures: this.measurement(),\n            alignment: this.config().position,\n            minTickDistance: this.minTickDistance()\n        };\n\n        if (steps instanceof Array) {\n            if (domain[0] < steps[0]) {\n                domainLeg[0] = domain[0];\n            }\n            domainLeg = [...domainLeg, ...steps];\n            if (domain[domain.length - 1] > steps[steps.length - 1]) {\n                domainLeg.push(domain[1]);\n            }\n            domainLeg = [...new Set(domainLeg)].sort((a, b) => a - b);\n        } else {\n            domainLeg = getInterpolatedData(domain, steps, scaleParams);\n        }\n\n        domainLeg = [...new Set(domainLeg)].sort((a, b) => a - b);\n        domainLeg = domainLeg.map((ele, i) => {\n            let value = null;\n            let range;\n            if (i < domainLeg.length - 1) {\n                const left = isFraction(ele) ? ele.toFixed(1) : ele;\n\n                const numRight = +domainLeg[i + 1];\n                const right = isFraction(numRight) ? numRight.toFixed(1) : numRight;\n\n                value = `${left} - ${right}`;\n                range = [left, right];\n            } else if (domainLeg.length === 1) {\n                value = isFraction(ele) ? ele.toFixed(1) : ele;\n\n                const numRight = +domainLeg[i + 1];\n                const right = isFraction(numRight) ? numRight.toFixed(1) : numRight;\n                range = [value, right];\n            }\n\n            return {\n                [scaleType]: scaleType === SIZE\n                ? scale[scaleFn](ele) * scale.getScaleFactor()\n                : scale[scaleFn](ele),\n                value,\n                id: i + 1,\n                range\n            };\n        }).filter(d => d.value !== null);\n\n        return domainLeg;\n    }\n\n     /**\n     *\n     *\n     * @param {*} effPadding\n     * @param {*} align\n     *\n     * @memberof Legend\n     */\n    getLabelSpaces () {\n        this.config({\n            item: {\n                text: {\n                    orientation: this.config().position\n                }\n            }\n        });\n        const {\n            item\n        } = this.config();\n        const stepItemBuffer = DEFAULT_MEASUREMENT.padding * 2;\n        return getItemMeasures(this, 'range', item.text.formatter, stepItemBuffer);\n    }\n\n    /**\n     *\n     *\n     *\n     * @memberof Legend\n     */\n    elemType () {\n        return RECT;\n    }\n\n     /**\n     * Render the legend with its title\n     *\n     * @param {DOM} mountPoint Point where the legend and title are to be appended\n     * @return {Instance} Current instance of legend\n     * @memberof Legend\n     */\n    render () {\n        const firebolt = this.firebolt();\n        const { classPrefix, position } = this.config();\n        const data = stepData(this.data())[position];\n\n        const legendContainer = super.render(this.mount());\n\n        // create Legend\n        const { legendItem } = createLegendSkeleton(this, legendContainer, classPrefix, data);\n        const { itemSkeleton } = createItemSkeleton(this, legendItem);\n\n        renderStepItem(this, itemSkeleton);\n        legendContainer.selectAll('div').style('float', LEFT);\n        firebolt.mapActionsAndBehaviour();\n        return legendContainer;\n    }\n\n    getCriteriaFromData (data) {\n        const fieldName = this.fieldName();\n        return {\n            [fieldName]: data.range\n        };\n    }\n}\n","import { GradientLegend, DiscreteLegend, StepLegend } from '@chartshq/muze-legend';\n\n/**\n * Contants to be used as attr\n */\nexport const ROWS = 'rows';\nexport const COLUMNS = 'columns';\nexport const DATA = 'data';\nexport const COLOR = 'color';\nexport const SHAPE = 'shape';\nexport const SIZE = 'size';\nexport const DETAIL = 'detail';\nexport const LAYERS = 'layers';\nexport const TRANSFORM = 'transform';\nexport const INITIALIZED = 'isInitialized';\nexport const SOURCE = 'source';\nexport const WIDTH = 'width';\nexport const HEIGHT = 'height';\nexport const PADDING = 'padding';\nexport const BORDER = 'border';\nexport const MARGIN = 'margin';\nexport const CONFIG = 'config';\nexport const MOUNT = 'mount';\nexport const CANVAS_UPDATED = 'canvasUpdated';\nexport const CLASSPREFIX = 'classPrefix';\nexport const POLICIES = '_policies';\nexport const LEGEND = 'legend';\nexport const TITLE = 'title';\nexport const SUB_TITLE = 'subtitle';\nexport const RESOLVE = 'resolve';\nexport const DISCRETE = 'discrete';\nexport const STEP_COLOR = 'step-color';\nexport const GRADIENT = 'gradient';\nexport const LINEAR = 'linear';\nexport const ORDINAL = 'ordinal';\nexport const MUZE_PREFIX = 'muze';\n\nexport const TITLE_TEMPLATE_NOT_ALLOWED_TAGS = [\n    'script',\n    'style'\n];\n\nexport const ICON_SHAPES = {\n    SQUARE: 'square',\n    CIRCLE: 'circle'\n};\n\nexport const IS_POINT_MAP = {\n    true: ICON_SHAPES.CIRCLE,\n    false: ICON_SHAPES.SQUARE\n};\n\nexport const LEGEND_TYPE_MAP = {\n    [`${ORDINAL}-${true}-${COLOR}`]: DiscreteLegend,\n    [`${ORDINAL}-${true}-${SIZE}`]: DiscreteLegend,\n    [`${ORDINAL}-${true}-${SHAPE}`]: DiscreteLegend,\n    [`${ORDINAL}-${false}-${COLOR}`]: DiscreteLegend,\n    [`${ORDINAL}-${false}-${SHAPE}`]: DiscreteLegend,\n    [`${ORDINAL}-${false}-${SIZE}`]: DiscreteLegend,\n    [`${LINEAR}-${false}-${SIZE}`]: DiscreteLegend,\n    [`${LINEAR}-${true}-${SIZE}`]: DiscreteLegend,\n    [`${LINEAR}-${false}-${SHAPE}`]: DiscreteLegend,\n    [`${LINEAR}-${true}-${COLOR}`]: StepLegend,\n    [`${LINEAR}-${false}-${COLOR}`]: GradientLegend\n};\n\nexport const LEFT = 'left';\nexport const RIGHT = 'right';\nexport const BOTTOM = 'bottom';\nexport const TOP = 'top';\nexport const GROUP = 'group';\nexport const LAYOUT = 'layout';\nexport const RETINAL = 'retinal';\nexport const DIMENSION = 'dimension';\nexport const MEASURE = 'measure';\nexport const VERTICAL = 'vertical';\nexport const HORIZONTAL = 'horizontal';\nexport const HORIZONTAL_CENTER = 'h-center';\nexport const VERTICAL_CENTER = 'v-center';\nexport const HIDDEN = 'hidden';\nexport const OVERFLOW = 'overflow';\nexport const OVERFLOW_X = 'overflow-x';\nexport const OVERFLOW_Y = 'overflow-y';\nexport const AUTO = 'auto';\nexport const VISIBLE = 'visible';\nexport const VERTICAL_SCROLL_BAR = 'verticalScrollBar';\nexport const HORIZONTAL_SCROLL_BAR = 'horizontalScrollBar';\nexport const GRID = 'grid';\nexport const POINT = 'point';\nexport const MESSAGE = 'message';\nexport const ERROR_MESSAGE = 'Insufficient data or incorrect configurations';\nexport const COMMON_INTERACTION = 'common';\nexport const INDIVIDUAL_INTERACTION = 'individual';\n","import { ComposedVars, SimpleVariable } from '@chartshq/visual-group';\nimport { TITLE_TEMPLATE_NOT_ALLOWED_TAGS } from './constants';\n\n/**\n * This method creates a new composed variable instance from multiple variables. This is required when we have multiple\n * variables on a single axis and the union of domain of all the variables needs to be set on the axis.\n *\n * To create a new composed variable from multiple fields,\n * ```\n *  const sharedVar = share('open', 'high', 'low', 'close');\n *  canvas.rows([sharedVar])\n *      .columns(['date']);\n * ```\n *\n * @module Operators\n * @public\n * @function share\n * @param {Array} vars Variable names.\n *\n * @return {ComposedVars} Instance of composed variable\n */\nexport const share = (...vars) => new ComposedVars(...vars.map(variable => new SimpleVariable(variable)));\n\n/**\n *\n *\n * @param {*} node\n *\n */\nfunction treeShakeNode (node) {\n    if (node.nodeType !== Node.ELEMENT_NODE) { return; }\n\n    if (TITLE_TEMPLATE_NOT_ALLOWED_TAGS.indexOf(node.tagName.toLowerCase()) !== -1) {\n        node.parentNode.removeChild(node);\n    } else {\n        for (const childNode of node.childNodes) {\n            treeShakeNode(childNode);\n        }\n    }\n}\n\n/**\n * A string template tagged function which sanitizes input html formatted string according to the allowed html tags.\n * This is used to render html in canvas components like title and tooltip.\n *\n * To render html in canvas components,\n * ```\n *     canvas.title(html`<span style=font-size:20px;>TITLE</span>`);\n * ```\n *\n * @public\n * @module Operators\n * @function html\n * @param {Array.<string>} strings - The string parts of the template.\n * @param {Array} exps - The list of evaluated expression values.\n *\n * @return {Function} Returns a function which returns the sanitized html string.\n */\nexport function html (strings, ...exps) {\n    let htmlCode = '';\n    const expLn = exps.length;\n    let i = 0;\n\n    for (; i < expLn; ++i) {\n        htmlCode += strings[i] + exps[i];\n    }\n    htmlCode += strings[i];\n\n    const frag = document.createDocumentFragment();\n    const wrapper = document.createElement('div');\n\n    frag.appendChild(wrapper);\n    wrapper.innerHTML = htmlCode;\n\n    treeShakeNode(wrapper);\n    const { innerHTML } = wrapper;\n\n    return () => innerHTML;\n}\n","import { mergeRecursive, CommonProps } from 'muze-utils';\n\nconst defaultPolicy = (registrableComponents) => {\n    const aliases = registrableComponents.map(comp => comp.alias());\n    return {\n        behaviours: {\n            '*': (propagationPayload) => {\n                const propagationCanvas = propagationPayload.sourceCanvas;\n                return propagationCanvas ? aliases.indexOf(propagationCanvas) !== -1 : true;\n            }\n        },\n        sideEffects: {\n            '*': (propagationPayload) => {\n                const propagationCanvas = propagationPayload.sourceCanvas;\n                return propagationCanvas ? aliases.indexOf(propagationCanvas) !== -1 : true;\n            }\n        }\n    };\n};\n\nconst listenerFn = (canvas, fn) => () => {\n    const valueMatrix = canvas.composition().visualGroup.matrixInstance().value;\n    valueMatrix.each(cell => fn(cell.valueOf().firebolt()));\n};\n\nconst canvasIterator = (canvases, iteratorFn, cFn) => {\n    canvases.forEach((canvas) => {\n        const matrix = canvas.composition().visualGroup.matrixInstance().value;\n        matrix.each(cell => iteratorFn(cell.valueOf().firebolt()));\n        cFn && cFn(canvas);\n        // Also register actions on canvas update\n        const throwback = canvas._throwback;\n\n        throwback.registerImmediateListener([CommonProps.MATRIX_CREATED],\n            listenerFn(canvas, iteratorFn));\n    });\n};\n\nconst registerActions = (context, type, fnName, deps) => {\n    const canvases = context._registrableComponents;\n\n    canvases.forEach((canvas) => {\n        const vGroup = canvas.composition().visualGroup;\n\n        vGroup.resolver().setFireboltDependencies(type, deps);\n        canvas.firebolt()[fnName](deps);\n    });\n};\n\n/**\n * This class is initiated only once in lifecycle and is reponsible for regisration of physical and behavioural\n * actions and side effects and the mapping between them.\n *\n * To get the instance of action model\n * ```\n *  const ActionModel = muze.ActionModel;\n * ```\n *\n * @public\n * @module ActionModel\n */\nclass ActionModel {\n    constructor () {\n        this._registrableComponents = [];\n    }\n\n    /**\n     * Takes an array of canvases on which the physical and behavioural actions will get registered.\n     *\n     * @public\n     * @param  {Canvas} components Array of canvases\n     *\n     * @return {ActionModel} Instance of action model.\n     */\n    for (...components) {\n        this._registrableComponents = components;\n        return this;\n    }\n\n    /**\n     * Registers physical actions on the canvases. It takes an object with key as the name of action and value having\n     * the definition of the action.\n     *\n     * To register a {@link PhysicalAction},\n     * ```\n     *  const ActionModel = muze.ActionModel;\n     *  ActionModel\n     *       // Physical actions will be registered on these canvases.\n     *      .for(canvas)\n     *      .registerPhysicalActions({\n     *          // Key is the name of physical action.\n     *          ctrlClick: (firebolt) => (targetEl, behaviours) => {\n     *              targetEl.on('click', function (data) {\n     *                  const event = utils.getEvent();\n     *                  const pos = utils.getClientPoint(event, this);\n     *                  // Get the data point nearest to the mouse position.\n     *                  const nearestPoint = firebolt.context.getNearestPoint(pos, {\n     *                      data\n     *                  });\n     *                  // Prepare the payload\n     *                  const payload = {\n     *                      criteria: nearestPoint.id\n     *                  };\n     *                  behaviours.forEach((behaviour) => firebolt.dispatchBehaviour(behaviour, payload));\n     *              });\n     *          }\n     *      });\n     * ```\n     * @public\n     *\n     * @param {Object} action Names of physical actions and their definitions.\n     *\n     * @return {ActionModel} Instance of the action model.\n     */\n    registerPhysicalActions (action) {\n        registerActions(this, 'physicalActions', 'registerPhysicalActions', action);\n\n        return this;\n    }\n\n    /**\n     * Registers behavioural actions on the canvases. It takes definitions of the behavioural actions and registers\n     * them on the canvases. Every behavioural action must inherit the {@link GenericBehaviour} class.\n     *\n     * To register a behavioural action\n     * ```\n     *  // Define a new behavioural action\n     *  class SingleSelectBehaviour extends GenericBehaviour {\n     *      static formalName () {\n     *          return 'singleSelect';\n     *      }\n     *\n     *      setSelectionSet (addSet, selectionSet) {\n     *          if (addSet === null) {\n     *              selectionSet.reset();\n     *          } else if (addSet.length) {\n     *              const existingAddSet = selectionSet.getExistingEntrySet(addSet);\n     *              if (existingAddSet.length){\n     *                  selectionSet.reset();\n     *              } else {\n     *               selectionSet.add(addSet);\n     *              }\n     *          } else {\n     *              selectionSet.reset();\n     *          }\n     *      }\n     * }\n     * muze.ActionModel.registerBehaviouralActions(SingleSelectBehaviour);\n     * ```\n     *\n     * @public\n     *\n     * @param {GenericBehaviour} actions Definition of behavioural actions.\n     *\n     * @return {ActionModel} Instance of action model.\n     */\n    registerBehaviouralActions (...actions) {\n        registerActions(this, 'behaviouralActions', 'registerBehaviouralActions', actions);\n        return this;\n    }\n\n    /**\n     * Registers the mapping of physical and behavioural actions. This mapping is used to establish which behavioural\n     * actions should be dispatched on any triggering of physical actions.\n     *\n     * To map physical actions with behavioural actions,\n     * ```\n     *  muze.ActionModel.registerPhysicalBehaviouralMap({\n     *      ctrlClick: {\n     *          behaviours: ['select'] // This array must be the formal names of the behavioural actions.\n     *      }\n     *  });\n     * ```\n     *\n     * @public\n     * @param {Object} map Contains the physical and behavioural action map.\n     * ```\n     *   {\n     *      // Name of the physical action\n     *      click: {\n     *          // Target element selector. This is an optional field. If not passed, then by default takes the\n     *          // container element of visual unit.\n     *          target: '.muze-layers-area path',\n     *          // Behaviours which should be dispatched on triggering of the mapped physical action.\n     *          behaviours: ['select']\n     *      }\n     *   }\n     * ```\n     *\n     * @return {ActionModel} Instance of action model.\n     */\n    registerPhysicalBehaviouralMap (map) {\n        canvasIterator(this._registrableComponents, (firebolt) => {\n            firebolt.registerPhysicalBehaviouralMap(map);\n        }, (canvas) => {\n            canvas.firebolt().registerPhysicalBehaviouralMap(map);\n        });\n        return this;\n    }\n\n    /**\n     * Registers what behaviour to propagate on dispatch of a certain behavioural action. By default, when any\n     * behavioural action is dispatched, then the same behavioural action gets propagated to all the other canvases.\n     * This can be changed using this api.\n     *\n     * To register what behaviour should be propagated on dispatch of any behavioural action,\n     * ```\n     *  ActionModel.for(canvas1, canvas2).registerPropagationBehaviourMap({\n     *      select: 'filter',\n     *      brush: 'filter'\n     *  });\n     * ```\n     *\n     * @public\n     * @param {Object} map Propagation behaviour map.\n     *\n     * @return {ActionModel} Instance of action model.\n     */\n    registerPropagationBehaviourMap (map) {\n        canvasIterator(this._registrableComponents, (firebolt) => {\n            firebolt.registerPropagationBehaviourMap(map);\n        }, (canvas) => {\n            canvas.firebolt().registerPropagationBehaviourMap(map);\n        });\n\n        return this;\n    }\n\n    /**\n     * Registers the mapping of side effects and behavioural actions. It takes an object which contains key as the\n     * name of behavioural action and the side effects which will be linked to it.\n     *\n     * To map side effects to select behaviour,\n     * ```\n     *  muze.ActionModel.mapSideEffects({\n     *      select: ['infoBox'] // This array must be the formal names of the side effects\n     *  });\n     * ```\n     *\n     * To map side effects to select behaviour, but disable all the default side effects attached with this behaviour,\n     * ```\n     *  muze.ActionModel.mapSideEffects({\n     *      select: {\n     *          effects: ['infoBox'],\n     *          preventDefaultActions: true\n     *      }\n     *  });\n     * @public\n     * @param {Object} map Mapping of behavioural actions and side effects.\n     * ```\n     *     {\n     *          select: ['infoBox']\n     *     }\n     * ```\n     * @return {ActionModel} Instance of action model.\n     */\n    mapSideEffects (map) {\n        canvasIterator(this._registrableComponents, (firebolt) => {\n            firebolt.mapSideEffects(map);\n        }, (canvas) => {\n            canvas.firebolt().mapSideEffects(map);\n        });\n        return this;\n    }\n\n    /**\n     * Registers the side effects on the registered canvases. It takes definitions of side effects and registers them\n     * on the canvases. Every side effect must inherit the base class {@link GenericSideEffect} or\n     * {@link SpawnableSideEffect} or {@link SurrogateSideEffect} class.\n     *\n     * ```\n     * // Define a custom side effect\n     *  class InfoBox extends SpawnableSideEffect {\n     *      static formalName () {\n     *          return 'infoBox';\n     *      }\n     *\n     *      apply (selectionSet) {\n     *      }\n     *  }\n     *  muze.ActionModel.registerSideEffects(InfoBox);\n     * ```\n     * @public\n     * @param  {GenericSideEffect} sideEffects Definition of side effects.\n     *\n     * @return {ActionModel} Instance of action model.\n     */\n    registerSideEffects (...sideEffects) {\n        registerActions(this, 'sideEffects', 'registerSideEffects', sideEffects);\n        return this;\n    }\n\n    /**\n     * Breaks the link between behavioural actions and physical actions. It takes an array of behavioural action\n     * and it's physical action.\n     *\n     * To dissociate behavioural actions from physical actions\n     * ```\n     *  muze.ActionModel.dissociateBehaviour(['select', 'click'], ['highlight', 'hover']);\n     * ```\n     * @public\n     * @param  {Array} maps Array of behavioural action and physical action.\n     *\n     * @return {ActionModel} Instance of action model.\n     */\n    dissociateBehaviour (...maps) {\n        canvasIterator(this._registrableComponents, (firebolt) => {\n            maps.forEach(val => firebolt.dissociateBehaviour(val[0], val[1]));\n        }, (canvas) => {\n            maps.forEach(val => canvas.firebolt().dissociateBehaviour(val[0], val[1]));\n        });\n        return this;\n    }\n\n    /**\n     * Breaks the link between side effects and behavioural actions. It takes an array of formal names of the side\n     * effects and it's linked behavioural action.\n     *\n     * To dissociate side effects from behavioural actions\n     * ```\n     *  muze.ActionModel.dissociateSideEffect(['crossline', 'highlight'], ['selectionBox', 'brush']);\n     * ```\n     * @public\n     * @param  {Array} maps Array of side effects and behavioural actions.\n     *\n     * @return {ActionModel} Instance of action model.\n     */\n    dissociateSideEffect (...maps) {\n        canvasIterator(this._registrableComponents, (firebolt) => {\n            maps.forEach(val => firebolt.dissociateSideEffect(val[0], val[1]));\n        }, (canvas) => {\n            maps.forEach(val => canvas.firebolt().dissociateSideEffect(val[0], val[1]));\n        });\n        return this;\n    }\n\n    /**\n     * By default cross interactivity is disabled between canvases. This enables cross interaction between the canvases\n     * so that any action happening in one canvas gets dispatched on other canvases as well. An optional policy can also\n     * be passed in this method. The policy can be used to control on which canvases the behavioural actions and\n     * side effects gets dispatched.\n     *\n     * To just enable cross interactivity between two canvases,\n     * ```\n     *  ActionModel.for(canvas1, canvas2)\n     *      .enableCrossInteractivity();\n     * ```\n     *\n     * To enable cross interactivity but enable any behavioural action only when it is triggered from canvas1.\n     * ```\n     *  ActionModel.for(canvas1, canvas2)\n     *      .enableCrossInteractivity({\n     *          behaviours: {\n     *              // Here * stands for any behavioural action name. We can also give any name of behavioural action\n     *              // in place of this.\n     *              '*': (propPayload, context) => {\n     *                  return propPayload.sourceCanvas === canvas1.alias();\n     *              }\n     *          }\n     *      });\n     * ```\n     *\n     * To enable cross interactivity but enable tooltip effect if the action is propagated from canvas1,\n     * ```\n     *  ActionModel.for(canvas1, canvas2)\n     *      .enableCrossInteractivity({\n     *          sideEffects: {\n     *              tooltip: (propPayload, context) => {\n     *                  return propPayload.sourceCanvas === canvas1.alias();\n     *              }\n     *          }\n     *      });\n     * ```\n     * @public\n     * @param {Object} policy Policy definition.\n     *\n     * @return {ActionModel} Instance of action model.\n     */\n    enableCrossInteractivity (policy = {}) {\n        const registrableComponents = this._registrableComponents;\n        const mergedPolicy = mergeRecursive(mergeRecursive({}, defaultPolicy(registrableComponents)), policy);\n\n        registrableComponents.forEach((canvas) => {\n            canvas.firebolt().crossInteractionPolicy(mergedPolicy);\n        });\n\n        return this;\n    }\n}\n\nexport const actionModel = (() => new ActionModel())();\n","import { MUZE_PREFIX } from '../constants';\n\nexport const TITLE_CONFIG = {\n    position: 'top',\n    align: 'left',\n    padding: 4,\n    className: `${MUZE_PREFIX}-title-container`\n};\n\nexport const SUB_TITLE_CONFIG = {\n    position: 'top',\n    align: 'left',\n    padding: 16,\n    maxLines: 2,\n    className: `${MUZE_PREFIX}-subtitle-container`\n};\n\nexport const MESSAGE_CONFIG = {\n    className: `${MUZE_PREFIX}-message-container`,\n    baseFontLimit: 16,\n    upperFontLimit: 24,\n    baseSizeLimit: 100,\n    upperSizeLimit: 300,\n    fractionImage: 0.8,\n    fractionChild: 0.7\n};\n\nexport const CANVAS = 'canvas';\n","import { mergeRecursive } from 'muze-utils';\nimport {\n    ROWS,\n    COLUMNS,\n    COLOR,\n    SHAPE,\n    SIZE,\n    DETAIL,\n    LAYERS,\n    TRANSFORM,\n    TITLE,\n    SUB_TITLE\n} from '../constants';\nimport { TITLE_CONFIG, SUB_TITLE_CONFIG } from './defaults';\n/**\n * This is the local options semantics based on which setters getters are created and reactivity is initiated.\n * This local object is only valid for Canvas.\n * Canvas merges global and local object both to the model\n *\n * Format\n *  PROPERTRY_NAME: {\n *      value: // default value of the property,\n *      meta: {\n *          typeCheck: // The setter value will be checked using this. If the value is function then the setter value\n *                     // is passed as args.\n *          typeExpected: // The output of typecheck action will be tested against this. Truthy value will set the\n *                       // value to the setter\n *          sanitizaiton: // Need for sanitization before type is checked\n *      }\n *  }\n *\n * @module LocalOptions\n */\n\nexport const localOptions = {\n    [ROWS]: {\n        value: null,\n        meta: {\n            typeCheck: 'constructor',\n            typeExpected: 'Array'\n        }\n    },\n    [COLUMNS]: {\n        value: null,\n        meta: {\n            typeCheck: 'constructor',\n            typeExpected: 'Array'\n        }\n    },\n    [COLOR]: {\n        value: null,\n        meta: {\n            typeCheck: 'constructor',\n            typeExpected: 'Object',\n            sanitization: (config) => {\n                if (typeof config === 'string' || !config) {\n                    return {\n                        field: config\n                    };\n                }\n                return config;\n            }\n        }\n    },\n    [SHAPE]: {\n        value: null,\n        meta: {\n            typeCheck: 'constructor',\n            typeExpected: 'Object',\n            sanitization: (config) => {\n                if (typeof config === 'string' || !config) {\n                    return {\n                        field: config\n                    };\n                }\n                return config;\n            }\n        }\n    },\n    [SIZE]: {\n        value: null,\n        meta: {\n            typeCheck: 'constructor',\n            typeExpected: 'Object',\n            sanitization: (config) => {\n                if (typeof config === 'string' || !config) {\n                    return {\n                        field: config\n                    };\n                }\n                return config;\n            }\n        }\n    },\n    [DETAIL]: {\n        value: [],\n        meta: {\n            typeCheck: 'constructor',\n            typeExpected: 'Array'\n        }\n    },\n\n    [LAYERS]: {\n        value: [],\n        meta: {\n            typeCheck: 'constructor',\n            typeExpected: 'Array'\n        }\n    },\n    [TRANSFORM]: {\n        value: null,\n        meta: {\n            typeCheck: 'constructor',\n            typeExpected: 'Object'\n        }\n    }\n};\n\nexport const canvasOptions = {\n    [TITLE]: {\n        value: [null, null],\n        meta: {\n            takesMultipleParams: true,\n            typeCheck: ([arg1, arg2]) => typeof arg1 === 'function' && typeof arg2 === 'object',\n            sanitization: ([title, titleConfig]) => {\n                let t = title;\n                if (typeof title === 'string' || !title) {\n                    t = () => title;\n                }\n                const defConfig = mergeRecursive({}, TITLE_CONFIG);\n                return [t, mergeRecursive(defConfig, titleConfig)];\n            }\n        }\n    },\n    [SUB_TITLE]: {\n        value: [null, null],\n        meta: {\n            takesMultipleParams: true,\n            typeCheck: ([arg1, arg2]) => typeof arg1 === 'function' && typeof arg2 === 'object',\n            sanitization: ([subtitle, subtitleConfig]) => {\n                let sub = subtitle;\n                if (typeof subtitle === 'string' || !subtitle) {\n                    sub = () => subtitle;\n                }\n                const defConfig = mergeRecursive({}, SUB_TITLE_CONFIG);\n                return [sub, mergeRecursive(defConfig, subtitleConfig)];\n            }\n        }\n    }\n};\n","export default class LayoutComponent {\n    constructor (name, dimensions, seed) {\n        this._seed = seed;\n        this._boundBox = {\n            height: dimensions.height,\n            width: dimensions.width,\n            top: null,\n            left: null\n        };\n        this._renderAt = null;\n        this._alignWith = null;\n        this._alignment = null;\n        this._target = null;\n        this._position = null;\n        this._componentName = name;\n        this._className = null;\n    }\n\n    getLogicalSpace () {\n        throw new Error('getLogicalSpace is not defined');\n    }\n\n    setSpatialConfig () {\n        throw new Error('setSpatialSpace is not defined');\n    }\n\n    name (param) {\n        if (param) {\n            this._componentName = param;\n        }\n        return this._componentName;\n    }\n\n    target (param) {\n        if (param) {\n            this._target = param;\n        }\n        return this._target;\n    }\n\n    position (param) {\n        if (param) {\n            this._position = param;\n        }\n        return this._position;\n    }\n\n    alignment (param) {\n        if (param) {\n            this._alignment = param;\n        }\n        return this._alignment;\n    }\n\n    alignWith (param) {\n        if (param) {\n            this._alignWith = param;\n        }\n        return this._alignWith;\n    }\n\n    renderAt (param) {\n        if (param) {\n            this._renderAt = param;\n        }\n        return this._renderAt;\n    }\n\n    boundBox (param) {\n        if (param) {\n            Object.assign(this._boundBox, param);\n        }\n        return this._boundBox;\n    }\n\n    className (param) {\n        if (param) {\n            this._className = param;\n        }\n        return this._className;\n    }\n\n    draw () {\n        throw new Error('draw is not defined');\n    }\n\n    attachListener () {\n        return this;\n    }\n  }\n\n","import LayoutComponent from './layoutComponent';\n\nclass DummyComponent extends LayoutComponent {\n    getLogicalSpace () {\n        return {\n            width: this.boundBox().width,\n            height: this.boundBox().height\n        };\n    }\n\n    setSpatialConfig (conf) {\n        this.boundBox({ top: conf.y, left: conf.x });\n        this.newDimensions = {\n            width: conf.width,\n            height: conf.height\n        };\n        this.renderAt(conf.renderAt);\n        return this;\n    }\n\n    draw () {\n        if (!this.component) {\n            throw new Error(`Component not set for ${this.componentName}`);\n        }\n        this.component.mount(document.getElementById(this.renderAt)); // Change the draw method to component draw\n        return this;\n    }\n}\n\nexport default DummyComponent;\n","import { COMMON_INTERACTION } from './constants';\n\nexport const DEFAULT_CONFIG = {\n    classPrefix: 'muze',\n    interaction: {\n        sideEffects: {\n            tooltip: COMMON_INTERACTION\n        },\n        behaviours: {\n            highlight: COMMON_INTERACTION,\n            select: COMMON_INTERACTION,\n            brush: COMMON_INTERACTION,\n            filter: COMMON_INTERACTION\n        },\n        tooltip: {\n\n        }\n    },\n    pagination: 'scroll',\n    scrollBar: {\n        thickness: 10,\n        speed: 2,\n        vertical: {\n            align: 'right'\n        },\n        horizontal: {\n            align: 'bottom'\n        }\n    },\n    legend: {\n        position: 'right',\n        color: {\n            show: true,\n            padding: 1,\n            margin: 3,\n            border: 1,\n            height: 20,\n            width: 20\n        },\n        shape: {\n            show: true,\n            padding: 1,\n            margin: 3,\n            border: 1,\n            height: 20,\n            width: 20\n        },\n        size: {\n            show: true,\n            padding: 1,\n            margin: 3,\n            border: 1,\n            height: 20,\n            width: 20\n        }\n    },\n    showHeaders: false,\n    minWidth: 100,\n    minHeight: 100,\n    facet: {\n        rows: {\n            minCharacters: 3\n        },\n        columns: {\n            maxLines: 2,\n            verticalAlign: 'middle',\n            minCharacters: 1\n        }\n    },\n    border: {\n        style: 'solid',\n        color: '#d6d6d6',\n        width: 2,\n        collapse: true,\n        spacing: 0\n    },\n    autoGroupBy: {\n        disabled: false\n    },\n    invalidValues: {},\n    sort: {}\n};\n\nexport const EXCLUDE_CONFIG_KEYS = ['sort'];\n","import { DEFAULT_CONFIG } from '../../../../muze/src/defaults';\n\nconst DEFAULT_WIDTH = 600;\nconst DEFAULT_HEIGHT = 400;\nconst DEFAULT_CLASS_NAME = `${DEFAULT_CONFIG.classPrefix}-layout-container-component`;\nconst NODE_PREFIX = `${DEFAULT_CONFIG.classPrefix}-layout-container`;\n\nexport {\n  DEFAULT_WIDTH,\n  DEFAULT_HEIGHT,\n  DEFAULT_CLASS_NAME,\n  NODE_PREFIX\n};\n","export default class DefinitionModel {\n    constructor (config) {\n        this._host = config.host || null;\n        this._cut = config.cut || null;\n        this._ratioWeight = config.ratioWeight === 0 ? 0 : config.ratioWeight || 1;\n        this._preferred = config.preferred || false;\n        this._lanes = config.lanes || [];\n        this._remainingHeight = 0;\n        this._remainingWidth = 0;\n    }\n\n    host (host) {\n        if (host) {\n            this._host = host;\n        }\n        return this._host;\n    }\n\n    preferred (preferred) {\n        if (preferred) {\n            this._preferred = preferred;\n        }\n        return this._preferred;\n    }\n\n    cut (cut) {\n        if (cut) {\n            this._cut = cut;\n        }\n        return this._cut;\n    }\n\n    ratioWeight (ratioWeight) {\n        if (ratioWeight) {\n            this._ratioWeight = ratioWeight;\n        }\n        return this._ratioWeight;\n    }\n\n    lanes (lanes) {\n        if (lanes) {\n            this._lanes = lanes;\n        }\n        return this._lanes;\n    }\n\n    remainingHeight (remainingHeight) {\n        if (remainingHeight) {\n            this._remainingHeight = remainingHeight;\n        }\n        return this._remainingHeight;\n    }\n\n    remainingWidth (remainingWidth) {\n        if (remainingWidth) {\n            this._remainingWidth = remainingWidth;\n        }\n        return this._remainingWidth;\n    }\n}\n","import { NODE_PREFIX } from '../../constants/defaults';\nimport DefinitionModel from '../definition-manager/definitionModel';\nimport DummyComponent from '../../layout-component/dummy-component';\n/**\n * Compares two strings in lowercase\n *\n * @export\n * @param {string} value the value to be compared\n * @param {string} compareTo whom the value would be compared\n * @return {boolean} true if values are equal\n */\nexport function isEqual (value, compareTo) {\n    if (typeof value !== 'string' || typeof compareTo !== 'string') {\n        throw new TypeError('value and compareTo must be string');\n    }\n    return value.toLowerCase() === compareTo.toLowerCase();\n}\n\nexport const getNodeId = (() => {\n    let _uid = 0;\n    return () => `${NODE_PREFIX}-${++_uid}`;\n})();\n\nexport function yExtraSpace (node) {\n    let smallestHeight = 0;\n    if (node.getCutType() === 'v') {\n        smallestHeight = smallestExtraHeightHorizontally(node); // eslint-disable-line no-use-before-define\n    } else if (node.getCutType() === 'h') {\n        node.children().forEach((child) => {\n            smallestHeight += yExtraSpace(child);\n        });\n    } else if (node.model().host() && node.model().host().getLogicalSpace) {\n        const containerHeight = node.boundBox().height;\n        const hostHeight = node.model().host().getLogicalSpace().height;\n\n        smallestHeight = containerHeight - hostHeight;\n        if (smallestHeight < 0) {\n            smallestHeight = 0;\n        }\n    } else {\n        smallestHeight = 0;\n    }\n    return smallestHeight;\n}\n\nexport function smallestExtraHeightHorizontally (node) {\n    let smallestHeight = Number.MAX_SAFE_INTEGER;\n    node.children().forEach((child) => {\n        const h = yExtraSpace(child);\n        if (h < smallestHeight) {\n            smallestHeight = h;\n        }\n    });\n    return smallestHeight;\n}\n\nexport function xExtraSpace (node) {\n    let smallestWidth = 0;\n    if (node.getCutType() === 'h') {\n        smallestWidth = smallestExtraWidthVertically(node); // eslint-disable-line no-use-before-define\n    } else if (node.getCutType() === 'v') {\n        node.children().forEach((child) => {\n            smallestWidth += xExtraSpace(child);\n        });\n    } else if (node.model().host() && node.model().host().getLogicalSpace) {\n        const containerWidth = node.boundBox().width;\n        const hostWidth = node.model().host().getLogicalSpace().width;\n        smallestWidth = containerWidth - hostWidth;\n        if (smallestWidth < 0) {\n            smallestWidth = 0;\n        }\n    } else {\n        smallestWidth = 0;\n    }\n    return smallestWidth;\n}\n\nexport function smallestExtraWidthVertically (node) {\n    let smallestWidth = Number.MAX_SAFE_INTEGER;\n    node.children().forEach((child) => {\n        const w = xExtraSpace(child);\n        if (w < smallestWidth) {\n            smallestWidth = w;\n        }\n    });\n    return smallestWidth;\n}\n\nexport function determineBoundBox (bb, i, arr, instance) {\n    if (i) {\n    // if not first sibling, take boundbox from previous sibling\n        const lastSibling = arr[i - 1];\n        const { top: _top, left: _left, height: _height, width: _width } = lastSibling.boundBox();\n        return {\n            width: bb.width,\n            height: bb.height,\n\n            top: instance.parentCut() === 'h'\n        ? _top + _height : _top,\n\n            left: instance.parentCut() === 'h'\n        ? _left : _left + _width\n        };\n    }\n  // if first sibling, take boundbox from parent\n    const { top: _top, left: _left } = instance.parent().boundBox();\n    return {\n        width: bb.width,\n        height: bb.height,\n        top: _top,\n        left: _left\n    };\n}\n\n// prepares the targetComponent Map for target Mapping ie. where a component should lie\nexport function prepareTargetComponentMap (context) {\n    context.targetComponentMap(new Map());\n    context.componentMap().forEach((value) => {\n        if (context.targetComponentMap().has(value.target())) {\n            context.targetComponentMap().get(value.target()).push(value);\n        } else {\n            const temp = [];\n            temp.push(value);\n            context.targetComponentMap().set(value.target(), temp);\n        }\n    });\n}\n\nexport function getComponent (canvasComponent, componentName) {\n    const comp = canvasComponent.find(component => component.name() === componentName);\n    return (comp && comp !== -1) ? comp : null;\n}\nexport function createPlaceHolderComponent (height, width, position) {\n    const comp = new DummyComponent(0, { height, width });\n    comp.name('placeHolder');\n    comp.position(position);\n    return comp;\n}\n\nexport function placeComponent (definitionModel, component, isPreferred = false, isGridComponent = false) {\n    let cut = '';\n    let componentRatioWidth = 1;\n    let leftOvercomponentRationWidth = 1;\n    let leftHeight = 0;\n    let leftWidth = 0;\n\n    if (!component) {\n        return { first: definitionModel, second: definitionModel };\n    }\n\n    const { height: componentHeight, width: componentWidth } = component.getLogicalSpace();\n    const position = component.position();\n    if (position === 'top' || position === 'bottom') {\n        cut = 'h';\n        componentRatioWidth = componentHeight / definitionModel.remainingHeight();\n        leftHeight = definitionModel.remainingHeight() - componentHeight;\n        leftWidth = definitionModel.remainingWidth();\n    } else {\n        cut = 'v';\n        componentRatioWidth = componentWidth / definitionModel.remainingWidth();\n        leftWidth = definitionModel.remainingWidth() - componentWidth;\n        leftHeight = definitionModel.remainingHeight();\n    }\n    leftOvercomponentRationWidth = 1 - componentRatioWidth;\n\n// update parentModel\n    definitionModel.cut(cut);\n    const firstLaneConfig = {\n        host: component.name(),\n        cut: null,\n        ratioWeight: componentRatioWidth,\n        preferred: isGridComponent ? false : isPreferred,\n        lanes: []\n    };\n    const firstLane = new DefinitionModel(firstLaneConfig);\n    firstLane.remainingHeight(componentHeight);\n    firstLane.remainingWidth(componentWidth);\n\n    const secondLaneConfig = {\n        host: null,\n        cut: null,\n        ratioWeight: leftOvercomponentRationWidth,\n        preferred: isGridComponent ? false : !isPreferred,\n        lanes: []\n    };\n    const secondLane = new DefinitionModel(secondLaneConfig);\n    secondLane.remainingHeight(leftHeight);\n    secondLane.remainingWidth(leftWidth);\n    if (isPreferred) {\n        definitionModel.lanes([firstLane]);\n    } else if (position === 'top' || position === 'left') {\n        definitionModel.lanes([firstLane, secondLane]);\n    } else {\n        definitionModel.lanes([secondLane, firstLane]);\n    }\n    return { first: firstLane, second: secondLane };\n}\n\nexport function placeGridComponent (definitionModel, gridComponents) {\n    let tempDefModel = definitionModel;\n    const rows = gridComponents.length;\n    const column = rows ? gridComponents[0].length : 0;\n    const height = gridComponents.reduce((acc, val) => (acc + val[0].getLogicalSpace().height), 0);\n\n    for (let i = 0; i < column; i++) {\n        const iscolumnPreffered = i === column - 1;\n        const columnPlaceHolderComponent = createPlaceHolderComponent(height,\n                                                    gridComponents[0][i].getLogicalSpace().width, 'left');\n        const { first, second } = placeComponent(tempDefModel, columnPlaceHolderComponent, iscolumnPreffered);\n        tempDefModel = first;\n        for (let j = 0; j < rows; j++) {\n            const rowpreffred = j === (rows - 1);\n            tempDefModel = placeComponent(tempDefModel, gridComponents[j][i], rowpreffred, true).second;\n        }\n        tempDefModel = second;\n    }\n    return tempDefModel;\n}\n\nexport function negotiateDimension (node) {\n    let preferred;\n    let cumultiveExtraSpaceAmt = 0;\n    let alteredDim;\n    let nonAlteredDim;\n\n    const childrenLength = node.children().length;\n\n    for (let index = 0; index < childrenLength; index++) {\n        let fn;\n        let extraSpaceAmt;\n        const child = node.children()[index];\n\n        if (child.parentCut() === 'h') {\n            fn = yExtraSpace;\n            alteredDim = 'height';\n            nonAlteredDim = 'width';\n        } else {\n            fn = xExtraSpace;\n            alteredDim = 'width';\n            nonAlteredDim = 'height';\n        }\n  // if vertical then get extra height from other node and push it to the preferred node.\n  // for horizontal cut the same thing is to be done with width\n        if (child.isPreferred()) {\n    // push extra space in sink. Execute it when all non preferred space are computed.\n            preferred = child;\n\n            continue; // eslint-disable-line no-continue\n        }\n  // reduce own height and save it in a var\n        cumultiveExtraSpaceAmt += (extraSpaceAmt = fn(child));\n        child.boundBox()[alteredDim] -= extraSpaceAmt;\n  // update nonaltered dim from parent for any change which happened during negotiation\n        child.boundBox()[nonAlteredDim] = child.parent().boundBox()[nonAlteredDim];\n\n        negotiateDimension(child);\n    }\n\n    if (preferred) {\n        preferred.boundBox()[alteredDim] += cumultiveExtraSpaceAmt;\n        preferred.boundBox()[nonAlteredDim] = preferred.parent().boundBox()[nonAlteredDim];\n        negotiateDimension(preferred);\n    }\n}\n\nexport function computePosition (node) {\n    node.children().forEach((child, i, children) => {\n        const boundBox = determineBoundBox(child.boundBox(), i, children, child);\n        child.boundBox(boundBox);\n        computePosition(child);\n    });\n}\n\nexport function allocateBoundingBox (node) {\n    const totalWeight = node.children()\n                            .map(child => child.model().ratioWeight())\n                            .reduce((carry, val) => carry + val, 0);\n\n    node.children().forEach((child, i, children) => {\n        const lastSibling = children[i - 1];\n        const ratio = child.model().ratioWeight() / totalWeight;\n\n        if (child.parentCut() === 'h') {\n            child.boundBox({\n                top: i ? lastSibling.boundBox().top + lastSibling.boundBox().height : 0,\n                left: child.parent().boundBox().left,\n                height: child.parent().boundBox().height * ratio,\n                width: child.parent().boundBox().width\n            });\n        } else {\n            child.boundBox({\n                top: child.parent().boundBox().top,\n                left: i ? lastSibling.boundBox().left + lastSibling.boundBox().width : 0,\n                height: child.parent().boundBox().height,\n                width: child.parent().boundBox().width * ratio\n            });\n        }\n        allocateBoundingBox(child);\n    });\n}\n\n","import { getNodeId } from '../helper';\nimport { LayoutComponent } from '../../layout-component';\n\nclass Node {\n    constructor (data) {\n        this._model = data;\n        this._parent = null;\n        this._children = [];\n        this._parentCut = null;\n        this._boundBox = {\n            top: null,\n            left: null,\n            height: null,\n            width: null\n        };\n\n        this._id = this._model.host() instanceof LayoutComponent && this._model.host().renderAt() ?\n                    this._model.host().renderAt() :\n                    getNodeId();\n    }\n\n    addChildren (entries) {\n        this._children.push(...entries);\n        entries.forEach((e) => { e.parent(this); });\n    }\n\n    isRoot () {\n        return this._parent === null;\n    }\n\n    isLeaf () {\n        return !this._children.length;\n    }\n\n    getCutType () {\n        return this._model.cut();\n    }\n\n    isPreferred () {\n        return !!this._model.preferred();\n    }\n\n    children (children) {\n        if (children) {\n            this._children = children;\n        }\n        return this._children;\n    }\n\n    parent (parent) {\n        if (parent) {\n            this._parent = parent;\n        }\n        return this._parent;\n    }\n\n    parentCut (parentCut) {\n        if (parentCut) {\n            this._parentCut = parentCut;\n        }\n        return this._parentCut;\n    }\n\n    id (id) {\n        if (id) {\n            this._id = id;\n        }\n        return this._id;\n    }\n\n    model (model) {\n        if (model) {\n            this._model = model;\n        }\n        return this._model;\n    }\n\n    boundBox (bound) {\n        if (bound) {\n            this._boundBox = {\n                top: bound.top,\n                left: bound.left,\n                height: bound.height,\n                width: bound.width\n            };\n        }\n        return this._boundBox;\n    }\n  /**\n     * function to search a node and update it with the config provided.\n     * @param  {Object} nodeconfig\n     */\n    updateNode (nodeconfig) {\n        if (this._id === nodeconfig._id) {\n            this._model.cut(nodeconfig.cut);\n            this._model.ratioWeight(nodeconfig.ratioWeight);\n        } else {\n            this._children.forEach((node) => {\n                if (node._id === nodeconfig._id) {\n                    node.model.cut(nodeconfig.cut);\n                    node.model.ratioWeight(nodeconfig.ratioWeight);\n                    return;\n                }\n                this.searchNode(node, nodeconfig);\n            });\n        }\n    }\n\n  // Recursive function to search a node\n    searchNode (node, nodeconfig) {\n        node.children().forEach((childNode) => {\n            if (childNode.id() === nodeconfig._id) {\n                childNode.model().cut(nodeconfig.cut);\n                childNode.model().ratioWeight(nodeconfig.ratioWeight);\n            } else {\n                this.searchNode(childNode, nodeconfig);\n            }\n        });\n    }\n\n  /**\n     * function to delete a node from tree Structure.\n     * @param  {String} nodeId - node Id of the Node\n     */\n    delete (nodeId) {\n        this._children.forEach((node) => {\n            if (node.id() === nodeId) {\n                const index = this._children.indexOf(node);\n                this._model.lanes().splice(index, 1);\n            }\n            this.deleteSearchNode(node, nodeId);\n        });\n    }\n\n  // Recursive function to search a node\n    deleteSearchNode (node, nodeId) {\n        node.children().forEach((childNode) => {\n            if (childNode.id() === nodeId) {\n                const index = node.children().indexOf(childNode);\n                node.model().lanes().splice(index, 1);\n            } else {\n                this.deleteSearchNode(childNode, nodeId);\n            }\n        });\n    }\n}\n\nexport default Node;\n","import Node from '../tree';\nimport {\n    allocateBoundingBox,\n    negotiateDimension,\n    computePosition\n} from '../helper';\n\nexport default class LayoutModel {\n    constructor (measurements, config) {\n        this._measurements = measurements;\n        this._config = config;\n        this._root = this.createTree(this._config, null);\n        this.setBoundBox();\n    }\n\n    createTree (config, parent) {\n        const node = new Node(config);\n        if (parent) {\n            node.parentCut(parent.getCutType());\n            parent.addChildren([node]);\n        } else {\n            this._root = node;\n        }\n        for (const lane of config.lanes()) {\n            this.createTree(lane, node);\n        }\n\n        return this._root;\n    }\n\n    setBoundBox () {\n        this._root.boundBox({\n            top: 0,\n            left: 0,\n            width: this._measurements.width,\n            height: this._measurements.height\n        });\n        allocateBoundingBox(this._root);\n    }\n\n    setHostPosition (node) {\n        node.children().forEach((child) => {\n            LayoutModel.setHostSpatialConfig(child);\n            this.setHostPosition(child);\n        });\n    }\n\n    static setHostSpatialConfig (node) {\n        const bb = node.boundBox();\n        const host = node.model().host();\n        if (host && host.setSpatialConfig) {\n            const conf = {\n                x: bb.left,\n                y: bb.top,\n                width: bb.width,\n                height: bb.height,\n                renderAt: node.id()\n            };\n            host.setSpatialConfig(conf);\n        }\n    }\n\n    negotiate () {\n        negotiateDimension(this._root);\n        computePosition(this._root);\n        return this;\n    }\n\n    broadcast () {\n        this.setHostPosition(this._root);\n        return this;\n    }\n\n    tree () {\n        return this._root;\n    }\n}\n","/**\n * This file exports constants that will be used to\n * create the state store of the table layout.\n */\n/**\n * The index of top, bottom and center in the matrix\n */\nexport const VIEW_INDEX = {\n    top: 0,\n    center: 1,\n    bottom: 2\n};\n\nexport const ROW_MATRIX_INDEX = {\n    0: 'top',\n    1: 'center',\n    2: 'bottom'\n};\n\nexport const COLUMN_MATRIX_INDEX = {\n    0: 'left',\n    1: 'middle',\n    2: 'right'\n};\n\n/**\n * The width of the grid suppied by the user.\n */\nexport const GRID_WIDTH = 'width';\n\n/**\n * The height of the grid supplied by the user.\n */\nexport const GRID_HEIGHT = 'height';\n\n/**\n  * The border for the grid\n  */\nexport const BORDER = 'border';\n\n /**\n  *  The index of the first visible row in view matrix.\n  */\nexport const ROW_POINTER = 'rowPointer';\n\n/**\n * The index of the first visible column in the view matrix.\n */\nexport const COLUMN_POINTER = 'columnPointer';\n\n/**\n * Flag to specify whether row sizes should be equal.\n */\nexport const ROW_SIZE_IS_EQUAL = 'isRowSizeEqual';\n\n/**\n * Flag to specify whether column sizes are equal.\n */\nexport const COLUMN_SIZE_IS_EQUAL = 'isColumnSizeEqual';\n\n/**\n * Field to store an array an of the widths of visible columns.\n * @computed\n */\nexport const COLUMN_WIDTHS = 'visibleColumnWidths';\n\n/**\n * Field to store an array of heights of visible rows.\n * @computed\n */\nexport const ROW_HEIGHTS = 'visibleRowHeights';\n\n/**\n * Field to store the width of the left matrix.\n * @computed\n */\nexport const LEFT_MATRIX_WIDTH = 'leftMatrixWidth';\n\n/**\n * Field to store the width of the right matrix.\n * @computed\n */\nexport const RIGHT_MATRIX_WIDTH = 'rightMatrixWidth';\n\n/**\n * Field to store the height of the top matrix.\n * @computed\n */\nexport const TOP_MATRIX_HEIGHT = 'topMatrixHeight';\n\n/**\n * Field to store the height of the bottom matrix.\n * @computed\n */\nexport const BOTTOM_MATRIX_HEIGHT = 'bottomMatrixHeight';\n\n/**\n * The dom element to render the layout inside.\n */\nexport const MOUNT_POINT = 'mount';\n\n/**\n * The id attribute of the left table element.\n */\nexport const LEFT_TABLE_ID = 'grid-left';\n\n/**\n * The id attribute of the right table element.\n */\nexport const RIGHT_TABLE_ID = 'grid-right';\n\n/**\n * The id attribute of the top table.\n */\nexport const TOP_TABLE_ID = 'grid-top';\n\n/**\n * The id attribute of the bottom table.\n */\nexport const BOTTOM_TABLE_ID = 'grid-bottom';\n\n/**\n * The id attribute of the center table.\n */\nexport const CENTER_TABLE_ID = 'grid-center';\n\n/**\n * The id attribute of the top div.\n */\nexport const TOP_DIV_ID = 'muze-div-top';\n\n/**\n * The id attribute of the bottom div.\n */\nexport const BOTTOM_DIV_ID = 'muze-div-bottom';\n\n/**\n * The id attribute of the center div.\n */\nexport const CENTER_DIV_ID = 'muze-div-center';\n\n/**\n * Field that indicates if the row configuration has changed\n */\nexport const HAVE_ROWS_CHANGED = 'haveRowsChanged';\n\n/**\n * Field that indicates if the column configuration has changed\n */\nexport const HAVE_COLUMNS_CHANGED = 'haveColumnsChanged';\n\n/**\n * Field that indicates if the values configuration for the center matrix has changed\n */\nexport const HAVE_VALUES_CHANGED = 'haveValuesChanged';\n\n/**\n * Field that indicates the width of row matrix\n */\nexport const ROW_MATRIX_WIDTH = 'rowMatrixWidth';\n\n/**\n * Field that indicates the height of row matrix\n */\nexport const COLUMN_MATRIX_HEIGHT = 'columnMatrixHeight';\n\n/**\n * Field that indicates the unit width of layout\n */\nexport const UNIT_WIDTH = 'unitWidth';\n\n/**\n * Field that indicates the unit height of layout\n */\nexport const UNIT_HEIGHT = 'unitHeight';\n\n/**\n * Field that indicates the style object\n */\nexport const STYLE = 'style';\n\n/**\n * Field that indicates the color configuration\n */\nexport const COLOR = 'color';\n\n/**\n * Field that indicates width\n */\nexport const WIDTH = 'width';\n\n/**\n * Field that indicates collpase property for border\n */\nexport const COLLAPSE = 'collapse';\n\n/**\n * Field that indicates spacing property for border\n */\nexport const SPACING = 'spacing';\n\n/**\n * Field that indicates spacing property for border\n */\nexport const DISTRIBUTION = 'distribution';\n\n/**\n * Field that indicates spacing property for border\n */\nexport const GUTTERSPACE = 'gutterSpace';\n\n/**\n * Field that indicates spacing property for border\n */\nexport const BREAK_PAGE = 'breakPage';\n\n/**\n * Field that indicates spacing property for border\n */\nexport const SHOW_ROW_BORDERS = 'showRowBorders';\n\n/**\n * Field that indicates spacing property for border\n */\nexport const SHOW_COL_BORDERS = 'showColBorders';\n\n/**\n * Field that indicates spacing property for border\n */\nexport const SHOW_VALUE_BORDERS = 'showValueBorders';\n\nexport const HEIGHT = 'height';\nexport const COLUMN = 'column';\nexport const ROW = 'row';\nexport const TOP = 'top';\nexport const LEFT = 'left';\nexport const RIGHT = 'right';\nexport const BOTTOM = 'bottom';\nexport const CENTER = 'center';\nexport const CLICK = 'click';\nexport const ROW_LEFT = 'rowLeft';\nexport const ROW_RIGHT = 'rowRight';\nexport const COLUMN_BOTTOM = 'colBottom';\nexport const COLUMN_TOP = 'colTop';\nexport const AUTO = 'auto';\nexport const ROW_SPAN = 'rowSpan';\nexport const COL_SPAN = 'colSpan';\nexport const ROW_ROOT = 'rowRoot';\nexport const COLUMN_ROOT = 'columnRoot';\nexport const PRIMARY = 'primary';\nexport const SECONDARY = 'secondary';\nexport const VERTICAL = 'vertical';\nexport const HORIZONTAL = 'horizontal';\nexport const GRID = 'grid';\n\nexport const BLANK_BORDERS = 'rgba(0,0,0,0)';\n\nexport const PAGINATION = 'pagination';\nexport const BUFFER = 'buffer';\nexport const HOLISTIC = 'holistic';\nexport const SCROLL = 'scroll';\nexport const MIDDLE = 'middle';\nexport const NO_BORDERS = null;\n\nexport const MAX_WIDTH_AVAIL_FOR_COL_MATRIX = 'maxWidthAvailableForColumnMatrix';\nexport const COLUMN_MATRIX = 'columnMatrix';\nexport const MAX_HEIGHT_AVAIL_FOR_ROW_MATRIX = 'maxHeightAvailableForRowMatrix';\nexport const ROW_MATRIX = 'rowMatrix';\n","/* eslint no-undef: \"off\" */\n/* eslint default-case: \"off\" */\nexport class Utils {\n    static isDOMElement (element) {\n        return element instanceof Element;\n    }\n\n    static getID (element) {\n        return element.id;\n    }\n\n    static getElement (id) {\n        return document.getElementById(id);\n    }\n\n    static findContainer (data) {\n        return data.filter(coordinate => coordinate.parent == null)[0];\n    }\n  /**\n   * static method to remove the div\n   * @param  {} divId - div ID to be removed.\n   */\n    static removeDiv (divId) {\n        if (document.getElementById(divId) !== null) { document.getElementById(divId).remove(); }\n    }\n}\n","import { DEFAULT_CLASS_NAME } from '../constants/defaults';\nimport { LayoutComponent } from '../layout-component';\n\nexport default class DataPoint {\n    constructor (node) {\n        this._node = node;\n        this._className = node.model().host() instanceof LayoutComponent ?\n                            node.model().host().className() : DEFAULT_CLASS_NAME;\n    }\n\n    node () {\n        return this._node;\n    }\n\n    hasHost () {\n        return this._node.model().host() instanceof LayoutComponent;\n    }\n\n    className () {\n        return this._className || DEFAULT_CLASS_NAME;\n    }\n}\n","import { getnodePoints } from './helper';\n\nexport class DataParser {\n    constructor (data) {\n        this._data = data;\n    }\n\n    defaultDataPointLogic () {\n        const nodepoints = [];\n        getnodePoints(this._data, nodepoints);\n        return nodepoints;\n    }\n\n}\n","import DataPoint from './data-point';\n\nexport const getnodePoints = (node, nodepoints) => {\n    const datapoint = new DataPoint(node);\n    nodepoints.push(datapoint);\n    node.children().forEach((child) => {\n        getnodePoints(child, nodepoints);\n    });\n};\n","import { DataParser } from './data-parser';\n\nexport class HTMLDataAdapter extends DataParser {\n    getCoordinates () {\n        return super.defaultDataPointLogic();\n    }\n}\n","export class Renderer {\n\n    initRenderer (node, tree) {\n        node.__logicalTree = tree;\n    }\n}\n","import { HTMLDataAdapter } from '../data-adapters/html-data';\nimport { Utils } from '../utils';\nimport { Renderer } from './renderer';\n\nexport class HTMLRenderer extends Renderer {\n    constructor (data) {\n        super();\n        this._data = data;\n        this._coordinates = new HTMLDataAdapter(this._data).getCoordinates();\n    }\n\n    createhtml (mount, className) {\n        const mainDiv = mount;\n        super.initRenderer(mainDiv, this._data); // Initialise node with layout id\n        this.parentDiv = this.createAndCustomiseParent(className);\n        this._coordinates.forEach((node) => {\n            if (node.hasHost()) {\n                const host = node.node();\n                this.parentDiv.appendChild(this.createAndPositionDiv({ ...host.boundBox(),\n                    id: host.id(),\n                    className: node.className() }));\n            }\n        });\n        mainDiv.appendChild(this.parentDiv);\n    }\n\n    createAndPositionDiv (config) {\n        const { top, left, height, width, className, id } = config;\n        const existingDiv = document.getElementById(id);\n        const div = existingDiv || document.createElement('div');\n        div.style.position = 'absolute';\n        div.style.left = `${left}px`;\n        div.style.top = `${top}px`;\n        div.style.height = `${height}px`;\n        div.style.width = `${width}px`;\n        div.id = id;\n        div.className = className;\n        return div;\n    }\n\n    createAndCustomiseParent (className) {\n        const container = Utils.findContainer(this._coordinates);\n        const host = container.node();\n        const parentDiv = this.createAndPositionDiv({ ...host.boundBox(),\n            id: host.id(),\n            className: container.className() });\n        parentDiv.className = className;\n        parentDiv.style.position = 'relative';\n        return parentDiv;\n    }\n\n    coordinates () {\n        return this._coordinates;\n    }\n}\n","import { selectElement } from 'muze-utils';\nimport { HTMLRenderer } from '../renderers/html-renderer';\nimport { LayoutComponent } from '../layout-component';\n\nexport const getChildNode = (context, config) =>\n    context.renderer().createAndPositionDiv(config);\n\nexport const findNode = (context, nodeID) =>\n    context.renderer().coordinates().find(point => point.node().id() === nodeID);\n\nexport const renderHTML = (context) => {\n    context.renderer(new HTMLRenderer(context.data()));\n    context.renderer().createhtml(context.mount(), context.className());\n};\n\nexport const drawLayout = context => renderHTML(context);\n\nexport const drawComponent = (componentData) => {\n    componentData.children().forEach((node) => {\n        const host = node.model().host();\n        if (host instanceof LayoutComponent) {\n            host.draw();\n        }\n        drawComponent(node);\n    });\n};\n\nexport const removeElement = (elemID) => {\n    if (elemID) {\n        selectElement(`#${elemID}`).remove();\n    }\n};\n\nconst setAlignConfig = (alignment, params) => {\n    let newNodeConfig = {};\n    const { node, refNode } = params;\n    switch (alignment) {\n    case 'left':\n        newNodeConfig = {\n            top: node.top,\n            left: refNode.left,\n            height: node.height,\n            width: Math.abs(node.width - Math.abs(refNode.left - node.left))\n        };\n        break;\n\n    case 'right':\n        newNodeConfig = {\n            top: node.top,\n            left: node.left,\n            height: node.height,\n            width: Math.abs(node.width - Math.abs(node.left + node.width - (refNode.left + refNode.width)))\n        };\n        break;\n\n    case 'top':\n        newNodeConfig = {\n            top: refNode.top,\n            left: node.left,\n            height: Math.abs(node.height - Math.abs(refNode.top - node.top)),\n            width: node.width\n        };\n        break;\n\n    case 'bottom':\n        newNodeConfig = {\n            top: node.top,\n            left: node.left,\n            height: Math.abs(node.top - refNode.top + refNode.height),\n            width: node.width\n        };\n        break;\n\n    case 'h-center':\n        newNodeConfig = {\n            top: node.top,\n            left: refNode.left,\n            height: node.height,\n            width: refNode.width\n        };\n        break;\n\n    case 'v-center':\n        newNodeConfig = {\n            top: refNode.top,\n            left: node.left,\n            height: refNode.top,\n            width: node.width\n        };\n        break;\n    default:\n        break;\n    }\n    return newNodeConfig;\n};\n\nexport const resolveAligment = (context, componentData) => {\n    componentData.children().forEach((component) => {\n        const host = component.model().host();\n\n        if (host instanceof LayoutComponent && host.alignWith()) {\n            const componentToAlign = context.componentMap().get(host.alignWith());\n\n            if (componentToAlign) {\n                const point = findNode(context, component.id()).node();\n                const node = point.boundBox();\n                const refNode = findNode(context, componentToAlign.renderAt())\n                    .node()\n                    .boundBox();\n                const newNodeConfig = setAlignConfig(host.alignment(), { node, refNode });\n\n                // check if model in parent component\n                Object.assign(newNodeConfig, { id: point.id(), className: host.className() });\n                context.renderer().createAndPositionDiv(newNodeConfig);\n                context.componentMap().get(host.name()).setSpatialConfig({\n                    x: newNodeConfig.left,\n                    y: newNodeConfig.top,\n                    height: newNodeConfig.height,\n                    width: newNodeConfig.width\n\n                });\n            }\n        }\n\n        resolveAligment(context, component);\n    });\n};\n","import { Utils } from '../utils';\nimport { drawLayout, resolveAligment, drawComponent } from './helper';\n\nexport class DrawingManager {\n    constructor (data, renderer, container) {\n        this._data = data.tree;\n        this._componentMap = data.componentMap;\n        this._layoutClassName = data.layoutClassName;\n        this._renderer = renderer;\n        this._mount = Utils.isDOMElement(container) ? container : Utils.getElement(container);\n    }\n\n    draw () {\n        drawLayout(this);\n        resolveAligment(this, this._data);\n        drawComponent(this._data);\n        return this;\n    }\n\n    data (data) {\n        if (data) {\n            this._data = data;\n        }\n        return this._data;\n    }\n\n    componentMap (param) {\n        if (param) {\n            this._componentMap = param;\n        }\n        return this._componentMap;\n    }\n\n    className (param) {\n        if (param) {\n            this._layoutClassName = param;\n        }\n        return this._layoutClassName;\n    }\n\n    renderer (param) {\n        if (param) {\n            this._renderer = param;\n        }\n        return this._renderer;\n    }\n\n    mount (param) {\n        if (param) {\n            this._mount = param;\n        }\n        return this._mount;\n    }\n}\n","import DefinitionModel from './definitionModel';\nimport { prepareTargetComponentMap, getComponent, placeComponent, placeGridComponent } from '../helper';\n\nexport default class DefinitionManager {\n    constructor (componentMap, sequence, totalHeight, totalWidth) {\n        this._componentMap = componentMap;\n        this._prioritySequence = sequence;\n        this._totalHeight = totalHeight;\n        this._totalWidth = totalWidth;\n        this._targetComponentMap = null;\n    }\n\n    // create the config model\n    generateConfigModel () {\n        prepareTargetComponentMap(this);\n        const canvasComponent = this._targetComponentMap.get('canvas');\n        const definitionModel = new DefinitionModel({});\n        let tempDefModel = definitionModel;\n        definitionModel.remainingHeight(this._totalHeight);\n        definitionModel.remainingWidth(this._totalWidth);\n\n        let componentRef = null;\n\n        this._prioritySequence.forEach((name) => {\n            componentRef = getComponent(canvasComponent, name);\n            if (name !== 'grid') {\n                tempDefModel = placeComponent(tempDefModel, componentRef).second;\n            } else {\n                tempDefModel = placeGridComponent(tempDefModel, componentRef.component);\n            }\n        });\n        return definitionModel;\n    }\n\n    componentMap (param) {\n        if (param) {\n            this._componentMap = param;\n        }\n        return this._componentMap;\n    }\n\n    targetComponentMap (param) {\n        if (param) {\n            this._targetComponentMap = param;\n        }\n        return this._targetComponentMap;\n    }\n}\n","import { sanitizeConfig } from './helper';\n\nexport class LayoutDef {\n    constructor () {\n        this._componentMap = new Map();\n        this._layoutDefinition = null;\n    }\n\n    addComponent (component) {\n        this._componentMap.set(component.name(), component);\n    }\n\n    layoutDefinition (def) {\n        if (def) {\n            this._layoutDefinition = def;\n        }\n        return this._layoutDefinition;\n    }\n\n    addMultipleComponent (componentArray) {\n        componentArray.forEach((comp) => {\n            this.addComponent(comp);\n        });\n    }\n\n    sanitizedDefinition () {\n        sanitizeConfig(this, this._layoutDefinition);\n        return this.layoutDefinition();\n    }\n\n    componentMap () {\n        return this._componentMap;\n    }\n    resetComponentMap () {\n        this._componentMap.clear();\n    }\n}\n","import DefinitionManager from '../layout-definition/definition-manager';\n\nexport function sanitizeConfig (context, hostObj) {\n    const hostID = hostObj.host();\n    if (hostObj.lanes() && hostObj.lanes().length) {\n        hostObj.lanes().forEach(childHost => sanitizeConfig(context, childHost));\n    }\n    if (hostID != null && typeof (hostID) === 'string') {\n        if (context.componentMap().get(hostID) !== undefined) {\n            hostObj.host(context.componentMap().get(hostID));\n        }\n    }\n}\n\nexport function calLayOutDef (context) {\n    const { height, width } = context.dimension();\n    const defManager = new DefinitionManager(context.layoutDef().componentMap(),\n                                              context.prioritySequence(),\n                                              height,\n                                              width);\n    const genLayoutdef = defManager.generateConfigModel();\n    return genLayoutdef;\n}\n","import {\n  LayoutModel\n} from '../layout-definition';\n\nimport {\n  DEFAULT_WIDTH,\n  DEFAULT_HEIGHT\n} from '../constants/defaults';\n\nimport {\n   GRID\n} from '../../enums/constants';\n\nimport { DrawingManager } from '../drawing-manager';\nimport { removeElement } from '../drawing-manager/helper';\nimport { Utils } from '../utils';\nimport { LayoutDef } from './layout-def';\nimport { calLayOutDef } from './helper';\n\nexport default class LayoutManager {\n    constructor (conf) {\n        this._renderAt = conf.renderAt;\n        this._layoutClassName = conf.className;\n        this._dimension = {\n            width: conf.width || DEFAULT_WIDTH,\n            height: conf.height || DEFAULT_HEIGHT\n        };\n\n        this._skeletonType = conf.skeletonType || 'html';\n        this._layoutDefinition = null;\n        this._layoutDef = new LayoutDef();\n        this._drawingManager = null;\n        this._prioritySequence = [];\n        this.tree = null;\n        this._rootNodeID = null;\n    }\n\n    layoutDef (param) {\n        if (param) {\n            this._layoutDef = param;\n        }\n        return this._layoutDef;\n    }\n\n    prioritySequence (param) {\n        if (param) {\n            this._prioritySequence = param;\n        }\n        return this._prioritySequence;\n    }\n\n    dimension (param) {\n        if (param) {\n            Object.assign(this._dimension, param);\n        }\n        return this._dimension;\n    }\n\n    addComponent (component) {\n        this._layoutDef.addComponent(component);\n    }\n\n    addMultipleComponent (componentArray) {\n        this._layoutDef.addMultipleComponent(componentArray);\n    }\n\n    resetNode (node) {\n        if (this.con) {\n            this.con.resetNode(node);\n        }\n    }\n\n  /**\n   * function to update the node and rerender the layout.\n   * @param  {} config - node configuration to change.\n   */\n    updateNode (config) {\n        this.tree.updateNode(config);\n        this._layoutDefinition = this.tree.model;\n        this.compute();\n    }\n\n    compute () {\n        //----\n        if (Utils.isDOMElement(this._renderAt)) {\n            this._renderAt._layout = this;\n        } else {\n            document.getElementById(this._renderAt)._layout = this;\n        }\n        //-----\n        this._layoutDefinition = calLayOutDef(this);\n        this._layoutDef.layoutDefinition(this._layoutDefinition);\n        this._layoutDefinition = this._layoutDef.sanitizedDefinition();\n        this._layout = new LayoutModel({\n            width: this._dimension.width,\n            height: this._dimension.height\n        },\n            this._layoutDefinition);\n        this.tree = this._layout.negotiate().tree();\n        this._layout.broadcast();\n        this._drawingManager = new DrawingManager({\n            tree: this.tree,\n            componentMap: this._layoutDef.componentMap(),\n            layoutClassName: this._layoutClassName\n        }, this._skeletonType, this._renderAt);\n\n        if (this._rootNodeID) {\n            this.tree.id(this._rootNodeID);\n        } else {\n            this._rootNodeID = this.tree.id();\n        }\n    // this will draw all the components by calling their draw method\n        this._drawingManager.draw();\n    }\n\n    getRootNodeId () {\n        return this._rootNodeID;\n    }\n\n  /**\n  * This function takes the LayoutComponents and Register them in component store\n  * @param {Array<LayoutComponent>} layoutComponents\n  */\n    registerComponents (layoutComponents) {\n        this._prioritySequence.length = 0;\n        this._layoutDef.resetComponentMap();\n        layoutComponents.forEach((container) => {\n            if (container) {\n                this._prioritySequence.push(container.name());\n                this.addComponent(container);\n                if (container.name() === 'grid') {\n                    container.component.forEach((componentArr) => {\n                        componentArr.forEach((compo) => {\n                            this.addComponent(compo);\n                        });\n                    });\n                }\n            }\n        });\n        return this;\n    }\n\n    getComponent (componentName) {\n        return this._layoutDef.componentMap().get(componentName);\n    }\n\n    deleteElement (component, elementName) {\n        this._layoutDef.componentMap().delete(elementName);\n        const deleteElementId = component.renderAt();\n        return removeElement(deleteElementId);\n    }\n\n    removeComponent (name) {\n        const component = this.getComponent(name);\n        if (component) {\n            if (name === GRID) {\n                return component.component.map(comp => comp.map(\n                    co => this.deleteElement(co, co.name())\n                ));\n            }\n            return this.deleteElement(component, name);\n        }\n        return this;\n    }\n\n    renderAt (mount) {\n        if (mount) {\n            this._renderAt = mount;\n        }\n        return this._renderAt;\n    }\n}\n","import { isEqual, STATE_NAMESPACES, selectElement, getValueParser, FieldType } from 'muze-utils';\nimport { VisualGroup } from '@chartshq/visual-group';\nimport { BEHAVIOURS } from '@chartshq/muze-firebolt';\nimport { payloadGenerator } from '@chartshq/visual-unit';\nimport { ROWS, COLUMNS, COLOR, SHAPE, SIZE, DETAIL, DATA, CONFIG, GRID, LEGEND }\n    from '../constants';\nimport { canvasOptions } from './local-options';\nimport { LayoutManager } from '../../../layout/src/tree-layout';\n\n/**\n * Instantiate high level components. Canvas knows what all high level component it has.\n * @nice-to-have dynamic high level components.\n *  - Is it even required ?\n *  - Reactive to source (canvas) streaming ?\n * @param {*} context Canvas instance\n * @return {Object.<Array>} Arrays of Title, visualGroup, Legend\n */\nexport const initCanvas = (context) => {\n    const reg = context._registry.components;\n\n    return [new reg.VisualGroup(context._registry, Object.assign({\n        throwback: context._throwback\n    }, context.dependencies()))];\n};\n\nexport const fixFacetConfig = (config) => {\n    if (config) {\n        const isGridLinePresent = {};\n        const { border, gridLines } = config;\n        if (gridLines) {\n            isGridLinePresent.x = !!gridLines.x;\n            isGridLinePresent.y = !!gridLines.y;\n        }\n        const facetsUserConfig = {\n            isBorderPresent: border || {},\n            isGridLinePresent\n        };\n        return {\n            facetsUserConfig,\n            isFacet: false\n        };\n    }\n    return {};\n};\n\nexport const fixScrollBarConfig = (config) => {\n    config.scrollBar.thickness = Math.min(50, Math.max(10, config.scrollBar.thickness));\n    return config;\n};\n\nexport const excludeKeys = (config, keys) => {\n    const emptyValueKeyObject = {};\n    keys.forEach((key) => {\n        if (config && config[key] && Object.keys(config[key]).length) {\n            emptyValueKeyObject[key] = {};\n        }\n    });\n    return emptyValueKeyObject;\n};\n\nexport const setLayoutInfForUnits = (context) => {\n    const layoutManager = context._layoutManager;\n    const gridLayout = layoutManager.getComponent(GRID);\n    const legend = layoutManager.getComponent(LEGEND);\n    const boundBox = gridLayout && gridLayout.getBoundBox();\n    const valueMatrix = context.composition().visualGroup.matrixInstance().value;\n    const parentContainer = selectElement(`#${layoutManager.getRootNodeId()}`).node();\n    if (legend) {\n        legend.setComponentInfo({ rootNode: parentContainer });\n    }\n    valueMatrix.each((cell) => {\n        cell.valueOf().parentContainerInf({\n            el: parentContainer,\n            dimensions: boundBox\n        });\n    });\n};\n\n/**\n *\n *\n * @memberof Canvas\n */\nexport const dispatchProps = (context) => {\n    const lifeCycleManager = context.dependencies().lifeCycleManager;\n    lifeCycleManager.notify({ client: context, action: 'beforeupdate' });\n    const visualGroup = context.composition().visualGroup;\n\n    const allOptions = context._allOptions;\n    for (const key in allOptions) {\n        const value = context[key]();\n        if (value !== null) {\n            visualGroup[key] && visualGroup[key](value);\n        }\n    }\n    const { invalidValues } = context.config();\n\n    visualGroup.valueParser(getValueParser(invalidValues));\n\n    const sanitizedData = visualGroup.getMandatoryFields();\n    if (sanitizedData.shouldRender) {\n        visualGroup.createMatrices(sanitizedData);\n    } else {\n        visualGroup.remove();\n    }\n    context._cachedProps = {};\n    lifeCycleManager.notify({ client: context, action: 'initialized' });\n    lifeCycleManager.notify({ client: context, action: 'updated' });\n};\n\nconst equalityChecker = (props, params) => {\n    let checker = () => false;\n    return !props.every((option, i) => {\n        switch (option) {\n        case ROWS:\n        case COLUMNS:\n        case DETAIL:\n            checker = isEqual('Array');\n            break;\n\n        case SHAPE:\n        case SIZE:\n        case COLOR:\n        case DATA:\n        case CONFIG:\n            checker = isEqual('Object');\n            break;\n        default:\n            checker = () => true;\n            break;\n        }\n        const oldVal = params[i][0];\n        const newVal = params[i][1];\n\n        return checker(oldVal, newVal);\n    });\n};\n\nexport const notifyAnimationEnd = (context) => {\n    const viewInfo = context.layout().viewInfo();\n    const centerMatrix = viewInfo && viewInfo.viewMatricesInfo.matrices.center[1] || [];\n    const promises = [];\n    centerMatrix.forEach((cellArr) => {\n        cellArr.forEach((cell) => {\n            promises.push(cell.valueOf().done());\n        });\n    });\n    const lifeCycleManager = context.lifeCycle();\n    if (promises.length) {\n        Promise.all(promises).then(() => {\n            // Update life cycle\n            lifeCycleManager.notify({ client: context, action: 'drawn' });\n            const animDonePromises = [];\n\n            centerMatrix.forEach((cellArr) => {\n                cellArr.forEach((cell) => {\n                    cell.valueOf().layers().forEach((layer) => {\n                        animDonePromises.push(layer.animationDone());\n                    });\n                });\n            });\n\n            [context.xAxes(), context.yAxes()].forEach((axisArr) => {\n                axisArr = axisArr || [];\n                axisArr.forEach((axes) => {\n                    axes.forEach((axisInst) => {\n                        animDonePromises.push(axisInst.animationDone());\n                    });\n                });\n            });\n\n            Promise.all(animDonePromises).then(() => {\n                lifeCycleManager.notify({ client: context, action: 'animationend' });\n            });\n        });\n    } else {\n        lifeCycleManager.notify({ client: context, action: 'animationend' });\n    }\n};\n\nexport const setupChangeListener = (context) => {\n    const store = context._store;\n\n    const allOptions = Object.keys(context._allOptions);\n    const props = [...allOptions, ...Object.keys(canvasOptions)];\n    const nameSpaceProps = [...allOptions, ...Object.keys(canvasOptions)].map(prop =>\n        `${STATE_NAMESPACES.CANVAS_LOCAL_NAMESPACE}.${prop}`);\n    store.registerChangeListener(nameSpaceProps, (...params) => {\n        const equalityProps = equalityChecker(props, params);\n        // inform attached board to rerender\n        if (equalityProps && context.mount()) {\n            dispatchProps(context);\n            context.render();\n        }\n        notifyAnimationEnd(context);\n    }, true);\n};\n\nconst applyPropagationPolicy = (firebolt, { behaviours, sideEffects }) => {\n    for (const key in behaviours) {\n        firebolt.changeBehaviourStateOnPropagation(key, behaviours[key]);\n    }\n    for (const key in sideEffects) {\n        firebolt.changeSideEffectStateOnPropagation(key, sideEffects[key]);\n    }\n};\n\nconst isMeasure = fields => fields.every(field => field.type() === FieldType.MEASURE);\n\nconst isSplom = (fields) => {\n    const { rowProjections, colProjections } = fields;\n    const colProj = colProjections.flat();\n    const rowProj = rowProjections.flat();\n\n    if (isMeasure(colProj) && isMeasure(rowProj)) {\n        return true;\n    }\n    return false;\n};\n\nexport const applyInteractionPolicy = (firebolt) => {\n    const canvas = firebolt.context;\n    const visualGroup = canvas.composition().visualGroup;\n    if (visualGroup) {\n        const splom = isSplom(visualGroup.resolver().getAllFields());\n        const valueMatrix = visualGroup.matrixInstance().value;\n        const interactionPolicy = firebolt._interactionPolicy;\n        interactionPolicy(valueMatrix, firebolt);\n        const crossInteractionPolicy = firebolt._crossInteractionPolicy;\n        const behaviours = crossInteractionPolicy.behaviours;\n        const sideEffects = crossInteractionPolicy.sideEffects;\n        valueMatrix.each((cell) => {\n            const unitFireBolt = cell.valueOf().firebolt();\n            applyPropagationPolicy(unitFireBolt, { behaviours, sideEffects });\n            if (splom) {\n                unitFireBolt.payloadGenerators({\n                    [BEHAVIOURS.BRUSH]: (inst, dm, propConfig, facetFields) => payloadGenerator.brush(inst, dm,\n                        { ...propConfig, ...{ includeMeasures: false } }, facetFields)\n                });\n                unitFireBolt.sideEffects().selectionBox.config({\n                    persistent: true\n                });\n            } else {\n                unitFireBolt.payloadGenerators({\n                    [BEHAVIOURS.BRUSH]: payloadGenerator.brush\n                });\n                unitFireBolt.sideEffects().selectionBox.config({\n                    persistent: false\n                });\n            }\n        });\n        applyPropagationPolicy(firebolt, { behaviours, sideEffects });\n    }\n};\n\n/**\n * Sets the rotation for all x axes if any axis has the rotation config set in the\n * entire view\n *\n * @param {Array} columns Column cells that contain the axes cells\n */\nexport const setLabelRotationForAxes = (context) => {\n    let rotation = 0;\n\n    const xAxes = context.xAxes() || [];\n\n    (() => {\n        for (let i = 0; i < xAxes.length; i++) {\n            for (let j = 0; j < xAxes[i].length; j++) {\n                const rotationVal = xAxes[i][j].renderConfig().labels.rotation;\n                if (rotationVal && rotationVal !== 0) {\n                    rotation = rotationVal;\n                    return;\n                }\n            }\n        }\n    })();\n\n    if (rotation) {\n        xAxes.forEach((axes) => {\n            axes.forEach((axis) => {\n                axis.renderConfig({ labels: { rotation } });\n                axis.smartTicks(axis.setTickConfig());\n            });\n        });\n    }\n};\n\nexport const createGroupState = (context) => {\n    const [globalState, localState] = VisualGroup.getState();\n    const store = context._store;\n    store.append('app.group', globalState);\n    store.append('local.group', localState);\n};\n\nexport const removeChild = (mount) => {\n    while (mount.firstChild) {\n        mount.removeChild(mount.firstChild);\n    }\n};\n\nexport const createLayoutManager = () => {\n    const layoutManager = new LayoutManager({\n        className: 'muze-group-container'\n    });\n    return layoutManager;\n};\n","/**\n * This is the global options semantics based on which setters getters are created and reactivity is initiated.\n * Format\n *  PROPERTRY_NAME: {\n *      value: // default value of the property,\n *      meta: {\n *          typeCheck: // The setter value will be checked using this. If the value is function then the setter value\n *                     // is passed as args.\n *          typeExpected: // The output of typecheck action will be tested against this. Truthy value will set the\n *                       // value to the setter\n *          sanitizaiton: // Need for sanitization before type is checked\n *      }\n *  }\n * @module GlobalOptions\n */\n\nimport { intSanitizer, mergeRecursive, DataModel } from 'muze-utils';\nimport { fixScrollBarConfig, fixFacetConfig, excludeKeys } from './canvas/helper';\nimport { DEFAULT_CONFIG, EXCLUDE_CONFIG_KEYS } from './defaults';\n\nexport default {\n    data: {\n        value: null,\n        meta: {\n            typeCheck: d => d instanceof DataModel\n        }\n    },\n    width: {\n        value: 0,\n        meta: {\n            sanitization: intSanitizer,\n            typeCheck: Number.isInteger\n        }\n    },\n    height: {\n        value: 0,\n        meta: {\n            sanitization: intSanitizer,\n            typeCheck: Number.isInteger\n        }\n    },\n    minUnitWidth: {\n        value: 50,\n        meta: {\n            sanitization: intSanitizer,\n            typeCheck: Number.isInteger\n        }\n    },\n    minUnitHeight: {\n        value: 50,\n        meta: {\n            sanitization: intSanitizer,\n            typeCheck: Number.isInteger\n        }\n    },\n    config: {\n        value: [null, null],\n        meta: {\n            typeCheck: 'constructor',\n            typeExpected: 'Object',\n            takesMultipleParams: true,\n            sanitization: ([config, auxConfig = {}], oldConfig) => {\n                // Stores additional config, if passed\n                const { reset = false } = auxConfig;\n                let oldConf = {};\n\n                // handle the default cases for facet, as it is different to other charts\n                const facetDefaultConfig = fixFacetConfig(config);\n                config = mergeRecursive(config, facetDefaultConfig);\n\n                if (!reset) {\n                    oldConf = mergeRecursive({}, config === null ? {} : oldConfig);\n                    oldConf = Object.assign(oldConf, excludeKeys(config, EXCLUDE_CONFIG_KEYS));\n                }\n\n                const defConfig = mergeRecursive(oldConf, DEFAULT_CONFIG);\n                const newConf = mergeRecursive(defConfig, config);\n\n                return fixScrollBarConfig(newConf);\n            }\n\n        }\n    }\n};\n","import { sanitizeIP, mergeRecursive } from 'muze-utils';\nimport { TOP, CENTER, BOTTOM } from '../enums/constants';\n\n/*\n * This is the abstract implementation of the root layout. This takes care of common work which all the layouts\n * has to handle. The common work includes sanitizaion of inputs, update, rerender, dispose etc. This class can't be\n * used directly (as ofcourse this is an abstract implementaiton), the class which is implementing it has to implement\n * the necessary methods and gives its on visual.\n */\n\n/**\n * This class is used to create a generic layout. It can be extended to create layouts\n * of different types\n * @class GenericLayout\n */\nexport default class GenericLayout {\n\n    /**\n     * Creates an instance of TableLayout.\n     * @param {HTMLElement} mountPoint DOM element/d3 selection where the layout is to be mounted\n     * @param {Object} measurement The dimensions of the layout\n     * @param {Object} config configuration to be given for the layout\n     * @param {Object} dependencies external dependencies.\n     *\n     * @memberof GenericLayout\n     *\n     */\n    constructor (mountPoint, measurement, config, dependencies) {\n        this._config = {};\n        this._measurement = {};\n        this._matrices = [];\n        // External dependencies to be included for the layout. This includes the ext global dependencies like\n        // smartlabel which has one single implementation of throughout the page or per isntance\n        this._dependencies = dependencies;\n\n        this.measurement(measurement);\n        this.mountPoint(mountPoint);\n        this.config(config);\n    }\n\n    /**\n     * Returns an object which is used to recreate the layout.\n     * @return {Object} the serialized components\n     */\n    serialize () {\n        return {\n            measurement: this.measurement(),\n            config: this.config(),\n            matrices: this.matrices()\n        };\n    }\n\n     /**\n     * Sets/Gets the config for the layout\n     * @param {Object} config configuration for the layout\n     * @return {Layout|Object} Gets the Config/ Returns this instance when set\n     */\n    config (config) {\n        if (config) {\n            this._config = mergeRecursive(this._config || {}, config);\n            this._config.border.width = Math.max(0, this._config.border.width);\n            return this;\n        }\n        return this._config;\n    }\n\n    /**\n     * Sets/Gets the measurement for the layout\n     * @param {Object} measurement measurement for the layout\n     * @return {Layout|Object} Gets the measurement/ Returns this instance when set\n     */\n    measurement (measurement) {\n        if (measurement) {\n            this._measurement = mergeRecursive(this._measurement || {}, measurement);\n\n            return this;\n        }\n        return this._measurement;\n    }\n\n    /**\n     * Sets/Gets the matrices for the layout\n     * @param {Object} matrices matrices for the layout\n     * @return {Layout|Object} Gets the matrices/ Returns this instance when set\n     */\n    matrices (matrices) {\n        if (matrices) {\n            this._matrices = sanitizeIP.typeObj([TOP, CENTER, BOTTOM], matrices);\n\n            return this;\n        }\n        return this._matrices;\n    }\n\n    /**\n     * Sets/Gets the matrix for row\n     * @param {Object} matrix matrices for the layout\n     * @return {Layout|Object} Gets the matrix/ Returns this instance when set\n     */\n    rowMatrix (matrix) {\n        if (matrix) {\n            this._rowMatrix = matrix;\n            return this;\n        }\n        return this._rowMatrix;\n    }\n\n    /**\n     * Sets/Gets the matrix for columns\n     * @param {Object} matrix matrices for the layout\n     * @return {Layout|Object} Gets the matrix/ Returns this instance when set\n     */\n    columnMatrix (matrix) {\n        if (matrix) {\n            this._columnMatrix = matrix;\n            return this;\n        }\n        return this._columnMatrix;\n    }\n\n   /**\n     * Sets/Gets the matrix for value\n     * @param {Object} matrix matrices for the layout\n     * @return {Layout|Object} Gets the matrix/ Returns this instance when set\n     */\n    centerMatrix (matrix) {\n        if (matrix) {\n            this._centerMatrix = matrix;\n            return this;\n        }\n        return this._centerMatrix;\n    }\n\n    /**\n     * Sets/Gets the mountPoint for the layout\n     * @param {Object} mountPoint mountPoint for the layout\n     * @return {Layout|Object} Gets the mountPoint/ Returns this instance when set\n     */\n    mountPoint (mountPoint) {\n        if (mountPoint) {\n            this._mountPoint = mountPoint;\n\n            return this;\n        }\n        return this._mountPoint;\n    }\n}\n","import * as FieldNames from '../enums/constants';\n\n/**\n * Default configuration of the layout\n * @return {Object} returns the default configuration\n */\nexport const DEFAULT_CONFIGURATION = {\n    [FieldNames.BORDER]: {\n        [FieldNames.STYLE]: 'solid',\n        [FieldNames.COLOR]: '#d6d6d6',\n        [FieldNames.WIDTH]: 2,\n        [FieldNames.COLLAPSE]: true,\n        [FieldNames.SPACING]: 0\n    },\n    [FieldNames.PAGINATION]: 'scroll',\n    [FieldNames.BUFFER]: 20,\n    [FieldNames.GUTTERSPACE]: { rows: [], columns: [] },\n    [FieldNames.DISTRIBUTION]: { rows: [], columns: [] },\n    [FieldNames.BREAK_PAGE]: { rows: [], columns: [] },\n    [FieldNames.ROW_SIZE_IS_EQUAL]: false,\n    [FieldNames.COLUMN_SIZE_IS_EQUAL]: false,\n    [FieldNames.COLUMN_POINTER]: 0,\n    [FieldNames.ROW_POINTER]: 0\n};\n\n/**\n * Default measurements for the layout\n * @return {Object} returns the default measurements\n */\nexport const DEFAULT_MEASUREMENTS = {\n    [FieldNames.GRID_WIDTH]: 100,\n    [FieldNames.GRID_HEIGHT]: 100,\n    [FieldNames.UNIT_WIDTH]: 100,\n    [FieldNames.UNIT_HEIGHT]: 100\n};\n\nexport const BLANK_BORDERS = 'rgba(0,0,0,0)';\n","/**\n * This file exports utility functions that are used across the layout module\n */\nimport { Symbols } from 'muze-utils';\nimport { PRIMARY, SECONDARY, HEIGHT, WIDTH } from '../enums/constants';\n\nconst nest = Symbols.nest;\n/**\n *\n *\n * @param {*} isTransposed\n *\n */\nconst getMeasureInfo = (isTransposed) => {\n    if (isTransposed) {\n        return {\n            firstMeasure: HEIGHT,\n            secondMeasure: WIDTH\n        };\n    }\n    return {\n        firstMeasure: WIDTH,\n        secondMeasure: HEIGHT\n    };\n};\n\n/**\n *\n *\n * @param {*} i\n * @param {*} page\n *\n */\nconst findInPage = (i, page) => {\n    let count = 0;\n    for (const x in page) {\n        if (i < page[x]) {\n            count = x;\n            break;\n        }\n    }\n    return count;\n};\n\n/**\n * Creates a single matrix from two matrices\n *\n * @param {Array<Array>} matrix Input matrix\n * @return {Array<Array>} Joined matrix\n * @memberof VisualMatrix\n */\nexport const combineMatrices = (matrix, config) => {\n    const { isTransposed } = config;\n    let joinedMatrix = matrix[0].length > 0 ? matrix[0] : matrix[1];\n    if (isTransposed) {\n        joinedMatrix = matrix[0].length > 0 ? [...matrix[0]] : [];\n        joinedMatrix = matrix[1].length > 0 ? [...joinedMatrix, ...matrix[1]] : joinedMatrix;\n    } else {\n        joinedMatrix = joinedMatrix.map((row, rowIndex) => {\n            let rowData = [];\n            if (matrix[0].length > 0) {\n                rowData = [...matrix[0][rowIndex]];\n            }\n            if (matrix[1].length > 0) {\n                rowData = [...rowData, ...matrix[1][rowIndex]];\n            }\n            return rowData;\n        });\n    }\n    return joinedMatrix;\n};\n\n/**\n * Creates a hirachical tree from the context\n *\n * @param {Object} context context for creating tree\n * @return {Object} nested tree\n */\nexport const createTree = (context) => {\n    let matrixTree = {};\n    let lastLevelKey = 0;\n    let facet = PRIMARY;\n    const nestFn = nest();\n    const keys = [];\n    const layoutMatrix = context._layoutMatrix;\n    const primaryMatrix = context.primaryMatrix();\n    const secondaryMatrix = context.secondaryMatrix();\n    const { isTransposed, breakPage } = context.config();\n\n    if (!isTransposed) {\n        if (primaryMatrix.length === 0) {\n            facet = PRIMARY;\n        } else if (secondaryMatrix.length === 0) {\n            facet = SECONDARY;\n        } else {\n            facet = primaryMatrix.length >= secondaryMatrix.length ? PRIMARY : SECONDARY;\n        }\n        if (primaryMatrix.length > 0) {\n            for (let i = 0; i < primaryMatrix[0].length - 1; i++) {\n                keys.push(i);\n            }\n            keys.push(primaryMatrix[0].length - 1);\n            if (facet === SECONDARY || secondaryMatrix.length === 0) {\n                lastLevelKey = primaryMatrix[0].length - 1;\n            }\n        }\n        if (secondaryMatrix.length > 0) {\n            const keyLength = primaryMatrix.length > 0 ? primaryMatrix[0].length : 0;\n            for (let i = secondaryMatrix[0].length - 1; i > 0; i--) {\n                keys.push(i + keyLength);\n            }\n            keys.push(keyLength);\n\n            if (facet === PRIMARY) {\n                lastLevelKey = keyLength;\n            }\n        } else {\n            lastLevelKey = primaryMatrix.length > 0 ? primaryMatrix[0].length - 1 : 0;\n        }\n        keys.forEach((key) => {\n            let counter = -1;\n            return nestFn.key((d) => {\n                counter++;\n                return `${d[key].valueOf()}-${findInPage(counter, breakPage)}`;\n            });\n        });\n        matrixTree = nestFn.entries(layoutMatrix);\n    } else {\n        if (primaryMatrix.length === 0) {\n            facet = PRIMARY;\n        } else if (secondaryMatrix.length === 0) {\n            facet = SECONDARY;\n        } else {\n            facet = primaryMatrix.length >= secondaryMatrix.length ? PRIMARY : SECONDARY;\n        }\n        if (primaryMatrix.length > 0) {\n            for (let i = 0; i < primaryMatrix.length - 1; i++) {\n                keys.push(i);\n            }\n            // if (facet === PRIMARY) {\n            keys.push(primaryMatrix.length - 1);\n            // } else {\n            if (facet === SECONDARY) {\n                lastLevelKey = primaryMatrix.length - 1;\n            }\n        }\n        if (secondaryMatrix.length > 0) {\n            const primaryMatrixLength = primaryMatrix.length;\n            for (let i = secondaryMatrix.length - 1; i > 0; i--) {\n                keys.push(i + primaryMatrixLength);\n            }\n            // if (facet === SECONDARY) {\n            keys.push(primaryMatrixLength);\n            // }\n            if (facet === PRIMARY) {\n                lastLevelKey = primaryMatrixLength;\n            }\n        }\n        keys.forEach((key) => {\n            let counter = -1;\n            return nestFn.key((d) => {\n                counter++;\n                return `${d[key].valueOf()}-${findInPage(counter, breakPage)}`;\n            });\n        });\n        let newMatrix = [];\n        newMatrix = layoutMatrix[0].map((col, colIndex) => layoutMatrix.map(row => row[colIndex]));\n        matrixTree = nestFn.entries(newMatrix);\n    }\n    return { tree: matrixTree, lastLevelKey };\n};\n\n/**\n * Gives the min measues\n *\n * @param {boolean} isTransposed is column matrix\n * @param {Object} unitMeasures min measures to be given to cells\n * @return {Object} dimension min cell\n */\nexport const getMinMeasures = (isTransposed, unitMeasures) => {\n    if (!isTransposed) {\n        return {\n            height: unitMeasures.height,\n            width: 0\n        };\n    }\n    return {\n        height: 0,\n        width: unitMeasures.width\n    };\n};\n\n/**\n * Get the logical space from the tree\n *\n * @param {Node} item tree to be calculated\n * @param {number} measures width and height\n * @param {Array} minMeasures min measures for a cell\n * @param {Array} maxMeasure max measures for a col/row\n * @return {Object} dimension\n */\nexport const getLogicalSpace = (item, measures, minMeasures, maxMeasure = []) => {\n    const { firstMeasure, secondMeasure } = measures;\n    let firstMeasureValue = 0;\n    let secondMeasureValue = 0;\n    item.values.forEach((valueArray) => {\n        let fMeasure = 0;\n        let sMeasure = 0;\n        valueArray.forEach((placeholder, colIndex) => {\n            placeholder.setAvailableSpace();\n            const space = placeholder.getLogicalSpace();\n            const minSecondMeasure = placeholder.getMinMeasures(minMeasures[secondMeasure]);\n\n            sMeasure = Math.max(sMeasure, +space[secondMeasure], minSecondMeasure);\n            maxMeasure[colIndex] = Math.max(maxMeasure[colIndex] || 0, space[firstMeasure]);\n            fMeasure += +maxMeasure[colIndex];\n        });\n        secondMeasureValue += sMeasure;\n        firstMeasureValue = Math.max(firstMeasureValue, fMeasure);\n        item.space = {\n            [secondMeasure]: Math.ceil(secondMeasureValue),\n            [firstMeasure]: Math.ceil(firstMeasureValue)\n        };\n    });\n    return {\n        [secondMeasure]: secondMeasureValue,\n        [firstMeasure]: firstMeasureValue\n    };\n};\n\n/**\n * Computes the logical spcae taken by the matrix tree\n *\n * @param {*} [item={}] tree to be viewed\n * @param {boolean} [isTransposed=false] is column matrix\n * @param {*} unitMeasures min measues for a cell\n * @param {Array} maxMeasure max measures for a col/row\n * @return {Object} logical space taken\n */\nexport const computeLogicalSpace = (item = {}, config, maxMeasures) => {\n    const { isTransposed = false, unitMeasures } = config;\n    const { firstMeasure, secondMeasure } = getMeasureInfo(isTransposed);\n    const { values } = item;\n    const minMeasures = getMinMeasures(isTransposed, unitMeasures);\n\n    if (values[0].key) {\n        const logicalSpace = { [firstMeasure]: 0, [secondMeasure]: 0 };\n\n        values.forEach((valueItem) => {\n            // Compute logical space for lowest level\n            const space = computeLogicalSpace(valueItem, config, maxMeasures);\n            // Set logical space for first measure\n            logicalSpace[firstMeasure] = Math.max(logicalSpace[firstMeasure], space[firstMeasure],\n                minMeasures[firstMeasure]);\n\n            // Set logical space for second measure\n            logicalSpace[secondMeasure] += +space[secondMeasure];\n        });\n        item.space = logicalSpace;\n        return logicalSpace;\n    }\n\n    return getLogicalSpace(item, { firstMeasure, secondMeasure }, minMeasures, maxMeasures);\n};\n\n/**\n * Gives the space taken by a row\n *\n * @param {Array} row matrix array of rows\n * @return {Object} dimension of the row\n */\nexport const spaceTakenByRow = (row) => {\n    let height = 0;\n    let width = 0;\n    row.forEach((col) => {\n        const spaces = col.getLogicalSpace();\n        height = Math.max(height, spaces.height);\n        width += spaces.width;\n    });\n    return {\n        width,\n        height\n    };\n};\n\n/**\n * Gives the space taken by a column\n *\n * @param {Array<Array>} matrix column matrix\n * @param {number} colIndex column index\n * @return {Object} dimension of the column\n */\nexport const spaceTakenByColumn = (matrix, colIndex) => {\n    let height = 0;\n    let width = 0;\n    matrix.forEach((row) => {\n        const col = row[colIndex];\n        const spaces = col.getLogicalSpace();\n        width = Math.max(width, spaces.width);\n        height += spaces.height;\n    });\n    return {\n        width,\n        height\n    };\n};\n\n/**\n * Creates different level matrices\n *\n * @param {Object} item matrix tree\n * @param {boolean} isTransposed is column matrix\n * @return {Object} matrix of each level\n */\nexport const createMatrixEachLevel = (item, isTransposed) => {\n    if (item.values[0].key) {\n        const arr = [];\n        item.values.forEach((child) => {\n            if (!isTransposed) {\n                arr.push(...createMatrixEachLevel(child, isTransposed));\n            } else {\n                const eachLevel = createMatrixEachLevel(child, isTransposed);\n                eachLevel.forEach((e, i) => {\n                    arr[i] = arr[i] || [];\n                    arr[i].push(...e);\n                });\n            }\n        });\n        item.matrix = arr;\n        return arr;\n    }\n    if (!isTransposed) {\n        item.matrix = item.values;\n    } else {\n        item.matrix = item.values[0].map((col, colIndex) => item.values.map(row => row[colIndex]));\n    }\n    return item.matrix;\n};\n\n/**\n * Breaks the matrix into two part\n *\n * @param {Array<Array>} matrix input matrix\n * @param {boolean} isTransposed is column matrix\n * @param {number} breakPointer point in matrix where it is to be broken\n * @return {Array} two broken matrix\n */\nexport const breakMatrix = (matrix, isTransposed, breakPointer) => {\n    const primaryMatrix = [];\n    const secondaryMatrix = [];\n    if (isTransposed) {\n        matrix.forEach((row, rowIndex) => {\n            if (rowIndex >= breakPointer) {\n                secondaryMatrix.push(row);\n            } else {\n                primaryMatrix.push(row);\n            }\n        });\n    } else {\n        matrix.forEach((row, rowIndex) => {\n            row.forEach((column, columnIndex) => {\n                if (columnIndex >= breakPointer) {\n                    secondaryMatrix[rowIndex] = secondaryMatrix[rowIndex] || [];\n                    secondaryMatrix[rowIndex].push(column);\n                } else {\n                    primaryMatrix[rowIndex] = primaryMatrix[rowIndex] || [];\n                    primaryMatrix[rowIndex].push(column);\n                }\n            });\n        });\n    }\n    return [primaryMatrix, secondaryMatrix];\n};\n\n/**\n * Distributed width returned\n *\n * @param {Object} context context for the width distibution\n * @return {number} distributed widths\n */\nexport const getDistributedWidth = (context, layoutConfig) => {\n    const {\n        availableWidth,\n        width,\n        row\n    } = context;\n    const {\n        isDistributionEqual,\n        isTransposed,\n        distribution\n    } = layoutConfig;\n    let distSum = 0;\n    if (distribution && distribution[0]) {\n        distSum = distribution.reduce((t, n) => {\n            t += n;\n            return t;\n        });\n    }\n    return row.map((col, colIndex) => {\n        const space = col.getLogicalSpace().width;\n        let distWidth = (space + (availableWidth - width) * (space / width));\n        if (isTransposed) {\n            if (distribution.length > 0) {\n                distWidth = (availableWidth * distribution[colIndex] / distSum);\n            } else if (isDistributionEqual || width === 0) {\n                const rowLen = row.length;\n                distWidth = (availableWidth / rowLen);\n            }\n        }\n        return Math.floor(distWidth);\n    });\n};\n\n/**\n * Distributeed heights returned\n *\n * @param {Object} context input for the height distribution\n * @return {Object} distribured heights\n */\nexport const getDistributedHeight = (context) => {\n    let distSum = 0;\n    let gutterSum = 0;\n    let heightWithoutGutter = 0;\n    const {\n        isTransposed,\n        distribution,\n        availableHeight,\n        height,\n        isDistributionEqual,\n        gutter,\n        matrix,\n        cIdx\n    } = context;\n\n    if (distribution && distribution[0] !== undefined) {\n        distSum = distribution.reduce((t, n) => {\n            t += n;\n            return t;\n        });\n    }\n    if (gutter && gutter[0] !== undefined) {\n        gutterSum = gutter.reduce((t, n) => {\n            t += n;\n            return t;\n        });\n    }\n    heightWithoutGutter = availableHeight - Math.floor(availableHeight * gutterSum);\n\n    const colLen = matrix.length;\n    return matrix.map((row, rIdx) => {\n        const col = row[cIdx];\n        const space = col.getLogicalSpace().height;\n        let distHeight = (space + (heightWithoutGutter - height) * (space / height));\n\n        if (!isTransposed) {\n            if (distribution.length > 0 && colLen === distribution.length) {\n                distHeight = (heightWithoutGutter * distribution[rIdx] / distSum);\n            } else if (isDistributionEqual || context.height === 0) {\n                distHeight = (heightWithoutGutter / colLen);\n            }\n        }\n        return Math.floor(distHeight);\n    });\n};\n\n/**\n *\n *\n * @param {*} arr\n * @param {*} beg\n * @param {*} end\n */\nexport const extraCellsRemover = (arr, beg, end) => arr.slice(beg, -end);\n\n/**\n * Creates matrix instancess\n *\n * @param {Array} [arr=[]] mutated arry\n * @param {number} depth depth of the tree\n * @param {Array} matrixInfo Details about the matrix(tree, etc) to be inserted\n * @param {boolean} layout Instance of layout\n */\nexport const createMatrixInstances = (arr = [], depth, matrixInfo, layout) => {\n    const breakPointer = layout._breakPointer;\n    const config = layout.config();\n    const {\n        isTransposed\n    } = config;\n    const {\n        tree,\n        layoutMatrix\n    } = matrixInfo;\n\n    if (depth === 0) {\n        const brokenMatrix = breakMatrix(tree.matrix, isTransposed, breakPointer);\n        arr.push({\n            matrix: tree.matrix,\n            primaryMatrix: brokenMatrix[0],\n            secondaryMatrix: brokenMatrix[1],\n            space: tree.space\n        });\n        return arr;\n    }\n    const nextLevel = depth - 1;\n    tree.values.forEach((e) => {\n        createMatrixInstances(arr, nextLevel, {\n            tree: e,\n            layoutMatrix\n        }, layout);\n    });\n    return arr;\n};\n","import { mergeRecursive } from 'muze-utils';\n\nexport const PROPS = {\n    config: {\n        sanitization: (context, value) => mergeRecursive(context._config || {}, value)\n    },\n    maxMeasures: {},\n    availableSpace: {},\n    logicalSpace: {}\n};\n","import { PRIMARY } from '../enums/constants';\n/**\n *\n *\n */\nexport const defaultConfig = {\n    distribution: [],\n    classPrefix: 'muze',\n    isDistributionEqual: true,\n    unitMeasures: {\n        height: 100,\n        width: 100,\n        border: 1\n    },\n    isTransposed: false,\n    facet: PRIMARY,\n    extraCellLengths: []\n};\n","import { mergeRecursive, generateGetterSetters, ERROR_MSG } from 'muze-utils';\nimport {\n    createTree,\n    combineMatrices,\n    createMatrixInstances\n  } from '../utils';\nimport { PROPS } from './props';\nimport { HEIGHT, WIDTH } from '../enums/constants';\nimport { defaultConfig } from './default-config';\n\n/**\n * This class used to create column / row matrix for GridLayout\n *\n * @class VisualMatrix\n */\nexport default class VisualMatrix {\n\n    /**\n     *Creates an instance of VisualMatrix.\n     * @param {any} matrix Two set of matrices\n     * @param {any} [config={}] Configuration for VisualMatrix\n     * @memberof VisualMatrix\n     */\n    constructor (matrix, config = {}) {\n        // Prepare matrices\n        this._lastLevelKey = 0;\n        this._primaryMatrix = matrix[0] || [];\n        this._secondaryMatrix = matrix[1] || [];\n        this._maxMeasures = [];\n        this._availableSpace = {};\n\n        // Store the config\n        generateGetterSetters(this, PROPS);\n        const defCon = Object.assign({}, this.constructor.defaultConfig());\n        this.config(mergeRecursive(defCon, config));\n\n        this._layoutMatrix = combineMatrices([matrix[0] || [], matrix[1] || []], this.config());\n    }\n\n     /**\n     * Computes the logical space taken by the entire matrixTree\n     *\n     * @return {Object} Logical space taken\n     * @memberof VisualMatrix\n     */\n    computeLogicalSpace () {\n        throw new Error(ERROR_MSG.INTERFACE_IMPL);\n    }\n\n    computeViewableSpaces () {\n        throw new Error(ERROR_MSG.INTERFACE_IMPL);\n    }\n\n    /**\n     *\n     *\n     * @return\n     * @memberof VisualMatrix\n     */\n    removeExtraCells () {\n        throw new Error(ERROR_MSG.INTERFACE_IMPL);\n    }\n\n    getPriorityDistribution () {\n        throw new Error(ERROR_MSG.INTERFACE_IMPL);\n    }\n\n    /**\n     * Calculates the depth of the tree that can be viewed\n     *\n     * @param {Array} widthMeasures array of widths\n     * @param {Array} heightMeasures array of heights\n     * @return {number} depth of the tree\n     * @memberof VisualMatrix\n     */\n    calculateDepth () {\n        throw new Error(ERROR_MSG.INTERFACE_IMPL);\n    }\n\n    /**\n     * Redistributes the provied space to all cells\n     *\n     * @param {*} viewableMatrix current viewport matrix\n     * @param {*} width provied width\n     * @param {*} height provied height\n     * @return {Object} current viewports matrixes with measures\n     * @memberof VisualMatrix\n     */\n    redistributeSpaces () {\n        throw new Error(ERROR_MSG.INTERFACE_IMPL);\n    }\n\n    /**\n     * Distibutes the given space row wisely\n     *\n     * @param {Object} measures Redistribution information\n     * @memberof VisualMatrix\n     */\n    redistributeViewSpaces () {\n        throw new Error(ERROR_MSG.INTERFACE_IMPL);\n    }\n\n    /**\n     * Dispatch the calculated cell dimensions to all the cells\n     *\n     * @param {Object} measures cell dimension information\n     * @return {Object} row and column heights / widths\n     * @memberof VisualMatrix\n     */\n    getCellDimensions () {\n        throw new Error(ERROR_MSG.INTERFACE_IMPL);\n    }\n\n    /**\n     *\n     *\n     * @param {*} params\n     * @returns\n     * @memberof VisualMatrix\n     */\n    primaryMatrix (...params) {\n        if (params.length) {\n            return this;\n        }\n        return this._primaryMatrix;\n    }\n\n    secondaryMatrix (...params) {\n        if (params.length) {\n            return this;\n        }\n        return this._secondaryMatrix;\n    }\n\n    tree (...params) {\n        if (params.length) {\n            return this;\n        }\n        return this._tree;\n    }\n\n    static defaultConfig () {\n        return defaultConfig;\n    }\n\n    createTree () {\n        const { tree, lastLevelKey } = createTree(this);\n        this._lastLevelKey = lastLevelKey;\n        return tree;\n    }\n\n    /**\n     * Returns the space taken by visual matrix\n     *\n     * @return {Object} space taken by the matrix\n     * @memberof VisualMatrix\n     */\n    getLogicalSpace () {\n        return this.logicalSpace();\n    }\n\n    /**\n     * Sets the provied space to the visual matrix\n     *\n     * @param {number} width width provided\n     * @param {number} height height provided\n     * @memberof VisualMatrix\n     */\n    setAvailableSpace (width, height) {\n        this.availableSpace({ width, height });\n        const tree = this.tree();\n        const heightMeasures = this.populateMaxMeasures(HEIGHT, tree);\n        const widthMeasures = this.populateMaxMeasures(WIDTH, tree);\n        const depth = this.calculateDepth(widthMeasures, heightMeasures);\n\n        this.viewableMatrix = this.createViewPortMatrix(depth);\n        this.viewableMeasures = this.redistributeSpaces(width, height);\n        return this;\n    }\n\n    /**\n     * Populate the max measures in the array\n     *\n     * @param {Array} measures array to be filled with max measures\n     * @param {Object} matrixTree matrix tree of visual matrix\n     * @param {number} measure width or height\n     * @param {number} [depth=0] depth of the tree that to be calculated\n     * @memberof VisualMatrix\n     */\n    populateMaxMeasures (type, matrixTree, depth = 0, measures = []) {\n        measures[depth] = Math.max(measures[depth] || 0, matrixTree.space[type]);\n        if (matrixTree.values) {\n            const childDepth = depth + 1;\n            matrixTree.values.forEach((child) => {\n                if (child.space) {\n                    measures = this.populateMaxMeasures(type, child, childDepth, measures);\n                }\n            });\n        }\n        return measures;\n    }\n\n    /**\n     * Gets the viewable measures for the current viewable matrix\n     *\n     * @return {Object} Set of viewable measures\n     * @memberof VisualMatrix\n     */\n    getViewableSpaces () {\n        return this.viewableMeasures;\n    }\n\n    /**\n     * Returns the matrix that can be viewed in the current viewport\n     *\n     * @return {Array} Set of matrices that can be viewed\n     * @memberof VisualMatrix\n     */\n    getViewableMatrices () {\n        return this.viewableMatrix;\n    }\n\n    /**\n     * Creates the viewport that can be viewed together\n     *\n     * @param {number} depth maxDepth that can be viewed in the viewport\n     * @return {Array<Object>} Set of matrices that can be viewed\n     * @memberof VisualMatrix\n     */\n    createViewPortMatrix (depth) {\n        const arr = [];\n        createMatrixInstances(arr, depth, this.removeExtraCells(), this);\n        return arr;\n    }\n}\n\n","import { mergeRecursive } from 'muze-utils';\nimport {\n    extraCellsRemover,\n    combineMatrices,\n    spaceTakenByColumn,\n    getDistributedHeight,\n    computeLogicalSpace,\n    createMatrixEachLevel\n  } from '../utils';\nimport { ROW_ROOT } from '../enums/constants';\nimport VisualMatrix from './visual-matrix';\n\n/**\n * This class used to create column / row matrix for GridLayout\n *\n * @class VisualMatrix\n */\nexport default class RowVisualMatrix extends VisualMatrix {\n\n    /**\n     *Creates an instance of VisualMatrix.\n     * @param {any} matrix Two set of matrices\n     * @param {any} [config={}] Configuration for VisualMatrix\n     * @memberof VisualMatrix\n     */\n    constructor (matrix, config = {}) {\n        super(matrix, config);\n\n        this._breakPointer = (matrix[0].length > 0 ? matrix[0][0].length : 0);\n        this._layoutMatrix = combineMatrices([matrix[0] || [], matrix[1] || []], this.config());\n\n        // Create Tree\n        this._tree = {\n            key: ROW_ROOT,\n            values: this.createTree()\n        };\n        this._logicalSpace = this.computeLogicalSpace();\n    }\n\n    /**\n     * Computes the logical space taken by the entire matrixTree\n     *\n     * @return {Object} Logical space taken\n     * @memberof VisualMatrix\n     */\n    computeLogicalSpace () {\n        const matrixTree = this.tree();\n        createMatrixEachLevel(matrixTree, false);\n        return computeLogicalSpace(matrixTree, this.config(), this.maxMeasures());\n    }\n\n    computeViewableSpaces (measures) {\n        const {\n            maxHeights,\n            maxWidths,\n            height\n        } = measures;\n        return this.viewableMatrix.map((matrixInst, i) => {\n            const cellDimOptions = { matrixInst, maxWidths, maxHeights, matrixIndex: i };\n            const { widths, rowHeights, columnWidths } = this.getCellDimensions(cellDimOptions);\n            const heightMeasures = [height, height];\n            const columnMeasures = widths;\n\n            return {\n                rowHeights: {\n                    primary: rowHeights[0],\n                    secondary: rowHeights[1]\n                },\n                columnWidths: {\n                    primary: columnWidths[0],\n                    secondary: columnWidths[1]\n                },\n                height: {\n                    primary: heightMeasures[0],\n                    secondary: heightMeasures[1]\n                },\n                width: {\n                    primary: columnMeasures[0],\n                    secondary: columnMeasures[1]\n                }\n            };\n        });\n    }\n\n    /**\n     *\n     *\n     * @return\n     * @memberof VisualMatrix\n     */\n    removeExtraCells () {\n        const {\n            isTransposed,\n            extraCellLengths\n        } = this.config();\n        const matrix = this._layoutMatrix;\n        const tree = mergeRecursive({}, this.tree());\n        const begCellLen = extraCellLengths[0];\n        const endCellLen = extraCellLengths[1] || Number.NEGATIVE_INFINITY;\n        const layoutMatrix = !isTransposed ? extraCellsRemover(matrix, begCellLen, endCellLen) :\n        matrix.slice(0).map(e => extraCellsRemover(e, begCellLen, endCellLen));\n\n        tree.values = extraCellsRemover(tree.values, begCellLen, endCellLen);\n        tree.matrix = extraCellsRemover(tree.matrix, begCellLen, endCellLen);\n\n        return {\n            tree,\n            layoutMatrix\n        };\n    }\n\n    getPriorityDistribution (measures) {\n        let remainingAvailWidth;\n        let remainingWidth;\n        let cWidths = [];\n        let conditions = [];\n        let maxPrioritySpace = 0;\n        const {\n            matrix,\n            width: availableWidth,\n            maxMeasures: maxWidths,\n            maxWidth: currentWidth,\n            height\n        } = measures;\n        const priority = this.config().priority;\n        const primaryMatrixLength = this.primaryMatrix().length ? this.primaryMatrix()[0].length : 0;\n\n        const dist = [];\n\n        remainingAvailWidth = availableWidth;\n        remainingWidth = currentWidth;\n\n        if (priority === 2) {\n            conditions = [primaryMatrixLength - 1, primaryMatrixLength];\n            // divider = Math.min(2, matrixLen);\n        } else {\n            conditions = priority === 0 ? [primaryMatrixLength - 1] : [primaryMatrixLength];\n            // divider = Math.min(1, matrixLen);\n        }\n        conditions.forEach((i) => {\n            dist[i] = maxWidths[i];\n            maxPrioritySpace += maxWidths[i];\n            remainingAvailWidth -= dist[i];\n            remainingWidth -= dist[i];\n        });\n        matrix[0].forEach((e, i) => {\n            if (conditions.indexOf(i) === -1) {\n                dist[i] = remainingAvailWidth * (maxWidths[i] / remainingWidth);\n            }\n        });\n        matrix.forEach(row => row.forEach((col, cIdx) => {\n            if (conditions.indexOf(cIdx) === -1) {\n                col.setAvailableSpace(dist[cIdx], height);\n\n                cWidths[cIdx] = Math.max(cWidths[cIdx] || 0, Math.floor(col.getLogicalSpace().width));\n            } else {\n                cWidths[cIdx] = 0;\n            }\n        }));\n\n        const prioritySpace = availableWidth - cWidths.reduce((t, n) => t + n);\n        if (prioritySpace < 0) {\n            cWidths = cWidths.map(() => 0);\n        } else {\n            conditions.forEach((i) => {\n                cWidths[i] = Math.floor(prioritySpace * (dist[i] / maxPrioritySpace || 1));\n            });\n        }\n        return cWidths;\n    }\n\n    /**\n     * Calculates the depth of the tree that can be viewed\n     *\n     * @param {Array} widthMeasures array of widths\n     * @param {Array} heightMeasures array of heights\n     * @return {number} depth of the tree\n     * @memberof VisualMatrix\n     */\n    calculateDepth (widthMeasures, heightMeasures) {\n        let i;\n        const { height } = this.availableSpace();\n\n        for (i = 0; i < heightMeasures.length; i++) {\n            if (heightMeasures[i] <= height) break;\n        }\n\n        return Math.min(widthMeasures.length - 1, i);\n    }\n\n    /**\n     * Redistributes the provied space to all cells\n     *\n     * @param {*} viewableMatrix current viewport matrix\n     * @param {*} width provied width\n     * @param {*} height provied height\n     * @return {Object} current viewports matrixes with measures\n     * @memberof VisualMatrix\n     */\n    redistributeSpaces (width, height) {\n        let maxHeights = [];\n        let maxWidths = [];\n        const maxMeasures = this.maxMeasures();\n\n        const maxWidth = maxMeasures.reduce((t, n) => {\n            t += n;\n            return t;\n        });\n        const logicalWidths = this.getPriorityDistribution({\n            matrix: this._layoutMatrix,\n            maxWidth,\n            maxMeasures,\n            width,\n            height\n        });\n\n        this.viewableMatrix.forEach((matrixInst) => {\n            const matrix = matrixInst.matrix;\n            const mWidth = 0;\n            const mHeight = 0;\n            const options = { mWidth, mHeight, matrix, width, height, maxHeights, maxWidths, logicalWidths };\n            const measures = this.redistributeViewSpaces(options);\n            maxWidths = measures.maxWidths;\n            maxHeights = measures.maxHeights;\n        });\n        return this.computeViewableSpaces({ height, width, maxHeights, maxWidths });\n    }\n\n    /**\n     * Distibutes the given space row wisely\n     *\n     * @param {Object} measures Redistribution information\n     * @memberof VisualMatrix\n     */\n    redistributeViewSpaces (measures) {\n        let cWidths = [];\n        let rHeights = [];\n        let mHeight = 0;\n        const maxMeasures = this.maxMeasures();\n\n        const {\n            isDistributionEqual,\n            distribution,\n            isTransposed,\n            gutter\n        } = this.config();\n        const { matrix, height, maxHeights, maxWidths, logicalWidths } = measures;\n        mHeight = spaceTakenByColumn(matrix, this._lastLevelKey).height;\n\n        const maxWidth = maxMeasures.reduce((t, n) => {\n            t += n;\n            return t;\n        });\n        measures.maxMeasures = maxMeasures;\n        measures.maxWidth = maxWidth;\n        if (maxWidth > 0) {\n            cWidths = logicalWidths;\n        } else {\n            cWidths = maxMeasures.map(() => 0);\n        }\n        rHeights = getDistributedHeight({\n            matrix,\n            cIdx: this._lastLevelKey,\n            height: mHeight,\n            availableHeight: height,\n            isDistributionEqual,\n            distribution,\n            isTransposed,\n            gutter\n        });\n        if (maxWidths.length > 0) {\n            cWidths = cWidths.map((e, i) => Math.max(e, maxWidths[0][i] || 0));\n        }\n        maxWidths.push(cWidths);\n        for (let x = 0; x < maxWidths.length; x++) {\n            maxWidths[x] = cWidths;\n        }\n        maxHeights.push(rHeights);\n        return { maxWidths, maxHeights };\n    }\n\n    /**\n     * Dispatch the calculated cell dimensions to all the cells\n     *\n     * @param {Object} measures cell dimension information\n     * @return {Object} row and column heights / widths\n     * @memberof VisualMatrix\n     */\n    getCellDimensions (measures) {\n        const {\n            unitMeasures\n        } = this.config();\n        const borderWidth = unitMeasures.border;\n        const { matrixInst, maxWidths, maxHeights, matrixIndex } = measures;\n        const matrix = matrixInst.matrix;\n        const rowHeights = [[0], [0]];\n        const columnWidths = [[0], [0]];\n        const heights = [0, 0];\n        const widths = [0, 0];\n        const breakPointer = this._breakPointer;\n\n        matrix.forEach((row, rIdx) => {\n            row.forEach((cell, cIdx) => {\n                const colHeight = maxHeights[matrixIndex][rIdx] || 0;\n                const colWidth = maxWidths[matrixIndex][cIdx];\n\n                cell.setAvailableSpace(colWidth, colHeight - borderWidth);\n\n                if (rIdx === 0 && cIdx < breakPointer) {\n                    columnWidths[0][cIdx] = colWidth;\n                    widths[0] = (widths[0] || 0) + colWidth;\n                } else if (rIdx === 0 && cIdx >= breakPointer) {\n                    columnWidths[1][cIdx - breakPointer] = colWidth;\n                    widths[1] = (widths[1] || 0) + colWidth;\n                }\n                if (cIdx === this._lastLevelKey) {\n                    rowHeights[0][rIdx] = colHeight;\n                    rowHeights[1][rIdx] = colHeight;\n                }\n            });\n        });\n        return {\n            heights,\n            widths,\n            rowHeights,\n            columnWidths\n        };\n    }\n}\n\n","import { mergeRecursive } from 'muze-utils';\nimport {\n    extraCellsRemover,\n    getDistributedWidth,\n    spaceTakenByRow,\n    createMatrixEachLevel,\n    computeLogicalSpace\n  } from '../utils';\nimport { COLUMN_ROOT } from '../enums/constants';\nimport VisualMatrix from './visual-matrix';\n\n/**\n * This class used to create column / row matrix for GridLayout\n *\n * @class VisualMatrix\n */\nexport default class ColumnVisualMatrix extends VisualMatrix {\n\n    /**\n     *Creates an instance of VisualMatrix.\n     * @param {any} matrix Two set of matrices\n     * @param {any} [config={}] Configuration for VisualMatrix\n     * @memberof VisualMatrix\n     */\n    constructor (matrix, config = {}) {\n        super(matrix, config);\n\n        this._breakPointer = matrix[0].length;\n\n        // Create Tree\n        this._tree = {\n            key: COLUMN_ROOT,\n            values: this.createTree()\n        };\n        this._logicalSpace = this.computeLogicalSpace();\n    }\n\n    /**\n     * Computes the logical space taken by the entire matrixTree\n     *\n     * @return {Object} Logical space taken\n     * @memberof VisualMatrix\n     */\n    computeLogicalSpace () {\n        const matrixTree = this.tree();\n        createMatrixEachLevel(matrixTree, true);\n        return computeLogicalSpace(matrixTree, this.config(), this.maxMeasures());\n    }\n\n    computeViewableSpaces (measures) {\n        const {\n            maxHeights,\n            maxWidths,\n            height,\n            width\n        } = measures;\n\n        return this.viewableMatrix.map((matrixInst, i) => {\n            const cellDimOptions = { matrixInst, maxWidths, maxHeights, matrixIndex: i, height };\n            const {\n                heights,\n                rowHeights,\n                columnWidths\n            } = this.getCellDimensions(cellDimOptions);\n            const heightMeasures = heights;\n            const columnMeasures = [width, width];\n\n            return {\n                rowHeights: {\n                    primary: rowHeights[0],\n                    secondary: rowHeights[1]\n                },\n                columnWidths: {\n                    primary: columnWidths[0],\n                    secondary: columnWidths[1]\n                },\n                height: {\n                    primary: heightMeasures[0],\n                    secondary: heightMeasures[1]\n                },\n                width: {\n                    primary: columnMeasures[0],\n                    secondary: columnMeasures[1]\n                }\n            };\n        });\n    }\n\n    /**\n     *\n     *\n     * @return\n     * @memberof VisualMatrix\n     */\n    removeExtraCells () {\n        const {\n            isTransposed,\n            extraCellLengths\n        } = this.config();\n        const matrix = this._layoutMatrix;\n        const tree = mergeRecursive({}, this.tree());\n        const begCellLen = extraCellLengths[0];\n        const endCellLen = extraCellLengths[1] || Number.NEGATIVE_INFINITY;\n        const layoutMatrix = !isTransposed ? extraCellsRemover(matrix, begCellLen, endCellLen) :\n        matrix.slice(0).map(e => extraCellsRemover(e, begCellLen, endCellLen));\n\n        tree.values = extraCellsRemover(tree.values, begCellLen, endCellLen);\n\n        tree.matrix = tree.matrix.map(e => extraCellsRemover(e, begCellLen, endCellLen));\n\n        return {\n            tree,\n            layoutMatrix\n        };\n    }\n\n    getPriorityDistribution (measures) {\n        const {\n            height,\n            maxHeights\n        } = measures;\n        let remainingHeight = height;\n        let heightDist = [];\n        let conditions = [];\n        let divider = 2;\n        const priority = this.config().priority;\n        const primaryMatrixLength = this.primaryMatrix().length;\n\n        if (priority === 2) {\n            conditions = [primaryMatrixLength - 1, primaryMatrixLength];\n            divider = 2;\n        } else {\n            conditions = priority === 0 ? [primaryMatrixLength - 1] : [primaryMatrixLength];\n            divider = 1;\n        }\n        maxHeights.forEach((heights, index) => {\n            if (conditions.indexOf(index) === -1) {\n                heightDist[index] = heights;\n                remainingHeight -= heights;\n            }\n        });\n        if (remainingHeight < 0) {\n            heightDist = heightDist.map(() => 0);\n        } else {\n            conditions.forEach((condition) => {\n                heightDist[condition] = Math.min(maxHeights[condition], (remainingHeight) / divider);\n            });\n        }\n        return heightDist;\n    }\n\n    /**\n     * Calculates the depth of the tree that can be viewed\n     *\n     * @param {Array} widthMeasures array of widths\n     * @param {Array} heightMeasures array of heights\n     * @return {number} depth of the tree\n     * @memberof VisualMatrix\n     */\n    calculateDepth (widthMeasures) {\n        let j;\n        const { width } = this.availableSpace();\n\n        for (j = 0; j < widthMeasures.length; j++) {\n            if (widthMeasures[j] <= width) break;\n        }\n        return Math.min(widthMeasures.length - 1, j);\n    }\n\n     /**\n     * Redistributes the provied space to all cells\n     *\n     * @param {*} viewableMatrix current viewport matrix\n     * @param {*} width provied width\n     * @param {*} height provied height\n     * @return {Object} current viewports matrixes with measures\n     * @memberof VisualMatrix\n     */\n    redistributeSpaces (width, height) {\n        let maxHeights = [];\n        let maxWidths = [];\n\n        this.viewableMatrix.forEach((matrixInst) => {\n            const matrix = matrixInst.matrix;\n            const mWidth = 0;\n            const mHeight = 0;\n            const options = { mWidth, mHeight, matrix, width, height, maxHeights, maxWidths };\n            const maxMeasures = this.redistributeViewSpaces(options);\n            maxWidths = maxMeasures.maxWidths;\n            maxHeights = maxMeasures.maxHeights;\n        });\n\n        return this.computeViewableSpaces({ height, width, maxHeights, maxWidths });\n    }\n\n    /**\n     * Distibutes the given space column wisely\n     *\n     * @param {Object} measures Redistribution information\n     * @memberof VisualMatrix\n     */\n    redistributeViewSpaces (measures) {\n        let rHeights = [];\n        const {\n            matrix,\n            width,\n            maxHeights,\n            maxWidths\n        } = measures;\n        const borderWidth = this.config().unitMeasures.border;\n\n        const mWidth = spaceTakenByRow(matrix[this._lastLevelKey]).width;\n        const cWidths = getDistributedWidth({\n            row: matrix[this._lastLevelKey],\n            width: mWidth,\n            availableWidth: width\n        }, this.config());\n\n        matrix.forEach((row, rIdx) => row.forEach((col, cIdx) => {\n            const oldLogicalSpace = col.getLogicalSpace();\n\n            col.setAvailableSpace(cWidths[cIdx] - borderWidth, oldLogicalSpace.height);\n\n            rHeights[rIdx] = Math.max(rHeights[rIdx] || 0, Math.floor(col.getLogicalSpace().height));\n        }));\n        if (maxHeights.length > 0) {\n            rHeights = rHeights.map((e, i) => Math.max(e, maxHeights[0][i]));\n        }\n        maxHeights.push(rHeights);\n        for (let x = 0; x < maxHeights.length; x++) {\n            maxHeights[x] = rHeights;\n        }\n        maxWidths.push(cWidths);\n        return { maxHeights, maxWidths };\n    }\n\n    /**\n     * Dispatch the calculated cell dimensions to all the cells\n     *\n     * @param {Object} measures cell dimension information\n     * @return {Object} row and column heights / widths\n     * @memberof VisualMatrix\n     */\n    getCellDimensions (measures) {\n        const {\n            unitMeasures\n        } = this.config();\n        const borderWidth = unitMeasures.border;\n        const { matrixInst, height, maxWidths, maxHeights, matrixIndex } = measures;\n        const matrix = matrixInst.matrix;\n        const rowHeights = [[0], [0]];\n        const columnWidths = [[0], [0]];\n        const heights = [0, 0];\n        const widths = [0, 0];\n        const breakPointer = this._breakPointer;\n\n        const heightDistribution = this.getPriorityDistribution({ height, maxHeights: maxHeights[0] || [] });\n\n        matrix.forEach((row, rIdx) => {\n            row.forEach((cell, cIdx) => {\n                const colHeight = heightDistribution[rIdx] || 0;\n                const colWidth = maxWidths[matrixIndex][cIdx];\n\n                cell.setAvailableSpace(colWidth - borderWidth, colHeight);\n\n                if (cIdx === 0 && rIdx < breakPointer) {\n                    rowHeights[0][rIdx] = colHeight;\n                    heights[0] = (heights[0] || 0) + colHeight;\n                } else if (cIdx === 0 && rIdx >= breakPointer) {\n                    rowHeights[1][rIdx - breakPointer] = colHeight;\n                    heights[1] = (heights[1] || 0) + colHeight;\n                }\n                if (rIdx === this._lastLevelKey) {\n                    columnWidths[0][cIdx] = colWidth;\n                    columnWidths[1][cIdx] = colWidth;\n                }\n            });\n        });\n        return {\n            heights,\n            widths,\n            rowHeights,\n            columnWidths\n        };\n    }\n}\n\n","import {\n    HEIGHT, WIDTH, COLUMN, ROW, HORIZONTAL, VERTICAL, HOLISTIC,\n    MAX_WIDTH_AVAIL_FOR_COL_MATRIX, COLUMN_MATRIX, MAX_HEIGHT_AVAIL_FOR_ROW_MATRIX, ROW_MATRIX, SCROLL\n} from '../enums/constants';\n\n/**\n * Gets measurement for an instance of visual matrix\n *\n * @param {Array} matrix instance of visual matrix\n * @param {string} type height/width\n * @return {Object} Logical height/width of the matrix\n */\nexport function getMatrixMeasurement (matrix, type) {\n    if (matrix) {\n        return matrix.getLogicalSpace()[type];\n    }\n    return 0;\n}\n\n/**\n * Sets available space for an instance of visual matrix\n *\n * @param {Array} matrix instance of visual matrix\n * @param {string} type height/width\n * @param {number} value Value of measurement\n */\nexport function setMatrixMeasurement (matrix, type, value) {\n    if (matrix) {\n        const spaces = matrix.getLogicalSpace();\n        if (value && spaces[type] !== value) {\n            type === HEIGHT ? matrix.setAvailableSpace(spaces.width, value) :\n                matrix.setAvailableSpace(value, spaces.height);\n        }\n    }\n}\n\nconst setAvailableSpace = (matrix, widths, heights) => {\n    matrix.forEach((row, rIdx) => {\n        row.forEach((placeholder, cIdx) => {\n            placeholder.setAvailableSpace(widths[cIdx], heights[rIdx]);\n        });\n    });\n};\n\nconst setViewSpaces = (layout, pointerType, viewSpaces) => {\n    let pointer = layout.config()[`${pointerType}Pointer`];\n    if (viewSpaces.length - 1 < pointer) {\n        pointer = 0;\n        layout.config({ [`${pointerType}Pointer`]: pointer });\n    }\n    return pointer;\n};\n\nconst paginationDetailsMap = {\n    column: {\n        maxMeasure: MAX_WIDTH_AVAIL_FOR_COL_MATRIX,\n        matrix: COLUMN_MATRIX,\n        measureType: WIDTH,\n        scrollType: HORIZONTAL\n    },\n    row: {\n        maxMeasure: MAX_HEIGHT_AVAIL_FOR_ROW_MATRIX,\n        matrix: ROW_MATRIX,\n        measureType: HEIGHT,\n        scrollType: VERTICAL\n    }\n};\n\n/**\n * This method provides the required width/height in the different pagination stages.\n * If the pagination is holistic, then only the max width/height will be provided for layouting\n * If scroll is enabled, then the entire width/height shall be provided for layouting\n * Note: width is required for scrolling the columns while height is required for scrolling rows\n *\n *\n * @param {Layout} layout Layout instance required for configuration details\n * @param {Object} measureDetails different measure details for row/column\n * @param {number} maxMeasure maximum width/height present for column/row respectively\n * @return {number} Provides the width/height based on which further calculation can occur\n */\nconst getMatrixMeasureForPagination = (layout, measureDetails, maxMeasure, buffer) => {\n    const {\n        pagination\n    } = layout.config();\n    const {\n        matrix,\n        measureType,\n        scrollType\n    } = measureDetails;\n\n    switch (pagination) {\n    case HOLISTIC:\n        return maxMeasure;\n    default: {\n        const actualMeasure = getMatrixMeasurement(layout[matrix](), measureType) + buffer;\n\n        if (actualMeasure > maxMeasure) {\n            layout.scrollInfo({ [scrollType]: true });\n        }\n        return Math.max(maxMeasure, actualMeasure);\n    }\n    }\n};\n\n/**\n * This method uses the getMatrixMeasureForPagination function to calculate maximum measure\n * depending on the layouting algorithm used\n *\n *\n * @param {Layout} layout Layout instance required for configuration details\n * @param {string} matrixType row/column\n * @param {number} relatedMaxMeasure maximum width/height present for column/row respectively\n * @return {number} Provides the width/height based on which further calculation can occur\n */\nconst paginationMeasureGetter = (layout, matrixType, relatedMaxMeasure, buffer) =>\n    getMatrixMeasureForPagination(layout, paginationDetailsMap[matrixType], relatedMaxMeasure, buffer);\n\nconst getMatrixWidthDetails = (layout) => {\n    const rowMatrix = layout.rowMatrix();\n    const {\n        width\n    } = layout.measurement();\n    const {\n        border,\n        buffer\n    } = layout.config();\n\n    // Border adjustment for each cell in the central matrix\n    const borderWidth = border.width;\n\n    // Get width of row matrix\n    const rowMatrixWidth = getMatrixMeasurement(rowMatrix, WIDTH);\n\n    // Get maximum width allowed for the row matrix\n    const maxRowMatrixWidth = Math.min(rowMatrixWidth + buffer, width / 2);\n\n    // Get maximum width available for the column matrix\n    const maxWidthAvailableForColumnMatrix = width - maxRowMatrixWidth - borderWidth;\n\n    // Set width for column matrix\n    const columnMatrixWidth = paginationMeasureGetter(layout, COLUMN, maxWidthAvailableForColumnMatrix, 0);\n\n    return {\n        rowMatrixWidth,\n        maxRowMatrixWidth,\n        columnMatrixWidth,\n        maxWidthAvailableForColumnMatrix\n    };\n};\n\nconst getHeightRequiredByColMatrix = (layout, columnMatrixWidth) => {\n    const {\n        height\n    } = layout.measurement();\n    const columnMatrix = layout.columnMatrix();\n\n    // Get maximum allowed height for colum matrix\n    const maxColumnMatrixHeight = Math.min(columnMatrix.getLogicalSpace().height, height / 2);\n\n    // Set the computed width and max height to column matrix to determine the actual height\n    // that will be taken by the column matrix\n    columnMatrix.setAvailableSpace(columnMatrixWidth, maxColumnMatrixHeight);\n\n    // Get the set of pages column view\n    const columnViewPages = columnMatrix.getViewableSpaces();\n\n    // Figuring out total space needed by current view space\n    const columnViewSpace = columnViewPages[layout.config().columnPointer];\n\n    // Getting height of column matrix\n    const columnMatrixHeight = columnViewSpace.height.primary + columnViewSpace.height.secondary;\n\n    return {\n        columnMatrixHeight,\n        maxColumnMatrixHeight\n    };\n};\n\nconst getMatrixHeightDetails = (layout, columnMatrixWidth) => {\n    const {\n        height\n    } = layout.measurement();\n    const {\n        buffer\n    } = layout.config();\n\n    // Get actual height required by column matrix\n    const { columnMatrixHeight, maxColumnMatrixHeight } = getHeightRequiredByColMatrix(layout, columnMatrixWidth);\n\n    // Based on column height, compute max height available for row matrix\n    const maxHeightAvailableForRowMatrix = height - Math.min(maxColumnMatrixHeight, columnMatrixHeight);\n\n    // Get height for row matrix\n    const rowMatrixHeight = paginationMeasureGetter(layout, ROW, maxHeightAvailableForRowMatrix, buffer);\n\n    return {\n        columnMatrixHeight,\n        maxColumnMatrixHeight,\n        rowMatrixHeight,\n        maxHeightAvailableForRowMatrix\n    };\n};\n\nconst setValueMatrixMeasurements = (layout, rowViewableSpaces, columnViewableSpaces) => {\n    const centerMatrix = layout.centerMatrix();\n\n    const {\n        border\n    } = layout.config();\n    const matrices = layout.matrices();\n    const {\n        top,\n        bottom\n    } = matrices;\n\n    // Border adjustment for each cell in the central matrix\n    const borderWidth = border.width;\n\n    // Get the heights for each cell in the row matrix\n    const rowHeights = [].concat(...rowViewableSpaces.map(e => e.rowHeights.primary));\n\n    // Get the widths for each of the row matrix cells(primary and secondary)\n    const rowWidthsPrimary = [].concat(...rowViewableSpaces.map(e => e.columnWidths.primary));\n    const rowWidthsSecondary = [].concat(...rowViewableSpaces.map(e => e.columnWidths.secondary));\n\n    // Get the widths for each cell in the column matrix\n    const columnWidths = [].concat(...columnViewableSpaces.map(e => e.columnWidths.primary));\n\n    // Get the widths for each of the column matrix cells(primary and secondary)\n    const columnHeightsPrimary = columnViewableSpaces[0].rowHeights.primary;\n    const columnHeightsSecondary = [].concat(...columnViewableSpaces.map(e => e.rowHeights.secondary));\n\n    // Setting the available space for each cell in the centre matrix computed throught the row and\n    // column matrices\n    centerMatrix.forEach((matrix, rIdx) => {\n        matrix.forEach((placeholder, cIdx) => {\n            placeholder.setAvailableSpace(columnWidths[cIdx] - borderWidth, rowHeights[rIdx] - borderWidth);\n        });\n    });\n\n    // Set the heights and widths for the corner matrices namely:\n    // TOP_LEFT\n    setAvailableSpace(top[0], rowWidthsPrimary, columnHeightsPrimary);\n    // TOP_RIGHT\n    setAvailableSpace(top[2], rowWidthsSecondary, columnHeightsPrimary);\n    // BOTTOM_LEFT\n    setAvailableSpace(bottom[0], rowWidthsPrimary, columnHeightsSecondary);\n     // BOTTOM_RIGHT\n    setAvailableSpace(bottom[2], rowWidthsSecondary, columnHeightsSecondary);\n};\n\nconst bufferCondition = {\n    isScroll: true,\n    pagination: SCROLL\n};\n\nconst getBufferFromCondition = (layout, type) => {\n    const scrollInfo = layout.scrollInfo();\n    const {\n        pagination\n    } = layout.config();\n\n    const currentBufferType = {\n        pagination,\n        isScroll: scrollInfo[type]\n    };\n\n    return Object.keys(bufferCondition).every(e => bufferCondition[e] === currentBufferType[e]);\n};\n\nconst getActualBufferFromConfig = (layout) => {\n    const {\n        buffer\n    } = layout.config();\n    const [horizontalBuffer, verticalBuffer] = [HORIZONTAL, VERTICAL].map((type) => {\n        if (getBufferFromCondition(layout, type)) {\n            return buffer;\n        }\n        return 0;\n    });\n\n    return {\n        horizontalBuffer,\n        verticalBuffer\n    };\n};\n/**\n * Computes the measurements of space for all matrices in the\n * layout\n *\n * @param {Object} layout Instance of grid layout\n * @return {Object} set of measurements for the layout\n */\nexport const computeLayoutMeasurements = (layout) => {\n    const rowMatrix = layout.rowMatrix();\n    const columnMatrix = layout.columnMatrix();\n\n    // Compute the widths of the row and column matrices\n    const {\n        rowMatrixWidth,\n        maxRowMatrixWidth,\n        maxWidthAvailableForColumnMatrix,\n        columnMatrixWidth\n    } = getMatrixWidthDetails(layout);\n\n    // Compute the heights of the row and column matrices\n    const {\n        columnMatrixHeight,\n        rowMatrixHeight,\n        maxHeightAvailableForRowMatrix\n    } = getMatrixHeightDetails(layout, columnMatrixWidth);\n\n    const {\n        horizontalBuffer,\n        verticalBuffer\n    } = getActualBufferFromConfig(layout);\n    rowMatrix.setAvailableSpace(maxRowMatrixWidth - verticalBuffer, rowMatrixHeight - horizontalBuffer);\n\n    // Get row and columns viewable spaces\n    const rowViewableSpaces = rowMatrix.getViewableSpaces();\n    const columnViewableSpaces = columnMatrix.getViewableSpaces();\n\n    // Set view spaces for row and columns\n    setViewSpaces(layout, ROW, rowViewableSpaces);\n    setViewSpaces(layout, COLUMN, columnViewableSpaces);\n\n    // Set measures for each cell of the value matrix\n    setValueMatrixMeasurements(layout, rowViewableSpaces, columnViewableSpaces);\n\n    return {\n        rowMatrixHeight: rowMatrixHeight - horizontalBuffer,\n        rowMatrixWidth: rowMatrixWidth - verticalBuffer,\n        maxHeightAvailableForRowMatrix: maxHeightAvailableForRowMatrix - horizontalBuffer,\n\n        columnMatrixHeight,\n        columnMatrixWidth,\n        maxWidthAvailableForColumnMatrix\n    };\n};\n","/**\n * Gets view matrices based on current pointers for row and column\n *\n * @param {Object} layout instance of layout\n * @param {number} rowPointer current row pointer\n * @param {number} columnPointer current column pointer\n * @return {Object} returns the view matrix and its relevant information\n */\nexport const getViewMatrices = (layout, rowPointer, columnPointer) => {\n    const rowMatrix = layout.rowMatrix();\n    const columnMatrix = layout.columnMatrix();\n    const centerMatrix = layout.centerMatrix();\n    const matrices = layout.matrices();\n    const rowMatrices = rowMatrix.getViewableMatrices();\n    const columnMatrices = columnMatrix.getViewableMatrices();\n    const centralMatrixPointer = {\n        row: 0,\n        column: 0\n    };\n\n    for (let i = rowPointer - 1; i >= 0; i--) {\n        const length = Math.max(rowMatrices[i].primaryMatrix.length,\n            rowMatrices[i].secondaryMatrix.length);\n        centralMatrixPointer.row += length;\n    }\n     /* istanbul ignore next */\n    for (let i = columnPointer - 1; i >= 0; i--) {\n        const matrix = columnMatrices[i];\n        const { primaryMatrix, secondaryMatrix } = matrix;\n        const length = Math.max(primaryMatrix[0] ? primaryMatrix[0].length : 0,\n            secondaryMatrix[0] ? secondaryMatrix[0].length : 0);\n        centralMatrixPointer.column += length;\n    }\n\n    matrices.top[1] = columnMatrices[columnPointer].primaryMatrix;\n    matrices.bottom[1] = columnMatrices[columnPointer].secondaryMatrix;\n\n    matrices.center[0] = rowMatrices[rowPointer].primaryMatrix;\n    matrices.center[2] = rowMatrices[rowPointer].secondaryMatrix;\n\n    const rowMatrixLen = Math.max(matrices.center[0].length, matrices.center[2].length);\n     /* istanbul ignore next */\n    const columnMatrixLen = Math.max(matrices.top[1][0] ? matrices.top[1][0].length : 0, matrices.bottom[1][0] ?\n            matrices.bottom[1][0].length : 0);\n    matrices.center[1] = centerMatrix.slice(centralMatrixPointer.row, centralMatrixPointer.row + rowMatrixLen)\n        .map(matrix => matrix.slice(centralMatrixPointer.column, centralMatrixPointer.column + columnMatrixLen));\n\n    return {\n        matrices,\n        rowPages: rowMatrices.length,\n        columnPages: columnMatrices.length\n    };\n};\n\nconst measureSum = measureArr => measureArr.reduce((total, measure) => total + measure, 0);\n/**\n * Returns measurements of the cells of the current matrix\n *\n * @param {Object} layout instance of layout\n * @return {Object} returns the measurements for current view matrix\n */\nexport const getViewMeasurements = (layout, maxRowHeight, maxColWidth) => {\n    const rowMatrix = layout.rowMatrix();\n    const columnMatrix = layout.columnMatrix();\n    const {\n        columnPointer,\n        rowPointer\n    } = layout.config();\n\n    const rowSpaces = rowMatrix.getViewableSpaces()[rowPointer];\n    const colSpaces = columnMatrix.getViewableSpaces()[columnPointer];\n\n    const {\n        rowHeights,\n        width: rowMatrixWidth\n    } = rowSpaces;\n    const {\n        columnWidths,\n        height: columnMatrixHeight\n    } = colSpaces;\n\n    const { primary: leftWidth, secondary: rightWidth } = rowMatrixWidth;\n    const { primary: topHeight, secondary: bottomHeight } = columnMatrixHeight;\n\n    const centerHeight = measureSum(rowHeights.primary);\n    const centerWidth = measureSum(columnWidths.primary);\n    const viewWidth = [leftWidth, Math.min(centerWidth, maxColWidth), rightWidth];\n    const viewHeight = [topHeight, Math.min(centerHeight, maxRowHeight), bottomHeight];\n\n    return {\n        viewWidth,\n        viewHeight,\n        actualCenterMeasures: {\n            height: centerHeight,\n            width: centerWidth\n        },\n        totalMeasures: {\n            width: measureSum(viewWidth),\n            height: measureSum(viewHeight)\n        },\n        unitHeights: rowHeights,\n        unitWidths: columnWidths\n    };\n};\n","/**\n * This file declares a table that can be extended to create a Datagrid, crosstab\n * and man other visualzations that require a tabular structure.\n */\n\nimport { getUniqueId, mergeRecursive } from 'muze-utils';\nimport GenericLayout from '../generic-layout';\nimport { DEFAULT_CONFIGURATION, DEFAULT_MEASUREMENTS } from './defaults';\nimport { generateVisualMatrices } from './layout-helper';\nimport { computeLayoutMeasurements } from './computations';\nimport { getViewMeasurements, getViewMatrices } from './view-info-getter';\n/**\n * This class is used to create a tabular structure that\n * can house charts and values.\n *\n * @class GridLayout\n */\nexport default class GridLayout extends GenericLayout {\n\n    /**\n     * Creates an instance of TableLayout.\n     * @param {HTMLElement} matrices Set of upto 9 matrices containing the cells to be rendered\n     * @param {HTMLElement} mountPoint DOM element/d3 selection where the layout is to be mounted\n     * @param {Object} measurement The dimensions of the layout\n     * @param {Object} config external configurations.\n     * @memberof GenericLayout\n     */\n    constructor (matrices, mountPoint, measurement, config) {\n        super(mountPoint, measurement, config);\n        this.matrices(matrices);\n        this.config(this.constructor.defaultConfig());\n        this._layoutId = getUniqueId();\n        this._scrollInfo = { horizontal: false, vertical: false };\n    }\n\n    static defaultViewInfo () {\n        return Object.assign({}, {\n            layoutDimensions: {\n                border: this.defaultConfig().border,\n                viewHeight: [0, 0, 0],\n                viewWidth: [0, 0, 0]\n            },\n            viewMatricesInfo: {\n                columnPages: 0,\n                rowPages: 0,\n                matrices: { top: [], center: [], bottom: [] }\n            }\n        });\n    }\n\n    /**\n     * Returns initial set of measurements for the grid layout\n     *\n     * @static\n     * @return {Object} Returns initial set of measurements\n     * @memberof GridLayout\n     */\n    static defaultMeasurement () {\n        return DEFAULT_MEASUREMENTS;\n    }\n\n    /**\n     * Returns initialconfiguration for grid layout\n     *\n     * @static\n     * @return {Object} Returns initial configuration for grid layout\n     * @memberof GridLayout\n     */\n    static defaultConfig () {\n        return DEFAULT_CONFIGURATION;\n    }\n\n    /**\n     * This function is used to return an instance of GridLayout\n     *\n     * @return {GridLayout} Instance of grid layout.\n     * @static\n     * @memberof GridLayout\n     */\n    static create () {\n        return new GridLayout(null, null, this.defaultMeasurement(), this.defaultConfig());\n    }\n\n    /**\n     * Sets/Gets the matrices for the layout\n     *\n     * @param {Array} matrices Set of matrices\n     * @return {Object} Getter/Setter\n     * @memberof GridLayout\n     */\n    matrices (matrices) {\n        if (matrices) {\n            this._matrices = generateVisualMatrices(this, matrices);\n            return this;\n        }\n        return super.matrices(matrices);\n    }\n\n    /**\n     * Triggers the computations for the layout based on the matrices available\n     * This causes a reflow in the entire layout system.\n     *\n     * @return {Object} Layout instance\n     * @memberof GridLayout\n     */\n    triggerReflow () {\n        this.scrollInfo({ horizontal: false, vertical: false });\n        const {\n            maxHeightAvailableForRowMatrix,\n            maxWidthAvailableForColumnMatrix\n        } = computeLayoutMeasurements(this);\n\n        this.setViewInformation(maxHeightAvailableForRowMatrix, maxWidthAvailableForColumnMatrix);\n        return this;\n    }\n\n    gotoPage (type, pageNumber) {\n        const pageType = type.toLowerCase();\n        const { viewMatricesInfo } = this.viewInfo();\n        const totalPages = viewMatricesInfo[`${pageType}Pages`];\n        const pointer = Math.min(Math.max(1, pageNumber), totalPages);\n        this.config({\n            [`${pageType}Pointer`]: pointer - 1\n        });\n        this.setViewInformation();\n        this.renderGrid();\n        return this;\n    }\n\n    pages (type) {\n        const { viewMatricesInfo } = this.viewInfo();\n        const pageType = type.toLowerCase();\n        return {\n            totalPages: viewMatricesInfo[`${pageType}Pages`],\n            currentPage: this.config()[`${pageType}Pointer`] + 1\n        };\n    }\n\n    viewInfo (...viewInfo) {\n        if (viewInfo.length) {\n            this._viewInfo = viewInfo[0];\n            return this;\n        }\n        return this._viewInfo;\n    }\n\n    scrollInfo (...scrollInfo) {\n        if (scrollInfo.length) {\n            this._scrollInfo = mergeRecursive(this._scrollInfo, scrollInfo[0]);\n            return this;\n        }\n        return this._scrollInfo;\n    }\n\n    /**\n     *\n     *\n     * @returns\n     * @memberof GridLayout\n     */\n    setViewInformation (maxRowHeight, maxColWidth) {\n        const {\n            rowPointer,\n            columnPointer,\n            border\n        } = this.config();\n        const viewMatricesInfo = getViewMatrices(this, rowPointer, columnPointer);\n        const layoutDimensions = getViewMeasurements(this, maxRowHeight, maxColWidth);\n        layoutDimensions.border = border;\n        this.viewInfo({\n            viewMatricesInfo,\n            layoutDimensions\n        });\n        return this;\n    }\n}\n","import RowMatrix from '../visual-matrix/row-matrix';\nimport ColumnMatrix from '../visual-matrix/column-matrix';\n\nexport const generateVisualMatrices = (context, matrices) => {\n    // Set of matrices for layout is generated starting with the left matrix\n    let leftMatrix = [];\n    let rightMatrix = [];\n    let topMatrix = [];\n    let bottomMatrix = [];\n    let begColCells;\n    let endColCells;\n    const {\n        isRowSizeEqual,\n        isColumnSizeEqual,\n        gutterSpace,\n        distribution,\n        border,\n        breakPage,\n        priority\n    } = context.config();\n    const {\n        minUnitHeight,\n        minUnitWidth\n    } = context.measurement();\n    const { top, center, bottom } = matrices;\n    const [topLeft, topColumns, topRight] = top;\n    const [leftRows, valueMatrix, rightRows] = center;\n    const [bottomLeft, bottomColumns, bottomRight] = bottom;\n\n    if (leftRows.length > 0) {\n        // If no left matrix is present, context will be empty\n        leftMatrix = [...topLeft, ...leftRows, ...bottomLeft];\n    }\n    if (rightRows.length > 0) {\n        // If no right matrix is present, context will be empty\n        rightMatrix = [...topRight, ...rightRows, ...bottomRight];\n    }\n    if (topColumns.length > 0 && topColumns[0].length > 0) {\n        // If no top matrix is present, context will be empty\n        topMatrix = topColumns.map((d, i) => [...topLeft[i], ...d, ...topRight[i]]);\n    }\n    if (bottomColumns.length > 0 && bottomColumns[0].length > 0) {\n        // If no bottom matrix is present, context will be empty\n        bottomMatrix = bottomColumns.map((d, i) => [...bottomLeft[i], ...d, ...bottomRight[i]]);\n    }\n\n    context.rowMatrix(new RowMatrix([leftMatrix, rightMatrix], {\n        isDistributionEqual: isRowSizeEqual,\n        distribution: distribution.rows,\n        gutter: gutterSpace.rows,\n        unitMeasures: {\n            width: minUnitWidth,\n            height: minUnitHeight,\n            border: border.width\n        },\n        priority: priority.row,\n        breakPage: breakPage.rows.map(e => e + Math.max(topLeft.length, topRight.length)),\n        extraCellLengths: [topLeft.length, bottomLeft.length]\n    }));\n\n    if (topLeft.length > 0) {\n        begColCells = topLeft[0].length;\n    } else {\n        begColCells = bottomLeft.length > 0 ? bottomLeft[0].length : 0;\n    }\n\n    if (topRight.length > 0) {\n        endColCells = topRight[0].length;\n    } else {\n        endColCells = bottomRight.length > 0 ? bottomRight[0].length : 0;\n    }\n\n    context.columnMatrix(new ColumnMatrix([topMatrix, bottomMatrix], {\n        isDistributionEqual: isColumnSizeEqual,\n        distribution: distribution.columns,\n        gutter: gutterSpace.columns,\n        isTransposed: true,\n        unitMeasures: {\n            width: minUnitWidth,\n            height: minUnitHeight,\n            border: border.width\n        },\n        priority: priority.col,\n        breakPage: breakPage.columns,\n        extraCellLengths: [begColCells, endColCells]\n    }));\n    context.centerMatrix(valueMatrix);\n\n    return matrices;\n};\n","import {\n    TOP, BOTTOM, LEFT, RIGHT, CENTER, COLUMN, ROW,\n    VIEW_INDEX, ROW_MATRIX_INDEX, COLUMN_MATRIX_INDEX, MIDDLE, NO_BORDERS\n} from '../enums/constants';\n\nconst borderMap = (isFacet, showHeaders) => ({\n    [`${TOP}-${LEFT}`]: isFacet && showHeaders ? LEFT : NO_BORDERS,\n    [`${TOP}-${MIDDLE}`]: COLUMN,\n    [`${TOP}-${RIGHT}`]: isFacet && showHeaders ? RIGHT : NO_BORDERS,\n    [`${CENTER}-${LEFT}`]: isFacet ? `${CENTER}${LEFT}` : ROW,\n    [`${CENTER}-${MIDDLE}`]: CENTER,\n    [`${CENTER}-${RIGHT}`]: isFacet ? `${CENTER}${RIGHT}` : ROW,\n    [`${BOTTOM}-${LEFT}`]: NO_BORDERS,\n    [`${BOTTOM}-${MIDDLE}`]: COLUMN,\n    [`${BOTTOM}-${RIGHT}`]: NO_BORDERS\n});\n\nconst applySpecificBorder = (params) => {\n    const { type, borderWidth, borderStyle, cells, color } = params;\n    cells.style(`border-${type}`, `${borderWidth}px ${borderStyle} ${color}`);\n};\n\nconst specificBorderApplier = (params) => {\n    const { borderTypes, showBorders, cells, borderInfo, name, isFacet } = params;\n    const {\n        color,\n        style,\n        width\n    } = borderInfo;\n\n    borderTypes.forEach((borderType) => {\n        applySpecificBorder({\n            cells,\n            color: showBorders[borderType] ? color : 'transparent',\n            type: borderType,\n            borderWidth: width,\n            borderStyle: style,\n            name,\n            isFacet\n        });\n    });\n};\n\nconst borderApplier = (cells, borderInfo, name, isFacet) => {\n    const {\n        showRowBorders,\n        showColBorders,\n        showValueBorders\n    } = borderInfo;\n    return {\n        [ROW]: () => specificBorderApplier({\n            borderTypes: [TOP, BOTTOM],\n            showBorders: showRowBorders,\n            cells,\n            borderInfo,\n            name,\n            isFacet\n        }),\n        [COLUMN]: () => specificBorderApplier({\n            borderTypes: [LEFT, RIGHT],\n            showBorders: showColBorders,\n            cells,\n            borderInfo,\n            name,\n            isFacet\n        }),\n        [CENTER]: () => specificBorderApplier({\n            borderTypes: [LEFT, RIGHT, TOP, BOTTOM],\n            showBorders: showValueBorders,\n            cells,\n            borderInfo,\n            name,\n            isFacet\n        }),\n        [LEFT]: () => specificBorderApplier({\n            borderTypes: [LEFT],\n            showBorders: showRowBorders,\n            cells,\n            borderInfo,\n            name,\n            isFacet\n        }),\n        [RIGHT]: () => specificBorderApplier({\n            borderTypes: [RIGHT],\n            showBorders: showRowBorders,\n            cells,\n            borderInfo,\n            name,\n            isFacet\n        }),\n        [`${CENTER}${LEFT}`]: () => specificBorderApplier({\n            borderTypes: [LEFT, TOP, BOTTOM],\n            showBorders: showRowBorders,\n            cells,\n            borderInfo,\n            name,\n            isFacet\n        }),\n        [`${CENTER}${RIGHT}`]: () => specificBorderApplier({\n            borderTypes: [RIGHT, TOP, BOTTOM],\n            showBorders: showRowBorders,\n            cells,\n            borderInfo,\n            name,\n            isFacet\n        })\n    };\n};\n\nexport const applyBorders = (params) => {\n    const { cells, border, row, column, isFacet, showHeaders } = params;\n    const name = `${ROW_MATRIX_INDEX[VIEW_INDEX[row]]}-${COLUMN_MATRIX_INDEX[column]}`;\n    const borderApplierFn = borderApplier(cells, border, name, isFacet);\n    const borderMapVal = borderMap(isFacet, showHeaders)[name];\n    if (borderMapVal) {\n        borderApplierFn[borderMapVal]();\n    }\n};\n","import { selectElement } from 'muze-utils';\nimport {\n     TOP, BOTTOM, ROW_SPAN, COL_SPAN, CENTER, ROW, COLUMN\n} from '../enums/constants';\n\nconst orderMaker = arr => Array.from(Array(arr.length).keys());\n\nconst nestByStack = (stack, updateArr, optionalParams = {}) => {\n    let {\n        order,\n        keyFn\n    } = optionalParams;\n    const arr = updateArr.slice();\n    const currStack = stack.slice();\n    const prevStack = currStack.slice();\n    // Order in which element are to be checked for nesting, default normal looping\n    // Order is always in the order of nest, i.e., left to right\n    order = order || Array.from(Array(arr.length).keys());\n\n    // Key function, if array of objects\n    keyFn = keyFn || (v => v);\n\n    // Return same array if stack is empty\n    if (currStack.length === 0) {\n        const newArr = [];\n        order.forEach((e) => {\n            newArr.push(arr[e]);\n        });\n        return { prevStack, currStack: arr, arr: newArr };\n    }\n\n    let arrVal = '';\n    let stackVal = '';\n    const newArr = [];\n\n    // Loop in order\n    for (let i = order.length - 1; i >= 0; i--) {\n        // Get current element index from the order given\n        const currElemIndex = order[i];\n\n        // Crete a hashmap for the hierarchy by joining strings of the array for both stack and input array\n        arrVal += keyFn(arr[currElemIndex]);\n        stackVal += keyFn(currStack[currElemIndex]);\n\n        // If the current value and value in stack is same, convert it to null\n        if (arrVal === stackVal) {\n            newArr[currElemIndex] = null;\n        } else {\n            stackVal = '';\n            // Loop from the current index in order to the last element in order to change the\n            // whole hierarchy\n            for (let j = i; j < order.length; j++) {\n                const newElem = order[j];\n                const arrElem = arr[newElem];\n\n                newArr[newElem] = arrElem;\n\n                // Reset stack to new stack\n                currStack[newElem] = arrElem;\n                stackVal = arrVal;\n            }\n        }\n    }\n    const returnArr = [];\n    order.forEach((e) => {\n        returnArr.push(newArr[e]);\n    });\n    return { prevStack, currStack, arr: returnArr };\n};\n\nconst spanCalculator = (colData, colIdx, matrix, rIdx) => {\n    // if data is not header cell then rowspan\n    // has to be 1\n    if (!colData) {\n        return () => null;\n    }\n\n    const conditions = {\n        row: count => matrix[rIdx + count] && matrix[rIdx + count][colIdx],\n        column: count => matrix[rIdx][colIdx + count]\n    };\n\n    return (type) => {\n        let count = 1;\n        let isNull = false;\n\n        while (!isNull) {\n            if (conditions[type](count) === null) {\n                count += 1;\n            } else {\n                isNull = true;\n            }\n        }\n        return count;\n    };\n};\n\nconst maskCreator = (matrix, order) => ({\n    row: () => {\n        let stack = [];\n        return matrix.map((e) => {\n            const {\n                    currStack,\n                    arr\n                } = nestByStack(stack, e, { keyFn: val => val.valueOf(), order });\n\n            stack = currStack;\n            return arr;\n        });\n    },\n    column: () => {\n        let stack = [];\n        const viewMatrix = [];\n        matrix.length && matrix[0].forEach((cell, colIndex) => {\n            const hierarchy = [];\n            matrix.forEach((row) => {\n                hierarchy.push(row[colIndex]);\n            });\n            const {\n                    currStack,\n                    arr\n                } = nestByStack(stack, hierarchy, { keyFn: val => val.valueOf(), order });\n            stack = currStack;\n\n            matrix.forEach((row, rowIndex) => {\n                viewMatrix[rowIndex] = viewMatrix[rowIndex] || [];\n                viewMatrix[rowIndex][colIndex] = arr[rowIndex];\n            });\n        });\n        return viewMatrix;\n    }\n});\n\nconst spanGenerator = viewMatrix => ({\n    row: () => {\n        const spans = [];\n        viewMatrix.forEach((row, ridx) => {\n            spans[ridx] = spans[ridx] || [];\n            row.forEach((col, i) => {\n                if (viewMatrix[ridx][i]) {\n                    const currSpan = spanCalculator(col, i, viewMatrix, ridx)('row');\n                    currSpan && spans[ridx].push(currSpan);\n                }\n            });\n        });\n        return spans;\n    },\n    column: () => viewMatrix.map((row, ridx) => row.map((col, i) => spanCalculator(col, i, viewMatrix, ridx)('column'))\n                    .filter(col => col !== null))\n});\n\nconst getOrder = () => ({\n    row: matrix => orderMaker(matrix[0]),\n    column: matrix => orderMaker(matrix)\n});\n\nconst matrixSpanGeneratorMap = {\n    [`${TOP}-1`]: {\n        orderGetter: getOrder()[COLUMN],\n        viewMatrixMaker: (...params) => maskCreator(...params)[COLUMN],\n        spanMaker: (...params) => spanGenerator(...params)[COLUMN]\n    },\n    [`${BOTTOM}-1`]: {\n        orderGetter: getOrder()[COLUMN],\n        viewMatrixMaker: (...params) => maskCreator(...params)[COLUMN],\n        spanMaker: (...params) => spanGenerator(...params)[COLUMN]\n    },\n    [`${CENTER}-0`]: {\n        orderGetter: getOrder()[ROW],\n        viewMatrixMaker: (...params) => maskCreator(...params)[ROW],\n        spanMaker: (...params) => spanGenerator(...params)[ROW]\n    },\n    [`${CENTER}-2`]: {\n        orderGetter: getOrder()[ROW],\n        viewMatrixMaker: (...params) => maskCreator(...params)[ROW],\n        spanMaker: (...params) => spanGenerator(...params)[ROW]\n    }\n};\n\nconst matrixSpanGenerator = (type) => {\n    const generator = matrixSpanGeneratorMap[type];\n    if (generator) {\n        return generator;\n    }\n    return {\n        orderGetter: () => null,\n        viewMatrixMaker: matrix => () => matrix,\n        spanMaker: () => () => null\n    };\n};\n\n/**\n * This function is used to set the col and row spans\n * for the matrices based on repeated/hierarchichal data\n *\n * @export\n * @param {Array} matrix The 2d array for which filtering is to be done\n * @param {string} type Type of array (center, top, bottom)\n * @param {number} index Index of array in the row\n * @return {Object} containing the view matrix and their spans\n */\nexport function cellSpanMaker (matrix, type, index) {\n    let spans = null;\n    let viewMatrix = matrix;\n    const {\n        orderGetter,\n        viewMatrixMaker,\n        spanMaker\n    } = matrixSpanGenerator(`${type}-${index}`);\n\n    if (matrix.length) {\n        const order = orderGetter(matrix);\n        viewMatrix = viewMatrixMaker(matrix, order)();\n        spans = spanMaker(viewMatrix)();\n    }\n    return { viewMatrix, spans };\n}\n\nconst spaceAllocationDueToSpan = (span = 1, placeholder, config, index) => {\n    const height = placeholder.availHeight();\n    const width = placeholder.availWidth();\n    const borderWidth = config.border.width;\n    const { unitWidths } = config.dimensions;\n    const { col } = index;\n\n    return {\n        [ROW_SPAN] () {\n            placeholder.setAvailableSpace(width, height * span);\n            if (span === 1) {\n                selectElement(this).style('height', `${height * span + borderWidth}px`);\n            }\n        },\n        [COL_SPAN] () {\n            const primaryUnitWidth = unitWidths.primary[col];\n            if (span > 1) {\n                let cumulativeWidth = 0;\n                for (let i = col; i < col + span; i++) {\n                    cumulativeWidth += unitWidths.primary[i] - borderWidth;\n                }\n                placeholder.setAvailableSpace(cumulativeWidth + borderWidth, height);\n            } else if (primaryUnitWidth) {\n                placeholder.setAvailableSpace(primaryUnitWidth - borderWidth, height);\n            }\n            selectElement(this).style('height', `${height}px`);\n        }\n    };\n};\n\nconst spanApplier = (cells, spans, config, type) => {\n    let cellCounter = 0;\n    cells.attr(type, function (cell, colIndex) {\n        if (colIndex === 0) {\n            cellCounter = 0;\n        }\n        const span = spans[cell.rowIndex][colIndex];\n        const placeholder = cell.placeholder;\n        const index = {\n            row: cell.rowIndex,\n            col: cellCounter\n        };\n\n        spaceAllocationDueToSpan(span, placeholder, config, index)[type].bind(this)();\n        cellCounter += span;\n        return span;\n    });\n};\n\nconst spanApplierMap = {\n    [`${TOP}-0`]: null,\n    [`${TOP}-1`]: (...params) => spanApplier(...params, COL_SPAN),\n    [`${TOP}-2`]: null,\n    [`${CENTER}-0`]: (...params) => spanApplier(...params, ROW_SPAN),\n    [`${CENTER}-1`]: null,\n    [`${CENTER}-2`]: (...params) => spanApplier(...params, ROW_SPAN),\n    [`${BOTTOM}-0`]: null,\n    [`${BOTTOM}-1`]: (...params) => spanApplier(...params, COL_SPAN),\n    [`${BOTTOM}-2`]: null\n};\n\nexport const applySpans = (cells, spans, config, type) => {\n    const applier = spanApplierMap[type];\n    if (applier) {\n        applier(cells, spans, config);\n    }\n};\n","import { ERROR_MSG } from 'muze-utils';\n/**\n * An Interface to be implemented if the transaction support is necessary. This class ensures reactivity to\n * global properties.\n */\nexport default class TransactionSupport {\n    /**\n     * Property accessor for data member of the class. Data is passed to the system by calling this method.\n     */\n    data () {\n        throw new Error(ERROR_MSG.INTERFACE_IMPl);\n    }\n\n    /**\n     * Property accessor for width of the class. Width is passed as an integer.\n     */\n    width () {\n        throw new Error(ERROR_MSG.INTERFACE_IMPl);\n    }\n\n    /**\n     * Property accessor for height of the class. Height is passed as an integer.\n     */\n    height () {\n        throw new Error(ERROR_MSG.INTERFACE_IMPl);\n    }\n\n    /**\n     * Property accessor for config of the class. Config is passed as an object.\n     */\n    config () {\n        throw new Error(ERROR_MSG.INTERFACE_IMPl);\n    }\n}\n","import { TOP, BOTTOM, LEFT, TITLE, SUB_TITLE, GROUP, LAYOUT, LEGEND } from '../constants';\n\n/**\n *\n *\n * @param {*} context\n *\n */\nexport const arrangeComponents = (context) => {\n    const legendConfig = context.config().legend;\n    const titleConfig = context.title()[1];\n    const subtitleConfig = context.subtitle()[1];\n    const titleLayouts = {\n        [`${TOP}-${TOP}`]: [TITLE, SUB_TITLE, GROUP],\n        [`${BOTTOM}-${BOTTOM}`]: [GROUP, SUB_TITLE, TITLE],\n        [`${TOP}-${BOTTOM}`]: [TITLE, GROUP, SUB_TITLE],\n        [`${BOTTOM}-${TOP}`]: [SUB_TITLE, GROUP, TITLE]\n    };\n    const legendLayouts = [\n        [LEGEND, LAYOUT],\n        [LAYOUT, LEGEND]\n    ];\n    const titlePosition = titleConfig.position || TOP;\n    const subtitlePosition = subtitleConfig.position || TOP;\n\n    return {\n        headers: titleLayouts[`${titlePosition}-${subtitlePosition}`],\n        legends: legendConfig.position === LEFT || legendConfig.position === TOP ?\n        legendLayouts[0] : legendLayouts[1]\n    };\n};\n","/**\n * Flag to specify whether direction is vertical.\n */\nexport const MARGIN = 'margin';\nexport const LEFT = 'left';\nexport const RIGHT = 'right';\nexport const BOTTOM = 'bottom';\nexport const TOP = 'top';\nexport const SPACE_FIXER = 'spaceFixer';\nexport const CLASSPREFIX = 'muze';\nexport const VERTICAL_ALIGN = 'verticalAlign';\nexport const TEXT_ALIGN = 'textAlign';\nexport const IS_OFFSET = 'isOffset';\nexport const MIDDLE = 'middle';\nexport const BASELINE = 'baseline';\nexport const SHOW = 'show';\nexport const CENTER = 'center';\nexport const TEXT = 'text';\nexport const HEADER = 'header';\nexport const HEIGHT = 'height';\nexport const WIDTH = 'width';\nexport const DATA = 'data';\nexport const AXES = 'axes';\nexport const FACET_BY_FIELDS = 'facetByFields';\nexport const FIELDS = 'fields';\nexport const TRANSFORM = 'transform';\nexport const LAYER_DEF = 'layerDef';\nexport const CONFIG = 'config';\nexport const DETAIL_FIELDS = 'detailFields';\nexport const MAX_LINES = 'maxLines';\nexport const MIN_CHARS = 'minCharacters';\nexport const ROTATION = 'rotation';\n\nexport const TEXT_CELL = 'text-cell';\nexport const AXIS_CELL = 'axis-cell';\nexport const GEOM_CELL = 'geom-cell';\nexport const BLANK_CELL = 'blank-cell';\n\nexport const PADDING = 'padding';\nexport const HEADER_PADDING = 'headerPadding';\nexport const TITLE_PADDING = 'titlePadding';\n\nexport const TITLE = 'title';\nexport const SUBTITLE = 'subtitle';\n","// eneum to refer to simple cell\nexport const SIMPLE = 'simple';\n// eneum to refer to header cell\nexport const TEXT = 'text';\n// enum to refer to axis cell\nexport const AXIS = 'axis';\n// enum to refer to visual cell\nexport const GEOM = 'geom';\n// enum to refer blank cell\nexport const BLANK = 'blank';\n","import {\n    ERROR_MSG,\n    getUniqueId,\n    mergeRecursive\n} from 'muze-utils';\nimport { SIMPLE } from './enums/cell-type';\nimport { SIMPLE_CELL } from './constants';\n\n/**\n * This file declares a class that is used as an interface to create new\n * SimpleCell elements.\n * @module SimpleCell\n */\n/**\n * Base class for all table cells.\n *\n * @interface\n * @class SimpleCell\n */\nclass SimpleCell {\n\n    /**\n     * Creates an instance of SimpleCell.\n     *\n     * @param {*} config The input configuration.\n     * @memberof SimpleCell\n     */\n    constructor (config) {\n        this._id = getUniqueId();\n\n        const defConfig = mergeRecursive({}, this.constructor.defaultConfig());\n        this._config = mergeRecursive(defConfig, config || {});\n\n        this._mount = null;\n    }\n\n    /**\n     * Returns the type of the placehlder.\n     *\n     * @readonly\n     * @memberof SimpleCell\n     */\n    get type () {\n        return SIMPLE;\n    }\n\n    static formalName () {\n        return SIMPLE_CELL;\n    }\n\n    /**\n     * Returns the type of the placehlder.\n     *\n     * @readonly\n     * @memberof SimpleCell\n     * @return {Object} Default config for the placeholder\n     */\n    static defaultConfig () {\n        return {};\n    }\n\n    /**\n     * Returns the value contained by the SimpleCell.\n     *\n     * @memberof SimpleCell\n     */\n    valueOf () {\n        throw new Error(ERROR_MSG.INTERFACE_IMPL);\n    }\n\n    /**\n     * Returns a unique identifier for the instance used\n     * to control selective rendering.\n     *\n     * @memberof SimpleCell\n     */\n    id () {\n        throw new Error(ERROR_MSG.INTERFACE_IMPL);\n    }\n\n    /**\n     * Returns a serialized representation of the instance.\n     *\n     * @memberof SimpleCell\n     */\n    serialize () {\n        throw new Error(ERROR_MSG.INTERFACE_IMPL);\n    }\n\n    /**\n     * Returns an object with width and height fields\n     * specifying the space taken up by this metod.\n     *\n     * @memberof SimpleCell\n     */\n    getLogicalSpace () {\n        throw new Error(ERROR_MSG.INTERFACE_IMPL);\n    }\n\n    /**\n     * Method used to set the space available to render the SimpleCell\n     *\n     * @param {number} width The available width.\n     * @param {number} height The available height.\n     * @memberof SimpleCell\n     */\n    setAvailableSpace () {\n        throw new Error(ERROR_MSG.INTERFACE_IMPL);\n    }\n\n    /**\n     * Render the SimpleCell inthe supplied mount point.\n     *\n     * @param {HTMLElement} mount The mount point to render in.\n     * @memberof SimpleCell\n     */\n    render () {\n        throw new Error(ERROR_MSG.INTERFACE_IMPL);\n    }\n\n    /**\n     * Render the SimpleCell inthe supplied mount point.\n     *\n     * @param {HTMLElement} mount The mount point to render in.\n     * @memberof SimpleCell\n     */\n    remove () {\n        throw new Error(ERROR_MSG.INTERFACE_IMPL);\n    }\n\n    getMinMeasures (providedMinMeasure = 0) {\n        return providedMinMeasure;\n    }\n\n}\n\nexport default SimpleCell;\n","export const SIMPLE_CELL = 'SimpleCell';\nexport const TEXT_CELL = 'TextCell';\nexport const AXIS_CELL = 'AxisCell';\nexport const BLANK_CELL = 'BlankCell';\nexport const GEOM_CELL = 'GeomCell';\n\n","/**\n * This file exports variables that are used as defaults for\n * the placeholders\n */\nimport * as CONSTANTS from './constants';\n\n /**\n * Default Configuration for the cells\n * @return {Object} Default configuration\n */\nexport const DEFAULT_CONFIG = {\n    [CONSTANTS.MARGIN]: {\n        [CONSTANTS.LEFT]: 0,\n        [CONSTANTS.RIGHT]: 0,\n        [CONSTANTS.TOP]: 0,\n        [CONSTANTS.BOTTOM]: 0\n    },\n    [CONSTANTS.SPACE_FIXER]: 2,\n    [CONSTANTS.IS_OFFSET]: false,\n    [CONSTANTS.VERTICAL_ALIGN]: null,\n    [CONSTANTS.TEXT_ALIGN]: CONSTANTS.CENTER,\n    [CONSTANTS.SHOW]: true,\n    [CONSTANTS.MAX_LINES]: 0,\n    [CONSTANTS.MIN_CHARS]: 0,\n    [CONSTANTS.ROTATION]: null,\n    [CONSTANTS.PADDING]: {\n        [CONSTANTS.LEFT]: 8,\n        [CONSTANTS.RIGHT]: 8,\n        [CONSTANTS.TOP]: 10,\n        [CONSTANTS.BOTTOM]: 0\n    },\n    [CONSTANTS.HEADER_PADDING]: {\n        [CONSTANTS.LEFT]: 8,\n        [CONSTANTS.RIGHT]: 5,\n        [CONSTANTS.TOP]: 2,\n        [CONSTANTS.BOTTOM]: 5\n    },\n    [CONSTANTS.TITLE_PADDING]: {\n        [CONSTANTS.LEFT]: 0,\n        [CONSTANTS.RIGHT]: 0,\n        [CONSTANTS.TOP]: 0,\n        [CONSTANTS.BOTTOM]: 0\n    }\n};\n","import { mergeRecursive } from 'muze-utils';\nimport { GEOM, TEXT, AXIS, BLANK } from './enums/cell-type';\n\nconst DEFAULT_PROPS = {\n    mount: {},\n    availHeight: {},\n    availWidth: {},\n    config: {\n        sanitization: (context, value) => mergeRecursive(context._config, value)\n    },\n    logicalSpace: {},\n    minSpacing: {},\n    source: {}\n};\n\nconst geomProps = {\n    data: {},\n    caption: {},\n    config: {},\n    axes: {},\n    facetByFields: {},\n    fields: {},\n    transform: {},\n    layerDef: {},\n    detailFields: {}\n};\n\nconst textProps = {\n    smartText: {}\n};\nexport const PROPS = {\n    [GEOM]: mergeRecursive(geomProps, DEFAULT_PROPS),\n    [TEXT]: mergeRecursive(textProps, DEFAULT_PROPS),\n    [AXIS]: DEFAULT_PROPS,\n    [BLANK]: DEFAULT_PROPS\n};\n","/**\n * This file declares a class that represents a table cell\n * used to house an axis.\n * @module VisualCell\n */\nimport { selectElement, makeElement, generateGetterSetters } from 'muze-utils';\nimport { CLASSPREFIX, HEIGHT, WIDTH, AXIS_CELL, BOTTOM, TOP } from './enums/constants';\nimport SimpleCell from './simple-cell';\nimport { DEFAULT_CONFIG } from './enums/defaults';\nimport { AXIS } from './enums/cell-type';\nimport { PROPS } from './props';\nimport * as CONSTANTS from './constants';\n\n/**\n * Computes the logical space of the an axis instance within an axis cell\n *\n * @param {Object} context Required to get the needed parameters to compute axis space\n * @return {Object} Returns the logical space for axis\n */\nconst computeAxisSpace = (context) => {\n    let logicalWidth;\n    let logicalHeight;\n    const axis = context.source();\n    const {\n        spaceFixer,\n        margin\n    } = context.config();\n    const {\n        width,\n        height\n    } = axis.getLogicalSpace();\n    const {\n            show\n        } = axis.config();\n    if (show === true) {\n        logicalHeight = Math.floor(height + margin.top + margin.bottom + spaceFixer);\n        logicalWidth = Math.floor(width + margin.left + margin.right + spaceFixer);\n    } else {\n        [logicalWidth, logicalHeight] = [width, height];\n    }\n    return {\n        width: logicalWidth,\n        height: logicalHeight\n    };\n};\n\n/**\n * Represents an axis cell.\n *\n * @class Axis\n */\nclass AxisCell extends SimpleCell {\n\n    /**\n     * Creates an instance of AxisCell.\n     *\n     * @param {Object} config The input config.\n     * @memberof AxisCell\n     */\n    constructor (config) {\n        super(config);\n\n        this._axis = null;\n        this._availHeight = null;\n        this._availWidth = null;\n        this._logicalSpace = null;\n\n        generateGetterSetters(this, PROPS[AXIS]);\n    }\n\n    /**\n     * return the type pf SimpleCell cell.\n     *\n     * @readonly\n     * @memberof AxisCell\n     */\n    get type () {\n        return AXIS;\n    }\n\n    /**\n     * This method return the value conatined by this SimpleCell.\n     *\n     * @return {SimpleAxis | ColorAxis} Instance of SimpleAxis or ColorAxis.\n     * @memberof AxisCell\n     */\n    valueOf () {\n        return this.source().id;\n    }\n\n    /**\n     * This method return the unique identififer of the axis\n     *\n     * @return {string} Id of the axis.\n     * @memberof AxisCell\n     */\n    get id () {\n        return this._id;\n    }\n\n    static formalName () {\n        return CONSTANTS.AXIS_CELL;\n    }\n\n    /**\n     * Retrns the serialized representation of this cell.\n     *\n     * @return {Object}Object with serializable props.\n     * @memberof AxisCell\n     */\n    serialize () {\n        return {\n            type: AXIS,\n            axis: this.source().serialize()\n        };\n    }\n\n    /**\n     * return the default configuration for the text cell\n     *\n     * @static\n     * @return {Object} Default configuration of the cell\n     * @memberof AxisCell\n     */\n    static defaultConfig () {\n        return DEFAULT_CONFIG;\n    }\n\n    /**\n     * return the space taken up by an axis element in the dom.\n     *\n     * @return {Object} Object with width and height fields.\n     * @memberof AxisCell\n     */\n    getLogicalSpace () {\n        if (!this.logicalSpace()) {\n            this.logicalSpace(computeAxisSpace(this));\n        }\n        return this.logicalSpace();\n    }\n\n    /**\n     * This method is used to set the space availiable to render\n     * the SimpleCell.\n     *\n     * @param {number} width The width of SimpleCell.\n     * @param {number} height The height of SimpleCell.\n     * @return {Instance} Returns current Instance\n     * @memberof AxisCell\n     */\n    setAvailableSpace (width, height) {\n        this.availWidth(width);\n        this.availHeight(height);\n        const {\n            margin,\n            isOffset\n        } = this.config();\n\n        if (width || height) {\n            this.source().setAvailableSpace(width, height, margin, isOffset);\n            this.source().logicalSpace(null);\n        } else {\n            this.source().resetLogicalSpace();\n        }\n        this.logicalSpace(null);\n        return this;\n    }\n\n    /**\n     * This method is used to render the axis inside the axis cell.\n     *\n     * @param {HTMLElement} mount The mount point.\n     * @return {Selection} node where axis mounted\n     * @memberof AxisCell\n     */\n    /* istanbul ignore next */render (mount) {\n        if (!mount) {\n            return this;\n        }\n        let actualWidth = 0;\n        let actualHeight = 0;\n        const axis = this.source();\n        const availHeight = this.availHeight();\n        const availWidth = this.availWidth();\n        const {\n            margin\n        } = this.config();\n        const {\n            top,\n            bottom,\n            left,\n            right\n        } = margin;\n        const {\n            show,\n            orientation\n        } = axis.config();\n        const wrapperDiv = makeElement(selectElement(mount), 'div', [this], `${CLASSPREFIX}-${AXIS_CELL}`);\n        const selection = makeElement(wrapperDiv, 'svg', [1], `${CLASSPREFIX}-axis-container`);\n        selection.classed(`${CLASSPREFIX}-axis-container-${orientation}`, true);\n\n        this.mount(mount);\n        if (!availWidth) {\n            selection.attr(WIDTH, `${0}px`);\n        }\n        if (!availHeight) {\n            selection.attr(HEIGHT, `${0}px`);\n        }\n        actualWidth = availWidth;\n        actualHeight = availHeight;\n        if (!show) {\n            actualWidth = (orientation === TOP || orientation === BOTTOM) ? availWidth : 0;\n            actualHeight = (orientation === TOP || orientation === BOTTOM) ? 0 : availHeight;\n        }\n        wrapperDiv.style(WIDTH, `${actualWidth}px`)\n                        .style(HEIGHT, `${actualHeight}px`)\n                        .style('margin-top', top)\n                        .style('margin-bottom', bottom)\n                        .style('margin-left', left)\n                        .style('margin-right', right);\n\n        axis.mount(selection.node());\n        return selection;\n    }\n\n    /**\n     * Disposes the cell\n     *\n     * @return {Instance} Current instance of AxisCell\n     * @memberof AxisCell\n     */\n    remove () {\n        this.source() && this.source().remove();\n        this.mount() && this.mount().remove();\n        return this;\n    }\n}\n\nexport default AxisCell;\n\n","/**\n * This file declares a class that represents a BLANK element in a  table.\n * @module VisualCell\n */\nimport {\n    selectElement,\n    makeElement,\n    applyStyle,\n    generateGetterSetters\n    } from 'muze-utils';\nimport SimpleCell from './simple-cell';\nimport { CLASSPREFIX, BLANK_CELL } from './enums/constants';\nimport { BLANK } from './enums/cell-type';\nimport { DEFAULT_CONFIG } from './enums/defaults';\nimport { PROPS } from './props';\nimport * as CONSTANTS from './constants';\n\n/**\n * Represents a table haeder.\n *\n * @class BLANK\n */\nclass BlankCell extends SimpleCell {\n\n    /**\n     * Creates an instance of BLANK.\n     * @param {Object} config The input configuration.\n     * @memberof BLANK\n     */\n    constructor (config) {\n        super(config);\n\n        generateGetterSetters(this, PROPS[BLANK]);\n    }\n\n    /**\n     * return the type pf SimpleCell cell.\n     *\n     * @readonly\n     * @memberof BlankCell\n     */\n    get type () {\n        return BLANK;\n    }\n\n    /**\n     * This method return the value contained by this SimpleCell.\n     *\n     * @return {string} The text value contained by this cell.\n     * @memberof BlankCell\n     */\n    valueOf () {\n        return this.id;\n    }\n\n    /**\n     * return the default configuration for the text cell\n     *\n     * @static\n     * @return {Object} Default configuration of the cell\n     * @memberof BlankCell\n     */\n    static defaultConfig () {\n        return DEFAULT_CONFIG;\n    }\n\n    /**\n     * This method is used to return a unique identifier for\n     * the BLANK cell.\n     *\n     * @return {string} The unique identifier for the BLANK.\n     * @memberof BlankCell\n     */\n    get id () {\n        return this._id;\n    }\n\n    static formalName () {\n        return CONSTANTS.BLANK_CELL;\n    }\n\n    /**\n     * This method is used to obtain a serialized representation of this instance.\n     *\n     * @return {Object} Object with serilizable props.\n     * @memberof BLANK\n     */\n    serialize () {\n        return {\n            type: BLANK\n        };\n    }\n\n    /**\n     * This method return the space taken up\n     * by the text with the style applied.\n     *\n     * @return {Object} width and height taken up by the text.\n     * @memberof BLANK\n     */\n    getLogicalSpace () {\n        if (!this.logicalSpace()) {\n            return {\n                width: this.width || 0,\n                height: this.height || 0\n            };\n        }\n        return this.logicalSpace();\n    }\n\n    /**\n     * This method is used to set the available space.\n     *\n     * @param {number} width The available width.\n     * @param {number} height The available height.\n     * @return {Instance} Returns current Instance\n     * @memberof BlankCell\n     */\n    setAvailableSpace (width, height) {\n        this.availWidth(width);\n        this.availHeight(height);\n        this.logicalSpace(null);\n        return this;\n    }\n\n    /**\n     * This method is used to render the BLANK cell inside\n     * the provided mount point.\n     *\n     * @param {HTMLElement} mount The mount point for this cell.\n     * @return {Instance} Returns current Instance\n     * @memberof BLANK\n     */\n    /* istanbul ignore next */render (mount) {\n        if (mount) {\n            const { style } = this.config();\n            // append span element to mount point\n            this.mount(mount);\n            const container = selectElement(mount);\n            const elem = makeElement(container, 'div', [this.id]);\n            elem.classed(`${CLASSPREFIX}-${BLANK_CELL}`, true);\n            elem.style('width', `${this.availWidth()}px`);\n            elem.style('height', `${this.availHeight()}px`);\n            elem.html('');\n            // apply style on the returned element\n            if (style) {\n                applyStyle(elem, style);\n            }\n        } return this;\n    }\n\n    /**\n     * Removes the cell(Disposal)\n     *\n     * @return {Instance} Returns current Instance\n     * @memberof BlankCell\n     */\n    remove () {\n        this.mount() && this.mount().remove();\n        return this;\n    }\n\n    getMinMeasures () {\n        return 0;\n    }\n }\nexport default BlankCell;\n","import {\n    TOP,\n    BOTTOM,\n    LEFT,\n    RIGHT,\n    HEADER,\n    TITLE,\n    SUBTITLE\n} from './enums/constants';\n\nexport const setSmartText = (context) => {\n    const source = context.source();\n    const {\n        height: minHeightSpace,\n        width: minWidthSpace\n    } = context.minSpacing();\n    const {\n       margin,\n       rotation\n   } = context.config();\n    const {\n        left,\n        right,\n        top,\n        bottom\n     } = margin;\n    const paddedHeight = top + bottom + minHeightSpace;\n    const paddedWidth = left + right + minWidthSpace;\n    const availHeight = context.availHeight() - paddedHeight;\n    const availWidth = context.availWidth() - paddedWidth;\n    const labelManager = context.dependencies().labelManager;\n\n    labelManager.setStyle(context._computedStyle);\n\n    !rotation && context.smartText(labelManager.getSmartText(source, availWidth, availHeight, false));\n    rotation && context.smartText(labelManager.getSmartText(source, availHeight, availWidth, true));\n\n    return context;\n};\n\nexport const isTitleSubtitle = (subType) => {\n    let returnVal = false;\n    if (subType === `${TITLE}` || subType === `${SUBTITLE}`) {\n        returnVal = true;\n    }\n    return returnVal;\n};\n\n/**\n* Computes the Logical Space for the text\n*\n* @param {Object} context Required to get the needed parameters to compute text space\n* @return {Object} Logical space taken up by text\n* @memberof TextCell\n*/\nexport const computeTextSpace = (context) => {\n    const { labelManager } = context.dependencies();\n    const {\n        height: minHeightSpace,\n        width: minWidthSpace\n    } = context.minSpacing();\n    const {\n       margin,\n       show,\n       maxLines,\n       minCharacters\n   } = context.config();\n    const {\n       left,\n       right,\n       top,\n       bottom\n    } = margin;\n    const paddedHeight = top + bottom + minHeightSpace;\n    const paddedWidth = left + right + minWidthSpace;\n    const availHeight = context.availHeight() - paddedHeight;\n    const availWidth = context.availWidth() - paddedWidth;\n    const source = context.source();\n    const space = context.smartText();\n    const minText = new Array(minCharacters).fill('W').join('');\n    const _minTextSpace = labelManager.getOriSize(minText);\n\n    context.config({ rotation: false });\n    if (space.width > (availWidth || 0) && maxLines) {\n        space.height = space.oriTextHeight * maxLines;\n    }\n    if (availWidth && availWidth < space.width) {\n        space.width = _minTextSpace.width;\n    }\n    if (availWidth && availWidth < Math.min(_minTextSpace.width, space.oriTextWidth)) {\n        const smartSpace = labelManager.getSmartText(source, availHeight, _minTextSpace.height, true);\n        const { height: smHeight, width: smWidth } = smartSpace;\n        space.width = smWidth;\n        space.height = smHeight;\n        context.config({ rotation: true });\n        context.smartText(smartSpace);\n    }\n\n    const { subType, headerPadding } = context.config();\n    if (!isTitleSubtitle(subType)) {\n        space.width += headerPadding[LEFT] + headerPadding[RIGHT];\n    }\n\n    if (show) {\n        return {\n            width: Math.ceil(space.width) + paddedWidth,\n            height: Math.ceil(space.height) + paddedHeight\n        };\n    } return {\n        width: 0,\n        height: 0\n    };\n};\n\nexport const setPadding = (measures) => {\n    const { elem, className, headerPadding, padding, type, titlePadding } = measures;\n    let localPadding;\n    if (isTitleSubtitle(className)) {\n        localPadding = titlePadding;\n    } else if (type === HEADER) {\n        localPadding = headerPadding;\n    } else {\n        localPadding = padding;\n    }\n    [TOP, BOTTOM, LEFT, RIGHT].forEach((position) => {\n        elem.style(`padding-${position}`, `${localPadding[position]}px`);\n    });\n    return elem;\n};\n","/**\n * This file declares a class that represents a Text element in a  table.\n * @module VisualCell\n */\n\nimport {\n    selectElement,\n    makeElement,\n    getSmartComputedStyle,\n    generateGetterSetters\n} from 'muze-utils';\nimport SimpleCell from './simple-cell';\nimport { TEXT } from './enums/cell-type';\nimport { PROPS } from './props';\nimport { DEFAULT_CONFIG } from './enums/defaults';\nimport { CLASSPREFIX, TOP, BOTTOM, LEFT, RIGHT, HEADER, WIDTH, TEXT_CELL } from './enums/constants';\nimport './text-cell.scss';\nimport * as CONSTANTS from './constants';\nimport {\n    setSmartText,\n    computeTextSpace,\n    setPadding\n} from './text-cell-helper';\n\n/**\n * Represents a table haeder.\n *\n * @class Text\n */\nclass TextCell extends SimpleCell {\n\n    /**\n     * Creates an instance of Text.\n     * @param {Object} config The input configuration.\n     * @param {string} dependencies Dependencies for the class(labelManager)\n     * @memberof Text\n     */\n    constructor (config, dependencies) {\n        super(config);\n\n        this._dependencies = dependencies;\n        this._className = this._config.className ||\n                    (this._config.type === HEADER ? `${CLASSPREFIX}-${HEADER}-cell` : `${CLASSPREFIX}-${TEXT}-cell`);\n        this._computedStyle = getSmartComputedStyle(selectElement('body'), this._className);\n        this._dependencies.labelManager.setStyle(this._computedStyle);\n        generateGetterSetters(this, PROPS[TEXT]);\n        const space = this._dependencies.labelManager.getOriSize('w');\n        this.minSpacing({ width: Math.floor(space.width * 3 / 4), height: Math.floor(space.height / 2) });\n        setSmartText(this);\n    }\n\n    /**\n     * return the type pf SimpleCell cell.\n     *\n     * @readonly\n     * @memberof TextCell\n     */\n    get type () {\n        return TEXT;\n    }\n\n    /**\n     * This method return the value contained by this SimpleCell.\n     *\n     * @return {string} The text value contained by this cell.\n     * @memberof TextCell\n     */\n    valueOf () {\n        return this.source();\n    }\n\n    /**\n     * This method is used to return a unique identifier for\n     * the Text cell.\n     *\n     * @return {string} The unique identifier for the Text.\n     * @memberof TextCell\n     */\n    get id () {\n        return this._id;\n    }\n\n    /**\n     * Returns the dependencies of the instance\n     *\n     * @return {Object} Dependencies needed by the class\n     * @memberof TextCell\n     */\n    dependencies () {\n        return this._dependencies;\n    }\n\n    /**\n     * This method is used to obtain a serialized representation of this instance.\n     *\n     * @return {Object} Object with serilizable props.\n     * @memberof TextCell\n     */\n    serialize () {\n        return {\n            text: this.source(),\n            type: TEXT\n        };\n    }\n\n    /**\n     * return the default configuration for the text cell\n     *\n     * @static\n     * @return {Object} Default configuration of the cell\n     * @memberof TextCell\n     */\n    static defaultConfig () {\n        return DEFAULT_CONFIG;\n    }\n\n    static formalName () {\n        return CONSTANTS.TEXT_CELL;\n    }\n\n    /**\n     * This method return the space taken up\n     * by the text with the style applied.\n     *\n     * @return {Object} width and height taken up by the text.\n     * @memberof Text\n     */\n    getLogicalSpace () {\n        if (!this.logicalSpace()) {\n            this.logicalSpace(computeTextSpace(this));\n        }\n        const space = computeTextSpace(this);\n        this.logicalSpace(space);\n        return this.logicalSpace();\n    }\n\n    /**\n     * This method is used to set the available space.\n     *\n     * @param {number} width The available width.\n     * @param {number} height The available height.\n     * @return {Instance} Returns current Instance\n     * @memberof TextCell\n     */\n    setAvailableSpace (width, height) {\n        this.availWidth(width);\n        this.availHeight(height);\n        setSmartText(this);\n        this.logicalSpace(null);\n        return this;\n    }\n\n    /**\n     * This method is used to render the Text cell inside\n     * the provided mount point.\n     *\n     * @param {HTMLElement} mount The mount point for this cell.\n     * @return {Instance} Returns current Instance\n     * @memberof Text\n     */\n    render (mount) {\n        const availWidth = this.availWidth();\n        const availHeight = this.availHeight();\n        const {\n            margin,\n            show,\n            verticalAlign,\n            textAlign,\n            rotation,\n            padding,\n            type,\n            headerPadding,\n            className,\n            titlePadding\n        } = this.config();\n\n        this.mount(mount);\n        if (show) {\n            const container = selectElement(mount);\n            let elem = makeElement(container, 'div', [this.id], `${CLASSPREFIX}-${TEXT_CELL}`);\n            const vAlign = verticalAlign || rotation ? 'middle' : 'top';\n            const {\n                width,\n                height\n            } = this.smartText();\n            const {\n                height: minHeightSpace\n            } = this.minSpacing();\n            const translation = {\n                top: width + minHeightSpace / 2,\n                middle: width / 2 + minHeightSpace,\n                bottom: minHeightSpace\n            };\n\n            container.style('vertical-align', vAlign);\n\n            // Set class name\n            elem.classed(this._className, true);\n\n            // Apply styles\n            elem.style('display', 'inline');\n            elem.style('transform', rotation ? `translate(${height / 2}px,\n                ${translation[vAlign]}px) rotate(-90deg)` : '');\n            elem.style(WIDTH, availWidth ? `${availWidth}px` : '100%');\n\n            [TOP, BOTTOM, LEFT, RIGHT].forEach((position) => {\n                container.style(`margin-${position}`, `${margin[position]}px`);\n            });\n\n            elem = setPadding({ elem, className, headerPadding, padding, type, titlePadding });\n            if (this._className === 'muze-grid-headers') {\n                elem.style('text-align', textAlign);\n            }\n            elem.style('display', 'inline');\n            // set the text as the innerHTML\n            this._dependencies.labelManager.setStyle(this._computedStyle);\n            elem.html(this._dependencies.labelManager.getSmartText(this.source(), availWidth, availHeight, true).text);\n        }\n        return this;\n    }\n\n    /**\n     * Disposes the cell\n     *\n     * @return {Instance} Returns current Instance\n     * @memberof TextCell\n     */\n    remove () {\n        this.mount() && this.mount().remove();\n        return this;\n    }\n }\n\nexport default TextCell;\n","/**\n * This file declares a class that is used to represent a table cell\n * that houses a visual unit.\n * @module VisualCell\n */\n\nimport { selectElement, makeElement, generateGetterSetters } from 'muze-utils';\nimport SimpleCell from './simple-cell';\nimport { GEOM } from './enums/cell-type';\nimport { PROPS } from './props';\nimport {\n    CLASSPREFIX, HEIGHT, WIDTH, DATA, AXES, FACET_BY_FIELDS, FIELDS, TRANSFORM, LAYER_DEF, CONFIG, GEOM_CELL,\n    DETAIL_FIELDS\n} from './enums/constants';\nimport * as CONSTANTS from './constants';\nimport { DEFAULT_CONFIG } from './enums/defaults';\n\n/**\n * Calculates the logical space of the cell\n *\n * @param {Object} context Required to get the needed parameters to compute unit space\n * @return {Object} Logical space taken up by the unit\n * @memberof GeomCell\n */\nconst computeGeomSpace = (context) => {\n    const config = context.source().config();\n    const { width, height } = config;\n    return {\n        width: Math.ceil(width),\n        height: Math.ceil(height + context.getCaptionSpace().height)\n    };\n};\n\n /**\n * This class represents a SimpleCell for visual unit.\n *\n * @class GeomCell\n */\nclass GeomCell extends SimpleCell {\n\n    /**\n     * Creates an instance of GeomCell.\n     * @param {Object} config The input configuration.\n     * @memberof GeomCell\n     */\n    constructor (config) {\n        super(config);\n\n        this._unit = null;\n        this._layers = null;\n        this._axes = {};\n        this._datamodel = {};\n        this._facetByFields = {};\n        this._fields = null;\n        this._transform = null;\n        this._caption = null;\n\n        generateGetterSetters(this, PROPS[GEOM]);\n    }\n\n    /**\n     * return the type pf SimpleCell cell.\n     *\n     * @readonly\n     * @memberof GeomCell\n     */\n    get type () {\n        return GEOM;\n    }\n\n    /**\n     * This method return the value contained by this cell.\n     *\n     * @return {VisualUnit} Instance of visual unit contained by visual unit.\n     * @memberof GeomCell\n     */\n    valueOf () {\n        return this.source();\n    }\n\n    /**\n     * This method is used to return the id of the\n     * visual unit housed by this cell.\n     *\n     * @return {string} The unique id of the visual unit.\n     * @memberof GeomCell\n     */\n    get id () {\n        return this.source().id();\n    }\n\n    static formalName () {\n        return CONSTANTS.GEOM_CELL;\n    }\n\n    /**\n     * This method return a serialized representation of\n     * this instance.\n     *\n     * @return {Object} Object with serializable props.\n     * @memberof GeomCell\n     */\n    serialize () {\n        return {\n            type: GEOM,\n            unit: this.source().serialize(),\n            caption: this.caption()\n        };\n    }\n\n    /**\n     * return the default configuration for the geom cell\n     *\n     * @static\n     * @return {Object} Default configuration of the cell\n     * @memberof GeomCell\n     */\n    static defaultConfig () {\n        return DEFAULT_CONFIG;\n    }\n\n    /**\n     * Updates the model based on the changed parameters\n     *\n     * @return {Instance} return instance\n     * @memberof GeomCell\n     */\n    updateModel () {\n        const unit = this.source();\n        unit.clearCaching();\n        [LAYER_DEF, TRANSFORM, AXES, FIELDS, CONFIG, DATA, AXES, FACET_BY_FIELDS, DETAIL_FIELDS].forEach((prop) => {\n            this[prop]() && unit[prop](this[prop]());\n        });\n        return this;\n    }\n\n    /**\n     * It gives the space taken by the caption of the unit\n     *\n     * @return {Object} return the space taken by caption\n     * @memberof GeomCell\n     */\n    getCaptionSpace () {\n        const caption = this.caption();\n\n        let captionSpace = { width: 0, height: 0 };\n        if (caption) {\n            captionSpace = caption.getLogicalSpace();\n        }\n        return captionSpace;\n    }\n\n    /**\n     * return the space taken up by the element in the dom.\n     *\n     * @return {Object} Object with width and height fields.\n     * @memberof GeomCell\n     */\n    getLogicalSpace () {\n        if (!this.logicalSpace()) {\n            this.logicalSpace(computeGeomSpace(this));\n        }\n        return this.logicalSpace();\n    }\n\n    /**\n     * This method is used to set the space available to\n     * render the SimpleCell.\n     *\n     * @param {number} width The available width.\n     * @param {number} height The available height.\n     * @return {Instance} Returns current Instance\n     * @memberof GeomCell\n     */\n    setAvailableSpace (width, height) {\n        const unit = this.source();\n\n        this.availWidth(width);\n        this.availHeight(height);\n        unit.lockModel()\n            .width(width).height(height - this.getCaptionSpace().height)\n            .unlockModel();\n        this.logicalSpace(null);\n        return this;\n    }\n\n    /**\n     * his method is used to render the visual unit inside the provided cell.\n     *\n     * @param {HTMLElement} mount The mountpoint in the table.\n     * @return {Instance} Returns current Instance\n     * @memberof GeomCell\n     */\n    render (mount) {\n        if (mount) {\n            this.mount(mount);\n            const availHeight = this.availHeight();\n            const availWidth = this.availWidth();\n            const caption = this.caption();\n            const wrapperDiv = makeElement(selectElement(mount), 'div', [1], `${CLASSPREFIX}-${GEOM_CELL}`);\n\n            if (caption) {\n                const captionDom = makeElement(wrapperDiv, 'div', [caption], `${CLASSPREFIX}-unit-caption`).node();\n                caption.render(captionDom);\n            }\n            const selection = makeElement(wrapperDiv, 'div', [1], `${CLASSPREFIX}-unit`);\n            wrapperDiv.style(WIDTH, `${availWidth}px`).style(HEIGHT, `${availHeight}px`);\n            selection.style(WIDTH, `${availWidth}px`)\n                            .style(HEIGHT, `${availHeight - this.getCaptionSpace().height}px`);\n            this.source().mount(selection.node());\n        }\n        return this;\n    }\n\n    /**\n     * Disposes the cell\n     *\n     * @return {Object} Current instance\n     * @memberof GeomCell\n     */\n    remove () {\n        this.mount() && this.mount().remove();\n        this.source().remove();\n        return this;\n    }\n}\n\nexport default GeomCell;\n","import AxisCell from './axis-cell';\nimport BlankCell from './blank-cell';\nimport TextCell from './text-cell';\nimport GeomCell from './geom-cell';\nimport SimpleCell from './simple-cell';\n\nimport * as CONSTANTS from './constants';\n\nexport const DEFAULT_PLACEHOLDERS = {\n    [CONSTANTS.SIMPLE_CELL]: SimpleCell,\n    [CONSTANTS.TEXT_CELL]: TextCell,\n    [CONSTANTS.AXIS_CELL]: AxisCell,\n    [CONSTANTS.GEOM_CELL]: GeomCell,\n    [CONSTANTS.BLANK_CELL]: BlankCell\n};\n","import { DEFAULT_PLACEHOLDERS } from './defaults';\n\n/**\n * Creates a registry for the cells, which can be used for\n * setting a new cell or getting the registered cells\n *\n * @return {Object} Setters and getters for registered cells\n */\nconst cellRegistry = () => {\n    const reg = DEFAULT_PLACEHOLDERS;\n    return {\n        register: (def) => {\n            const key = def.formalName();\n            if (key in reg) {\n                reg[key] = def;\n            }\n            return cellRegistry;\n        },\n        get: () => reg\n    };\n};\nexport default cellRegistry;\n","import { TextCell } from '@chartshq/visual-cell';\nimport { escapeHTML } from 'muze-utils';\nimport { TOP } from '../constants';\n\n/**\n *\n *\n * @param {*} rawContent\n *\n */\nconst resolveTitleSubTitleContent = (rawContent) => {\n    if (typeof rawContent === 'function' && !rawContent._sanitize) {\n        return rawContent();\n    }\n    return escapeHTML(rawContent());\n};\n\n/**\n *\n *\n * @param {*} config\n * @param {*} cellType\n * @param {*} labelManager\n * @param {*} prevCell\n *\n */\nconst headerCreator = (config, cellType, labelManager, prevCell) => {\n    let margin = {};\n    const {\n        content,\n        classPrefix,\n        maxLines\n    } = config;\n    const cell = prevCell || new TextCell(\n        {\n            type: cellType === 'title' ? 'header' : 'text',\n            className: `${classPrefix}-${cellType}-cell`,\n            subType: cellType\n        }, {\n            labelManager\n        })\n     .config({ maxLines }).minSpacing({ width: 0, height: 0 });\n\n    cell.source(content);\n    cell._minTickDiff = { height: 0, width: 0 };\n\n    if (config.position === TOP) {\n        margin = { top: 0, bottom: config.padding };\n    } else {\n        margin = { top: config.padding, bottom: 0 };\n    }\n    cell.config({ margin });\n\n    return {\n        height: cell.getLogicalSpace().height,\n        cell\n    };\n};\n\n/**\n *\n *\n * @param {*} config\n * @param {*} type\n * @param {*} labelManager\n * @param {*} cell\n *\n */\nconst createHeading = (config, type, labelManager, prevCell) => {\n    if (!config) { return ''; }\n\n    return headerCreator(\n        config,\n        type,\n        labelManager,\n        prevCell\n    );\n};\n\n/**\n *\n *\n * @param {*} context\n */\nexport const createHeaders = (context, canvasHeight, canvasWidth) => {\n    let headerHeight = 0;\n    const headers = {};\n    const subtitle = context.subtitle();\n    const isSubtitle = resolveTitleSubTitleContent(subtitle[0]);\n\n    canvasHeight >= 200 && canvasWidth >= 200 && ['title', 'subtitle'].forEach((type) => {\n        const headerOptions = context[type]();\n        const content = resolveTitleSubTitleContent(headerOptions[0]);\n        if (content) {\n            const config = headerOptions[1];\n\n            config.width = context.width();\n            config.height = context.height();\n            config.classPrefix = context.config().classPrefix;\n            config.content = content;\n            config.padding = (type === 'title' && !isSubtitle.length) ? subtitle[1].padding : config.padding;\n\n            const { height, cell } = createHeading(config, type, context.dependencies().smartlabel,\n                context[`${type}Cell`]);\n\n            headers[`${type}Cell`] = cell;\n            context._composition[type] = cell;\n            headerHeight += height;\n        }\n    });\n    return { headerHeight, headers };\n};\n\n","import { TextCell, AxisCell } from '@chartshq/visual-cell';\nimport { getValueParser, retrieveFieldDisplayName, DataModel, getObjProp } from 'muze-utils';\nimport {\n    VERTICAL, HORIZONTAL, LEFT, RIGHT, LEGEND_TYPE_MAP, PADDING,\n    BORDER, MARGIN, SIZE, COLOR, IS_POINT_MAP, POINT\n} from '../constants';\n\n/**\n *\n *\n * @param {*} legendConfig\n * @param {*} canvases\n *\n */\nexport const legendCreator = (canvas) => {\n    let LegendCls;\n    const dataset = [];\n    const axes = canvas.getRetinalAxes();\n\n    Object.entries(axes).forEach((axisInfo) => {\n        const scale = axisInfo[1][0];\n        const scaleType = axisInfo[0];\n        const scaleProps = canvas[scaleType]();\n\n        if (scaleProps.field && scale) {\n            const {\n                type,\n                step\n            } = scale.config();\n\n            const stepMapper = typeof step === 'boolean' ? step : false;\n            LegendCls = LEGEND_TYPE_MAP[`${type}-${stepMapper}-${scaleType}`];\n            dataset.push({\n                scale,\n                canvas,\n                fieldName: scaleProps.field,\n                title: retrieveFieldDisplayName(canvas.data(), scaleProps.field),\n                LegendCls,\n                scaleType\n            });\n        }\n    });\n\n    return dataset;\n};\n\n/**\n * @param {*} mark mark of the layers in the canvas\n * @param {*} scaleType type of the scale to draw the legend ie shape, size or color\n *\n */\nexport const legendIconShapeMapper = (layers, scaleType) => {\n    const layerMarks = layers.map(el => el.mark);\n    const shape = IS_POINT_MAP[(scaleType === COLOR || scaleType === SIZE)\n    && layerMarks.includes(POINT)];\n    return shape;\n};\n\n/**\n *\n *\n * @param {*} legendConfig\n * @param {*} canvases\n * @param {*} measurement\n * @param {*} prevLegends\n *\n */\nexport const legendInitializer = (legendConfig, canvas, measurement, prevLegends) => {\n    const legends = [];\n    const {\n        height,\n        width,\n        headerHeight\n    } = measurement;\n    const {\n        position,\n        align\n    } = legendConfig;\n\n    const legendInfo = legendCreator(canvas);\n    const { invalidValues } = canvas.config();\n    const interactionRegistry = canvas.registry().interactions;\n    const parser = getValueParser(invalidValues);\n\n    legendInfo.forEach((dataInfo, index) => {\n        const legendMeasures = {};\n        const {\n                LegendCls,\n                scale,\n                fieldName,\n                title: titleText,\n                scaleType\n            } = dataInfo;\n        const config = legendConfig[scaleType] || {};\n        const title = config.title || {};\n        title.text = title.text || titleText;\n        if (config.show) {\n            config.position = position;\n            config.align = align;\n            let legend = getObjProp(prevLegends[scaleType], index);\n            if (!legend) {\n                legend = LegendCls.create({\n                    labelManager: canvas._dependencies.smartlabel,\n                    cells: {\n                        AxisCell, TextCell\n                    },\n                    registry: {\n                        interactions: interactionRegistry\n                    }\n                });\n            }\n            legendMeasures.maxHeight = align === VERTICAL ? (height - headerHeight) : height * 0.2;\n            legendMeasures.maxWidth = align === HORIZONTAL ? width : width * 0.2;\n            legendMeasures.width = Math.min(legendMeasures.maxWidth, config.width);\n            legendMeasures.height = Math.min(legendMeasures.maxHeight, config.height);\n\n            [PADDING, BORDER, MARGIN].forEach((e) => {\n                legendMeasures[e] = config[e];\n            });\n            const metaData = legend.metaData();\n            if (metaData instanceof DataModel) {\n                metaData.dispose();\n            }\n\n            const mark = canvas.composition().visualGroup.resolver().matrixLayers()[0][0];\n            config.shape = legendIconShapeMapper(mark, scaleType);\n\n            legend.scale(scale)\n                            .valueParser(parser)\n                            .title(title)\n                            .fieldName(fieldName)\n                            .config(config)\n                            .metaData(canvas.composition().visualGroup.getGroupByData().project([fieldName]))\n                            .measurement(legendMeasures)\n                            .canvasAlias(canvas.alias())\n                            .setLegendMeasures();\n\n            legends.push({ canvas, legend, scaleType });\n        }\n    });\n    return legends;\n};\n\n/**\n *\n *\n * @param {*} legends\n * @param {*} legendConfig\n * @param {*} availableHeight\n * @param {*} availableWidth\n *\n */\nexport const getLegendSpace = (legends, legendConfig, availableHeight, availableWidth) => {\n    const legendMeasures = legends.map(legendInfo => legendInfo.legend.measurement());\n    const legendSpace = { width: 0, height: 0 };\n\n    legendMeasures.forEach((space) => {\n        let height = 0;\n        let width = 0;\n        width = Math.min(space.width, space.maxWidth);\n        height = Math.min(space.height, space.maxHeight);\n\n        if (legendConfig.align === HORIZONTAL) {\n            if (legendSpace.width + width > availableWidth) {\n                legendSpace.width = availableWidth;\n                legendSpace.height += height;\n            } else {\n                legendSpace.width += width;\n                legendSpace.height = Math.max(legendSpace.height, height);\n            }\n        } else if (legendSpace.height + height > availableHeight) {\n            legendSpace.height = height;\n            legendSpace.width += width;\n        } else {\n            legendSpace.height += height;\n            legendSpace.width = Math.max(legendSpace.width, width);\n        }\n    });\n    if (legendConfig.align === HORIZONTAL) {\n        legendSpace.width = availableWidth;\n    }\n    return legendSpace;\n};\n\n/**\n *\n *\n * @param {*} context\n * @param {*} headerHeight\n *\n */\nexport const createLegend = (context, headerHeight, height, width) => {\n    const measurement = {\n        height,\n        width,\n        headerHeight\n    };\n    const { legend } = context.config();\n    const { show, position } = legend;\n\n    legend.classPrefix = context.config().classPrefix;\n    const align = (position === LEFT || position === RIGHT) ? VERTICAL : HORIZONTAL;\n\n    legend.show = show ? ((align === VERTICAL && width > 200) || (align === HORIZONTAL && height > 200)) : show;\n    legend.align = align;\n    return legendInitializer(legend, context, measurement, context.composition().legend || {});\n};\n","import { LayoutComponent } from '../../../../layout/src/tree-layout';\n\nexport default class MuzeComponent extends LayoutComponent {\n    getLogicalSpace () {\n        const { width, height } = this.boundBox();\n        return { width, height };\n    }\n\n    setSpatialConfig (conf) {\n        this.boundBox({ top: conf.y, left: conf.x });\n        this.newDimensions = {\n            width: conf.width,\n            height: conf.height\n        };\n        this.renderAt(conf.renderAt);\n    }\n\n    getBoundBox () {\n        return this.boundBox();\n    }\n\n    updateWrapper () {\n        throw Error('Update is not implemented');\n    }\n\n    setParams () {\n        throw Error('set params is not implemented');\n    }\n\n    setComponentInfo () {\n        throw Error('setComponentInfo is not implemented');\n    }\n}\n","import { selectElement } from 'muze-utils';\nimport MuzeComponent from './muze-chart-component';\nimport { LEFT } from '../../constants';\n\nexport default class HeaderComponent extends MuzeComponent {\n    constructor (params) {\n        super(params.name, params.component.getLogicalSpace(), 0);\n        this.setParams(params);\n    }\n\n    renderHeader (container) {\n        const layoutConfig = this.params.config;\n        container = selectElement(container);\n        const { align } = layoutConfig;\n        const sel = container\n          .selectAll(`.${layoutConfig.classPrefix}-inner-container`)\n          .data([this.name]);\n        sel.exit().remove();\n        const selEnter = sel.enter().append('div');\n\n        const cont = selEnter.merge(sel);\n        cont.classed(`${layoutConfig.classPrefix}-inner-container`, true);\n        const { height, width } = this.boundBox();\n        this.component.setAvailableSpace(width, height);\n\n        this.component && this.component.render(cont.node());\n\n        cont.selectAll('div').classed(`${layoutConfig.classPrefix}-inner-content`, true);\n        cont.style('width', `${100}%`);\n\n        if (layoutConfig && this.component) {\n            cont.style('float', LEFT)\n                            .style('text-align', align);\n                            // .style(`padding-${position === TOP ? BOTTOM : TOP}`, `${padding}px`);\n        }\n    }\n\n    draw (container) {\n        this.renderHeader(container || document.getElementById(this.renderAt()));\n    }\n\n    updateWrapper (params) {\n        this.setParams(params);\n        this.name(params.name);\n        this.boundBox(params.component.getLogicalSpace());\n        return this;\n    }\n\n    setParams (params) {\n        this.component = params.component;\n        this.params = params;\n        this.target(params.config.target);\n        this.position(params.config.position);\n        this.className(params.config.className);\n        this.alignWith(params.config.alignWith);\n        this.alignment(params.config.alignment);\n    }\n\n    setSpatialConfig (conf) {\n        this.boundBox({ top: conf.y,\n            left: conf.x,\n            width: conf.width,\n            height: conf.height });\n        this.renderAt(conf.renderAt);\n    }\n}\n","import { makeElement, selectElement } from 'muze-utils';\nimport MuzeComponent from './muze-chart-component';\nimport {\n     LEFT, RIGHT, VERTICAL, HORIZONTAL, TOP, BOTTOM, HORIZONTAL_CENTER, VERTICAL_CENTER\n} from '../../constants';\nimport { ROW_MATRIX_INDEX, COLUMN_MATRIX_INDEX } from '../../../../layout/src/enums/constants';\n\nfunction defaultAlignmentHelper (position) {\n    let alignment = null;\n    const alignWith = `${ROW_MATRIX_INDEX[1]}-${COLUMN_MATRIX_INDEX[1]}`;\n    switch (position) {\n    case TOP:\n    case BOTTOM:\n        alignment = HORIZONTAL_CENTER;\n        break;\n    case LEFT:\n    case RIGHT:\n        alignment = VERTICAL_CENTER;\n        break;\n    default:\n        alignment = VERTICAL_CENTER;\n    }\n    return { alignment, alignWith };\n}\nexport default class LegendComponent extends MuzeComponent {\n    constructor (params) {\n        super(params.name, params.config.measurement.legendSpace, 0);\n        this.setParams(params);\n    }\n\n    renderLegend (container) {\n        container = selectElement(container);\n        const sectionComponents = [];\n        const { position, classPrefix } = this.params.config;\n        const legendMount = makeElement(container, 'div', [this.components],\n                                        `${classPrefix}-inner-content`, {}, d => d);\n        legendMount.classed(`${classPrefix}-legend`, true);\n        const align = (position === LEFT || position === RIGHT) ? VERTICAL : HORIZONTAL;\n        const legWidth = this.newDimensions.width;\n        const legHeight = this.newDimensions.height;\n\n        [container, legendMount].forEach((elem) => {\n            elem.style('width', `${Math.floor(legWidth)}px`)\n                            .style('height', `${legHeight}px`)\n                            .style('float', LEFT);\n        });\n\n        if (align === VERTICAL) {\n            let sections = -1;\n            let currHeight = legHeight;\n            let currWidth = 0;\n\n            this.components.forEach((legendInfo) => {\n                const leg = legendInfo.legend;\n                if (leg.measurement().height > currHeight) {\n                    sections++;\n                    currWidth = 0;\n                    currHeight = legHeight;\n                } else {\n                    sections < 0 && sections++;\n                }\n                sectionComponents[sections] = sectionComponents[sections] || [];\n                currHeight -= Math.min(leg.measurement().height, currHeight);\n                currWidth = Math.max(Math.min(leg.measurement().width, leg.measurement().maxWidth), currWidth);\n                sectionComponents[sections].push({\n                    legend: leg,\n                    legendHeight: legHeight,\n                    legendWidth: currWidth\n                });\n            });\n\n            const mount = makeElement(legendMount, ['div'], sectionComponents, `${classPrefix}-legend-section`);\n            // mount.each((d, i) => selectElement(this).classed(`${classPrefix}-legend-section-${i}`, true));\n            mount.classed(`${classPrefix}-legend-vertical-section`, true)\n                            .style('width', d => `${d[0].legendWidth}px`);\n            makeElement(mount, ['div'], d => d, `${classPrefix}-legend-components`, {}, d => d.legend.id())\n                            .each(function (d) {\n                                d.legend.mount(this);\n                            })\n                            .style('width', d => `${d.legendWidth}px`);\n        } else {\n            const mount = makeElement(legendMount, 'div', [1], `${classPrefix}-legend-section`);\n            mount.classed(`${classPrefix}-legend-horizontal-section`, true);\n            mount.classed(`${classPrefix}-legend-section-${0}`, true)\n                            .style('width', `${legWidth}px`);\n\n            makeElement(mount, 'div', this.components, `${classPrefix}-legend-components`, {}, d => d.legend.id())\n                            .style('width', d => `${d.legend.measurement().width}px`)\n                            .each(function (d) { d.legend.mount(this); });\n        }\n    }\n\n    draw (container) {\n        this.renderLegend(container || document.getElementById(this.renderAt()));\n    }\n\n    updateWrapper (params) {\n        this.name(params.name);\n        this.boundBox(params.config.measurement.legendSpace);\n        this.setParams(params);\n        return this;\n    }\n\n    setParams (params) {\n        this.components = params.component;\n        this.params = params;\n        this.target(params.config.target);\n        this.position(params.config.position);\n        const { alignWith, alignment } = defaultAlignmentHelper(params.config.position);\n        this.className(params.config.className);\n        this.alignWith(params.config.alignWith || alignWith);\n        this.alignment(params.config.alignment || alignment);\n    }\n\n    setComponentInfo (params) {\n        const { rootNode } = params;\n        this.components.forEach((legendInfo) => {\n            const leg = legendInfo.legend;\n            leg.setParentInfo({ canvasRoot: rootNode });\n        });\n    }\n\n}\n","import {\n    selectElement,\n    makeElement,\n    getD3Drag,\n    getEvent,\n    getWindow,\n    hasTouch\n} from 'muze-utils';\nimport './scroll-bar.scss';\nimport { WIDTH, HEIGHT } from '../../../constants';\n\nconst d3Drag = getD3Drag();\n\nconst arrowSizeMap = {\n    left: WIDTH,\n    right: WIDTH,\n    top: HEIGHT,\n    bottom: HEIGHT\n};\n\nexport const getUnitPositions = (unitMeasures, totalLength, viewLength) => {\n    let currentLen = 0;\n    const measures = unitMeasures.primary && unitMeasures.primary.length ?\n        unitMeasures.primary : unitMeasures.secondary;\n\n    return measures.map((e) => {\n        const unitPosition = currentLen * 100 / (totalLength - viewLength);\n        currentLen += e;\n        return unitPosition;\n    });\n};\n\nexport const createScrollBarArrow = (mount, type, config) => {\n    const {\n        classPrefix,\n        thickness\n    } = config;\n    const arrow = makeElement(mount, 'div', [type], `${classPrefix}-scroll-arrow-${type}`);\n\n    arrow.classed(`${classPrefix}-scroll-arrow`, true);\n    arrow.style(arrowSizeMap[type], `${thickness}px`);\n\n    const chevron = makeElement(arrow, 'div', [1], `${classPrefix}-scroll-arrow-chevron`);\n\n    chevron.attr('id', `${classPrefix}-scroll-arrow-chevron-${type}`);\n\n    return arrow;\n};\n\nexport const createScrollBarRect = (mount, config) => {\n    const {\n        classPrefix\n    } = config;\n    const rect = makeElement(mount, 'div', [1], `${classPrefix}-scroll-rect`);\n    const mover = makeElement(rect, 'div', [1], `${classPrefix}-scroll-mover`);\n\n    return { rect, mover };\n};\n\nexport const applyRectClick = (scrollMaker, moverRect) => {\n    const {\n        rect\n    } = moverRect;\n\n    rect.on('click', () => {\n        const event = getEvent();\n        scrollMaker.emptyScrollAreaClick(event);\n    });\n};\n\nconst applyMoverDrag = (scrollMaker, moverRect) => {\n    let startPos = {};\n    let moverStartPos = 0;\n    let rectStartPos = 0;\n    let endPos = {};\n    const {\n        mover,\n        rect\n    } = moverRect;\n\n    mover.call(d3Drag()\n                    .on('start', () => {\n                        const event = getEvent();\n\n                        moverStartPos = mover.node().getBoundingClientRect();\n                        rectStartPos = rect.node().getBoundingClientRect();\n                        startPos = {\n                            x: event.x,\n                            y: event.y\n                        };\n                    })\n                    .on('drag', () => {\n                        const event = getEvent();\n                        const window = getWindow();\n\n                        endPos = {\n                            x: event.x,\n                            y: event.y\n                        };\n                        const distanceMoved = {\n                            x: endPos.x - startPos.x,\n                            y: endPos.y - startPos.y\n                        };\n                        const actualPosition = {\n                            x: moverStartPos.x + distanceMoved.x - rectStartPos.x + window.pageXOffset,\n                            y: moverStartPos.y + distanceMoved.y - rectStartPos.y + window.pageYOffset\n                        };\n\n                        scrollMaker.changeMoverPosition(actualPosition);\n                    }));\n};\n\nconst applyScrollMouseDownAction = (moverRect, scrollMaker, speed) => {\n    const {\n        mover,\n        rect\n    } = moverRect;\n    const { x, y } = mover.node().getBoundingClientRect();\n    const { x: rectX, y: rectY } = rect.node().getBoundingClientRect();\n\n    scrollMaker.changeMoverPosition({ x: x - rectX + speed, y: y - rectY + speed });\n};\n\nconst registerListenerOnArrow = (scrollMaker, moverRect, arrowType, speed) => {\n    let timer = '';\n    const arrow = scrollMaker._components[arrowType];\n    const isTouchDevice = hasTouch();\n\n    arrow.on(isTouchDevice ? 'touchstart' : 'mousedown', () => {\n        const event = getEvent();\n\n        event.preventDefault();\n\n        timer = setInterval(() => {\n            applyScrollMouseDownAction(moverRect, scrollMaker, speed);\n        }, 100);\n    }).on(isTouchDevice ? 'touchend' : 'mouseup', () => {\n        const event = getEvent();\n\n        event.preventDefault();\n\n        clearInterval(timer);\n    }).on('click', () => {\n        applyScrollMouseDownAction(moverRect, scrollMaker, speed);\n    });\n};\n\nexport const registerListeners = (scrollMaker) => {\n    const {\n        moverRect\n    } = scrollMaker._components;\n\n    const speed = scrollMaker.config().speed;\n\n    registerListenerOnArrow(scrollMaker, moverRect, 'prevArrow', -speed);\n    applyMoverDrag(scrollMaker, moverRect);\n    applyRectClick(scrollMaker, moverRect);\n    registerListenerOnArrow(scrollMaker, moverRect, 'nextArrow', speed);\n};\n\nexport const scrollContainerHelper = (mountPoint, config, dimensions, type) => {\n    const {\n        classPrefix\n    } = config;\n    const scrollBarContainer = makeElement(selectElement(mountPoint), 'div', [1], `#${classPrefix}-scroll-bar-${type}`);\n\n    scrollBarContainer.classed(`${classPrefix}-scroll-bar`, true);\n    scrollBarContainer.style(WIDTH, `${dimensions.width}px`);\n    scrollBarContainer.style(HEIGHT, `${dimensions.height}px`);\n    return scrollBarContainer;\n};\n\n","import { mergeRecursive } from 'muze-utils';\n\nexport const PROPS = {\n\n    config: {\n        sanitization: (context, value) => {\n            value = mergeRecursive(context._config, value);\n            return value;\n        }\n    },\n    manager: {},\n    unitPositions: {},\n    logicalSpace: {}\n};\n\n","import { ERROR_MSG, generateGetterSetters } from 'muze-utils';\nimport {\n    scrollContainerHelper,\n    registerListeners\n} from './helper';\nimport { PROPS } from './props';\n\nexport class ScrollMaker {\n\n    constructor () {\n        this._components = {};\n        this._logicalSpace = {};\n        this._attachedScrollAction = () => {};\n        this._config = {\n            thickness: 10,\n            speed: 2\n        };\n        this._unitPositions = null;\n\n        generateGetterSetters(this, PROPS);\n    }\n\n    static type () {\n        throw new ERROR_MSG('Method not implemented');\n    }\n\n    emptyScrollAreaClick () {\n        throw new ERROR_MSG('Method not implemented');\n    }\n\n    changeMoverPosition () {\n        throw new ERROR_MSG('Method not implemented');\n    }\n\n    scrollTo () {\n        throw new ERROR_MSG('Method not implemented');\n    }\n\n    scrollDeltaTo () {\n        throw new ERROR_MSG('Method not implemented');\n    }\n\n    createScroll (mountPoint) {\n        const config = this.config();\n\n        return {\n            scrollBarContainer: scrollContainerHelper(mountPoint, config, this.logicalSpace(), this.constructor.type())\n        };\n    }\n\n    attachScrollAction (externalScrollAction) {\n        this._attachedScrollAction = externalScrollAction;\n        return this;\n    }\n\n    detachScrollAction () {\n        this._attachedScrollAction = () => {};\n        return this;\n    }\n\n    getLogicalSpace () {\n        return this.logicalSpace();\n    }\n\n    registerListeners () {\n        registerListeners(this);\n        return this;\n    }\n\n    remove () {\n        this._components.scrollBarContainer.remove();\n        return this;\n    }\n}\n\n","import MuzeComponent from './muze-chart-component';\nimport { HorizontalScrollMaker } from './scroll-bar-maker/horizontal-scroll-maker';\nimport { VerticalScrollMaker } from './scroll-bar-maker/vertical-scroll-maker';\n\nconst scrollMakerMap = {\n    horizontal: HorizontalScrollMaker,\n    vertical: VerticalScrollMaker\n};\n\n/**\n * Scroll Component acts as a wrapper over the scoll bars created using the respective Scroll Makers\n * This provides a consistent API for layouting using the tree layout system.\n *\n *\n * @class\n * @public\n * @module ScrollComponent\n */\nexport default class ScrollComponent extends MuzeComponent {\n\n    constructor (params) {\n        const ScrollMaker = scrollMakerMap[params.config.type];\n\n        params.component = new ScrollMaker();\n        params.component.config(params.config.scrollBarComponentConfig);\n        params.component.logicalSpace(params.dimensions);\n        super(params.name, params.component.getLogicalSpace(), 0);\n        this.setParams(params);\n    }\n\n    manager (...manager) {\n        if (manager.length) {\n            this.component.manager(manager[0]);\n            return this;\n        }\n        return this.component.manager();\n    }\n\n    /**\n     * Scrolls based on the actual pixel value provided. Since it's a delta change, the input will be\n     * a delta between (-Infinity, Infinity), based on which the scroll will occur. Only a delta movement in\n     * scroll occurs\n     *\n     * @public\n     *\n     * @param {number} delta Based on which the scroll will have a delta change in position\n     * @return {ScrollComponent} Instance of the ScrollComponent\n     */\n    scrollDeltaTo (delta) {\n        this.component.scrollDeltaTo(delta);\n        return this;\n    }\n\n    /**\n     * Scrolls to the specific point in the page. The input is provided as a percentage (0 - 100)\n     *\n     * @public\n     *\n     * @param {number} scrollPercentage Its the percentage based on which the scroll action will occur\n     * @return {ScrollComponent} Instance of the ScrollComponent\n     */\n    scrollTo (scrollPercentage) {\n        this.component.scrollTo(scrollPercentage);\n        return this;\n    }\n\n    /**\n     * Scrolls to the specific point in the page based on the unit index.\n     * The input is provided as a number represting the index for the unit.\n     * For vertical scroll, it's the row index that will be required.\n     * For horizontal scroll, it's the column index that will be required\n     *\n     * @public\n     *\n     * @param {number} unitIndex Index of the unit appearing in the grid\n     * @return {ScrollComponent} Instance of the ScrollComponent\n     */\n    scrollToUnitIndex (unitIndex) {\n        const unitPositions = this.component.unitPositions();\n        const sanitizedUnitIndex = Math.min(Math.max(0, unitIndex), unitPositions.length - 1);\n        this.component.scrollTo(unitPositions[sanitizedUnitIndex]);\n        return this;\n    }\n\n    /**\n     * Provides the positions of the units(either horizontal or vertical based on the type\n     * of scroll bar it wraps) relative to it's container. The position of the first unit starts at 0\n     *\n     *\n     * @public\n     *\n     * @return {Array} Positions of units either horizontal or vertical\n     */\n    getScrollPositionsForUnits () {\n        return this.component.unitPositions();\n    }\n\n    draw (container) {\n        this.component.createScroll(container || document.getElementById(this.renderAt()));\n        return this;\n    }\n\n    /**\n     * Can be used to attach a scroll action whenever scrolling occurs in the canvas\n     *\n     * @public\n     * @param {number} externalAction Action to be attached during scroll\n     * @return {ScrollComponent} Instance of the ScrollComponent\n     */\n    attachScrollAction (externalAction) {\n        this.component.attachScrollAction(externalAction);\n        return this;\n    }\n\n    /**\n     * Can be used to detach the scroll action already bound to the scroll bar\n     *\n     * @public\n     * @return {ScrollComponent} Instance of the ScrollComponent\n     */\n    detachScrollAction () {\n        this.component.detachScrollAction();\n        return this;\n    }\n\n    updateWrapper (params) {\n        this.name(params.name);\n        this.component.config(params.config.scrollBarComponentConfig);\n        this.component.logicalSpace(params.dimensions);\n        this.boundBox(this.component.getLogicalSpace());\n        this.setParams(params);\n        return this;\n    }\n\n    setParams (params) {\n        this.component = params.component || this.component;\n        this.params = params;\n        this.target(params.config.target);\n        this.position(params.config.position);\n        this.className(params.config.className);\n        this.alignWith(params.config.alignWith);\n        this.alignment(params.config.alignment);\n    }\n\n    remove () {\n        this.component.remove();\n    }\n}\n","import { ScrollMaker } from './scroll-maker';\nimport { createScrollBarRect, createScrollBarArrow, getUnitPositions } from './helper';\nimport { HORIZONTAL, HEIGHT, WIDTH, LEFT } from '../../../constants';\n\nexport class HorizontalScrollMaker extends ScrollMaker {\n\n    /**\n     * Describes the type of the ScrollMaker\n     *\n     * @public\n     *\n     * @return {String} Returns the type of scroll maker: horizontal\n     */\n    static type () {\n        return HORIZONTAL;\n    }\n\n    createScroll (mountPoint, dimensions = this.logicalSpace()) {\n        const config = this.config();\n        const { scrollBarContainer } = super.createScroll(mountPoint, config, dimensions);\n        const prevArrow = createScrollBarArrow(scrollBarContainer, 'left', config);\n        const moverRect = createScrollBarRect(scrollBarContainer, config);\n        const nextArrow = createScrollBarArrow(scrollBarContainer, 'right', config);\n        const {\n            mover,\n            rect\n        } = moverRect;\n\n        const { height, width, totalLength, viewLength, unitWidths } = this.logicalSpace();\n        const scrollBarWithouArrowLength = width - height * 2;\n\n        rect.style(WIDTH, `${dimensions.width - height * 2}px`);\n        rect.style(HEIGHT, `${100}%`);\n        mover.style(WIDTH, `${(viewLength * scrollBarWithouArrowLength) / totalLength}px`);\n        mover.style(HEIGHT, `${100}%`);\n        mover.style(LEFT, `${0}px`);\n\n        this._components = {\n            prevArrow,\n            nextArrow,\n            moverRect,\n            scrollBarContainer\n        };\n        this._scrollBarWithouArrowLength = scrollBarWithouArrowLength;\n        this.unitPositions(getUnitPositions(unitWidths, totalLength, viewLength));\n        this.registerListeners();\n    }\n\n    emptyScrollAreaClick (event) {\n        const {\n            mover,\n            rect\n        } = this._components.moverRect;\n        const speed = this.config().speed;\n        const { x, y } = mover.node().getBoundingClientRect();\n        const { x: rectX, y: rectY } = rect.node().getBoundingClientRect();\n        let positionAdjuster = speed * 10;\n        if (event.x < x) {\n            positionAdjuster = -speed * 10;\n        }\n        this.changeMoverPosition({ x: x - rectX + positionAdjuster, y: y - rectY + positionAdjuster });\n    }\n\n    changeMoverPosition (newPosition) {\n        let currentPos;\n        const {\n            mover,\n            rect\n        } = this._components.moverRect;\n        const rectStartPos = rect.node().getBoundingClientRect();\n        const moverPos = mover.node().getBoundingClientRect();\n        const {\n            totalLength\n         } = this.logicalSpace();\n\n        if (newPosition.x < 0) {\n            currentPos = 0;\n        } else if (newPosition.x + moverPos.width > rectStartPos.width) {\n            currentPos = rectStartPos.width - moverPos.width;\n        } else {\n            currentPos = newPosition.x;\n        }\n\n        mover.style(LEFT, `${currentPos}px`);\n        const totalDistance = this._scrollBarWithouArrowLength;\n        const movedViewLength = (currentPos * totalLength) / totalDistance;\n\n        this.manager().performAttachedScrollFunction(this.constructor.type(), movedViewLength);\n    }\n\n    scrollDeltaTo (delta) {\n        const {\n            mover,\n            rect\n        } = this._components.moverRect;\n        const moverPos = mover.node().getBoundingClientRect();\n        const rectStartPos = rect.node().getBoundingClientRect();\n\n        this.changeMoverPosition({ y: 0, x: moverPos.x - rectStartPos.x - delta });\n        return this;\n    }\n\n    /**\n     * Scrolls to the specific point in the page. The input is provided as a percentage (0 - 100)\n     *\n     * @public\n     *\n     * @param {number} scrollPercentage Its the percentage based on which the scroll action will occur\n     * @return {HorizontalScrollMaker} Instance of the HorizontalScrollMaker\n     */\n    scrollTo (scrollPercentage) {\n        const {\n            mover\n        } = this._components.moverRect;\n        const moverPos = mover.node().getBoundingClientRect();\n        const movement = (scrollPercentage * (this._scrollBarWithouArrowLength - moverPos.width)) / 100;\n\n        this.changeMoverPosition({ y: 0, x: movement });\n        return this;\n    }\n\n}\n\n","import { ScrollMaker } from './scroll-maker';\nimport { createScrollBarRect, createScrollBarArrow, getUnitPositions } from './helper';\nimport { VERTICAL, TOP, HEIGHT, WIDTH } from '../../../constants';\n\nexport class VerticalScrollMaker extends ScrollMaker {\n\n    /**\n     * Describes the type of the ScrollMaker\n     *\n     * @public\n     *\n     * @return {String} Returns the type of scroll maker: vertical\n     */\n    static type () {\n        return VERTICAL;\n    }\n\n    createScroll (mountPoint, dimensions = this.logicalSpace()) {\n        const config = this.config();\n        const { scrollBarContainer } = super.createScroll(mountPoint, dimensions);\n        const prevArrow = createScrollBarArrow(scrollBarContainer, 'top', config);\n        const moverRect = createScrollBarRect(scrollBarContainer, config);\n        const nextArrow = createScrollBarArrow(scrollBarContainer, 'bottom', config);\n        const {\n            mover,\n            rect\n        } = moverRect;\n        const { height, width, totalLength, viewLength, unitHeights } = this.logicalSpace();\n        const scrollBarWithouArrowLength = height - width * 2;\n\n        rect.style(HEIGHT, `${scrollBarWithouArrowLength}px`);\n        rect.style(WIDTH, `${100}%`);\n        mover.style(WIDTH, `${100}%`);\n        mover.style(HEIGHT, `${(viewLength * scrollBarWithouArrowLength) / totalLength}px`);\n        mover.style(TOP, `${0}px`);\n\n        this._components = {\n            prevArrow,\n            nextArrow,\n            moverRect,\n            scrollBarContainer\n        };\n        this._scrollBarWithouArrowLength = scrollBarWithouArrowLength;\n\n        this.unitPositions(getUnitPositions(unitHeights, totalLength, viewLength));\n        this.registerListeners();\n    }\n\n    emptyScrollAreaClick (event) {\n        const {\n            mover,\n            rect\n        } = this._components.moverRect;\n        const speed = this.config().speed;\n        const { x, y } = mover.node().getBoundingClientRect();\n        const { x: rectX, y: rectY } = rect.node().getBoundingClientRect();\n\n        let positionAdjuster = speed * 10;\n        if (event.y < y) {\n            positionAdjuster = -speed * 10;\n        }\n        this.changeMoverPosition({ x: x - rectX + positionAdjuster, y: y - rectY + positionAdjuster });\n    }\n\n    changeMoverPosition (newPosition) {\n        let currentPos;\n        const {\n            mover,\n            rect\n        } = this._components.moverRect;\n        const {\n            totalLength\n         } = this.logicalSpace();\n        const rectStartPos = rect.node().getBoundingClientRect();\n        const moverPos = mover.node().getBoundingClientRect();\n\n        if (newPosition.y < 0) {\n            currentPos = 0;\n        } else if (newPosition.y + moverPos.height > rectStartPos.height) {\n            currentPos = rectStartPos.height - moverPos.height;\n        } else {\n            currentPos = newPosition.y;\n        }\n        mover.style(TOP, `${currentPos}px`);\n        const totalDistance = this._scrollBarWithouArrowLength;\n        const movedViewLength = (currentPos * totalLength) / totalDistance;\n\n        this.manager().performAttachedScrollFunction(this.constructor.type(), movedViewLength);\n    }\n\n    /**\n     * Scrolls based on the actual pixel value provided. Since it's a delta change, the input will be\n     * a delta between (-Infinity, Infinity), based on which the scroll will occur. Only a delta movement in\n     * scroll occurs\n     *\n     * @public\n     *\n     * @param {number} delta Based on which the scroll will have a delta change in position\n     * @return {VerticalScrollMaker} Instance of the VerticalScrollMaker\n     */\n    scrollDeltaTo (delta) {\n        const {\n            mover,\n            rect\n        } = this._components.moverRect;\n        const moverPos = mover.node().getBoundingClientRect();\n        const rectStartPos = rect.node().getBoundingClientRect();\n\n        this.changeMoverPosition({ y: moverPos.y - rectStartPos.y - delta, x: 0 });\n        return this;\n    }\n\n    /**\n     * Scrolls to the specific point in the page. The input is provided as a percentage (0 - 100)\n     *\n     * @public\n     *\n     * @param {number} scrollPercentage Its the percentage based on which the scroll action will occur\n     * @return {VerticalScrollMaker} Instance of the VerticalScrollMaker\n     */\n    scrollTo (scrollPercentage) {\n        const {\n            mover\n        } = this._components.moverRect;\n        const moverPos = mover.node().getBoundingClientRect();\n        const movement = (scrollPercentage * (this._scrollBarWithouArrowLength - moverPos.height)) / 100;\n\n        this.changeMoverPosition({ x: 0, y: movement });\n        return this;\n    }\n\n}\n","import { makeElement } from 'muze-utils';\nimport { cellSpanMaker, applySpans } from '../../../../layout/src/grid-layout/span-maker';\nimport { applyBorders } from '../../../../layout/src/grid-layout/border-helper';\nimport '../../border-applier.scss';\nimport {\n     TOP, CENTER\n} from '../../../../layout/src/enums/constants';\nimport MuzeComponent from './muze-chart-component';\nimport { WIDTH, HEIGHT, HIDDEN, OVERFLOW, AUTO, VISIBLE } from '../../constants';\n\nconst renderPlaceholders = (cells) => {\n    // Rendering content within placeholders\n    cells.each(function (cell) {\n        cell.placeholder.render(this);\n    });\n};\n\nexport default class MatrixComponent extends MuzeComponent {\n\n    constructor (params) {\n        super(params.name, params.config.dimensions, 0);\n        this.setParams(params);\n        this.className(params.config.className);\n    }\n\n    applyScroll (container) {\n        const row = this.params.config.row;\n        const column = this.params.config.column;\n        const { horizontal, vertical } = this.params.config.scrollInfo;\n        container.style(OVERFLOW, VISIBLE);\n        container.style(WIDTH, AUTO);\n        container.style(HEIGHT, AUTO);\n\n        if (horizontal && column === 1) {\n            container.style(OVERFLOW, HIDDEN);\n            container.style(WIDTH, '100%');\n        }\n\n        if (vertical && row === CENTER) {\n            container.style(OVERFLOW, HIDDEN);\n            container.style(HEIGHT, '100%');\n        }\n    }\n\n    renderMatrix (mountPoint) {\n        const { classPrefix, row, column, dimensions, border, isFacet, showHeaders } = this.params.config;\n\n        // Creating containers for each matrix individually\n        const containerForMatrix = makeElement(mountPoint, 'div', [1], `${classPrefix}-grid-${row}-${column + 1}`)\n            .classed(`${classPrefix}-grid-${row}`, true)\n            .classed(`${classPrefix}-grid`, true);\n\n        this.applyScroll(containerForMatrix);\n\n        const {\n            viewMatrix,\n            spans\n        } = cellSpanMaker(this.component, row, column);\n\n        // Rendering the table components\n        const { cells } = this.renderTable(containerForMatrix, `${classPrefix}-grid`, viewMatrix);\n\n        applySpans(cells, spans, { dimensions, border }, `${row}-${column}`);\n        renderPlaceholders(cells);\n\n        cells.exit().each((cell) => {\n            cell.placeholder.remove();\n        });\n\n        applyBorders({ cells, border, row, column, isFacet, showHeaders });\n    }\n\n    renderTable (mount, className, rowData) {\n        const table = makeElement(mount, 'table', ['layout'], `${className}-table`);\n        const body = makeElement(table, 'tbody', ['layout'], `${className}-body`);\n        const rows = makeElement(body, 'tr', rowData, `${className}-tr`);\n        const cells = makeElement(rows, 'td',\n            (d, i) => d.filter(e => e !== null).map(e =>\n                ({ placeholder: e, rowIndex: i })), `${className}-td`, {\n                    update: (elem, cell) => {\n                        const { externalClassname } = cell.placeholder.config();\n                        externalClassname && externalClassname.map(d => elem.classed(`${className}-${d}`, true));\n                    }\n                }, key => key.placeholder.id);\n\n        return { table, body, rows, cells };\n    }\n\n    draw (container) {\n        this.renderMatrix(container || document.getElementById(this.renderAt()));\n    }\n\n    updateWrapper (params) {\n        this.name(params.name);\n        this.boundBox(params.config.dimensions);\n        this.setParams(params);\n        return this;\n    }\n\n    setParams (params) {\n        this.component = params.component;\n        this.params = params;\n        this.target(params.config.target);\n        this.position(TOP);\n        this.className(params.config.className);\n    }\n}\n","import { selectElement, getEvent } from 'muze-utils';\nimport MuzeComponent from './muze-chart-component';\nimport MatrixComponent from './matrix-component';\nimport { ROW_MATRIX_INDEX, COLUMN_MATRIX_INDEX } from '../../../../layout/src/enums/constants';\nimport { WHEEL_DELTA_MODIFIER } from '../../enums/constants';\n\n/**\n * Based on the type of scroll, it changes the scrollLeft/scrollTop property of the specific\n * elements based on the scroll distance provided\n *\n *\n */\nconst applyScrollAction = (elem, classPrefix, scollDistance, type) => {\n    selectElement(elem)\n                    .selectAll(`.${classPrefix}-grid`)\n                    .property(type, scollDistance);\n};\n\n/**\n * Applies the action of the scroll by actually scrolling the respective matrices based on the\n * type of scroll. It returns a function which has both the scroll methods available\n *\n * @return {Object} contains the horizontal and vertical scroll actions on the grid component\n */\nconst scrollActionApplier = (movement, context) => {\n    const classPrefix = context.params.config.classPrefix;\n\n    return {\n        horizontal: () => {\n            [0, 1, 2].forEach(e =>\n                applyScrollAction(`#${context.component[e][1].renderAt()}`, classPrefix, movement, 'scrollLeft'));\n        },\n        vertical: () => {\n            [0, 1, 2].forEach(e =>\n                applyScrollAction(`#${context.component[1][e].renderAt()}`, classPrefix, movement, 'scrollTop'));\n        }\n    };\n};\n\nexport default class GridComponent extends MuzeComponent {\n\n    constructor (params) {\n        super(params.name, params.config.dimensions, 0);\n        this.gridComponents = [];\n        this.setParams(params);\n    }\n\n    sanitizeGrid () {\n        let height = 0;\n        let width = 0;\n        const { viewMatricesInfo, layoutDimensions } = this.component.viewInfo();\n        const scrollInfo = this.component.scrollInfo();\n        const {\n            viewHeight,\n            viewWidth,\n            unitHeights,\n            unitWidths\n        } = layoutDimensions;\n\n        for (let i = 0; i < 3; i++) {\n            if (!(this.gridComponents.length && this.gridComponents[i] instanceof Array)) {\n                this.gridComponents[i] = [];\n            }\n            for (let j = 0; j < 3; j++) {\n                const matrixDim = {\n                    height: viewHeight[i],\n                    width: viewWidth[j],\n                    unitHeights,\n                    unitWidths\n                };\n                const matrix = viewMatricesInfo.matrices[`${ROW_MATRIX_INDEX[i]}`][j];\n                const matrixName = `${ROW_MATRIX_INDEX[i]}-${COLUMN_MATRIX_INDEX[j]}`;\n                const matrixConfig = {\n                    dimensions: matrixDim,\n                    border: layoutDimensions.border,\n                    classPrefix: this.params.config.classPrefix,\n                    scrollInfo,\n                    row: ROW_MATRIX_INDEX[i],\n                    column: j\n                };\n                if (this.gridComponents[i][j] instanceof MuzeComponent) {\n                    const { isFacet, showHeaders } = this.params.component.config();\n                    matrixConfig.isFacet = isFacet;\n                    matrixConfig.showHeaders = showHeaders;\n                    this.gridComponents[i][j].updateWrapper({\n                        name: matrixName,\n                        component: matrix,\n                        config: matrixConfig\n                    });\n                } else {\n                    const { isFacet, showHeaders } = this.params.component.config();\n                    matrixConfig.isFacet = isFacet;\n                    matrixConfig.showHeaders = showHeaders;\n                    const matrixWrapper = new MatrixComponent({\n                        name: matrixName,\n                        component: matrix,\n                        config: matrixConfig\n                    });\n                    this.gridComponents[i].push(matrixWrapper);\n                }\n                if (i === 0) {\n                    width += matrixDim.width;\n                }\n                if (j === 0) {\n                    height += matrixDim.height;\n                }\n            }\n        }\n        this.boundBox({ height, width });\n\n        this.component = this.gridComponents;\n        this.allComponents = this.gridComponents;\n    }\n\n    scrollBarManager (...manager) {\n        if (manager.length) {\n            this._scrollBarManager = manager[0];\n            return this;\n        }\n        return this._scrollBarManager;\n    }\n\n    /**\n     * Attaches a mousewheel listener to the center matrix, based on which the scrolling can occur.\n     * It uses the scroll component to change the position of the scroller, which ultimately scrolls the center matrix\n     *\n     *\n     * @return {GridComponent} Instance of the GridComponent\n     */\n    attachScrollListener () {\n        const scrollBarManager = this.scrollBarManager();\n        selectElement(`#${this.component[1][1].renderAt()}`)\n            .on('wheel', () => {\n                const event = getEvent();\n                const {\n                    wheelDeltaX,\n                    wheelDeltaY\n                } = event;\n\n                // Scrolling horizontally\n                if (wheelDeltaX !== 0 && Math.abs(wheelDeltaX) > Math.abs(wheelDeltaY)) {\n                    scrollBarManager.preventBrowserScroll('horizontal', event)\n                        .triggerScrollBarAction('horizontal', wheelDeltaX / WHEEL_DELTA_MODIFIER);\n                }\n\n                // Scrolling Vertically\n                if (wheelDeltaY !== 0 && Math.abs(wheelDeltaX) < Math.abs(wheelDeltaY)) {\n                    scrollBarManager.preventBrowserScroll('vertical', event)\n                        .triggerScrollBarAction('vertical', wheelDeltaY / WHEEL_DELTA_MODIFIER);\n                }\n            });\n        return this;\n    }\n\n    performScrollAction (direction, movedView) {\n        scrollActionApplier(movedView, this)[direction]();\n        return this;\n    }\n\n    getBoundBox () {\n        const { top, left } = this.component[0][0].boundBox();\n        const { height, width } = this.boundBox();\n\n        return {\n            top,\n            left,\n            height,\n            width\n        };\n    }\n\n    updateWrapper (params) {\n        this.name(params.name);\n        this.boundBox(params.config.dimensions);\n        this.setParams(params);\n        return this;\n    }\n\n    setParams (params) {\n        this.component = params.component;\n        this.params = params;\n        this.target(params.config.target);\n        this.className(params.config.className);\n        this.sanitizeGrid();\n        return this;\n    }\n\n    attachListener () {\n        this.attachScrollListener();\n        return this;\n    }\n}\n","export const SIDE_EFFECT_COMMON = 'common';\nexport const SIDE_EFFECT_INDIVIDUAL = 'individual';\nexport const TOOLTIP_CONSOLIDATED = 'consolidated';\nexport const TOOLTIP_FRAGMENTED = 'fragmented';\nexport const WHEEL_DELTA_MODIFIER = 30;\n","import { selectElement, makeElement, applyStyle } from 'muze-utils';\nimport MuzeComponent from './muze-chart-component';\nimport { incorrectMessageIcon } from './message-icon';\nimport { MESSAGE_CONFIG } from '../defaults';\n\nconst formatFontSize = (width, height) => {\n    const { baseFontLimit, upperFontLimit, baseSizeLimit, upperSizeLimit } = MESSAGE_CONFIG;\n    const fractionFont = (upperSizeLimit - baseSizeLimit) / (upperFontLimit - baseFontLimit);\n    let fontSize = upperFontLimit;\n    const dim = width < height && width !== 0 ? width : height;\n\n    if (dim === 0) {\n        fontSize = 0;\n    } else if (dim <= baseSizeLimit) {\n        fontSize = baseFontLimit;\n    } else if (dim > baseSizeLimit && dim < upperSizeLimit) {\n        fontSize = baseFontLimit + (upperSizeLimit - dim) / fractionFont;\n    }\n    return fontSize;\n};\n\nexport default class MessageComponent extends MuzeComponent {\n    constructor (params) {\n        super(params.name, params.config.dimensions, 0);\n        this.setParams(params);\n    }\n\n    render (container) {\n        const parent = selectElement(container);\n\n        const { config } = this.params;\n        const { className } = config.classPrefix;\n\n        const node = makeElement(parent, 'div', [1], className);\n        const { height, width } = config.dimensions;\n        const childHeight = height > MESSAGE_CONFIG.baseSizeLimit ? MESSAGE_CONFIG.fractionChild * height : 0;\n        const { message } = config;\n\n        applyStyle(node, { width: `${width}px`, height: `${height}px` });\n\n        const childNode = makeElement(node, 'div', [1], `${className}-child`);\n        const imageNode = makeElement(childNode, 'div', [1], `${className}-child-img`);\n        const messageNode = makeElement(childNode, 'div', [1], `${className}-child-message`);\n\n        applyStyle(childNode, { width, height: `${childHeight}px` });\n        applyStyle(imageNode, { width, height: `${childHeight * MESSAGE_CONFIG.fractionImage}px` });\n\n        imageNode.html(incorrectMessageIcon);\n\n        const textElement = makeElement(messageNode, 'text', [1]);\n        applyStyle(messageNode, { 'font-size': `${formatFontSize(width, height)}px` });\n\n        textElement.html(message);\n    }\n\n    draw (container) {\n        this.render(container || document.getElementById(this.renderAt()));\n    }\n\n    updateWrapper (params) {\n        this.name(params.name);\n        this.boundBox(params.config.dimensions);\n        this.setParams(params);\n        return this;\n    }\n\n    setParams (params) {\n        const { target, className } = params.config;\n        this.component = params.component;\n        this.params = params;\n        this.target(target);\n        this.className(className);\n        this.position(params.config.position);\n        return this;\n    }\n}\n","export const incorrectMessageIcon = `<svg width=\"215px\" height=\"199px\" viewBox=\"0 0 215 199\" \nversion=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\">\n<!-- Generator: Sketch 60.1 (88133) - https://sketch.com -->\n\n<title>Group 23</title>\n    <desc>Created with Sketch.</desc>\n    <defs>\n        <polygon id=\"path-1\" points=\"0.149161328 0.420711883 72.119 0.420711883 \n        72.119 71.9995421 0.149161328 71.9995421\"></polygon>\n        <polygon id=\"path-3\" points=\"0 0.08 186.190753 0.08 186.190753 88.592 0 88.592\"></polygon>\n    </defs>\n    <g id=\"Page-1\" stroke=\"none\" stroke-width=\"1\" fill=\"none\" fill-rule=\"evenodd\">\n        <g id=\"Group-23\" transform=\"translate(0.000000, -1.000000)\">\n            <g id=\"Group-3\" transform=\"translate(142.000000, 127.920000)\">\n                <mask id=\"mask-2\" fill=\"white\">\n                    <use xlink:href=\"#path-1\"></use>\n                </mask>\n                <g id=\"Clip-2\"></g>\n                <path d=\"M0.163,36.1555 C0.163,28.8495 0.126,21.5445 0.173,14.2395 \n                C0.226,6.1165 4.776,0.7895 12.76,0.6405 C28.362,0.3505 43.979,0.3335 \n                59.58,0.6735 C67.574,0.8475 72.079,6.2375 72.096,14.3735 C72.125,28.9835 \n                72.129,43.5935 72.094,58.2045 C72.074,66.4205 67.223,71.7225 58.955,71.8405 \n                C43.682,72.0565 28.4,72.0515 13.128,71.8315 C4.928,71.7135 0.221,66.4315 \n                0.172,58.0705 C0.129,50.7655 0.163,43.4605 0.163,36.1555\" id=\"Fill-1\" \n                fill=\"#8c8d8e\" mask=\"url(#mask-2)\"></path>\n            </g>\n            <g id=\"Group-6\" transform=\"translate(0.000000, 0.920000)\">\n                <mask id=\"mask-4\" fill=\"white\">\n                    <use xlink:href=\"#path-3\"></use>\n                </mask>\n                <g id=\"Clip-5\"></g>\n                <path d=\"M183.4677,4.615 C174.5697,3.72 165.6917,2.607 156.8037,1.597 C152.7477,1.136 \n                147.5417,-0.986 144.9347,0.755 C142.0737,2.664 143.7187,8.515 142.6187,12.488 C141.7057,\n                15.785 143.1607,16.531 146.0297,16.716 C149.3127,16.928 152.5717,17.483 156.6277,17.987 \n                C137.8927,32.589 119.9087,46.473 102.1267,60.61 C99.4257,62.757 98.2077,62.204 96.1947,\n                60.05 C85.5357,48.644 74.6947,37.409 64.0607,25.979 C61.8547,23.608 60.5757,23.002 57.8627,\n                25.586 C51.9777,31.188 45.6137,36.286 39.4547,41.6 C26.7597,52.553 14.0947,63.54 1.3487,\n                74.433 C-0.2963,75.838 -0.4833,76.732 1.0457,78.354 C4.1127,81.609 6.9717,85.061 10.0567,\n                88.592 C26.7507,74.17 43.3037,59.87 59.9757,45.469 C71.5287,57.708 82.9977,69.719 94.2677,\n                81.914 C96.5347,84.368 98.0097,84.604 100.6707,82.492 C116.3907,70.016 132.2397,57.704 \n                148.0587,45.353 C153.9727,40.736 159.9197,36.162 165.9517,31.491 C167.0647,36.458 163.2367,\n                42.055 165.8357,44.513 C168.4597,46.994 174.2387,46.065 178.6037,46.814 C180.5447,47.148 \n                181.1657,46.627 181.4047,44.671 C182.9067,32.336 184.5297,20.016 186.1377,7.696 C186.4127,\n                5.593 185.6327,4.833 183.4677,4.615\" id=\"Fill-4\" fill=\"#8c8d8e\" mask=\"url(#mask-4)\"></path>\n            </g>\n            <path d=\"M68.7436,89.5418 C63.2716,89.6988 57.7836,89.7768 52.3196,89.5178 C49.1866,89.3688 \n            48.3926,90.4028 48.4386,93.4328 C48.6076,104.5468 48.5056,115.6668 48.5056,126.7838 C48.5056,\n            138.0668 48.5916,149.3518 48.4436,160.6328 C48.4076,163.4118 49.1436,164.3578 52.0056,164.2518 \n            C57.8066,164.0398 63.6226,164.0938 69.4276,164.2338 C71.7586,164.2898 72.5516,163.6408 72.5416,\n            161.1938 C72.4536,138.4608 72.4326,115.7288 72.556775,92.9968 C72.5736,89.9318 71.3526,89.4668 \n            68.7436,89.5418\" id=\"Fill-7\" fill=\"#8c8d8e\"></path>\n            <path d=\"M144.3769,91.2962 C138.9019,91.4772 133.4019,91.5912 127.9409,91.2652 C124.4229,91.0562 \n            123.8999,92.4662 123.9449,95.5182 C124.1039,106.3102 124.0069,117.1072 124.0069,127.9012 C124.0079,\n            137.3672 124.0079,146.8332 124.0079,156.3002 C124.0079,164.4422 124.0079,164.3082 132.1549,\n            164.2632 C134.9749,164.2472 135.8559,163.4702 135.7569,160.6292 C135.5449,154.6582 135.6479,\n            148.6742 135.6999,142.6952 C135.7679,135.0662 138.3559,128.6922 145.3599,124.8822 C147.2959,\n            123.8292 147.7519,122.5322 147.7349,120.5452 C147.6649,111.9092 147.6109,103.2722 147.7569,\n            94.6382 C147.8009,92.0132 146.9799,91.2102 144.3769,91.2962\" id=\"Fill-9\" fill=\"#8c8d8e\"></path>\n            <path d=\"M110.3095,117.074 C110.3265,114.616 109.4485,113.950948 107.1345,113.998 C101.3365,\n            114.117 95.5265,114.204 89.7365,113.96 C86.7245,113.833 86.2185,115.041 86.2735,117.672 C86.4225,\n            124.795 86.3255,131.923 86.3245,139.049 C86.3245,146.34 86.4355,153.634 86.2645,160.922 C86.2035,\n            163.546 86.9745,164.336 89.6015,164.249 C95.3955,164.057 101.2015,164.133 107.0005,164.217 C109.1175,\n            164.247 110.3385,163.986 110.3185,161.321 C110.2015,146.573 110.2115,131.823 110.3095,117.074\" \n            id=\"Fill-11\" fill=\"#8c8d8e\"></path>\n            <path d=\"M31.1347,116.1951 C25.3367,116.4001 19.5237,116.3591 13.7217,116.2131 C11.2637,116.1521 \n            10.6717,117.0871 10.6857,119.3921 C10.7747,133.3221 10.7877,147.2541 10.6847,161.1851 C10.6667,163.6601 \n            11.5637,164.2771 13.8597,164.2291 C19.6617,164.1061 25.4757,164.0161 31.2717,164.2601 C34.2827,164.3871 \n            34.7937,163.2071 34.7267,160.5531 C34.5597,153.9241 34.6717,147.2871 34.6717,140.6531 C34.6717,133.6881 \n            34.5377,126.7181 34.7367,119.7581 C34.8177,116.9131 33.9317,116.0961 31.1347,116.1951\" id=\"Fill-13\" \n            fill=\"#8c8d8e\"></path>\n            <path d=\"M182.5937,62.2083 C175.8157,62.4493 169.0307,62.4883 162.2477,62.6073 L162.2467,62.6073 \n            C161.0087,63.1583 161.4327,64.2813 161.4317,65.1903 C161.4087,83.2963 161.4087,101.4033 161.4347,\n            119.5103 C161.4357,120.4033 160.9787,121.5473 162.2837,122.0423 C169.0747,122.1203 175.8697,122.1063 \n            182.6567,122.3223 C185.0277,122.3973 185.2947,121.3543 185.2887,119.3853 C185.2347,101.3103 \n            185.2377,83.2343 185.290773,65.1593 C185.2967,63.1633 184.9367,62.1253 182.5937,62.2083\" \n            id=\"Fill-15\" fill=\"#8c8d8e\"></path>\n            <path d=\"M178.6747,133.095 C186.1527,133.096 193.6297,133.02 201.1057,133.12 C206.6837,133.197 \n            209.9207,136.107 209.9837,141.656 C210.1537,156.606 210.1427,171.56 209.9877,186.51 C209.9317,\n            192.015 206.6527,195.159 201.1977,195.197 C185.9127,195.303 170.6257,195.306 155.3397,195.216 \n            C149.4057,195.182 146.3497,192.185 146.3107,186.367 C146.2127,171.582 146.2197,156.795 146.3047,\n            142.01 C146.3387,136.149 149.3577,133.194 155.2477,133.118 C163.0557,133.019 170.8657,133.094 \n            178.6747,133.095\" id=\"Fill-17\" fill=\"#fbc0af\"></path>\n            <path d=\"M186.1288,150.0833 C184.6798,156.9563 182.9098,165.3223 181.1508,173.6913 C180.7868,\n            175.4293 179.7388,176.1553 177.9798,176.1143 C176.1458,176.0713 175.3328,175.0033 174.9608,\n            173.4093 C173.0558,165.2363 171.0608,157.0593 170.2818,148.6993 C169.8138,143.6663 173.1078,\n            140.3553 177.7748,140.2323 C182.7748,140.1013 186.1058,143.4083 186.1288,150.0833\" \n            id=\"Fill-19\" fill=\"#FDFDFC\"></path>\n            <path d=\"M177.7314,188.0823 C175.7614,187.9153 174.3044,186.6683 174.3184,184.3533 C174.3334,\n            182.0403 175.8334,180.6253 178.1304,180.6793 C180.3624,180.7313 182.0564,182.0443 181.9314,\n            184.4023 C181.8194,186.5383 180.5864,188.1203 177.7314,188.0823\" id=\"Fill-21\" fill=\"#FCF6F3\"></path>\n        </g>\n    </g>\n    </svg>`;\n","import {\n    TITLE,\n    SUB_TITLE,\n    LEGEND, VERTICAL,\n    HORIZONTAL,\n    WIDTH,\n    HEIGHT,\n    TOP,\n    LEFT,\n    RIGHT,\n    MESSAGE,\n    GRID,\n    ERROR_MESSAGE,\n    HORIZONTAL_CENTER\n} from '../constants';\nimport HeaderComponent from './components/headerComponent';\nimport LegendComponent from './components/legendComponent';\nimport ScrollComponent from './components/scroll-component';\nimport GridComponent from './components/grid-component';\nimport MessageComponent from './components/message-component';\nimport { TITLE_CONFIG, SUB_TITLE_CONFIG, CANVAS, MESSAGE_CONFIG } from './defaults';\nimport { ROW_MATRIX_INDEX, COLUMN_MATRIX_INDEX, CENTER } from '../../../layout/src/enums/constants';\n\n// Mapping between types of headers and their required configs for wrapper creation\nconst headerMap = {\n    title: {\n        headerCell: 'titleCell',\n        configType: TITLE_CONFIG\n    },\n    subtitle: {\n        headerCell: 'subtitleCell',\n        configType: SUB_TITLE_CONFIG\n    }\n};\n\n// Mapping of header alignment values\nconst headerAlignmentMap = {\n    [LEFT]: LEFT,\n    [RIGHT]: RIGHT,\n    [CENTER]: HORIZONTAL_CENTER\n};\n\n/**\n * returns if data is Valid\n *\n *\n * @param {Object} params object where data has to be checked for validity\n * @return {Boolean} Returns true if all of the params are valid\n */\nconst checkParamsValidation = params => Object.keys(params).every((param => params[param]));\n\n/**\n * returns if message Component is needed or not\n *\n *\n * @param {Object} renderDetails Extra details required for rendering the headers\n * @return {Boolean} Returns if grid is present\n */\nconst isGridPresent = (renderDetails) => {\n    const { rows, columns, values } = renderDetails.components;\n    return checkParamsValidation({ rows, columns, values });\n};\n\n/**\n * Creates the wrapper for the header, i.e., title and subtitle to be used in the tree layout\n *\n *\n * @param {string} headerType type of header: title/subtite\n * @param {LayoutManager} layoutManager instance of Layout Manager which manages the layouting of the components\n * @param {Object} renderDetails Extra details required for rendering the headers\n * @return {Instance} Returns the respective wrappers\n */\nconst createHeaderWrapper = (headerType, layoutManager, renderDetails) => {\n    let wrapper = null;\n\n    const { components, layoutConfig } = renderDetails;\n    const { headerCell, configType } = headerMap[headerType];\n    const target = { target: CANVAS };\n\n    if (components.headers && components.headers[headerCell]) {\n        let headerConfig = layoutConfig[headerType];\n        const header = components.headers[headerCell];\n\n        headerConfig = Object.assign({}, headerConfig, {\n            classPrefix: layoutConfig.classPrefix,\n            ...target,\n            alignWith: `${ROW_MATRIX_INDEX[0]}-${COLUMN_MATRIX_INDEX[1]}`,\n            alignment: headerAlignmentMap[headerConfig.align],\n            className: configType.className\n        });\n\n        const wrapperParams = {\n            name: headerType,\n            component: header,\n            config: headerConfig\n        };\n\n        const existingComponent = layoutManager.getComponent(headerType);\n        if (existingComponent) {\n            wrapper = existingComponent\n                        .updateWrapper(wrapperParams);\n        } else {\n            wrapper = new HeaderComponent(wrapperParams);\n        }\n    }\n    return wrapper;\n};\n\n/**\n * Creates the wrapper for the grid layout to be used in the tree layout\n *\n *\n * @param {LayoutManager} layoutManager instance of Layout Manager which manages the layouting of the components\n * @param {GridLayout} canvas canvas instance\n * @return {Instance} Returns the respective wrappers\n */\nconst createMessageWrapper = (layoutManager, renderDetails, renderGrid) => {\n    const { components, measurement } = renderDetails;\n    const headerValues = Object.values(components.headers);\n    let sum = 0;\n    let messageWrapper = null;\n\n    for (const val of headerValues) {\n        sum += val.logicalSpace().height;\n    }\n\n    if (!renderGrid) {\n        const defaultDimensions = { height: measurement.canvasHeight - sum, width: measurement.canvasWidth };\n        const gridComponent = layoutManager.getComponent(GRID);\n        const { height, width } = (gridComponent && gridComponent.getBoundBox()) || defaultDimensions;\n        const target = { target: CANVAS };\n        const config = {\n            ...target,\n            dimensions: { height, width },\n            message: ERROR_MESSAGE,\n            classPrefix: MESSAGE_CONFIG,\n            position: TOP\n        };\n        const wrapperParams = {\n            name: MESSAGE,\n            component: null,\n            config\n        };\n        const existingComponent = layoutManager.getComponent(MESSAGE);\n\n        if (existingComponent) {\n            messageWrapper = existingComponent.updateWrapper(wrapperParams);\n        } else {\n            messageWrapper = new MessageComponent(wrapperParams);\n        }\n        return messageWrapper;\n    }\n    return null;\n};\n\n// Mapping between types of scrollBars and their required configs for wrapper creation\nconst scrollBarMap = config => ({\n    vertical: {\n        componentName: 'verticalScrollBar',\n        width: 'thickness',\n        height: 'layoutBasedMeasure',\n        layoutBasedMeasure: HEIGHT,\n        viewMeasure: 'viewHeight',\n        rowAlign: 1,\n        colAlign: config.align === 'right' ? 2 : 0,\n        position: config.align,\n        alignment: TOP\n    },\n    horizontal: {\n        componentName: 'horizontalScrollBar',\n        width: 'layoutBasedMeasure',\n        layoutBasedMeasure: WIDTH,\n        viewMeasure: 'viewWidth',\n        height: 'thickness',\n        rowAlign: config.align === 'top' ? 0 : 2,\n        colAlign: 1,\n        position: config.align,\n        alignment: LEFT\n    }\n});\n\n/**\n * Creates the wrapper for the scroller, i.e., horizontal and vertical to be used in the tree layout\n *\n *\n * @param {string} scrollBarType type of scrollbar: horizontal/vertical\n * @param {LayoutManager} layoutManager instance of Layout Manager which manages the layouting of the components\n * @param {Object} renderDetails Extra details required for rendering the headers\n * @param {GridLayout} grid Instance of the grid layout\n * @return {Instance} Returns the respective wrappers\n */\nconst createScrollBarWrapper = (scrollBarType, layoutManager, renderDetails, grid, renderGrid) => {\n    if (renderGrid) {\n        let scrollBarWrapper = null;\n        const { layoutConfig } = renderDetails;\n        const target = { target: CANVAS };\n        const { scrollBar } = layoutConfig;\n        const { layoutDimensions } = grid.viewInfo();\n        const {\n            actualCenterMeasures,\n            unitHeights,\n            unitWidths\n        } = layoutDimensions;\n        const {\n            componentName, layoutBasedMeasure, width, height, rowAlign, colAlign,\n            viewMeasure, position, alignment\n        } = scrollBarMap(scrollBar[scrollBarType])[scrollBarType];\n        const dimensions = {\n            thickness: scrollBar.thickness,\n            layoutBasedMeasure: layoutDimensions[viewMeasure][1]\n        };\n        const isScroll = grid.scrollInfo()[scrollBarType];\n        const totalLength = actualCenterMeasures[layoutBasedMeasure];\n        const viewLength = layoutDimensions[viewMeasure][1];\n\n        const scrollConfig = Object.assign({}, {\n            classPrefix: layoutConfig.classPrefix,\n            ...target,\n            scrollBarComponentConfig: {\n                ...scrollBar,\n                classPrefix: layoutConfig.classPrefix\n            },\n\n            type: scrollBarType,\n            alignWith: `${ROW_MATRIX_INDEX[rowAlign]}-${COLUMN_MATRIX_INDEX[colAlign]}`,\n            alignment,\n            position\n        });\n\n        const wrapperParams = {\n            name: componentName,\n            config: scrollConfig,\n            dimensions: {\n                width: dimensions[width],\n                height: dimensions[height],\n                totalLength,\n                viewLength,\n                unitHeights,\n                unitWidths\n            }\n        };\n\n        const existingComponent = layoutManager.getComponent(componentName);\n\n        if (!isScroll) {\n            existingComponent && existingComponent.remove();\n            return null;\n        }\n\n        if (existingComponent) {\n            scrollBarWrapper = existingComponent\n                                    .updateWrapper(wrapperParams);\n        } else {\n            scrollBarWrapper = new ScrollComponent(wrapperParams);\n        }\n\n        return scrollBarWrapper;\n    }\n    return null;\n};\n\n/**\n * Creates the wrapper for the legend to be used in the tree layout\n *\n *\n * @param {LayoutManager} layoutManager instance of Layout Manager which manages the layouting of the components\n * @param {Object} renderDetails Extra details required for rendering the headers\n * @return {Instance} Returns the respective wrappers\n */\nconst createLegendWrapper = (layoutManager, renderDetails, renderGrid) => {\n    if (renderGrid) {\n        let legendWrapper = null;\n        const { components, layoutConfig, measurement } = renderDetails;\n        const target = { target: CANVAS };\n\n        if (components.legends && components.legends.length) {\n            const legendConfig = { ...layoutConfig.legend, ...target, measurement };\n            const wrapperParams = {\n                name: LEGEND,\n                component: components.legends,\n                config: legendConfig\n            };\n\n            const existingComponent = layoutManager.getComponent(LEGEND);\n\n            if (existingComponent) {\n                legendWrapper = existingComponent\n                        .updateWrapper(wrapperParams);\n            } else {\n                legendWrapper = new LegendComponent(wrapperParams);\n            }\n        }\n        return legendWrapper;\n    }\n    return null;\n};\n\n/**\n * Creates the wrapper for the grid layout to be used in the tree layout\n *\n *\n * @param {LayoutManager} layoutManager instance of Layout Manager which manages the layouting of the components\n * @param {Object} renderDetails Extra details required for rendering the headers\n * @param {GridLayout} grid Instance of the grid layout\n * @return {Instance} Returns the respective wrappers\n */\nconst gridLayoutWrapper = (layoutManager, renderDetails, grid, renderGrid) => {\n    if (renderGrid) {\n        let gridWrapper = null;\n        const target = { target: CANVAS };\n        const { layoutConfig } = renderDetails;\n\n        const config = {\n            ...target,\n            pagination: layoutConfig.pagination,\n            classPrefix: layoutConfig.classPrefix,\n            dimensions: { height: 0, width: 0 }\n        };\n        const wrapperParams = {\n            name: GRID,\n            component: grid,\n            config\n        };\n        const existingComponent = layoutManager.getComponent(GRID);\n        if (existingComponent) {\n            gridWrapper = existingComponent\n                        .updateWrapper(wrapperParams);\n        } else {\n            gridWrapper = new GridComponent(wrapperParams);\n        }\n        return gridWrapper;\n    }\n    return null;\n};\n/**\n * Responsible for providing the wrapper creators for every component in Muze.\n * This function, when called, returns the set of components and their respective wrappers.\n *\n *\n *\n * @param {LayoutManager} layoutManager instance of Layout Manager which manages the layouting of the components\n * @param {GridLayout} grid Instance of the grid layout\n * @param {Object} renderDetails Extra details required for rendering the headers\n * @return {Instance} Returns the respective wrappers for each component\n */\nexport const componentWrapperMaker = (canvas, grid, renderDetails) => {\n    const layoutManager = canvas._layoutManager;\n    const renderGrid = isGridPresent(renderDetails);\n    return {\n        title: createHeaderWrapper(TITLE, layoutManager, renderDetails),\n        subtitle: createHeaderWrapper(SUB_TITLE, layoutManager, renderDetails),\n        message: createMessageWrapper(layoutManager, renderDetails, renderGrid),\n        legend: createLegendWrapper(layoutManager, renderDetails, renderGrid),\n        grid: gridLayoutWrapper(layoutManager, renderDetails, grid, renderGrid),\n        verticalScrollBar: createScrollBarWrapper(VERTICAL, layoutManager, renderDetails, grid, renderGrid),\n        horizontalScrollBar: createScrollBarWrapper(HORIZONTAL, layoutManager, renderDetails, grid, renderGrid)\n    };\n};\n","export class ScrollManager {\n\n    constructor () {\n        this._scrollBarComponents = {};\n        this._attachedComponents = {};\n    }\n\n    scrollBarComponents (...sbc) {\n        if (sbc.length) {\n            this._scrollBarComponents = sbc[0];\n            return this;\n        }\n        return this._scrollBarComponents;\n    }\n\n    attachedComponents (...abc) {\n        if (abc.length) {\n            this._attachedComponents = abc[0];\n            return this;\n        }\n        return this._attachedComponents;\n    }\n\n    preventBrowserScroll (type, event) {\n        if (this.scrollBarComponents()[type]) {\n        // Prevent default behaviour and stop propagating\n            event.preventDefault();\n            event.stopPropagation();\n        }\n        return this;\n    }\n\n    performAttachedScrollFunction (type, movedViewLength) {\n        Object.values(this.attachedComponents()).forEach((e) => {\n            e.performScrollAction(type, movedViewLength);\n        });\n        return this;\n    }\n\n    triggerScrollBarAction (type, delta) {\n        this.scrollBarComponents()[type] && this.scrollBarComponents()[type].scrollDeltaTo(delta);\n        return this;\n    }\n}\n","import { mergeRecursive } from 'muze-utils';\nimport { arrangeComponents } from './component-resolver';\nimport { createHeaders } from './title-maker';\nimport { createLegend, getLegendSpace } from './legend-maker';\nimport { componentWrapperMaker } from './component-wrapper-maker';\nimport {\n    TOP,\n    BOTTOM,\n    LEFT,\n    RIGHT,\n    TITLE,\n    SUB_TITLE,\n    LEGEND,\n    VERTICAL_SCROLL_BAR,\n    HORIZONTAL_SCROLL_BAR,\n    GRID,\n    MESSAGE\n} from '../constants';\nimport { ScrollManager } from './scroll-manager';\n\n/**\n *\n *\n * @param {*} context\n *\n */\nexport const prepareLayout = (layout, renderDetails) => {\n    const { components, layoutConfig, measurement } = renderDetails;\n    const {\n        rows,\n        columns,\n        values,\n        cornerMatrices\n    } = components;\n    const {\n        topLeft,\n        topRight,\n        bottomLeft,\n        bottomRight\n    } = cornerMatrices;\n    if (rows && columns) {\n        layout.measurement(measurement)\n                        .config(layoutConfig)\n                        .matrices({\n                            top: [topLeft, columns[0], topRight],\n                            center: [rows[0], values, rows[1]],\n                            bottom: [bottomLeft, columns[1], bottomRight]\n                        })\n                        .triggerReflow();\n    }\n};\n\n/**\n *\n *\n * @param {*} context\n * @param {*} mount\n *\n */\nexport const getRenderDetails = (context, mount) => {\n    let layoutConfig = mergeRecursive({}, context.config());\n    // Get height width of the mount point\n    let { height, width } = mount.getBoundingClientRect();\n    const heightAttr = context.height();\n    const widthAttr = context.width();\n    const visGroup = context.composition().visualGroup;\n    const {\n        isColumnSizeEqual,\n        isRowSizeEqual,\n        priority,\n        rows,\n        columns,\n        values\n    } = visGroup.placeholderInfo();\n    const {\n        minWidth,\n        minHeight,\n        classPrefix,\n        showHeaders,\n        legend,\n        pagination,\n        scrollBar\n    } = context.config();\n\n    // Get title configuration\n    const titleConfig = context.title()[1];\n     // Get subtitle configuration\n    const subtitleConfig = context.subtitle()[1];\n    // Get legend position\n    const legendPosition = legend.position;\n    // Arrange components according to config\n    const layoutArrangement = arrangeComponents(context);\n\n    height = Math.floor(height);\n    width = Math.floor(width);\n\n    const availableHeightForCanvas = Math.max(heightAttr > 0 ? heightAttr : height, minHeight);\n    const availableWidthForCanvas = Math.max(widthAttr > 0 ? widthAttr : width, minWidth);\n\n    // Create headers and determine header height\n    const { headers, headerHeight } = createHeaders(context, availableHeightForCanvas, availableWidthForCanvas);\n\n    // Create legends and determine legend space\n    const legends = createLegend(context, headerHeight, availableHeightForCanvas, availableWidthForCanvas);\n    context._composition.legend = {};\n    legends.forEach((e) => {\n        context._composition.legend[e.scaleType] = e.legend;\n    });\n\n    const legendSpace = getLegendSpace(legends, legend, availableHeightForCanvas, availableWidthForCanvas);\n    const legendWidth = (legendPosition === LEFT || legendPosition === RIGHT) ? legendSpace.width : 0;\n    const legendHeight = (legendPosition === TOP || legendPosition === BOTTOM) ? legendSpace.height : 0;\n\n    // Set components for layouting\n    const components = {\n        headers,\n        legends,\n        canvases: [context],\n        rows,\n        columns,\n        values,\n        cornerMatrices: visGroup.cornerMatrices()\n    };\n\n    const measurement = {\n        mountSpace: {\n            height,\n            width\n        },\n        headerHeight,\n        legendSpace,\n        canvasWidth: availableWidthForCanvas,\n        canvasHeight: availableHeightForCanvas,\n        width: availableWidthForCanvas - legendWidth,\n        height: availableHeightForCanvas - headerHeight - legendHeight,\n        minUnitHeight: context.minUnitHeight(),\n        minUnitWidth: context.minUnitWidth()\n    };\n    layoutConfig = mergeRecursive(layoutConfig, {\n        classPrefix,\n        showHeaders,\n        border: mergeRecursive(visGroup.metaData().border, context.config().border),\n        layoutArrangement,\n        legend,\n        buffer: scrollBar.thickness,\n        pagination,\n        title: titleConfig,\n        subtitle: subtitleConfig,\n        isColumnSizeEqual,\n        isRowSizeEqual,\n        mount,\n        priority\n    });\n    return {\n        layoutConfig,\n        components,\n        measurement\n    };\n};\n\nconst componentIndexes = {\n    title: 0,\n    subtitle: 1,\n    legend: 2,\n    verticalScrollBar: 3,\n    horizontalScrollBar: 4,\n    grid: 5,\n    message: 6\n};\n\nconst componentNames = {\n    0: TITLE,\n    1: SUB_TITLE,\n    2: LEGEND,\n    3: VERTICAL_SCROLL_BAR,\n    4: HORIZONTAL_SCROLL_BAR,\n    5: GRID,\n    6: MESSAGE\n};\n\nconst attachListeners = (componentWrappers) => {\n    componentWrappers.forEach((componentWrapper) => {\n        if (componentWrapper) {\n            componentWrapper.attachListener();\n        }\n    });\n};\n\n/**\n * Responsible for creating a scroll manager that manages interactions between the grid\n * component and the scroll bar components\n *\n * @param {Array} componentWrappers Contains the wrappers for all the components\n * @param {Canvas} canvas Instance of the current canvas\n * @return {Array} Positions of units either horizontal or vertical\n */\nconst createScrollManager = (componentWrappers, canvas) => {\n    const {\n        horizontalScrollBar,\n        verticalScrollBar,\n        grid\n    } = componentIndexes;\n\n    const horizontalScrollWrapper = componentWrappers[horizontalScrollBar];\n    const verticalScrollWrapper = componentWrappers[verticalScrollBar];\n    const gridWrapper = componentWrappers[grid];\n    const scrollBarManager = new ScrollManager();\n    const scrollBarComponents = {};\n\n    verticalScrollWrapper && (scrollBarComponents.vertical = verticalScrollWrapper);\n    horizontalScrollWrapper && (scrollBarComponents.horizontal = horizontalScrollWrapper);\n\n    scrollBarManager\n                    .scrollBarComponents(scrollBarComponents)\n                    .attachedComponents({\n                        grid: gridWrapper\n                    });\n    canvas.composition().hScrollBar = horizontalScrollWrapper;\n    canvas.composition().vScrollBar = verticalScrollWrapper;\n\n    [horizontalScrollWrapper, verticalScrollWrapper].forEach((wrapper) => {\n        wrapper && wrapper.manager(scrollBarManager);\n    });\n\n    gridWrapper.scrollBarManager(scrollBarManager);\n};\n\nexport const renderLayout = (canvas, renderDetails) => {\n    const layoutManager = canvas._layoutManager;\n    const gridLayout = canvas.layout();\n    const {\n\n        grid\n    } = componentIndexes;\n\n    // Get the component wrappers\n    const compWrappers = componentWrapperMaker(canvas, gridLayout, renderDetails);\n    const componentWrappers = Object.keys(componentIndexes).map(e => compWrappers[e]);\n    const gridWrapper = componentWrappers[grid];\n    if (gridWrapper) {\n        createScrollManager(componentWrappers, canvas);\n    }\n\n    componentWrappers.forEach((componentWrapper, index) => {\n        if (!componentWrapper) {\n            const deleteElementName = componentNames[index];\n            layoutManager.removeComponent(deleteElementName);\n        }\n    });\n    layoutManager.registerComponents(componentWrappers).compute();\n    attachListeners(componentWrappers);\n};\n","import { isSimpleObject, ReservedFields, FieldType } from 'muze-utils';\nimport { getSideEffects, BEHAVIOURS } from '@chartshq/muze-firebolt';\nimport { PSEUDO_SELECT } from '@chartshq/visual-unit/src/enums/behaviours';\n\nexport const addFacetDataAndMeasureNames = (data, facetData, measureNames) => {\n    if (data === null) {\n        return data;\n    }\n\n    const facets = Object.keys(facetData);\n    const facetVals = Object.values(facetData);\n\n    if (isSimpleObject(data)) {\n        return Object.assign({}, Object.keys(facetData).reduce((acc, v) => {\n            acc[v] = [facetData[v]];\n            return acc;\n        }, {}), data, {\n            [ReservedFields.MEASURE_NAMES]: measureNames\n        });\n    }\n    const criteriaFields = data[0];\n    const hasMeasureNameField = criteriaFields.find(field => field === ReservedFields.MEASURE_NAMES);\n    const fieldsWithFacets = [...facets, ...criteriaFields,\n        ...(hasMeasureNameField ? [] : [ReservedFields.MEASURE_NAMES])];\n\n    const dataWithFacets = [\n        fieldsWithFacets\n    ];\n\n    for (let i = 1, len = data.length; i < len; i++) {\n        let measureNameArr = [];\n        if (!hasMeasureNameField && measureNames) {\n            measureNameArr = measureNames;\n        }\n        const row = [...facetVals, ...data[i], ...measureNameArr];\n        dataWithFacets.push(row);\n    }\n    return dataWithFacets;\n};\n\nexport const propagateValues = (instance, action, config = {}) => {\n    const { payload, identifiers, sourceUnitId, sourceCanvasId, propagationDataSource } = config;\n    const dataModel = propagationDataSource;\n    const sideEfffects = instance._sideEffectDefinitions;\n    const behaviourEffectMap = instance._behaviourEffectMap;\n    const propagationBehaviourMap = instance._propagationBehaviourMap;\n    const propagationBehaviour = propagationBehaviourMap[action] || action;\n\n    payload.sourceUnit = sourceUnitId;\n    payload.action = action;\n    payload.sourceCanvas = sourceCanvasId;\n\n    const groupId = sourceCanvasId;\n\n    const filterFn = (entry, propagationConf) => {\n        const effects = behaviourEffectMap[entry.config.action];\n        const mutates = entry.config.groupId ?\n            (effects ? effects.some(d => sideEfffects[d.name || d].mutates()) : false) : true;\n        return entry.config.groupId !== propagationConf.groupId && mutates;\n    };\n\n    const sourceBehaviour = instance._actions.behavioural[action];\n    let isMutableAction = sourceBehaviour ? sourceBehaviour.constructor.mutates() : false;\n    const propConfig = {\n        payload,\n        action,\n        criteria: identifiers,\n        isMutableAction,\n        groupId,\n        sourceId: config.sourceId,\n        filterFn,\n        enabled: (propConf, firebolt) => (action !== propagationBehaviour ?\n            propConf.payload.sourceCanvas === firebolt.sourceCanvas() : true)\n    };\n\n    dataModel.propagate(identifiers, propConfig, true);\n\n    if (action !== propagationBehaviour) {\n        const behaviourInstance = instance._actions.behavioural[propagationBehaviour];\n        isMutableAction = behaviourInstance ? behaviourInstance.constructor.mutates() : false;\n\n        dataModel.propagate(identifiers, Object.assign({}, propConfig, {\n            isMutableAction,\n            applyOnSource: false,\n            action: propagationBehaviour,\n            sourceId: isMutableAction ? groupId : sourceUnitId,\n            enabled: (propConf, firebolt) => propConf.payload.sourceCanvas !== firebolt.sourceCanvas()\n        }), true, {\n            filterImmutableAction: (actionInf, propInf) => actionInf.groupId !== propInf.groupId\n        });\n    }\n};\n\nconst isDimension = fields => fields.some(field => field.type() === FieldType.DIMENSION);\n\nexport const isCrosstab = (fields) => {\n    const { rowFacets, colFacets, rowProjections, colProjections } = fields;\n    if (rowFacets.length || colFacets.length) {\n        return true;\n    }\n    const colProj = colProjections.flat();\n    const rowProj = rowProjections.flat();\n\n    if ((isDimension(colProj) || isDimension(rowProj)) && (colProj.length > 1 || rowProj.length > 1)) {\n        return true;\n    }\n    return false;\n};\n\nexport const addSelectedMeasuresInPayload = (firebolt, unit, payload) => {\n    const groupFields = firebolt.context.composition().visualGroup.resolver().getAllFields();\n    if (isCrosstab(groupFields)) {\n        const { x, y } = unit.fields();\n        let measureFields;\n\n        if (x.length && y.length) {\n            if (x[0].type() === FieldType.MEASURE) {\n                measureFields = [`${x[0]}`];\n            } else if (y[0].type() === FieldType.MEASURE) {\n                measureFields = [`${y[0]}`];\n            }\n            payload.selectedMeasures = measureFields;\n        }\n    }\n};\n\nexport const dispatchBehaviours = (firebolt, { payload, unit, behaviours }) => {\n    behaviours.forEach((action) => {\n        const actions = firebolt._actions.behavioural;\n        payload.criteria = addFacetDataAndMeasureNames(payload.criteria, unit.facetFieldsMap(),\n            unit.layers().map(layer => Object.keys(layer.data().getFieldspace().getMeasure())));\n\n        addSelectedMeasuresInPayload(firebolt, unit, payload);\n        payload.sourceCanvas = firebolt.sourceCanvas();\n        firebolt.dispatchBehaviour(action, payload, {\n            propagate: false,\n            unit\n        });\n\n        const identifiers = actions[action].propagationIdentifiers();\n\n        firebolt.propagate(action, payload, identifiers, {\n            sideEffects: getSideEffects(action, firebolt._behaviourEffectMap),\n            sourceUnitId: unit.id(),\n            sourceId: firebolt.id(),\n            propagationDataSource: firebolt.getPropagationSource()\n        });\n    });\n};\n\nexport const resetSelectAction = (firebolt, { unit, payload, behaviours }) => {\n    if (behaviours[0] === BEHAVIOURS.BRUSH && payload.dragging && payload.dragDiff < 5) {\n        dispatchBehaviours(firebolt, {\n            behaviours: [BEHAVIOURS.SELECT],\n            payload: {\n                criteria: null\n            },\n            unit\n        });\n    }\n};\n\nexport const attachBehaviours = (group) => {\n    const allFields = group.resolver().getAllFields();\n    const valueMatrix = group.matrixInstance().value;\n    const crosstab = isCrosstab(allFields);\n\n    valueMatrix.each((cell) => {\n        const unit = cell.valueOf();\n        const firebolt = unit.firebolt();\n        const behaviours = crosstab ? [PSEUDO_SELECT] : [];\n        firebolt._connectedBehaviours[BEHAVIOURS.SELECT] = behaviours;\n    });\n};\n","import {\n    FieldType,\n    mergeRecursive,\n    CommonProps,\n    ReservedFields\n} from 'muze-utils';\nimport { Firebolt, getSideEffects, SpawnableSideEffect } from '@chartshq/muze-firebolt';\nimport { createMapByDimensions } from '@chartshq/visual-unit/src/firebolt/helper';\nimport {\n    payloadGenerator,\n    isSideEffectEnabled,\n    prepareSelectionSetMap\n} from '@chartshq/visual-unit';\nimport { TOOLTIP } from '@chartshq/muze-firebolt/src/enums/side-effects';\nimport { FRAGMENTED } from '@chartshq/muze-firebolt/src/enums/constants';\nimport { applyInteractionPolicy } from '../helper';\nimport {\n    propagateValues,\n    isCrosstab,\n    resetSelectAction,\n    dispatchBehaviours,\n    attachBehaviours\n} from './helper';\nimport { COMMON_INTERACTION } from '../../constants';\n\nconst setSideEffectConfig = (firebolt) => {\n    const tooltipSideEffect = firebolt.sideEffects().tooltip;\n    const allFields = firebolt.context.composition().visualGroup.resolver().getAllFields();\n\n    if (isCrosstab(allFields)) {\n        tooltipSideEffect.config({\n            selectionSummary: {\n                order: 1,\n                className: 'tooltip-content-container-selectionSummary-crosstab',\n                showMultipleMeasures: true\n            },\n            highlightSummary: {\n                order: 0,\n                className: 'tooltip-content-container-highlightSummary-crosstab'\n            }\n        });\n    } else {\n        tooltipSideEffect.config({\n            selectionSummary: {\n                order: 0,\n                className: 'tooltip-content-container-selectionSummary-default',\n                showMultipleMeasures: false\n            },\n            highlightSummary: {\n                order: 1,\n                className: 'tooltip-content-container-highlightSummary-default'\n            }\n        });\n    }\n};\n\nconst prepareSelectionSetData = (group, dataModel) => {\n    const valueMatrix = group.matrixInstance().value;\n    const fieldsConfig = dataModel.getFieldsConfig();\n    const dimensions = Object.values(fieldsConfig).filter(d => d.def.type === FieldType.DIMENSION);\n    const hasMeasures = Object.keys(dataModel.getFieldspace().getMeasure()).length;\n    const measureName = hasMeasures ? [ReservedFields.MEASURE_NAMES] : [];\n    const keys = {};\n    const dimensionsMap = {};\n    const groupDataMap = {};\n\n    dataModel.getData({ withUid: true }).data.forEach((row) => {\n        const uid = row[row.length - 1];\n        uid.values().reduce((acc, id) => {\n            acc[id] = row;\n            return acc;\n        }, groupDataMap);\n    });\n\n    valueMatrix.each((cell) => {\n        const unit = cell.source();\n        const dm = unit.cachedData()[0];\n        const layers = unit.layers();\n        const linkedRows = [];\n        const { uids: uidsArr } = dm.getData();\n        const uids = [];\n\n        uidsArr.forEach((uid) => {\n            const values = uid.values();\n            const id = values.find(idValue => groupDataMap[idValue]);\n            const linkedRow = groupDataMap[id];\n\n            if (linkedRow) {\n                linkedRows.push(linkedRow);\n                uids.push(linkedRow[linkedRow.length - 1]);\n            }\n        });\n\n        prepareSelectionSetMap({\n            data: linkedRows,\n            uids,\n            dimensions\n        }, layers, {\n            keys,\n            dimensionsMap\n        });\n    });\n\n    return {\n        keys,\n        dimensionsMap,\n        dimensions,\n        allFields: [...dimensions, ...measureName]\n    };\n};\n\nconst defaultCrossInteractionPolicy = {\n    behaviours: {\n        '*': (propagationPayload, firebolt) => {\n            const propagationCanvasAlias = propagationPayload.sourceCanvas;\n            const canvasAlias = firebolt.sourceCanvas();\n            return propagationCanvasAlias ? canvasAlias === propagationCanvasAlias : true;\n        }\n    },\n    sideEffects: {\n        '*': (propagationPayload, firebolt) => {\n            const propagationCanvasAlias = propagationPayload.sourceCanvas;\n            const canvasAlias = firebolt.sourceCanvas();\n            return propagationCanvasAlias ? canvasAlias === propagationCanvasAlias : true;\n        },\n        selectionBox: () => false\n    }\n};\n\n/**\n * This class is responsible for dispatching any behavioural action to all the visual units housed by the canvas.\n * It is created by {@link Canvas}. This class does not handle any physical actions. Physical actions get triggered\n * in {@link VisualUnit} which is managed by it's own firebolt instance. The firebolt instance of canvas only\n * propagates the action to all the visual units in it's composition.\n *\n * To get the firebolt instance of {@link Canvas}\n * ```\n *  const firebolt = canvas.firebolt();\n * ```\n *\n * @class GroupFireBolt\n * @public\n */\nexport default class GroupFireBolt extends Firebolt {\n    constructor (...params) {\n        super(...params);\n        this.payloadGenerators(payloadGenerator);\n        this._interactionPolicy = this.constructor.defaultInteractionPolicy();\n        this.crossInteractionPolicy(this.constructor.defaultCrossInteractionPolicy());\n        const throwback = this.context._throwback;\n        throwback.registerImmediateListener([CommonProps.MATRIX_CREATED], () => {\n            this.config(this.context.config().interaction);\n            applyInteractionPolicy(this);\n            const group = this.context.composition().visualGroup;\n            if (group) {\n                setSideEffectConfig(this);\n                this.createSelectionSet(group.groupedData());\n                group.getGroupByData().on('propagation', (data, config) => {\n                    this.handleDataModelPropagation(data, config);\n                });\n                // Dispatch pseudo select behaviour for highlighting measures with common dimensions in crosstab\n                attachBehaviours(group);\n            }\n        });\n    }\n\n    static defaultInteractionPolicy () {\n        return () => {};\n    }\n\n    static defaultCrossInteractionPolicy () {\n        return defaultCrossInteractionPolicy;\n    }\n\n    interactionPolicy (...policy) {\n        if (policy.length) {\n            this._interactionPolicy = policy[0] || this.constructor.defaultInteractionPolicy();\n            return this;\n        }\n        return this._interactionPolicy;\n    }\n\n    crossInteractionPolicy (...policy) {\n        if (policy.length) {\n            this._crossInteractionPolicy = mergeRecursive(mergeRecursive({},\n                this.constructor.defaultCrossInteractionPolicy()), policy[0] || {});\n\n            applyInteractionPolicy(this);\n            return this;\n        }\n        return this._crossInteractionPolicy;\n    }\n\n    handleDataModelPropagation (data, config) {\n        const group = this.context.composition().visualGroup;\n        const valueMatrix = group.matrixInstance().value;\n        const units = group.resolver().units();\n        const propagationData = data;\n        if (config.propagationSourceId === this.id()) {\n            return this;\n        }\n        // @todo refactor this code\n        const {\n            enabled: enabledFn,\n            sourceIdentifiers,\n            action,\n            payload: propPayload\n        } = config;\n        const { interaction: { behaviours: behaviourConfs = {} } } = this.context.config();\n        const mode = behaviourConfs[action];\n        if (mode !== COMMON_INTERACTION) {\n            return this;\n        }\n\n        const payloadFn = this.getPayloadGeneratorFor(action);\n        const payload = payloadFn(this, propagationData, config);\n\n        const behaviourPolicies = this._behaviourPolicies;\n        const filterFns = Object.values(behaviourPolicies[action] || behaviourPolicies['*'] || {});\n        let enabled = filterFns.every(fn => fn(propPayload || {}, this, {\n            sourceIdentifiers,\n            propagationData\n        }));\n\n        if (enabledFn) {\n            enabled = enabledFn(config, this) && enabled;\n        }\n\n        if (enabled) {\n            const { instance: unit = units[0][0] } =\n                valueMatrix.findPlaceHolderById(propPayload.sourceUnit) || {};\n            const propagationInf = {\n                propagate: false,\n                data: propagationData,\n                propPayload,\n                sourceIdentifiers,\n                sourceId: config.propagationSourceId,\n                isMutableAction: config.isMutableAction,\n                unit\n            };\n\n            this.dispatchBehaviour(action, payload, propagationInf);\n        }\n\n        return this;\n    }\n\n    registerSideEffects (sideEffects) {\n        for (const key in sideEffects) {\n            this._sideEffectDefinitions[sideEffects[key].formalName()] = sideEffects[key];\n        }\n        this.initializeSideEffects();\n\n        return this;\n    }\n\n    target () {\n        return 'visual-group';\n    }\n\n    mapActionsAndBehaviour () {\n        const unitMatrix = this.context.composition().visualGroup.matrixInstance().value;\n\n        unitMatrix.each((unit) => {\n            const firebolt = unit.source().firebolt();\n            firebolt.mapActionsAndBehaviour();\n        });\n\n        this.registerPhysicalActionHandlers();\n    }\n\n    registerPhysicalActionHandlers () {\n        const unitMatrix = this.context.composition().visualGroup.matrixInstance().value;\n\n        unitMatrix.each((cell) => {\n            const unit = cell.source();\n            const firebolt = unit.firebolt();\n\n            firebolt.onPhysicalAction('*', (event, payload) => {\n                this.handlePhysicalAction(event, payload, unit);\n            }, this.context.constructor.formalName());\n        });\n\n        return this;\n    }\n\n    handlePhysicalAction (event, payload, unit) {\n        const firebolt = unit.firebolt();\n        const { behaviours } = firebolt._actionBehaviourMap[event];\n        dispatchBehaviours(this, { behaviours, payload, unit });\n        // Reset select action when dragging is done. Remove this when brush and select will be unioned\n        resetSelectAction(this, { behaviours, payload, unit });\n    }\n\n    createSelectionSet (data) {\n        const group = this.context.composition().visualGroup;\n        const { keys, dimensions, dimensionsMap, allFields } = prepareSelectionSetData(group, data);\n        this._metaData = {\n            dimensionsMap,\n            dimensions,\n            allFields\n        };\n        super.createSelectionSet({ keys, fields: dimensions.map(d => d.def.name) });\n\n        this._dimsMapGetter = createMapByDimensions(this, this.data());\n\n        return this;\n    }\n\n    id () {\n        return this.context.alias();\n    }\n\n    shouldApplySideEffects (propInf) {\n        return propInf.applySideEffect !== false;\n    }\n\n    data (...params) {\n        const group = this.context.composition().visualGroup;\n\n        if (params.length) {\n            const model = params[0];\n            group.groupedData(model);\n            this.createSelectionSet(group.groupedData());\n            return this;\n        }\n\n        return group.getGroupByData();\n    }\n\n    resetData () {\n        const group = this.context.composition().visualGroup;\n        group.resetData();\n        this.createSelectionSet(group.groupedData());\n        return this;\n    }\n\n    getRangeFromIdentifiers ({ criteria, fields }) {\n        return fields.reduce((acc, v) => {\n            acc[v] = criteria[v];\n            return acc;\n        }, {});\n    }\n\n    propagate (behaviour, payload, identifiers, auxConfig = {}) {\n        propagateValues(this, behaviour, Object.assign({\n            payload,\n            identifiers,\n            propagationFields: this._propagationFields,\n            sourceId: this.id(),\n            sourceCanvasId: this.id(),\n            propagationDataSource: this.data()\n        }, auxConfig));\n    }\n\n    getPropagationSource () {\n        const group = this.context.composition().visualGroup;\n\n        return group._originalGroupedData;\n    }\n\n    sourceCanvas () {\n        return this.context.alias();\n    }\n\n    getApplicableSideEffects (sideEffects, payload, propagationInf) {\n        if (payload.sideEffects) {\n            return [{\n                effects: payload.sideEffects,\n                behaviours: [payload.action]\n            }];\n        }\n        const { mode } = this.context.config().interaction.tooltip;\n        propagationInf.propPayload = propagationInf.propPayload || payload;\n        sideEffects.forEach((d) => {\n            let mappedEffects = d.effects;\n            mappedEffects = mappedEffects.filter((se) => {\n                if (se.name === TOOLTIP && mode === FRAGMENTED) {\n                    return false;\n                }\n                return isSideEffectEnabled(this, { se, propagationInf });\n            });\n            d.effects = mappedEffects;\n        });\n        return sideEffects;\n    }\n\n    dispatchBehaviour (action, payload, propagationInf = {}) {\n        const group = this.context.composition().visualGroup;\n        const units = group.resolver().units();\n        const { unit = units[0][0] } = propagationInf;\n        const behaviourEffectMap = this._behaviourEffectMap;\n        const sideEffects = getSideEffects(action, behaviourEffectMap);\n        const sideEffectInstances = this.sideEffects();\n\n        sideEffects.forEach(({ effects }) => {\n            effects.forEach((effect) => {\n                const name = effect.name;\n                const inst = sideEffectInstances[name];\n\n                if (inst) {\n                    inst.sourceInfo(() => unit.getSourceInfo());\n                    inst.layers(() => unit.layers());\n                    inst.plotPointsFromIdentifiers((...params) =>\n                        unit.getPlotPointsFromIdentifiers(...params));\n                    inst instanceof SpawnableSideEffect &&\n                        inst.drawingContext(() => unit.getDrawingContext());\n                    inst.valueParser(unit.valueParser());\n                }\n            });\n        });\n        super.dispatchBehaviour(action, payload, propagationInf);\n    }\n}\n","import GroupFireBolt from './group-firebolt';\n\nexport default GroupFireBolt;\n","export const APP_INITIAL_STATE = {\n    app: {\n        group: {},\n        units: {},\n        layers: {},\n        canvas: {}\n    },\n    local: {\n        canvas: {},\n        group: {},\n        units: {},\n        layers: {}\n    }\n};\n\n","import { GridLayout } from '@chartshq/layout';\nimport { transactor, Store, getUniqueId, selectElement, STATE_NAMESPACES, CommonProps } from 'muze-utils';\nimport UnitBrushBehaviour from '@chartshq/visual-unit/src/firebolt/behaviours/brush';\nimport { physicalActions, sideEffects, behaviouralActions, behaviourEffectMap } from '@chartshq/muze-firebolt';\nimport { RETINAL } from '../constants';\nimport TransactionSupport from '../transaction-support';\nimport { getRenderDetails, prepareLayout, renderLayout } from './layout-maker';\nimport { localOptions, canvasOptions } from './local-options';\nimport GroupFireBolt from './firebolt';\nimport options from '../options';\nimport { APP_INITIAL_STATE } from './app-state';\nimport { initCanvas,\n        setupChangeListener,\n        setLabelRotationForAxes,\n        createGroupState,\n        createLayoutManager,\n        setLayoutInfForUnits\n} from './helper';\n/**\n * Canvas is a logical component which houses a visualization by taking multiple variable in different encoding channel.\n * Canvas manages lifecycle of many other logical component and exposes one consistent interface for creation of chart.\n * Canvas is intialized from environment with settings from environment and singleton dependencies.\n *\n * To create an instance of canvas\n * ```\n *  const env = Muze();\n *  const canvas = env.canvas()\n * ```\n *\n *\n * @class\n * @public\n * @module Canvas\n */\nexport default class Canvas extends TransactionSupport {\n\n    /**\n     * Creates reactive property accessors.\n     * - data\n     * - height\n     * - width\n     * - config\n     * This configs are retrieved from options.\n     */\n    constructor (globalDependencies) {\n        super();\n\n        this._allOptions = Object.assign({}, options, localOptions);\n        this._registry = {};\n        this._composition = {};\n        this._cachedProps = {};\n        this._alias = null;\n        this._renderedResolve = null;\n        this._renderedPromise = new Promise((resolve) => {\n            this._renderedResolve = resolve;\n        });\n        this._composition.layout = new GridLayout();\n        this._store = new Store(APP_INITIAL_STATE);\n\n        this._throwback = new Store({\n            [CommonProps.MATRIX_CREATED]: false,\n            [CommonProps.ON_LAYER_DRAW]: null,\n            propagationInfo: null\n        });\n\n        // Setters and getters will be mounted on this. The object will be mutated.\n        const namespace = STATE_NAMESPACES.CANVAS_LOCAL_NAMESPACE;\n        const allOptions = Object.assign({}, options, localOptions, canvasOptions);\n\n        transactor(this, allOptions, this._store, {\n            namespace\n        });\n\n        this.dependencies(Object.assign({}, globalDependencies, this._dependencies));\n        this.firebolt(new GroupFireBolt(this, {\n            behavioural: Object.assign({}, behaviouralActions, {\n                brush: UnitBrushBehaviour\n            }),\n            physical: physicalActions,\n            physicalBehaviouralMap: {}\n        }, sideEffects, behaviourEffectMap));\n        this.alias(`canvas-${getUniqueId()}`);\n        this.title('', {});\n        this.subtitle('', {});\n        this.legend({});\n        this.color({});\n        this.shape({});\n        this.size({});\n        setupChangeListener(this);\n         // init layoutManager\n        this._layoutManager = createLayoutManager();\n    }\n\n    /**\n     * Retrieves an instance of layout which is responsible for layouting. Layout is responsible for creating faceted\n     * presentation using table layout.\n     *\n     * @public\n     *\n     * @return {GridLayout} Instance of layout attached to canvas.\n     */\n    layout (...params) {\n        if (params.length) {\n            return this;\n        }\n        return this.composition().layout;\n    }\n\n    /**\n     * Retrieves the composition for a canvas\n     *\n     * @public\n     *\n     * @return {object} Instances of the components which canvas requires to draw the full visualization.\n     *      ```\n     *          {\n     *              layout: // Instance of {@link GridLayout}\n     *              legend: // Instance of {@link Legend}\n     *              subtitle: // Instance of {@link TextCell} using which the title is rendered\n     *              title: // Instance of {@link TextCell} using which the title is rendered\n     *              visualGroup: // Instance of {@link visualGroup}\n     *          }\n     *      ```\n     */\n    composition (...params) {\n        if (params.length) {\n            return this;\n        }\n        return this._composition;\n    }\n\n    done () {\n        return this._renderedPromise;\n    }\n\n    /**\n     * Sets or gets the alias of the canvas. Alias is a name by which the canvas can be referred.\n     *\n     * When setter\n     * @param {string} alias Name of the alias.\n     *\n     * @return {Canvas} Instance of the canvas.\n     *\n     * When getter\n     *\n     * @return {string} Alias of canvas.\n     *\n     * @public\n     */\n    alias (...params) {\n        if (params.length) {\n            const visualGroup = this.composition().visualGroup;\n            this._alias = params[0];\n            visualGroup && visualGroup.alias(this.alias());\n            return this;\n        }\n        return this._alias;\n    }\n\n    /**\n     * Creates an instance initiated with given settings.\n     *\n     * @param {Object} initialSettings Initial settings to be populated in the model\n     * @param {Object} regEntry newly created instance with the initial settings\n     * @param {Object} globalDependencies dependencies which will be created only once in the page\n     *\n     * @return {Object} newly created instance with the initial settings\n     */\n    static withSettings (initialSettings, regEntry, globalDependencies) {\n        const instance = new Canvas(globalDependencies);\n\n        for (const key in initialSettings) {\n            instance[key](initialSettings[key]);\n        }\n        // set registry for instance\n        instance.registry(regEntry);\n        return instance;\n    }\n\n    /**\n     *\n     *\n     * @static\n     *\n     * @memberof Canvas\n     */\n    static formalName () {\n        return 'canvas';\n    }\n\n    /**\n     * Returns the instance of firebolt associated with this canvas. The firebolt instance can be used to dispatch a\n     * behaviour dynamically on the canvas. This firebolt does not handle any physical actions. It is just used to\n     * propagate the action to all the visual units in it's composition.\n     *\n     * @public\n     *\n     * @return {GroupFireBolt} Instance of firebolt associated with canvas.\n     */\n    firebolt (...firebolt) {\n        if (firebolt.length) {\n            this._firebolt = firebolt[0];\n            return this;\n        }\n        return this._firebolt;\n    }\n\n    /**\n     * Registry peoperty accessor\n     *\n     * @param {Object} reg plain old javascript object keyvalue pairs. Key containing module name and value contains\n     * module definition class. The reg object has to be flat object of level 1.\n     */\n    registry (...params) {\n        if (params.length) {\n            const param = params[0];\n            const components = Object.assign({}, param.components);\n            const componentSubRegistry = Object.assign({}, param.componentSubRegistry);\n            const interactionRegistry = Object.assign({}, param.interactions);\n\n            this._registry = { components, componentSubRegistry, interactions: interactionRegistry };\n            const initedComponents = initCanvas(this);\n            // @todo is it okay to continue this tight behaviour? If not use a resolver to resolve diff component type.\n            this._composition.visualGroup = initedComponents[0];\n            createGroupState(this);\n            this.composition().visualGroup.alias(this.alias()).store(this._store);\n            return this;\n        }\n        return this._registry;\n    }\n\n    /*\n     * Prepare dependencies for top level elements\n     */\n    dependencies (...param) {\n        if (param.length) {\n            this._dependencies = param[0];\n            return this;\n        }\n        // @todo prepare dependencies here.\n        return this._dependencies;\n    }\n\n    /**\n     *\n     *\n     * @param {*} lifeCycles\n     *\n     * @memberof Canvas\n     */\n    lifeCycle (lifeCycles) {\n        const lifeCycleManager = this.dependencies().lifeCycleManager;\n        if (lifeCycles) {\n            lifeCycleManager.register(lifeCycles);\n            return this;\n        }\n        return lifeCycleManager;\n    }\n\n    /**\n     *\n     *\n     * @readonly\n     * @memberof Canvas\n     */\n    legend (...params) {\n        if (params.length) {\n            return this;\n        }\n        return this.composition().legend;\n    }\n\n    /**\n     * Returns a promise for various {@link LifecycleEvents} of the various components of canvas. The promise gets\n     * resolved once the particular event gets completed.\n     *\n     * To use this,\n     * ```\n     *      canvas.once('layer.drawn').then(() => {\n     *          // Do any post drawing work here.\n     *      });\n     * ```\n     * @public\n     *\n     * @param {string} eventName Name of the lifecycle event.\n     *\n     * @return {Promise} A pending promise waiting for resolve to be called.\n     */\n    once (eventName) {\n        const lifeCycleManager = this.dependencies().lifeCycleManager;\n        return lifeCycleManager.retrieve(eventName);\n    }\n\n    /**\n     * Internal function to trigger render, this method is cognizant of all the properties of the core modules and\n     * establish a passive reactivity. Passive reactivity is not always a bad thing :)\n     * @internal\n     */\n    render () {\n        const mount = this.mount();\n        // removeChild(mount);\n        const lifeCycleManager = this.dependencies().lifeCycleManager;\n        // Get render details including arrangement and measurement\n        const renderDetails = getRenderDetails(this, mount);\n        lifeCycleManager.notify({ client: this, action: 'beforedraw' });\n        // Prepare the layout by triggering the matrix calculation\n        prepareLayout(this.layout(), renderDetails);\n\n        this._layoutManager.dimension({\n            height: renderDetails.measurement.canvasHeight,\n            width: renderDetails.measurement.canvasWidth\n        });\n\n        this._layoutManager.renderAt(mount);\n\n        // Render each component\n        renderLayout(this, renderDetails);\n\n        setLayoutInfForUnits(this);\n\n        // setLabelRotation\n        setLabelRotationForAxes(this);\n\n        this.firebolt().mapActionsAndBehaviour();\n    }\n\n    /**\n     * Returns the instances of x axis of the canvas. It returns the instances in a two dimensional array form.\n     *\n     * ```\n     *   // The first element in the sub array represents the top axis and the second element represents the bottom\n     *   // axis.\n     *   [\n     *      [X1, X2],\n     *      [X3, X4]\n     *   ]\n     * ```\n     * @public\n     *\n     * @return {Array.<Array>} Instances of x axis.\n     */\n    xAxes () {\n        return this.composition().visualGroup.getAxes('x');\n    }\n\n    /**\n     * Returns the instances of y axis of the canvas. It returns the instances in a two dimensional array form.\n     *\n     * ```\n     *   // The first element in the sub array represents the left axis and the second element represents the right\n     *   // axis.\n     *   [\n     *      [Y1, Y2],\n     *      [Y3, Y4]\n     *   ]\n     * ```\n     * @public\n     * @return {Array.<Array>} Instances of y axis.\n     */\n    yAxes () {\n        return this.composition().visualGroup.getAxes('y');\n    }\n\n    /**\n     * Returns all the retinal axis of the canvas. Color, shape and size axis are combinedly called retinal axis.\n     *\n     * @public\n     * @return {Object} Instances of retinal axis.\n     *          ```\n     *              {\n     *                  color: [ColorAxis], // Array of color axis.\n     *                  shape: [ShapeAxis], // Array of shape axis.\n     *                  size: [SizeAxis] // Array of size axis.\n     *              }\n     *          ```\n     */\n    getRetinalAxes () {\n        const visualGroup = this.composition().visualGroup;\n        return visualGroup.getAxes(RETINAL);\n    }\n\n    mount (...params) {\n        if (params.length) {\n            let value = params[0];\n            if (typeof params[0] === 'string') {\n                value = selectElement(params[0]).node();\n            }\n            this._mount = value;\n            return this;\n        }\n        return this._mount;\n    }\n}\n","import { cellRegistry, SimpleCell } from '@chartshq/visual-cell';\nimport { VisualUnit } from '@chartshq/visual-unit';\nimport { layerRegistry } from '@chartshq/visual-layer';\nimport { SimpleGroup, VisualGroup } from '@chartshq/visual-group';\nimport { registry as interactionRegistry } from '@chartshq/muze-firebolt';\n\nexport const COMPONENTS = {\n    [VisualGroup.formalName()]: VisualGroup,\n    [VisualUnit.formalName()]: VisualUnit\n};\n\nexport const SUBREGISTRIES = {\n    cells: cellRegistry,\n    layers: layerRegistry\n};\nexport const INTERFACES = {\n    SimpleGroup,\n    SimpleCell\n};\n\nconst componentRegistry = (components = COMPONENTS) => {\n    const reg = Object.assign({}, components);\n\n    return {\n        register: (cls) => {\n            const key = cls.formalName();\n            reg[key] = cls;\n            return componentRegistry;\n        },\n        get: () => reg\n    };\n};\n\nexport const registry = {\n    components: componentRegistry(COMPONENTS),\n    cells: cellRegistry(),\n    layers: layerRegistry(),\n    interactions: interactionRegistry\n};\n","import * as utils from 'muze-utils';\n\nimport { VisualUnit, helpers as unitHelpers, enums as unitEnums, UnitFireBolt } from '@chartshq/visual-unit';\nimport { VisualGroup, Encoders, encoderHelpers, groupUtils, enums as groupEnums } from '@chartshq/visual-group';\nimport {\n    SurrogateSideEffect,\n    SpawnableSideEffect,\n    sideEffects,\n    PersistentBehaviour,\n    GenericBehaviour,\n    VolatileBehaviour,\n    behaviouralActions,\n    GenericSideEffect,\n    Firebolt\n} from '@chartshq/muze-firebolt';\nimport {\n    layerFactory,\n    BaseLayer,\n    LineLayer,\n    TextLayer,\n    TickLayer,\n    PointLayer,\n    helpers,\n    enums,\n    SimpleLayer,\n    AreaLayer,\n    ArcLayer,\n    layerMixins\n} from '@chartshq/visual-layer';\nimport pkg from '../package.json';\nimport * as operators from './operators';\nimport { actionModel as ActionModel } from './action-model';\nimport options from './options';\nimport { Canvas } from './canvas';\nimport { registry as globalRegistry, SUBREGISTRIES } from './default-registry';\nimport './muze.scss';\n\nconst {\n    transactor,\n    Smartlabel,\n    enableChainedTransaction,\n    LifeCycleManager,\n    DataModel,\n    Store\n} = utils;\n\n// Cache singleton instances which should be included only once in a page\nconst globalCache = {};\nconst defaultRegistry = globalRegistry.components;\n\nconst overrideRegistryDefinitions = (overrideRegistry, registry) => {\n    overrideRegistry.forEach((def) => {\n        registry.register(def);\n    });\n};\n\n/**\n * Entry point to renderer. Initializes an environment with settings and registries for canvas. This is a simple wrapper\n * over {@link Canvas} which enables common configuration passing to multiple such canvases.\n *\n * Everytime `muze()` is called it creates an environment. These environment supports subset of APIs of Canvas. If\n * common configuration is used to render multiple canvases then it can be set directly in the env. Like if data is\n * common across all the visulization then its better to set the data in env. When a canvas is created it receives all\n * those configuration from env.\n *\n * ```\n *  // Creates an environment\n *  const env = muze()\n *  // Set data property in environment, so that all the canvas created from the same environment gets this data\n *  // automatically\n *  env.data(dm);\n *  // Creates canvas, by default env pushes data to canvas instance\n *  const canvas = env.canvas();\n * ```\n *\n * If a property is set on both environment and canvas instance, property set on canvas instance gets more priority.\n *\n * @public\n * @module muze\n * @namespace Muze\n *\n * @return {Env} Instance of an environment\n */\nconst muze = () => {\n    // Setters and getters will be mounted on this. Object will be mutated.\n    const [env, globalStore] = transactor({}, options);\n    const components = Object.assign({}, globalRegistry.components.get());\n    const componentSubRegistryDef = Object.assign({}, SUBREGISTRIES);\n\n    const componentSubRegistry = {};\n\n    for (const prop in componentSubRegistryDef) {\n        componentSubRegistry[prop] = componentSubRegistryDef[prop](globalRegistry[prop].get());\n    }\n\n    // Apart form the setter getter, an instance method is injected to create real renderer instances\n    env.canvas = () => {\n        // Create a canvas instance with this settings\n        const settings = globalStore.serialize();\n        const canvas = Canvas.withSettings(settings, { /* registry */\n            components,\n            componentSubRegistry,\n            interactions: globalRegistry.interactions\n        }, env.globalDependencies());\n\n        // Whenever settings is changed canvas is updated\n        enableChainedTransaction(globalStore, canvas, Object.keys(settings));\n\n        return canvas;\n    };\n\n    // Global dependencies for for compositions. Only one copy of the same should be in the page\n    env.globalDependencies = () => {\n        if (!globalCache.smartlabel) {\n            globalCache.smartlabel = new Smartlabel(1, 'body');\n        }\n        return {\n            smartlabel: globalCache.smartlabel,\n            lifeCycleManager: new LifeCycleManager()\n        };\n    };\n\n    // Retrieves global settings. This getter is readonly so that user can't change this as change should happen\n    // only from setter to avoid unwanted sync issues.\n    env.settings = () => globalStore.serialize();\n\n    env.registry = (...overrideRegistry) => {\n        // Selectively copy the properties from COMPONENTS\n        if (overrideRegistry.length) {\n            overrideRegistry.forEach((def) => {\n                const prop = def.formalName();\n                if (prop in defaultRegistry) {\n                    components[prop] = def;\n                }\n            });\n            return env;\n        }\n        return components;\n    };\n\n    env.cellRegistry = (...overrideRegistry) => {\n        const cellRegistry = componentSubRegistry.cellRegistry;\n        if (overrideRegistry.length) {\n            overrideRegistryDefinitions(overrideRegistry, cellRegistry);\n            return env;\n        }\n        return cellRegistry.get();\n    };\n\n    env.layerRegistry = (...overrideRegistry) => {\n        const layerRegistry = componentSubRegistry.layerRegistry;\n        if (overrideRegistry.length) {\n            overrideRegistryDefinitions(overrideRegistry, layerRegistry);\n            return env;\n        }\n        return layerRegistry.get();\n    };\n\n    return env;\n};\n\nmuze.registry = globalRegistry;\n\nmuze.Components = {\n    VisualLayer: {\n        layers: {\n            BaseLayer,\n            LineLayer,\n            TextLayer,\n            TickLayer,\n            PointLayer,\n            SimpleLayer,\n            AreaLayer,\n            ArcLayer\n        },\n        helpers,\n        enums,\n        layerMixins\n    },\n    VisualUnit: {\n        constructor: VisualUnit,\n        helpers: unitHelpers,\n        enums: unitEnums,\n        UnitFireBolt\n    },\n    VisualGroup: {\n        constructor: VisualGroup,\n        Encoders,\n        encoderHelpers,\n        groupUtils,\n        enums: groupEnums\n    },\n    Canvas: {\n        constructor: Canvas\n    },\n    Firebolt: {\n        constructor: Firebolt\n    }\n};\n\nconst SideEffects = {\n    sideEffects,\n    standards: {\n        SurrogateSideEffect,\n        SpawnableSideEffect,\n        GenericSideEffect\n    }\n};\n\nconst Behaviours = {\n    behaviouralActions,\n    standards: {\n        GenericBehaviour,\n        PersistentBehaviour,\n        VolatileBehaviour\n    }\n};\n\nmuze.DataModel = DataModel;\nmuze.version = pkg.version;\nmuze.SideEffects = SideEffects;\nmuze.ActionModel = ActionModel;\nmuze.layerFactory = layerFactory;\nmuze.Operators = operators;\nmuze.Behaviours = Behaviours;\nmuze.utils = utils;\nmuze.Model = new Store().model.constructor;\n\nexport default muze;\n"],"sourceRoot":""}